var Tdt=Object.defineProperty;var Mdt=(n,t,e)=>t in n?Tdt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Js=(n,t,e)=>Mdt(n,typeof t!="symbol"?t+"":t,e);function Pdt(n,t){for(var e=0;e<t.length;e++){const i=t[e];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();var So=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Du(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var _U={exports:{}},ck={},yU={exports:{}},Ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i1=Symbol.for("react.element"),Edt=Symbol.for("react.portal"),Odt=Symbol.for("react.fragment"),Rdt=Symbol.for("react.strict_mode"),Idt=Symbol.for("react.profiler"),Ldt=Symbol.for("react.provider"),Ddt=Symbol.for("react.context"),Bdt=Symbol.for("react.forward_ref"),Fdt=Symbol.for("react.suspense"),jdt=Symbol.for("react.memo"),Ndt=Symbol.for("react.lazy"),d8=Symbol.iterator;function zdt(n){return n===null||typeof n!="object"?null:(n=d8&&n[d8]||n["@@iterator"],typeof n=="function"?n:null)}var bU={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xU=Object.assign,SU={};function fm(n,t,e){this.props=n,this.context=t,this.refs=SU,this.updater=e||bU}fm.prototype.isReactComponent={};fm.prototype.setState=function(n,t){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,t,"setState")};fm.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function AU(){}AU.prototype=fm.prototype;function DD(n,t,e){this.props=n,this.context=t,this.refs=SU,this.updater=e||bU}var BD=DD.prototype=new AU;BD.constructor=DD;xU(BD,fm.prototype);BD.isPureReactComponent=!0;var p8=Array.isArray,wU=Object.prototype.hasOwnProperty,FD={current:null},CU={key:!0,ref:!0,__self:!0,__source:!0};function kU(n,t,e){var i,r={},s=null,a=null;if(t!=null)for(i in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)wU.call(t,i)&&!CU.hasOwnProperty(i)&&(r[i]=t[i]);var o=arguments.length-2;if(o===1)r.children=e;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];r.children=l}if(n&&n.defaultProps)for(i in o=n.defaultProps,o)r[i]===void 0&&(r[i]=o[i]);return{$$typeof:i1,type:n,key:s,ref:a,props:r,_owner:FD.current}}function Hdt(n,t){return{$$typeof:i1,type:n.type,key:t,ref:n.ref,props:n.props,_owner:n._owner}}function jD(n){return typeof n=="object"&&n!==null&&n.$$typeof===i1}function Vdt(n){var t={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(e){return t[e]})}var f8=/\/+/g;function ZM(n,t){return typeof n=="object"&&n!==null&&n.key!=null?Vdt(""+n.key):t.toString(36)}function Qx(n,t,e,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case i1:case Edt:a=!0}}if(a)return a=n,r=r(a),n=i===""?"."+ZM(a,0):i,p8(r)?(e="",n!=null&&(e=n.replace(f8,"$&/")+"/"),Qx(r,t,e,"",function(u){return u})):r!=null&&(jD(r)&&(r=Hdt(r,e+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(f8,"$&/")+"/")+n)),t.push(r)),1;if(a=0,i=i===""?".":i+":",p8(n))for(var o=0;o<n.length;o++){s=n[o];var l=i+ZM(s,o);a+=Qx(s,t,e,l,r)}else if(l=zdt(n),typeof l=="function")for(n=l.call(n),o=0;!(s=n.next()).done;)s=s.value,l=i+ZM(s,o++),a+=Qx(s,t,e,l,r);else if(s==="object")throw t=String(n),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Rb(n,t,e){if(n==null)return n;var i=[],r=0;return Qx(n,i,"","",function(s){return t.call(e,s,r++)}),i}function Wdt(n){if(n._status===-1){var t=n._result;t=t(),t.then(function(e){(n._status===0||n._status===-1)&&(n._status=1,n._result=e)},function(e){(n._status===0||n._status===-1)&&(n._status=2,n._result=e)}),n._status===-1&&(n._status=0,n._result=t)}if(n._status===1)return n._result.default;throw n._result}var fs={current:null},tS={transition:null},$dt={ReactCurrentDispatcher:fs,ReactCurrentBatchConfig:tS,ReactCurrentOwner:FD};function TU(){throw Error("act(...) is not supported in production builds of React.")}Ye.Children={map:Rb,forEach:function(n,t,e){Rb(n,function(){t.apply(this,arguments)},e)},count:function(n){var t=0;return Rb(n,function(){t++}),t},toArray:function(n){return Rb(n,function(t){return t})||[]},only:function(n){if(!jD(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ye.Component=fm;Ye.Fragment=Odt;Ye.Profiler=Idt;Ye.PureComponent=DD;Ye.StrictMode=Rdt;Ye.Suspense=Fdt;Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$dt;Ye.act=TU;Ye.cloneElement=function(n,t,e){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=xU({},n.props),r=n.key,s=n.ref,a=n._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=FD.current),t.key!==void 0&&(r=""+t.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(l in t)wU.call(t,l)&&!CU.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=e;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];i.children=o}return{$$typeof:i1,type:n.type,key:r,ref:s,props:i,_owner:a}};Ye.createContext=function(n){return n={$$typeof:Ddt,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Ldt,_context:n},n.Consumer=n};Ye.createElement=kU;Ye.createFactory=function(n){var t=kU.bind(null,n);return t.type=n,t};Ye.createRef=function(){return{current:null}};Ye.forwardRef=function(n){return{$$typeof:Bdt,render:n}};Ye.isValidElement=jD;Ye.lazy=function(n){return{$$typeof:Ndt,_payload:{_status:-1,_result:n},_init:Wdt}};Ye.memo=function(n,t){return{$$typeof:jdt,type:n,compare:t===void 0?null:t}};Ye.startTransition=function(n){var t=tS.transition;tS.transition={};try{n()}finally{tS.transition=t}};Ye.unstable_act=TU;Ye.useCallback=function(n,t){return fs.current.useCallback(n,t)};Ye.useContext=function(n){return fs.current.useContext(n)};Ye.useDebugValue=function(){};Ye.useDeferredValue=function(n){return fs.current.useDeferredValue(n)};Ye.useEffect=function(n,t){return fs.current.useEffect(n,t)};Ye.useId=function(){return fs.current.useId()};Ye.useImperativeHandle=function(n,t,e){return fs.current.useImperativeHandle(n,t,e)};Ye.useInsertionEffect=function(n,t){return fs.current.useInsertionEffect(n,t)};Ye.useLayoutEffect=function(n,t){return fs.current.useLayoutEffect(n,t)};Ye.useMemo=function(n,t){return fs.current.useMemo(n,t)};Ye.useReducer=function(n,t,e){return fs.current.useReducer(n,t,e)};Ye.useRef=function(n){return fs.current.useRef(n)};Ye.useState=function(n){return fs.current.useState(n)};Ye.useSyncExternalStore=function(n,t,e){return fs.current.useSyncExternalStore(n,t,e)};Ye.useTransition=function(){return fs.current.useTransition()};Ye.version="18.3.1";yU.exports=Ye;var V=yU.exports;const B=Du(V),Gdt=Pdt({__proto__:null,default:B},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Udt=V,Ydt=Symbol.for("react.element"),Xdt=Symbol.for("react.fragment"),Kdt=Object.prototype.hasOwnProperty,qdt=Udt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zdt={key:!0,ref:!0,__self:!0,__source:!0};function MU(n,t,e){var i,r={},s=null,a=null;e!==void 0&&(s=""+e),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(i in t)Kdt.call(t,i)&&!Zdt.hasOwnProperty(i)&&(r[i]=t[i]);if(n&&n.defaultProps)for(i in t=n.defaultProps,t)r[i]===void 0&&(r[i]=t[i]);return{$$typeof:Ydt,type:n,key:s,ref:a,props:r,_owner:qdt.current}}ck.Fragment=Xdt;ck.jsx=MU;ck.jsxs=MU;_U.exports=ck;var _t=_U.exports,pO={},PU={exports:{}},ba={},EU={exports:{}},OU={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function t(j,G){var U=j.length;j.push(G);t:for(;0<U;){var $=U-1>>>1,q=j[$];if(0<r(q,G))j[$]=G,j[U]=q,U=$;else break t}}function e(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var G=j[0],U=j.pop();if(U!==G){j[0]=U;t:for(var $=0,q=j.length,tt=q>>>1;$<tt;){var it=2*($+1)-1,nt=j[it],K=it+1,J=j[K];if(0>r(nt,U))K<q&&0>r(J,nt)?(j[$]=J,j[K]=U,$=K):(j[$]=nt,j[it]=U,$=it);else if(K<q&&0>r(J,U))j[$]=J,j[K]=U,$=K;else break t}}return G}function r(j,G){var U=j.sortIndex-G.sortIndex;return U!==0?U:j.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],u=[],h=1,c=null,d=3,p=!1,f=!1,g=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(j){for(var G=e(u);G!==null;){if(G.callback===null)i(u);else if(G.startTime<=j)i(u),G.sortIndex=G.expirationTime,t(l,G);else break;G=e(u)}}function S(j){if(g=!1,b(j),!f)if(e(l)!==null)f=!0,L(A);else{var G=e(u);G!==null&&H(S,G.startTime-j)}}function A(j,G){f=!1,g&&(g=!1,v(k),k=-1),p=!0;var U=d;try{for(b(G),c=e(l);c!==null&&(!(c.expirationTime>G)||j&&!E());){var $=c.callback;if(typeof $=="function"){c.callback=null,d=c.priorityLevel;var q=$(c.expirationTime<=G);G=n.unstable_now(),typeof q=="function"?c.callback=q:c===e(l)&&i(l),b(G)}else i(l);c=e(l)}if(c!==null)var tt=!0;else{var it=e(u);it!==null&&H(S,it.startTime-G),tt=!1}return tt}finally{c=null,d=U,p=!1}}var w=!1,C=null,k=-1,M=5,P=-1;function E(){return!(n.unstable_now()-P<M)}function I(){if(C!==null){var j=n.unstable_now();P=j;var G=!0;try{G=C(!0,j)}finally{G?D():(w=!1,C=null)}}else w=!1}var D;if(typeof y=="function")D=function(){y(I)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,O=N.port2;N.port1.onmessage=I,D=function(){O.postMessage(null)}}else D=function(){_(I,0)};function L(j){C=j,w||(w=!0,D())}function H(j,G){k=_(function(){j(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_continueExecution=function(){f||p||(f=!0,L(A))},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return e(l)},n.unstable_next=function(j){switch(d){case 1:case 2:case 3:var G=3;break;default:G=d}var U=d;d=G;try{return j()}finally{d=U}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(j,G){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var U=d;d=j;try{return G()}finally{d=U}},n.unstable_scheduleCallback=function(j,G,U){var $=n.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?$+U:$):U=$,j){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=U+q,j={id:h++,callback:G,priorityLevel:j,startTime:U,expirationTime:q,sortIndex:-1},U>$?(j.sortIndex=U,t(u,j),e(l)===null&&j===e(u)&&(g?(v(k),k=-1):g=!0,H(S,U-$))):(j.sortIndex=q,t(l,j),f||p||(f=!0,L(A))),j},n.unstable_shouldYield=E,n.unstable_wrapCallback=function(j){var G=d;return function(){var U=d;d=G;try{return j.apply(this,arguments)}finally{d=U}}}})(OU);EU.exports=OU;var Jdt=EU.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qdt=V,va=Jdt;function Ft(n){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+n,e=1;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var RU=new Set,w_={};function _p(n,t){Cg(n,t),Cg(n+"Capture",t)}function Cg(n,t){for(w_[n]=t,n=0;n<t.length;n++)RU.add(t[n])}var Au=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fO=Object.prototype.hasOwnProperty,tpt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g8={},m8={};function ept(n){return fO.call(m8,n)?!0:fO.call(g8,n)?!1:tpt.test(n)?m8[n]=!0:(g8[n]=!0,!1)}function ipt(n,t,e,i){if(e!==null&&e.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:e!==null?!e.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function npt(n,t,e,i){if(t===null||typeof t>"u"||ipt(n,t,e,i))return!0;if(i)return!1;if(e!==null)switch(e.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function gs(n,t,e,i,r,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=e,this.propertyName=n,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var yr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){yr[n]=new gs(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var t=n[0];yr[t]=new gs(t,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){yr[n]=new gs(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){yr[n]=new gs(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){yr[n]=new gs(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){yr[n]=new gs(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){yr[n]=new gs(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){yr[n]=new gs(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){yr[n]=new gs(n,5,!1,n.toLowerCase(),null,!1,!1)});var ND=/[\-:]([a-z])/g;function zD(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var t=n.replace(ND,zD);yr[t]=new gs(t,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var t=n.replace(ND,zD);yr[t]=new gs(t,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var t=n.replace(ND,zD);yr[t]=new gs(t,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){yr[n]=new gs(n,1,!1,n.toLowerCase(),null,!1,!1)});yr.xlinkHref=new gs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){yr[n]=new gs(n,1,!1,n.toLowerCase(),null,!0,!0)});function HD(n,t,e,i){var r=yr.hasOwnProperty(t)?yr[t]:null;(r!==null?r.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(npt(t,e,r,i)&&(e=null),i||r===null?ept(t)&&(e===null?n.removeAttribute(t):n.setAttribute(t,""+e)):r.mustUseProperty?n[r.propertyName]=e===null?r.type===3?!1:"":e:(t=r.attributeName,i=r.attributeNamespace,e===null?n.removeAttribute(t):(r=r.type,e=r===3||r===4&&e===!0?"":""+e,i?n.setAttributeNS(i,t,e):n.setAttribute(t,e))))}var Bu=Qdt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ib=Symbol.for("react.element"),gf=Symbol.for("react.portal"),mf=Symbol.for("react.fragment"),VD=Symbol.for("react.strict_mode"),gO=Symbol.for("react.profiler"),IU=Symbol.for("react.provider"),LU=Symbol.for("react.context"),WD=Symbol.for("react.forward_ref"),mO=Symbol.for("react.suspense"),vO=Symbol.for("react.suspense_list"),$D=Symbol.for("react.memo"),ch=Symbol.for("react.lazy"),DU=Symbol.for("react.offscreen"),v8=Symbol.iterator;function ov(n){return n===null||typeof n!="object"?null:(n=v8&&n[v8]||n["@@iterator"],typeof n=="function"?n:null)}var cn=Object.assign,JM;function Bv(n){if(JM===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);JM=t&&t[1]||""}return`
`+JM+n}var QM=!1;function tP(n,t){if(!n||QM)return"";QM=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(n,[],t)}else{try{t.call()}catch(u){i=u}n.call(t.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||r[a]!==s[o]){var l=`
`+r[a].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=a&&0<=o);break}}}finally{QM=!1,Error.prepareStackTrace=e}return(n=n?n.displayName||n.name:"")?Bv(n):""}function rpt(n){switch(n.tag){case 5:return Bv(n.type);case 16:return Bv("Lazy");case 13:return Bv("Suspense");case 19:return Bv("SuspenseList");case 0:case 2:case 15:return n=tP(n.type,!1),n;case 11:return n=tP(n.type.render,!1),n;case 1:return n=tP(n.type,!0),n;default:return""}}function _O(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case mf:return"Fragment";case gf:return"Portal";case gO:return"Profiler";case VD:return"StrictMode";case mO:return"Suspense";case vO:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case LU:return(n.displayName||"Context")+".Consumer";case IU:return(n._context.displayName||"Context")+".Provider";case WD:var t=n.render;return n=n.displayName,n||(n=t.displayName||t.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case $D:return t=n.displayName||null,t!==null?t:_O(n.type)||"Memo";case ch:t=n._payload,n=n._init;try{return _O(n(t))}catch{}}return null}function spt(n){var t=n.type;switch(n.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=t.render,n=n.displayName||n.name||"",t.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _O(t);case 8:return t===VD?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function cc(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function BU(n){var t=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function apt(n){var t=BU(n)?"checked":"value",e=Object.getOwnPropertyDescriptor(n.constructor.prototype,t),i=""+n[t];if(!n.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var r=e.get,s=e.set;return Object.defineProperty(n,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(n,t,{enumerable:e.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[t]}}}}function Lb(n){n._valueTracker||(n._valueTracker=apt(n))}function FU(n){if(!n)return!1;var t=n._valueTracker;if(!t)return!0;var e=t.getValue(),i="";return n&&(i=BU(n)?n.checked?"true":"false":n.value),n=i,n!==e?(t.setValue(n),!0):!1}function PS(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function yO(n,t){var e=t.checked;return cn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??n._wrapperState.initialChecked})}function _8(n,t){var e=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;e=cc(t.value!=null?t.value:e),n._wrapperState={initialChecked:i,initialValue:e,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function jU(n,t){t=t.checked,t!=null&&HD(n,"checked",t,!1)}function bO(n,t){jU(n,t);var e=cc(t.value),i=t.type;if(e!=null)i==="number"?(e===0&&n.value===""||n.value!=e)&&(n.value=""+e):n.value!==""+e&&(n.value=""+e);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}t.hasOwnProperty("value")?xO(n,t.type,e):t.hasOwnProperty("defaultValue")&&xO(n,t.type,cc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(n.defaultChecked=!!t.defaultChecked)}function y8(n,t,e){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+n._wrapperState.initialValue,e||t===n.value||(n.value=t),n.defaultValue=t}e=n.name,e!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,e!==""&&(n.name=e)}function xO(n,t,e){(t!=="number"||PS(n.ownerDocument)!==n)&&(e==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+e&&(n.defaultValue=""+e))}var Fv=Array.isArray;function ig(n,t,e,i){if(n=n.options,t){t={};for(var r=0;r<e.length;r++)t["$"+e[r]]=!0;for(e=0;e<n.length;e++)r=t.hasOwnProperty("$"+n[e].value),n[e].selected!==r&&(n[e].selected=r),r&&i&&(n[e].defaultSelected=!0)}else{for(e=""+cc(e),t=null,r=0;r<n.length;r++){if(n[r].value===e){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}t!==null||n[r].disabled||(t=n[r])}t!==null&&(t.selected=!0)}}function SO(n,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ft(91));return cn({},t,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function b8(n,t){var e=t.value;if(e==null){if(e=t.children,t=t.defaultValue,e!=null){if(t!=null)throw Error(Ft(92));if(Fv(e)){if(1<e.length)throw Error(Ft(93));e=e[0]}t=e}t==null&&(t=""),e=t}n._wrapperState={initialValue:cc(e)}}function NU(n,t){var e=cc(t.value),i=cc(t.defaultValue);e!=null&&(e=""+e,e!==n.value&&(n.value=e),t.defaultValue==null&&n.defaultValue!==e&&(n.defaultValue=e)),i!=null&&(n.defaultValue=""+i)}function x8(n){var t=n.textContent;t===n._wrapperState.initialValue&&t!==""&&t!==null&&(n.value=t)}function zU(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function AO(n,t){return n==null||n==="http://www.w3.org/1999/xhtml"?zU(t):n==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Db,HU=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,e,i,r){MSApp.execUnsafeLocalFunction(function(){return n(t,e,i,r)})}:n}(function(n,t){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=t;else{for(Db=Db||document.createElement("div"),Db.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Db.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;t.firstChild;)n.appendChild(t.firstChild)}});function C_(n,t){if(t){var e=n.firstChild;if(e&&e===n.lastChild&&e.nodeType===3){e.nodeValue=t;return}}n.textContent=t}var i0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},opt=["Webkit","ms","Moz","O"];Object.keys(i0).forEach(function(n){opt.forEach(function(t){t=t+n.charAt(0).toUpperCase()+n.substring(1),i0[t]=i0[n]})});function VU(n,t,e){return t==null||typeof t=="boolean"||t===""?"":e||typeof t!="number"||t===0||i0.hasOwnProperty(n)&&i0[n]?(""+t).trim():t+"px"}function WU(n,t){n=n.style;for(var e in t)if(t.hasOwnProperty(e)){var i=e.indexOf("--")===0,r=VU(e,t[e],i);e==="float"&&(e="cssFloat"),i?n.setProperty(e,r):n[e]=r}}var lpt=cn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wO(n,t){if(t){if(lpt[n]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ft(137,n));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ft(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ft(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ft(62))}}function CO(n,t){if(n.indexOf("-")===-1)return typeof t.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kO=null;function GD(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var TO=null,ng=null,rg=null;function S8(n){if(n=s1(n)){if(typeof TO!="function")throw Error(Ft(280));var t=n.stateNode;t&&(t=mk(t),TO(n.stateNode,n.type,t))}}function $U(n){ng?rg?rg.push(n):rg=[n]:ng=n}function GU(){if(ng){var n=ng,t=rg;if(rg=ng=null,S8(n),t)for(n=0;n<t.length;n++)S8(t[n])}}function UU(n,t){return n(t)}function YU(){}var eP=!1;function XU(n,t,e){if(eP)return n(t,e);eP=!0;try{return UU(n,t,e)}finally{eP=!1,(ng!==null||rg!==null)&&(YU(),GU())}}function k_(n,t){var e=n.stateNode;if(e===null)return null;var i=mk(e);if(i===null)return null;e=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break t;default:n=!1}if(n)return null;if(e&&typeof e!="function")throw Error(Ft(231,t,typeof e));return e}var MO=!1;if(Au)try{var lv={};Object.defineProperty(lv,"passive",{get:function(){MO=!0}}),window.addEventListener("test",lv,lv),window.removeEventListener("test",lv,lv)}catch{MO=!1}function upt(n,t,e,i,r,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(e,u)}catch(h){this.onError(h)}}var n0=!1,ES=null,OS=!1,PO=null,hpt={onError:function(n){n0=!0,ES=n}};function cpt(n,t,e,i,r,s,a,o,l){n0=!1,ES=null,upt.apply(hpt,arguments)}function dpt(n,t,e,i,r,s,a,o,l){if(cpt.apply(this,arguments),n0){if(n0){var u=ES;n0=!1,ES=null}else throw Error(Ft(198));OS||(OS=!0,PO=u)}}function yp(n){var t=n,e=n;if(n.alternate)for(;t.return;)t=t.return;else{n=t;do t=n,t.flags&4098&&(e=t.return),n=t.return;while(n)}return t.tag===3?e:null}function KU(n){if(n.tag===13){var t=n.memoizedState;if(t===null&&(n=n.alternate,n!==null&&(t=n.memoizedState)),t!==null)return t.dehydrated}return null}function A8(n){if(yp(n)!==n)throw Error(Ft(188))}function ppt(n){var t=n.alternate;if(!t){if(t=yp(n),t===null)throw Error(Ft(188));return t!==n?null:n}for(var e=n,i=t;;){var r=e.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){e=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===e)return A8(r),n;if(s===i)return A8(r),t;s=s.sibling}throw Error(Ft(188))}if(e.return!==i.return)e=r,i=s;else{for(var a=!1,o=r.child;o;){if(o===e){a=!0,e=r,i=s;break}if(o===i){a=!0,i=r,e=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===e){a=!0,e=s,i=r;break}if(o===i){a=!0,i=s,e=r;break}o=o.sibling}if(!a)throw Error(Ft(189))}}if(e.alternate!==i)throw Error(Ft(190))}if(e.tag!==3)throw Error(Ft(188));return e.stateNode.current===e?n:t}function qU(n){return n=ppt(n),n!==null?ZU(n):null}function ZU(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var t=ZU(n);if(t!==null)return t;n=n.sibling}return null}var JU=va.unstable_scheduleCallback,w8=va.unstable_cancelCallback,fpt=va.unstable_shouldYield,gpt=va.unstable_requestPaint,Pn=va.unstable_now,mpt=va.unstable_getCurrentPriorityLevel,UD=va.unstable_ImmediatePriority,QU=va.unstable_UserBlockingPriority,RS=va.unstable_NormalPriority,vpt=va.unstable_LowPriority,tY=va.unstable_IdlePriority,dk=null,bl=null;function _pt(n){if(bl&&typeof bl.onCommitFiberRoot=="function")try{bl.onCommitFiberRoot(dk,n,void 0,(n.current.flags&128)===128)}catch{}}var Bo=Math.clz32?Math.clz32:xpt,ypt=Math.log,bpt=Math.LN2;function xpt(n){return n>>>=0,n===0?32:31-(ypt(n)/bpt|0)|0}var Bb=64,Fb=4194304;function jv(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function IS(n,t){var e=n.pendingLanes;if(e===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,a=e&268435455;if(a!==0){var o=a&~r;o!==0?i=jv(o):(s&=a,s!==0&&(i=jv(s)))}else a=e&~r,a!==0?i=jv(a):s!==0&&(i=jv(s));if(i===0)return 0;if(t!==0&&t!==i&&!(t&r)&&(r=i&-i,s=t&-t,r>=s||r===16&&(s&4194240)!==0))return t;if(i&4&&(i|=e&16),t=n.entangledLanes,t!==0)for(n=n.entanglements,t&=i;0<t;)e=31-Bo(t),r=1<<e,i|=n[e],t&=~r;return i}function Spt(n,t){switch(n){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Apt(n,t){for(var e=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var a=31-Bo(s),o=1<<a,l=r[a];l===-1?(!(o&e)||o&i)&&(r[a]=Spt(o,t)):l<=t&&(n.expiredLanes|=o),s&=~o}}function EO(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function eY(){var n=Bb;return Bb<<=1,!(Bb&4194240)&&(Bb=64),n}function iP(n){for(var t=[],e=0;31>e;e++)t.push(n);return t}function n1(n,t,e){n.pendingLanes|=t,t!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,t=31-Bo(t),n[t]=e}function wpt(n,t){var e=n.pendingLanes&~t;n.pendingLanes=t,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=t,n.mutableReadLanes&=t,n.entangledLanes&=t,t=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<e;){var r=31-Bo(e),s=1<<r;t[r]=0,i[r]=-1,n[r]=-1,e&=~s}}function YD(n,t){var e=n.entangledLanes|=t;for(n=n.entanglements;e;){var i=31-Bo(e),r=1<<i;r&t|n[i]&t&&(n[i]|=t),e&=~r}}var xi=0;function iY(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var nY,XD,rY,sY,aY,OO=!1,jb=[],Fh=null,jh=null,Nh=null,T_=new Map,M_=new Map,mh=[],Cpt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function C8(n,t){switch(n){case"focusin":case"focusout":Fh=null;break;case"dragenter":case"dragleave":jh=null;break;case"mouseover":case"mouseout":Nh=null;break;case"pointerover":case"pointerout":T_.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":M_.delete(t.pointerId)}}function uv(n,t,e,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:t,domEventName:e,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=s1(t),t!==null&&XD(t)),n):(n.eventSystemFlags|=i,t=n.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),n)}function kpt(n,t,e,i,r){switch(t){case"focusin":return Fh=uv(Fh,n,t,e,i,r),!0;case"dragenter":return jh=uv(jh,n,t,e,i,r),!0;case"mouseover":return Nh=uv(Nh,n,t,e,i,r),!0;case"pointerover":var s=r.pointerId;return T_.set(s,uv(T_.get(s)||null,n,t,e,i,r)),!0;case"gotpointercapture":return s=r.pointerId,M_.set(s,uv(M_.get(s)||null,n,t,e,i,r)),!0}return!1}function oY(n){var t=dd(n.target);if(t!==null){var e=yp(t);if(e!==null){if(t=e.tag,t===13){if(t=KU(e),t!==null){n.blockedOn=t,aY(n.priority,function(){rY(e)});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){n.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}n.blockedOn=null}function eS(n){if(n.blockedOn!==null)return!1;for(var t=n.targetContainers;0<t.length;){var e=RO(n.domEventName,n.eventSystemFlags,t[0],n.nativeEvent);if(e===null){e=n.nativeEvent;var i=new e.constructor(e.type,e);kO=i,e.target.dispatchEvent(i),kO=null}else return t=s1(e),t!==null&&XD(t),n.blockedOn=e,!1;t.shift()}return!0}function k8(n,t,e){eS(n)&&e.delete(t)}function Tpt(){OO=!1,Fh!==null&&eS(Fh)&&(Fh=null),jh!==null&&eS(jh)&&(jh=null),Nh!==null&&eS(Nh)&&(Nh=null),T_.forEach(k8),M_.forEach(k8)}function hv(n,t){n.blockedOn===t&&(n.blockedOn=null,OO||(OO=!0,va.unstable_scheduleCallback(va.unstable_NormalPriority,Tpt)))}function P_(n){function t(r){return hv(r,n)}if(0<jb.length){hv(jb[0],n);for(var e=1;e<jb.length;e++){var i=jb[e];i.blockedOn===n&&(i.blockedOn=null)}}for(Fh!==null&&hv(Fh,n),jh!==null&&hv(jh,n),Nh!==null&&hv(Nh,n),T_.forEach(t),M_.forEach(t),e=0;e<mh.length;e++)i=mh[e],i.blockedOn===n&&(i.blockedOn=null);for(;0<mh.length&&(e=mh[0],e.blockedOn===null);)oY(e),e.blockedOn===null&&mh.shift()}var sg=Bu.ReactCurrentBatchConfig,LS=!0;function Mpt(n,t,e,i){var r=xi,s=sg.transition;sg.transition=null;try{xi=1,KD(n,t,e,i)}finally{xi=r,sg.transition=s}}function Ppt(n,t,e,i){var r=xi,s=sg.transition;sg.transition=null;try{xi=4,KD(n,t,e,i)}finally{xi=r,sg.transition=s}}function KD(n,t,e,i){if(LS){var r=RO(n,t,e,i);if(r===null)dP(n,t,i,DS,e),C8(n,i);else if(kpt(r,n,t,e,i))i.stopPropagation();else if(C8(n,i),t&4&&-1<Cpt.indexOf(n)){for(;r!==null;){var s=s1(r);if(s!==null&&nY(s),s=RO(n,t,e,i),s===null&&dP(n,t,i,DS,e),s===r)break;r=s}r!==null&&i.stopPropagation()}else dP(n,t,i,null,e)}}var DS=null;function RO(n,t,e,i){if(DS=null,n=GD(i),n=dd(n),n!==null)if(t=yp(n),t===null)n=null;else if(e=t.tag,e===13){if(n=KU(t),n!==null)return n;n=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;n=null}else t!==n&&(n=null);return DS=n,null}function lY(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mpt()){case UD:return 1;case QU:return 4;case RS:case vpt:return 16;case tY:return 536870912;default:return 16}default:return 16}}var xh=null,qD=null,iS=null;function uY(){if(iS)return iS;var n,t=qD,e=t.length,i,r="value"in xh?xh.value:xh.textContent,s=r.length;for(n=0;n<e&&t[n]===r[n];n++);var a=e-n;for(i=1;i<=a&&t[e-i]===r[s-i];i++);return iS=r.slice(n,1<i?1-i:void 0)}function nS(n){var t=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&t===13&&(n=13)):n=t,n===10&&(n=13),32<=n||n===13?n:0}function Nb(){return!0}function T8(){return!1}function xa(n){function t(e,i,r,s,a){this._reactName=e,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(e=n[o],this[o]=e?e(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Nb:T8,this.isPropagationStopped=T8,this}return cn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=Nb)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=Nb)},persist:function(){},isPersistent:Nb}),t}var gm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ZD=xa(gm),r1=cn({},gm,{view:0,detail:0}),Ept=xa(r1),nP,rP,cv,pk=cn({},r1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:JD,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==cv&&(cv&&n.type==="mousemove"?(nP=n.screenX-cv.screenX,rP=n.screenY-cv.screenY):rP=nP=0,cv=n),nP)},movementY:function(n){return"movementY"in n?n.movementY:rP}}),M8=xa(pk),Opt=cn({},pk,{dataTransfer:0}),Rpt=xa(Opt),Ipt=cn({},r1,{relatedTarget:0}),sP=xa(Ipt),Lpt=cn({},gm,{animationName:0,elapsedTime:0,pseudoElement:0}),Dpt=xa(Lpt),Bpt=cn({},gm,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Fpt=xa(Bpt),jpt=cn({},gm,{data:0}),P8=xa(jpt),Npt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zpt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hpt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vpt(n){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(n):(n=Hpt[n])?!!t[n]:!1}function JD(){return Vpt}var Wpt=cn({},r1,{key:function(n){if(n.key){var t=Npt[n.key]||n.key;if(t!=="Unidentified")return t}return n.type==="keypress"?(n=nS(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?zpt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:JD,charCode:function(n){return n.type==="keypress"?nS(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?nS(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),$pt=xa(Wpt),Gpt=cn({},pk,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E8=xa(Gpt),Upt=cn({},r1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:JD}),Ypt=xa(Upt),Xpt=cn({},gm,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kpt=xa(Xpt),qpt=cn({},pk,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Zpt=xa(qpt),Jpt=[9,13,27,32],QD=Au&&"CompositionEvent"in window,r0=null;Au&&"documentMode"in document&&(r0=document.documentMode);var Qpt=Au&&"TextEvent"in window&&!r0,hY=Au&&(!QD||r0&&8<r0&&11>=r0),O8=" ",R8=!1;function cY(n,t){switch(n){case"keyup":return Jpt.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dY(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var vf=!1;function tft(n,t){switch(n){case"compositionend":return dY(t);case"keypress":return t.which!==32?null:(R8=!0,O8);case"textInput":return n=t.data,n===O8&&R8?null:n;default:return null}}function eft(n,t){if(vf)return n==="compositionend"||!QD&&cY(n,t)?(n=uY(),iS=qD=xh=null,vf=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return hY&&t.locale!=="ko"?null:t.data;default:return null}}var ift={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function I8(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t==="input"?!!ift[n.type]:t==="textarea"}function pY(n,t,e,i){$U(i),t=BS(t,"onChange"),0<t.length&&(e=new ZD("onChange","change",null,e,i),n.push({event:e,listeners:t}))}var s0=null,E_=null;function nft(n){wY(n,0)}function fk(n){var t=bf(n);if(FU(t))return n}function rft(n,t){if(n==="change")return t}var fY=!1;if(Au){var aP;if(Au){var oP="oninput"in document;if(!oP){var L8=document.createElement("div");L8.setAttribute("oninput","return;"),oP=typeof L8.oninput=="function"}aP=oP}else aP=!1;fY=aP&&(!document.documentMode||9<document.documentMode)}function D8(){s0&&(s0.detachEvent("onpropertychange",gY),E_=s0=null)}function gY(n){if(n.propertyName==="value"&&fk(E_)){var t=[];pY(t,E_,n,GD(n)),XU(nft,t)}}function sft(n,t,e){n==="focusin"?(D8(),s0=t,E_=e,s0.attachEvent("onpropertychange",gY)):n==="focusout"&&D8()}function aft(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return fk(E_)}function oft(n,t){if(n==="click")return fk(t)}function lft(n,t){if(n==="input"||n==="change")return fk(t)}function uft(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var Ho=typeof Object.is=="function"?Object.is:uft;function O_(n,t){if(Ho(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;var e=Object.keys(n),i=Object.keys(t);if(e.length!==i.length)return!1;for(i=0;i<e.length;i++){var r=e[i];if(!fO.call(t,r)||!Ho(n[r],t[r]))return!1}return!0}function B8(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function F8(n,t){var e=B8(n);n=0;for(var i;e;){if(e.nodeType===3){if(i=n+e.textContent.length,n<=t&&i>=t)return{node:e,offset:t-n};n=i}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=B8(e)}}function mY(n,t){return n&&t?n===t?!0:n&&n.nodeType===3?!1:t&&t.nodeType===3?mY(n,t.parentNode):"contains"in n?n.contains(t):n.compareDocumentPosition?!!(n.compareDocumentPosition(t)&16):!1:!1}function vY(){for(var n=window,t=PS();t instanceof n.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)n=t.contentWindow;else break;t=PS(n.document)}return t}function tB(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t&&(t==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||t==="textarea"||n.contentEditable==="true")}function hft(n){var t=vY(),e=n.focusedElem,i=n.selectionRange;if(t!==e&&e&&e.ownerDocument&&mY(e.ownerDocument.documentElement,e)){if(i!==null&&tB(e)){if(t=i.start,n=i.end,n===void 0&&(n=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(n,e.value.length);else if(n=(t=e.ownerDocument||document)&&t.defaultView||window,n.getSelection){n=n.getSelection();var r=e.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=F8(e,s);var a=F8(e,i);r&&a&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(t),n.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),n.addRange(t)))}}for(t=[],n=e;n=n.parentNode;)n.nodeType===1&&t.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)n=t[e],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var cft=Au&&"documentMode"in document&&11>=document.documentMode,_f=null,IO=null,a0=null,LO=!1;function j8(n,t,e){var i=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;LO||_f==null||_f!==PS(i)||(i=_f,"selectionStart"in i&&tB(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),a0&&O_(a0,i)||(a0=i,i=BS(IO,"onSelect"),0<i.length&&(t=new ZD("onSelect","select",null,t,e),n.push({event:t,listeners:i}),t.target=_f)))}function zb(n,t){var e={};return e[n.toLowerCase()]=t.toLowerCase(),e["Webkit"+n]="webkit"+t,e["Moz"+n]="moz"+t,e}var yf={animationend:zb("Animation","AnimationEnd"),animationiteration:zb("Animation","AnimationIteration"),animationstart:zb("Animation","AnimationStart"),transitionend:zb("Transition","TransitionEnd")},lP={},_Y={};Au&&(_Y=document.createElement("div").style,"AnimationEvent"in window||(delete yf.animationend.animation,delete yf.animationiteration.animation,delete yf.animationstart.animation),"TransitionEvent"in window||delete yf.transitionend.transition);function gk(n){if(lP[n])return lP[n];if(!yf[n])return n;var t=yf[n],e;for(e in t)if(t.hasOwnProperty(e)&&e in _Y)return lP[n]=t[e];return n}var yY=gk("animationend"),bY=gk("animationiteration"),xY=gk("animationstart"),SY=gk("transitionend"),AY=new Map,N8="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ac(n,t){AY.set(n,t),_p(t,[n])}for(var uP=0;uP<N8.length;uP++){var hP=N8[uP],dft=hP.toLowerCase(),pft=hP[0].toUpperCase()+hP.slice(1);Ac(dft,"on"+pft)}Ac(yY,"onAnimationEnd");Ac(bY,"onAnimationIteration");Ac(xY,"onAnimationStart");Ac("dblclick","onDoubleClick");Ac("focusin","onFocus");Ac("focusout","onBlur");Ac(SY,"onTransitionEnd");Cg("onMouseEnter",["mouseout","mouseover"]);Cg("onMouseLeave",["mouseout","mouseover"]);Cg("onPointerEnter",["pointerout","pointerover"]);Cg("onPointerLeave",["pointerout","pointerover"]);_p("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_p("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_p("onBeforeInput",["compositionend","keypress","textInput","paste"]);_p("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_p("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_p("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fft=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nv));function z8(n,t,e){var i=n.type||"unknown-event";n.currentTarget=e,dpt(i,t,void 0,n),n.currentTarget=null}function wY(n,t){t=(t&4)!==0;for(var e=0;e<n.length;e++){var i=n[e],r=i.event;i=i.listeners;t:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break t;z8(r,o,u),s=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break t;z8(r,o,u),s=l}}}if(OS)throw n=PO,OS=!1,PO=null,n}function Fi(n,t){var e=t[NO];e===void 0&&(e=t[NO]=new Set);var i=n+"__bubble";e.has(i)||(CY(t,n,2,!1),e.add(i))}function cP(n,t,e){var i=0;t&&(i|=4),CY(e,n,i,t)}var Hb="_reactListening"+Math.random().toString(36).slice(2);function R_(n){if(!n[Hb]){n[Hb]=!0,RU.forEach(function(e){e!=="selectionchange"&&(fft.has(e)||cP(e,!1,n),cP(e,!0,n))});var t=n.nodeType===9?n:n.ownerDocument;t===null||t[Hb]||(t[Hb]=!0,cP("selectionchange",!1,t))}}function CY(n,t,e,i){switch(lY(t)){case 1:var r=Mpt;break;case 4:r=Ppt;break;default:r=KD}e=r.bind(null,t,e,n),r=void 0,!MO||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(t,e,{capture:!0,passive:r}):n.addEventListener(t,e,!0):r!==void 0?n.addEventListener(t,e,{passive:r}):n.addEventListener(t,e,!1)}function dP(n,t,e,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;a=a.return}for(;o!==null;){if(a=dd(o),a===null)return;if(l=a.tag,l===5||l===6){i=s=a;continue t}o=o.parentNode}}i=i.return}XU(function(){var u=s,h=GD(e),c=[];t:{var d=AY.get(n);if(d!==void 0){var p=ZD,f=n;switch(n){case"keypress":if(nS(e)===0)break t;case"keydown":case"keyup":p=$pt;break;case"focusin":f="focus",p=sP;break;case"focusout":f="blur",p=sP;break;case"beforeblur":case"afterblur":p=sP;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=M8;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Rpt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Ypt;break;case yY:case bY:case xY:p=Dpt;break;case SY:p=Kpt;break;case"scroll":p=Ept;break;case"wheel":p=Zpt;break;case"copy":case"cut":case"paste":p=Fpt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=E8}var g=(t&4)!==0,_=!g&&n==="scroll",v=g?d!==null?d+"Capture":null:d;g=[];for(var y=u,b;y!==null;){b=y;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,v!==null&&(S=k_(y,v),S!=null&&g.push(I_(y,S,b)))),_)break;y=y.return}0<g.length&&(d=new p(d,f,null,e,h),c.push({event:d,listeners:g}))}}if(!(t&7)){t:{if(d=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",d&&e!==kO&&(f=e.relatedTarget||e.fromElement)&&(dd(f)||f[wu]))break t;if((p||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,p?(f=e.relatedTarget||e.toElement,p=u,f=f?dd(f):null,f!==null&&(_=yp(f),f!==_||f.tag!==5&&f.tag!==6)&&(f=null)):(p=null,f=u),p!==f)){if(g=M8,S="onMouseLeave",v="onMouseEnter",y="mouse",(n==="pointerout"||n==="pointerover")&&(g=E8,S="onPointerLeave",v="onPointerEnter",y="pointer"),_=p==null?d:bf(p),b=f==null?d:bf(f),d=new g(S,y+"leave",p,e,h),d.target=_,d.relatedTarget=b,S=null,dd(h)===u&&(g=new g(v,y+"enter",f,e,h),g.target=b,g.relatedTarget=_,S=g),_=S,p&&f)e:{for(g=p,v=f,y=0,b=g;b;b=Gp(b))y++;for(b=0,S=v;S;S=Gp(S))b++;for(;0<y-b;)g=Gp(g),y--;for(;0<b-y;)v=Gp(v),b--;for(;y--;){if(g===v||v!==null&&g===v.alternate)break e;g=Gp(g),v=Gp(v)}g=null}else g=null;p!==null&&H8(c,d,p,g,!1),f!==null&&_!==null&&H8(c,_,f,g,!0)}}t:{if(d=u?bf(u):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var A=rft;else if(I8(d))if(fY)A=lft;else{A=aft;var w=sft}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(A=oft);if(A&&(A=A(n,u))){pY(c,A,e,h);break t}w&&w(n,d,u),n==="focusout"&&(w=d._wrapperState)&&w.controlled&&d.type==="number"&&xO(d,"number",d.value)}switch(w=u?bf(u):window,n){case"focusin":(I8(w)||w.contentEditable==="true")&&(_f=w,IO=u,a0=null);break;case"focusout":a0=IO=_f=null;break;case"mousedown":LO=!0;break;case"contextmenu":case"mouseup":case"dragend":LO=!1,j8(c,e,h);break;case"selectionchange":if(cft)break;case"keydown":case"keyup":j8(c,e,h)}var C;if(QD)t:{switch(n){case"compositionstart":var k="onCompositionStart";break t;case"compositionend":k="onCompositionEnd";break t;case"compositionupdate":k="onCompositionUpdate";break t}k=void 0}else vf?cY(n,e)&&(k="onCompositionEnd"):n==="keydown"&&e.keyCode===229&&(k="onCompositionStart");k&&(hY&&e.locale!=="ko"&&(vf||k!=="onCompositionStart"?k==="onCompositionEnd"&&vf&&(C=uY()):(xh=h,qD="value"in xh?xh.value:xh.textContent,vf=!0)),w=BS(u,k),0<w.length&&(k=new P8(k,n,null,e,h),c.push({event:k,listeners:w}),C?k.data=C:(C=dY(e),C!==null&&(k.data=C)))),(C=Qpt?tft(n,e):eft(n,e))&&(u=BS(u,"onBeforeInput"),0<u.length&&(h=new P8("onBeforeInput","beforeinput",null,e,h),c.push({event:h,listeners:u}),h.data=C))}wY(c,t)})}function I_(n,t,e){return{instance:n,listener:t,currentTarget:e}}function BS(n,t){for(var e=t+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=k_(n,e),s!=null&&i.unshift(I_(n,s,r)),s=k_(n,t),s!=null&&i.push(I_(n,s,r))),n=n.return}return i}function Gp(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function H8(n,t,e,i,r){for(var s=t._reactName,a=[];e!==null&&e!==i;){var o=e,l=o.alternate,u=o.stateNode;if(l!==null&&l===i)break;o.tag===5&&u!==null&&(o=u,r?(l=k_(e,s),l!=null&&a.unshift(I_(e,l,o))):r||(l=k_(e,s),l!=null&&a.push(I_(e,l,o)))),e=e.return}a.length!==0&&n.push({event:t,listeners:a})}var gft=/\r\n?/g,mft=/\u0000|\uFFFD/g;function V8(n){return(typeof n=="string"?n:""+n).replace(gft,`
`).replace(mft,"")}function Vb(n,t,e){if(t=V8(t),V8(n)!==t&&e)throw Error(Ft(425))}function FS(){}var DO=null,BO=null;function FO(n,t){return n==="textarea"||n==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jO=typeof setTimeout=="function"?setTimeout:void 0,vft=typeof clearTimeout=="function"?clearTimeout:void 0,W8=typeof Promise=="function"?Promise:void 0,_ft=typeof queueMicrotask=="function"?queueMicrotask:typeof W8<"u"?function(n){return W8.resolve(null).then(n).catch(yft)}:jO;function yft(n){setTimeout(function(){throw n})}function pP(n,t){var e=t,i=0;do{var r=e.nextSibling;if(n.removeChild(e),r&&r.nodeType===8)if(e=r.data,e==="/$"){if(i===0){n.removeChild(r),P_(t);return}i--}else e!=="$"&&e!=="$?"&&e!=="$!"||i++;e=r}while(e);P_(t)}function zh(n){for(;n!=null;n=n.nextSibling){var t=n.nodeType;if(t===1||t===3)break;if(t===8){if(t=n.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return n}function $8(n){n=n.previousSibling;for(var t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return n;t--}else e==="/$"&&t++}n=n.previousSibling}return null}var mm=Math.random().toString(36).slice(2),ll="__reactFiber$"+mm,L_="__reactProps$"+mm,wu="__reactContainer$"+mm,NO="__reactEvents$"+mm,bft="__reactListeners$"+mm,xft="__reactHandles$"+mm;function dd(n){var t=n[ll];if(t)return t;for(var e=n.parentNode;e;){if(t=e[wu]||e[ll]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(n=$8(n);n!==null;){if(e=n[ll])return e;n=$8(n)}return t}n=e,e=n.parentNode}return null}function s1(n){return n=n[ll]||n[wu],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function bf(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ft(33))}function mk(n){return n[L_]||null}var zO=[],xf=-1;function wc(n){return{current:n}}function Hi(n){0>xf||(n.current=zO[xf],zO[xf]=null,xf--)}function Di(n,t){xf++,zO[xf]=n.current,n.current=t}var dc={},Xr=wc(dc),Bs=wc(!1),$d=dc;function kg(n,t){var e=n.type.contextTypes;if(!e)return dc;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in e)r[s]=t[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=t,n.__reactInternalMemoizedMaskedChildContext=r),r}function Fs(n){return n=n.childContextTypes,n!=null}function jS(){Hi(Bs),Hi(Xr)}function G8(n,t,e){if(Xr.current!==dc)throw Error(Ft(168));Di(Xr,t),Di(Bs,e)}function kY(n,t,e){var i=n.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return e;i=i.getChildContext();for(var r in i)if(!(r in t))throw Error(Ft(108,spt(n)||"Unknown",r));return cn({},e,i)}function NS(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||dc,$d=Xr.current,Di(Xr,n),Di(Bs,Bs.current),!0}function U8(n,t,e){var i=n.stateNode;if(!i)throw Error(Ft(169));e?(n=kY(n,t,$d),i.__reactInternalMemoizedMergedChildContext=n,Hi(Bs),Hi(Xr),Di(Xr,n)):Hi(Bs),Di(Bs,e)}var eu=null,vk=!1,fP=!1;function TY(n){eu===null?eu=[n]:eu.push(n)}function Sft(n){vk=!0,TY(n)}function Cc(){if(!fP&&eu!==null){fP=!0;var n=0,t=xi;try{var e=eu;for(xi=1;n<e.length;n++){var i=e[n];do i=i(!0);while(i!==null)}eu=null,vk=!1}catch(r){throw eu!==null&&(eu=eu.slice(n+1)),JU(UD,Cc),r}finally{xi=t,fP=!1}}return null}var Sf=[],Af=0,zS=null,HS=0,ja=[],Na=0,Gd=null,lu=1,uu="";function Zc(n,t){Sf[Af++]=HS,Sf[Af++]=zS,zS=n,HS=t}function MY(n,t,e){ja[Na++]=lu,ja[Na++]=uu,ja[Na++]=Gd,Gd=n;var i=lu;n=uu;var r=32-Bo(i)-1;i&=~(1<<r),e+=1;var s=32-Bo(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,lu=1<<32-Bo(t)+r|e<<r|i,uu=s+n}else lu=1<<s|e<<r|i,uu=n}function eB(n){n.return!==null&&(Zc(n,1),MY(n,1,0))}function iB(n){for(;n===zS;)zS=Sf[--Af],Sf[Af]=null,HS=Sf[--Af],Sf[Af]=null;for(;n===Gd;)Gd=ja[--Na],ja[Na]=null,uu=ja[--Na],ja[Na]=null,lu=ja[--Na],ja[Na]=null}var ma=null,fa=null,Ji=!1,bo=null;function PY(n,t){var e=Wa(5,null,null,0);e.elementType="DELETED",e.stateNode=t,e.return=n,t=n.deletions,t===null?(n.deletions=[e],n.flags|=16):t.push(e)}function Y8(n,t){switch(n.tag){case 5:var e=n.type;return t=t.nodeType!==1||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(n.stateNode=t,ma=n,fa=zh(t.firstChild),!0):!1;case 6:return t=n.pendingProps===""||t.nodeType!==3?null:t,t!==null?(n.stateNode=t,ma=n,fa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(e=Gd!==null?{id:lu,overflow:uu}:null,n.memoizedState={dehydrated:t,treeContext:e,retryLane:1073741824},e=Wa(18,null,null,0),e.stateNode=t,e.return=n,n.child=e,ma=n,fa=null,!0):!1;default:return!1}}function HO(n){return(n.mode&1)!==0&&(n.flags&128)===0}function VO(n){if(Ji){var t=fa;if(t){var e=t;if(!Y8(n,t)){if(HO(n))throw Error(Ft(418));t=zh(e.nextSibling);var i=ma;t&&Y8(n,t)?PY(i,e):(n.flags=n.flags&-4097|2,Ji=!1,ma=n)}}else{if(HO(n))throw Error(Ft(418));n.flags=n.flags&-4097|2,Ji=!1,ma=n}}}function X8(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ma=n}function Wb(n){if(n!==ma)return!1;if(!Ji)return X8(n),Ji=!0,!1;var t;if((t=n.tag!==3)&&!(t=n.tag!==5)&&(t=n.type,t=t!=="head"&&t!=="body"&&!FO(n.type,n.memoizedProps)),t&&(t=fa)){if(HO(n))throw EY(),Error(Ft(418));for(;t;)PY(n,t),t=zh(t.nextSibling)}if(X8(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ft(317));t:{for(n=n.nextSibling,t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="/$"){if(t===0){fa=zh(n.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++}n=n.nextSibling}fa=null}}else fa=ma?zh(n.stateNode.nextSibling):null;return!0}function EY(){for(var n=fa;n;)n=zh(n.nextSibling)}function Tg(){fa=ma=null,Ji=!1}function nB(n){bo===null?bo=[n]:bo.push(n)}var Aft=Bu.ReactCurrentBatchConfig;function dv(n,t,e){if(n=e.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(Ft(309));var i=e.stateNode}if(!i)throw Error(Ft(147,n));var r=i,s=""+n;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=r.refs;a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof n!="string")throw Error(Ft(284));if(!e._owner)throw Error(Ft(290,n))}return n}function $b(n,t){throw n=Object.prototype.toString.call(t),Error(Ft(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n))}function K8(n){var t=n._init;return t(n._payload)}function OY(n){function t(v,y){if(n){var b=v.deletions;b===null?(v.deletions=[y],v.flags|=16):b.push(y)}}function e(v,y){if(!n)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function i(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function r(v,y){return v=$h(v,y),v.index=0,v.sibling=null,v}function s(v,y,b){return v.index=b,n?(b=v.alternate,b!==null?(b=b.index,b<y?(v.flags|=2,y):b):(v.flags|=2,y)):(v.flags|=1048576,y)}function a(v){return n&&v.alternate===null&&(v.flags|=2),v}function o(v,y,b,S){return y===null||y.tag!==6?(y=xP(b,v.mode,S),y.return=v,y):(y=r(y,b),y.return=v,y)}function l(v,y,b,S){var A=b.type;return A===mf?h(v,y,b.props.children,S,b.key):y!==null&&(y.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===ch&&K8(A)===y.type)?(S=r(y,b.props),S.ref=dv(v,y,b),S.return=v,S):(S=hS(b.type,b.key,b.props,null,v.mode,S),S.ref=dv(v,y,b),S.return=v,S)}function u(v,y,b,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=SP(b,v.mode,S),y.return=v,y):(y=r(y,b.children||[]),y.return=v,y)}function h(v,y,b,S,A){return y===null||y.tag!==7?(y=Cd(b,v.mode,S,A),y.return=v,y):(y=r(y,b),y.return=v,y)}function c(v,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=xP(""+y,v.mode,b),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ib:return b=hS(y.type,y.key,y.props,null,v.mode,b),b.ref=dv(v,null,y),b.return=v,b;case gf:return y=SP(y,v.mode,b),y.return=v,y;case ch:var S=y._init;return c(v,S(y._payload),b)}if(Fv(y)||ov(y))return y=Cd(y,v.mode,b,null),y.return=v,y;$b(v,y)}return null}function d(v,y,b,S){var A=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return A!==null?null:o(v,y,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ib:return b.key===A?l(v,y,b,S):null;case gf:return b.key===A?u(v,y,b,S):null;case ch:return A=b._init,d(v,y,A(b._payload),S)}if(Fv(b)||ov(b))return A!==null?null:h(v,y,b,S,null);$b(v,b)}return null}function p(v,y,b,S,A){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(b)||null,o(y,v,""+S,A);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ib:return v=v.get(S.key===null?b:S.key)||null,l(y,v,S,A);case gf:return v=v.get(S.key===null?b:S.key)||null,u(y,v,S,A);case ch:var w=S._init;return p(v,y,b,w(S._payload),A)}if(Fv(S)||ov(S))return v=v.get(b)||null,h(y,v,S,A,null);$b(y,S)}return null}function f(v,y,b,S){for(var A=null,w=null,C=y,k=y=0,M=null;C!==null&&k<b.length;k++){C.index>k?(M=C,C=null):M=C.sibling;var P=d(v,C,b[k],S);if(P===null){C===null&&(C=M);break}n&&C&&P.alternate===null&&t(v,C),y=s(P,y,k),w===null?A=P:w.sibling=P,w=P,C=M}if(k===b.length)return e(v,C),Ji&&Zc(v,k),A;if(C===null){for(;k<b.length;k++)C=c(v,b[k],S),C!==null&&(y=s(C,y,k),w===null?A=C:w.sibling=C,w=C);return Ji&&Zc(v,k),A}for(C=i(v,C);k<b.length;k++)M=p(C,v,k,b[k],S),M!==null&&(n&&M.alternate!==null&&C.delete(M.key===null?k:M.key),y=s(M,y,k),w===null?A=M:w.sibling=M,w=M);return n&&C.forEach(function(E){return t(v,E)}),Ji&&Zc(v,k),A}function g(v,y,b,S){var A=ov(b);if(typeof A!="function")throw Error(Ft(150));if(b=A.call(b),b==null)throw Error(Ft(151));for(var w=A=null,C=y,k=y=0,M=null,P=b.next();C!==null&&!P.done;k++,P=b.next()){C.index>k?(M=C,C=null):M=C.sibling;var E=d(v,C,P.value,S);if(E===null){C===null&&(C=M);break}n&&C&&E.alternate===null&&t(v,C),y=s(E,y,k),w===null?A=E:w.sibling=E,w=E,C=M}if(P.done)return e(v,C),Ji&&Zc(v,k),A;if(C===null){for(;!P.done;k++,P=b.next())P=c(v,P.value,S),P!==null&&(y=s(P,y,k),w===null?A=P:w.sibling=P,w=P);return Ji&&Zc(v,k),A}for(C=i(v,C);!P.done;k++,P=b.next())P=p(C,v,k,P.value,S),P!==null&&(n&&P.alternate!==null&&C.delete(P.key===null?k:P.key),y=s(P,y,k),w===null?A=P:w.sibling=P,w=P);return n&&C.forEach(function(I){return t(v,I)}),Ji&&Zc(v,k),A}function _(v,y,b,S){if(typeof b=="object"&&b!==null&&b.type===mf&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Ib:t:{for(var A=b.key,w=y;w!==null;){if(w.key===A){if(A=b.type,A===mf){if(w.tag===7){e(v,w.sibling),y=r(w,b.props.children),y.return=v,v=y;break t}}else if(w.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===ch&&K8(A)===w.type){e(v,w.sibling),y=r(w,b.props),y.ref=dv(v,w,b),y.return=v,v=y;break t}e(v,w);break}else t(v,w);w=w.sibling}b.type===mf?(y=Cd(b.props.children,v.mode,S,b.key),y.return=v,v=y):(S=hS(b.type,b.key,b.props,null,v.mode,S),S.ref=dv(v,y,b),S.return=v,v=S)}return a(v);case gf:t:{for(w=b.key;y!==null;){if(y.key===w)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){e(v,y.sibling),y=r(y,b.children||[]),y.return=v,v=y;break t}else{e(v,y);break}else t(v,y);y=y.sibling}y=SP(b,v.mode,S),y.return=v,v=y}return a(v);case ch:return w=b._init,_(v,y,w(b._payload),S)}if(Fv(b))return f(v,y,b,S);if(ov(b))return g(v,y,b,S);$b(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(e(v,y.sibling),y=r(y,b),y.return=v,v=y):(e(v,y),y=xP(b,v.mode,S),y.return=v,v=y),a(v)):e(v,y)}return _}var Mg=OY(!0),RY=OY(!1),VS=wc(null),WS=null,wf=null,rB=null;function sB(){rB=wf=WS=null}function aB(n){var t=VS.current;Hi(VS),n._currentValue=t}function WO(n,t,e){for(;n!==null;){var i=n.alternate;if((n.childLanes&t)!==t?(n.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),n===e)break;n=n.return}}function ag(n,t){WS=n,rB=wf=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&t&&(Rs=!0),n.firstContext=null)}function qa(n){var t=n._currentValue;if(rB!==n)if(n={context:n,memoizedValue:t,next:null},wf===null){if(WS===null)throw Error(Ft(308));wf=n,WS.dependencies={lanes:0,firstContext:n}}else wf=wf.next=n;return t}var pd=null;function oB(n){pd===null?pd=[n]:pd.push(n)}function IY(n,t,e,i){var r=t.interleaved;return r===null?(e.next=e,oB(t)):(e.next=r.next,r.next=e),t.interleaved=e,Cu(n,i)}function Cu(n,t){n.lanes|=t;var e=n.alternate;for(e!==null&&(e.lanes|=t),e=n,n=n.return;n!==null;)n.childLanes|=t,e=n.alternate,e!==null&&(e.childLanes|=t),e=n,n=n.return;return e.tag===3?e.stateNode:null}var dh=!1;function lB(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function LY(n,t){n=n.updateQueue,t.updateQueue===n&&(t.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function mu(n,t){return{eventTime:n,lane:t,tag:0,payload:null,callback:null,next:null}}function Hh(n,t,e){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,si&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Cu(n,e)}return r=i.interleaved,r===null?(t.next=t,oB(i)):(t.next=r.next,r.next=t),i.interleaved=t,Cu(n,e)}function rS(n,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194240)!==0)){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,YD(n,e)}}function q8(n,t){var e=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,e===i)){var r=null,s=null;if(e=e.firstBaseUpdate,e!==null){do{var a={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};s===null?r=s=a:s=s.next=a,e=e.next}while(e!==null);s===null?r=s=t:s=s.next=t}else r=s=t;e={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=e;return}n=e.lastBaseUpdate,n===null?e.firstBaseUpdate=t:n.next=t,e.lastBaseUpdate=t}function $S(n,t,e,i){var r=n.updateQueue;dh=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var h=n.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=l))}if(s!==null){var c=r.baseState;a=0,h=u=l=null,o=s;do{var d=o.lane,p=o.eventTime;if((i&d)===d){h!==null&&(h=h.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});t:{var f=n,g=o;switch(d=t,p=e,g.tag){case 1:if(f=g.payload,typeof f=="function"){c=f.call(p,c,d);break t}c=f;break t;case 3:f.flags=f.flags&-65537|128;case 0:if(f=g.payload,d=typeof f=="function"?f.call(p,c,d):f,d==null)break t;c=cn({},c,d);break t;case 2:dh=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,d=r.effects,d===null?r.effects=[o]:d.push(o))}else p={eventTime:p,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=p,l=c):h=h.next=p,a|=d;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;d=o,o=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(!0);if(h===null&&(l=c),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=h,t=r.shared.interleaved,t!==null){r=t;do a|=r.lane,r=r.next;while(r!==t)}else s===null&&(r.shared.lanes=0);Yd|=a,n.lanes=a,n.memoizedState=c}}function Z8(n,t,e){if(n=t.effects,t.effects=null,n!==null)for(t=0;t<n.length;t++){var i=n[t],r=i.callback;if(r!==null){if(i.callback=null,i=e,typeof r!="function")throw Error(Ft(191,r));r.call(i)}}}var a1={},xl=wc(a1),D_=wc(a1),B_=wc(a1);function fd(n){if(n===a1)throw Error(Ft(174));return n}function uB(n,t){switch(Di(B_,t),Di(D_,n),Di(xl,a1),n=t.nodeType,n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:AO(null,"");break;default:n=n===8?t.parentNode:t,t=n.namespaceURI||null,n=n.tagName,t=AO(t,n)}Hi(xl),Di(xl,t)}function Pg(){Hi(xl),Hi(D_),Hi(B_)}function DY(n){fd(B_.current);var t=fd(xl.current),e=AO(t,n.type);t!==e&&(Di(D_,n),Di(xl,e))}function hB(n){D_.current===n&&(Hi(xl),Hi(D_))}var on=wc(0);function GS(n){for(var t=n;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var gP=[];function cB(){for(var n=0;n<gP.length;n++)gP[n]._workInProgressVersionPrimary=null;gP.length=0}var sS=Bu.ReactCurrentDispatcher,mP=Bu.ReactCurrentBatchConfig,Ud=0,hn=null,$n=null,tr=null,US=!1,o0=!1,F_=0,wft=0;function Mr(){throw Error(Ft(321))}function dB(n,t){if(t===null)return!1;for(var e=0;e<t.length&&e<n.length;e++)if(!Ho(n[e],t[e]))return!1;return!0}function pB(n,t,e,i,r,s){if(Ud=s,hn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,sS.current=n===null||n.memoizedState===null?Mft:Pft,n=e(i,r),o0){s=0;do{if(o0=!1,F_=0,25<=s)throw Error(Ft(301));s+=1,tr=$n=null,t.updateQueue=null,sS.current=Eft,n=e(i,r)}while(o0)}if(sS.current=YS,t=$n!==null&&$n.next!==null,Ud=0,tr=$n=hn=null,US=!1,t)throw Error(Ft(300));return n}function fB(){var n=F_!==0;return F_=0,n}function el(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tr===null?hn.memoizedState=tr=n:tr=tr.next=n,tr}function Za(){if($n===null){var n=hn.alternate;n=n!==null?n.memoizedState:null}else n=$n.next;var t=tr===null?hn.memoizedState:tr.next;if(t!==null)tr=t,$n=n;else{if(n===null)throw Error(Ft(310));$n=n,n={memoizedState:$n.memoizedState,baseState:$n.baseState,baseQueue:$n.baseQueue,queue:$n.queue,next:null},tr===null?hn.memoizedState=tr=n:tr=tr.next=n}return tr}function j_(n,t){return typeof t=="function"?t(n):t}function vP(n){var t=Za(),e=t.queue;if(e===null)throw Error(Ft(311));e.lastRenderedReducer=n;var i=$n,r=i.baseQueue,s=e.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,e.pending=null}if(r!==null){s=r.next,i=i.baseState;var o=a=null,l=null,u=s;do{var h=u.lane;if((Ud&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var c={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=c,a=i):l=l.next=c,hn.lanes|=h,Yd|=h}u=u.next}while(u!==null&&u!==s);l===null?a=i:l.next=o,Ho(i,t.memoizedState)||(Rs=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=l,e.lastRenderedState=i}if(n=e.interleaved,n!==null){r=n;do s=r.lane,hn.lanes|=s,Yd|=s,r=r.next;while(r!==n)}else r===null&&(e.lanes=0);return[t.memoizedState,e.dispatch]}function _P(n){var t=Za(),e=t.queue;if(e===null)throw Error(Ft(311));e.lastRenderedReducer=n;var i=e.dispatch,r=e.pending,s=t.memoizedState;if(r!==null){e.pending=null;var a=r=r.next;do s=n(s,a.action),a=a.next;while(a!==r);Ho(s,t.memoizedState)||(Rs=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),e.lastRenderedState=s}return[s,i]}function BY(){}function FY(n,t){var e=hn,i=Za(),r=t(),s=!Ho(i.memoizedState,r);if(s&&(i.memoizedState=r,Rs=!0),i=i.queue,gB(zY.bind(null,e,i,n),[n]),i.getSnapshot!==t||s||tr!==null&&tr.memoizedState.tag&1){if(e.flags|=2048,N_(9,NY.bind(null,e,i,r,t),void 0,null),or===null)throw Error(Ft(349));Ud&30||jY(e,t,r)}return r}function jY(n,t,e){n.flags|=16384,n={getSnapshot:t,value:e},t=hn.updateQueue,t===null?(t={lastEffect:null,stores:null},hn.updateQueue=t,t.stores=[n]):(e=t.stores,e===null?t.stores=[n]:e.push(n))}function NY(n,t,e,i){t.value=e,t.getSnapshot=i,HY(t)&&VY(n)}function zY(n,t,e){return e(function(){HY(t)&&VY(n)})}function HY(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!Ho(n,e)}catch{return!0}}function VY(n){var t=Cu(n,1);t!==null&&Fo(t,n,1,-1)}function J8(n){var t=el();return typeof n=="function"&&(n=n()),t.memoizedState=t.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:j_,lastRenderedState:n},t.queue=n,n=n.dispatch=Tft.bind(null,hn,n),[t.memoizedState,n]}function N_(n,t,e,i){return n={tag:n,create:t,destroy:e,deps:i,next:null},t=hn.updateQueue,t===null?(t={lastEffect:null,stores:null},hn.updateQueue=t,t.lastEffect=n.next=n):(e=t.lastEffect,e===null?t.lastEffect=n.next=n:(i=e.next,e.next=n,n.next=i,t.lastEffect=n)),n}function WY(){return Za().memoizedState}function aS(n,t,e,i){var r=el();hn.flags|=n,r.memoizedState=N_(1|t,e,void 0,i===void 0?null:i)}function _k(n,t,e,i){var r=Za();i=i===void 0?null:i;var s=void 0;if($n!==null){var a=$n.memoizedState;if(s=a.destroy,i!==null&&dB(i,a.deps)){r.memoizedState=N_(t,e,s,i);return}}hn.flags|=n,r.memoizedState=N_(1|t,e,s,i)}function Q8(n,t){return aS(8390656,8,n,t)}function gB(n,t){return _k(2048,8,n,t)}function $Y(n,t){return _k(4,2,n,t)}function GY(n,t){return _k(4,4,n,t)}function UY(n,t){if(typeof t=="function")return n=n(),t(n),function(){t(null)};if(t!=null)return n=n(),t.current=n,function(){t.current=null}}function YY(n,t,e){return e=e!=null?e.concat([n]):null,_k(4,4,UY.bind(null,t,n),e)}function mB(){}function XY(n,t){var e=Za();t=t===void 0?null:t;var i=e.memoizedState;return i!==null&&t!==null&&dB(t,i[1])?i[0]:(e.memoizedState=[n,t],n)}function KY(n,t){var e=Za();t=t===void 0?null:t;var i=e.memoizedState;return i!==null&&t!==null&&dB(t,i[1])?i[0]:(n=n(),e.memoizedState=[n,t],n)}function qY(n,t,e){return Ud&21?(Ho(e,t)||(e=eY(),hn.lanes|=e,Yd|=e,n.baseState=!0),t):(n.baseState&&(n.baseState=!1,Rs=!0),n.memoizedState=e)}function Cft(n,t){var e=xi;xi=e!==0&&4>e?e:4,n(!0);var i=mP.transition;mP.transition={};try{n(!1),t()}finally{xi=e,mP.transition=i}}function ZY(){return Za().memoizedState}function kft(n,t,e){var i=Wh(n);if(e={lane:i,action:e,hasEagerState:!1,eagerState:null,next:null},JY(n))QY(t,e);else if(e=IY(n,t,e,i),e!==null){var r=us();Fo(e,n,i,r),tX(e,t,i)}}function Tft(n,t,e){var i=Wh(n),r={lane:i,action:e,hasEagerState:!1,eagerState:null,next:null};if(JY(n))QY(t,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,e);if(r.hasEagerState=!0,r.eagerState=o,Ho(o,a)){var l=t.interleaved;l===null?(r.next=r,oB(t)):(r.next=l.next,l.next=r),t.interleaved=r;return}}catch{}finally{}e=IY(n,t,r,i),e!==null&&(r=us(),Fo(e,n,i,r),tX(e,t,i))}}function JY(n){var t=n.alternate;return n===hn||t!==null&&t===hn}function QY(n,t){o0=US=!0;var e=n.pending;e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t}function tX(n,t,e){if(e&4194240){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,YD(n,e)}}var YS={readContext:qa,useCallback:Mr,useContext:Mr,useEffect:Mr,useImperativeHandle:Mr,useInsertionEffect:Mr,useLayoutEffect:Mr,useMemo:Mr,useReducer:Mr,useRef:Mr,useState:Mr,useDebugValue:Mr,useDeferredValue:Mr,useTransition:Mr,useMutableSource:Mr,useSyncExternalStore:Mr,useId:Mr,unstable_isNewReconciler:!1},Mft={readContext:qa,useCallback:function(n,t){return el().memoizedState=[n,t===void 0?null:t],n},useContext:qa,useEffect:Q8,useImperativeHandle:function(n,t,e){return e=e!=null?e.concat([n]):null,aS(4194308,4,UY.bind(null,t,n),e)},useLayoutEffect:function(n,t){return aS(4194308,4,n,t)},useInsertionEffect:function(n,t){return aS(4,2,n,t)},useMemo:function(n,t){var e=el();return t=t===void 0?null:t,n=n(),e.memoizedState=[n,t],n},useReducer:function(n,t,e){var i=el();return t=e!==void 0?e(t):t,i.memoizedState=i.baseState=t,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:t},i.queue=n,n=n.dispatch=kft.bind(null,hn,n),[i.memoizedState,n]},useRef:function(n){var t=el();return n={current:n},t.memoizedState=n},useState:J8,useDebugValue:mB,useDeferredValue:function(n){return el().memoizedState=n},useTransition:function(){var n=J8(!1),t=n[0];return n=Cft.bind(null,n[1]),el().memoizedState=n,[t,n]},useMutableSource:function(){},useSyncExternalStore:function(n,t,e){var i=hn,r=el();if(Ji){if(e===void 0)throw Error(Ft(407));e=e()}else{if(e=t(),or===null)throw Error(Ft(349));Ud&30||jY(i,t,e)}r.memoizedState=e;var s={value:e,getSnapshot:t};return r.queue=s,Q8(zY.bind(null,i,s,n),[n]),i.flags|=2048,N_(9,NY.bind(null,i,s,e,t),void 0,null),e},useId:function(){var n=el(),t=or.identifierPrefix;if(Ji){var e=uu,i=lu;e=(i&~(1<<32-Bo(i)-1)).toString(32)+e,t=":"+t+"R"+e,e=F_++,0<e&&(t+="H"+e.toString(32)),t+=":"}else e=wft++,t=":"+t+"r"+e.toString(32)+":";return n.memoizedState=t},unstable_isNewReconciler:!1},Pft={readContext:qa,useCallback:XY,useContext:qa,useEffect:gB,useImperativeHandle:YY,useInsertionEffect:$Y,useLayoutEffect:GY,useMemo:KY,useReducer:vP,useRef:WY,useState:function(){return vP(j_)},useDebugValue:mB,useDeferredValue:function(n){var t=Za();return qY(t,$n.memoizedState,n)},useTransition:function(){var n=vP(j_)[0],t=Za().memoizedState;return[n,t]},useMutableSource:BY,useSyncExternalStore:FY,useId:ZY,unstable_isNewReconciler:!1},Eft={readContext:qa,useCallback:XY,useContext:qa,useEffect:gB,useImperativeHandle:YY,useInsertionEffect:$Y,useLayoutEffect:GY,useMemo:KY,useReducer:_P,useRef:WY,useState:function(){return _P(j_)},useDebugValue:mB,useDeferredValue:function(n){var t=Za();return $n===null?t.memoizedState=n:qY(t,$n.memoizedState,n)},useTransition:function(){var n=_P(j_)[0],t=Za().memoizedState;return[n,t]},useMutableSource:BY,useSyncExternalStore:FY,useId:ZY,unstable_isNewReconciler:!1};function mo(n,t){if(n&&n.defaultProps){t=cn({},t),n=n.defaultProps;for(var e in n)t[e]===void 0&&(t[e]=n[e]);return t}return t}function $O(n,t,e,i){t=n.memoizedState,e=e(i,t),e=e==null?t:cn({},t,e),n.memoizedState=e,n.lanes===0&&(n.updateQueue.baseState=e)}var yk={isMounted:function(n){return(n=n._reactInternals)?yp(n)===n:!1},enqueueSetState:function(n,t,e){n=n._reactInternals;var i=us(),r=Wh(n),s=mu(i,r);s.payload=t,e!=null&&(s.callback=e),t=Hh(n,s,r),t!==null&&(Fo(t,n,r,i),rS(t,n,r))},enqueueReplaceState:function(n,t,e){n=n._reactInternals;var i=us(),r=Wh(n),s=mu(i,r);s.tag=1,s.payload=t,e!=null&&(s.callback=e),t=Hh(n,s,r),t!==null&&(Fo(t,n,r,i),rS(t,n,r))},enqueueForceUpdate:function(n,t){n=n._reactInternals;var e=us(),i=Wh(n),r=mu(e,i);r.tag=2,t!=null&&(r.callback=t),t=Hh(n,r,i),t!==null&&(Fo(t,n,i,e),rS(t,n,i))}};function tN(n,t,e,i,r,s,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!O_(e,i)||!O_(r,s):!0}function eX(n,t,e){var i=!1,r=dc,s=t.contextType;return typeof s=="object"&&s!==null?s=qa(s):(r=Fs(t)?$d:Xr.current,i=t.contextTypes,s=(i=i!=null)?kg(n,r):dc),t=new t(e,s),n.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=yk,n.stateNode=t,t._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),t}function eN(n,t,e,i){n=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,i),t.state!==n&&yk.enqueueReplaceState(t,t.state,null)}function GO(n,t,e,i){var r=n.stateNode;r.props=e,r.state=n.memoizedState,r.refs={},lB(n);var s=t.contextType;typeof s=="object"&&s!==null?r.context=qa(s):(s=Fs(t)?$d:Xr.current,r.context=kg(n,s)),r.state=n.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&($O(n,t,s,e),r.state=n.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&yk.enqueueReplaceState(r,r.state,null),$S(n,e,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Eg(n,t){try{var e="",i=t;do e+=rpt(i),i=i.return;while(i);var r=e}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:t,stack:r,digest:null}}function yP(n,t,e){return{value:n,source:null,stack:e??null,digest:t??null}}function UO(n,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var Oft=typeof WeakMap=="function"?WeakMap:Map;function iX(n,t,e){e=mu(-1,e),e.tag=3,e.payload={element:null};var i=t.value;return e.callback=function(){KS||(KS=!0,iR=i),UO(n,t)},e}function nX(n,t,e){e=mu(-1,e),e.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=t.value;e.payload=function(){return i(r)},e.callback=function(){UO(n,t)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(e.callback=function(){UO(n,t),typeof i!="function"&&(Vh===null?Vh=new Set([this]):Vh.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),e}function iN(n,t,e){var i=n.pingCache;if(i===null){i=n.pingCache=new Oft;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(e)||(r.add(e),n=Gft.bind(null,n,t,e),t.then(n,n))}function nN(n){do{var t;if((t=n.tag===13)&&(t=n.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return n;n=n.return}while(n!==null);return null}function rN(n,t,e,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===t?n.flags|=65536:(n.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(t=mu(-1,1),t.tag=2,Hh(e,t,1))),e.lanes|=1),n)}var Rft=Bu.ReactCurrentOwner,Rs=!1;function as(n,t,e,i){t.child=n===null?RY(t,null,e,i):Mg(t,n.child,e,i)}function sN(n,t,e,i,r){e=e.render;var s=t.ref;return ag(t,r),i=pB(n,t,e,i,s,r),e=fB(),n!==null&&!Rs?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~r,ku(n,t,r)):(Ji&&e&&eB(t),t.flags|=1,as(n,t,i,r),t.child)}function aN(n,t,e,i,r){if(n===null){var s=e.type;return typeof s=="function"&&!wB(s)&&s.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(t.tag=15,t.type=s,rX(n,t,s,i,r)):(n=hS(e.type,null,i,t,t.mode,r),n.ref=t.ref,n.return=t,t.child=n)}if(s=n.child,!(n.lanes&r)){var a=s.memoizedProps;if(e=e.compare,e=e!==null?e:O_,e(a,i)&&n.ref===t.ref)return ku(n,t,r)}return t.flags|=1,n=$h(s,i),n.ref=t.ref,n.return=t,t.child=n}function rX(n,t,e,i,r){if(n!==null){var s=n.memoizedProps;if(O_(s,i)&&n.ref===t.ref)if(Rs=!1,t.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Rs=!0);else return t.lanes=n.lanes,ku(n,t,r)}return YO(n,t,e,i,r)}function sX(n,t,e){var i=t.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Di(kf,oa),oa|=e;else{if(!(e&1073741824))return n=s!==null?s.baseLanes|e:e,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:n,cachePool:null,transitions:null},t.updateQueue=null,Di(kf,oa),oa|=n,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:e,Di(kf,oa),oa|=i}else s!==null?(i=s.baseLanes|e,t.memoizedState=null):i=e,Di(kf,oa),oa|=i;return as(n,t,r,e),t.child}function aX(n,t){var e=t.ref;(n===null&&e!==null||n!==null&&n.ref!==e)&&(t.flags|=512,t.flags|=2097152)}function YO(n,t,e,i,r){var s=Fs(e)?$d:Xr.current;return s=kg(t,s),ag(t,r),e=pB(n,t,e,i,s,r),i=fB(),n!==null&&!Rs?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~r,ku(n,t,r)):(Ji&&i&&eB(t),t.flags|=1,as(n,t,e,r),t.child)}function oN(n,t,e,i,r){if(Fs(e)){var s=!0;NS(t)}else s=!1;if(ag(t,r),t.stateNode===null)oS(n,t),eX(t,e,i),GO(t,e,i,r),i=!0;else if(n===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,u=e.contextType;typeof u=="object"&&u!==null?u=qa(u):(u=Fs(e)?$d:Xr.current,u=kg(t,u));var h=e.getDerivedStateFromProps,c=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";c||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||l!==u)&&eN(t,a,i,u),dh=!1;var d=t.memoizedState;a.state=d,$S(t,i,a,r),l=t.memoizedState,o!==i||d!==l||Bs.current||dh?(typeof h=="function"&&($O(t,e,h,i),l=t.memoizedState),(o=dh||tN(t,e,o,i,d,l,u))?(c||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=u,i=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,LY(n,t),o=t.memoizedProps,u=t.type===t.elementType?o:mo(t.type,o),a.props=u,c=t.pendingProps,d=a.context,l=e.contextType,typeof l=="object"&&l!==null?l=qa(l):(l=Fs(e)?$d:Xr.current,l=kg(t,l));var p=e.getDerivedStateFromProps;(h=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==c||d!==l)&&eN(t,a,i,l),dh=!1,d=t.memoizedState,a.state=d,$S(t,i,a,r);var f=t.memoizedState;o!==c||d!==f||Bs.current||dh?(typeof p=="function"&&($O(t,e,p,i),f=t.memoizedState),(u=dh||tN(t,e,u,i,d,f,l)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,f,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,f,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&d===n.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&d===n.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),a.props=i,a.state=f,a.context=l,i=u):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&d===n.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&d===n.memoizedState||(t.flags|=1024),i=!1)}return XO(n,t,e,i,s,r)}function XO(n,t,e,i,r,s){aX(n,t);var a=(t.flags&128)!==0;if(!i&&!a)return r&&U8(t,e,!1),ku(n,t,s);i=t.stateNode,Rft.current=t;var o=a&&typeof e.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,n!==null&&a?(t.child=Mg(t,n.child,null,s),t.child=Mg(t,null,o,s)):as(n,t,o,s),t.memoizedState=i.state,r&&U8(t,e,!0),t.child}function oX(n){var t=n.stateNode;t.pendingContext?G8(n,t.pendingContext,t.pendingContext!==t.context):t.context&&G8(n,t.context,!1),uB(n,t.containerInfo)}function lN(n,t,e,i,r){return Tg(),nB(r),t.flags|=256,as(n,t,e,i),t.child}var KO={dehydrated:null,treeContext:null,retryLane:0};function qO(n){return{baseLanes:n,cachePool:null,transitions:null}}function lX(n,t,e){var i=t.pendingProps,r=on.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(r&2)!==0),o?(s=!0,t.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Di(on,r&1),n===null)return VO(t),n=t.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(t.mode&1?n.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=i.children,n=i.fallback,s?(i=t.mode,s=t.child,a={mode:"hidden",children:a},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Sk(a,i,0,null),n=Cd(n,i,e,null),s.return=t,n.return=t,s.sibling=n,t.child=s,t.child.memoizedState=qO(e),t.memoizedState=KO,n):vB(t,a));if(r=n.memoizedState,r!==null&&(o=r.dehydrated,o!==null))return Ift(n,t,a,i,o,r,e);if(s){s=i.fallback,a=t.mode,r=n.child,o=r.sibling;var l={mode:"hidden",children:i.children};return!(a&1)&&t.child!==r?(i=t.child,i.childLanes=0,i.pendingProps=l,t.deletions=null):(i=$h(r,l),i.subtreeFlags=r.subtreeFlags&14680064),o!==null?s=$h(o,s):(s=Cd(s,a,e,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,a=n.child.memoizedState,a=a===null?qO(e):{baseLanes:a.baseLanes|e,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=n.childLanes&~e,t.memoizedState=KO,i}return s=n.child,n=s.sibling,i=$h(s,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=e),i.return=t,i.sibling=null,n!==null&&(e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)),t.child=i,t.memoizedState=null,i}function vB(n,t){return t=Sk({mode:"visible",children:t},n.mode,0,null),t.return=n,n.child=t}function Gb(n,t,e,i){return i!==null&&nB(i),Mg(t,n.child,null,e),n=vB(t,t.pendingProps.children),n.flags|=2,t.memoizedState=null,n}function Ift(n,t,e,i,r,s,a){if(e)return t.flags&256?(t.flags&=-257,i=yP(Error(Ft(422))),Gb(n,t,a,i)):t.memoizedState!==null?(t.child=n.child,t.flags|=128,null):(s=i.fallback,r=t.mode,i=Sk({mode:"visible",children:i.children},r,0,null),s=Cd(s,r,a,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,t.mode&1&&Mg(t,n.child,null,a),t.child.memoizedState=qO(a),t.memoizedState=KO,s);if(!(t.mode&1))return Gb(n,t,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var o=i.dgst;return i=o,s=Error(Ft(419)),i=yP(s,i,void 0),Gb(n,t,a,i)}if(o=(a&n.childLanes)!==0,Rs||o){if(i=or,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Cu(n,r),Fo(i,n,r,-1))}return AB(),i=yP(Error(Ft(421))),Gb(n,t,a,i)}return r.data==="$?"?(t.flags|=128,t.child=n.child,t=Uft.bind(null,n),r._reactRetry=t,null):(n=s.treeContext,fa=zh(r.nextSibling),ma=t,Ji=!0,bo=null,n!==null&&(ja[Na++]=lu,ja[Na++]=uu,ja[Na++]=Gd,lu=n.id,uu=n.overflow,Gd=t),t=vB(t,i.children),t.flags|=4096,t)}function uN(n,t,e){n.lanes|=t;var i=n.alternate;i!==null&&(i.lanes|=t),WO(n.return,t,e)}function bP(n,t,e,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:e,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=e,s.tailMode=r)}function uX(n,t,e){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(as(n,t,i.children,e),i=on.current,i&2)i=i&1|2,t.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=t.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&uN(n,e,t);else if(n.tag===19)uN(n,e,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Di(on,i),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(e=t.child,r=null;e!==null;)n=e.alternate,n!==null&&GS(n)===null&&(r=e),e=e.sibling;e=r,e===null?(r=t.child,t.child=null):(r=e.sibling,e.sibling=null),bP(t,!1,r,e,s);break;case"backwards":for(e=null,r=t.child,t.child=null;r!==null;){if(n=r.alternate,n!==null&&GS(n)===null){t.child=r;break}n=r.sibling,r.sibling=e,e=r,r=n}bP(t,!0,e,null,s);break;case"together":bP(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function oS(n,t){!(t.mode&1)&&n!==null&&(n.alternate=null,t.alternate=null,t.flags|=2)}function ku(n,t,e){if(n!==null&&(t.dependencies=n.dependencies),Yd|=t.lanes,!(e&t.childLanes))return null;if(n!==null&&t.child!==n.child)throw Error(Ft(153));if(t.child!==null){for(n=t.child,e=$h(n,n.pendingProps),t.child=e,e.return=t;n.sibling!==null;)n=n.sibling,e=e.sibling=$h(n,n.pendingProps),e.return=t;e.sibling=null}return t.child}function Lft(n,t,e){switch(t.tag){case 3:oX(t),Tg();break;case 5:DY(t);break;case 1:Fs(t.type)&&NS(t);break;case 4:uB(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Di(VS,i._currentValue),i._currentValue=r;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Di(on,on.current&1),t.flags|=128,null):e&t.child.childLanes?lX(n,t,e):(Di(on,on.current&1),n=ku(n,t,e),n!==null?n.sibling:null);Di(on,on.current&1);break;case 19:if(i=(e&t.childLanes)!==0,n.flags&128){if(i)return uX(n,t,e);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Di(on,on.current),i)break;return null;case 22:case 23:return t.lanes=0,sX(n,t,e)}return ku(n,t,e)}var hX,ZO,cX,dX;hX=function(n,t){for(var e=t.child;e!==null;){if(e.tag===5||e.tag===6)n.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};ZO=function(){};cX=function(n,t,e,i){var r=n.memoizedProps;if(r!==i){n=t.stateNode,fd(xl.current);var s=null;switch(e){case"input":r=yO(n,r),i=yO(n,i),s=[];break;case"select":r=cn({},r,{value:void 0}),i=cn({},i,{value:void 0}),s=[];break;case"textarea":r=SO(n,r),i=SO(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=FS)}wO(e,i);var a;e=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var o=r[u];for(a in o)o.hasOwnProperty(a)&&(e||(e={}),e[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(w_.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(o=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(e||(e={}),e[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(e||(e={}),e[a]=l[a])}else e||(s||(s=[]),s.push(u,e)),e=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(w_.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Fi("scroll",n),s||o===l||(s=[])):(s=s||[]).push(u,l))}e&&(s=s||[]).push("style",e);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};dX=function(n,t,e,i){e!==i&&(t.flags|=4)};function pv(n,t){if(!Ji)switch(n.tailMode){case"hidden":t=n.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?n.tail=null:e.sibling=null;break;case"collapsed":e=n.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Pr(n){var t=n.alternate!==null&&n.alternate.child===n.child,e=0,i=0;if(t)for(var r=n.child;r!==null;)e|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)e|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=e,t}function Dft(n,t,e){var i=t.pendingProps;switch(iB(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pr(t),null;case 1:return Fs(t.type)&&jS(),Pr(t),null;case 3:return i=t.stateNode,Pg(),Hi(Bs),Hi(Xr),cB(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Wb(t)?t.flags|=4:n===null||n.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,bo!==null&&(sR(bo),bo=null))),ZO(n,t),Pr(t),null;case 5:hB(t);var r=fd(B_.current);if(e=t.type,n!==null&&t.stateNode!=null)cX(n,t,e,i,r),n.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(Ft(166));return Pr(t),null}if(n=fd(xl.current),Wb(t)){i=t.stateNode,e=t.type;var s=t.memoizedProps;switch(i[ll]=t,i[L_]=s,n=(t.mode&1)!==0,e){case"dialog":Fi("cancel",i),Fi("close",i);break;case"iframe":case"object":case"embed":Fi("load",i);break;case"video":case"audio":for(r=0;r<Nv.length;r++)Fi(Nv[r],i);break;case"source":Fi("error",i);break;case"img":case"image":case"link":Fi("error",i),Fi("load",i);break;case"details":Fi("toggle",i);break;case"input":_8(i,s),Fi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Fi("invalid",i);break;case"textarea":b8(i,s),Fi("invalid",i)}wO(e,s),r=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?i.textContent!==o&&(s.suppressHydrationWarning!==!0&&Vb(i.textContent,o,n),r=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Vb(i.textContent,o,n),r=["children",""+o]):w_.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Fi("scroll",i)}switch(e){case"input":Lb(i),y8(i,s,!0);break;case"textarea":Lb(i),x8(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=FS)}i=r,t.updateQueue=i,i!==null&&(t.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=zU(e)),n==="http://www.w3.org/1999/xhtml"?e==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(e,{is:i.is}):(n=a.createElement(e),e==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,e),n[ll]=t,n[L_]=i,hX(n,t,!1,!1),t.stateNode=n;t:{switch(a=CO(e,i),e){case"dialog":Fi("cancel",n),Fi("close",n),r=i;break;case"iframe":case"object":case"embed":Fi("load",n),r=i;break;case"video":case"audio":for(r=0;r<Nv.length;r++)Fi(Nv[r],n);r=i;break;case"source":Fi("error",n),r=i;break;case"img":case"image":case"link":Fi("error",n),Fi("load",n),r=i;break;case"details":Fi("toggle",n),r=i;break;case"input":_8(n,i),r=yO(n,i),Fi("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=cn({},i,{value:void 0}),Fi("invalid",n);break;case"textarea":b8(n,i),r=SO(n,i),Fi("invalid",n);break;default:r=i}wO(e,r),o=r;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?WU(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&HU(n,l)):s==="children"?typeof l=="string"?(e!=="textarea"||l!=="")&&C_(n,l):typeof l=="number"&&C_(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(w_.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Fi("scroll",n):l!=null&&HD(n,s,l,a))}switch(e){case"input":Lb(n),y8(n,i,!1);break;case"textarea":Lb(n),x8(n);break;case"option":i.value!=null&&n.setAttribute("value",""+cc(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?ig(n,!!i.multiple,s,!1):i.defaultValue!=null&&ig(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=FS)}switch(e){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Pr(t),null;case 6:if(n&&t.stateNode!=null)dX(n,t,n.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Ft(166));if(e=fd(B_.current),fd(xl.current),Wb(t)){if(i=t.stateNode,e=t.memoizedProps,i[ll]=t,(s=i.nodeValue!==e)&&(n=ma,n!==null))switch(n.tag){case 3:Vb(i.nodeValue,e,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Vb(i.nodeValue,e,(n.mode&1)!==0)}s&&(t.flags|=4)}else i=(e.nodeType===9?e:e.ownerDocument).createTextNode(i),i[ll]=t,t.stateNode=i}return Pr(t),null;case 13:if(Hi(on),i=t.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ji&&fa!==null&&t.mode&1&&!(t.flags&128))EY(),Tg(),t.flags|=98560,s=!1;else if(s=Wb(t),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Ft(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ft(317));s[ll]=t}else Tg(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Pr(t),s=!1}else bo!==null&&(sR(bo),bo=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=e,t):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(n===null||on.current&1?Gn===0&&(Gn=3):AB())),t.updateQueue!==null&&(t.flags|=4),Pr(t),null);case 4:return Pg(),ZO(n,t),n===null&&R_(t.stateNode.containerInfo),Pr(t),null;case 10:return aB(t.type._context),Pr(t),null;case 17:return Fs(t.type)&&jS(),Pr(t),null;case 19:if(Hi(on),s=t.memoizedState,s===null)return Pr(t),null;if(i=(t.flags&128)!==0,a=s.rendering,a===null)if(i)pv(s,!1);else{if(Gn!==0||n!==null&&n.flags&128)for(n=t.child;n!==null;){if(a=GS(n),a!==null){for(t.flags|=128,pv(s,!1),i=a.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=e,e=t.child;e!==null;)s=e,n=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,n=a.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e=e.sibling;return Di(on,on.current&1|2),t.child}n=n.sibling}s.tail!==null&&Pn()>Og&&(t.flags|=128,i=!0,pv(s,!1),t.lanes=4194304)}else{if(!i)if(n=GS(a),n!==null){if(t.flags|=128,i=!0,e=n.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),pv(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Ji)return Pr(t),null}else 2*Pn()-s.renderingStartTime>Og&&e!==1073741824&&(t.flags|=128,i=!0,pv(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(e=s.last,e!==null?e.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Pn(),t.sibling=null,e=on.current,Di(on,i?e&1|2:e&1),t):(Pr(t),null);case 22:case 23:return SB(),i=t.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?oa&1073741824&&(Pr(t),t.subtreeFlags&6&&(t.flags|=8192)):Pr(t),null;case 24:return null;case 25:return null}throw Error(Ft(156,t.tag))}function Bft(n,t){switch(iB(t),t.tag){case 1:return Fs(t.type)&&jS(),n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 3:return Pg(),Hi(Bs),Hi(Xr),cB(),n=t.flags,n&65536&&!(n&128)?(t.flags=n&-65537|128,t):null;case 5:return hB(t),null;case 13:if(Hi(on),n=t.memoizedState,n!==null&&n.dehydrated!==null){if(t.alternate===null)throw Error(Ft(340));Tg()}return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 19:return Hi(on),null;case 4:return Pg(),null;case 10:return aB(t.type._context),null;case 22:case 23:return SB(),null;case 24:return null;default:return null}}var Ub=!1,jr=!1,Fft=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function Cf(n,t){var e=n.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(i){_n(n,t,i)}else e.current=null}function JO(n,t,e){try{e()}catch(i){_n(n,t,i)}}var hN=!1;function jft(n,t){if(DO=LS,n=vY(),tB(n)){if("selectionStart"in n)var e={start:n.selectionStart,end:n.selectionEnd};else t:{e=(e=n.ownerDocument)&&e.defaultView||window;var i=e.getSelection&&e.getSelection();if(i&&i.rangeCount!==0){e=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{e.nodeType,s.nodeType}catch{e=null;break t}var a=0,o=-1,l=-1,u=0,h=0,c=n,d=null;e:for(;;){for(var p;c!==e||r!==0&&c.nodeType!==3||(o=a+r),c!==s||i!==0&&c.nodeType!==3||(l=a+i),c.nodeType===3&&(a+=c.nodeValue.length),(p=c.firstChild)!==null;)d=c,c=p;for(;;){if(c===n)break e;if(d===e&&++u===r&&(o=a),d===s&&++h===i&&(l=a),(p=c.nextSibling)!==null)break;c=d,d=c.parentNode}c=p}e=o===-1||l===-1?null:{start:o,end:l}}else e=null}e=e||{start:0,end:0}}else e=null;for(BO={focusedElem:n,selectionRange:e},LS=!1,Jt=t;Jt!==null;)if(t=Jt,n=t.child,(t.subtreeFlags&1028)!==0&&n!==null)n.return=t,Jt=n;else for(;Jt!==null;){t=Jt;try{var f=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var g=f.memoizedProps,_=f.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:mo(t.type,g),_);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ft(163))}}catch(S){_n(t,t.return,S)}if(n=t.sibling,n!==null){n.return=t.return,Jt=n;break}Jt=t.return}return f=hN,hN=!1,f}function l0(n,t,e){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&JO(t,e,s)}r=r.next}while(r!==i)}}function bk(n,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var e=t=t.next;do{if((e.tag&n)===n){var i=e.create;e.destroy=i()}e=e.next}while(e!==t)}}function QO(n){var t=n.ref;if(t!==null){var e=n.stateNode;switch(n.tag){case 5:n=e;break;default:n=e}typeof t=="function"?t(n):t.current=n}}function pX(n){var t=n.alternate;t!==null&&(n.alternate=null,pX(t)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(t=n.stateNode,t!==null&&(delete t[ll],delete t[L_],delete t[NO],delete t[bft],delete t[xft])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function fX(n){return n.tag===5||n.tag===3||n.tag===4}function cN(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||fX(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function tR(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?e.nodeType===8?e.parentNode.insertBefore(n,t):e.insertBefore(n,t):(e.nodeType===8?(t=e.parentNode,t.insertBefore(n,e)):(t=e,t.appendChild(n)),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=FS));else if(i!==4&&(n=n.child,n!==null))for(tR(n,t,e),n=n.sibling;n!==null;)tR(n,t,e),n=n.sibling}function eR(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?e.insertBefore(n,t):e.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(eR(n,t,e),n=n.sibling;n!==null;)eR(n,t,e),n=n.sibling}var fr=null,_o=!1;function rh(n,t,e){for(e=e.child;e!==null;)gX(n,t,e),e=e.sibling}function gX(n,t,e){if(bl&&typeof bl.onCommitFiberUnmount=="function")try{bl.onCommitFiberUnmount(dk,e)}catch{}switch(e.tag){case 5:jr||Cf(e,t);case 6:var i=fr,r=_o;fr=null,rh(n,t,e),fr=i,_o=r,fr!==null&&(_o?(n=fr,e=e.stateNode,n.nodeType===8?n.parentNode.removeChild(e):n.removeChild(e)):fr.removeChild(e.stateNode));break;case 18:fr!==null&&(_o?(n=fr,e=e.stateNode,n.nodeType===8?pP(n.parentNode,e):n.nodeType===1&&pP(n,e),P_(n)):pP(fr,e.stateNode));break;case 4:i=fr,r=_o,fr=e.stateNode.containerInfo,_o=!0,rh(n,t,e),fr=i,_o=r;break;case 0:case 11:case 14:case 15:if(!jr&&(i=e.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&JO(e,t,a),r=r.next}while(r!==i)}rh(n,t,e);break;case 1:if(!jr&&(Cf(e,t),i=e.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=e.memoizedProps,i.state=e.memoizedState,i.componentWillUnmount()}catch(o){_n(e,t,o)}rh(n,t,e);break;case 21:rh(n,t,e);break;case 22:e.mode&1?(jr=(i=jr)||e.memoizedState!==null,rh(n,t,e),jr=i):rh(n,t,e);break;default:rh(n,t,e)}}function dN(n){var t=n.updateQueue;if(t!==null){n.updateQueue=null;var e=n.stateNode;e===null&&(e=n.stateNode=new Fft),t.forEach(function(i){var r=Yft.bind(null,n,i);e.has(i)||(e.add(i),i.then(r,r))})}}function po(n,t){var e=t.deletions;if(e!==null)for(var i=0;i<e.length;i++){var r=e[i];try{var s=n,a=t,o=a;t:for(;o!==null;){switch(o.tag){case 5:fr=o.stateNode,_o=!1;break t;case 3:fr=o.stateNode.containerInfo,_o=!0;break t;case 4:fr=o.stateNode.containerInfo,_o=!0;break t}o=o.return}if(fr===null)throw Error(Ft(160));gX(s,a,r),fr=null,_o=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){_n(r,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)mX(t,n),t=t.sibling}function mX(n,t){var e=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(po(t,n),qo(n),i&4){try{l0(3,n,n.return),bk(3,n)}catch(g){_n(n,n.return,g)}try{l0(5,n,n.return)}catch(g){_n(n,n.return,g)}}break;case 1:po(t,n),qo(n),i&512&&e!==null&&Cf(e,e.return);break;case 5:if(po(t,n),qo(n),i&512&&e!==null&&Cf(e,e.return),n.flags&32){var r=n.stateNode;try{C_(r,"")}catch(g){_n(n,n.return,g)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,a=e!==null?e.memoizedProps:s,o=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&jU(r,s),CO(o,a);var u=CO(o,s);for(a=0;a<l.length;a+=2){var h=l[a],c=l[a+1];h==="style"?WU(r,c):h==="dangerouslySetInnerHTML"?HU(r,c):h==="children"?C_(r,c):HD(r,h,c,u)}switch(o){case"input":bO(r,s);break;case"textarea":NU(r,s);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?ig(r,!!s.multiple,p,!1):d!==!!s.multiple&&(s.defaultValue!=null?ig(r,!!s.multiple,s.defaultValue,!0):ig(r,!!s.multiple,s.multiple?[]:"",!1))}r[L_]=s}catch(g){_n(n,n.return,g)}}break;case 6:if(po(t,n),qo(n),i&4){if(n.stateNode===null)throw Error(Ft(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(g){_n(n,n.return,g)}}break;case 3:if(po(t,n),qo(n),i&4&&e!==null&&e.memoizedState.isDehydrated)try{P_(t.containerInfo)}catch(g){_n(n,n.return,g)}break;case 4:po(t,n),qo(n);break;case 13:po(t,n),qo(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(bB=Pn())),i&4&&dN(n);break;case 22:if(h=e!==null&&e.memoizedState!==null,n.mode&1?(jr=(u=jr)||h,po(t,n),jr=u):po(t,n),qo(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(Jt=n,h=n.child;h!==null;){for(c=Jt=h;Jt!==null;){switch(d=Jt,p=d.child,d.tag){case 0:case 11:case 14:case 15:l0(4,d,d.return);break;case 1:Cf(d,d.return);var f=d.stateNode;if(typeof f.componentWillUnmount=="function"){i=d,e=d.return;try{t=i,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){_n(i,e,g)}}break;case 5:Cf(d,d.return);break;case 22:if(d.memoizedState!==null){fN(c);continue}}p!==null?(p.return=d,Jt=p):fN(c)}h=h.sibling}t:for(h=null,c=n;;){if(c.tag===5){if(h===null){h=c;try{r=c.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=c.stateNode,l=c.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=VU("display",a))}catch(g){_n(n,n.return,g)}}}else if(c.tag===6){if(h===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(g){_n(n,n.return,g)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===n)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===n)break t;for(;c.sibling===null;){if(c.return===null||c.return===n)break t;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:po(t,n),qo(n),i&4&&dN(n);break;case 21:break;default:po(t,n),qo(n)}}function qo(n){var t=n.flags;if(t&2){try{t:{for(var e=n.return;e!==null;){if(fX(e)){var i=e;break t}e=e.return}throw Error(Ft(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(C_(r,""),i.flags&=-33);var s=cN(n);eR(n,s,r);break;case 3:case 4:var a=i.stateNode.containerInfo,o=cN(n);tR(n,o,a);break;default:throw Error(Ft(161))}}catch(l){_n(n,n.return,l)}n.flags&=-3}t&4096&&(n.flags&=-4097)}function Nft(n,t,e){Jt=n,vX(n)}function vX(n,t,e){for(var i=(n.mode&1)!==0;Jt!==null;){var r=Jt,s=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||Ub;if(!a){var o=r.alternate,l=o!==null&&o.memoizedState!==null||jr;o=Ub;var u=jr;if(Ub=a,(jr=l)&&!u)for(Jt=r;Jt!==null;)a=Jt,l=a.child,a.tag===22&&a.memoizedState!==null?gN(r):l!==null?(l.return=a,Jt=l):gN(r);for(;s!==null;)Jt=s,vX(s),s=s.sibling;Jt=r,Ub=o,jr=u}pN(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Jt=s):pN(n)}}function pN(n){for(;Jt!==null;){var t=Jt;if(t.flags&8772){var e=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:jr||bk(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!jr)if(e===null)i.componentDidMount();else{var r=t.elementType===t.type?e.memoizedProps:mo(t.type,e.memoizedProps);i.componentDidUpdate(r,e.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Z8(t,s,i);break;case 3:var a=t.updateQueue;if(a!==null){if(e=null,t.child!==null)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}Z8(t,a,e)}break;case 5:var o=t.stateNode;if(e===null&&t.flags&4){e=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&e.focus();break;case"img":l.src&&(e.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var c=h.dehydrated;c!==null&&P_(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ft(163))}jr||t.flags&512&&QO(t)}catch(d){_n(t,t.return,d)}}if(t===n){Jt=null;break}if(e=t.sibling,e!==null){e.return=t.return,Jt=e;break}Jt=t.return}}function fN(n){for(;Jt!==null;){var t=Jt;if(t===n){Jt=null;break}var e=t.sibling;if(e!==null){e.return=t.return,Jt=e;break}Jt=t.return}}function gN(n){for(;Jt!==null;){var t=Jt;try{switch(t.tag){case 0:case 11:case 15:var e=t.return;try{bk(4,t)}catch(l){_n(t,e,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var r=t.return;try{i.componentDidMount()}catch(l){_n(t,r,l)}}var s=t.return;try{QO(t)}catch(l){_n(t,s,l)}break;case 5:var a=t.return;try{QO(t)}catch(l){_n(t,a,l)}}}catch(l){_n(t,t.return,l)}if(t===n){Jt=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Jt=o;break}Jt=t.return}}var zft=Math.ceil,XS=Bu.ReactCurrentDispatcher,_B=Bu.ReactCurrentOwner,Xa=Bu.ReactCurrentBatchConfig,si=0,or=null,Dn=null,_r=0,oa=0,kf=wc(0),Gn=0,z_=null,Yd=0,xk=0,yB=0,u0=null,Ps=null,bB=0,Og=1/0,Kl=null,KS=!1,iR=null,Vh=null,Yb=!1,Sh=null,qS=0,h0=0,nR=null,lS=-1,uS=0;function us(){return si&6?Pn():lS!==-1?lS:lS=Pn()}function Wh(n){return n.mode&1?si&2&&_r!==0?_r&-_r:Aft.transition!==null?(uS===0&&(uS=eY()),uS):(n=xi,n!==0||(n=window.event,n=n===void 0?16:lY(n.type)),n):1}function Fo(n,t,e,i){if(50<h0)throw h0=0,nR=null,Error(Ft(185));n1(n,e,i),(!(si&2)||n!==or)&&(n===or&&(!(si&2)&&(xk|=e),Gn===4&&vh(n,_r)),js(n,i),e===1&&si===0&&!(t.mode&1)&&(Og=Pn()+500,vk&&Cc()))}function js(n,t){var e=n.callbackNode;Apt(n,t);var i=IS(n,n===or?_r:0);if(i===0)e!==null&&w8(e),n.callbackNode=null,n.callbackPriority=0;else if(t=i&-i,n.callbackPriority!==t){if(e!=null&&w8(e),t===1)n.tag===0?Sft(mN.bind(null,n)):TY(mN.bind(null,n)),_ft(function(){!(si&6)&&Cc()}),e=null;else{switch(iY(i)){case 1:e=UD;break;case 4:e=QU;break;case 16:e=RS;break;case 536870912:e=tY;break;default:e=RS}e=CX(e,_X.bind(null,n))}n.callbackPriority=t,n.callbackNode=e}}function _X(n,t){if(lS=-1,uS=0,si&6)throw Error(Ft(327));var e=n.callbackNode;if(og()&&n.callbackNode!==e)return null;var i=IS(n,n===or?_r:0);if(i===0)return null;if(i&30||i&n.expiredLanes||t)t=ZS(n,i);else{t=i;var r=si;si|=2;var s=bX();(or!==n||_r!==t)&&(Kl=null,Og=Pn()+500,wd(n,t));do try{Wft();break}catch(o){yX(n,o)}while(!0);sB(),XS.current=s,si=r,Dn!==null?t=0:(or=null,_r=0,t=Gn)}if(t!==0){if(t===2&&(r=EO(n),r!==0&&(i=r,t=rR(n,r))),t===1)throw e=z_,wd(n,0),vh(n,i),js(n,Pn()),e;if(t===6)vh(n,i);else{if(r=n.current.alternate,!(i&30)&&!Hft(r)&&(t=ZS(n,i),t===2&&(s=EO(n),s!==0&&(i=s,t=rR(n,s))),t===1))throw e=z_,wd(n,0),vh(n,i),js(n,Pn()),e;switch(n.finishedWork=r,n.finishedLanes=i,t){case 0:case 1:throw Error(Ft(345));case 2:Jc(n,Ps,Kl);break;case 3:if(vh(n,i),(i&130023424)===i&&(t=bB+500-Pn(),10<t)){if(IS(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){us(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=jO(Jc.bind(null,n,Ps,Kl),t);break}Jc(n,Ps,Kl);break;case 4:if(vh(n,i),(i&4194240)===i)break;for(t=n.eventTimes,r=-1;0<i;){var a=31-Bo(i);s=1<<a,a=t[a],a>r&&(r=a),i&=~s}if(i=r,i=Pn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*zft(i/1960))-i,10<i){n.timeoutHandle=jO(Jc.bind(null,n,Ps,Kl),i);break}Jc(n,Ps,Kl);break;case 5:Jc(n,Ps,Kl);break;default:throw Error(Ft(329))}}}return js(n,Pn()),n.callbackNode===e?_X.bind(null,n):null}function rR(n,t){var e=u0;return n.current.memoizedState.isDehydrated&&(wd(n,t).flags|=256),n=ZS(n,t),n!==2&&(t=Ps,Ps=e,t!==null&&sR(t)),n}function sR(n){Ps===null?Ps=n:Ps.push.apply(Ps,n)}function Hft(n){for(var t=n;;){if(t.flags&16384){var e=t.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var i=0;i<e.length;i++){var r=e[i],s=r.getSnapshot;r=r.value;try{if(!Ho(s(),r))return!1}catch{return!1}}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vh(n,t){for(t&=~yB,t&=~xk,n.suspendedLanes|=t,n.pingedLanes&=~t,n=n.expirationTimes;0<t;){var e=31-Bo(t),i=1<<e;n[e]=-1,t&=~i}}function mN(n){if(si&6)throw Error(Ft(327));og();var t=IS(n,0);if(!(t&1))return js(n,Pn()),null;var e=ZS(n,t);if(n.tag!==0&&e===2){var i=EO(n);i!==0&&(t=i,e=rR(n,i))}if(e===1)throw e=z_,wd(n,0),vh(n,t),js(n,Pn()),e;if(e===6)throw Error(Ft(345));return n.finishedWork=n.current.alternate,n.finishedLanes=t,Jc(n,Ps,Kl),js(n,Pn()),null}function xB(n,t){var e=si;si|=1;try{return n(t)}finally{si=e,si===0&&(Og=Pn()+500,vk&&Cc())}}function Xd(n){Sh!==null&&Sh.tag===0&&!(si&6)&&og();var t=si;si|=1;var e=Xa.transition,i=xi;try{if(Xa.transition=null,xi=1,n)return n()}finally{xi=i,Xa.transition=e,si=t,!(si&6)&&Cc()}}function SB(){oa=kf.current,Hi(kf)}function wd(n,t){n.finishedWork=null,n.finishedLanes=0;var e=n.timeoutHandle;if(e!==-1&&(n.timeoutHandle=-1,vft(e)),Dn!==null)for(e=Dn.return;e!==null;){var i=e;switch(iB(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&jS();break;case 3:Pg(),Hi(Bs),Hi(Xr),cB();break;case 5:hB(i);break;case 4:Pg();break;case 13:Hi(on);break;case 19:Hi(on);break;case 10:aB(i.type._context);break;case 22:case 23:SB()}e=e.return}if(or=n,Dn=n=$h(n.current,null),_r=oa=t,Gn=0,z_=null,yB=xk=Yd=0,Ps=u0=null,pd!==null){for(t=0;t<pd.length;t++)if(e=pd[t],i=e.interleaved,i!==null){e.interleaved=null;var r=i.next,s=e.pending;if(s!==null){var a=s.next;s.next=r,i.next=a}e.pending=i}pd=null}return n}function yX(n,t){do{var e=Dn;try{if(sB(),sS.current=YS,US){for(var i=hn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}US=!1}if(Ud=0,tr=$n=hn=null,o0=!1,F_=0,_B.current=null,e===null||e.return===null){Gn=1,z_=t,Dn=null;break}t:{var s=n,a=e.return,o=e,l=t;if(t=_r,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=o,c=h.tag;if(!(h.mode&1)&&(c===0||c===11||c===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=nN(a);if(p!==null){p.flags&=-257,rN(p,a,o,s,t),p.mode&1&&iN(s,u,t),t=p,l=u;var f=t.updateQueue;if(f===null){var g=new Set;g.add(l),t.updateQueue=g}else f.add(l);break t}else{if(!(t&1)){iN(s,u,t),AB();break t}l=Error(Ft(426))}}else if(Ji&&o.mode&1){var _=nN(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),rN(_,a,o,s,t),nB(Eg(l,o));break t}}s=l=Eg(l,o),Gn!==4&&(Gn=2),u0===null?u0=[s]:u0.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var v=iX(s,l,t);q8(s,v);break t;case 1:o=l;var y=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Vh===null||!Vh.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var S=nX(s,o,t);q8(s,S);break t}}s=s.return}while(s!==null)}SX(e)}catch(A){t=A,Dn===e&&e!==null&&(Dn=e=e.return);continue}break}while(!0)}function bX(){var n=XS.current;return XS.current=YS,n===null?YS:n}function AB(){(Gn===0||Gn===3||Gn===2)&&(Gn=4),or===null||!(Yd&268435455)&&!(xk&268435455)||vh(or,_r)}function ZS(n,t){var e=si;si|=2;var i=bX();(or!==n||_r!==t)&&(Kl=null,wd(n,t));do try{Vft();break}catch(r){yX(n,r)}while(!0);if(sB(),si=e,XS.current=i,Dn!==null)throw Error(Ft(261));return or=null,_r=0,Gn}function Vft(){for(;Dn!==null;)xX(Dn)}function Wft(){for(;Dn!==null&&!fpt();)xX(Dn)}function xX(n){var t=wX(n.alternate,n,oa);n.memoizedProps=n.pendingProps,t===null?SX(n):Dn=t,_B.current=null}function SX(n){var t=n;do{var e=t.alternate;if(n=t.return,t.flags&32768){if(e=Bft(e,t),e!==null){e.flags&=32767,Dn=e;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Gn=6,Dn=null;return}}else if(e=Dft(e,t,oa),e!==null){Dn=e;return}if(t=t.sibling,t!==null){Dn=t;return}Dn=t=n}while(t!==null);Gn===0&&(Gn=5)}function Jc(n,t,e){var i=xi,r=Xa.transition;try{Xa.transition=null,xi=1,$ft(n,t,e,i)}finally{Xa.transition=r,xi=i}return null}function $ft(n,t,e,i){do og();while(Sh!==null);if(si&6)throw Error(Ft(327));e=n.finishedWork;var r=n.finishedLanes;if(e===null)return null;if(n.finishedWork=null,n.finishedLanes=0,e===n.current)throw Error(Ft(177));n.callbackNode=null,n.callbackPriority=0;var s=e.lanes|e.childLanes;if(wpt(n,s),n===or&&(Dn=or=null,_r=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||Yb||(Yb=!0,CX(RS,function(){return og(),null})),s=(e.flags&15990)!==0,e.subtreeFlags&15990||s){s=Xa.transition,Xa.transition=null;var a=xi;xi=1;var o=si;si|=4,_B.current=null,jft(n,e),mX(e,n),hft(BO),LS=!!DO,BO=DO=null,n.current=e,Nft(e),gpt(),si=o,xi=a,Xa.transition=s}else n.current=e;if(Yb&&(Yb=!1,Sh=n,qS=r),s=n.pendingLanes,s===0&&(Vh=null),_pt(e.stateNode),js(n,Pn()),t!==null)for(i=n.onRecoverableError,e=0;e<t.length;e++)r=t[e],i(r.value,{componentStack:r.stack,digest:r.digest});if(KS)throw KS=!1,n=iR,iR=null,n;return qS&1&&n.tag!==0&&og(),s=n.pendingLanes,s&1?n===nR?h0++:(h0=0,nR=n):h0=0,Cc(),null}function og(){if(Sh!==null){var n=iY(qS),t=Xa.transition,e=xi;try{if(Xa.transition=null,xi=16>n?16:n,Sh===null)var i=!1;else{if(n=Sh,Sh=null,qS=0,si&6)throw Error(Ft(331));var r=si;for(si|=4,Jt=n.current;Jt!==null;){var s=Jt,a=s.child;if(Jt.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(Jt=u;Jt!==null;){var h=Jt;switch(h.tag){case 0:case 11:case 15:l0(8,h,s)}var c=h.child;if(c!==null)c.return=h,Jt=c;else for(;Jt!==null;){h=Jt;var d=h.sibling,p=h.return;if(pX(h),h===u){Jt=null;break}if(d!==null){d.return=p,Jt=d;break}Jt=p}}}var f=s.alternate;if(f!==null){var g=f.child;if(g!==null){f.child=null;do{var _=g.sibling;g.sibling=null,g=_}while(g!==null)}}Jt=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Jt=a;else t:for(;Jt!==null;){if(s=Jt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:l0(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Jt=v;break t}Jt=s.return}}var y=n.current;for(Jt=y;Jt!==null;){a=Jt;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,Jt=b;else t:for(a=y;Jt!==null;){if(o=Jt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:bk(9,o)}}catch(A){_n(o,o.return,A)}if(o===a){Jt=null;break t}var S=o.sibling;if(S!==null){S.return=o.return,Jt=S;break t}Jt=o.return}}if(si=r,Cc(),bl&&typeof bl.onPostCommitFiberRoot=="function")try{bl.onPostCommitFiberRoot(dk,n)}catch{}i=!0}return i}finally{xi=e,Xa.transition=t}}return!1}function vN(n,t,e){t=Eg(e,t),t=iX(n,t,1),n=Hh(n,t,1),t=us(),n!==null&&(n1(n,1,t),js(n,t))}function _n(n,t,e){if(n.tag===3)vN(n,n,e);else for(;t!==null;){if(t.tag===3){vN(t,n,e);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Vh===null||!Vh.has(i))){n=Eg(e,n),n=nX(t,n,1),t=Hh(t,n,1),n=us(),t!==null&&(n1(t,1,n),js(t,n));break}}t=t.return}}function Gft(n,t,e){var i=n.pingCache;i!==null&&i.delete(t),t=us(),n.pingedLanes|=n.suspendedLanes&e,or===n&&(_r&e)===e&&(Gn===4||Gn===3&&(_r&130023424)===_r&&500>Pn()-bB?wd(n,0):yB|=e),js(n,t)}function AX(n,t){t===0&&(n.mode&1?(t=Fb,Fb<<=1,!(Fb&130023424)&&(Fb=4194304)):t=1);var e=us();n=Cu(n,t),n!==null&&(n1(n,t,e),js(n,e))}function Uft(n){var t=n.memoizedState,e=0;t!==null&&(e=t.retryLane),AX(n,e)}function Yft(n,t){var e=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(e=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Ft(314))}i!==null&&i.delete(t),AX(n,e)}var wX;wX=function(n,t,e){if(n!==null)if(n.memoizedProps!==t.pendingProps||Bs.current)Rs=!0;else{if(!(n.lanes&e)&&!(t.flags&128))return Rs=!1,Lft(n,t,e);Rs=!!(n.flags&131072)}else Rs=!1,Ji&&t.flags&1048576&&MY(t,HS,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;oS(n,t),n=t.pendingProps;var r=kg(t,Xr.current);ag(t,e),r=pB(null,t,i,n,r,e);var s=fB();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fs(i)?(s=!0,NS(t)):s=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,lB(t),r.updater=yk,t.stateNode=r,r._reactInternals=t,GO(t,i,n,e),t=XO(null,t,i,!0,s,e)):(t.tag=0,Ji&&s&&eB(t),as(null,t,r,e),t=t.child),t;case 16:i=t.elementType;t:{switch(oS(n,t),n=t.pendingProps,r=i._init,i=r(i._payload),t.type=i,r=t.tag=Kft(i),n=mo(i,n),r){case 0:t=YO(null,t,i,n,e);break t;case 1:t=oN(null,t,i,n,e);break t;case 11:t=sN(null,t,i,n,e);break t;case 14:t=aN(null,t,i,mo(i.type,n),e);break t}throw Error(Ft(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:mo(i,r),YO(n,t,i,r,e);case 1:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:mo(i,r),oN(n,t,i,r,e);case 3:t:{if(oX(t),n===null)throw Error(Ft(387));i=t.pendingProps,s=t.memoizedState,r=s.element,LY(n,t),$S(t,i,null,e);var a=t.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){r=Eg(Error(Ft(423)),t),t=lN(n,t,i,e,r);break t}else if(i!==r){r=Eg(Error(Ft(424)),t),t=lN(n,t,i,e,r);break t}else for(fa=zh(t.stateNode.containerInfo.firstChild),ma=t,Ji=!0,bo=null,e=RY(t,null,i,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(Tg(),i===r){t=ku(n,t,e);break t}as(n,t,i,e)}t=t.child}return t;case 5:return DY(t),n===null&&VO(t),i=t.type,r=t.pendingProps,s=n!==null?n.memoizedProps:null,a=r.children,FO(i,r)?a=null:s!==null&&FO(i,s)&&(t.flags|=32),aX(n,t),as(n,t,a,e),t.child;case 6:return n===null&&VO(t),null;case 13:return lX(n,t,e);case 4:return uB(t,t.stateNode.containerInfo),i=t.pendingProps,n===null?t.child=Mg(t,null,i,e):as(n,t,i,e),t.child;case 11:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:mo(i,r),sN(n,t,i,r,e);case 7:return as(n,t,t.pendingProps,e),t.child;case 8:return as(n,t,t.pendingProps.children,e),t.child;case 12:return as(n,t,t.pendingProps.children,e),t.child;case 10:t:{if(i=t.type._context,r=t.pendingProps,s=t.memoizedProps,a=r.value,Di(VS,i._currentValue),i._currentValue=a,s!==null)if(Ho(s.value,a)){if(s.children===r.children&&!Bs.current){t=ku(n,t,e);break t}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=mu(-1,e&-e),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=e,l=s.alternate,l!==null&&(l.lanes|=e),WO(s.return,e,t),o.lanes|=e;break}l=l.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Ft(341));a.lanes|=e,o=a.alternate,o!==null&&(o.lanes|=e),WO(a,e,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}as(n,t,r.children,e),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,ag(t,e),r=qa(r),i=i(r),t.flags|=1,as(n,t,i,e),t.child;case 14:return i=t.type,r=mo(i,t.pendingProps),r=mo(i.type,r),aN(n,t,i,r,e);case 15:return rX(n,t,t.type,t.pendingProps,e);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:mo(i,r),oS(n,t),t.tag=1,Fs(i)?(n=!0,NS(t)):n=!1,ag(t,e),eX(t,i,r),GO(t,i,r,e),XO(null,t,i,!0,n,e);case 19:return uX(n,t,e);case 22:return sX(n,t,e)}throw Error(Ft(156,t.tag))};function CX(n,t){return JU(n,t)}function Xft(n,t,e,i){this.tag=n,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wa(n,t,e,i){return new Xft(n,t,e,i)}function wB(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Kft(n){if(typeof n=="function")return wB(n)?1:0;if(n!=null){if(n=n.$$typeof,n===WD)return 11;if(n===$D)return 14}return 2}function $h(n,t){var e=n.alternate;return e===null?(e=Wa(n.tag,t,n.key,n.mode),e.elementType=n.elementType,e.type=n.type,e.stateNode=n.stateNode,e.alternate=n,n.alternate=e):(e.pendingProps=t,e.type=n.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=n.flags&14680064,e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=n.sibling,e.index=n.index,e.ref=n.ref,e}function hS(n,t,e,i,r,s){var a=2;if(i=n,typeof n=="function")wB(n)&&(a=1);else if(typeof n=="string")a=5;else t:switch(n){case mf:return Cd(e.children,r,s,t);case VD:a=8,r|=8;break;case gO:return n=Wa(12,e,t,r|2),n.elementType=gO,n.lanes=s,n;case mO:return n=Wa(13,e,t,r),n.elementType=mO,n.lanes=s,n;case vO:return n=Wa(19,e,t,r),n.elementType=vO,n.lanes=s,n;case DU:return Sk(e,r,s,t);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case IU:a=10;break t;case LU:a=9;break t;case WD:a=11;break t;case $D:a=14;break t;case ch:a=16,i=null;break t}throw Error(Ft(130,n==null?n:typeof n,""))}return t=Wa(a,e,t,r),t.elementType=n,t.type=i,t.lanes=s,t}function Cd(n,t,e,i){return n=Wa(7,n,i,t),n.lanes=e,n}function Sk(n,t,e,i){return n=Wa(22,n,i,t),n.elementType=DU,n.lanes=e,n.stateNode={isHidden:!1},n}function xP(n,t,e){return n=Wa(6,n,null,t),n.lanes=e,n}function SP(n,t,e){return t=Wa(4,n.children!==null?n.children:[],n.key,t),t.lanes=e,t.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},t}function qft(n,t,e,i,r){this.tag=t,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=iP(0),this.expirationTimes=iP(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=iP(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function CB(n,t,e,i,r,s,a,o,l){return n=new qft(n,t,e,o,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Wa(3,null,null,t),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},lB(s),n}function Zft(n,t,e){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gf,key:i==null?null:""+i,children:n,containerInfo:t,implementation:e}}function kX(n){if(!n)return dc;n=n._reactInternals;t:{if(yp(n)!==n||n.tag!==1)throw Error(Ft(170));var t=n;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(Fs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(Ft(171))}if(n.tag===1){var e=n.type;if(Fs(e))return kY(n,e,t)}return t}function TX(n,t,e,i,r,s,a,o,l){return n=CB(e,i,!0,n,r,s,a,o,l),n.context=kX(null),e=n.current,i=us(),r=Wh(e),s=mu(i,r),s.callback=t??null,Hh(e,s,r),n.current.lanes=r,n1(n,r,i),js(n,i),n}function Ak(n,t,e,i){var r=t.current,s=us(),a=Wh(r);return e=kX(e),t.context===null?t.context=e:t.pendingContext=e,t=mu(s,a),t.payload={element:n},i=i===void 0?null:i,i!==null&&(t.callback=i),n=Hh(r,t,a),n!==null&&(Fo(n,r,a,s),rS(n,r,a)),a}function JS(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function _N(n,t){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var e=n.retryLane;n.retryLane=e!==0&&e<t?e:t}}function kB(n,t){_N(n,t),(n=n.alternate)&&_N(n,t)}function Jft(){return null}var MX=typeof reportError=="function"?reportError:function(n){console.error(n)};function TB(n){this._internalRoot=n}wk.prototype.render=TB.prototype.render=function(n){var t=this._internalRoot;if(t===null)throw Error(Ft(409));Ak(n,t,null,null)};wk.prototype.unmount=TB.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var t=n.containerInfo;Xd(function(){Ak(null,n,null,null)}),t[wu]=null}};function wk(n){this._internalRoot=n}wk.prototype.unstable_scheduleHydration=function(n){if(n){var t=sY();n={blockedOn:null,target:n,priority:t};for(var e=0;e<mh.length&&t!==0&&t<mh[e].priority;e++);mh.splice(e,0,n),e===0&&oY(n)}};function MB(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ck(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function yN(){}function Qft(n,t,e,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=JS(a);s.call(u)}}var a=TX(t,i,n,0,null,!1,!1,"",yN);return n._reactRootContainer=a,n[wu]=a.current,R_(n.nodeType===8?n.parentNode:n),Xd(),a}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var o=i;i=function(){var u=JS(l);o.call(u)}}var l=CB(n,0,!1,null,null,!1,!1,"",yN);return n._reactRootContainer=l,n[wu]=l.current,R_(n.nodeType===8?n.parentNode:n),Xd(function(){Ak(t,l,e,i)}),l}function kk(n,t,e,i,r){var s=e._reactRootContainer;if(s){var a=s;if(typeof r=="function"){var o=r;r=function(){var l=JS(a);o.call(l)}}Ak(t,a,n,r)}else a=Qft(e,t,n,r,i);return JS(a)}nY=function(n){switch(n.tag){case 3:var t=n.stateNode;if(t.current.memoizedState.isDehydrated){var e=jv(t.pendingLanes);e!==0&&(YD(t,e|1),js(t,Pn()),!(si&6)&&(Og=Pn()+500,Cc()))}break;case 13:Xd(function(){var i=Cu(n,1);if(i!==null){var r=us();Fo(i,n,1,r)}}),kB(n,1)}};XD=function(n){if(n.tag===13){var t=Cu(n,134217728);if(t!==null){var e=us();Fo(t,n,134217728,e)}kB(n,134217728)}};rY=function(n){if(n.tag===13){var t=Wh(n),e=Cu(n,t);if(e!==null){var i=us();Fo(e,n,t,i)}kB(n,t)}};sY=function(){return xi};aY=function(n,t){var e=xi;try{return xi=n,t()}finally{xi=e}};TO=function(n,t,e){switch(t){case"input":if(bO(n,e),t=e.name,e.type==="radio"&&t!=null){for(e=n;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<e.length;t++){var i=e[t];if(i!==n&&i.form===n.form){var r=mk(i);if(!r)throw Error(Ft(90));FU(i),bO(i,r)}}}break;case"textarea":NU(n,e);break;case"select":t=e.value,t!=null&&ig(n,!!e.multiple,t,!1)}};UU=xB;YU=Xd;var tgt={usingClientEntryPoint:!1,Events:[s1,bf,mk,$U,GU,xB]},fv={findFiberByHostInstance:dd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},egt={bundleType:fv.bundleType,version:fv.version,rendererPackageName:fv.rendererPackageName,rendererConfig:fv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bu.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=qU(n),n===null?null:n.stateNode},findFiberByHostInstance:fv.findFiberByHostInstance||Jft,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xb.isDisabled&&Xb.supportsFiber)try{dk=Xb.inject(egt),bl=Xb}catch{}}ba.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tgt;ba.createPortal=function(n,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!MB(t))throw Error(Ft(200));return Zft(n,t,null,e)};ba.createRoot=function(n,t){if(!MB(n))throw Error(Ft(299));var e=!1,i="",r=MX;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=CB(n,1,!1,null,null,e,!1,i,r),n[wu]=t.current,R_(n.nodeType===8?n.parentNode:n),new TB(t)};ba.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var t=n._reactInternals;if(t===void 0)throw typeof n.render=="function"?Error(Ft(188)):(n=Object.keys(n).join(","),Error(Ft(268,n)));return n=qU(t),n=n===null?null:n.stateNode,n};ba.flushSync=function(n){return Xd(n)};ba.hydrate=function(n,t,e){if(!Ck(t))throw Error(Ft(200));return kk(null,n,t,!0,e)};ba.hydrateRoot=function(n,t,e){if(!MB(n))throw Error(Ft(405));var i=e!=null&&e.hydratedSources||null,r=!1,s="",a=MX;if(e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),t=TX(t,null,n,1,e??null,r,!1,s,a),n[wu]=t.current,R_(n),i)for(n=0;n<i.length;n++)e=i[n],r=e._getVersion,r=r(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,r]:t.mutableSourceEagerHydrationData.push(e,r);return new wk(t)};ba.render=function(n,t,e){if(!Ck(t))throw Error(Ft(200));return kk(null,n,t,!1,e)};ba.unmountComponentAtNode=function(n){if(!Ck(n))throw Error(Ft(40));return n._reactRootContainer?(Xd(function(){kk(null,null,n,!1,function(){n._reactRootContainer=null,n[wu]=null})}),!0):!1};ba.unstable_batchedUpdates=xB;ba.unstable_renderSubtreeIntoContainer=function(n,t,e,i){if(!Ck(e))throw Error(Ft(200));if(n==null||n._reactInternals===void 0)throw Error(Ft(38));return kk(n,t,e,!1,i)};ba.version="18.3.1-next-f1338f8080-20240426";function PX(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(PX)}catch(n){console.error(n)}}PX(),PU.exports=ba;var PB=PU.exports;const hu=Du(PB);var bN=PB;pO.createRoot=bN.createRoot,pO.hydrateRoot=bN.hydrateRoot;/**
 * @remix-run/router v1.19.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function H_(){return H_=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},H_.apply(this,arguments)}var Ah;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ah||(Ah={}));const xN="popstate";function igt(n){n===void 0&&(n={});function t(i,r){let{pathname:s,search:a,hash:o}=i.location;return aR("",{pathname:s,search:a,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function e(i,r){return typeof r=="string"?r:OX(r)}return rgt(t,e,null,n)}function Yn(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function EX(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ngt(){return Math.random().toString(36).substr(2,8)}function SN(n,t){return{usr:n.state,key:n.key,idx:t}}function aR(n,t,e,i){return e===void 0&&(e=null),H_({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof t=="string"?vm(t):t,{state:e,key:t&&t.key||i||ngt()})}function OX(n){let{pathname:t="/",search:e="",hash:i=""}=n;return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function vm(n){let t={};if(n){let e=n.indexOf("#");e>=0&&(t.hash=n.substr(e),n=n.substr(0,e));let i=n.indexOf("?");i>=0&&(t.search=n.substr(i),n=n.substr(0,i)),n&&(t.pathname=n)}return t}function rgt(n,t,e,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,o=Ah.Pop,l=null,u=h();u==null&&(u=0,a.replaceState(H_({},a.state,{idx:u}),""));function h(){return(a.state||{idx:null}).idx}function c(){o=Ah.Pop;let _=h(),v=_==null?null:_-u;u=_,l&&l({action:o,location:g.location,delta:v})}function d(_,v){o=Ah.Push;let y=aR(g.location,_,v);u=h()+1;let b=SN(y,u),S=g.createHref(y);try{a.pushState(b,"",S)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;r.location.assign(S)}s&&l&&l({action:o,location:g.location,delta:1})}function p(_,v){o=Ah.Replace;let y=aR(g.location,_,v);u=h();let b=SN(y,u),S=g.createHref(y);a.replaceState(b,"",S),s&&l&&l({action:o,location:g.location,delta:0})}function f(_){let v=r.location.origin!=="null"?r.location.origin:r.location.href,y=typeof _=="string"?_:OX(_);return y=y.replace(/ $/,"%20"),Yn(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let g={get action(){return o},get location(){return n(r,a)},listen(_){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(xN,c),l=_,()=>{r.removeEventListener(xN,c),l=null}},createHref(_){return t(r,_)},createURL:f,encodeLocation(_){let v=f(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:p,go(_){return a.go(_)}};return g}var AN;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(AN||(AN={}));function sgt(n,t,e){return e===void 0&&(e="/"),agt(n,t,e,!1)}function agt(n,t,e,i){let r=typeof t=="string"?vm(t):t,s=LX(r.pathname||"/",e);if(s==null)return null;let a=RX(n);ogt(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=_gt(s);o=mgt(a[l],u,i)}return o}function RX(n,t,e,i){t===void 0&&(t=[]),e===void 0&&(e=[]),i===void 0&&(i="");let r=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(Yn(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let u=kd([i,l.relativePath]),h=e.concat(l);s.children&&s.children.length>0&&(Yn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),RX(s.children,t,h,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:fgt(u,s.index),routesMeta:h})};return n.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))r(s,a);else for(let l of IX(s.path))r(s,a,l)}),t}function IX(n){let t=n.split("/");if(t.length===0)return[];let[e,...i]=t,r=e.endsWith("?"),s=e.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=IX(i.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),r&&o.push(...a),o.map(l=>n.startsWith("/")&&l===""?"/":l)}function ogt(n){n.sort((t,e)=>t.score!==e.score?e.score-t.score:ggt(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}const lgt=/^:[\w-]+$/,ugt=3,hgt=2,cgt=1,dgt=10,pgt=-2,wN=n=>n==="*";function fgt(n,t){let e=n.split("/"),i=e.length;return e.some(wN)&&(i+=pgt),t&&(i+=hgt),e.filter(r=>!wN(r)).reduce((r,s)=>r+(lgt.test(s)?ugt:s===""?cgt:dgt),i)}function ggt(n,t){return n.length===t.length&&n.slice(0,-1).every((i,r)=>i===t[r])?n[n.length-1]-t[t.length-1]:0}function mgt(n,t,e){let{routesMeta:i}=n,r={},s="/",a=[];for(let o=0;o<i.length;++o){let l=i[o],u=o===i.length-1,h=s==="/"?t:t.slice(s.length)||"/",c=CN({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),d=l.route;if(!c&&u&&e&&!i[i.length-1].route.index&&(c=CN({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!c)return null;Object.assign(r,c.params),a.push({params:r,pathname:kd([s,c.pathname]),pathnameBase:wgt(kd([s,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(s=kd([s,c.pathnameBase]))}return a}function CN(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[e,i]=vgt(n.path,n.caseSensitive,n.end),r=t.match(e);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((u,h,c)=>{let{paramName:d,isOptional:p}=h;if(d==="*"){let g=o[c]||"";a=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const f=o[c];return p&&!f?u[d]=void 0:u[d]=(f||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:n}}function vgt(n,t,e){t===void 0&&(t=!1),e===void 0&&(e=!0),EX(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(i.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function _gt(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return EX(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),n}}function LX(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=n.charAt(e);return i&&i!=="/"?null:n.slice(e)||"/"}function ygt(n,t){t===void 0&&(t="/");let{pathname:e,search:i="",hash:r=""}=typeof n=="string"?vm(n):n;return{pathname:e?e.startsWith("/")?e:bgt(e,t):t,search:Cgt(i),hash:kgt(r)}}function bgt(n,t){let e=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?e.length>1&&e.pop():r!=="."&&e.push(r)}),e.length>1?e.join("/"):"/"}function AP(n,t,e,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function xgt(n){return n.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function Sgt(n,t){let e=xgt(n);return t?e.map((i,r)=>r===e.length-1?i.pathname:i.pathnameBase):e.map(i=>i.pathnameBase)}function Agt(n,t,e,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=vm(n):(r=H_({},n),Yn(!r.pathname||!r.pathname.includes("?"),AP("?","pathname","search",r)),Yn(!r.pathname||!r.pathname.includes("#"),AP("#","pathname","hash",r)),Yn(!r.search||!r.search.includes("#"),AP("#","search","hash",r)));let s=n===""||r.pathname==="",a=s?"/":r.pathname,o;if(a==null)o=e;else{let c=t.length-1;if(!i&&a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),c-=1;r.pathname=d.join("/")}o=c>=0?t[c]:"/"}let l=ygt(r,o),u=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&e.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const kd=n=>n.join("/").replace(/\/\/+/g,"/"),wgt=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Cgt=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,kgt=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Tgt(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const DX=["post","put","patch","delete"];new Set(DX);const Mgt=["get",...DX];new Set(Mgt);/**
 * React Router v6.26.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function V_(){return V_=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},V_.apply(this,arguments)}const EB=V.createContext(null),Pgt=V.createContext(null),Tk=V.createContext(null),Mk=V.createContext(null),_m=V.createContext({outlet:null,matches:[],isDataRoute:!1}),BX=V.createContext(null);function Pk(){return V.useContext(Mk)!=null}function FX(){return Pk()||Yn(!1),V.useContext(Mk).location}function jX(n){V.useContext(Tk).static||V.useLayoutEffect(n)}function NX(){let{isDataRoute:n}=V.useContext(_m);return n?Vgt():Egt()}function Egt(){Pk()||Yn(!1);let n=V.useContext(EB),{basename:t,future:e,navigator:i}=V.useContext(Tk),{matches:r}=V.useContext(_m),{pathname:s}=FX(),a=JSON.stringify(Sgt(r,e.v7_relativeSplatPath)),o=V.useRef(!1);return jX(()=>{o.current=!0}),V.useCallback(function(u,h){if(h===void 0&&(h={}),!o.current)return;if(typeof u=="number"){i.go(u);return}let c=Agt(u,JSON.parse(a),s,h.relative==="path");n==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:kd([t,c.pathname])),(h.replace?i.replace:i.push)(c,h.state,h)},[t,i,a,s,n])}function Ogt(n,t){return Rgt(n,t)}function Rgt(n,t,e,i){Pk()||Yn(!1);let{navigator:r}=V.useContext(Tk),{matches:s}=V.useContext(_m),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=FX(),h;if(t){var c;let _=typeof t=="string"?vm(t):t;l==="/"||(c=_.pathname)!=null&&c.startsWith(l)||Yn(!1),h=_}else h=u;let d=h.pathname||"/",p=d;if(l!=="/"){let _=l.replace(/^\//,"").split("/");p="/"+d.replace(/^\//,"").split("/").slice(_.length).join("/")}let f=sgt(n,{pathname:p}),g=Fgt(f&&f.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:kd([l,r.encodeLocation?r.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:kd([l,r.encodeLocation?r.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,e,i);return t&&g?V.createElement(Mk.Provider,{value:{location:V_({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ah.Pop}},g):g}function Igt(){let n=Hgt(),t=Tgt(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),e=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},t),e?V.createElement("pre",{style:r},e):null,null)}const Lgt=V.createElement(Igt,null);class Dgt extends V.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?V.createElement(_m.Provider,{value:this.props.routeContext},V.createElement(BX.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Bgt(n){let{routeContext:t,match:e,children:i}=n,r=V.useContext(EB);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(_m.Provider,{value:t},i)}function Fgt(n,t,e,i){var r;if(t===void 0&&(t=[]),e===void 0&&(e=null),i===void 0&&(i=null),n==null){var s;if(!e)return null;if(e.errors)n=e.matches;else if((s=i)!=null&&s.v7_partialHydration&&t.length===0&&!e.initialized&&e.matches.length>0)n=e.matches;else return null}let a=n,o=(r=e)==null?void 0:r.errors;if(o!=null){let h=a.findIndex(c=>c.route.id&&(o==null?void 0:o[c.route.id])!==void 0);h>=0||Yn(!1),a=a.slice(0,Math.min(a.length,h+1))}let l=!1,u=-1;if(e&&i&&i.v7_partialHydration)for(let h=0;h<a.length;h++){let c=a[h];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(u=h),c.route.id){let{loaderData:d,errors:p}=e,f=c.route.loader&&d[c.route.id]===void 0&&(!p||p[c.route.id]===void 0);if(c.route.lazy||f){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((h,c,d)=>{let p,f=!1,g=null,_=null;e&&(p=o&&c.route.id?o[c.route.id]:void 0,g=c.route.errorElement||Lgt,l&&(u<0&&d===0?(f=!0,_=null):u===d&&(f=!0,_=c.route.hydrateFallbackElement||null)));let v=t.concat(a.slice(0,d+1)),y=()=>{let b;return p?b=g:f?b=_:c.route.Component?b=V.createElement(c.route.Component,null):c.route.element?b=c.route.element:b=h,V.createElement(Bgt,{match:c,routeContext:{outlet:h,matches:v,isDataRoute:e!=null},children:b})};return e&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?V.createElement(Dgt,{location:e.location,revalidation:e.revalidation,component:g,error:p,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):y()},null)}var zX=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(zX||{}),QS=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(QS||{});function jgt(n){let t=V.useContext(EB);return t||Yn(!1),t}function Ngt(n){let t=V.useContext(Pgt);return t||Yn(!1),t}function zgt(n){let t=V.useContext(_m);return t||Yn(!1),t}function HX(n){let t=zgt(),e=t.matches[t.matches.length-1];return e.route.id||Yn(!1),e.route.id}function Hgt(){var n;let t=V.useContext(BX),e=Ngt(QS.UseRouteError),i=HX(QS.UseRouteError);return t!==void 0?t:(n=e.errors)==null?void 0:n[i]}function Vgt(){let{router:n}=jgt(zX.UseNavigateStable),t=HX(QS.UseNavigateStable),e=V.useRef(!1);return jX(()=>{e.current=!0}),V.useCallback(function(r,s){s===void 0&&(s={}),e.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,V_({fromRouteId:t},s)))},[n,t])}function cS(n){Yn(!1)}function Wgt(n){let{basename:t="/",children:e=null,location:i,navigationType:r=Ah.Pop,navigator:s,static:a=!1,future:o}=n;Pk()&&Yn(!1);let l=t.replace(/^\/*/,"/"),u=V.useMemo(()=>({basename:l,navigator:s,static:a,future:V_({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof i=="string"&&(i=vm(i));let{pathname:h="/",search:c="",hash:d="",state:p=null,key:f="default"}=i,g=V.useMemo(()=>{let _=LX(h,l);return _==null?null:{location:{pathname:_,search:c,hash:d,state:p,key:f},navigationType:r}},[l,h,c,d,p,f,r]);return g==null?null:V.createElement(Tk.Provider,{value:u},V.createElement(Mk.Provider,{children:e,value:g}))}function $gt(n){let{children:t,location:e}=n;return Ogt(oR(t),e)}new Promise(()=>{});function oR(n,t){t===void 0&&(t=[]);let e=[];return V.Children.forEach(n,(i,r)=>{if(!V.isValidElement(i))return;let s=[...t,r];if(i.type===V.Fragment){e.push.apply(e,oR(i.props.children,s));return}i.type!==cS&&Yn(!1),!i.props.index||!i.props.children||Yn(!1);let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=oR(i.props.children,s)),e.push(a)}),e}/**
 * React Router DOM v6.26.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Ggt="6";try{window.__reactRouterVersion=Ggt}catch{}const Ugt="startTransition",kN=Gdt[Ugt];function Ygt(n){let{basename:t,children:e,future:i,window:r}=n,s=V.useRef();s.current==null&&(s.current=igt({window:r,v5Compat:!0}));let a=s.current,[o,l]=V.useState({action:a.action,location:a.location}),{v7_startTransition:u}=i||{},h=V.useCallback(c=>{u&&kN?kN(()=>l(c)):l(c)},[l,u]);return V.useLayoutEffect(()=>a.listen(h),[a,h]),V.createElement(Wgt,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:a,future:i})}var TN;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(TN||(TN={}));var MN;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(MN||(MN={}));function ii(){return ii=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)({}).hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ii.apply(null,arguments)}function W_(n){"@babel/helpers - typeof";return W_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W_(n)}function Xgt(n,t){if(W_(n)!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t||"default");if(W_(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function Kgt(n){var t=Xgt(n,"string");return W_(t)=="symbol"?t:t+""}function Ti(n,t,e){return(t=Kgt(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var vi=V.createContext({prefixCls:"arco"});function PN(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function EN(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?PN(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):PN(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function qgt(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=EN(EN({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-check-circle-fill")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{fill:"currentColor",fillRule:"evenodd",stroke:"none",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm10.207-24.379a1 1 0 0 0 0-1.414l-1.414-1.414a1 1 0 0 0-1.414 0L22 26.172l-4.878-4.88a1 1 0 0 0-1.415 0l-1.414 1.415a1 1 0 0 0 0 1.414l7 7a1 1 0 0 0 1.414 0l11.5-11.5Z",clipRule:"evenodd"}))}var o1=B.forwardRef(qgt);o1.defaultProps={isIcon:!0};o1.displayName="IconCheckCircleFill";function ON(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function RN(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?ON(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):ON(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Zgt(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=RN(RN({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-close-circle-fill")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{fill:"currentColor",fillRule:"evenodd",stroke:"none",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm4.955-27.771-4.95 4.95-4.95-4.95a1 1 0 0 0-1.414 0l-1.414 1.414a1 1 0 0 0 0 1.414l4.95 4.95-4.95 4.95a1 1 0 0 0 0 1.414l1.414 1.414a1 1 0 0 0 1.414 0l4.95-4.95 4.95 4.95a1 1 0 0 0 1.414 0l1.414-1.414a1 1 0 0 0 0-1.414l-4.95-4.95 4.95-4.95a1 1 0 0 0 0-1.414l-1.414-1.414a1 1 0 0 0-1.414 0Z",clipRule:"evenodd"}))}var Ek=B.forwardRef(Zgt);Ek.defaultProps={isIcon:!0};Ek.displayName="IconCloseCircleFill";function IN(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function LN(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?IN(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):IN(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Jgt(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=LN(LN({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-info-circle-fill")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{fill:"currentColor",fillRule:"evenodd",stroke:"none",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm2-30a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2Zm0 17h1a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-6a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h1v-8a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v11Z",clipRule:"evenodd"}))}var Ok=B.forwardRef(Jgt);Ok.defaultProps={isIcon:!0};Ok.displayName="IconInfoCircleFill";function DN(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function BN(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?DN(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):DN(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Qgt(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=BN(BN({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-exclamation-circle-fill")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{fill:"currentColor",fillRule:"evenodd",stroke:"none",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm-2-11a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v2Zm4-18a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V15Z",clipRule:"evenodd"}))}var $_=B.forwardRef(Qgt);$_.defaultProps={isIcon:!0};$_.displayName="IconExclamationCircleFill";function FN(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function jN(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?FN(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):FN(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function tmt(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=jN(jN({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-close")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{d:"M9.857 9.858 24 24m0 0 14.142 14.142M24 24 38.142 9.858M24 24 9.857 38.142"}))}var Kd=B.forwardRef(tmt);Kd.defaultProps={isIcon:!0};Kd.displayName="IconClose";var VX={exports:{}},wi={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OB=Symbol.for("react.element"),RB=Symbol.for("react.portal"),Rk=Symbol.for("react.fragment"),Ik=Symbol.for("react.strict_mode"),Lk=Symbol.for("react.profiler"),Dk=Symbol.for("react.provider"),Bk=Symbol.for("react.context"),emt=Symbol.for("react.server_context"),Fk=Symbol.for("react.forward_ref"),jk=Symbol.for("react.suspense"),Nk=Symbol.for("react.suspense_list"),zk=Symbol.for("react.memo"),Hk=Symbol.for("react.lazy"),imt=Symbol.for("react.offscreen"),WX;WX=Symbol.for("react.module.reference");function eo(n){if(typeof n=="object"&&n!==null){var t=n.$$typeof;switch(t){case OB:switch(n=n.type,n){case Rk:case Lk:case Ik:case jk:case Nk:return n;default:switch(n=n&&n.$$typeof,n){case emt:case Bk:case Fk:case Hk:case zk:case Dk:return n;default:return t}}case RB:return t}}}wi.ContextConsumer=Bk;wi.ContextProvider=Dk;wi.Element=OB;wi.ForwardRef=Fk;wi.Fragment=Rk;wi.Lazy=Hk;wi.Memo=zk;wi.Portal=RB;wi.Profiler=Lk;wi.StrictMode=Ik;wi.Suspense=jk;wi.SuspenseList=Nk;wi.isAsyncMode=function(){return!1};wi.isConcurrentMode=function(){return!1};wi.isContextConsumer=function(n){return eo(n)===Bk};wi.isContextProvider=function(n){return eo(n)===Dk};wi.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===OB};wi.isForwardRef=function(n){return eo(n)===Fk};wi.isFragment=function(n){return eo(n)===Rk};wi.isLazy=function(n){return eo(n)===Hk};wi.isMemo=function(n){return eo(n)===zk};wi.isPortal=function(n){return eo(n)===RB};wi.isProfiler=function(n){return eo(n)===Lk};wi.isStrictMode=function(n){return eo(n)===Ik};wi.isSuspense=function(n){return eo(n)===jk};wi.isSuspenseList=function(n){return eo(n)===Nk};wi.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===Rk||n===Lk||n===Ik||n===jk||n===Nk||n===imt||typeof n=="object"&&n!==null&&(n.$$typeof===Hk||n.$$typeof===zk||n.$$typeof===Dk||n.$$typeof===Bk||n.$$typeof===Fk||n.$$typeof===WX||n.getModuleId!==void 0)};wi.typeOf=eo;VX.exports=wi;var $X=VX.exports,Vk=Object.prototype.toString;function ym(n){return Vk.call(n)==="[object Array]"}function $e(n){return Vk.call(n)==="[object Object]"}function kc(n){return Vk.call(n)==="[object String]"}function Un(n){return Vk.call(n)==="[object Number]"&&n===n}function Gr(n){return n===void 0}function ir(n){return typeof n=="function"}function G_(n,t){return n==null||n===!1||typeof n=="string"&&(t?n.trim()==="":n==="")}var GX=function(n){return n&&V.isValidElement(n)&&typeof n.type=="function"},nmt=function(n){var t;return GX(n)&&!!(!((t=n.type.prototype)===null||t===void 0)&&t.isReactComponent)},rmt=function(n){return V.isValidElement(n)&&typeof n.type=="string"},IB=function(n){return rmt(n)||$X.isForwardRef(n)?!0:GX(n)?nmt(n):!1};var smt=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},amt=function(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))};function zt(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];for(var e=n.length,i=[],r=function(a){var o=n[a];if(!o)return"continue";kc(o)?i.push(o):ym(o)?i=i.concat(o):$e(o)&&Object.keys(o).forEach(function(l){o[l]&&i.push(l)})},s=0;s<e;s++)r(s);return amt([],smt(new Set(i)),!1).join(" ")}function omt(n){var t=[],e=n.substr(1);return n.length===3&&(e=n.replace(/(.)/g,"$1$1")),e.replace(/../g,function(i){t.push(parseInt(i,16))}),{r:t[0],g:t[1],b:t[2],rgb:"rgb("+t.join(",")+")"}}function lmt(n){var t=omt(n);return{r:t.r,g:t.g,b:t.b}}function umt(n){var t=lmt(n),e=hmt(t.r,t.g,t.b);return{h:e.h,s:e.s,l:e.l}}function hmt(n,t,e){var i=n/255,r=t/255,s=e/255,a=Math.max(i,r,s),o=Math.min(i,r,s),l=(a+o)/2,u,h;if(a===o)u=0,h=0;else{var c=a-o;switch(h=l>.5?c/(2-a-o):c/(a+o),a){case i:u=(r-s)/c+(r<s?6:0);break;case r:u=(s-i)/c+2;break;case s:u=(i-r)/c+4;break}u/=6}return{h:u,s:h,l,hsl:"hsl("+u*360+", "+h*100+"%, "+l*100+"%)"}}function wP(n,t){var e=umt(n),i=+e.h,r=+e.s,s=+e.l*100+ +t,a=cmt([i*360,r*100,s]);return a.join(",")}function cmt(n){var t=n[0]/360,e=n[1]/100,i=n[2]/100,r,s,a;if(e===0)return a=i*255,[a,a,a];i<.5?r=i*(1+e):r=i+e-i*e;for(var o=2*i-r,l=[0,0,0],u=0;u<3;u++)s=t+1/3*-(u-1),s<0&&s++,s>1&&s--,6*s<1?a=o+(r-o)*6*s:2*s<1?a=r:3*s<2?a=o+(r-o)*(2/3-s)*6:a=o,l[u]=a*255;return l}function Wk(n,t){if(n==null)return{};var e={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(t.includes(i))continue;e[i]=n[i]}return e}function lR(n,t){return lR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},lR(n,t)}function $k(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,lR(n,t)}function dmt(n,t){return n.classList?!!t&&n.classList.contains(t):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+t+" ")!==-1}function pmt(n,t){n.classList?n.classList.add(t):dmt(n,t)||(typeof n.className=="string"?n.className=n.className+" "+t:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+t))}function NN(n,t){return n.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function fmt(n,t){n.classList?n.classList.remove(t):typeof n.className=="string"?n.className=NN(n.className,t):n.setAttribute("class",NN(n.className&&n.className.baseVal||"",t))}const zN={disabled:!1},tA=B.createContext(null);var UX=function(t){return t.scrollTop},zv="unmounted",Qc="exited",td="entering",af="entered",uR="exiting",Fu=function(n){$k(t,n);function t(i,r){var s;s=n.call(this,i,r)||this;var a=r,o=a&&!a.isMounting?i.enter:i.appear,l;return s.appearStatus=null,i.in?o?(l=Qc,s.appearStatus=td):l=af:i.unmountOnExit||i.mountOnEnter?l=zv:l=Qc,s.state={status:l},s.nextCallback=null,s}t.getDerivedStateFromProps=function(r,s){var a=r.in;return a&&s.status===zv?{status:Qc}:null};var e=t.prototype;return e.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},e.componentDidUpdate=function(r){var s=null;if(r!==this.props){var a=this.state.status;this.props.in?a!==td&&a!==af&&(s=td):(a===td||a===af)&&(s=uR)}this.updateStatus(!1,s)},e.componentWillUnmount=function(){this.cancelNextCallback()},e.getTimeouts=function(){var r=this.props.timeout,s,a,o;return s=a=o=r,r!=null&&typeof r!="number"&&(s=r.exit,a=r.enter,o=r.appear!==void 0?r.appear:a),{exit:s,enter:a,appear:o}},e.updateStatus=function(r,s){if(r===void 0&&(r=!1),s!==null)if(this.cancelNextCallback(),s===td){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:hu.findDOMNode(this);a&&UX(a)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Qc&&this.setState({status:zv})},e.performEnter=function(r){var s=this,a=this.props.enter,o=this.context?this.context.isMounting:r,l=this.props.nodeRef?[o]:[hu.findDOMNode(this),o],u=l[0],h=l[1],c=this.getTimeouts(),d=o?c.appear:c.enter;if(!r&&!a||zN.disabled){this.safeSetState({status:af},function(){s.props.onEntered(u)});return}this.props.onEnter(u,h),this.safeSetState({status:td},function(){s.props.onEntering(u,h),s.onTransitionEnd(d,function(){s.safeSetState({status:af},function(){s.props.onEntered(u,h)})})})},e.performExit=function(){var r=this,s=this.props.exit,a=this.getTimeouts(),o=this.props.nodeRef?void 0:hu.findDOMNode(this);if(!s||zN.disabled){this.safeSetState({status:Qc},function(){r.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:uR},function(){r.props.onExiting(o),r.onTransitionEnd(a.exit,function(){r.safeSetState({status:Qc},function(){r.props.onExited(o)})})})},e.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},e.safeSetState=function(r,s){s=this.setNextCallback(s),this.setState(r,s)},e.setNextCallback=function(r){var s=this,a=!0;return this.nextCallback=function(o){a&&(a=!1,s.nextCallback=null,r(o))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},e.onTransitionEnd=function(r,s){this.setNextCallback(s);var a=this.props.nodeRef?this.props.nodeRef.current:hu.findDOMNode(this),o=r==null&&!this.props.addEndListener;if(!a||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],u=l[0],h=l[1];this.props.addEndListener(u,h)}r!=null&&setTimeout(this.nextCallback,r)},e.render=function(){var r=this.state.status;if(r===zv)return null;var s=this.props,a=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var o=Wk(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return B.createElement(tA.Provider,{value:null},typeof a=="function"?a(r,o):B.cloneElement(B.Children.only(a),o))},t}(B.Component);Fu.contextType=tA;Fu.propTypes={};function Up(){}Fu.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Up,onEntering:Up,onEntered:Up,onExit:Up,onExiting:Up,onExited:Up};Fu.UNMOUNTED=zv;Fu.EXITED=Qc;Fu.ENTERING=td;Fu.ENTERED=af;Fu.EXITING=uR;var gmt=function(t,e){return t&&e&&e.split(" ").forEach(function(i){return pmt(t,i)})},CP=function(t,e){return t&&e&&e.split(" ").forEach(function(i){return fmt(t,i)})},Gk=function(n){$k(t,n);function t(){for(var i,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return i=n.call.apply(n,[this].concat(s))||this,i.appliedClasses={appear:{},enter:{},exit:{}},i.onEnter=function(o,l){var u=i.resolveArguments(o,l),h=u[0],c=u[1];i.removeClasses(h,"exit"),i.addClass(h,c?"appear":"enter","base"),i.props.onEnter&&i.props.onEnter(o,l)},i.onEntering=function(o,l){var u=i.resolveArguments(o,l),h=u[0],c=u[1],d=c?"appear":"enter";i.addClass(h,d,"active"),i.props.onEntering&&i.props.onEntering(o,l)},i.onEntered=function(o,l){var u=i.resolveArguments(o,l),h=u[0],c=u[1],d=c?"appear":"enter";i.removeClasses(h,d),i.addClass(h,d,"done"),i.props.onEntered&&i.props.onEntered(o,l)},i.onExit=function(o){var l=i.resolveArguments(o),u=l[0];i.removeClasses(u,"appear"),i.removeClasses(u,"enter"),i.addClass(u,"exit","base"),i.props.onExit&&i.props.onExit(o)},i.onExiting=function(o){var l=i.resolveArguments(o),u=l[0];i.addClass(u,"exit","active"),i.props.onExiting&&i.props.onExiting(o)},i.onExited=function(o){var l=i.resolveArguments(o),u=l[0];i.removeClasses(u,"exit"),i.addClass(u,"exit","done"),i.props.onExited&&i.props.onExited(o)},i.resolveArguments=function(o,l){return i.props.nodeRef?[i.props.nodeRef.current,o]:[o,l]},i.getClassNames=function(o){var l=i.props.classNames,u=typeof l=="string",h=u&&l?l+"-":"",c=u?""+h+o:l[o],d=u?c+"-active":l[o+"Active"],p=u?c+"-done":l[o+"Done"];return{baseClassName:c,activeClassName:d,doneClassName:p}},i}var e=t.prototype;return e.addClass=function(r,s,a){var o=this.getClassNames(s)[a+"ClassName"],l=this.getClassNames("enter"),u=l.doneClassName;s==="appear"&&a==="done"&&u&&(o+=" "+u),a==="active"&&r&&UX(r),o&&(this.appliedClasses[s][a]=o,gmt(r,o))},e.removeClasses=function(r,s){var a=this.appliedClasses[s],o=a.base,l=a.active,u=a.done;this.appliedClasses[s]={},o&&CP(r,o),l&&CP(r,l),u&&CP(r,u)},e.render=function(){var r=this.props;r.classNames;var s=Wk(r,["classNames"]);return B.createElement(Fu,ii({},s,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(B.Component);Gk.defaultProps={classNames:""};Gk.propTypes={};function mmt(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function LB(n,t){var e=function(s){return t&&V.isValidElement(s)?t(s):s},i=Object.create(null);return n&&V.Children.map(n,function(r){return r}).forEach(function(r){i[r.key]=e(r)}),i}function vmt(n,t){n=n||{},t=t||{};function e(h){return h in t?t[h]:n[h]}var i=Object.create(null),r=[];for(var s in n)s in t?r.length&&(i[s]=r,r=[]):r.push(s);var a,o={};for(var l in t){if(i[l])for(a=0;a<i[l].length;a++){var u=i[l][a];o[i[l][a]]=e(u)}o[l]=e(l)}for(a=0;a<r.length;a++)o[r[a]]=e(r[a]);return o}function gd(n,t,e){return e[t]!=null?e[t]:n.props[t]}function _mt(n,t){return LB(n.children,function(e){return V.cloneElement(e,{onExited:t.bind(null,e),in:!0,appear:gd(e,"appear",n),enter:gd(e,"enter",n),exit:gd(e,"exit",n)})})}function ymt(n,t,e){var i=LB(n.children),r=vmt(t,i);return Object.keys(r).forEach(function(s){var a=r[s];if(V.isValidElement(a)){var o=s in t,l=s in i,u=t[s],h=V.isValidElement(u)&&!u.props.in;l&&(!o||h)?r[s]=V.cloneElement(a,{onExited:e.bind(null,a),in:!0,exit:gd(a,"exit",n),enter:gd(a,"enter",n)}):!l&&o&&!h?r[s]=V.cloneElement(a,{in:!1}):l&&o&&V.isValidElement(u)&&(r[s]=V.cloneElement(a,{onExited:e.bind(null,a),in:u.props.in,exit:gd(a,"exit",n),enter:gd(a,"enter",n)}))}}),r}var bmt=Object.values||function(n){return Object.keys(n).map(function(t){return n[t]})},xmt={component:"div",childFactory:function(t){return t}},Uk=function(n){$k(t,n);function t(i,r){var s;s=n.call(this,i,r)||this;var a=s.handleExited.bind(mmt(s));return s.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},s}var e=t.prototype;return e.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},e.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(r,s){var a=s.children,o=s.handleExited,l=s.firstRender;return{children:l?_mt(r,o):ymt(r,a,o),firstRender:!1}},e.handleExited=function(r,s){var a=LB(this.props.children);r.key in a||(r.props.onExited&&r.props.onExited(s),this.mounted&&this.setState(function(o){var l=ii({},o.children);return delete l[r.key],{children:l}}))},e.render=function(){var r=this.props,s=r.component,a=r.childFactory,o=Wk(r,["component","childFactory"]),l=this.state.contextValue,u=bmt(this.state.children).map(a);return delete o.appear,delete o.enter,delete o.exit,s===null?B.createElement(tA.Provider,{value:l},u):B.createElement(tA.Provider,{value:l},B.createElement(s,o,u))},t}(B.Component);Uk.propTypes={};Uk.defaultProps=xmt;var kP,HN="__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",Td=hu,hR,Smt=Number((kP=Td.version)===null||kP===void 0?void 0:kP.split(".")[0])>17,VN=function(n){$e(Td[HN])&&(Td[HN].usingClientEntryPoint=n)},cR;try{cR=Td.createRoot}catch{}Smt&&cR?hR=function(n,t){VN(!0);var e=cR(t);return VN(!1),e.render(n),e._unmount=function(){setTimeout(function(){var i;(i=e==null?void 0:e.unmount)===null||i===void 0||i.call(e)})},e}:hR=function(n,t){return Td.render(n,t),{render:function(e){Td.render(e,t)},_unmount:function(){Td.unmountComponentAtNode(t)}}};var sh;function Amt(n){var t=n.constructor;if(typeof t!="function")return!1;!sh&&typeof WeakSet=="function"&&(sh=new WeakSet);var e=!!(sh!=null&&sh.has(t));return sh==null||sh.add(t),e}var Yk=function(n,t){return n&&n instanceof Element?n:n&&n.current&&n.current instanceof Element?n.current:n instanceof V.Component?hu.findDOMNode(n):n&&ir(n.getRootDOMNode)?n.getRootDOMNode():t?(Amt(t),hu.findDOMNode(t)):null},DB=function(n,t){n&&n.ref&&(ir(n.ref)&&(n==null||n.ref(t)),"current"in n.ref&&(n.ref.current=t))},BB=hR,dR=function(){return dR=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},dR.apply(this,arguments)},wmt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},Cmt=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},kmt=function(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))};function U_(n){var t=n.children,e=wmt(n,["children"]),i=V.useRef(),r=V.useRef(),s=V.useMemo(function(){return n.nodeRef===void 0&&IB(t)&&V.isValidElement(t)?(r.current=!0,V.cloneElement(t,{ref:function(a){i.current=Yk(a),DB(t,a)}})):(r.current=!1,t)},[t,n.nodeRef]);return r.current&&["onEnter","onEntering","onEntered","onExit","onExiting","onExited"].forEach(function(a){n[a]&&(e[a]=function(o){for(var l=[],u=1;u<arguments.length;u++)l[u-1]=arguments[u];n[a].apply(n,kmt([i.current],Cmt(l),!1))})}),B.createElement(Gk,dR({},e,{nodeRef:r.current?i:void 0}),s)}var Tmt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),eA=function(){return eA=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},eA.apply(this,arguments)};function Mmt(n){return n!=null&&n.id?n==null?void 0:n.id:"arco_notice_id_"+Math.random().toFixed(10).slice(2)}var YX=function(n){Tmt(t,n);function t(e){var i=n.call(this,e)||this;return i.add=function(r){var s=Mmt(r),a=i.state.notices;return r.id&&~a.findIndex(function(o){return o.id===r.id})?i.update(r):i.setState(function(o){return{notices:o.notices.concat(eA(eA({},r),{id:s})),position:r.position}}),s},i.update=function(r){var s=i.state.notices.map(function(a){return r.id===a.id?r:a});i.setState({notices:s},function(){var a=s.map(function(o){return r.id===o.id&&delete o.update,o});i.setState({notices:a})})},i.clear=function(){i.setState({notices:[]})},i.state={notices:[],position:"topRight"},i.remove=i.remove.bind(i),i}return t.prototype.remove=function(e){this.setState(function(i){var r=i.notices.filter(function(s){return s.id!==e});return{notices:r}})},t}(V.Component);function WN(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function $N(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?WN(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):WN(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Pmt(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=$N($N({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-loading")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{d:"M42 24c0 9.941-8.059 18-18 18S6 33.941 6 24 14.059 6 24 6"}))}var bm=B.forwardRef(Pmt);bm.defaultProps={isIcon:!0};bm.displayName="IconLoading";var pR=function(){return pR=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},pR.apply(this,arguments)},Emt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};function Rg(n){var t,e=n.children,i=n.className,r=n.disabled,s=n.prefix,a=n.size,o=a===void 0?"default":a,l=Emt(n,["children","className","disabled","prefix","size"]),u=V.useContext(pe).getPrefixCls,h=u("icon-hover");return B.createElement("span",pR({className:zt(h,(t={},t[s+"-icon-hover"]=s,t[h+"-size-"+o]=o&&o!=="default",t[h+"-disabled"]=r,t),i),onClick:n.onClick},l),e)}var Omt={exports:{}},XX={exports:{}};(function(n,t){(function(e,i){n.exports=i()})(So,function(){var e=1e3,i=6e4,r=36e5,s="millisecond",a="second",o="minute",l="hour",u="day",h="week",c="month",d="quarter",p="year",f="date",g="Invalid Date",_=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(N){var O=["th","st","nd","rd"],L=N%100;return"["+N+(O[(L-20)%10]||O[L]||O[0])+"]"}},b=function(N,O,L){var H=String(N);return!H||H.length>=O?N:""+Array(O+1-H.length).join(L)+N},S={s:b,z:function(N){var O=-N.utcOffset(),L=Math.abs(O),H=Math.floor(L/60),j=L%60;return(O<=0?"+":"-")+b(H,2,"0")+":"+b(j,2,"0")},m:function N(O,L){if(O.date()<L.date())return-N(L,O);var H=12*(L.year()-O.year())+(L.month()-O.month()),j=O.clone().add(H,c),G=L-j<0,U=O.clone().add(H+(G?-1:1),c);return+(-(H+(L-j)/(G?j-U:U-j))||0)},a:function(N){return N<0?Math.ceil(N)||0:Math.floor(N)},p:function(N){return{M:c,y:p,w:h,d:u,D:f,h:l,m:o,s:a,ms:s,Q:d}[N]||String(N||"").toLowerCase().replace(/s$/,"")},u:function(N){return N===void 0}},A="en",w={};w[A]=y;var C="$isDayjsObject",k=function(N){return N instanceof I||!(!N||!N[C])},M=function N(O,L,H){var j;if(!O)return A;if(typeof O=="string"){var G=O.toLowerCase();w[G]&&(j=G),L&&(w[G]=L,j=G);var U=O.split("-");if(!j&&U.length>1)return N(U[0])}else{var $=O.name;w[$]=O,j=$}return!H&&j&&(A=j),j||!H&&A},P=function(N,O){if(k(N))return N.clone();var L=typeof O=="object"?O:{};return L.date=N,L.args=arguments,new I(L)},E=S;E.l=M,E.i=k,E.w=function(N,O){return P(N,{locale:O.$L,utc:O.$u,x:O.$x,$offset:O.$offset})};var I=function(){function N(L){this.$L=M(L.locale,null,!0),this.parse(L),this.$x=this.$x||L.x||{},this[C]=!0}var O=N.prototype;return O.parse=function(L){this.$d=function(H){var j=H.date,G=H.utc;if(j===null)return new Date(NaN);if(E.u(j))return new Date;if(j instanceof Date)return new Date(j);if(typeof j=="string"&&!/Z$/i.test(j)){var U=j.match(_);if(U){var $=U[2]-1||0,q=(U[7]||"0").substring(0,3);return G?new Date(Date.UTC(U[1],$,U[3]||1,U[4]||0,U[5]||0,U[6]||0,q)):new Date(U[1],$,U[3]||1,U[4]||0,U[5]||0,U[6]||0,q)}}return new Date(j)}(L),this.init()},O.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},O.$utils=function(){return E},O.isValid=function(){return this.$d.toString()!==g},O.isSame=function(L,H){var j=P(L);return this.startOf(H)<=j&&j<=this.endOf(H)},O.isAfter=function(L,H){return P(L)<this.startOf(H)},O.isBefore=function(L,H){return this.endOf(H)<P(L)},O.$g=function(L,H,j){return E.u(L)?this[H]:this.set(j,L)},O.unix=function(){return Math.floor(this.valueOf()/1e3)},O.valueOf=function(){return this.$d.getTime()},O.startOf=function(L,H){var j=this,G=!!E.u(H)||H,U=E.p(L),$=function(dt,bt){var xt=E.w(j.$u?Date.UTC(j.$y,bt,dt):new Date(j.$y,bt,dt),j);return G?xt:xt.endOf(u)},q=function(dt,bt){return E.w(j.toDate()[dt].apply(j.toDate("s"),(G?[0,0,0,0]:[23,59,59,999]).slice(bt)),j)},tt=this.$W,it=this.$M,nt=this.$D,K="set"+(this.$u?"UTC":"");switch(U){case p:return G?$(1,0):$(31,11);case c:return G?$(1,it):$(0,it+1);case h:var J=this.$locale().weekStart||0,Q=(tt<J?tt+7:tt)-J;return $(G?nt-Q:nt+(6-Q),it);case u:case f:return q(K+"Hours",0);case l:return q(K+"Minutes",1);case o:return q(K+"Seconds",2);case a:return q(K+"Milliseconds",3);default:return this.clone()}},O.endOf=function(L){return this.startOf(L,!1)},O.$set=function(L,H){var j,G=E.p(L),U="set"+(this.$u?"UTC":""),$=(j={},j[u]=U+"Date",j[f]=U+"Date",j[c]=U+"Month",j[p]=U+"FullYear",j[l]=U+"Hours",j[o]=U+"Minutes",j[a]=U+"Seconds",j[s]=U+"Milliseconds",j)[G],q=G===u?this.$D+(H-this.$W):H;if(G===c||G===p){var tt=this.clone().set(f,1);tt.$d[$](q),tt.init(),this.$d=tt.set(f,Math.min(this.$D,tt.daysInMonth())).$d}else $&&this.$d[$](q);return this.init(),this},O.set=function(L,H){return this.clone().$set(L,H)},O.get=function(L){return this[E.p(L)]()},O.add=function(L,H){var j,G=this;L=Number(L);var U=E.p(H),$=function(it){var nt=P(G);return E.w(nt.date(nt.date()+Math.round(it*L)),G)};if(U===c)return this.set(c,this.$M+L);if(U===p)return this.set(p,this.$y+L);if(U===u)return $(1);if(U===h)return $(7);var q=(j={},j[o]=i,j[l]=r,j[a]=e,j)[U]||1,tt=this.$d.getTime()+L*q;return E.w(tt,this)},O.subtract=function(L,H){return this.add(-1*L,H)},O.format=function(L){var H=this,j=this.$locale();if(!this.isValid())return j.invalidDate||g;var G=L||"YYYY-MM-DDTHH:mm:ssZ",U=E.z(this),$=this.$H,q=this.$m,tt=this.$M,it=j.weekdays,nt=j.months,K=j.meridiem,J=function(bt,xt,ht,St){return bt&&(bt[xt]||bt(H,G))||ht[xt].slice(0,St)},Q=function(bt){return E.s($%12||12,bt,"0")},dt=K||function(bt,xt,ht){var St=bt<12?"AM":"PM";return ht?St.toLowerCase():St};return G.replace(v,function(bt,xt){return xt||function(ht){switch(ht){case"YY":return String(H.$y).slice(-2);case"YYYY":return E.s(H.$y,4,"0");case"M":return tt+1;case"MM":return E.s(tt+1,2,"0");case"MMM":return J(j.monthsShort,tt,nt,3);case"MMMM":return J(nt,tt);case"D":return H.$D;case"DD":return E.s(H.$D,2,"0");case"d":return String(H.$W);case"dd":return J(j.weekdaysMin,H.$W,it,2);case"ddd":return J(j.weekdaysShort,H.$W,it,3);case"dddd":return it[H.$W];case"H":return String($);case"HH":return E.s($,2,"0");case"h":return Q(1);case"hh":return Q(2);case"a":return dt($,q,!0);case"A":return dt($,q,!1);case"m":return String(q);case"mm":return E.s(q,2,"0");case"s":return String(H.$s);case"ss":return E.s(H.$s,2,"0");case"SSS":return E.s(H.$ms,3,"0");case"Z":return U}return null}(bt)||U.replace(":","")})},O.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},O.diff=function(L,H,j){var G,U=this,$=E.p(H),q=P(L),tt=(q.utcOffset()-this.utcOffset())*i,it=this-q,nt=function(){return E.m(U,q)};switch($){case p:G=nt()/12;break;case c:G=nt();break;case d:G=nt()/3;break;case h:G=(it-tt)/6048e5;break;case u:G=(it-tt)/864e5;break;case l:G=it/r;break;case o:G=it/i;break;case a:G=it/e;break;default:G=it}return j?G:E.a(G)},O.daysInMonth=function(){return this.endOf(c).$D},O.$locale=function(){return w[this.$L]},O.locale=function(L,H){if(!L)return this.$L;var j=this.clone(),G=M(L,H,!0);return G&&(j.$L=G),j},O.clone=function(){return E.w(this.$d,this)},O.toDate=function(){return new Date(this.valueOf())},O.toJSON=function(){return this.isValid()?this.toISOString():null},O.toISOString=function(){return this.$d.toISOString()},O.toString=function(){return this.$d.toUTCString()},N}(),D=I.prototype;return P.prototype=D,[["$ms",s],["$s",a],["$m",o],["$H",l],["$W",u],["$M",c],["$y",p],["$D",f]].forEach(function(N){D[N[1]]=function(O){return this.$g(O,N[0],N[1])}}),P.extend=function(N,O){return N.$i||(N(O,I,P),N.$i=!0),P},P.locale=M,P.isDayjs=k,P.unix=function(N){return P(1e3*N)},P.en=w[A],P.Ls=w,P.p={},P})})(XX);var Rmt=XX.exports;(function(n,t){(function(e,i){n.exports=i(Rmt)})(So,function(e){function i(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var r=i(e),s={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(a,o){return o==="W"?a+"周":a+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(a,o){var l=100*a+o;return l<600?"凌晨":l<900?"早上":l<1100?"上午":l<1300?"中午":l<1800?"下午":"晚上"}};return r.default.locale(s,null,!0),s})})(Omt);var GN={formatYear:"YYYY 年",formatMonth:"YYYY 年 MM 月",monthBeforeYear:!1,today:"今天",view:{month:"月",year:"年",week:"周",day:"日"},month:{long:{January:"一月",February:"二月",March:"三月",April:"四月",May:"五月",June:"六月",July:"七月",August:"八月",September:"九月",October:"十月",November:"十一月",December:"十二月"},short:{January:"一月",February:"二月",March:"三月",April:"四月",May:"五月",June:"六月",July:"七月",August:"八月",September:"九月",October:"十月",November:"十一月",December:"十二月"}},week:{long:{self:"周",monday:"周一",tuesday:"周二",wednesday:"周三",thursday:"周四",friday:"周五",saturday:"周六",sunday:"周日"},short:{self:"周",monday:"一",tuesday:"二",wednesday:"三",thursday:"四",friday:"五",saturday:"六",sunday:"日"}}};const Imt={locale:"zh-CN",dayjsLocale:"zh-cn",Calendar:GN,DatePicker:{Calendar:GN,placeholder:{date:"请选择日期",week:"请选择周",month:"请选择月份",year:"请选择年份",quarter:"请选择季度"},placeholders:{date:["开始日期","结束日期"],week:["开始周","结束周"],month:["开始月份","结束月份"],year:["开始年份","结束年份"],quarter:["开始季度","结束季度"]},selectTime:"选择时间",selectDate:"选择日期",today:"今天",now:"此刻",ok:"确定"},Drawer:{okText:"确定",cancelText:"取消"},Empty:{noData:"暂无数据"},Modal:{okText:"确定",cancelText:"取消"},Pagination:{goto:"前往",page:"页",countPerPage:"条/页",total:"共 {0} 条",prev:"上一页",next:"下一页",currentPage:"第 {0} 页",prevSomePages:"向前 {0} 页",nextSomePages:"向后 {0} 页",pageSize:"页码"},Popconfirm:{okText:"确定",cancelText:"取消"},Table:{okText:"确定",resetText:"重置",sortAscend:"点击升序",sortDescend:"点击降序",cancelSort:"取消排序"},TimePicker:{ok:"确定",placeholder:"请选择时间",placeholders:["开始时间","结束时间"],now:"此刻"},Progress:{success:"完成",error:"失败"},Upload:{start:"开始",cancel:"取消",delete:"删除",reupload:"点击重试",upload:"点击上传",preview:"预览",drag:"点击或拖拽文件到此处上传",dragHover:"释放文件并开始上传",error:"上传失败"},Typography:{copy:"复制",copied:"已复制",edit:"编辑",fold:"折叠",unfold:"展开"},Transfer:{resetText:"重置"},ImagePreview:{fullScreen:"全屏",rotateRight:"向右旋转",rotateLeft:"向左旋转",zoomIn:"放大",zoomOut:"缩小",originalSize:"原始尺寸"},Form:{validateMessages:{required:"#{field} 是必填项",type:{string:"#{field} 不是合法的文本类型",number:"#{field} 不是合法的数字类型",boolean:"#{field} 不是合法的布尔类型",array:"#{field} 不是合法的数组类型",object:"#{field} 不是合法的对象类型",url:"#{field} 不是合法的 url 地址",email:"#{field} 不是合法的邮箱地址",ip:"#{field} 不是合法的 IP 地址"},number:{min:"`#{value}` 小于最小值 `#{min}`",max:"`#{value}` 大于最大值 `#{max}`",equal:"`#{value}` 不等于 `#{equal}`",range:"`#{value}` 不在 `#{min} ~ #{max}` 范围内",positive:"`#{value}` 不是正数",negative:"`#{value}` 不是负数"},array:{length:"`#{field}` 个数不等于 #{length}",minLength:"`#{field}` 个数最少为 #{minLength}",maxLength:"`#{field}` 个数最多为 #{maxLength}",includes:"#{field} 不包含 #{includes}",deepEqual:"#{field} 不等于 #{deepEqual}",empty:"`#{field}` 不是空数组"},string:{minLength:"字符数最少为 #{minLength}",maxLength:"字符数最多为 #{maxLength}",length:"字符数必须是 #{length}",match:"`#{value}` 不符合模式 #{pattern}",uppercase:"`#{value}` 必须全大写",lowercase:"`#{value}` 必须全小写"},object:{deepEqual:"`#{field}` 不等于期望值",hasKeys:"`#{field}` 不包含必须字段",empty:"`#{field}` 不是对象"},boolean:{true:"期望是 `true`",false:"期望是 `false`"}}},ColorPicker:{history:"最近使用颜色",preset:"系统预设颜色",empty:"暂无"}};function UN(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function YN(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?UN(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):UN(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Lmt(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=YN(YN({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-empty")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{d:"M24 5v6m7 1 4-4m-18 4-4-4m28.5 22H28s-1 3-4 3-4-3-4-3H6.5M40 41H8a2 2 0 0 1-2-2v-8.46a2 2 0 0 1 .272-1.007l6.15-10.54A2 2 0 0 1 14.148 18H33.85a2 2 0 0 1 1.728.992l6.149 10.541A2 2 0 0 1 42 30.541V39a2 2 0 0 1-2 2Z"}))}var FB=B.forwardRef(Lmt);FB.defaultProps={isIcon:!0};FB.displayName="IconEmpty";var fR=function(){return fR=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},fR.apply(this,arguments)};function An(n,t){var e=fR({},n);return t.forEach(function(i){i in e&&delete e[i]}),e}var iA=function(){return iA=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},iA.apply(this,arguments)};function nn(n,t,e){var i=n._ignorePropsFromGlobal,r=V.useMemo(function(){return iA(iA({},t),i?{}:e)},[t,e,i]),s=V.useMemo(function(){var a=An(n,["_ignorePropsFromGlobal"]);for(var o in r)a[o]===void 0&&(a[o]=r[o]);return a},[n,r]);return s}var gR=function(){return gR=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},gR.apply(this,arguments)},Dmt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};function Bmt(n,t){var e=V.useContext(pe),i=e.getPrefixCls,r=e.locale,s=e.componentConfig,a=nn(n,{},s==null?void 0:s.Empty),o=a.style,l=a.className,u=a.description,h=a.icon,c=a.imgSrc,d=Dmt(a,["style","className","description","icon","imgSrc"]),p=i("empty"),f=zt(p,l),g=r.Empty.noData,_=typeof u=="string"?u:"empty";return B.createElement("div",gR({ref:t,className:f,style:o},d),B.createElement("div",{className:p+"-wrapper"},B.createElement("div",{className:p+"-image"},c?B.createElement("img",{alt:_,src:c}):h||B.createElement(FB,null)),B.createElement("div",{className:p+"-description"},u||g)))}var KX=V.forwardRef(Bmt);KX.displayName="Empty";const Fmt=V.memo(KX);var mR=function(){return mR=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},mR.apply(this,arguments)};function jmt(n){switch(n){default:return B.createElement(Fmt,null)}}var qX={locale:Imt,prefixCls:"arco",getPopupContainer:function(){return document.body},size:"default",renderEmpty:jmt,focusLock:{modal:{autoFocus:!0},drawer:{autoFocus:!0}}},pe=V.createContext(mR({getPrefixCls:function(n,t){return(t||"arco")+"-"+n}},qX)),Nmt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),c0=function(){return c0=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},c0.apply(this,arguments)},ZX=function(n){Nmt(t,n);function t(e){var i=n.call(this,e)||this;return i.getRootDOMNode=function(){return i.rootDOMRef.current},i.startTimer=function(){var r=i.props,s=r.duration,a=r.onClose,o=r.id;s!==0&&(i.timer=window.setTimeout(function(){a&&a(o),i.removeTimer()},s))},i.removeTimer=function(){i.timer&&(window.clearTimeout(i.timer),i.timer=null)},i.onClose=function(){i.props.onClose&&i.props.onClose(i.props.id)},i.renderIcon=function(){var r=i.props,s=r.showIcon,a=r.icon,o=r.type,l=r.prefixCls,u=r.iconPrefix,h;if(a)h=a;else if(s){switch(o){case"info":h=B.createElement(Ok,null);break;case"success":h=B.createElement(o1,null);break;case"error":h=B.createElement(Ek,null);break;case"warning":h=B.createElement($_,null);break;case"loading":h=B.createElement(bm,null);break}h=B.createElement(vi.Provider,{value:u?{prefixCls:u}:{}},h)}return B.createElement("span",{className:l+"-icon"},h)},i.onMouseEnter=function(){i.removeTimer()},i.onMouseLeave=function(){i.removeTimer(),i.startTimer()},i.rootDOMRef=V.createRef(),i}return t.prototype.componentDidMount=function(){this.startTimer()},t.prototype.componentDidUpdate=function(e){(e.duration!==this.props.duration||this.props.update)&&(this.removeTimer(),this.startTimer())},t.prototype.componentWillUnmount=function(){this.removeTimer()},t.prototype.render=function(){var e,i=this.props,r=i.title,s=i.content,a=i.showIcon,o=i.className,l=i.style,u=i.type,h=i.btn,c=i.icon,d=i.prefixCls,p=i.closable,f=i.noticeType,g=i.iconPrefix,_=i.rtl,v=i.closeIcon,y=i.classPrefixCls,b=zt(d,d+"-"+u,(e={},e[d+"-closable"]=p,e[d+"-rtl"]=_,e),o),S="closable"in this.props?p:!0,A=a;u==="normal"&&!c&&(A=!1);var w=c0({},this.context);if(y&&(w.prefixCls=y),f==="message")return S=p,B.createElement(Ig,c0({},w),B.createElement("div",{style:{textAlign:"center"},onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,ref:this.rootDOMRef},B.createElement("div",{className:b,style:l,role:"alert"},A&&this.renderIcon(),B.createElement("span",{className:d+"-content"},s),S&&(v!==void 0?B.createElement("span",{onClick:this.onClose,className:d+"-close-btn"},v):B.createElement(Rg,{prefix:d,className:d+"-close-btn",onClick:this.onClose},B.createElement(Kd,null))))));if(f==="notification")return B.createElement(Ig,c0({},w),B.createElement("div",{ref:this.rootDOMRef,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},B.createElement("div",{className:b,style:l,role:"alert"},A&&B.createElement("div",{className:d+"-left"},this.renderIcon()),B.createElement("div",{className:d+"-right"},r&&B.createElement("div",{className:d+"-title"},r),B.createElement("div",{className:d+"-content"},s),h&&B.createElement("div",{className:d+"-btn-wrapper"},h)),S&&(v!==void 0?B.createElement("span",{onClick:this.onClose,className:d+"-close-btn"},v):B.createElement(Rg,{prefix:d,className:d+"-close-btn",onClick:this.onClose},B.createElement(vi.Provider,{value:g?{prefixCls:g}:{}},B.createElement(Kd,null)))))))},t.defaultProps={type:"info",showIcon:!0,noticeType:"message",duration:3e3},t.contextType=pe,t}(V.Component),XN=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},KN=function(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))},jB=V.forwardRef(function(n,t){var e=V.useContext(pe),i=XN(V.useState([]),2),r=i[0],s=i[1];function a(u){s(function(h){return KN(KN([],XN(h),!1),[u],!1)})}function o(u){s(function(h){return h.filter(function(c){return u!==c})})}function l(){return e}return V.useImperativeHandle(t,function(){return{addInstance:a,removeInstance:o,getContextConfig:l}}),B.createElement(B.Fragment,null,B.Children.map(r,function(u,h){return B.cloneElement(u,{key:h})}))}),nd=function(){return nd=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},nd.apply(this,arguments)};function zmt(n){n===void 0&&(n={});var t=n.maxCount,e=n.duration,i=e===void 0?3e3:e,r=n.prefixCls,s=V.createRef(),a=B.createElement(jB,{ref:s}),o={},l;function u(c){var d,p;if(s.current){var f=s.current.getContextConfig();p=f.rtl,d=f.prefixCls}var g=r||d,_=nd({position:"top",duration:i},c),v=_.position,y=_.transitionClassNames,b;if(o[v]){var S=o[v].state.notices;if(S.length>=t){var A=S[0];b=A.id,S.shift(),o[v].add(nd(nd({},_),{id:b}))}else b=o[v].add(_)}else l=B.createElement(l1,{transitionClassNames:y,ref:function(C){o[v]=C,o[v]&&(b=o[v].add(_))},prefixCls:g,rtl:p}),s.current.addInstance(l);var w=function(){o[v]&&o[v].remove(b)};return w}var h={};return["info","success","warning","error","normal"].forEach(function(c){h[c]=function(d){var p=kc(d)?{content:d}:d;return u(nd(nd({},p),{type:c}))}}),[h,a]}var Hmt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Os=function(){return Os=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Os.apply(this,arguments)},Vmt=["info","success","error","warning","loading","normal"],Da={},JX,qN,QX,vR,ZN,JN;function tK(n){var t=Os({position:"top",duration:QX},n),e=t.position,i=t.transitionClassNames,r=t.transitionTimeout,s,a=Da[e]||{},o=a.instance,l=a.pending;if(o||l){var u=function(){var d=(Da[e]||{}).instance,p=d.state.notices,f=p.find(function(_){return _.id===n.id}),g=Os(Os({},t),{update:f});p.length>=JX?f?d.add(Os(Os({},g),{id:f.id})):(p.shift(),d.add(g)):s=d.add(g)};o?u():l!=null&&l.then&&l.then(function(){u(),Da[e].pending=null})}else{var h=document.createElement("div");(vR||document.body).appendChild(h),Da[e]={},Da[e].pending=new Promise(function(d){BB(B.createElement(l1,{transitionClassNames:i,transitionTimeout:r,ref:function(p){Da[e]||(Da[e]={}),Da[e].instance=p,s=p.add(t),d(null)}}),h)})}var c=function(){var d,p;(p=(d=Da[e])===null||d===void 0?void 0:d.instance)===null||p===void 0||p.remove(s)};return c}var l1=function(n){Hmt(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.remove=function(i){var r=e.state.notices.find(function(s){return s.id===i});r&&e.update(Os(Os({},r),{style:Os(Os({},r.style),{opacity:0})})),setTimeout(function(){n.prototype.remove.call(e,i)},100)},e}return t.prototype.render=function(){var e=this,i=this.props,r=i.transitionClassNames,s=i.transitionTimeout,a=i.prefixCls,o=i.rtl,l=i.closable,u=this.state,h=u.notices,c=u.position,d=a||qN,p=Gr(o)?ZN:o,f=Gr(l)?JN:l,g=d?d+"-message":"arco-message",_={enter:Un(s==null?void 0:s.enter)?s==null?void 0:s.enter:100,exit:Un(s==null?void 0:s.exit)?s==null?void 0:s.exit:300},v=zt(g+"-wrapper",g+"-wrapper-"+c);return B.createElement("div",{className:v},B.createElement(Uk,{component:null},h.map(function(y){return B.createElement(U_,{key:y.id,timeout:_,classNames:r||"fadeMessage",onExit:function(b){b&&(b.style.height=b.scrollHeight+"px")},onExiting:function(b){b&&(b.style.height=0)},onExited:function(b){b&&(b.style.height=0,y.onClose&&y.onClose())}},B.createElement(ZX,Os({},y,{prefixCls:g,classPrefixCls:d,iconPrefix:d,onClose:e.remove,noticeType:"message",rtl:p},Gr(f)?{}:{closable:f})))})))},t.config=function(e){e===void 0&&(e={}),Un(e.maxCount)&&(JX=e.maxCount),e.prefixCls&&(qN=e.prefixCls),Un(e.duration)&&(QX=e.duration),typeof e.rtl=="boolean"&&(ZN=e.rtl),typeof e.closable=="boolean"&&(JN=e.closable),e.getContainer&&e.getContainer()!==vR&&(vR=e.getContainer(),Object.values(Da).forEach(function(i){var r=i.instance;return r==null?void 0:r.clear()}),Da={})},t.clear=function(){Object.values(Da).forEach(function(e){var i=e.instance;i==null||i.clear()})},t.addInstance=tK,t}(YX);Vmt.forEach(function(n){l1[n]=function(t){var e=typeof t=="string"?{content:t}:t;return tK(Os(Os({},e),{type:n}))}});l1.useMessage=zmt;var rd=function(){return rd=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},rd.apply(this,arguments)};function Wmt(n){n===void 0&&(n={});var t=n.maxCount,e=n.duration,i=e===void 0?3e3:e,r=n.prefixCls,s=n.getContainer,a=V.createRef(),o=B.createElement(jB,{ref:a}),l={},u;function h(d){var p,f;if(a.current){var g=a.current.getContextConfig();f=g.rtl,p=g.prefixCls}var _=r||p,v=d.position;Gr(d.position)&&(v=f?"topLeft":"topRight");var y=rd({duration:i},d),b;if(l[v]){var S=l[v].state.notices;if(S.length>=t){var A=S[0];b=A.id,S.shift(),l[v].add(rd(rd({},y),{id:b}))}else b=l[v].add(y)}else u=B.createElement(Y_,{ref:function(w){l[v]=w,l[v]&&(b=l[v].add(y))},prefixCls:_,rtl:f,getContainer:s}),a.current.addInstance(u);return l[v]}var c={};return["info","success","warning","error","normal"].forEach(function(d){c[d]=function(p){return h(rd(rd({},p),{type:d}))}}),[c,o]}var $mt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),ss=function(){return ss=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ss.apply(this,arguments)},Gmt=["info","success","error","warning","normal"],Qs={},QN,tz,ez,TP,Kb,Y_=function(n){$mt(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.remove=function(i){var r=e.state.notices.find(function(s){return s.id===i});r&&e.update(ss(ss({},r),{style:ss(ss({},r.style),{opacity:0})})),setTimeout(function(){n.prototype.remove.call(e,i)},200)},e}return t.prototype.render=function(){var e,i=this,r=this.state.notices,s=this.props,a=s.prefixCls,o=s.rtl,l=s.getContainer,u=this.state.position,h=Gr(o)?Kb:o;Gr(u)&&(u=h?"topLeft":"topRight");var c=a||tz,d=c?c+"-notification":"arco-notification",p;u==="topLeft"||u==="bottomLeft"?p="slideNoticeLeft":p="slideNoticeRight";var f=zt(d+"-wrapper",d+"-wrapper-"+u,(e={},e[d+"-wrapper-rtl"]=Kb,e)),g=l==null?void 0:l(),_=B.createElement("div",{className:f},B.createElement(Uk,{component:null},r.map(function(v){return B.createElement(U_,{key:v.id,timeout:{enter:400,exit:300},classNames:p,onExit:function(y){y&&(y.style.height=y.scrollHeight+"px")},onExiting:function(y){y&&(y.style.height=0)},onExited:function(y){y&&(y.style.height=0,v.onClose&&v.onClose())}},B.createElement(ZX,ss({},v,{onClose:i.remove,prefixCls:d,iconPrefix:c,classPrefixCls:c,noticeType:"notification",rtl:h})))})));return g?PB.createPortal(_,g):_},t.config=function(e){e===void 0&&(e={}),Un(e.maxCount)&&(QN=e.maxCount),e.prefixCls&&(tz=e.prefixCls),Un(e.duration)&&(ez=e.duration),typeof e.rtl=="boolean"&&(Kb=e.rtl),e.getContainer&&e.getContainer()!==TP&&(TP=e.getContainer(),Object.values(Qs).forEach(function(i){var r=i.instance;return r==null?void 0:r.clear()}),Qs={})},t.clear=function(){Object.values(Qs).forEach(function(e){var i=e.instance;i==null||i.clear()})},t.remove=function(e){Object.values(Qs).forEach(function(i){var r=i.instance;r==null||r.remove(e)})},t.addInstance=function(e){var i=e.position;Gr(e.position)&&(i=Kb?"topLeft":"topRight");var r=ss({duration:ez},e),s=Qs[i]||{},a=s.instance,o=s.pending;if(a||o){var l=function(){var h=(Qs[i]||{}).instance,c=h.state.notices,d=c.find(function(f){return f.id===e.id}),p=ss(ss({},r),{update:d});return c.length>=QN?d?h.add(ss(ss({},p),{id:d.id})):(c.shift(),h.add(p)):h.add(ss({},p)),h};return a?l():o!=null&&o.then&&o.then(function(){l(),Qs[i].pending=null}),a}var u=document.createElement("div");return(TP||document.body).appendChild(u),Qs[i]={},Qs[i].pending=new Promise(function(h){BB(B.createElement(t,{ref:function(c){return Qs[i]||(Qs[i]={}),Qs[i].instance=c,c.add(r),h(null),c}}),u)}),Qs[i].instance},t}(YX);Gmt.forEach(function(n){Y_[n]=function(t){return Y_.addInstance(ss(ss({},t),{type:n}))}});Y_.useNotification=Wmt;var X_=function(){return X_=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},X_.apply(this,arguments)},eK={};function Umt(n){eK=X_({},n)}function Ymt(){return eK}var _R={simple:!0},Xmt=function(n){_R=X_(X_({},_R),n)},Kmt=function(){return _R},md=[],nA=function(){return nA=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},nA.apply(this,arguments)},qb={primaryColor:{default:"--arcoblue-6",hover:"--arcoblue-5",active:"--arcoblue-7"},successColor:{default:"--green-6",hover:"--green-5",active:"--green-7"},infoColor:{default:"--arcoblue-6",hover:"--arcoblue-5",active:"--arcoblue-7"},warningColor:{default:"--orangered-6",hover:"--orangered-5",active:"--orangered-7"},dangerColor:{default:"--red-6",hover:"--red-5",active:"--red-7"}};function qmt(n){if(n&&$e(n)){var t=document.body;Object.keys(qb).forEach(function(e){n[e]&&(t.style.setProperty(qb[e].default,wP(n[e],0)),n[e+"Hover"]||t.style.setProperty(qb[e].hover,wP(n[e],10)),n[e+"Active"]||t.style.setProperty(qb[e].active,wP(n[e],-10)))})}}var Zmt=qX,Jmt={};function Ig(n){var t=nn(n,Zmt,Jmt),e=t.theme,i=t.prefixCls,r=t.children,s=t.locale,a=t.rtl,o=t.effectGlobalNotice,l=o===void 0?!0:o,u=t.effectGlobalModal,h=u===void 0?!0:u;V.useEffect(function(){qmt(e)},[e]),V.useEffect(function(){l&&(l1.config({prefixCls:i,rtl:a}),Y_.config({prefixCls:i,rtl:a}))},[i,a,l]);function c(f,g){return(g||i)+"-"+f}var d=nA(nA({},An(t,["children"])),{getPrefixCls:c});V.useEffect(function(){h&&Umt({locale:s,prefixCls:i,rtl:a})},[s,i,a,h]);var p=r;return i&&i!=="arco"&&(p=B.createElement(vi.Provider,{value:{prefixCls:i}},r)),B.createElement(pe.Provider,{value:d},p)}Ig.ConfigContext=pe;Ig.displayName="ConfigProvider";pe.Consumer;function Qmt(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var u1=Qmt,tvt=typeof So=="object"&&So&&So.Object===Object&&So,evt=tvt,ivt=evt,nvt=typeof self=="object"&&self&&self.Object===Object&&self,rvt=ivt||nvt||Function("return this")(),Xk=rvt,svt=Xk,avt=function(){return svt.Date.now()},ovt=avt,lvt=/\s/;function uvt(n){for(var t=n.length;t--&&lvt.test(n.charAt(t)););return t}var hvt=uvt,cvt=hvt,dvt=/^\s+/;function pvt(n){return n&&n.slice(0,cvt(n)+1).replace(dvt,"")}var fvt=pvt,gvt=Xk,mvt=gvt.Symbol,NB=mvt,iz=NB,iK=Object.prototype,vvt=iK.hasOwnProperty,_vt=iK.toString,gv=iz?iz.toStringTag:void 0;function yvt(n){var t=vvt.call(n,gv),e=n[gv];try{n[gv]=void 0;var i=!0}catch{}var r=_vt.call(n);return i&&(t?n[gv]=e:delete n[gv]),r}var bvt=yvt,xvt=Object.prototype,Svt=xvt.toString;function Avt(n){return Svt.call(n)}var wvt=Avt,nz=NB,Cvt=bvt,kvt=wvt,Tvt="[object Null]",Mvt="[object Undefined]",rz=nz?nz.toStringTag:void 0;function Pvt(n){return n==null?n===void 0?Mvt:Tvt:rz&&rz in Object(n)?Cvt(n):kvt(n)}var nK=Pvt;function Evt(n){return n!=null&&typeof n=="object"}var Ovt=Evt,Rvt=nK,Ivt=Ovt,Lvt="[object Symbol]";function Dvt(n){return typeof n=="symbol"||Ivt(n)&&Rvt(n)==Lvt}var Kk=Dvt,Bvt=fvt,sz=u1,Fvt=Kk,az=NaN,jvt=/^[-+]0x[0-9a-f]+$/i,Nvt=/^0b[01]+$/i,zvt=/^0o[0-7]+$/i,Hvt=parseInt;function Vvt(n){if(typeof n=="number")return n;if(Fvt(n))return az;if(sz(n)){var t=typeof n.valueOf=="function"?n.valueOf():n;n=sz(t)?t+"":t}if(typeof n!="string")return n===0?n:+n;n=Bvt(n);var e=Nvt.test(n);return e||zvt.test(n)?Hvt(n.slice(2),e?2:8):jvt.test(n)?az:+n}var Wvt=Vvt,$vt=u1,MP=ovt,oz=Wvt,Gvt="Expected a function",Uvt=Math.max,Yvt=Math.min;function Xvt(n,t,e){var i,r,s,a,o,l,u=0,h=!1,c=!1,d=!0;if(typeof n!="function")throw new TypeError(Gvt);t=oz(t)||0,$vt(e)&&(h=!!e.leading,c="maxWait"in e,s=c?Uvt(oz(e.maxWait)||0,t):s,d="trailing"in e?!!e.trailing:d);function p(w){var C=i,k=r;return i=r=void 0,u=w,a=n.apply(k,C),a}function f(w){return u=w,o=setTimeout(v,t),h?p(w):a}function g(w){var C=w-l,k=w-u,M=t-C;return c?Yvt(M,s-k):M}function _(w){var C=w-l,k=w-u;return l===void 0||C>=t||C<0||c&&k>=s}function v(){var w=MP();if(_(w))return y(w);o=setTimeout(v,g(w))}function y(w){return o=void 0,d&&i?p(w):(i=r=void 0,a)}function b(){o!==void 0&&clearTimeout(o),u=0,i=l=r=o=void 0}function S(){return o===void 0?a:y(MP())}function A(){var w=MP(),C=_(w);if(i=arguments,r=this,l=w,C){if(o===void 0)return f(l);if(c)return clearTimeout(o),o=setTimeout(v,t),p(l)}return o===void 0&&(o=setTimeout(v,t)),a}return A.cancel=b,A.flush=S,A}var rK=Xvt;const Kvt=Du(rK);var qvt=rK,Zvt=u1,Jvt="Expected a function";function Qvt(n,t,e){var i=!0,r=!0;if(typeof n!="function")throw new TypeError(Jvt);return Zvt(e)&&(i="leading"in e?!!e.leading:i,r="trailing"in e?!!e.trailing:r),qvt(n,t,{leading:i,maxWait:t,trailing:r})}var t0t=Qvt;const e0t=Du(t0t);function lz(n){return n!=null&&typeof n=="object"&&n.nodeType===1}function uz(n,t){return t&&n==="hidden"?!1:n!=="visible"&&n!=="clip"}function PP(n,t){if(n.clientHeight<n.scrollHeight||n.clientWidth<n.scrollWidth){var e=getComputedStyle(n,null);return uz(e.overflowY,t)||uz(e.overflowX,t)}return!1}function Zb(n,t,e,i,r,s,a,o){return s<n&&a>t||s>n&&a<t?0:s<=n&&o<=e||a>=t&&o>=e?s-n-i:a>t&&o<e||s<n&&o>e?a-t+r:0}const hz=function(n,t){var e=t.scrollMode,i=t.block,r=t.inline,s=t.boundary,a=t.skipOverflowHiddenElements,o=typeof s=="function"?s:function(dt){return dt!==s};if(!lz(n))throw new TypeError("Invalid target");for(var l=document.scrollingElement||document.documentElement,u=[],h=n;lz(h)&&o(h);){if(h=h.parentNode,h===l){u.push(h);break}h===document.body&&PP(h)&&!PP(document.documentElement)||PP(h,a)&&u.push(h)}for(var c=window.visualViewport?visualViewport.width:innerWidth,d=window.visualViewport?visualViewport.height:innerHeight,p=window.scrollX||pageXOffset,f=window.scrollY||pageYOffset,g=n.getBoundingClientRect(),_=g.height,v=g.width,y=g.top,b=g.right,S=g.bottom,A=g.left,w=i==="start"||i==="nearest"?y:i==="end"?S:y+_/2,C=r==="center"?A+v/2:r==="end"?b:A,k=[],M=0;M<u.length;M++){var P=u[M],E=P.getBoundingClientRect(),I=E.height,D=E.width,N=E.top,O=E.right,L=E.bottom,H=E.left;if(e==="if-needed"&&y>=0&&A>=0&&S<=d&&b<=c&&y>=N&&S<=L&&A>=H&&b<=O)return k;var j=getComputedStyle(P),G=parseInt(j.borderLeftWidth,10),U=parseInt(j.borderTopWidth,10),$=parseInt(j.borderRightWidth,10),q=parseInt(j.borderBottomWidth,10),tt=0,it=0,nt="offsetWidth"in P?P.offsetWidth-P.clientWidth-G-$:0,K="offsetHeight"in P?P.offsetHeight-P.clientHeight-U-q:0;if(l===P)i==="start"?tt=w:i==="end"?tt=w-d:i==="nearest"?tt=Zb(f,f+d,d,U,q,f+w,f+w+_,_):tt=w-d/2,r==="start"?it=C:r==="center"?it=C-c/2:r==="end"?it=C-c:it=Zb(p,p+c,c,G,$,p+C,p+C+v,v),tt=Math.max(0,tt+f),it=Math.max(0,it+p);else{i==="start"?tt=w-N-U:i==="end"?tt=w-L+q+K:i==="nearest"?tt=Zb(N,L,I,U,q+K,w,w+_,_):tt=w-(N+I/2)+K/2,r==="start"?it=C-H-G:r==="center"?it=C-(H+D/2)+nt/2:r==="end"?it=C-O+$+nt:it=Zb(H,O,D,G,$+nt,C,C+v,v);var J=P.scrollLeft,Q=P.scrollTop;tt=Math.max(0,Math.min(Q+tt,P.scrollHeight-I+K)),it=Math.max(0,Math.min(J+it,P.scrollWidth-D+nt)),w+=Q-tt,C+=J-it}k.push({el:P,top:tt,left:it})}return k};function sK(n){return n===Object(n)&&Object.keys(n).length!==0}function i0t(n,t){t===void 0&&(t="auto");var e="scrollBehavior"in document.body.style;n.forEach(function(i){var r=i.el,s=i.top,a=i.left;r.scroll&&e?r.scroll({top:s,left:a,behavior:t}):(r.scrollTop=s,r.scrollLeft=a)})}function n0t(n){return n===!1?{block:"end",inline:"nearest"}:sK(n)?n:{block:"start",inline:"nearest"}}function r0t(n,t){var e=!n.ownerDocument.documentElement.contains(n);if(sK(t)&&typeof t.behavior=="function")return t.behavior(e?[]:hz(n,t));if(!e){var i=n0t(t);return i0t(hz(n,i),i.behavior)}}function zB(n,t){var e={};return t.forEach(function(i){var r=i;i in n&&(e[r]=n[r])}),e}function h1(n){var t={};return n&&Object.keys(n).forEach(function(e){var i=String(e);i.indexOf("data-")===0&&(t[i]=n[i]),i.indexOf("aria-")===0&&(t[i]=n[i])}),t}var aK=function(){},bp=function(){try{return!(typeof window<"u"&&document!==void 0)}catch{return!0}}(),rr=function(){return bp?aK:function(n,t,e,i){n&&n.addEventListener(t,e,i||!1)}}(),sr=function(){return bp?aK:function(n,t,e,i){n&&n.removeEventListener(t,e,i||!1)}}(),K_=function(n,t){if(!n)return!1;if(n.contains)return n.contains(t);for(var e=t;e;){if(e===n)return!0;e=e.parentNode}return!1},oK=function(n){var t=n===document.documentElement?n.clientHeight:n.offsetHeight,e=n===document.documentElement?n.clientWidth:n.offsetWidth;return n.scrollHeight>t||n.scrollWidth>e},s0t=function(n,t){t===void 0&&(t=document.documentElement);for(var e=[],i=n;i&&i!==t;)oK(i)&&e.push(i),i=i.parentElement;return e};function lK(){var n=V.useRef(!0);return V.useEffect(function(){n.current=!1},[]),n.current}var Md=typeof window>"u"?global:window,a0t=["webkit","ms","moz","o"],Ao=Md.requestAnimationFrame,pa=Md.cancelAnimationFrame;if((!Ao||!pa)&&(a0t.some(function(n){return Ao=Md[n+"RequestAnimationFrame"],pa=Md[n+"CancelAnimationFrame"]||Md[n+"CancelRequestAnimationFrame"],Ao&&pa}),!Ao||!pa)){var cz=0;Ao=function(n){var t=Date.now(),e=Math.max(0,16-(t-cz)),i=setTimeout(function(){n(),cz=t+e},e);return i},pa=function(n){clearTimeout(n)}}Ao=Ao.bind(Md);pa=pa.bind(Md);var o0t=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},l0t=function(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))};function rA(n){var t=null,e=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];t&&pa(t),t=Ao(function(){n.apply(void 0,l0t([],o0t(i),!1)),t=null})};return e.cancel=function(){pa(t),t=null},e}var uK=function(){if(typeof Map<"u")return Map;function n(t,e){var i=-1;return t.some(function(r,s){return r[0]===e?(i=s,!0):!1}),i}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(e){var i=n(this.__entries__,e),r=this.__entries__[i];return r&&r[1]},t.prototype.set=function(e,i){var r=n(this.__entries__,e);~r?this.__entries__[r][1]=i:this.__entries__.push([e,i])},t.prototype.delete=function(e){var i=this.__entries__,r=n(i,e);~r&&i.splice(r,1)},t.prototype.has=function(e){return!!~n(this.__entries__,e)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,i){i===void 0&&(i=null);for(var r=0,s=this.__entries__;r<s.length;r++){var a=s[r];e.call(i,a[1],a[0])}},t}()}(),yR=typeof window<"u"&&typeof document<"u"&&window.document===document,sA=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),u0t=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(sA):function(n){return setTimeout(function(){return n(Date.now())},1e3/60)}}(),h0t=2;function c0t(n,t){var e=!1,i=!1,r=0;function s(){e&&(e=!1,n()),i&&o()}function a(){u0t(s)}function o(){var l=Date.now();if(e){if(l-r<h0t)return;i=!0}else e=!0,i=!1,setTimeout(a,t);r=l}return o}var d0t=20,p0t=["top","right","bottom","left","width","height","size","weight"],f0t=typeof MutationObserver<"u",g0t=function(){function n(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=c0t(this.refresh.bind(this),d0t)}return n.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},n.prototype.removeObserver=function(t){var e=this.observers_,i=e.indexOf(t);~i&&e.splice(i,1),!e.length&&this.connected_&&this.disconnect_()},n.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},n.prototype.updateObservers_=function(){var t=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return t.forEach(function(e){return e.broadcastActive()}),t.length>0},n.prototype.connect_=function(){!yR||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),f0t?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},n.prototype.disconnect_=function(){!yR||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},n.prototype.onTransitionEnd_=function(t){var e=t.propertyName,i=e===void 0?"":e,r=p0t.some(function(s){return!!~i.indexOf(s)});r&&this.refresh()},n.getInstance=function(){return this.instance_||(this.instance_=new n),this.instance_},n.instance_=null,n}(),hK=function(n,t){for(var e=0,i=Object.keys(t);e<i.length;e++){var r=i[e];Object.defineProperty(n,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return n},Lg=function(n){var t=n&&n.ownerDocument&&n.ownerDocument.defaultView;return t||sA},cK=qk(0,0,0,0);function aA(n){return parseFloat(n)||0}function dz(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return t.reduce(function(i,r){var s=n["border-"+r+"-width"];return i+aA(s)},0)}function m0t(n){for(var t=["top","right","bottom","left"],e={},i=0,r=t;i<r.length;i++){var s=r[i],a=n["padding-"+s];e[s]=aA(a)}return e}function v0t(n){var t=n.getBBox();return qk(0,0,t.width,t.height)}function _0t(n){var t=n.clientWidth,e=n.clientHeight;if(!t&&!e)return cK;var i=Lg(n).getComputedStyle(n),r=m0t(i),s=r.left+r.right,a=r.top+r.bottom,o=aA(i.width),l=aA(i.height);if(i.boxSizing==="border-box"&&(Math.round(o+s)!==t&&(o-=dz(i,"left","right")+s),Math.round(l+a)!==e&&(l-=dz(i,"top","bottom")+a)),!b0t(n)){var u=Math.round(o+s)-t,h=Math.round(l+a)-e;Math.abs(u)!==1&&(o-=u),Math.abs(h)!==1&&(l-=h)}return qk(r.left,r.top,o,l)}var y0t=function(){return typeof SVGGraphicsElement<"u"?function(n){return n instanceof Lg(n).SVGGraphicsElement}:function(n){return n instanceof Lg(n).SVGElement&&typeof n.getBBox=="function"}}();function b0t(n){return n===Lg(n).document.documentElement}function x0t(n){return yR?y0t(n)?v0t(n):_0t(n):cK}function S0t(n){var t=n.x,e=n.y,i=n.width,r=n.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,a=Object.create(s.prototype);return hK(a,{x:t,y:e,width:i,height:r,top:e,right:t+i,bottom:r+e,left:t}),a}function qk(n,t,e,i){return{x:n,y:t,width:e,height:i}}var A0t=function(){function n(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=qk(0,0,0,0),this.target=t}return n.prototype.isActive=function(){var t=x0t(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},n.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},n}(),w0t=function(){function n(t,e){var i=S0t(e);hK(this,{target:t,contentRect:i})}return n}(),C0t=function(){function n(t,e,i){if(this.activeObservations_=[],this.observations_=new uK,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=i}return n.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Lg(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new A0t(t)),this.controller_.addObserver(this),this.controller_.refresh())}},n.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Lg(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},n.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},n.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},n.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(i){return new w0t(i.target,i.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},n.prototype.clearActive=function(){this.activeObservations_.splice(0)},n.prototype.hasActive=function(){return this.activeObservations_.length>0},n}(),dK=typeof WeakMap<"u"?new WeakMap:new uK,pK=function(){function n(t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var e=g0t.getInstance(),i=new C0t(t,e,this);dK.set(this,i)}return n}();["observe","unobserve","disconnect"].forEach(function(n){pK.prototype[n]=function(){var t;return(t=dK.get(this))[n].apply(t,arguments)}});var fK=function(){return typeof sA.ResizeObserver<"u"?sA.ResizeObserver:pK}(),k0t=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Tu=function(n){k0t(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.getRootElement=function(){var i=e.props.getTargetDOMNode;return Yk((i==null?void 0:i())||e.rootDOMRef,e)},e.getRootDOMNode=function(){return e.getRootElement()},e.componentWillUnmount=function(){e.resizeObserver&&e.destroyResizeObserver()},e.createResizeObserver=function(){var i=e.props.throttle,r=i===void 0?!0:i,s=function(u){var h,c;(c=(h=e.props).onResize)===null||c===void 0||c.call(h,u)},a=r?e0t(s):s,o=!0;e.resizeObserver=new fK(function(u){o&&(o=!1,s(u)),a(u)});var l=e.getRootElement();l&&e.resizeObserver.observe(l)},e.destroyResizeObserver=function(){e.resizeObserver&&e.resizeObserver.disconnect(),e.resizeObserver=null},e}return t.prototype.componentDidMount=function(){B.isValidElement(this.props.children)?this.createResizeObserver():console.warn("The children of ResizeObserver is invalid.")},t.prototype.componentDidUpdate=function(){!this.resizeObserver&&this.getRootElement()&&this.createResizeObserver()},t.prototype.render=function(){var e=this,i=this.props.children;return IB(i)&&V.isValidElement(i)&&!this.props.getTargetDOMNode?V.cloneElement(i,{ref:function(r){e.rootDOMRef=r,DB(i,r)}}):(this.rootDOMRef=null,this.props.children)},t}(B.Component),d0=bp?V.useEffect:V.useLayoutEffect,T0t=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s};function M0t(n){var t=T0t(V.useState({value:n,resolve:function(r){}}),2),e=t[0],i=t[1];return V.useEffect(function(){e.resolve(e.value)},[e]),[e.value,function(r){return new Promise(function(s){i(function(a){var o=r;return typeof r=="function"&&(o=r(a.value)),{value:o,resolve:s}})})}]}var bR=function(){return bR=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},bR.apply(this,arguments)},P0t=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};function E0t(n,t){var e=n.className,i=n.style,r=n.children,s=P0t(n,["className","style","children"]),a=V.useContext(pe).getPrefixCls,o=a("btn-group"),l=zt(o,e);return B.createElement("div",bR({ref:t,className:l,style:i},s),r)}var gK=B.forwardRef(E0t);gK.displayName="ButtonGroup";var p0=function(){return p0=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},p0.apply(this,arguments)},O0t=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},R0t=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},I0t=/^[\u4e00-\u9fa5]{2}$/;function L0t(n){var t=[],e=!1;return B.Children.forEach(n,function(i){var r=typeof i=="string"||typeof i=="number";if(r&&e){var s=t.length-1,a=t[s];t[s]=""+a+i}else t.push(i);e=r}),B.Children.map(t,function(i){return typeof i=="string"?B.createElement("span",null,i):i})}var D0t={htmlType:"button",type:"default",shape:"square"};function B0t(n,t){var e,i=V.useContext(pe),r=i.getPrefixCls,s=i.size,a=i.autoInsertSpaceInButton,o=i.componentConfig,l=i.rtl,u=nn(n,D0t,o==null?void 0:o.Button),h=u.style,c=u.className,d=u.children,p=u.htmlType,f=u.type,g=u.status,_=u.size,v=u.shape,y=u.href,b=u.anchorProps,S=u.disabled,A=u.loading,w=u.loadingFixedWidth,C=u.icon,k=u.iconOnly,M=u.onClick,P=u.long,E=O0t(u,["style","className","children","htmlType","type","status","size","shape","href","anchorProps","disabled","loading","loadingFixedWidth","icon","iconOnly","onClick","long"]),I=A?B.createElement(bm,null):C,D=R0t(V.useState(!1),2),N=D[0],O=D[1],L=V.useRef(),H=t||L;V.useEffect(function(){if(a&&H&&H.current){var it=H.current.textContent;I0t.test(it)?N||O(!0):N&&O(!1)}},[H.current,a]);var j=r("btn"),G=f==="default"?"secondary":f,U=zt(j,j+"-"+G,j+"-size-"+(_||s),j+"-shape-"+v,(e={},e[j+"-long"]=P,e[j+"-status-"+g]=g,e[j+"-loading-fixed-width"]=w,e[j+"-loading"]=A,e[j+"-link"]=y,e[j+"-icon-only"]=k||!d&&d!==0&&I,e[j+"-disabled"]=S,e[j+"-two-chinese-chars"]=N,e[j+"-rtl"]=l,e),c),$=function(it){if(A||S){typeof(it==null?void 0:it.preventDefault)=="function"&&it.preventDefault();return}M&&M(it)},q=B.createElement(B.Fragment,null,I,L0t(d));if(y){var tt=p0({},b);return S?delete tt.href:tt.href=y,B.createElement("a",p0({ref:H},E,tt,{style:h,className:U,onClick:$}),q)}return B.createElement("button",p0({ref:H},E,{style:h,className:U,type:p,disabled:S,onClick:$}),q)}var F0t=V.forwardRef(B0t),jo=F0t;jo.__BYTE_BUTTON=!0;jo.Group=gK;jo.displayName="Button";function pz(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function fz(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?pz(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):pz(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function j0t(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=fz(fz({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-search")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{d:"M33.072 33.071c6.248-6.248 6.248-16.379 0-22.627-6.249-6.249-16.38-6.249-22.628 0-6.248 6.248-6.248 16.379 0 22.627 6.248 6.248 16.38 6.248 22.628 0Zm0 0 8.485 8.485"}))}var oA=B.forwardRef(j0t);oA.defaultProps={isIcon:!0};oA.displayName="IconSearch";function N0t(n){var t=V.useRef();return V.useEffect(function(){t.current=n}),t.current}var z0t=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s};function Ns(n,t){var e=t||{},i=e.defaultValue,r=e.value,s=V.useRef(!0),a=N0t(r),o=z0t(V.useState(Gr(r)?Gr(i)?n:i:r),2),l=o[0],u=o[1];V.useEffect(function(){if(s.current){s.current=!1;return}r===void 0&&a!==r&&u(r)},[r]);var h=Gr(r)?l:r;return[h,u,l]}var xR=function(){return xR=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xR.apply(this,arguments)},H0t=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},V0t=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},mK=B.forwardRef(function(n,t){var e,i=V.useContext(pe).getPrefixCls,r=n.className,s=n.style,a=n.placeholder,o=n.disabled,l=n.searchButton,u=n.loading,h=n.defaultValue,c=n.addAfter,d=n.suffix,p=H0t(n,["className","style","placeholder","disabled","searchButton","loading","defaultValue","addAfter","suffix"]),f=$e(n.maxLength)?n.maxLength.length:n.maxLength,g=$e(n.maxLength)&&n.maxLength.errorOnly?void 0:f,_=V0t(Ns("",{defaultValue:"defaultValue"in n?Dg(n.defaultValue,g):void 0,value:"value"in n?Dg(n.value,g):void 0}),2),v=_[0],y=_[1],b=i("input-search"),S=zt(b,(e={},e[b+"-button"]=l,e),r),A=function(){!o&&n.onSearch&&n.onSearch(v)};return B.createElement(Tc,xR({},An(p,["onSearch"]),{disabled:o,className:S,style:s,ref:t,placeholder:a,addAfter:c!==void 0?c:l?B.createElement(jo,{disabled:o,size:p.size,className:b+"-btn",type:"primary",onClick:A,loading:u,loadingFixedWidth:!0,icon:l===!0&&!u&&B.createElement(oA,null)},l!==!0&&l):null,suffix:d!==void 0?d:!l&&(u?B.createElement(bm,null):B.createElement(oA,{onClick:A})),onChange:function(w,C){y(w),n.onChange&&n.onChange(w,C)},defaultValue:h,onPressEnter:function(w){A(),n.onPressEnter&&n.onPressEnter(w)}}))});mK.displayName="Search";var W0t=`
  position: absolute;
  min-height: 0 !important;
  max-height: none;
  height:0;
  visibility: hidden;
  z-index: -100;
  top: 0;
  right: 0;
`,$0t=["border-width","box-sizing","font-family","font-weight","font-size","font-variant","letter-spacing","line-height","padding-top","padding-bottom","padding-left","padding-right","text-indent","text-rendering","text-transform","width"],wh;function G0t(n){wh||(wh=document.createElement("textarea"),document.body.appendChild(wh));var t=window.getComputedStyle(n),e=`
    `+$0t.map(function(a){return a+":"+t.getPropertyValue(a)}).join(";")+`
  `;wh.setAttribute("style",""+W0t+e);var i=parseFloat(t.getPropertyValue("padding-top"))+parseFloat(t.getPropertyValue("padding-bottom")),r=t.getPropertyValue("box-sizing"),s=parseFloat(t.getPropertyValue("border-top-width"))+parseFloat(t.getPropertyValue("border-bottom-width"));return{paddingSize:i,boxSizing:r,borderSize:s}}function U0t(n,t){var e=function(){var v,y;return $e(n)&&(v=n.minRows,y=n.maxRows),{minRows:v,maxRows:y}};if(n){var i=e(),r=i.minRows,s=i.maxRows,a=t,o=G0t(a),l=o.paddingSize,u=o.boxSizing,h=o.borderSize;wh.value=a.value||a.placeholder||"";var c=wh.scrollHeight+h,d=void 0,p=void 0,f=void 0;if(r||s){wh.value="";var g=wh.scrollHeight-l;Un(r)&&(d=g*r,u==="border-box"&&(d+=l,d+=h),c=Math.max(c,d)),Un(s)&&(p=g*s,u==="border-box"&&(p+=l,p+=h),f=c>p?"auto":"",p=Math.min(c,p))}var _={};return _.height=c,d&&(_.minHeight=d),p&&(_.maxHeight=p),f&&(_.overflowY=f),_}}var c1={key:"Enter",code:13},SR={key:"Escape",code:27},Y0t={key:"ArrowUp",code:38},X0t={key:"ArrowDown",code:40},vK={key:"ArrowLeft",code:37},_K={key:"ArrowRight",code:39},K0t=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s};function yK(n){var t=n.value,e=n.maxLength,i=n.onChange,r=n.onKeyDown,s=n.onPressEnter,a=n.beforeTriggerValueChangeCallback,o=n.normalizeHandler,l=V.useRef(!1),u=K0t(V.useState(""),2),h=u[0],c=u[1],d=function(p,f){a&&a(p),i&&p!==t&&(e===void 0||p.length<=e)&&i(p,f)};return{compositionValue:h,triggerValueChangeCallback:d,compositionHandler:function(p){l.current=p.type!=="compositionend",l.current||(c(void 0),d(p.target.value,p))},valueChangeHandler:function(p){var f=p.target.value;l.current?(l.current=!1,c(f)):(h&&c(void 0),d(f,p))},keyDownHandler:function(p){var f=p.keyCode||p.which;if(!l.current&&(r&&r(p),f===c1.code)){s&&s(p);var g=o==null?void 0:o("onPressEnter");g&&d(g(p.target.value),p)}}}}var f0=function(){return f0=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},f0.apply(this,arguments)},q0t=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},EP=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},Z0t=function(n,t){var e,i,r,s=n.className,a=n.style,o=n.wrapperStyle,l=n.placeholder,u=n.disabled,h=n.error,c=n.maxLength,d=n.showWordLimit,p=n.allowClear,f=n.onChange,g=n.onClear,_=n.onKeyDown,v=n.onPressEnter,y=n.status,b=n.clearIcon,S=q0t(n,["className","style","wrapperStyle","placeholder","disabled","error","maxLength","showWordLimit","allowClear","onChange","onClear","onKeyDown","onPressEnter","status","clearIcon"]),A=$e(c)?c.length:c,w=$e(c)?c.errorOnly?void 0:c.length:c,C=V.useRef(),k=EP(V.useState({}),2),M=k[0],P=k[1],E=EP(Ns("",{defaultValue:"defaultValue"in n?Dg(n.defaultValue,w):void 0,value:"value"in n?Dg(n.value,w):void 0}),2),I=E[0],D=E[1],N=yK({value:I,maxLength:w,onChange:f,onKeyDown:_,onPressEnter:v,beforeTriggerValueChangeCallback:function(Lt){!("value"in n)&&(w===void 0||Lt.length<=w)&&D(Lt)}}),O=N.compositionValue,L=N.compositionHandler,H=N.valueChangeHandler,j=N.keyDownHandler,G=N.triggerValueChangeCallback,U=O||I||"",$=V.useContext(pe),q=$.getPrefixCls,tt=$.rtl,it=q("textarea");u&&(M.resize="none");var nt=function(){if(C.current&&C.current.focus){if(C.current.setSelectionRange){var Lt=C.current.textContent.length;C.current.setSelectionRange(Lt,Lt)}C.current.focus()}},K=function(){var Lt=U0t(n.autoSize,C.current);Lt&&P(Lt)},J=function(Lt){Lt.stopPropagation(),nt(),G("",Lt),g==null||g()};d0(function(){K()},[U]),V.useImperativeHandle(t,function(){return{dom:C.current,focus:function(){nt()},blur:function(){C.current&&C.current.blur&&C.current.blur()},getRootDOMNode:function(){return C.current}}},[]);var Q=I?I.length:0,dt=A&&d||p,bt=V.useMemo(function(){return!w&&A?Q>A:!1},[Q,A,w]),xt=y||(h||bt?"error":void 0),ht=zt(it,(e={},e[it+"-"+xt]=xt,e[it+"-disabled"]=u,e[it+"-rtl"]=tt,e),s),St=B.createElement("textarea",f0({},An(S,["autoSize","defaultValue"]),{maxLength:w,ref:C,style:f0(f0({},a),M),className:ht,placeholder:l,disabled:u,value:U,onChange:H,onKeyDown:j,onCompositionStart:L,onCompositionUpdate:L,onCompositionEnd:L}));if(dt){var yt=!u&&p&&I,vt=EP(tt?[A,Q]:[Q,A],2),pt=vt[0],jt=vt[1];return B.createElement("div",{className:zt(it+"-wrapper",(i={},i[it+"-clear-wrapper"]=p,i[it+"-wrapper-rtl"]=tt,i)),style:o},St,yt?b!==void 0?B.createElement("span",{className:it+"-clear-icon",onClick:J,onMouseDown:function(Lt){Lt.preventDefault()}},b):B.createElement(Rg,{className:it+"-clear-icon"},B.createElement(Kd,{onClick:J,onMouseDown:function(Lt){Lt.preventDefault()}})):null,A&&d&&B.createElement("span",{className:zt(it+"-word-limit",(r={},r[it+"-word-limit-error"]=bt,r))},pt,"/",jt))}return St},bK=B.forwardRef(Z0t);bK.displayName="TextArea";function gz(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function mz(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?gz(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):gz(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function J0t(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=mz(mz({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-eye")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{d:"M24 37c6.627 0 12.627-4.333 18-13-5.373-8.667-11.373-13-18-13-6.627 0-12.627 4.333-18 13 5.373 8.667 11.373 13 18 13Z",clipRule:"evenodd"}),B.createElement("path",{d:"M29 24a5 5 0 1 1-10 0 5 5 0 0 1 10 0Z"}))}var HB=B.forwardRef(J0t);HB.defaultProps={isIcon:!0};HB.displayName="IconEye";function vz(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function _z(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?vz(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):vz(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Q0t(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=_z(_z({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-eye-invisible")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{d:"M14 14.5c-2.69 2-5.415 5.33-8 9.5 5.373 8.667 11.373 13 18 13 3.325 0 6.491-1.09 9.5-3.271M17.463 12.5C19 11 21.75 11 24 11c6.627 0 12.627 4.333 18 13-1.766 2.848-3.599 5.228-5.5 7.14"}),B.createElement("path",{d:"M29 24a5 5 0 1 1-10 0 5 5 0 0 1 10 0ZM6.852 7.103l34.294 34.294"}))}var VB=B.forwardRef(Q0t);VB.defaultProps={isIcon:!0};VB.displayName="IconEyeInvisible";function xm(n){var t=V.useCallback(function(e){return{onKeyDown:function(i){var r,s,a,o,l,u,h=i.keyCode||i.which;h===c1.code&&((r=e.onPressEnter)===null||r===void 0||r.call(e,i)),h===X0t.code&&((s=e.onArrowDown)===null||s===void 0||s.call(e,i)),h===vK.code&&((a=e.onArrowLeft)===null||a===void 0||a.call(e,i)),h===_K.code&&((o=e.onArrowRight)===null||o===void 0||o.call(e,i)),h===Y0t.code&&((l=e.onArrowUp)===null||l===void 0||l.call(e,i)),(u=n==null?void 0:n.onKeyDown)===null||u===void 0||u.call(n,i)}}},[]);return t}var Tf=function(){return Tf=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Tf.apply(this,arguments)},t_t=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},e_t=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},xK=B.forwardRef(function(n,t){var e,i=e_t(Ns(!1,{defaultValue:n.defaultVisibility,value:n.visibility}),2),r=i[0],s=i[1],a=V.useContext(pe).getPrefixCls,o=xm(),l=n.className,u=n.visibilityToggle,h=u===void 0?!0:u,c=n.onVisibilityChange,d=t_t(n,["className","visibilityToggle","onVisibilityChange"]),p=a("input-password"),f=zt(p,(e={},e[p+"-visibility"]=h,e),l),g=function(S){"visibility"in n||s(S),c&&c(S)},_=n.suffix,v=function(){g(!r)};if(h){var y=Tf({onClick:v,onMouseDown:function(S){return S.preventDefault()},onMouseUp:function(S){return S.preventDefault()}},o({onPressEnter:v}));if(n.suffix)_=B.createElement("span",Tf({},y),n.suffix);else{var b=r?HB:VB;_=B.createElement(b,Tf({},y,{focusable:void 0,"aria-hidden":void 0,tabIndex:0,className:p+"-visibility-icon"}))}}return B.createElement(Tc,Tf({},An(d,["visibility","defaultVisibility"]),{type:r?"text":"password",className:f,ref:t,suffix:_}))});xK.displayName="Password";function i_t(n){return typeof n=="string"?n.replace(/(\s{2,})|(\s{1,}$)/g,function(t){return" ".repeat(t.length)}):n}var ia=function(){return ia=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ia.apply(this,arguments)},n_t=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},r_t=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},s_t=2,a_t=function(n){if(!n)return{};var t=window.getComputedStyle(n),e=["font","letterSpacing","overflow","tabSize","textIndent","textTransform","whiteSpace","wordBreak","wordSpacing","paddingLeft","paddingRight","borderLeft","borderRight","boxSizing"];return e.reduce(function(i,r){return i[r]=t[r],i},{})},SK=B.forwardRef(function(n,t){var e,i=n.allowClear,r=n.disabled,s=n.placeholder,a=n.className,o=n.style,l=n.height,u=n.prefixCls,h=n.hasParent,c=n.size,d=n.value,p=n.autoFitWidth,f=n.onClear,g=n.readOnly,_=n.onChange,v=n.onKeyDown,y=n.onPressEnter,b=n.maxLength,S=n.clearIcon,A=n_t(n,["allowClear","disabled","placeholder","className","style","height","prefixCls","hasParent","size","value","autoFitWidth","onClear","readOnly","onChange","onKeyDown","onPressEnter","maxLength","clearIcon"]),w=An(A,["error","status","showWordLimit","className","defaultValue","addBefore","addAfter","afterStyle","beforeStyle","prefix","suffix","normalize","normalizeTrigger","autoWidth"]),C=r_t(V.useState(),2),k=C[0],M=C[1],P=xm(),E=V.useRef(),I=V.useRef(),D=V.useRef(null),N=$e(b)?b.errorOnly?void 0:b.length:b,O=function(J){var Q,dt=n.normalizeTrigger||["onBlur"];return Array.isArray(dt)&&dt.indexOf(J)>-1&&ir(n.normalize)&&(Q=n.normalize),Q},L=yK({value:d,maxLength:N,onChange:_,onKeyDown:v,onPressEnter:y,normalizeHandler:O}),H=L.compositionValue,j=L.valueChangeHandler,G=L.compositionHandler,U=L.keyDownHandler,$=L.triggerValueChangeCallback,q=zt(u,u&&(e={},e[u+"-size-"+c]=c,e[u+"-"+n.status]=n.status,e[u+"-disabled"]=r,e[u+"-autowidth"]=p,e),h?void 0:a),tt=ia(ia({"aria-invalid":n.status==="error"||void 0},w),{readOnly:g,maxLength:N,disabled:r,placeholder:s,value:H||d||"",className:q,onKeyDown:U,onChange:j,onCompositionStart:function(J){var Q;(Q=A.onCompositionStart)===null||Q===void 0||Q.call(A,J),G(J)},onCompositionUpdate:function(J){var Q;(Q=A.onCompositionUpdate)===null||Q===void 0||Q.call(A,J),G(J)},onCompositionEnd:function(J){var Q;(Q=A.onCompositionEnd)===null||Q===void 0||Q.call(A,J),G(J)},onBlur:function(J){var Q;(Q=n.onBlur)===null||Q===void 0||Q.call(n,J);var dt=O("onBlur");dt&&$(dt(J.target.value),J)}});V.useImperativeHandle(t,function(){return{dom:E.current,getRootDOMNode:function(){return E.current},focus:function(){E.current&&E.current.focus&&E.current.focus()},blur:function(){E.current&&E.current.blur&&E.current.blur()}}},[]);var it=function(){if(I.current&&E.current){var J=I.current.offsetWidth;E.current.style.width=J+s_t+"px"}};V.useEffect(function(){p&&((!$e(p)||!p.pure)&&M(a_t(E==null?void 0:E.current)),it())},[p]);var nt=tt.value||s,K=function(J){E.current&&E.current.focus&&E.current.focus(),$("",J),f==null||f()};return B.createElement(B.Fragment,null,i?B.createElement(B.Fragment,null,B.createElement("input",ia({ref:E},tt)),!g&&!r&&i&&d?S!==void 0?B.createElement("span",ia({tabIndex:0,className:u+"-clear-icon"},P({onPressEnter:K}),{onClick:function(J){J.stopPropagation(),K(J)},onMouseDown:function(J){J.preventDefault()}}),S):B.createElement(Rg,ia({tabIndex:0,className:u+"-clear-icon"},P({onPressEnter:K}),{onClick:function(J){J.stopPropagation(),K(J)}}),B.createElement(Kd,{onMouseDown:function(J){J.preventDefault()}})):null):B.createElement("input",ia({ref:E},tt,{style:h?{}:ia(ia({minWidth:$e(p)?p.minWidth:void 0,maxWidth:$e(p)?p.maxWidth:void 0},o),"height"in n?{height:l}:{})})),p&&B.createElement(Tu,{getTargetDOMNode:function(){return I.current},onResize:function(){var J=I.current.offsetWidth;if(typeof p=="object"){var Q=typeof p.delay=="function"?p.delay(J,D.current):p.delay;Q?setTimeout(it,Q):it()}else it();D.current=J}},B.createElement("span",{className:zt(u+"-mirror"),style:h?k:ia(ia(ia({},k),o),"height"in n?{height:l}:{}),ref:I},i_t(nt))))});SK.displayName="InputComponent";var AR=function(){return AR=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},AR.apply(this,arguments)},o_t=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},AK=B.forwardRef(function(n,t){var e,i=V.useContext(pe).getPrefixCls,r=n.className,s=n.style,a=n.children,o=n.compact,l=o_t(n,["className","style","children","compact"]),u=i("input-group"),h=zt(u,(e={},e[u+"-compact"]=o,e),r);return B.createElement("div",AR({ref:t,className:h,style:s},l),a)});AK.displayName="InputGroup";var ql=function(){return ql=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ql.apply(this,arguments)},OP=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},l_t=function(n){n.target.tagName!=="INPUT"&&n.preventDefault()},Jb=function(n,t,e,i){return e===void 0&&(e={}),t?B.createElement("span",{style:e,className:n,onClick:i},t):null};function Dg(n,t){var e=n!==null&&!Gr(n)&&!kc(n)?String(n):n||"";return t?e.slice(0,t):e}function u_t(n,t){var e,i,r,s=V.useContext(pe),a=s.getPrefixCls,o=s.size,l=s.componentConfig,u=s.rtl,h=nn(n,{},l==null?void 0:l.Input),c=h.className,d=h.style,p=h.addBefore,f=h.addAfter,g=h.suffix,_=h.prefix,v=h.beforeStyle,y=h.afterStyle,b=h.height,S=h.disabled,A=h.maxLength,w=h.showWordLimit,C=h.allowClear,k=h.autoWidth,M=k?ql({minWidth:0,maxWidth:"100%"},$e(k)?k:{}):null,P=ql({minWidth:M==null?void 0:M.minWidth,maxWidth:M==null?void 0:M.maxWidth,width:M&&"auto"},d),E=$e(A)?A.length:A,I=$e(A)&&A.errorOnly?void 0:E,D=OP(V.useState(!1),2),N=D[0],O=D[1],L=V.useRef(),H=V.useRef(),j=OP(Ns("",{defaultValue:"defaultValue"in h?Dg(h.defaultValue,I):void 0,value:"value"in h?Dg(h.value,I):void 0}),2),G=j[0],U=j[1];V.useImperativeHandle(t,function(){return L.current},[]);var $=function(pt,jt){"value"in h||U(pt),h.onChange&&h.onChange(pt,jt)},q=a("input"),tt=h.size||o,it="height"in h,nt=g,K=G?G.length:0,J=V.useMemo(function(){return!I&&E?K>E:!1},[K,E,I]);if(E&&w){var Q=OP(u?[E,K]:[K,E],2),dt=Q[0],bt=Q[1];nt=B.createElement("span",{className:zt(q+"-word-limit",(e={},e[q+"-word-limit-error"]=J,e))},dt,"/",bt)}var xt=zt(q+"-group-wrapper",q+"-group-wrapper-"+tt,(i={},i[q+"-custom-height"]=it,i[q+"-has-suffix"]=nt,i[q+"-group-wrapper-disabled"]=S,i[q+"-group-wrapper-rtl"]=u,i[q+"-group-wrapper-autowidth"]=M,i),c),ht=h.status||(h.error||J?"error":void 0),St=p||f||nt||_,yt=B.createElement(SK,ql({ref:L},h,{autoFitWidth:!!M,style:P,status:ht,onFocus:function(pt){O(!0),h.onFocus&&h.onFocus(pt)},onBlur:function(pt){O(!1),h.onBlur&&h.onBlur(pt)},onChange:$,prefixCls:q,value:G,hasParent:!!St||C,size:tt})),vt=zt(q+"-inner-wrapper",(r={},r[q+"-inner-wrapper-"+ht]=ht,r[q+"-inner-wrapper-disabled"]=S,r[q+"-inner-wrapper-focus"]=N,r[q+"-inner-wrapper-has-prefix"]=_,r[q+"-inner-wrapper-"+tt]=tt,r[q+"-clear-wrapper"]=C,r[q+"-inner-wrapper-rtl"]=u,r));return St?B.createElement("div",{className:xt,style:ql(ql({},P),it?{height:b}:{})},B.createElement("span",{className:q+"-group"},Jb(q+"-group-addbefore",p,v),B.createElement("span",{className:vt,ref:H,onMouseDown:function(pt){pt.target.tagName!=="INPUT"&&H.current&&K_(H.current,pt.target)&&pt.preventDefault()},onClick:function(pt){H.current&&K_(H.current,pt.target)&&L.current&&L.current.focus()}},Jb(q+"-group-prefix",_),yt,Jb(q+"-group-suffix",nt)),Jb(q+"-group-addafter",f,y))):C?B.createElement("span",{className:zt(c,vt),style:ql(ql({},P),it?{height:b}:{}),onMouseDown:l_t,onClick:function(){L.current&&L.current.focus()}},yt):yt}var Tc=B.forwardRef(u_t);Tc.displayName="Input";Tc.Search=mK;Tc.TextArea=bK;Tc.Password=xK;Tc.Group=AK;var h_t=function(n){var t=n.getContainer,e=n.children,i=V.useRef(),r=lK();return(r||i.current===null)&&!bp&&(i.current=t()),V.useEffect(function(){return function(){var s=i.current;s&&s.parentNode&&(s.parentNode.removeChild(s),i.current=null)}},[]),i.current?hu.createPortal(e,i.current):null},Mf=function(){return Mf=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Mf.apply(this,arguments)},Pf=0,lA=function(n,t){var e=t.position,i=n.getBoundingClientRect(),r=i.width,s=i.height,a=i.left,o=i.right,l=i.top,u=i.bottom,h=t.boundaryDistance||{},c="left"in h&&h.left||Pf,d="top"in h&&h.top||Pf,p,f,g,_;return["bottom","bl","br"].indexOf(e)>-1?(g=l,_=u):(g=l-d,_=u-d),["right","rt","rb"].indexOf(e)>-1?(p=a,f=o):(p=a-c,f=o-c),{width:r,height:s,left:p,right:f,top:g,bottom:_}};function c_t(n,t,e,i){if(!e||!n||bp)return{left:0,width:0,height:0,top:0};var r=function(g){return document.documentElement[g]||document.body[g]},s=e===document.body?r("scrollTop"):e.scrollTop,a=e===document.body?r("scrollLeft"):e.scrollLeft,o=t.left,l=t.top,u=t.width,h=t.height,c=e===document.body?0:lA(e,i).left,d=e===document.body?0:lA(e,i).top,p=l+s-d,f=o+a-c;return{left:f,top:p,width:u,height:h}}var Ea=function(n,t,e){return e<n?n:e>t?t:e},d_t=function(n,t){var e=0,i=0,r={};t?r=Mf({left:12,right:12,top:12,bottom:12},n):r=Mf({},n);for(var s in r)if(ym(r[s])){var a=0;["top","bottom"].indexOf(s)>-1?(a=1,e=r[s][0]):i=r[s][1],r[s]=r[s][a]}return Mf(Mf({},r),{horizontalOffset:e,verticalOffset:i})},p_t=function(n,t,e){var i=e.boundaryDistance,r=e.position;return t?{left:t.clientX,top:t.clientY,width:0,height:0,right:t.clientX,bottom:t.clientY}:lA(n,{boundaryDistance:i,position:r})},f_t=function(n){var t=n.offsetWidth,e=n.offsetHeight;return{width:t,height:e}},g_t=function(n){var t,e,i=n||{},r="left"in i?i.left:"right"in i?i.right:Pf,s="top"in i?i.top:"bottom"in i?i.bottom:Pf,a=(((t=document.documentElement)===null||t===void 0?void 0:t.clientHeight)||window.innerHeight)-(s||Pf),o=(((e=document.documentElement)===null||e===void 0?void 0:e.clientWidth)||window.innerWidth)-(r||Pf);return{windowHeight:a,windowWidth:o}};const m_t=function(n,t,e,i,r){var s=n.autoAlignPopupWidth,a=n.autoAlignPopupMinWidth,o=n.alignPoint,l=n.style;if(!e||!t||!i)return{};var u={},h=!n.alignPoint&&n.boundaryDistance||{},c=p_t(e,o&&r,{boundaryDistance:h,position:n.position}),d=c_t(e,c,i,{boundaryDistance:h,position:n.position}),p=d.left,f=d.top,g=d.width,_=d.height,v=d_t(n.popupAlign,n.showArrow),y=v.left||0,b=v.right||0,S=v.top||0,A=v.bottom||0;s&&(l==null?void 0:l.width)===void 0&&(t.style.width=e.offsetWidth+"px"),a&&(t.style.minWidth=e.offsetWidth+"px");var w=f_t(t),C=n.position,k={},M=function(j){if(n.autoFitPosition){var G=g_t(h),U=G.windowHeight,$=G.windowWidth,q=!1,tt={left:p-c.left,top:f-c.top},it=u.top,nt=it===void 0?0:it,K=u.left,J=K===void 0?0:K;if((j==="top"||j==="bottom")&&(tt.left>J&&c.right>12?(u.left=Math.max(tt.left,p-w.width),u.left=Math.max(u.left,p-w.width+24)):J-tt.left+w.width>$&&$-c.left>12&&(u.left=Math.max(tt.left,tt.left+$-w.width),u.left=Math.max(u.left,p-w.width+24))),(j==="left"||j==="right")&&(tt.top>nt&&c.bottom>12?(u.top=tt.top,u.top=Math.max(u.top,f-w.height+c.height/2)):nt-tt.top+w.height>U&&U-c.top>12&&(u.top=Math.max(tt.top,tt.top+U-w.height),u.top=Math.max(u.top,f-w.height+c.height/2))),j==="top"&&tt.top>nt&&(c.top<U-c.bottom?(u.top=Math.min(f+_+(S||0),tt.top+U-w.height),q=!0):u.top=tt.top),j==="bottom"&&nt-tt.top+w.height>U&&(U-c.bottom<c.top?(u.top=Math.max(f-w.height-(A||0),tt.top),q=!0):u.top=tt.top+U-w.height),j==="left"&&tt.left>J&&(c.left<$-c.right?(u.left=Math.min(g+p+b,tt.left+$-w.width),q=!0):u.left=tt.left),j==="right"&&J-tt.left+w.width>$&&($-c.right<c.left?(u.left=Math.max(p-w.width-y,tt.left),q=!0):u.left=tt.left+$-w.width),u.left<0)u.left=0;else{var Q=i.scrollWidth-w.width;u.left=Math.min(Q,u.left)}return q}},P=v.horizontalOffset||0,E=v.verticalOffset||0;switch(n.position){case"top":{u.top=f-w.height-S,u.left=p+g/2-w.width/2,M("top")&&(C="bottom"),u.left+=P;var I=p-Number(u.left)+g/2;k.left=Ea(12,w.width-12,I);break}case"tl":u.top=f-w.height-S,u.left=p,M("top")&&(C="bl"),u.left+=P;var D=p-Number(u.left)+Math.min(g/2,50);k.left=Ea(12,w.width-12,D);break;case"tr":u.top=-t.clientHeight+f-S,u.left=p+g-w.width,M("top")&&(C="br"),u.left+=P,D=p-Number(u.left)+Math.max(g/2,g-50),k.left=Ea(12,w.width-12,D);break;case"bottom":{u.top=_+f+A,u.left=p+g/2-w.width/2,M("bottom")&&(C="top"),u.left+=P;var N=p-Number(u.left)+g/2;k.left=Ea(12,w.width-12,N);break}case"bl":u.top=_+f+A,u.left=p,M("bottom")&&(C="tl"),u.left+=P,D=p-Number(u.left)+Math.min(g/2,50),k.left=Ea(12,w.width-12,D);break;case"br":u.top=_+f+A,u.left=p+g-w.width,M("bottom")&&(C="tr"),u.left+=P,D=p-Number(u.left)+Math.max(g/2,g-50),k.left=Ea(12,w.width-12,D);break;case"left":{u.top=f+_/2-w.height/2,u.left=p-w.width-y,M("left")&&(C="right"),u.top+=E;var O=f-Number(u.top)+_/2;k.top=Ea(12,w.height-12,O);break}case"lt":u.top=f,u.left=p-w.width-y,M("left")&&(C="rt"),u.top+=E;var L=f-Number(u.top)+Math.min(_/2,50);k.top=Ea(12,w.height-12,L);break;case"lb":u.top=f+_-w.height,u.left=p-w.width-y,M("left")&&(C="rb"),u.top+=E,L=f-Number(u.top)+Math.max(_/2,_-50),k.top=Ea(12,w.height-12,L);break;case"right":{u.top=f+_/2-w.height/2,u.left=g+p+b,M("right")&&(C="left"),u.top+=E;var H=f-Number(u.top)+_/2;k.top=Ea(12,w.height-12,H);break}case"rt":u.top=f,u.left=g+p+b,M("right")&&(C="lt"),u.top+=E,L=f-Number(u.top)+Math.min(_/2,50),k.top=Ea(12,w.height-12,L);break;case"rb":u.top=f+_-w.height,u.left=g+p+b,M("right")&&(C="lb"),u.top+=E,L=f-Number(u.top)+Math.max(_/2,_-50),k.top=Ea(12,w.height-12,L);break}return{style:u,arrowStyle:k,realPosition:C}};function v_t(n,t,e,i){var r=t||{},s=e||{},a=n||{},o=i?new Set(i):new Set(Object.keys(a).concat(Object.keys(r)).concat(Object.keys(s))),l={};return o.forEach(function(u){a[u]!==void 0?l[u]=a[u]:u in s?l[u]=s[u]:u in r&&(l[u]=r[u])}),l}var __t=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Mn=function(){return Mn=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Mn.apply(this,arguments)};function yz(n,t){if(!n)return{};var e=lA(n,t),i=e.width,r=e.height,s=e.left,a=e.right;return{width:i,height:r,left:s,right:a}}var wK=["onClick","onMouseEnter","onMouseLeave","onMouseMove","onFocus","onBlur","onContextMenu","onKeyDown"];function y_t(n,t){var e={},i=Mn({},n);return t.forEach(function(r){n&&r in n&&(e[r]=n[r],delete i[r])}),{picked:e,omitted:i}}var b_t={blurToHide:!0,classNames:"fadeIn",trigger:"hover",position:"bottom",duration:200,unmountOnExit:!0,popupAlign:{},popupHoverStay:!0,clickOutsideToClose:!0,escToClose:!1,mouseLeaveToClose:!0,containerScrollToClose:!1,getDocument:function(){return window.document},autoFixPosition:!0,mouseEnterDelay:100,mouseLeaveDelay:100,autoFitPosition:!0},CK=function(n){__t(t,n);function t(e,i){var r=n.call(this,e,i)||this;r.delayTimer=null,r.updatePositionTimer=null,r.popupOpen=!1,r.mousedownToHide=!1,r.hasPopupMouseDown=!1,r.unmount=!1,r.isDidMount=!1,r.mouseLocation={clientX:0,clientY:0},r.observerContainer=null,r.scrollElements=null,r.resizeObserver=new fK(function(){r.handleUpdatePosition()}),r.childrenDom=null,r.childrenDomSize={},r.getMergedProps=function(o){var l=r.context.componentConfig,u=v_t(o&&$e(o)?o:r.props,b_t,l==null?void 0:l.Trigger,o&&ym(o)?o:void 0);return u},r.getRootElement=function(){var o,l;return r.childrenDom=Yk(((l=(o=r.props).getTargetDOMNode)===null||l===void 0?void 0:l.call(o))||r.rootElementRef,r),r.childrenDom},r.getPopupElement=function(){var o;return((o=r.triggerRef)===null||o===void 0?void 0:o.current)||null},r.offScrollListeners=function(){(r.scrollElements||[]).forEach(function(o){sr(o,"scroll",r.handleScroll)}),r.scrollElements=null},r.offWindowResize=function(){r.handleWindowResize=!1,sr(window,"resize",r.handleUpdatePosition)},r.offContainerResize=function(){r.resizeObserver&&r.observerContainer&&(r.resizeObserver.unobserve(r.observerContainer),r.observerContainer=null)},r.handleScroll=function(){var o=r.getMergedProps(["containerScrollToClose","updateOnScroll"]);o.containerScrollToClose?r.setPopupVisible(!1):o.updateOnScroll&&r.handleUpdatePosition()},r.onContainersScroll=function(o){var l,u;r.scrollElements||(r.scrollElements=s0t(r.childrenDom,(l=r.popupContainer)===null||l===void 0?void 0:l.parentNode),o.containerScrollToClose&&((u=r.popupContainer)===null||u===void 0?void 0:u.parentNode)===document.body&&r.scrollElements.indexOf(document.body)===-1&&oK(document.documentElement)&&r.scrollElements.push(window),r.scrollElements.forEach(function(h){rr(h,"scroll",r.handleScroll)}))},r.onContainerResize=function(){var o,l=(o=r.popupContainer)===null||o===void 0?void 0:o.parentNode;r.resizeObserver&&r.observerContainer!==l&&(r.offContainerResize(),l&&r.resizeObserver.observe(l),r.observerContainer=l)},r.handleUpdatePosition=rA(function(){r.updatePopupPosition()}),r.isClickTrigger=function(){var o=r.getMergedProps(["trigger"]).trigger;return[].concat(o).indexOf("click")>-1},r.isFocusTrigger=function(){var o=r.getMergedProps(["trigger"]).trigger;return[].concat(o).indexOf("focus")>-1},r.isHoverTrigger=function(){var o=r.getMergedProps(["trigger"]).trigger;return[].concat(o).indexOf("hover")>-1},r.isContextMenuTrigger=function(){var o=r.getMergedProps(["trigger"]).trigger;return[].concat(o).indexOf("contextMenu")>-1},r.isMouseLeaveToClose=function(){return r.isHoverTrigger()&&r.getMergedProps(["mouseLeaveToClose"]).mouseLeaveToClose},r.isPopupHoverHide=function(){return r.isHoverTrigger()&&!r.getMergedProps(["popupHoverStay"]).popupHoverStay},r.isClickToHide=function(){if(r.isClickTrigger()||r.isContextMenuTrigger()){var o=r.getMergedProps(["clickToClose"]).clickToClose,l=o===void 0?!0:o;return l}return r.isHoverTrigger()&&r.props.clickToClose},r.isBlurToHide=function(){return r.isFocusTrigger()&&r.getMergedProps(["blurToHide"]).blurToHide},r.clearTimer=function(){r.updatePositionTimer&&(r.updatePositionTimer.cancel?r.updatePositionTimer.cancel():(clearTimeout(r.updatePositionTimer),r.updatePositionTimer=null)),r.delayTimer&&(clearTimeout(r.delayTimer),r.delayTimer=null),r.mouseDownTimeout&&(clearTimeout(r.mouseDownTimeout),r.mouseDownTimeout=null)},r.offClickOutside=function(){if(r.handleClickOutside){var o=r.getMergedProps(["getDocument"]).getDocument,l=ir(o)&&o();sr(l,"mousedown",r.onClickOutside),r.handleClickOutside=!1}},r.getTransformOrigin=function(o){var l,u,h=r.getPopupElement();if(!h)return{};var c=r.getMergedProps(["showArrow","classNames"]),d=c.showArrow,p=c.classNames,f=d&&((l=r.arrowStyle)===null||l===void 0?void 0:l.top)||0,g=d&&((u=r.arrowStyle)===null||u===void 0?void 0:u.left)||0;f=f?f+"px":"",g=g?g+"px":"";var _={top:(g||"50%")+" 100% 0",tl:(g||"15px")+" 100% 0",tr:(g||h.clientWidth-15+"px")+" 100% 0",bottom:(g||"50%")+" 0 0",bl:(g||"15px")+" 0 0",br:(g||h.clientWidth-15+"px")+" 0 0",left:"100% "+(f||"50%")+" 0",lt:"100% "+(f||"15px")+" 0",lb:"100% "+(f||h.clientHeight-15+"px")+" 0",right:"0 "+(f||"50%")+" 0",rt:"0 "+(f||"15px")+" 0",rb:"0 "+(f||h.clientHeight-15+"px")+" 0"};if(p&&p.indexOf("zoom")>-1)return{transformOrigin:_[o]};if(p==="slideDynamicOrigin"){var v="0% 0%";return["top","tl","tr"].indexOf(o)>-1&&(v="100% 100%"),{transformOrigin:v}}return{}},r.getTransformTranslate=function(){if(r.getMergedProps(["classNames"]).classNames!=="slideDynamicOrigin")return"";switch(r.realPosition){case"bottom":case"bl":case"br":return"scaleY(0.9) translateY(-4px)";case"top":case"tl":case"tr":return"scaleY(0.9) translateY(4px)";default:return""}},r.getPopupStyle=function(){if(!(r.unmount||!r.popupContainer)){var o=r.popupContainer,l=r.triggerRef.current,u=r.getRootElement();if(!u.offsetParent&&!u.getClientRects().length)return r.state.popupStyle;var h=r.getMergedProps(),c=m_t(h,l,u,o,r.mouseLocation),d=c.style,p=c.arrowStyle,f=c.realPosition;return r.realPosition=f||h.position,r.arrowStyle=p||{},Mn(Mn({},d),r.getTransformOrigin(r.realPosition))}},r.showPopup=function(o){o===void 0&&(o=function(){});var l=r.getPopupStyle();r.setState({popupStyle:l},o)},r.update=rA(function(o){if(!(r.unmount||!r.state.popupVisible)){var l=r.getPopupStyle();r.setState({popupStyle:l},function(){o==null||o()})}}),r.getRootDOMNode=function(){return r.getRootElement()},r.updatePopupPosition=function(o,l){o===void 0&&(o=0);var u=r.state.popupVisible;if(u){if(o<4){r.updatePositionTimer=r.update(l);return}r.updatePositionTimer=setTimeout(function(){var h=r.getPopupStyle();r.setState({popupStyle:h},function(){l==null||l()})},o)}},r.setPopupVisible=function(o,l,u){l===void 0&&(l=0);var h=r.getMergedProps(["onVisibleChange","popupVisible"]),c=h.onVisibleChange,d=r.state.popupVisible;o!==d?r.delayToDo(l,function(){c&&c(o),"popupVisible"in h?u==null||u():o?r.setState({popupVisible:!0},function(){r.showPopup(u)}):r.setState({popupVisible:!1},function(){u==null||u()})}):u==null||u()},r.delayToDo=function(o,l){o?(r.clearDelayTimer(),r.delayTimer=setTimeout(function(){l(),r.clearDelayTimer()},o)):l()},r.onClickOutside=function(o){var l=r.getMergedProps(["onClickOutside","clickOutsideToClose"]),u=l.onClickOutside,h=l.clickOutsideToClose,c=r.getPopupElement(),d=r.getRootElement();!K_(c,o.target)&&!K_(d,o.target)&&!r.hasPopupMouseDown&&(u==null||u(),h&&!r.isBlurToHide()&&!r.isHoverTrigger()&&r.setPopupVisible(!1))},r.onKeyDown=function(o){var l=o.keyCode||o.which;r.triggerPropsEvent("onKeyDown",o),l===SR.code&&r.onPressEsc(o)},r.onPressEsc=function(o){var l=r.getMergedProps(["escToClose"]).escToClose;l&&o&&o.key===SR.key&&r.state.popupVisible&&r.setPopupVisible(!1)},r.onMouseEnter=function(o){var l=r.getMergedProps(["mouseEnterDelay"]).mouseEnterDelay;r.triggerPropsEvent("onMouseEnter",o),r.clearDelayTimer(),r.setPopupVisible(!0,l||0)},r.onMouseMove=function(o){r.triggerPropsEvent("onMouseMove",o),r.setMouseLocation(o),r.state.popupVisible&&r.update()},r.onMouseLeave=function(o){var l=r.getMergedProps(["mouseLeaveDelay"]).mouseLeaveDelay;r.clearDelayTimer(),r.triggerPropsEvent("onMouseLeave",o),r.isMouseLeaveToClose()&&r.state.popupVisible&&r.setPopupVisible(!1,l||0)},r.onPopupMouseEnter=function(){r.clearDelayTimer()},r.onPopupMouseLeave=function(o){r.onMouseLeave(o)},r.setMouseLocation=function(o){r.getMergedProps(["alignPoint"]).alignPoint&&(r.mouseLocation={clientX:o.clientX,clientY:o.clientY})},r.onContextMenu=function(o){o.preventDefault(),r.triggerPropsEvent("onContextMenu",o),r.setMouseLocation(o),r.state.popupVisible?r.getMergedProps(["alignPoint"]).alignPoint&&r.update():r.setPopupVisible(!0,0)},r.clickToHidePopup=function(o){var l=r.state.popupVisible;l&&(r.mousedownToHide=!0),r.triggerPropsEvent("onClick",o),r.isClickToHide()&&l&&r.setPopupVisible(!l,0)},r.onClick=function(o){var l=r.state.popupVisible;l&&(r.mousedownToHide=!0),r.triggerPropsEvent("onClick",o),r.setMouseLocation(o),!(!r.isClickToHide()&&l)&&r.setPopupVisible(!l,0)},r.onFocus=function(o){var l=r.getMergedProps(["focusDelay"]).focusDelay,u=function(){r.triggerPropsEvent("onFocus",o)};r.clearDelayTimer(),r.mousedownToHide||(r.state.popupVisible?u==null||u():r.setPopupVisible(!0,l||0,u)),r.mousedownToHide=!1},r.onBlur=function(o){r.setPopupVisible(!1,200,function(){return r.triggerPropsEvent("onBlur",o)})},r.onResize=function(){r.getMergedProps(["autoFixPosition"]).autoFixPosition&&r.state.popupVisible&&r.updatePopupPosition()},r.onPopupMouseDown=function(){r.hasPopupMouseDown=!0,clearTimeout(r.mouseDownTimeout),r.mouseDownTimeout=setTimeout(function(){r.hasPopupMouseDown=!1},0)},r.getChild=function(){var o,l=r.props.children,u=l,h=u&&typeof u!="string"&&u.type,c=l;if(["string","number"].indexOf(typeof l)>-1||B.Children.count(l)>1)c=B.createElement("span",null,l);else if(u&&h&&(h.__BYTE_BUTTON===!0||h.__BYTE_CHECKBOX===!0||h.__BYTE_SWITCH===!0||h.__BYTE_RADIO===!0||h==="button")&&u.props.disabled){var d=y_t(u.props.style,["position","left","right","top","bottom","float","display","zIndex"]),p=d.picked,f=d.omitted;c=B.createElement("span",{className:(o=u.props)===null||o===void 0?void 0:o.className,style:Mn(Mn({display:"inline-block"},p),{cursor:"not-allowed"})},B.cloneElement(u,{style:Mn(Mn({},f),{pointerEvents:"none"}),className:void 0}))}return c||B.createElement("span",null)},r.appendToContainer=function(o){if(pa(r.rafId),r.isDidMount){var l=r.context.getPopupContainer,u=r.getMergedProps(["getPopupContainer"]).getPopupContainer,h=u||l,c=r.getRootElement(),d=h(c);if(d){d.appendChild(o);return}}r.rafId=Ao(function(){r.appendToContainer(o)})},r.getContainer=function(){var o=document.createElement("div");return o.style.width="100%",o.style.position="absolute",o.style.top="0",o.style.left="0",r.popupContainer=o,r.appendToContainer(o),o},r.triggerPropsEvent=function(o,l){var u=r.getChild(),h=u&&u.props&&u.props[o],c=r.getMergedProps([o])[o];ir(h)&&h(l),ir(c)&&c(l)},r.triggerOriginEvent=function(o){var l=r.getChild(),u=l&&l.props&&l.props[o],h=r.getMergedProps([o])[o];return ir(h)&&ir(u)?function(c){u(c),h(c)}:u||h};var s=r.getMergedProps(e),a="popupVisible"in s?s.popupVisible:s.defaultPopupVisible;return r.popupOpen=!!a,r.triggerRef=V.createRef(),r.state={popupVisible:!!a,popupStyle:{}},r}return t.getDerivedStateFromProps=function(e,i){return"popupVisible"in e&&e.popupVisible!==i.popupVisible?{popupVisible:e.popupVisible}:null},t.prototype.componentDidMount=function(){this.componentDidUpdate(this.getMergedProps()),this.isDidMount=!0,this.unmount=!1,this.childrenDom=this.getRootElement(),this.state.popupVisible&&(this.childrenDomSize=yz(this.childrenDom,{boundaryDistance:this.props.alignPoint?void 0:this.props.boundaryDistance,position:this.props.position}))},t.prototype.componentDidUpdate=function(e){var i=this.getMergedProps(e),r=this.getMergedProps();!i.popupVisible&&r.popupVisible&&this.update();var s=this.state.popupVisible;this.popupOpen=s;var a=r.getDocument;if(!s){this.offClickOutside(),this.offContainerResize(),this.offWindowResize(),this.offScrollListeners();return}var o=yz(this.childrenDom,{boundaryDistance:this.props.alignPoint?{}:this.props.boundaryDistance,position:this.props.position});if(JSON.stringify(o)!==JSON.stringify(this.childrenDomSize)&&(this.updatePopupPosition(),this.childrenDomSize=o),this.onContainerResize(),(r.updateOnScroll||r.containerScrollToClose)&&this.onContainersScroll(r),this.handleWindowResize||(rr(window,"resize",this.handleUpdatePosition),this.handleWindowResize=!0),!this.handleClickOutside){var l=ir(a)&&a();l&&(rr(l,"mousedown",this.onClickOutside,{capture:$e(r.clickOutsideToClose)?r.clickOutsideToClose.capture:!1}),this.handleClickOutside=!0)}},t.prototype.componentWillUnmount=function(){this.unmount=!0,this.offClickOutside(),this.clearTimer(),this.offWindowResize(),this.offScrollListeners(),this.offContainerResize(),pa(this.rafId)},t.prototype.clearDelayTimer=function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)},t.prototype.render=function(){var e,i,r,s=this,a,o=this.getMergedProps(),l=o.children,u=o.style,h=o.className,c=o.arrowProps,d=o.disabled,p=o.popup,f=o.classNames,g=o.duration,_=o.unmountOnExit,v=o.alignPoint,y=o.autoAlignPopupWidth,b=o.position,S=o.childrenPrefix,A=o.showArrow,w=o.popupStyle,C=o.__onExit,k=o.__onExited,M=l||l===0,P=this.context,E=P.getPrefixCls,I=P.zIndex,D=P.rtl,N=this.state,O=N.popupVisible,L=N.popupStyle;if(!p)return null;var H={},j={onMouseDown:this.onPopupMouseDown};this.isHoverTrigger()&&!d?(H.onMouseEnter=this.onMouseEnter,H.onMouseLeave=this.onMouseLeave,this.isClickToHide()&&(H.onClick=this.clickToHidePopup),v&&(H.onMouseMove=this.onMouseMove),this.isPopupHoverHide()||(j.onMouseEnter=this.onPopupMouseEnter,j.onMouseLeave=this.onPopupMouseLeave)):(H.onMouseEnter=this.triggerOriginEvent("onMouseEnter"),H.onMouseLeave=this.triggerOriginEvent("onMouseLeave")),this.isContextMenuTrigger()&&!d?(H.onContextMenu=this.onContextMenu,H.onClick=this.clickToHidePopup):H.onContextMenu=this.triggerOriginEvent("onContextMenu"),this.isClickTrigger()&&!d?H.onClick=this.onClick:H.onClick=H.onClick||this.triggerOriginEvent("onClick"),this.isFocusTrigger()&&!d?(H.onFocus=this.onFocus,this.isBlurToHide()&&(H.onBlur=this.onBlur)):(H.onFocus=this.triggerOriginEvent("onFocus"),H.onBlur=this.triggerOriginEvent("onBlur")),d?H.onKeyDown=this.triggerOriginEvent("onKeyDown"):H.onKeyDown=this.onKeyDown;var G=this.getChild(),U=B.Children.only(p());G.props.className&&(H.className=G.props.className),S&&O&&(H.className=H.className?H.className+" "+S+"-open":S+"-open"),this.isFocusTrigger()&&(H.tabIndex=d?-1:0);var $=E("trigger"),q=zt($,S,$+"-position-"+b,(e={},e[$+"-rtl"]=D,e),h),tt=M&&B.createElement(Tu,{onResize:this.onResize,getTargetDOMNode:function(){return s.rootElementRef}},B.cloneElement(G,Mn(Mn({},H),{ref:IB(G)?function(K){s.rootElementRef=K,DB(G,K)}:void 0}))),it=B.createElement(Gk,{in:!!O,timeout:g,classNames:f,unmountOnExit:_,appear:!0,mountOnEnter:!0,onEnter:function(){s.triggerRefDestoried=!1;var K=s.getPopupElement();K&&(K.style.display="initial",K.style.pointerEvents="none",f==="slideDynamicOrigin"&&(K.style.transform=s.getTransformTranslate()))},onEntering:function(){var K=s.getPopupElement();K&&f==="slideDynamicOrigin"&&(K.style.transform="")},onEntered:function(){var K=s.getPopupElement();K&&(K.style.pointerEvents="auto",s.forceUpdate())},onExit:function(){var K=s.getPopupElement();K&&(K.style.pointerEvents="none",C==null||C(K))},onExited:function(){var K=s.getPopupElement();K&&(K.style.display="none",_&&(s.triggerRefDestoried=!0),s.setState({popupStyle:{}}),k==null||k(K))},nodeRef:this.triggerRef},B.createElement(Tu,{onResize:function(){var K=s.triggerRef.current;if(K){var J=s.getPopupStyle(),Q=s.props.style||{};K.style.top=String(Q.top||J.top+"px"),K.style.left=String(Q.left||J.left+"px")}s.onResize()},getTargetDOMNode:function(){return s.getPopupElement()}},B.createElement("span",Mn({ref:this.triggerRef,"trigger-placement":this.realPosition,style:Mn(Mn(Mn({width:y&&(u==null?void 0:u.width)===void 0?(a=this.childrenDomSize)===null||a===void 0?void 0:a.width:""},L),{position:"absolute",zIndex:I||""}),u)},j,{className:q},h1(this.props)),B.createElement(U.type,Mn({ref:U.ref},U.props,{style:Mn(Mn({},U.props.style),w)})),(A||c)&&B.createElement("div",{className:zt($+"-arrow-container",(i={},i[S+"-arrow-container"]=S,i))},B.createElement("div",Mn({},c,{className:zt($+"-arrow",(r={},r[S+"-arrow"]=S,r),c==null?void 0:c.className),style:Mn(Mn({},this.arrowStyle),c==null?void 0:c.style)})))))),nt=O||this.getPopupElement()&&!this.triggerRefDestoried?B.createElement(h_t,{getContainer:this.getContainer},it):null;return M?B.createElement(B.Fragment,null,tt,nt):nt},t.displayName="Trigger",t.contextType=pe,t}(V.PureComponent);function bz(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function xz(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?bz(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):bz(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function x_t(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=xz(xz({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-down")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{d:"M39.6 17.443 24.043 33 8.487 17.443"}))}var d1=B.forwardRef(x_t);d1.defaultProps={isIcon:!0};d1.displayName="IconDown";var Zl=function(){return Zl=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Zl.apply(this,arguments)},S_t=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},A_t={position:"top",trigger:"hover",escToClose:!1,unmountOnExit:!0,blurToHide:!0,popupHoverStay:!0},w_t={enter:300,exit:100},C_t={left:12,right:12,top:12,bottom:12};function k_t(n,t){var e=V.useContext(pe),i=e.getPrefixCls,r=e.componentConfig,s=nn(n,A_t,r==null?void 0:r.Tooltip),a=s.style,o=s.className,l=s.children,u=s.trigger,h=s.escToClose,c=s.defaultPopupVisible,d=s.position,p=s.unmountOnExit,f=s.popupVisible,g=s.prefixCls,_=s.blurToHide,v=s.popupHoverStay,y=s.disabled,b=s.onVisibleChange,S=s.triggerProps,A=s.childrenPrefix,w=s.getPopupContainer,C=s.content,k=s.mini,M=s.color,P=S_t(s,["style","className","children","trigger","escToClose","defaultPopupVisible","position","unmountOnExit","popupVisible","prefixCls","blurToHide","popupHoverStay","disabled","onVisibleChange","triggerProps","childrenPrefix","getPopupContainer","content","mini","color"]),E=V.useRef(),I=function(L,H){L===void 0&&(L=0),E.current&&E.current.updatePopupPosition(L,H)};V.useImperativeHandle(t,function(){return{updatePopupPosition:I,getRootDOMNode:function(){var L,H;return(H=(L=E.current)===null||L===void 0?void 0:L.getRootDOMNode)===null||H===void 0?void 0:H.call(L)}}},[]);var D=g||i("tooltip"),N=Zl(Zl(Zl(Zl({},zB(P,wK)),h1(P)),S),{className:zt(o,S==null?void 0:S.className)}),O=ir(C)?C():C;return"popupVisible"in s?N.popupVisible=f:G_(O,!0)&&(N.popupVisible=!1),(N.showArrow!==!1||N.arrowProps)&&(N.arrowProps=N.arrowProps||{},M&&(N.arrowProps.style=Zl({backgroundColor:M},N.arrowProps.style))),B.createElement(CK,Zl({style:Zl({maxWidth:350},a),ref:E,classNames:"zoomInFadeOut",duration:w_t,popup:function(){var L;return B.createElement("div",{style:{backgroundColor:M},className:zt(D+"-content",D+"-content-"+d,(L={},L[D+"-mini"]=k,L)),role:"tooltip"},B.createElement("div",{className:D+"-content-inner"},O))},position:d,disabled:y,trigger:u,escToClose:h,showArrow:!0,popupAlign:C_t,mouseEnterDelay:200,mouseLeaveDelay:200,unmountOnExit:p,popupHoverStay:v,blurToHide:_,childrenPrefix:A||D,getPopupContainer:w,onVisibleChange:b,defaultPopupVisible:c},N),l)}var pc=V.forwardRef(k_t);pc.displayName="Tooltip";var uA=function(){return uA=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},uA.apply(this,arguments)},T_t=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},M_t={position:"top",trigger:"hover",unmountOnExit:!0};function P_t(n,t){var e,i=V.useContext(pe),r=i.getPrefixCls,s=i.componentConfig,a=i.rtl,o=nn(n,M_t,s==null?void 0:s.Popover),l=o.style,u=o.className,h=o.children,c=o.position,d=o.getPopupContainer,p=o.trigger,f=o.defaultPopupVisible,g=o.popupVisible,_=o.triggerProps,v=o.unmountOnExit,y=o.onVisibleChange,b=o.content,S=o.title,A=T_t(o,["style","className","children","position","getPopupContainer","trigger","defaultPopupVisible","popupVisible","triggerProps","unmountOnExit","onVisibleChange","content","title"]),w=r("popover"),C=ir(S)?S():S,k=ir(b)?b():b,M=G_(C,!0)&&G_(k,!0)?null:B.createElement("div",{className:zt(w+"-inner",(e={},e[w+"-inner-rtl"]=a,e))},C?B.createElement("div",{className:w+"-title"},C):null,B.createElement("div",{className:w+"-inner-content"},k));return B.createElement(pc,uA({},A,{ref:t,style:uA({maxWidth:350},l),className:u,prefixCls:w,getPopupContainer:d,position:c,trigger:p,content:M,popupHoverStay:!0,unmountOnExit:v,triggerProps:_,defaultPopupVisible:f,onVisibleChange:y||(_?_.onVisibleChange:void 0),childrenPrefix:w},"popupVisible"in o?{popupVisible:g}:{}),typeof h=="string"?B.createElement("span",null,h):h)}var kK=V.forwardRef(P_t);kK.displayName="Popover";var E_t=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s};function O_t(){var n=E_t(V.useReducer(function(e){return e+1},0),2),t=n[1];return t}var R_t=Array.isArray,WB=R_t,I_t=WB,L_t=Kk,D_t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,B_t=/^\w*$/;function F_t(n,t){if(I_t(n))return!1;var e=typeof n;return e=="number"||e=="symbol"||e=="boolean"||n==null||L_t(n)?!0:B_t.test(n)||!D_t.test(n)||t!=null&&n in Object(t)}var j_t=F_t,N_t=nK,z_t=u1,H_t="[object AsyncFunction]",V_t="[object Function]",W_t="[object GeneratorFunction]",$_t="[object Proxy]";function G_t(n){if(!z_t(n))return!1;var t=N_t(n);return t==V_t||t==W_t||t==H_t||t==$_t}var U_t=G_t,Y_t=Xk,X_t=Y_t["__core-js_shared__"],K_t=X_t,RP=K_t,Sz=function(){var n=/[^.]+$/.exec(RP&&RP.keys&&RP.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function q_t(n){return!!Sz&&Sz in n}var Z_t=q_t,J_t=Function.prototype,Q_t=J_t.toString;function tyt(n){if(n!=null){try{return Q_t.call(n)}catch{}try{return n+""}catch{}}return""}var eyt=tyt,iyt=U_t,nyt=Z_t,ryt=u1,syt=eyt,ayt=/[\\^$.*+?()[\]{}|]/g,oyt=/^\[object .+?Constructor\]$/,lyt=Function.prototype,uyt=Object.prototype,hyt=lyt.toString,cyt=uyt.hasOwnProperty,dyt=RegExp("^"+hyt.call(cyt).replace(ayt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function pyt(n){if(!ryt(n)||nyt(n))return!1;var t=iyt(n)?dyt:oyt;return t.test(syt(n))}var fyt=pyt;function gyt(n,t){return n==null?void 0:n[t]}var myt=gyt,vyt=fyt,_yt=myt;function yyt(n,t){var e=_yt(n,t);return vyt(e)?e:void 0}var TK=yyt,byt=TK,xyt=byt(Object,"create"),Zk=xyt,Az=Zk;function Syt(){this.__data__=Az?Az(null):{},this.size=0}var Ayt=Syt;function wyt(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}var Cyt=wyt,kyt=Zk,Tyt="__lodash_hash_undefined__",Myt=Object.prototype,Pyt=Myt.hasOwnProperty;function Eyt(n){var t=this.__data__;if(kyt){var e=t[n];return e===Tyt?void 0:e}return Pyt.call(t,n)?t[n]:void 0}var Oyt=Eyt,Ryt=Zk,Iyt=Object.prototype,Lyt=Iyt.hasOwnProperty;function Dyt(n){var t=this.__data__;return Ryt?t[n]!==void 0:Lyt.call(t,n)}var Byt=Dyt,Fyt=Zk,jyt="__lodash_hash_undefined__";function Nyt(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=Fyt&&t===void 0?jyt:t,this}var zyt=Nyt,Hyt=Ayt,Vyt=Cyt,Wyt=Oyt,$yt=Byt,Gyt=zyt;function Sm(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}Sm.prototype.clear=Hyt;Sm.prototype.delete=Vyt;Sm.prototype.get=Wyt;Sm.prototype.has=$yt;Sm.prototype.set=Gyt;var Uyt=Sm;function Yyt(){this.__data__=[],this.size=0}var Xyt=Yyt;function Kyt(n,t){return n===t||n!==n&&t!==t}var qyt=Kyt,Zyt=qyt;function Jyt(n,t){for(var e=n.length;e--;)if(Zyt(n[e][0],t))return e;return-1}var Jk=Jyt,Qyt=Jk,t1t=Array.prototype,e1t=t1t.splice;function i1t(n){var t=this.__data__,e=Qyt(t,n);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():e1t.call(t,e,1),--this.size,!0}var n1t=i1t,r1t=Jk;function s1t(n){var t=this.__data__,e=r1t(t,n);return e<0?void 0:t[e][1]}var a1t=s1t,o1t=Jk;function l1t(n){return o1t(this.__data__,n)>-1}var u1t=l1t,h1t=Jk;function c1t(n,t){var e=this.__data__,i=h1t(e,n);return i<0?(++this.size,e.push([n,t])):e[i][1]=t,this}var d1t=c1t,p1t=Xyt,f1t=n1t,g1t=a1t,m1t=u1t,v1t=d1t;function Am(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}Am.prototype.clear=p1t;Am.prototype.delete=f1t;Am.prototype.get=g1t;Am.prototype.has=m1t;Am.prototype.set=v1t;var _1t=Am,y1t=TK,b1t=Xk,x1t=y1t(b1t,"Map"),S1t=x1t,wz=Uyt,A1t=_1t,w1t=S1t;function C1t(){this.size=0,this.__data__={hash:new wz,map:new(w1t||A1t),string:new wz}}var k1t=C1t;function T1t(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}var M1t=T1t,P1t=M1t;function E1t(n,t){var e=n.__data__;return P1t(t)?e[typeof t=="string"?"string":"hash"]:e.map}var Qk=E1t,O1t=Qk;function R1t(n){var t=O1t(this,n).delete(n);return this.size-=t?1:0,t}var I1t=R1t,L1t=Qk;function D1t(n){return L1t(this,n).get(n)}var B1t=D1t,F1t=Qk;function j1t(n){return F1t(this,n).has(n)}var N1t=j1t,z1t=Qk;function H1t(n,t){var e=z1t(this,n),i=e.size;return e.set(n,t),this.size+=e.size==i?0:1,this}var V1t=H1t,W1t=k1t,$1t=I1t,G1t=B1t,U1t=N1t,Y1t=V1t;function wm(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}wm.prototype.clear=W1t;wm.prototype.delete=$1t;wm.prototype.get=G1t;wm.prototype.has=U1t;wm.prototype.set=Y1t;var X1t=wm,MK=X1t,K1t="Expected a function";function $B(n,t){if(typeof n!="function"||t!=null&&typeof t!="function")throw new TypeError(K1t);var e=function(){var i=arguments,r=t?t.apply(this,i):i[0],s=e.cache;if(s.has(r))return s.get(r);var a=n.apply(this,i);return e.cache=s.set(r,a)||s,a};return e.cache=new($B.Cache||MK),e}$B.Cache=MK;var q1t=$B,Z1t=q1t,J1t=500;function Q1t(n){var t=Z1t(n,function(i){return e.size===J1t&&e.clear(),i}),e=t.cache;return t}var tbt=Q1t,ebt=tbt,ibt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nbt=/\\(\\)?/g,rbt=ebt(function(n){var t=[];return n.charCodeAt(0)===46&&t.push(""),n.replace(ibt,function(e,i,r,s){t.push(r?s.replace(nbt,"$1"):i||e)}),t}),sbt=rbt;function abt(n,t){for(var e=-1,i=n==null?0:n.length,r=Array(i);++e<i;)r[e]=t(n[e],e,n);return r}var obt=abt,Cz=NB,lbt=obt,ubt=WB,hbt=Kk,cbt=1/0,kz=Cz?Cz.prototype:void 0,Tz=kz?kz.toString:void 0;function PK(n){if(typeof n=="string")return n;if(ubt(n))return lbt(n,PK)+"";if(hbt(n))return Tz?Tz.call(n):"";var t=n+"";return t=="0"&&1/n==-cbt?"-0":t}var dbt=PK,pbt=dbt;function fbt(n){return n==null?"":pbt(n)}var gbt=fbt,mbt=WB,vbt=j_t,_bt=sbt,ybt=gbt;function bbt(n,t){return mbt(n)?n:vbt(n,t)?[n]:_bt(ybt(n))}var xbt=bbt,Sbt=Kk,Abt=1/0;function wbt(n){if(typeof n=="string"||Sbt(n))return n;var t=n+"";return t=="0"&&1/n==-Abt?"-0":t}var Cbt=wbt,kbt=xbt,Tbt=Cbt;function Mbt(n,t){t=kbt(t,n);for(var e=0,i=t.length;n!=null&&e<i;)n=n[Tbt(t[e++])];return e&&e==i?n:void 0}var Pbt=Mbt,Ebt=Pbt;function Obt(n,t,e){var i=n==null?void 0:Ebt(n,t);return i===void 0?e:i}var Rbt=Obt;const q_=Du(Rbt);var Ibt=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},mv={};function GB(n){var t=Ibt(V.useState(),2),e=t[0],i=t[1];return V.useEffect(function(){mv[n]=n in mv?mv[n]:0,i(mv[n]),mv[n]+=1},[]),typeof e=="number"?""+n+e:void 0}function Mz(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function Pz(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Mz(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Mz(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Lbt(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=Pz(Pz({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-more")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{fill:"currentColor",stroke:"none",d:"M38 25v-2h2v2h-2ZM23 25v-2h2v2h-2ZM8 25v-2h2v2H8Z"}),B.createElement("path",{d:"M38 25v-2h2v2h-2ZM23 25v-2h2v2h-2ZM8 25v-2h2v2H8Z"}))}var t2=B.forwardRef(Lbt);t2.defaultProps={isIcon:!0};t2.displayName="IconMore";var Ef=function(){return Ef=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ef.apply(this,arguments)},Dbt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},Bbt=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},Fbt={position:"br",trigger:"hover",type:"default",icon:B.createElement(t2,null),unmountOnExit:!0};function jbt(n,t){var e,i=V.useContext(pe).componentConfig,r=nn(n,Fbt,i==null?void 0:i["Dropdown.Button"]),s=r.className,a=r.style,o=r.children,l=r.disabled,u=r.position,h=u===void 0?"br":u,c=r.type,d=c===void 0?"default":c,p=r.size,f=r.icon,g=f===void 0?B.createElement(t2,null):f,_=r.onClick,v=r.buttonProps,y=r.buttonsRender,b=Dbt(r,["className","style","children","disabled","position","type","size","icon","onClick","buttonProps","buttonsRender"]),S=B.createElement(jo,Ef({disabled:l,type:d,size:p,onClick:_},v),o),A=B.createElement(jo,{disabled:l,type:d,size:p,icon:g});y&&(e=Bbt(y([S,A]),2),S=e[0],A=e[1]);var w=l||!A||A.props&&A.props.loading;return B.createElement(jo.Group,Ef({className:s,style:a,ref:t},h1(r)),S,B.createElement(Cm,Ef({disabled:l,position:h},b,{triggerProps:Ef({disabled:w},b==null?void 0:b.triggerProps)}),A))}var EK=V.forwardRef(jbt);EK.displayName="DropdownButton";var g0=function(){return g0=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},g0.apply(this,arguments)},Nbt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},Ez=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},zbt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Hbt=function(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))},Vbt={position:"bl",trigger:"hover",unmountOnExit:!0},Wbt={left:4,right:4,top:4,bottom:4};function $bt(n,t){var e,i=V.useContext(pe),r=i.getPrefixCls,s=i.componentConfig,a=i.rtl,o=nn(n,Vbt,s==null?void 0:s.Dropdown),l=o.trigger,u=o.droplist,h=o.children,c=o.position,d=o.disabled,p=o.unmountOnExit,f=o.triggerProps,g=o.getPopupContainer,_=o.onVisibleChange,v=Nbt(o,["trigger","droplist","children","position","disabled","unmountOnExit","triggerProps","getPopupContainer","onVisibleChange"]),y=r("dropdown"),b=V.useRef(null),S=Ez(Ns(!1,{defaultValue:o.defaultPopupVisible,value:o.popupVisible}),2),A=S[0],w=S[1],C=function(){return B.Children.only(u||B.createElement("span",null))},k=function(E){w(E),_&&_(E),f&&f.onVisibleChange&&f.onVisibleChange(E)},M=function(E){E!==A&&k(E)},P=function(){var E,I,D,N=C();if(q_(N,"type.__ARCO_MENU__")||q_(N,"props.isMenu")){var O=!0;try{for(var L=zbt(B.Children.toArray(N.props.children)),H=L.next();!H.done;H=L.next()){var j=H.value;if(j!=null){O=!1;break}}}catch(G){E={error:G}}finally{try{H&&!H.done&&(I=L.return)&&I.call(L)}finally{if(E)throw E.error}}return B.cloneElement(N,{prefixCls:zt(y+"-menu",(D={},D[y+"-menu-hidden"]=O,D)),inDropdown:!0,selectable:!1,onClickMenuItem:function(){for(var G,U=[],$=0;$<arguments.length;$++)U[$]=arguments[$];var q=null,tt=C();tt.props.onClickMenuItem&&(q=(G=tt.props).onClickMenuItem.apply(G,Hbt([],Ez(U),!1)));var it=b.current&&b.current.getRootElement();it&&it.focus&&it.focus(),q instanceof Promise?q.finally(function(){return k(!1)}):q!==!1&&k(!1)}})}return N};return B.createElement(CK,g0({ref:function(E){return b.current=E},classNames:"slideDynamicOrigin",childrenPrefix:y,trigger:l,popup:P,mouseEnterDelay:400,mouseLeaveDelay:400,disabled:d,unmountOnExit:p,position:c,popupVisible:A,popupAlign:Wbt,getPopupContainer:g,alignPoint:l==="contextMenu"},zB(v,wK),h1(v),An(f,["onVisibleChange"]),{onVisibleChange:M}),B.isValidElement(h)?B.cloneElement(h,g0(g0({},typeof d=="boolean"?{disabled:d}:{}),{className:zt((e={},e[y+"-popup-visible"]=A,e[[y]+"-rtl"]=a,e),h.props.className)})):h)}var Gbt=B.forwardRef($bt),Cm=Gbt;Cm.displayName="Dropdown";Cm.Button=EK;var hA=function(){return hA=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},hA.apply(this,arguments)},Ubt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},Ybt=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s};function UB(n){var t,e,i=n.children,r=n.style,s=n.className,a=n.prefixCls,o=n.droplist,l=n.dropdownProps,u=n.href,h=n.onClick,c=n.tagName,d=c===void 0?"div":c,p=Ubt(n,["children","style","className","prefixCls","droplist","dropdownProps","href","onClick","tagName"]),f=Ybt(V.useState(!1),2),g=f[0],_=f[1],v=kc(u)?"a":d,y=B.createElement(v,hA({href:u,onClick:h,role:"listitem",style:r,className:zt(a+"-item",(t={},t[a+"-item-with-dropdown"]=o,t),s)},h1(p)),i,o&&B.createElement("span",{"aria-hidden":!0,className:zt(a+"-item-dropdown-icon",(e={},e[a+"-item-dropdown-icon-active"]=g,e))},B.createElement(d1,null)));return o?B.createElement(Cm,hA({droplist:o,onVisibleChange:function(b){_(b),l&&l.onVisibleChange&&l.onVisibleChange(b)}},An(l,["onVisibleChange"])),y):y}UB.displayName="BreadcrumbItem";var Mu=V.createContext({}),Xbt=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},Kbt=function(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))};function e2(n){var t=n.prefixCls,e=n.levelIndent,i=V.useContext(Mu).collapse,r=n.level-1;return!i&&r>0?B.createElement("span",null,Kbt([],Xbt(new Array(r)),!1).map(function(s,a){return B.createElement("span",{key:a,className:t+"-indent",style:{width:e}})})):null}var wo=function(){return wo=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},wo.apply(this,arguments)},qbt=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},Zbt=function(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))},OK=["popup","triggerProps","selectable"],RK=function(n){var t=[];return B.Children.forEach(n,function(e){var i,r=(i=e==null?void 0:e.type)===null||i===void 0?void 0:i.menuType;r==="MenuItem"||r==="SubMenu"?t.push(e):r==="MenuGroup"&&(t=t.concat(RK(e.props.children)))}),t},IK=function(n,t,e){t===void 0&&(t=[]),e===void 0&&(e={});var i=RK(n);return i.forEach(function(r,s){var a,o,l,u=r.key,h=r.type.menuType,c=Zbt([u],qbt(t),!1),d={keyPath:[],prev:((o=i[s-1])===null||o===void 0?void 0:o.key)||null,next:((l=i[s+1])===null||l===void 0?void 0:l.key)||null};if(s===0||s===i.length-1){var p=c[1],f=s===0?"firstChild":"lastChild";p&&(e[p]=wo(wo({},e[p]),(a={},a[f]=u,a)))}switch(h){case"SubMenu":d.keyPath=c,IK(r.props.children,c,e);break;case"MenuItem":d.keyPath=c,d.disabled=r.props.disabled;break}e[u]=wo(wo({},e[u]),d)}),e},i2=function(n,t){return B.Children.map(n,function(e,i){if(!e||!e.props)return e;var r=typeof e.type=="string",s=e.type&&e.type.menuType;if(!s&&e.props.children){var a=r?{}:t,o=i2(e.props.children,t);return B.cloneElement(e,wo(wo({},a),{_key:e.key,children:o.length===1?o[0]:o}))}return r?e:B.cloneElement(e,wo(wo(wo({},t),e.props),{_key:e.key||"$menu-"+i}))})};function LK(n,t){var e=!1;function i(r){!r||e||B.Children.forEach(r,function(s){if(s&&s.props&&s.type&&!e){var a=s.type.menuType,o=s.props.selectable;(a==="MenuItem"||a==="SubMenu"&&o)&&(e=t.indexOf(s.key)!==-1),!e&&s.props.children&&i(s.props.children)}})}return i(n),e}var Of=function(){return Of=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Of.apply(this,arguments)},Jbt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};function Qbt(n,t){var e,i=n._key,r=n.children,s=n.level,a=n.disabled,o=n.className,l=n.style,u=n.wrapper,h=u===void 0?"div":u,c=n.onClick,d=n.renderItemInTooltip,p=Jbt(n,["_key","children","level","disabled","className","style","wrapper","onClick","renderItemInTooltip"]),f=V.useContext(Mu),g=f.prefixCls,_=f.mode,v=f.collapse,y=f.inDropdown,b=f.levelIndent,S=f.selectedKeys,A=f.autoScrollIntoView,w=f.scrollConfig,C=f.tooltipProps,k=f.onClickMenuItem,M=V.useRef(null),P=lK(),E=_==="vertical"&&s>1,I=v&&!y&&s===1,D=S&&~S.indexOf(i);V.useEffect(function(){var L=D&&A;M.current&&L&&setTimeout(function(){M.current&&r0t(M.current,Of({behavior:"smooth",block:"start",scrollMode:"if-needed",boundary:document.body},w))},P?500:0)},[D,A]);var N=function(L){a||(k(i,L),c&&c(L))},O=B.createElement(h,Of({tabIndex:a?-1:0,role:"menuitem",ref:function(L){t=L,M.current=t},style:l,className:zt(g+"-item",(e={},e[g+"-disabled"]=a,e[g+"-selected"]=D,e[g+"-item-indented"]=E&&!v,e),o),onClick:N,onKeyDown:function(L){var H=L.keyCode||L.which;H===c1.code&&N(L)}},An(p,["key","_key"].concat(OK))),E&&!v?B.createElement(B.Fragment,null,B.createElement(e2,{prefixCls:g,levelIndent:b,level:s}),B.createElement("span",{className:g+"-item-inner",style:{display:"block"}},r)):r,D&&_==="horizontal"?B.createElement("div",{className:g+"-selected-label"}):null);return I?B.createElement(pc,Of({trigger:"hover",position:"right",content:typeof d=="function"?d():B.createElement("span",null,r),triggerProps:Of({className:g+"-item-tooltip"},(C==null?void 0:C.triggerProps)||{})},An(C,["triggerProps"])),O):O}var txt=V.forwardRef(Qbt),YB=txt;YB.displayName="MenuItem";YB.menuType="MenuItem";function ext(n,t){var e=n.children,i=n.title,r=n.level,s=n.className,a=n.style,o=V.useContext(Mu),l=o.prefixCls,u=o.levelIndent,h=r===1?r+1:r,c=i2(e,{level:h});return B.createElement("div",{ref:t,className:zt(l+"-group",s),style:a},B.createElement("div",{className:l+"-group-title"},B.createElement(e2,{level:r,prefixCls:l,levelIndent:u}),B.createElement("span",null,i)),c)}var ixt=V.forwardRef(ext),XB=ixt;XB.displayName="MenuItemGroup";XB.menuType="MenuGroup";var m0=function(){return m0=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},m0.apply(this,arguments)},Oz=function(n,t,e,i){function r(s){return s instanceof e?s:new e(function(a){a(s)})}return new(e||(e=Promise))(function(s,a){function o(h){try{u(i.next(h))}catch(c){a(c)}}function l(h){try{u(i.throw(h))}catch(c){a(c)}}function u(h){h.done?s(h.value):r(h.value).then(o,l)}u((i=i.apply(n,t||[])).next())})},Rz=function(n,t){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(u){return function(h){return l([u,h])}}function l(u){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,r&&(s=u[0]&2?r.return:u[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,u[1])).done)return s;switch(r=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,r=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){e.label=u[1];break}if(u[0]===6&&e.label<s[1]){e.label=s[1],s=u;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(u);break}s[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(n,e)}catch(h){u=[6,h],r=0}finally{i=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},nxt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},rxt=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},IP={height:0,visibility:"hidden"},sxt=function(n){var t,e=n._key,i=n.children,r=n.style,s=n.className,a=n.title,o=n.level,l=n.forwardedRef,u=n.selectable,h=nxt(n,["_key","children","style","className","title","level","forwardedRef","selectable"]),c=V.useContext(Mu),d=c.id,p=c.prefixCls,f=c.levelIndent,g=c.openKeys,_=g===void 0?[]:g,v=c.selectedKeys,y=v===void 0?[]:v,b=c.icons,S=c.onClickSubMenu,A=c.onClickMenuItem,w=p+"-inline",C=(_==null?void 0:_.indexOf(e))>-1,k=u&&y.indexOf(n._key)>-1||LK(i,y),M=rxt(M0t(C?{height:"auto"}:IP),2),P=M[0],E=M[1],I=function(H){S(e,o,"inline"),u&&A(e,H)},D=GB(d+"-submenu-inline-"),N=i2(i,m0(m0({},zB(h,OK)),{level:o+1,selectable:u})),O=B.createElement("div",{tabIndex:0,"aria-expanded":C,"aria-controls":D,className:zt(w+"-header",(t={},t[p+"-selected"]=k,t)),onClick:I,onKeyDown:function(H){var j=H.keyCode||H.which;j===c1.code&&I(H)}},B.createElement(e2,{level:o,prefixCls:p,levelIndent:f}),B.createElement("span",null,a),B.createElement("span",{className:p+"-icon-suffix "+(C?"is-open":"")},b&&b.horizontalArrowDown?b.horizontalArrowDown:B.createElement(d1,null))),L=B.createElement("div",{id:D,className:zt(w+"-content"),style:P},N);return B.createElement("div",m0({ref:l,className:zt(w,s),style:r},An(h,["key","popup","triggerProps"])),O,B.createElement(U_,{in:C,timeout:200,classNames:w,unmountOnExit:!1,onEnter:function(H){return Oz(void 0,void 0,void 0,function(){return Rz(this,function(j){switch(j.label){case 0:return H?[4,E(IP)]:[2];case 1:return j.sent(),[4,E({height:H.scrollHeight})];case 2:return j.sent(),[2]}})})},onEntered:function(){E({height:"auto"})},onExit:function(H){return Oz(void 0,void 0,void 0,function(){return Rz(this,function(j){switch(j.label){case 0:return H?[4,E({height:H.scrollHeight})]:[2];case 1:return j.sent(),[4,E(IP)];case 2:return j.sent(),[2]}})})}},L))};function Iz(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function Lz(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Iz(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Iz(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function axt(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=Lz(Lz({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-right")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{d:"m16 39.513 15.556-15.557L16 8.4"}))}var Bg=B.forwardRef(axt);Bg.defaultProps={isIcon:!0};Bg.displayName="IconRight";function Dz(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function Bz(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Dz(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Dz(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function oxt(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=Bz(Bz({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-left")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{d:"M32 8.4 16.444 23.956 32 39.513"}))}var Fg=B.forwardRef(oxt);Fg.defaultProps={isIcon:!0};Fg.displayName="IconLeft";var Rf=function(){return Rf=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Rf.apply(this,arguments)},lxt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},uxt=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},hxt=function(n){var t,e=n._key,i=n.children,r=n.style,s=n.className,a=n.title,o=n.level,l=n.selectable,u=n.forwardedRef,h=n.triggerProps,c=lxt(n,["_key","children","style","className","title","level","selectable","forwardedRef","triggerProps"]),d=V.useContext(Mu),p=d.id,f=d.prefixCls,g=d.mode,_=d.inDropdown,v=d.levelIndent,y=d.selectedKeys,b=y===void 0?[]:y,S=d.icons,A=d.triggerProps,w=d.onClickSubMenu,C=d.onClickMenuItem,k=V.useContext(pe).rtl,M=Rf(Rf({},A),h),P=uxt(V.useState(!1),2),E=P[0],I=P[1],D=f+"-pop",N=l&&b.indexOf(n._key)>-1,O=g==="horizontal"&&!_,L=GB(p+"-submenu-pop-"),H=function(){var $=S&&S.popArrowRight?S.popArrowRight:k?B.createElement(Fg,null):B.createElement(Bg,null),q=S&&S.horizontalArrowDown?S.horizontalArrowDown:B.createElement(d1,null);return B.createElement("span",{className:f+"-icon-suffix"},O?q:$)},j=LK(i,b)||N,G=k?["br","lt"]:["bl","rt"],U=function($){w(e,o,"pop"),l&&C(e,$)};return B.createElement(Cm,{trigger:"hover",popupVisible:E,onVisibleChange:I,droplist:B.createElement(zs,{id:L,selectedKeys:b,onClickMenuItem:function($,q){C($,q),I(!1)}},i),triggerProps:Rf({position:O?G[0]:G[1],showArrow:!0,autoAlignPopupMinWidth:!0,classNames:"fadeIn",duration:100,mouseEnterDelay:50,mouseLeaveDelay:50,className:zt(D+"-trigger",M&&M.className)},An(M,["className"]))},B.createElement("div",Rf({tabIndex:0,"aria-haspopup":!0,"aria-expanded":E,"aria-controls":L,ref:u,style:r,className:zt(D,D+"-header",(t={},t[f+"-selected"]=j,t),s),onClick:U,onKeyDown:function($){var q=$.keyCode||$.which;q===c1.code?U($):q===vK.code?I(!1):q===_K.code&&I(!0)}},An(c,["key","popup"])),B.createElement(e2,{prefixCls:f,levelIndent:v,level:o}),a,H(),j&&g==="horizontal"?B.createElement("div",{className:f+"-selected-label"}):null))},wR=function(){return wR=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},wR.apply(this,arguments)};function cxt(n,t){var e=n.children,i=n.popup,r=n.level,s=V.useContext(Mu),a=s.mode,o=s.collapse,l=s.inDropdown,u=s.collectInlineMenuKeys,h=!!(typeof i=="function"?i(r):i),c=h||o||l||a!=="vertical",d=c?hxt:sxt;return V.useEffect(function(){return u(n._key),function(){u(n._key,!0)}},[]),B.createElement(d,wR({forwardedRef:t},n),e)}var dxt=V.forwardRef(cxt),n2=dxt;n2.displayName="SubMenu";n2.menuType="SubMenu";function Fz(n,t){if(!n||!t)return null;var e=t;e==="float"&&(e="cssFloat");try{if(document.defaultView){var i=document.defaultView.getComputedStyle(n,"");return n.style[e]||i?i[e]:""}}catch{return n.style[e]}}var jz=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},Nz=function(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))},pxt=5;function zz(n){return n&&Math.ceil(+n.getBoundingClientRect().width)}function Hz(n){var t=Number(n.replace("px",""));return isNaN(t)?0:t}var fxt=function(n){var t=n.children,e=n.ellipsisText,i=e===void 0?"···":e,r=n.onEllipsisChange,s=V.useContext(Mu).prefixCls,a=V.useRef(null),o=jz(V.useState(null),2),l=o[0],u=o[1],h=s+"-overflow-sub-menu",c=s+"-overflow-hidden-menu-item",d=s+"-overflow-sub-menu-mirror",p=function(v){if(v!==l){var y=B.Children.toArray(t),b=v===null;r==null||r({lastVisibleIndex:b?y.length-1:v,overflowNodes:b?[]:y.slice(v+1)}),u(v)}};function f(){if(a.current){for(var v=a.current,y=zz(v)-pxt,b=[].slice.call(v.children),S=0,A=0,w=0,C=0;C<b.length;C++){var k=b[C],M=k.className.split(" "),P=M.indexOf(h)>-1,E=M.indexOf(d)>-1;if(!P){var I=zz(k)+Hz(Fz(k,"marginLeft"))+Hz(Fz(k,"marginRight"));if(E){w=I;continue}if(A+=I,A>y){p(S-(A-I+w<=y?1:2));return}S++}}p(null)}}var g=function(v,y){return y===void 0&&(y=!1),B.createElement(n2,{title:B.createElement("span",null,i),key:"arco-menu-overflow-sub-menu"+(y?"-mirror":""),className:y?d:h,children:v})},_=function(){var v=null,y=g(null,!0),b=B.Children.map(t,function(S,A){var w=S;if(l!==null&&(A>l&&(w=B.cloneElement(S,{className:c})),A===l+1)){var C=B.Children.toArray(t).slice(l+1).map(function(k){return B.cloneElement(k,{key:k.props._key})});v=g(C)}return w});return Nz(Nz([y],jz(b),!1),[v],!1)};return B.createElement(Tu,{onResize:f,getTargetDOMNode:function(){return a.current}},B.createElement("div",{className:s+"-overflow-wrap",ref:a},_()))};function Vz(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function Wz(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Vz(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Vz(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function gxt(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=Wz(Wz({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-drag-dot-vertical")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{fill:"currentColor",stroke:"none",d:"M17 8h2v2h-2V8ZM17 23h2v2h-2v-2ZM17 38h2v2h-2v-2ZM29 8h2v2h-2V8ZM29 23h2v2h-2v-2ZM29 38h2v2h-2v-2Z"}),B.createElement("path",{d:"M17 8h2v2h-2V8ZM17 23h2v2h-2v-2ZM17 38h2v2h-2v-2ZM29 8h2v2h-2V8ZM29 23h2v2h-2v-2ZM29 38h2v2h-2v-2Z"}))}var KB=B.forwardRef(gxt);KB.defaultProps={isIcon:!0};KB.displayName="IconDragDotVertical";function $z(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function Gz(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?$z(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):$z(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function mxt(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=Gz(Gz({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-drag-dot")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{fill:"currentColor",stroke:"none",d:"M40 17v2h-2v-2h2ZM25 17v2h-2v-2h2ZM10 17v2H8v-2h2ZM40 29v2h-2v-2h2ZM25 29v2h-2v-2h2ZM10 29v2H8v-2h2Z"}),B.createElement("path",{d:"M40 17v2h-2v-2h2ZM25 17v2h-2v-2h2ZM10 17v2H8v-2h2ZM40 29v2h-2v-2h2ZM25 29v2h-2v-2h2ZM10 29v2H8v-2h2Z"}))}var qB=B.forwardRef(mxt);qB.defaultProps={isIcon:!0};qB.displayName="IconDragDot";function Uz(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function Yz(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Uz(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Uz(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function vxt(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=Yz(Yz({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-caret-right")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{fill:"currentColor",stroke:"none",d:"M34.829 23.063c.6.48.6 1.394 0 1.874L17.949 38.44c-.785.629-1.949.07-1.949-.937V10.497c0-1.007 1.164-1.566 1.95-.937l16.879 13.503Z"}))}var cA=B.forwardRef(vxt);cA.defaultProps={isIcon:!0};cA.displayName="IconCaretRight";function Xz(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function Kz(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Xz(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Xz(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function _xt(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=Kz(Kz({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-caret-left")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{fill:"currentColor",stroke:"none",d:"M13.171 24.937a1.2 1.2 0 0 1 0-1.874L30.051 9.56c.785-.629 1.949-.07 1.949.937v27.006c0 1.006-1.164 1.566-1.95.937L13.171 24.937Z"}))}var dA=B.forwardRef(_xt);dA.defaultProps={isIcon:!0};dA.displayName="IconCaretLeft";function qz(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function Zz(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?qz(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):qz(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function yxt(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=Zz(Zz({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-caret-down")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{fill:"currentColor",stroke:"none",d:"M24.938 34.829a1.2 1.2 0 0 1-1.875 0L9.56 17.949c-.628-.785-.069-1.949.937-1.949h27.007c1.006 0 1.565 1.164.937 1.95L24.937 34.829Z"}))}var ZB=B.forwardRef(yxt);ZB.defaultProps={isIcon:!0};ZB.displayName="IconCaretDown";function Jz(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function Qz(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Jz(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Jz(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function bxt(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=Qz(Qz({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-caret-up")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{fill:"currentColor",stroke:"none",d:"M23.063 13.171a1.2 1.2 0 0 1 1.875 0l13.503 16.88c.628.785.069 1.949-.937 1.949H10.497c-1.006 0-1.565-1.164-.937-1.95l13.503-16.879Z"}))}var JB=B.forwardRef(bxt);JB.defaultProps={isIcon:!0};JB.displayName="IconCaretUp";var sd=function(){return sd=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},sd.apply(this,arguments)},xxt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};function QB(n){var t,e,i=n.className,r=n.direction,s=n.icon,a=n.onMouseDown,o=n.onResize,l=n.children,u=n.collapsible,h=u===void 0?{}:u,c=n.resizable,d=c===void 0?!0:c,p=n.renderChildren,f=xxt(n,["className","direction","icon","onMouseDown","onResize","children","collapsible","resizable","renderChildren"]),g=V.useContext(pe),_=g.getPrefixCls,v=g.rtl,y=_("resizebox-trigger"),b=r==="horizontal",S=v&&!b,A=zt(y,y+"-"+(b?"horizontal":"vertical"),(t={},t[y+"-not-resizable"]=!d,t),(e={},e[y+"-rtl"]=v,e),i),w=V.useRef(),C=S?[B.createElement(cA,{key:"prev"}),B.createElement(dA,{key:"next"})]:[B.createElement(dA,{key:"prev"}),B.createElement(cA,{key:"next"})],k=$e(h.prev)?sd(sd({},h.prev),{icon:h.prev.icon||(b?B.createElement(JB,null):C[0])}):{},M=$e(h.next)?sd(sd({},h.next),{icon:h.next.icon||(b?B.createElement(ZB,null):C[1])}):{},P=function(){return k.icon&&!k.collapsed||M.collapsed?B.createElement("span",{className:zt(y+"-icon",zt(y+"-prev")),onClick:k.onClick},k.icon):B.createElement("span",{className:zt(y+"-icon-empty")})},E=function(){return M.icon&&!M.collapsed||k.collapsed?B.createElement("span",{className:zt(y+"-icon",zt(y+"-next")),onClick:M.onClick},M.icon):B.createElement("span",{className:zt(y+"-icon-empty")})},I=function(){return d?B.createElement("span",{className:y+"-icon"},s||(b?B.createElement(qB,null):B.createElement(KB,null))):B.createElement("span",{className:zt(y+"-icon-empty")})},D=P(),N=I(),O=E(),L=function(){return B.createElement("div",{className:y+"-icon-wrapper"},D,N,O)};return d?B.createElement(Tu,{onResize:o,getTargetDOMNode:function(){return w.current}},B.createElement("div",sd({ref:w},An(f,["style"]),{className:A,onMouseDown:a}),ir(p)?p(D,N,O):l||L())):B.createElement("div",{className:A},ir(p)?p(D,N,O):l||L())}var LP=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},DP="horizontal",t7="vertical";function Sxt(n,t){var e,i=n.style,r=n.className,s=n.component,a=s===void 0?"div":s,o=n.direction,l=o===void 0?"horizontal":o,u=n.icon,h=n.size,c=h===void 0?.5:h,d=n.min,p=n.max,f=n.panes,g=n.disabled,_=n.trigger,v=V.useContext(pe),y=v.getPrefixCls,b=v.rtl,S=y("resizebox-split"),A=l.includes(DP),w=l.includes("reverse"),C=A&&b,k=!A,M=zt(S,S+"-"+(A?DP:t7),(e={},e[S+"-rtl"]=b,e),r),P=LP(f,2),E=P[0],I=P[1],D=typeof c=="string",N=LP(V.useState(parseFloat(c)),2),O=N[0],L=N[1],H=LP(V.useState(0),2),j=H[0],G=H[1],U=V.useRef({startX:0,startY:0,startWidth:0,startHeight:0,startOffset:0,moving:!1}),$=V.useRef(),q=V.useRef([]);V.useImperativeHandle(t,function(){return $.current},[]);function tt(yt,vt){return parseFloat(yt)/parseFloat(vt)}function it(yt,vt,pt,jt){var Lt=typeof d=="string"?tt(parseFloat(d),yt):d||0,Yt=typeof p=="string"?tt(parseFloat(p),yt):p||1,Nt=w?-1:1,te=C?-1:1;Nt*=te;var ge=D?vt+(jt-pt)*Nt:tt(yt*vt+(jt-pt)*Nt,yt),Pe=D?Lt*yt:Lt,we=D?Yt*yt:Yt;return ge=Math.max(ge,Pe),ge=Math.min(ge,we),ge}function nt(yt){var vt,pt;n.onMovingStart&&n.onMovingStart(),U.current.moving=!0,U.current.startX=yt.pageX,U.current.startY=yt.pageY,U.current.startWidth=(vt=$.current)===null||vt===void 0?void 0:vt.offsetWidth,U.current.startHeight=(pt=$.current)===null||pt===void 0?void 0:pt.offsetHeight,U.current.startOffset=O,rr(window,"mousemove",K),rr(window,"touchmove",K),rr(window,"mouseup",J),rr(window,"touchend",J),rr(window,"contextmenu",J),document.body.style.cursor=k?"row-resize":"col-resize"}function K(yt){if(U.current.moving){var vt=A?it(U.current.startWidth,U.current.startOffset,U.current.startX,yt.pageX):it(U.current.startHeight,U.current.startOffset,U.current.startY,yt.pageY);L(vt),n.onMoving&&n.onMoving(yt,D?vt+"px":vt)}}function J(){U.current.moving=!1,sr(window,"mousemove",K),sr(window,"touchmove",K),sr(window,"mouseup",J),sr(window,"touchend",J),sr(window,"contextmenu",J),document.body.style.cursor="default",n.onMovingEnd&&n.onMovingEnd()}function Q(yt){var vt=yt[0].contentRect,pt=vt[k?"height":"width"];G(pt)}function dt(){var yt=D?"px":"%";if(!O)return"0"+yt;var vt=D?O:O*100;return"calc("+vt+yt+" - "+j/2+"px)"}V.useEffect(function(){n.onPaneResize&&n.onPaneResize(q.current)},[O,j]),d0(function(){var yt=parseFloat(c);O!==yt&&L(yt)},[c]);var bt=a,xt=B.createElement("div",{className:zt(S+"-pane","first-pane"),style:{flexBasis:dt()},ref:function(yt){q.current[0]=yt}},E),ht=B.createElement("div",{className:zt(S+"-pane","second-pane"),ref:function(yt){q.current[1]=yt}},I),St=w?[ht,xt]:[xt,ht];return B.createElement(bt,{style:i,className:M,ref:$},St[0],!g&&B.createElement(QB,{className:S+"-trigger",direction:k?DP:t7,icon:u,onMouseDown:nt,onResize:Q},_),St[1])}var DK=V.forwardRef(Sxt);DK.displayName="ResizeBoxSplit";var CR=function(){return CR=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},CR.apply(this,arguments)},Axt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},Gc=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},BP=function(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))},FP="horizontal",e7="vertical";function wxt(n,t){var e,i,r=n.panes,s=n.style,a=n.className,o=n.component,l=o===void 0?"div":o,u=n.direction,h=u===void 0?"horizontal":u,c=n.icon,d=Axt(n,["panes","style","className","component","direction","icon"]),p=V.useContext(pe),f=p.getPrefixCls,g=p.rtl,_=1/r.length,v=V.useRef(),y=V.useRef(new Array(r.length).fill({moving:!1,startOffset:0,startPosition:0})),b=V.useRef([]),S=V.useRef(0),A=V.useRef([]),w=Gc(V.useState(new Array(r.length).fill(_)),2),C=w[0],k=w[1],M=Gc(V.useState(!1),2),P=M[0],E=M[1],I=Gc(V.useState(new Array(r.length).fill(0)),2),D=I[0],N=I[1],O=Gc(V.useState(new Array(Math.max(r.length-1,0)).fill({prev:!1,next:!1})),2),L=O[0],H=O[1],j=f("resizebox-split-group"),G=h===FP,U=G&&g,$=!G,q=zt(j,j+"-"+(G?FP:e7),(e={},e[j+"-moving"]=P,e),(i={},i[j+"-rtl"]=g,i),a),tt=l,it=function(){var vt=[];r.forEach(function(Yt){var Nt=Yt.size;Gr(Nt)?vt.push(void 0):vt.push(K(Nt))});var pt=vt.filter(function(Yt){return!Yt}),jt=1-vt.reduce(function(Yt,Nt){var te=Yt||0,ge=Nt||0;return te+ge},0),Lt=jt/pt.length;return vt=vt.map(function(Yt){return Gr(Yt)?Lt:Yt}),vt},nt=function(vt){var pt=D[vt-1]||0,jt=D[vt],Lt=C[vt]*100,Yt="%";return"calc("+Lt+Yt+" - "+(pt+jt)/2+"px)"};function K(vt){var pt=G?v.current.offsetWidth:v.current.offsetHeight;if(!vt||Un(vt)&&vt<0)return 0;var jt=kc(vt)?parseFloat(vt)/pt:vt;return Math.min(jt,1)}var J=function(vt){var pt=Math.min(vt+1,r.length-1),jt=C[vt]+C[pt],Lt=K(r[vt].min)||0,Yt=K(r[vt].max)||jt,Nt=K(r[pt].min)||0,te=K(r[pt].max)||jt;return Yt=Math.min(jt-Nt,Yt),te=Math.min(jt-Lt,te),{currentMin:Lt,currentMax:Yt,nextMin:Nt,nextMax:te}},Q=function(vt,pt,jt){var Lt=S.current,Yt=Lt+1,Nt=BP([],Gc(C),!1),te=U?-1:1,ge=C[Lt],Pe=C[Yt],we=ge+Pe,Ze=J(Lt),je=Ze.currentMin,oe=Ze.currentMax,ne=vt+K((jt-pt)*te+"px");return ne=Math.max(je,ne),ne=Math.min(oe,ne),Nt[Lt]=ne,Nt[Yt]=we-ne,Nt};function dt(vt,pt){var jt=vt[0].contentRect,Lt=jt[$?"height":"width"],Yt=BP([],Gc(D),!1);Yt[pt]=Lt,N(Yt)}var bt=function(vt){var pt=r[vt].collapsible;$e(pt)||(pt=pt?{prev:!0,next:!0}:{});var jt=pt.prev,Lt=pt.next;if(!jt&&!Lt)return{};if(!L[vt])return{};var Yt=!!jt||!jt&&L[vt].next,Nt=!!Lt||!Lt&&L[vt].prev;return{hasPrev:Yt,hasNext:Nt}};function xt(vt,pt){n.onMovingStart&&n.onMovingStart(pt),S.current=pt;var jt=y.current[pt];jt.moving=!0,jt.startOffset=C[pt],jt.startPosition=G?vt.pageX:vt.pageY,E(!0),rr(window,"mousemove",ht),rr(window,"touchmove",ht),rr(window,"mouseup",St),rr(window,"touchend",St),rr(window,"contextmenu",St),document.body.style.cursor=$?"row-resize":"col-resize"}function ht(vt){var pt=S.current,jt=y.current[pt],Lt=G?v.current.offsetWidth:v.current.offsetHeight;if(jt.moving){var Yt=Q(jt.startOffset,jt.startPosition,G?vt.pageX:vt.pageY);k(Yt),A.current=Yt,n.onMoving&&n.onMoving(vt,Yt.map(function(Nt){return Nt*Lt+"px"}),pt)}}function St(){var vt=S.current;y.current[vt].moving=!1,E(!1),sr(window,"mousemove",ht),sr(window,"touchmove",ht),sr(window,"mouseup",St),sr(window,"touchend",St),sr(window,"contextmenu",St),document.body.style.cursor="default",n.onMovingEnd&&n.onMovingEnd(vt)}function yt(vt,pt,jt,Lt){var Yt=pt+1,Nt=BP([],Gc(C),!1),te=C[pt],ge=C[Yt],Pe=te+ge,we=G?v.current.offsetWidth:v.current.offsetHeight,Ze=J(pt),je=Ze.currentMin,oe=Ze.nextMin,ne=A.current[pt],De=A.current[Yt],ye=L[pt][jt];jt==="prev"?(ge!==oe||De===oe)&&(ne=je,De=Pe-je,ye=!0):(te!==je||ne===je)&&(ne=Pe-oe,De=oe,ye=!0),Nt[pt]=ne,Nt[Yt]=De,n.onMoving&&n.onMoving(vt,Nt.map(function(Xe){return Xe*we+"px"}),pt),n.onMovingEnd&&n.onMovingEnd(pt),k(Nt),ir(Lt)&&Lt(vt,pt,jt,ye)}return V.useEffect(function(){var vt=it();k(vt),A.current=vt},[JSON.stringify(r.map(function(vt){return vt.size}))]),V.useImperativeHandle(t,function(){return v.current},[]),V.useEffect(function(){var vt=[];C.forEach(function(pt,jt){var Lt={prev:!1,next:!1},Yt=jt+1,Nt=J(jt),te=Nt.currentMin,ge=Nt.nextMin;pt===te?Lt.prev=!0:C[Yt]===ge&&(Lt.next=!0),vt.push(Lt)}),H(vt)},[C]),B.createElement(tt,CR({},An(d,["onMovingStart","onPaneResize","onMoving","onMovingEnd"]),{style:s,className:q,ref:v}),r.map(function(vt,pt){var jt=vt.content,Lt=vt.disabled,Yt=vt.trigger,Nt=vt.resizable,te=Nt===void 0?!0:Nt,ge=vt.collapsible,Pe=ge===void 0?{}:ge,we=bt(pt),Ze=we.hasPrev,je=we.hasNext,oe=$e(Pe)&&$e(Pe.prev)?Pe.prev:{},ne=$e(Pe)&&$e(Pe.next)?Pe.next:{};return B.createElement(B.Fragment,{key:pt},B.createElement("div",{className:j+"-pane",style:{flexBasis:nt(pt)},ref:function(De){return b.current[pt]=De}},jt),!Lt&&pt!==r.length-1&&B.createElement(QB,{className:j+"-trigger",direction:$?FP:e7,icon:c,onResize:function(De){return dt(De,pt)},onMouseDown:function(De){return xt(De,pt)},collapsible:{prev:Ze?{onClick:function(De){return yt(De,pt,"prev",oe.onClick)},icon:oe.icon,collapsed:L[pt].prev}:void 0,next:je?{onClick:function(De){return yt(De,pt,"next",ne.onClick)},icon:ne.icon,collapsed:L[pt].next}:void 0},resizable:te,renderChildren:Yt}))}))}var BK=V.forwardRef(wxt);BK.displayName="ResizeBoxSplitGroup";var Jl=function(){return Jl=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Jl.apply(this,arguments)},Cxt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},jP=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},FK="left",kR="right",TR="top",MR="bottom",kxt=[FK,kR,TR,MR],Txt={component:"div",directions:["right"],resizeIcons:{},resizeTriggers:{}},Mxt=function(n){switch(n){case"left":return"right";case"right":return"left";default:return n}};function Pxt(n,t){var e,i=V.useContext(pe),r=i.getPrefixCls,s=i.componentConfig,a=i.rtl,o=nn(n,Txt,s==null?void 0:s.ResizeBox),l=o.style,u=o.className,h=o.component,c=o.directions,d=o.resizeIcons,p=o.children,f=o.resizeTriggers,g=o.width,_=o.height,v=Cxt(o,["style","className","component","directions","resizeIcons","children","resizeTriggers","width","height"]),y=a?c.map(function(K){return Mxt(K)}):c,b=r("resizebox"),S=zt(b,(e={},e[b+"-rtl"]=a,e),u),A=jP(V.useState({}),2),w=A[0],C=A[1],k=jP(Ns(void 0,{value:g}),2),M=k[0],P=k[1],E=jP(Ns(void 0,{value:_}),2),I=E[0],D=E[1],N=V.useRef({startX:0,startY:0,startWidth:0,startHeight:0,direction:kR,moving:!1,padding:{top:0,bottom:0,left:0,right:0}}),O=V.useRef();V.useImperativeHandle(t,function(){return O.current},[]);function L(K){return[TR,MR].indexOf(K)>-1}function H(K,J){if(K===0)return 0;var Q=K-J;return Q<=0?0:Q}function j(K){var J="data-arco-origin-cursor";if(K)document.body.setAttribute(J,document.body.style.cursor),document.body.style.cursor=K;else{var Q=document.body.getAttribute(J);document.body.style.cursor=Q||"",document.body.removeAttribute(J)}}function G(K,J){var Q,dt;o.onMovingStart&&o.onMovingStart(),N.current.moving=!0,N.current.startX=J.pageX,N.current.startY=J.pageY,N.current.direction=K;var bt=N.current.padding,xt=bt.top,ht=bt.left,St=bt.right,yt=bt.bottom;N.current.startWidth=H((Q=O.current)===null||Q===void 0?void 0:Q.clientWidth,ht+St),N.current.startHeight=H((dt=O.current)===null||dt===void 0?void 0:dt.clientHeight,xt+yt),rr(window,"mousemove",U),rr(window,"touchmove",U),rr(window,"mouseup",$),rr(window,"touchend",$),rr(window,"contextmenu",$),j(L(K)?"row-resize":"col-resize")}function U(K){if(!N.current.moving)return!1;var J=N.current,Q=J.startX,dt=J.startY,bt=J.startWidth,xt=J.startHeight,ht=bt,St=xt,yt=K.pageX-Q,vt=K.pageY-dt;switch(N.current.direction){case FK:ht=bt-yt,P(ht);break;case kR:ht=bt+yt,P(ht);break;case TR:St=xt-vt,D(St);break;case MR:St=xt+vt,D(St);break}o.onMoving&&o.onMoving(K,{width:ht,height:St})}function $(){N.current.moving=!1,q(),j(),o.onMovingEnd&&o.onMovingEnd()}function q(){sr(window,"mousemove",U),sr(window,"touchmove",U),sr(window,"mouseup",$),sr(window,"touchend",$),sr(window,"contextmenu",$)}function tt(K,J){var Q=L(K),dt=J[0].contentRect,bt=""+K.slice(0,1).toUpperCase()+K.slice(1),xt=dt[Q?"height":"width"];N.current.padding[K]=xt,C(function(ht){var St;return Jl(Jl({},ht),(St={},St["padding"+bt]=xt,St))})}var it=Jl(Jl(Jl(Jl({},w),l||{}),Un(M)?{width:M}:{}),Un(I)?{height:I}:{}),nt=h;return B.createElement(nt,Jl({},An(v,["onMovingStart","onMoving","onMovingEnd"]),{style:it,className:S,ref:O}),p,y.map(function(K){if(kxt.indexOf(K)!==-1)return B.createElement(QB,{key:K,className:b+"-direction-"+K,direction:L(K)?"horizontal":"vertical",icon:d[K],onMouseDown:function(J){G(K,J)},onResize:function(J){tt(K,J)}},f[K])}))}var Ext=V.forwardRef(Pxt),r2=Ext;r2.Split=DK;r2.SplitGroup=BK;r2.displayName="ResizeBox";var pA=function(){return pA=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},pA.apply(this,arguments)},fA=["xxxl","xxl","xl","lg","md","sm","xs"],Hv={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)",xxxl:"(min-width: 2000px)"},Uc=[],Oxt=-1,Qb={},jg={matchHandlers:{},dispatch:function(n,t){return Qb=n,Uc.length<1?!1:(Uc.forEach(function(e){e.func(Qb,t)}),!0)},subscribe:function(n){Uc.length===0&&this.register();var t=(++Oxt).toString();return Uc.push({token:t,func:n}),n(Qb,null),t},unsubscribe:function(n){Uc=Uc.filter(function(t){return t.token!==n}),Uc.length===0&&this.unregister()},unregister:function(){var n=this;Object.keys(Hv).forEach(function(t){var e=Hv[t],i=n.matchHandlers[e];i&&i.mql&&i.listener&&i.mql.removeListener(i.listener)})},register:function(){var n=this;Object.keys(Hv).forEach(function(t){var e=Hv[t],i=function(s){var a,o=s.matches;n.dispatch(pA(pA({},Qb),(a={},a[t]=o,a)),t)},r=window.matchMedia(e);r.addListener(i),n.matchHandlers[e]={mql:r,listener:i},i(r)})}},If=function(){return If=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},If.apply(this,arguments)},i7=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},jK=V.createContext({siderCollapsed:!1,collapsedWidth:64}),Rxt=function(){var n=0;return function(t){return t===void 0&&(t=""),n+=1,""+t+n}}();function Ixt(n,t){var e,i,r=n.children,s=n.className,a=n.style,o=n.theme,l=o===void 0?"light":o,u=n.trigger,h=n.reverseArrow,c=n.collapsedWidth,d=c===void 0?48:c,p=n.width,f=p===void 0?200:p,g=n.collapsible,_=n.resizeDirections,v=n.onSiderMount,y=n.onSiderUnmount,b=n.breakpoint,S=n.onBreakpoint,A=n.onCollapse,w=n.resizeBoxProps,C=w===void 0?{}:w,k=Rxt("arco-sider-"),M=V.useContext(pe).getPrefixCls,P=M("layout-sider"),E=i7(Ns(!1,{value:"collapsed"in n?n.collapsed:void 0,defaultValue:n.defaultCollapsed}),2),I=E[0],D=E[1],N=Un(f)?f+"px":String(f),O=Un(d)?""+d:String(d),L=i7(V.useState(I?O:N),2),H=L[0],j=L[1],G=V.useRef(null),U=V.useRef(null);U.current={breakpoint:b,collapsed:I,onCollapse:A,onBreakpoint:S},V.useEffect(function(){return v&&v(k),g&&b in Hv&&(G.current=jg.subscribe(function(nt,K){var J=U.current,Q=J.breakpoint,dt=J.collapsed,bt=J.onCollapse,xt=J.onBreakpoint;if(!K||K===Q){var ht=!nt[Q];ht!==dt&&(D(ht),bt&&bt(ht,"responsive")),xt&&xt(ht)}})),function(){y&&y(k),G.current&&jg.unsubscribe(G.current)}},[]),V.useEffect(function(){var nt=Un(d)?d+"px":String(d);j(I?nt:N)},[I,N,d]);var $=_&&ym(_)||((i=C.directions)===null||i===void 0?void 0:i.length),q=$?r2:"aside",tt=function(){var nt,K=u||(I?h?B.createElement(Fg,null):B.createElement(Bg,null):h?B.createElement(Bg,null):B.createElement(Fg,null));return g&&u!==null?B.createElement("div",{style:{width:H},className:zt(P+"-trigger",(nt={},nt[P+"-trigger-light"]=l==="light",nt)),onClick:function(){D(!I),A&&A(!I,"clickTrigger")}},K):null},it=V.useMemo(function(){return $?If(If({component:"aside"},C),{width:H,directions:_,onMoving:function(nt,K){var J;j(K.width+"px"),(J=C==null?void 0:C.onMoving)===null||J===void 0||J.call(C,nt,K)}}):{}},[$,_,H,C]);return B.createElement(jK.Provider,{value:{siderCollapsed:I,collapsedWidth:d}},B.createElement(q,If({ref:t,style:If({width:H},a),className:zt(P,(e={},e[P+"-light"]=l==="light",e[P+"-has-trigger"]=u!==null&&g,e[P+"-collapsed"]=I,e),s)},it),B.createElement("div",{className:P+"-children"},r),tt()))}var Lxt=V.forwardRef(Ixt),t3=Lxt;t3.displayName="LayoutSider";t3.__ARCO_SIGN__="sider";var PR=function(){return PR=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},PR.apply(this,arguments)},Dxt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};function Bxt(n,t){var e=V.useContext(pe).getPrefixCls,i=n.className,r=n.children,s=Dxt(n,["className","children"]),a=e("layout-header"),o=zt(a,i);return B.createElement("header",PR({ref:t},s,{className:o}),r)}var NK=V.forwardRef(Bxt);NK.displayName="LayoutHeader";var ER=function(){return ER=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ER.apply(this,arguments)},Fxt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};function jxt(n,t){var e=n.className,i=n.children,r=Fxt(n,["className","children"]),s=V.useContext(pe).getPrefixCls,a=s("layout-footer"),o=zt(a,e);return B.createElement("footer",ER({ref:t},r,{className:o}),i)}var zK=V.forwardRef(jxt);zK.displayName="LayoutFooter";var OR=function(){return OR=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},OR.apply(this,arguments)},Nxt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};function zxt(n,t){var e=n.className,i=n.children,r=Nxt(n,["className","children"]),s=V.useContext(pe).getPrefixCls,a=s("layout-content"),o=zt(a,e);return B.createElement("main",OR({ref:t},r,{className:o}),i)}var HK=V.forwardRef(zxt);HK.displayName="LayoutContent";var RR=function(){return RR=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},RR.apply(this,arguments)},Hxt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},n7=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},r7=function(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))};function Vxt(n,t){var e,i=V.useContext(pe),r=i.getPrefixCls,s=i.componentConfig,a=nn(n,{},s==null?void 0:s.Layout),o=a.className,l=a.hasSider,u=a.children,h=Hxt(a,["className","hasSider","children"]),c=n7(V.useState([]),2),d=c[0],p=c[1],f=r("layout"),g=zt(f,(e={},e[f+"-has-sider"]=typeof l=="boolean"?l:d.length>0,e),o);return B.createElement("section",RR({ref:t},h,{className:g}),B.Children.map(u,function(_){var v=q_(_,"type.__ARCO_SIGN__")||q_(_,"props.sign");return _&&v==="sider"?B.cloneElement(_,{onSiderMount:function(y){return p(r7(r7([],n7(d),!1),[y],!1))},onSiderUnmount:function(y){return p(d.filter(function(b){return b!==y}))}}):_}))}var Wxt=V.forwardRef(Vxt),Kr=Wxt;Kr.displayName="Layout";Kr.Sider=t3;Kr.Header=NK;Kr.Footer=zK;Kr.Content=HK;function s7(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function a7(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?s7(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):s7(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function $xt(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=a7(a7({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-menu-fold")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{d:"M42 11H6M42 24H22M42 37H6M13.66 26.912l-4.82-3.118 4.82-3.118v6.236Z"}))}var e3=B.forwardRef($xt);e3.defaultProps={isIcon:!0};e3.displayName="IconMenuFold";function o7(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function l7(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?o7(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):o7(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Gxt(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=l7(l7({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-menu-unfold")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{d:"M6 11h36M22 24h20M6 37h36M8 20.882 12.819 24 8 27.118v-6.236Z"}))}var i3=B.forwardRef(Gxt);i3.defaultProps={isIcon:!0};i3.displayName="IconMenuUnfold";var v0=function(){return v0=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},v0.apply(this,arguments)},Uxt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},tx=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},Yxt=function(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))},Xxt="light",Kxt={mode:"vertical",selectable:!0,ellipsis:!0};function qxt(n,t){var e,i=V.useContext(pe),r=i.getPrefixCls,s=i.componentConfig,a=i.rtl,o=nn(n,Kxt,s==null?void 0:s.Menu),l=o.style,u=o.children,h=o.className,c=o.prefixCls,d=o.mode,p=o.theme,f=o.icons,g=o.levelIndent,_=o.collapse,v=o.inDropdown,y=o.selectable,b=o.triggerProps,S=o.tooltipProps,A=o.ellipsis,w=o.accordion,C=o.autoOpen,k=o.autoScrollIntoView,M=o.scrollConfig,P=o.hasCollapseButton,E=o.defaultOpenKeys,I=o.defaultSelectedKeys,D=o.openKeys,N=o.selectedKeys,O=o.onClickSubMenu,L=o.onClickMenuItem,H=o.onCollapseChange,j=o.onEllipsisChange,G=Uxt(o,["style","children","className","prefixCls","mode","theme","icons","levelIndent","collapse","inDropdown","selectable","triggerProps","tooltipProps","ellipsis","accordion","autoOpen","autoScrollIntoView","scrollConfig","hasCollapseButton","defaultOpenKeys","defaultSelectedKeys","openKeys","selectedKeys","onClickSubMenu","onClickMenuItem","onCollapseChange","onEllipsisChange"]),U=tx(Ns([],{defaultValue:E,value:D}),2),$=U[0],q=U[1],tt=tx(Ns([],{defaultValue:I,value:N}),2),it=tt[0],nt=tt[1],K=tx(Ns(!1,{value:_}),2),J=K[0],Q=K[1],dt=V.useContext(Mu),bt=V.useContext(jK).siderCollapsed,xt=c||r("menu"),ht=bt||J||v||d==="popButton",St=p||dt.theme||Xxt,yt=V.useRef([]),vt=V.useRef([]),pt=O_t(),jt=xm(),Lt=V.useMemo(function(){return IK(u)},[u]),Yt=GB(xt+"-"),Nt=G.id||Yt;V.useEffect(function(){var we=$.filter(function(je){return yt.current.indexOf(je)!==-1});if(C){var Ze=yt.current.filter(function(je){return vt.current.indexOf(je)===-1});we=$.concat(Ze)}q(w?we.slice(0,1):we),vt.current=yt.current.slice()},[yt.current.toString()]);var te=d!=="horizontal"&&d!=="popButton"&&!v&&P,ge=function(){var we=i2(u,{level:1}),Ze=J?f&&f.collapseActive||B.createElement(i3,null):f&&f.collapseDefault||B.createElement(e3,null),je=function(){var oe=!J;Q(oe),H&&H(oe)};return B.createElement(B.Fragment,null,B.createElement("div",{className:xt+"-inner"},d==="horizontal"&&A!==!1?B.createElement(fxt,{ellipsisText:$e(A)?A.text:"···",onEllipsisChange:j},we):we),te&&B.createElement("div",v0({tabIndex:0,role:"button","aria-controls":Nt,"aria-expanded":!J,className:xt+"-collapse-button",onClick:je},jt({onPressEnter:je})),Ze))},Pe=v0({},l);return ht&&!v&&delete Pe.width,B.createElement("div",v0({id:te?Nt:void 0,role:"menu"},An(G,["isMenu"]),{ref:t,style:Pe,className:zt(xt,xt+"-"+St,xt+"-"+(d==="horizontal"?"horizontal":"vertical"),(e={},e[xt+"-collapse"]=ht,e[xt+"-pop"]=d==="pop"||ht,e[xt+"-pop-button"]=d==="popButton",e[xt+"-rtl"]=a,e),h)}),B.createElement(Mu.Provider,{value:{mode:d,theme:St,collapse:ht,levelIndent:g,inDropdown:v,selectedKeys:it,openKeys:$,icons:f,triggerProps:b,tooltipProps:S,autoScrollIntoView:k,scrollConfig:M,id:Nt,prefixCls:xt,collectInlineMenuKeys:function(we,Ze){Ze?yt.current=yt.current.filter(function(je){return je!==we}):yt.current.push(we),pt()},onClickMenuItem:function(we,Ze){var je;y&&nt([we]),L&&L(we,Ze,(je=Lt[we])===null||je===void 0?void 0:je.keyPath)},onClickSubMenu:function(we,Ze,je){var oe,ne=Yxt([],tx($),!1);je==="inline"&&(($==null?void 0:$.indexOf(we))>-1?w&&Ze===1?ne=[]:ne=$.filter(function(De){return De!==we}):w&&Ze===1?ne=[we]:ne=$.concat([we])),q(ne),O&&O(we,ne,(oe=Lt[we])===null||oe===void 0?void 0:oe.keyPath)}}},ge()))}var Zxt=V.forwardRef(qxt),zs=Zxt;zs.displayName="Menu";zs.Item=YB;zs.SubMenu=n2;zs.ItemGroup=XB;zs.__ARCO_MENU__=!0;function u7(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function h7(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?u7(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):u7(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Jxt(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=h7(h7({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-oblique-line")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{d:"M29.506 6.502 18.493 41.498"}))}var n3=B.forwardRef(Jxt);n3.defaultProps={isIcon:!0};n3.displayName="IconObliqueLine";var IR=function(){return IR=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},IR.apply(this,arguments)},Qxt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},tSt=function(n,t,e){return t.indexOf(n)===t.length-1?B.createElement("span",null,n.breadcrumbName):B.createElement("a",{href:"#/"+e.join("/").replace(/^\//,"")},n.breadcrumbName)},eSt={separator:B.createElement(n3,null)};function iSt(n,t){var e,i=V.useContext(pe),r=i.getPrefixCls,s=i.componentConfig,a=i.rtl,o=nn(n,eSt,s==null?void 0:s.Breadcrumb),l=o.className,u=o.children,h=o.style,c=o.routes,d=o.maxCount,p=o.separator,f=Qxt(o,["className","children","style","routes","maxCount","separator"]),g=r("breadcrumb"),_="itemRender"in o?o.itemRender:tSt,v=B.createElement("span",{"aria-label":"ellipses of breadcrumb items",className:g+"-item-ellipses"},"..."),y=B.createElement("span",{"aria-hidden":!0,className:g+"-item-separator"},p),b=function(w,C,k){var M=B.cloneElement(y,{key:k+"_separator"});return C>0?k===0?[w,M,v]:k>C?[M,w]:null:k===0?[w]:[M,w]},S=function(){var w=[],C=c.length-d;return c.map(function(k,M){w.push((k.path||"").replace(/^\//,""));var P=k.children?B.createElement(zs,null,k.children.map(function(E){return B.createElement(zs.Item,{key:E.path||E.breadcrumbName},_(E,c,w))})):null;return b(B.createElement(UB,{prefixCls:g,key:k.path||k.breadcrumbName,droplist:P},_(k,c,w)),C,M)})},A=function(){var w=[];B.Children.forEach(u,function(k){G_(k)||w.push(k)});var C=w.length-d;return B.Children.map(w,function(k,M){return b(B.cloneElement(k,{prefixCls:g}),C,M)})};return B.createElement("div",IR({role:"list",ref:t,style:h,className:zt(g,(e={},e[g+"-rtl"]=a,e),l)},An(f,["itemRender"])),c&&c.length?S():A())}var nSt=V.forwardRef(iSt),r3=nSt;r3.displayName="Breadcrumb";r3.Item=UB;var LR=function(){return LR=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},LR.apply(this,arguments)},rSt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};function sSt(n,t){var e,i=n.className,r=n.title,s=n.avatar,a=n.description,o=n.actionList,l=rSt(n,["className","title","avatar","description","actionList"]),u=V.useContext(pe).getPrefixCls,h=u("card-meta"),c=zt(h,i);return B.createElement("div",LR({},l,{ref:t,className:c}),r||a?B.createElement("div",{className:h+"-content"},r&&B.createElement("div",{className:h+"-title"},r),a&&B.createElement("div",{className:h+"-description"},a)):null,s||o?B.createElement("div",{className:zt(h+"-footer ",(e={},e[h+"-footer-only-actions"]=!s,e))},s?B.createElement("div",{className:h+"-avatar"},s):null,o):null)}var s3=B.forwardRef(sSt);s3.displayName="CardMeta";function aSt(n,t){var e,i=n.children,r=n.style,s=n.className,a=n.hoverable,o=V.useContext(pe).getPrefixCls,l=o("card-grid");return B.createElement("div",{ref:t,style:r,className:zt(l,(e={},e[l+"-hoverable"]=a,e),s)},i)}var a3=B.forwardRef(aSt);a3.displayName="CardGrid";var oSt=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},lSt=function(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))};function uSt(n){var t=V.useContext(pe).getPrefixCls,e=t("spin")+"-dot",i={width:n.size,height:n.size},r=n.size?parseInt(String(n.size)):0;return B.createElement("div",{className:e+"-list",style:{height:n.size,width:Un(r)&&r>0?r*7:""}},lSt([],oSt(new Array(5)),!1).map(function(s,a){return B.createElement("div",{key:a,className:e,style:i})}))}var DR=function(){return DR=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},DR.apply(this,arguments)},hSt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},cSt=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s};function dSt(n,t){var e,i=V.useContext(pe),r=i.getPrefixCls,s=i.componentConfig,a=nn(n,{},s==null?void 0:s.Spin),o=a.style,l=a.className,u=a.children,h=a.loading,c=a.size,d=a.icon,p=a.element,f=a.tip,g=a.dot,_=a.delay,v=a.block,y=v===void 0?!1:v,b=hSt(a,["style","className","children","loading","size","icon","element","tip","dot","delay","block"]),S=cSt(V.useState(_?!1:h),2),A=S[0],w=S[1],C=V.useCallback(Kvt(w,_),[_]),k=_?A:h,M=r("spin");V.useEffect(function(){return _&&C(h),function(){C&&C.cancel()}},[h]);var P=B.createElement("span",{className:M+"-icon"},d?B.cloneElement(d,{className:zt(M.replace("-spin","-icon")+"-loading"),style:{fontSize:c}}):p||(g?B.createElement(uSt,{size:c}):B.createElement(bm,{style:{fontSize:c}})));return B.createElement("div",DR({ref:t,className:zt(M,(e={},e[M+"-block"]=y,e[M+"-loading"]=k,e[M+"-with-tip"]=f&&!u,e),l),style:o},b),G_(u)?B.createElement(B.Fragment,null,P,f?B.createElement("div",{className:M+"-tip"},f):null):B.createElement(B.Fragment,null,B.createElement("div",{className:M+"-children"},u),k&&B.createElement("div",{className:M+"-loading-layer",style:{fontSize:c}},B.createElement("span",{className:M+"-loading-layer-inner"},P,f?B.createElement("div",{className:M+"-tip"},f):null))))}var VK=B.forwardRef(dSt);VK.displayName="Spin";var BR=function(){return BR=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},BR.apply(this,arguments)},pSt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},fSt={size:"default",bordered:!0};function gSt(n,t){var e,i,r=V.useContext(pe),s=r.getPrefixCls,a=r.loadingElement,o=r.componentConfig,l=r.rtl,u=nn(n,fSt,o==null?void 0:o.Card),h=u.className,c=u.children,d=u.bordered,p=u.loading,f=u.hoverable,g=u.size,_=u.title,v=u.extra,y=u.cover,b=u.actions,S=u.headerStyle,A=u.bodyStyle,w=pSt(u,["className","children","bordered","loading","hoverable","size","title","extra","cover","actions","headerStyle","bodyStyle"]),C=s("card"),k=b&&b.length?B.createElement("div",{className:C+"-actions"},B.createElement("div",{className:C+"-actions-right"},b.map(function(I,D){return B.createElement("span",{key:"action-"+D,className:C+"-actions-item"},I)}))):null,M=!1,P=!1,E=B.Children.map(c,function(I){if(I&&I.type){if(I.type===a3)M=!0;else if(I.type===s3)return P=!0,B.cloneElement(I,{actionList:k})}return I});return B.createElement("div",BR({},w,{ref:t,className:zt(C,C+"-size-"+g,(e={},e[C+"-loading"]=p,e[C+"-bordered"]=d,e[C+"-hoverable"]=f,e[C+"-contain-grid"]=M,e[C+"-rtl"]=l,e),h)}),_||v?B.createElement("div",{className:zt(C+"-header",(i={},i[C+"-header-no-title"]=!_,i)),style:S},_&&B.createElement("div",{className:C+"-header-title"},_),v&&B.createElement("div",{className:C+"-header-extra"},v)):null,y?B.createElement("div",{className:C+"-cover"},y):null,B.createElement("div",{className:C+"-body",style:A},p?a||B.createElement(VK,null):E,P?null:k))}var mSt=B.forwardRef(gSt),s2=mSt;s2.Meta=s3;s2.Grid=a3;s2.displayName="Card";function WK(n,t){t===void 0&&(t=[]);var e=V.useRef(!1);V.useEffect(function(){e.current?n():e.current=!0},t)}function c7(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function d7(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?c7(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):c7(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function vSt(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=d7(d7({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-link")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{d:"m14.1 25.414-4.95 4.95a6 6 0 0 0 8.486 8.485l8.485-8.485a6 6 0 0 0 0-8.485m7.779.707 4.95-4.95a6 6 0 1 0-8.486-8.485l-8.485 8.485a6 6 0 0 0 0 8.485"}))}var o3=B.forwardRef(vSt);o3.defaultProps={isIcon:!0};o3.displayName="IconLink";var FR=function(){return FR=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},FR.apply(this,arguments)},_St=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},ySt={hoverable:!0};function bSt(n,t){var e,i=V.useContext(pe),r=i.getPrefixCls,s=i.componentConfig,a=i.rtl,o=nn(n,ySt,s==null?void 0:s.Link),l=o.className,u=o.style,h=o.children,c=o.icon,d=o.status,p=o.disabled,f=o.hoverable,g=_St(o,["className","style","children","icon","status","disabled","hoverable"]),_=xm({onKeyDown:o.onKeyDown}),v=r("link"),y="href"in o?"a":"span",b=function(S){p?(S.preventDefault(),S.stopPropagation()):o.onClick&&o.onClick(S)};return B.createElement(y,FR({className:zt(v,(e={},e[v+"-disabled"]=p,e[v+"-is-"+d]=d,e[v+"-with-icon"]=c,e[v+"-hoverless"]=!f,e[v+"-rtl"]=a,e),l),ref:t,tabIndex:p?-1:void 0},g,{style:u,onClick:b},_({onPressEnter:b})),c?B.createElement("span",{className:v+"-icon"},c===!0?B.createElement(o3,null):c):null,h)}var l3=V.forwardRef(bSt);l3.displayName="Link";var jR=function(){return jR=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jR.apply(this,arguments)},xSt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},SSt={type:"horizontal",orientation:"center"};function ASt(n,t){var e,i=V.useContext(pe),r=i.getPrefixCls,s=i.componentConfig,a=nn(n,SSt,s==null?void 0:s.Divider),o=a.children,l=a.style,u=a.className,h=a.type,c=a.orientation,d=xSt(a,["children","style","className","type","orientation"]),p=r("divider"),f=zt(p,p+"-"+h,(e={},e[p+"-with-text"]=o,e[p+"-with-text-"+c]=o&&c,e),u);return B.createElement("div",jR({role:"separator",ref:t,className:f,style:l},d),o&&h==="horizontal"?B.createElement("span",{className:p+"-text "+p+"-text-"+c},o):null)}var gA=V.forwardRef(ASt);gA.displayName="Divider";var NR="data-focus-lock",$K="data-focus-lock-disabled",wSt="data-no-focus-lock",CSt="data-autofocus-inside",kSt="data-no-autofocus";function NP(n,t){return typeof n=="function"?n(t):n&&(n.current=t),n}function TSt(n,t){var e=V.useState(function(){return{value:n,callback:t,facade:{get current(){return e.value},set current(i){var r=e.value;r!==i&&(e.value=i,e.callback(i,r))}}}})[0];return e.callback=t,e.facade}var MSt=typeof window<"u"?V.useLayoutEffect:V.useEffect,p7=new WeakMap;function PSt(n,t){var e=TSt(null,function(i){return n.forEach(function(r){return NP(r,i)})});return MSt(function(){var i=p7.get(e);if(i){var r=new Set(i),s=new Set(n),a=e.current;r.forEach(function(o){s.has(o)||NP(o,null)}),s.forEach(function(o){r.has(o)||NP(o,a)})}p7.set(e,n)},[n]),e}var zP={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},zR=function(){return zR=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++){e=arguments[i];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},zR.apply(this,arguments)};function GK(n){return n}function UK(n,t){t===void 0&&(t=GK);var e=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return e.length?e[e.length-1]:n},useMedium:function(s){var a=t(s,i);return e.push(a),function(){e=e.filter(function(o){return o!==a})}},assignSyncMedium:function(s){for(i=!0;e.length;){var a=e;e=[],a.forEach(s)}e={push:function(o){return s(o)},filter:function(){return e}}},assignMedium:function(s){i=!0;var a=[];if(e.length){var o=e;e=[],o.forEach(s),a=e}var l=function(){var h=a;a=[],h.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),e={push:function(h){a.push(h),u()},filter:function(h){return a=a.filter(h),e}}}};return r}function u3(n,t){return t===void 0&&(t=GK),UK(n,t)}function ESt(n){n===void 0&&(n={});var t=UK(null);return t.options=zR({async:!0,ssr:!1},n),t}var YK=u3({},function(n){var t=n.target,e=n.currentTarget;return{target:t,currentTarget:e}}),XK=u3(),OSt=u3(),RSt=ESt({async:!0,ssr:typeof document<"u"}),ISt=V.createContext(void 0),LSt=[],h3=V.forwardRef(function(t,e){var i,r=V.useState(),s=r[0],a=r[1],o=V.useRef(),l=V.useRef(!1),u=V.useRef(null),h=V.useState({}),c=h[1],d=t.children,p=t.disabled,f=p===void 0?!1:p,g=t.noFocusGuards,_=g===void 0?!1:g,v=t.persistentFocus,y=v===void 0?!1:v,b=t.crossFrame,S=b===void 0?!0:b,A=t.autoFocus,w=A===void 0?!0:A;t.allowTextSelection;var C=t.group,k=t.className,M=t.whiteList,P=t.hasPositiveIndices,E=t.shards,I=E===void 0?LSt:E,D=t.as,N=D===void 0?"div":D,O=t.lockProps,L=O===void 0?{}:O,H=t.sideCar,j=t.returnFocus,G=j===void 0?!1:j,U=t.focusOptions,$=t.onActivation,q=t.onDeactivation,tt=V.useState({}),it=tt[0],nt=V.useCallback(function(pt){var jt=pt.captureFocusRestore;if(!u.current){var Lt,Yt=(Lt=document)==null?void 0:Lt.activeElement;u.current=Yt,Yt!==document.body&&(u.current=jt(Yt))}o.current&&$&&$(o.current),l.current=!0,c()},[$]),K=V.useCallback(function(){l.current=!1,q&&q(o.current),c()},[q]),J=V.useCallback(function(pt){var jt=u.current;if(jt){var Lt=(typeof jt=="function"?jt():jt)||document.body,Yt=typeof G=="function"?G(Lt):G;if(Yt){var Nt=typeof Yt=="object"?Yt:void 0;u.current=null,pt?Promise.resolve().then(function(){return Lt.focus(Nt)}):Lt.focus(Nt)}}},[G]),Q=V.useCallback(function(pt){l.current&&YK.useMedium(pt)},[]),dt=XK.useMedium,bt=V.useCallback(function(pt){o.current!==pt&&(o.current=pt,a(pt))},[]),xt=ii((i={},i[$K]=f&&"disabled",i[NR]=C,i),L),ht=_!==!0,St=ht&&_!=="tail",yt=PSt([e,bt]),vt=V.useMemo(function(){return{observed:o,shards:I,enabled:!f,active:l.current}},[f,l.current,I,s]);return V.createElement(V.Fragment,null,ht&&[V.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:f?-1:0,style:zP}),P?V.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:f?-1:1,style:zP}):null],!f&&V.createElement(H,{id:it,sideCar:RSt,observed:s,disabled:f,persistentFocus:y,crossFrame:S,autoFocus:w,whiteList:M,shards:I,onActivation:nt,onDeactivation:K,returnFocus:J,focusOptions:U}),V.createElement(N,ii({ref:yt},xt,{className:k,onBlur:dt,onFocus:Q}),V.createElement(ISt.Provider,{value:vt},d)),St&&V.createElement("div",{"data-focus-guard":!0,tabIndex:f?-1:0,style:zP}))});h3.propTypes={};function DSt(n,t){function e(i){return i.displayName||i.name||"Component"}return function(r){var s=[],a;function o(){a=n(s.map(function(u){return u.props})),t(a)}var l=function(u){$k(h,u);function h(){return u.apply(this,arguments)||this}h.peek=function(){return a};var c=h.prototype;return c.componentDidMount=function(){s.push(this),o()},c.componentDidUpdate=function(){o()},c.componentWillUnmount=function(){var p=s.indexOf(this);s.splice(p,1),o()},c.render=function(){return B.createElement(r,this.props)},h}(V.PureComponent);return Ti(l,"displayName","SideEffect("+e(r)+")"),l}}var Tl=function(n){for(var t=Array(n.length),e=0;e<n.length;++e)t[e]=n[e];return t},qd=function(n){return Array.isArray(n)?n:[n]},KK=function(n){return Array.isArray(n)?n[0]:n},BSt=function(n){if(n.nodeType!==Node.ELEMENT_NODE)return!1;var t=window.getComputedStyle(n,null);return!t||!t.getPropertyValue?!1:t.getPropertyValue("display")==="none"||t.getPropertyValue("visibility")==="hidden"},qK=function(n){return n.parentNode&&n.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?n.parentNode.host:n.parentNode},ZK=function(n){return n===document||n&&n.nodeType===Node.DOCUMENT_NODE},FSt=function(n){return n.hasAttribute("inert")},jSt=function(n,t){return!n||ZK(n)||!BSt(n)&&!FSt(n)&&t(qK(n))},JK=function(n,t){var e=n.get(t);if(e!==void 0)return e;var i=jSt(t,JK.bind(void 0,n));return n.set(t,i),i},NSt=function(n,t){return n&&!ZK(n)?VSt(n)?t(qK(n)):!1:!0},QK=function(n,t){var e=n.get(t);if(e!==void 0)return e;var i=NSt(t,QK.bind(void 0,n));return n.set(t,i),i},tq=function(n){return n.dataset},zSt=function(n){return n.tagName==="BUTTON"},eq=function(n){return n.tagName==="INPUT"},iq=function(n){return eq(n)&&n.type==="radio"},HSt=function(n){return!((eq(n)||zSt(n))&&(n.type==="hidden"||n.disabled))},VSt=function(n){var t=n.getAttribute(kSt);return![!0,"true",""].includes(t)},c3=function(n){var t;return!!(n&&(!((t=tq(n))===null||t===void 0)&&t.focusGuard))},HR=function(n){return!c3(n)},WSt=function(n){return!!n},$St=function(n,t){var e=Math.max(0,n.tabIndex),i=Math.max(0,t.tabIndex),r=e-i,s=n.index-t.index;if(r){if(!e)return 1;if(!i)return-1}return r||s},GSt=function(n){return n.tabIndex<0&&!n.hasAttribute("tabindex")?0:n.tabIndex},d3=function(n,t,e){return Tl(n).map(function(i,r){var s=GSt(i);return{node:i,index:r,tabIndex:e&&s===-1?(i.dataset||{}).focusGuard?0:-1:s}}).filter(function(i){return!t||i.tabIndex>=0}).sort($St)},USt=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],p3=USt.join(","),YSt="".concat(p3,", [data-focus-guard]"),nq=function(n,t){return Tl((n.shadowRoot||n).children).reduce(function(e,i){return e.concat(i.matches(t?YSt:p3)?[i]:[],nq(i))},[])},XSt=function(n,t){var e;return n instanceof HTMLIFrameElement&&(!((e=n.contentDocument)===null||e===void 0)&&e.body)?Ng([n.contentDocument.body],t):[n]},Ng=function(n,t){return n.reduce(function(e,i){var r,s=nq(i,t),a=(r=[]).concat.apply(r,s.map(function(o){return XSt(o,t)}));return e.concat(a,i.parentNode?Tl(i.parentNode.querySelectorAll(p3)).filter(function(o){return o===i}):[])},[])},KSt=function(n){var t=n.querySelectorAll("[".concat(CSt,"]"));return Tl(t).map(function(e){return Ng([e])}).reduce(function(e,i){return e.concat(i)},[])},f3=function(n,t){return Tl(n).filter(function(e){return JK(t,e)}).filter(function(e){return HSt(e)})},f7=function(n,t){return t===void 0&&(t=new Map),Tl(n).filter(function(e){return QK(t,e)})},g3=function(n,t,e){return d3(f3(Ng(n,e),t),!0,e)},mA=function(n,t){return d3(f3(Ng(n),t),!1)},qSt=function(n,t){return f3(KSt(n),t)},Pd=function(n,t){return n.shadowRoot?Pd(n.shadowRoot,t):Object.getPrototypeOf(n).contains!==void 0&&Object.getPrototypeOf(n).contains.call(n,t)?!0:Tl(n.children).some(function(e){var i;if(e instanceof HTMLIFrameElement){var r=(i=e.contentDocument)===null||i===void 0?void 0:i.body;return r?Pd(r,t):!1}return Pd(e,t)})},ZSt=function(n){for(var t=new Set,e=n.length,i=0;i<e;i+=1)for(var r=i+1;r<e;r+=1){var s=n[i].compareDocumentPosition(n[r]);(s&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&t.add(r),(s&Node.DOCUMENT_POSITION_CONTAINS)>0&&t.add(i)}return n.filter(function(a,o){return!t.has(o)})},rq=function(n){return n.parentNode?rq(n.parentNode):n},m3=function(n){var t=qd(n);return t.filter(Boolean).reduce(function(e,i){var r=i.getAttribute(NR);return e.push.apply(e,r?ZSt(Tl(rq(i).querySelectorAll("[".concat(NR,'="').concat(r,'"]:not([').concat($K,'="disabled"])')))):[i]),e},[])},JSt=function(n){try{return n()}catch{return}},Z_=function(n){if(n===void 0&&(n=document),!(!n||!n.activeElement)){var t=n.activeElement;return t.shadowRoot?Z_(t.shadowRoot):t instanceof HTMLIFrameElement&&JSt(function(){return t.contentWindow.document})?Z_(t.contentWindow.document):t}},QSt=function(n,t){return n===t},tAt=function(n,t){return!!Tl(n.querySelectorAll("iframe")).some(function(e){return QSt(e,t)})},sq=function(n,t){return t===void 0&&(t=Z_(KK(n).ownerDocument)),!t||t.dataset&&t.dataset.focusGuard?!1:m3(n).some(function(e){return Pd(e,t)||tAt(e,t)})},eAt=function(n){n===void 0&&(n=document);var t=Z_(n);return t?Tl(n.querySelectorAll("[".concat(wSt,"]"))).some(function(e){return Pd(e,t)}):!1},iAt=function(n,t){return t.filter(iq).filter(function(e){return e.name===n.name}).filter(function(e){return e.checked})[0]||n},v3=function(n,t){return iq(n)&&n.name?iAt(n,t):n},nAt=function(n){var t=new Set;return n.forEach(function(e){return t.add(v3(e,n))}),n.filter(function(e){return t.has(e)})},g7=function(n){return n[0]&&n.length>1?v3(n[0],n):n[0]},m7=function(n,t){return n.indexOf(v3(t,n))},VR="NEW_FOCUS",rAt=function(n,t,e,i,r){var s=n.length,a=n[0],o=n[s-1],l=c3(i);if(!(i&&n.indexOf(i)>=0)){var u=i!==void 0?e.indexOf(i):-1,h=r?e.indexOf(r):u,c=r?n.indexOf(r):-1;if(u===-1)return c!==-1?c:VR;if(c===-1)return VR;var d=u-h,p=e.indexOf(a),f=e.indexOf(o),g=nAt(e),_=i!==void 0?g.indexOf(i):-1,v=_-(r?g.indexOf(r):u);if(!d&&c>=0||t.length===0)return c;var y=m7(n,t[0]),b=m7(n,t[t.length-1]);if(u<=p&&l&&Math.abs(d)>1)return b;if(u>=f&&l&&Math.abs(d)>1)return y;if(d&&Math.abs(v)>1)return c;if(u<=p)return b;if(u>f)return y;if(d)return Math.abs(d)>1?c:(s+c+d)%s}},sAt=function(n){return function(t){var e,i=(e=tq(t))===null||e===void 0?void 0:e.autofocus;return t.autofocus||i!==void 0&&i!=="false"||n.indexOf(t)>=0}},v7=function(n,t,e){var i=n.map(function(s){var a=s.node;return a}),r=f7(i.filter(sAt(e)));return r&&r.length?g7(r):g7(f7(t))},WR=function(n,t){return t===void 0&&(t=[]),t.push(n),n.parentNode&&WR(n.parentNode.host||n.parentNode,t),t},HP=function(n,t){for(var e=WR(n),i=WR(t),r=0;r<e.length;r+=1){var s=e[r];if(i.indexOf(s)>=0)return s}return!1},aq=function(n,t,e){var i=qd(n),r=qd(t),s=i[0],a=!1;return r.filter(Boolean).forEach(function(o){a=HP(a||o,o)||a,e.filter(Boolean).forEach(function(l){var u=HP(s,l);u&&(!a||Pd(u,a)?a=u:a=HP(u,a))})}),a},_7=function(n,t){return n.reduce(function(e,i){return e.concat(qSt(i,t))},[])},aAt=function(n,t){var e=new Map;return t.forEach(function(i){return e.set(i.node,i)}),n.map(function(i){return e.get(i)}).filter(WSt)},oAt=function(n,t){var e=Z_(qd(n).length>0?document:KK(n).ownerDocument),i=m3(n).filter(HR),r=aq(e||n,n,i),s=new Map,a=mA(i,s),o=a.filter(function(f){var g=f.node;return HR(g)});if(o[0]){var l=mA([r],s).map(function(f){var g=f.node;return g}),u=aAt(l,o),h=u.map(function(f){var g=f.node;return g}),c=u.filter(function(f){var g=f.tabIndex;return g>=0}).map(function(f){var g=f.node;return g}),d=rAt(h,c,l,e,t);if(d===VR){var p=v7(a,c,_7(i,s))||v7(a,h,_7(i,s));if(p)return{node:p};console.warn("focus-lock: cannot find any node to move focus into");return}return d===void 0?d:u[d]}},lAt=function(n){var t=m3(n).filter(HR),e=aq(n,n,t),i=d3(Ng([e],!0),!0,!0),r=Ng(t,!1);return i.map(function(s){var a=s.node,o=s.index;return{node:a,index:o,lockItem:r.indexOf(a)>=0,guard:c3(a)}})},_3=function(n,t){n&&("focus"in n&&n.focus(t),"contentWindow"in n&&n.contentWindow&&n.contentWindow.focus())},VP=0,WP=!1,oq=function(n,t,e){e===void 0&&(e={});var i=oAt(n,t);if(!WP&&i){if(VP>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),WP=!0,setTimeout(function(){WP=!1},1);return}VP++,_3(i.node,e.focusOptions),VP--}};function vv(n){if(!n)return null;if(typeof WeakRef>"u")return function(){return n||null};var t=n?new WeakRef(n):null;return function(){return(t==null?void 0:t.deref())||null}}var uAt=function(n){if(!n)return null;for(var t=[],e=n;e&&e!==document.body;)t.push({current:vv(e),parent:vv(e.parentElement),left:vv(e.previousElementSibling),right:vv(e.nextElementSibling)}),e=e.parentElement;return{element:vv(n),stack:t,ownerDocument:n.ownerDocument}},hAt=function(n){var t,e,i,r,s;if(n)for(var a=n.stack,o=n.ownerDocument,l=new Map,u=0,h=a;u<h.length;u++){var c=h[u],d=(t=c.parent)===null||t===void 0?void 0:t.call(c);if(d&&o.contains(d)){for(var p=(e=c.left)===null||e===void 0?void 0:e.call(c),f=c.current(),g=d.contains(f)?f:void 0,_=(i=c.right)===null||i===void 0?void 0:i.call(c),v=g3([d],l),y=(s=(r=g??(p==null?void 0:p.nextElementSibling))!==null&&r!==void 0?r:_)!==null&&s!==void 0?s:p;y;){for(var b=0,S=v;b<S.length;b++){var A=S[b];if(y!=null&&y.contains(A.node))return A.node}y=y.nextElementSibling}if(v.length)return v[0].node}}},cAt=function(n){var t=uAt(n);return function(){return hAt(t)}},dAt=function(n,t,e){if(!n||!t)return console.error("no element or scope given"),{};var i=qd(t);if(i.every(function(a){return!Pd(a,n)}))return console.error("Active element is not contained in the scope"),{};var r=e?g3(i,new Map):mA(i,new Map),s=r.findIndex(function(a){var o=a.node;return o===n});if(s!==-1)return{prev:r[s-1],next:r[s+1],first:r[0],last:r[r.length-1]}},pAt=function(n,t){var e=t?g3(qd(n),new Map):mA(qd(n),new Map);return{first:e[0],last:e[e.length-1]}},fAt=function(n){return Object.assign({scope:document.body,cycle:!0,onlyTabbable:!0},n)},lq=function(n,t,e){t===void 0&&(t={});var i=fAt(t),r=dAt(n,i.scope,i.onlyTabbable);if(r){var s=e(r,i.cycle);s&&_3(s.node,i.focusOptions)}},gAt=function(n,t){t===void 0&&(t={}),lq(n,t,function(e,i){var r=e.next,s=e.first;return r||i&&s})},mAt=function(n,t){t===void 0&&(t={}),lq(n,t,function(e,i){var r=e.prev,s=e.last;return r||i&&s})},uq=function(n,t,e){var i,r=pAt(n,(i=t.onlyTabbable)!==null&&i!==void 0?i:!0),s=r[e];s&&_3(s.node,t.focusOptions)},vAt=function(n,t){t===void 0&&(t={}),uq(n,t,"first")},_At=function(n,t){t===void 0&&(t={}),uq(n,t,"last")};function y3(n){setTimeout(n,1)}var yAt=function(t){return t&&"current"in t?t.current:t},bAt=function(){return document&&document.activeElement===document.body},xAt=function(){return bAt()||eAt()},lg=null,Lf=null,ug=null,J_=!1,SAt=function(){return!0},AAt=function(t){return(lg.whiteList||SAt)(t)},wAt=function(t,e){ug={observerNode:t,portaledElement:e}},CAt=function(t){return ug&&ug.portaledElement===t};function y7(n,t,e,i){var r=null,s=n;do{var a=i[s];if(a.guard)a.node.dataset.focusAutoGuard&&(r=a);else if(a.lockItem){if(s!==n)return;r=null}else break}while((s+=e)!==t);r&&(r.node.tabIndex=0)}var kAt=function(t){return t?!!J_:J_==="meanwhile"},TAt=function n(t,e,i){return e&&(e.host===t&&(!e.activeElement||i.contains(e.activeElement))||e.parentNode&&n(t,e.parentNode,i))},MAt=function(t,e){return e.some(function(i){return TAt(t,i,i)})},vA=function(){var t=!1;if(lg){var e=lg,i=e.observed,r=e.persistentFocus,s=e.autoFocus,a=e.shards,o=e.crossFrame,l=e.focusOptions,u=i||ug&&ug.portaledElement,h=document&&document.activeElement;if(u){var c=[u].concat(a.map(yAt).filter(Boolean));if((!h||AAt(h))&&(r||kAt(o)||!xAt()||!Lf&&s)&&(u&&!(sq(c)||h&&MAt(h,c)||CAt(h))&&(document&&!Lf&&h&&!s?(h.blur&&h.blur(),document.body.focus()):(t=oq(c,Lf,{focusOptions:l}),ug={})),J_=!1,Lf=document&&document.activeElement),document&&h!==document.activeElement&&document.querySelector("[data-focus-auto-guard]")){var d=document&&document.activeElement,p=lAt(c),f=p.map(function(g){var _=g.node;return _}).indexOf(d);f>-1&&(p.filter(function(g){var _=g.guard,v=g.node;return _&&v.dataset.focusAutoGuard}).forEach(function(g){var _=g.node;return _.removeAttribute("tabIndex")}),y7(f,p.length,1,p),y7(f,-1,-1,p))}}}return t},hq=function(t){vA()&&t&&(t.stopPropagation(),t.preventDefault())},b3=function(){return y3(vA)},PAt=function(t){var e=t.target,i=t.currentTarget;i.contains(e)||wAt(i,e)},EAt=function(){return null},cq=function(){J_="just",y3(function(){J_="meanwhile"})},OAt=function(){document.addEventListener("focusin",hq),document.addEventListener("focusout",b3),window.addEventListener("blur",cq)},RAt=function(){document.removeEventListener("focusin",hq),document.removeEventListener("focusout",b3),window.removeEventListener("blur",cq)};function IAt(n){return n.filter(function(t){var e=t.disabled;return!e})}var dq={moveFocusInside:oq,focusInside:sq,focusNextElement:gAt,focusPrevElement:mAt,focusFirstElement:vAt,focusLastElement:_At,captureFocusRestore:cAt};function LAt(n){var t=n.slice(-1)[0];t&&!lg&&OAt();var e=lg,i=e&&t&&t.id===e.id;lg=t,e&&!i&&(e.onDeactivation(),n.filter(function(r){var s=r.id;return s===e.id}).length||e.returnFocus(!t)),t?(Lf=null,(!i||e.observed!==t.observed)&&t.onActivation(dq),vA(),y3(vA)):(RAt(),Lf=null)}YK.assignSyncMedium(PAt);XK.assignMedium(b3);OSt.assignMedium(function(n){return n(dq)});const DAt=DSt(IAt,LAt)(EAt);var pq=V.forwardRef(function(t,e){return V.createElement(h3,ii({sideCar:DAt,ref:e},t))}),fq=h3.propTypes||{};fq.sideCar;Wk(fq,["sideCar"]);pq.propTypes={};var BAt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),FAt=function(n){BAt(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.container=null,e}return t.prototype.componentDidMount=function(){var e=this;this.createContainer(),this.timer=setTimeout(function(){e.container||e.createContainer()})},t.prototype.componentWillUnmount=function(){clearTimeout(this.timer)},t.prototype.createContainer=function(){var e=this.props.getContainer;this.container=e==null?void 0:e(),this.forceUpdate()},t.prototype.render=function(){var e=this.props.children;return this.container?hu.createPortal(e,this.container):null},t}(V.Component),jAt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),$R=function(){return $R=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$R.apply(this,arguments)},NAt=function(n){jAt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.componentWillUnmount=function(){this.instance=null},t.prototype.render=function(){var e=this,i=this.props,r=i.forceRender,s=i.visible;return r||s||this.instance?B.createElement(FAt,$R({ref:function(a){return e.instance=a}},this.props)):null},t.displayName="Portal",t.defaultProps={getContainer:function(){return document.body}},t}(V.Component);function zAt(n,t){var e=t.hidden,i=V.useRef(!1),r=V.useRef({}),s=function(l){return l.tagName==="BODY"?window.innerWidth-(document.body.clientWidth||document.documentElement.clientWidth):l.offsetWidth-l.clientWidth},a=function(){var l=n();if(l&&l.style.overflow!=="hidden"){var u=l.style;i.current=!0;var h=s(l);h&&(r.current.width=u.width,l.style.width="calc("+(l.style.width||"100%")+" - "+h+"px)"),r.current.overflow=u.overflow,l.style.overflow="hidden"}},o=function(){if(i.current&&n()){var l=n(),u=r.current;Object.keys(u).forEach(function(h){return l.style[h]=u[h]})}i.current=!1,r.current={}};return V.useEffect(function(){return e?a():o(),function(){o()}},[n,e]),[o,a]}var gq=V.createContext({}),mq=V.createContext({}),vq=V.createContext({}),Df=function(){return Df=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Df.apply(this,arguments)},HAt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},VAt={span:24};function b7(n){return typeof n=="string"&&/\d+[px|%|em|rem|]{1}/.test(n)?"0 0 "+n:n}function WAt(n,t){var e,i=V.useContext(pe),r=i.getPrefixCls,s=i.componentConfig,a=i.rtl,o=nn(n,VAt,s==null?void 0:s["Grid.Col"]),l=V.useContext(gq),u=l.gutter,h=l.div,c=o.className,d=o.style,p=o.children,f=o.span,g=o.offset,_=o.order,v=o.pull,y=o.push,b=o.xs,S=o.sm,A=o.md,w=o.lg,C=o.xl,k=o.xxl,M=o.xxxl,P=o.flex,E=HAt(o,["className","style","children","span","offset","order","pull","push","xs","sm","md","lg","xl","xxl","xxxl","flex"]);function I(U,$){var q={xs:b,sm:S,md:A,lg:w,xl:C,xxl:k,xxxl:M};return Object.keys(q).forEach(function(tt){var it=q[tt];Un(it)?it>=0&&($[U+"-"+tt+"-"+it]=!0):$e(it)&&($[U+"-"+tt+"-"+it.span]=it.span,$[U+"-"+tt+"-offset-"+it.offset]=it.offset,$[U+"-"+tt+"-order-"+it.order]=it.order,$[U+"-"+tt+"-pull-"+it.pull]=it.pull,$[U+"-"+tt+"-push-"+it.push]=it.push)}),$}var D=r("col"),N=(e={},e[""+D]=!h,e[D+"-order-"+_]=_,e[D+"-"+f]=!h&&!b&&!S&&!A&&!w&&!C&&!k&&!M,e[D+"-offset-"+g]=g,e[D+"-pull-"+v]=v,e[D+"-push-"+y]=y,e[D+"-rtl"]=a,e);N=I(D,N);var O=zt(P?D:N,c),L={};if(Array.isArray(u)&&!h){var H=u[0]&&u[0]/2||0,j=u[1]&&u[1]/2||0;H&&(L.paddingLeft=H,L.paddingRight=H),j&&(L.paddingTop=j,L.paddingBottom=j)}var G=V.useMemo(function(){return b7(P)?{flex:b7(P)}:{}},[P]);return B.createElement("div",Df({ref:t},E,{style:Df(Df(Df({},d),L),G),className:O}),p)}var _q=V.forwardRef(WAt);_q.displayName="Col";var _0=function(){return _0=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_0.apply(this,arguments)},$At=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},GAt=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},UAt={gutter:0,align:"start",justify:"start"};function YAt(n,t){var e,i=V.useContext(pe),r=i.getPrefixCls,s=i.componentConfig,a=i.rtl,o=nn(n,UAt,s==null?void 0:s["Grid.Row"]),l=o.className,u=o.style,h=o.children,c=o.div,d=o.align,p=o.justify,f=o.gutter,g=$At(o,["className","style","children","div","align","justify","gutter"]),_=GAt(V.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0,xxxl:!0}),2),v=_[0],y=_[1],b=V.useRef();V.useEffect(function(){return b.current=jg.subscribe(function(I){(!Array.isArray(f)&&typeof f=="object"||Array.isArray(f)&&(typeof f[0]=="object"||typeof f[1]=="object"))&&y(I)}),function(){jg.unsubscribe(b.current)}},[]);function S(I){var D=0;if(typeof I=="object")for(var N=0;N<fA.length;N++){var O=fA[N];if(v[O]&&I[O]!==void 0){D=I[O];break}}else D=I;return D}var A=r("row"),w=zt((e={},e[""+A]=!c,e[A+"-align-"+d]=d,e[A+"-justify-"+p]=p,e[A+"-rtl"]=a,e),l),C={},k=S(Array.isArray(f)?f[0]:f),M=S(Array.isArray(f)?f[1]:0);if((k||M)&&!c){var P=-k/2,E=-M/2;P&&(C.marginLeft=P,C.marginRight=P),E&&(C.marginTop=E,C.marginBottom=E)}return B.createElement("div",_0({ref:t},An(g,["gutter"]),{style:_0(_0({},u),C),className:w}),B.createElement(gq.Provider,{value:{gutter:[k,M],div:c}},h))}var yq=V.forwardRef(YAt);yq.displayName="Row";var XAt=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s};function x7(n){return $e(n)}var y0=function(n,t,e){e===void 0&&(e=!1);var i=V.useRef(),r=XAt(V.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0,xxxl:!0}),2),s=r[0],a=r[1];V.useEffect(function(){return i.current=jg.subscribe(function(l){x7(n)&&a(l)}),function(){jg.unsubscribe(i.current)}},[]);var o=V.useMemo(function(){var l=t;if(x7(n))for(var u=0;u<fA.length;u++){var h=fA[u];if((s[h]||h==="xs"&&e)&&n[h]!==void 0){l=n[h];break}}else l=n;return l},[s,n,t,e]);return o};function KAt(n,t){var e=t.span,i=t.offset,r=t.suffix,s=e??1,a=i??0,o=Math.min(a,n),l=Math.min(o>0?s+a:s,n);return{span:l,offset:o,suffix:r}}function qAt(n){var t=n.cols,e=n.collapsed,i=n.collapsedRows,r=n.itemDataList,s=!1,a=[];function o(d){return Math.ceil(d/t)>i}if(e){for(var l=0,u=0;u<r.length;u++)r[u].suffix&&(l+=r[u].span,a.push(u));if(!o(l))for(var h=0;h<r.length;){var c=r[h];if(!c.suffix){if(l+=c.span,o(l))break;a.push(h)}h++}s=r.some(function(d,p){return!d.suffix&&!a.includes(p)})}else a=r.map(function(d,p){return p});return{overflow:s,displayIndexList:a}}var b0=function(){return b0=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},b0.apply(this,arguments)},ex=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},ZAt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},S7=function(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))},JAt={collapsed:!1,collapsedRows:1,cols:24,colGap:0,rowGap:0};function QAt(n,t){var e,i=ex(V.useState(new Map),2),r=i[0],s=i[1],a=V.useContext(pe),o=a.getPrefixCls,l=a.componentConfig,u=a.rtl,h=nn(n,JAt,l==null?void 0:l.Grid),c=h.children,d=h.className,p=h.style,f=h.cols,g=h.colGap,_=h.rowGap,v=h.collapsed,y=h.collapsedRows,b=y0(f,24),S=y0(g,0),A=y0(_,0),w={gap:A+"px "+S+"px",gridTemplateColumns:"repeat("+b+", minmax(0px, 1fr))"},C=o("grid"),k=(e={},e[""+C]=!0,e[C+"-rtl"]=u,e),M=zt(k,d),P=function(){var D,N,O=[];try{for(var L=ZAt(r.entries()),H=L.next();!H.done;H=L.next()){var j=ex(H.value,2),G=j[0],U=j[1];O[G]=U}}catch($){D={error:$}}finally{try{H&&!H.done&&(N=L.return)&&N.call(L)}finally{if(D)throw D.error}}return O},E=P(),I=qAt({cols:b,collapsed:v,collapsedRows:y,itemDataList:E});return B.createElement("div",{ref:t,className:M,style:b0(b0({},w),p)},B.createElement(vq.Provider,{value:{collectItemData:function(D,N){r.set(D,N),s(new Map(S7([],ex(r),!1)))},removeItemData:function(D){r.delete(D),s(new Map(S7([],ex(r),!1)))}}},B.createElement(mq.Provider,{value:{cols:b,colGap:S,collapsed:v,overflow:I.overflow,displayIndexList:I.displayIndexList}},B.Children.map(c,function(D,N){if(D){var O=b0({__index__:N},D.props);return B.cloneElement(D,O)}return null}).filter(function(D){return q_(D,"type.__ARCO_GRID_ITEM__")}))))}var bq=V.forwardRef(QAt);bq.displayName="Grid";var ad=function(){return ad=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ad.apply(this,arguments)},twt={suffix:!1,offset:0,span:1};function ewt(n,t){var e,i=V.useContext(pe),r=i.getPrefixCls,s=i.componentConfig,a=i.rtl,o=nn(n,twt,s==null?void 0:s["Grid.GridItem"]),l=o.children,u=o.className,h=o.style,c=o.offset,d=o.span,p=o.__index__,f=V.useContext(mq),g=V.useContext(vq),_=g.collectItemData,v=g.removeItemData,y=f.colGap,b=f.cols,S=f.displayIndexList,A=f.overflow,w=y0(c,0),C=y0(d,1),k=r("grid-item"),M=S==null?void 0:S.includes(p),P=(e={},e[""+k]=!0,e[k+"-rtl"]=a,e),E=zt(P,u),I=V.useMemo(function(){return KAt(f.cols,{suffix:!!o.suffix,span:C,offset:w})},[f.cols,o.suffix,C,w]);V.useEffect(function(){return _(p,I),function(){v(p)}},[p,I]);var D=V.useMemo(function(){var H=I.offset,j=I.span;if(H>0){var G="(100% - "+y*(j-1)+"px) / "+j;return{marginLeft:"calc(("+G+" * "+H+") + "+y*H+"px)"}}return{}},[I,y]),N=V.useMemo(function(){var H=I.suffix,j=I.span;return H?""+(b-j+1):"span "+j},[I,b]),O=!M||C===0?{display:"none"}:{},L=ad(ad({gridColumn:N+" / span "+C},D),O);return B.createElement("div",{ref:t,className:E,style:ad(ad({},L),h)},ir(l)?l({overflow:A}):B.Children.map(l,function(H){return H&&f.collapsed&&B.isValidElement(H)&&!kc(H.type)?B.cloneElement(H,ad({overflow:A},H.props)):H}))}var iwt=V.forwardRef(ewt),x3=iwt;x3.displayName="GridItem";x3.__ARCO_GRID_ITEM__=!0;var ju=bq;ju.Col=_q;ju.Row=yq;ju.GridItem=x3;var rl=function(){return rl=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},rl.apply(this,arguments)};function nwt(n){var t=Kmt(),e=t.prefixCls,i=t.simple;return B.createElement(Nu,rl({prefixCls:e,simple:i},n),n.content)}var _A=function(n){var t=n.icon;if(!t&&t!==null&&(t=B.createElement($_,null),n.isNotice))switch(n.noticeType){case"info":t=B.createElement(Ok,null);break;case"success":t=B.createElement(o1,null);break;case"warning":t=B.createElement($_,null);break;case"error":t=B.createElement(Ek,null);break}return n.isNotice&&(n.hideCancel=!0),n.title=t===null&&n.title===null?null:B.createElement("span",null,t,n.title),n};function xq(n,t){var e,i=document.createElement("div");document.body.appendChild(i);var r=Ymt();function s(p){var f=B.createElement(Ig,rl({},r),B.createElement(nwt,rl({},p,{onCancel:h})));e?e.render(f):e=BB(f,i)}var a=s,o=rl(rl({},n),{visible:!1}),l=function(){var p,f=n.onOk||n.onConfirm;f&&(p=f()),p&&p.then&&(o.confirmLoading=!0,a(o),p.then(function(){h(!0)},function(g){console.error(g),o.confirmLoading=!1,a(o)})),p||h(!0)};o.onOk=l,o=_A(o),o.visible=!0,a(o);function u(){e=e==null?void 0:e._unmount(),i.parentNode&&i.parentNode.removeChild(i);for(var p=0;p<md.length;p++){var f=md[p];if(f===d){md.splice(p,1);break}}}function h(p){!p&&n.onCancel&&n.onCancel(),o.visible=!1,o.afterClose=function(){n.afterClose&&n.afterClose(),u()},a(o)}function c(p){o=rl(rl(rl({},o),{title:n.title}),p),o=_A(o),a(o)}function d(){o.visible=!1,o.afterClose=function(){n.afterClose&&n.afterClose(),u()},a(o)}return md.push(d),{close:d,update:c}}var od=function(){return od=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},od.apply(this,arguments)},A7=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s};function rwt(n,t){var e=A7(V.useState(!0),2),i=e[0],r=e[1],s=A7(V.useState(n),2),a=s[0],o=s[1];V.useImperativeHandle(t,function(){return{update:function(h){o(h)},close:function(){r(!1)}}});function l(){var h=a.onOk&&a.onOk();h&&h.then&&(o(function(c){return od(od({},c),{confirmLoading:!0})}),h.then(function(){r(!1)},function(c){console.error(c),o(function(d){return od(od({},d),{confirmLoading:!1})})})),h||r(!1)}function u(){a.onCancel&&a.onCancel(),r(!1)}return B.createElement(Nu,od({unmountOnExit:!0,simple:!0},a,{visible:i,onOk:l,onCancel:u}),a.content)}const swt=V.forwardRef(rwt);var go=function(){return go=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},go.apply(this,arguments)};function awt(){var n=V.useRef(),t=B.createElement(jB,{ref:n}),e=0;function i(s){var a;e+=1;var o=V.createRef(),l=go({},s);function u(){s.afterClose&&s.afterClose(),c()}var h=B.createElement(swt,go({key:e,ref:o},_A(go({},s)),{afterClose:u}));(a=n.current)===null||a===void 0||a.addInstance(h);function c(){var f;(f=n.current)===null||f===void 0||f.removeInstance(h)}function d(){var f;(f=o.current)===null||f===void 0||f.close()}function p(f){var g;l=go(go({},l),f),(g=o.current)===null||g===void 0||g.update(_A(go({},l)))}return md.push(d),{close:d,update:p}}var r={confirm:function(s){return i(go({},s))}};return["info","success","warning","error"].forEach(function(s){r[s]=function(a){return i(go(go({},a),{isNotice:!0,noticeType:s}))}}),[r,t]}var yo=function(){return yo=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},yo.apply(this,arguments)},owt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},$P=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},GR=null,lwt=0;bp||document.documentElement.addEventListener("click",function(n){GR={left:n.clientX,top:n.clientY},setTimeout(function(){GR=null},100)},!0);var uwt={mask:!0,maskClosable:!0,mountOnEnter:!0,escToExit:!0,getPopupContainer:function(){return document.body},alignCenter:!0};function hwt(n,t){var e,i,r,s=V.useContext(pe),a=nn(n,uwt,(r=s.componentConfig)===null||r===void 0?void 0:r.Modal),o=a.className,l=a.style,u=a.visible,h=a.simple,c=a.title,d=a.children,p=a.cancelText,f=a.okText,g=a.okButtonProps,_=a.cancelButtonProps,v=a.getPopupContainer,y=v===void 0?function(){return document.body}:v,b=a.footer,S=a.afterClose,A=a.confirmLoading,w=a.mountOnEnter,C=a.unmountOnExit,k=a.afterOpen,M=a.hideCancel,P=a.autoFocus,E=a.focusLock,I=a.maskClosable,D=a.mask,N=a.alignCenter,O=a.getChildrenPopupContainer,L=a.wrapClassName,H=a.escToExit,j=a.modalRender,G=a.maskStyle,U=a.wrapStyle,$=a.closeIcon,q=owt(a,["className","style","visible","simple","title","children","cancelText","okText","okButtonProps","cancelButtonProps","getPopupContainer","footer","afterClose","confirmLoading","mountOnEnter","unmountOnExit","afterOpen","hideCancel","autoFocus","focusLock","maskClosable","mask","alignCenter","getChildrenPopupContainer","wrapClassName","escToExit","modalRender","maskStyle","wrapStyle","closeIcon"]),tt=V.useRef(null),it=V.useRef(null),nt=V.useRef(null),K=$P(V.useState(),2),J=K[0],Q=K[1],dt=$P(V.useState(),2),bt=dt[0],xt=dt[1],ht=V.useRef(null),St=V.useRef(!1),yt=V.useRef(!1),vt=V.useRef(!0);u&&vt.current&&(vt.current=!1);var pt=V.useRef();pt.current||(pt.current=lwt++);var jt=$P(Ns(!1,{defaultValue:!1,value:A}),2),Lt=jt[0],Yt=jt[1],Nt=s.getPrefixCls("modal",a.prefixCls),te=s.locale,ge=s.rtl,Pe=!h,we="closable"in a?a.closable:Pe,Ze=V.useCallback(function(){return Yk(y())},[y]);zAt(Ze,{hidden:u&&D});var je=function(){a.onCancel&&a.onCancel()},oe=function(me){H&&u&&me.key===SR.key&&(me.stopPropagation(),je())},ne=V.useRef(!1),De=function(me){yt.current&&(yt.current=!1,!ne.current&&I&&D&&me.target===me.currentTarget&&setTimeout(function(){je()},100))},ye=function(me){var Cr=a.onConfirm,Xu=a.onOk,Dc=Xu||Cr,Ol;Dc&&(Ol=Dc(me)),Ol&&Ol.then&&(Yt(!0),Ol.then(function(){Yt(!1)},function(Gm){Yt(!1),console.error(Gm)}))};V.useEffect(function(){var me=null;return H&&(me=setTimeout(function(){var Cr;K_(document.body,tt.current)&&((Cr=tt.current)===null||Cr===void 0||Cr.focus())})),function(){me&&clearTimeout(me)}},[u,H]);var Xe=function(){var me;if(u&&bt===void 0&&tt.current){var Cr=+((me=window.getComputedStyle(tt.current,null))===null||me===void 0?void 0:me.zIndex);isNaN(Cr)||xt(Cr+1)}},Gi=function(){if(b!==null){var me=B.createElement(jo,yo({onClick:je},_),p||te.Modal.cancelText),Cr=B.createElement(jo,yo({loading:Lt,onClick:ye,type:"primary"},g),f||te.Modal.okText),Xu=ir(b)?b(me,Cr):b||B.createElement(B.Fragment,null,!M&&me,Cr);return B.createElement("div",{className:Nt+"-footer"},Xu)}},wn=s.focusLock.modal,Mi=!!wn,di=$e(wn)&&wn.autoFocus,Ui=E!==void 0?E:Mi,oo=P!==void 0?P:di,V1=B.createElement(Ig,yo({},s,{prefixCls:a.prefixCls||s.prefixCls,locale:te,zIndex:bt||1050,getPopupContainer:function(me){return typeof O=="function"?O(me):it.current}}),c&&B.createElement("div",{className:Nt+"-header"},B.createElement("div",{className:Nt+"-title",id:"arco-dialog-"+pt.current},c)),B.createElement("div",{ref:it,className:Nt+"-content"},d),Gi(),we&&($!==void 0?B.createElement("span",{onClick:je,className:Nt+"-close-icon"},$):B.createElement(Rg,{tabIndex:-1,onClick:je,className:Nt+"-close-icon",role:"button","aria-label":"Close"},B.createElement(Kd,null)))),jT=c?{"aria-labelledby":"arco-dialog-"+pt.current}:{},W1=B.createElement("div",yo({role:"dialog","aria-modal":"true"},jT,{className:zt(Nt,(e={},e[Nt+"-simple"]=h,e[Nt+"-rtl"]=ge,e),o),style:l,ref:nt}),Ui?B.createElement(pq,{crossFrame:!1,disabled:!u,autoFocus:oo,lockProps:{tabIndex:-1,onKeyDown:oe}},V1):B.createElement(B.Fragment,null,V1)),Ep=function(me){if(!St.current){var Cr="";if(ht.current){var Xu=me.getBoundingClientRect(),Dc=ht.current,Ol=Dc.left,Gm=Dc.top;Cr=Ol-Xu.left+"px "+(Gm-Xu.top)+"px"}me.style.transformOrigin=Cr}},$m=vt.current?!w:!!nt.current;return u||$m?B.createElement(NAt,{visible:u,forceRender:$m,getContainer:y},B.createElement("div",{ref:t},D?B.createElement(U_,{in:u,timeout:400,appear:!0,mountOnEnter:w,classNames:"fadeModal",unmountOnExit:C,onEnter:function(me){me&&(me.style.display="block")},onExited:function(me){me&&(me.style.display="none")}},B.createElement("div",{"aria-hidden":!0,className:Nt+"-mask",style:G})):null,B.createElement("div",yo({},An(q,["content","icon","showIcon","isNotice","noticeType","onCancel","onOk","onConfirm","closable","prefixCls"]),{tabIndex:!Ui||!oo?-1:null,ref:function(me){tt.current=me,Xe()},className:zt(Nt+"-wrapper",(i={},i[Nt+"-wrapper-no-mask"]=!D,i[Nt+"-wrapper-align-center"]=N,i[Nt+"-wrapper-rtl"]=ge,i),L),style:yo(yo({},U||{}),{display:u||J?"block":"none",overflow:!u&&J?"hidden":""}),onKeyDown:!Ui||!oo?oe:null,onMouseDown:function(me){yt.current=me.target===me.currentTarget},onClick:De}),B.createElement(U_,{in:u,timeout:400,appear:!0,classNames:"zoomModal",unmountOnExit:C,mountOnEnter:w,onEnter:function(me){me&&(Q(!0),ht.current=GR,St.current=!!me.style.transformOrigin,Ep(me),nt.current=me)},onEntered:function(me){me&&(Ep(me),ht.current=null,k==null||k())},onExit:function(){ne.current=!0},onExited:function(me){me&&(Q(!1),Ep(me),S==null||S(),ne.current=!1,C&&(nt.current=null))}},B.cloneElement(ir(j)?j(W1):W1,{onMouseDown:function(){yt.current=!1},onMouseUp:function(){yt.current=!1}}))))):null}var Nu=V.forwardRef(hwt);Nu.displayName="Modal";Nu.config=Xmt;Nu.confirm=function(n){return xq(n)};Nu.useModal=awt;["info","success","warning","error"].forEach(function(n){Nu[n]=function(t){return xq(yo(yo({},t),{isNotice:!0,noticeType:n}))}});Nu.destroyAll=function(){for(;md.length;){var n=md.pop();n&&n()}};var x0=function(){return x0=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},x0.apply(this,arguments)},cwt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},dwt=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s};function Sq(n){var t,e,i=V.useContext(pe),r=i.getPrefixCls,s=i.componentConfig,a=i.rtl,o=nn(n,{},s==null?void 0:s.PageHeader),l=o.title,u=o.subTitle,h=o.extra,c=o.children,d=o.backIcon,p=o.footer,f=o.breadcrumb,g=cwt(o,["title","subTitle","extra","children","backIcon","footer","breadcrumb"]),_=xm(),v=dwt(V.useState(!1),2),y=v[0],b=v[1],S=V.useRef(),A=r("page-header");return B.createElement(Tu,{onResize:function(){S.current&&b(S.current.offsetWidth<768)},getTargetDOMNode:function(){return S.current}},B.createElement("div",x0({},An(g,["onBack"]),{ref:S,className:zt(""+A,(t={},t[A+"-with-breadcrumb"]=f,t[A+"-with-content"]=c,t[A+"-with-footer"]=p,t[A+"-wrap"]=y,t[A+"-rtl"]=a,t),o.className),style:o.style}),B.createElement("div",{className:A+"-head-wrapper"},f&&B.createElement(r3,x0({},f)),B.createElement("div",{className:A+"-head"},B.createElement("div",{className:zt(A+"-head-main",(e={},e[A+"-head-main-with-back"]=d,e))},d&&B.createElement(Rg,x0({prefix:A,tabIndex:0,role:"button",className:A+"-back",onClick:o.onBack},_({onPressEnter:o.onBack})),B.createElement("span",{className:A+"-back-icon"},d===!0?a?B.createElement(Bg,null):B.createElement(Fg,null):d)),l&&B.createElement("div",{className:A+"-title"},l),u&&B.createElement(B.Fragment,null,B.createElement("div",{className:A+"-divider"}),B.createElement("div",{className:A+"-sub-title"},u))),h&&B.createElement("div",{className:A+"-head-extra"},h))),c&&B.createElement("div",{className:A+"-content"},c),p&&B.createElement("div",{className:A+"-footer"},p)))}Sq.displayName="PageHeader";function Aq(n){var t=[];return B.Children.forEach(n,function(e){$X.isFragment(e)&&e.props?t=t.concat(Aq(e.props.children)):e!=null&&t.push(e)}),t}var UR=function(){return UR=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},UR.apply(this,arguments)},pwt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},fwt={size:"small",direction:"horizontal"};function gwt(n,t){var e,i=V.useContext(pe),r=i.getPrefixCls,s=i.componentConfig,a=i.rtl,o=nn(n,fwt,s==null?void 0:s.Space),l=o.className,u=o.style,h=o.children,c=o.size,d=o.direction,p=o.align,f=o.wrap,g=o.split,_=pwt(o,["className","style","children","size","direction","align","wrap","split"]),v=r("space"),y=p||(d==="horizontal"?"center":""),b=zt(v,(e={},e[v+"-"+d]=d,e[v+"-align-"+y]=y,e[v+"-wrap"]=f,e[v+"-rtl"]=a,e),l);function S(C){if(Un(C))return C;switch(C){case"mini":return 4;case"small":return 8;case"medium":return 16;case"large":return 24;default:return 8}}var A=Aq(h);function w(C){var k,M,P,E,I=A.length===C+1,D=a?"marginLeft":"marginRight";if(typeof c=="string"||typeof c=="number"){var N=S(c);return f?I?{marginBottom:N}:(k={},k[""+D]=N,k.marginBottom=N,k):I?{}:(M={},M[d==="vertical"?"marginBottom":D]=N,M)}if(ym(c)){var O=S(c[0]),L=S(c[1]);return f?I?{marginBottom:L}:(P={},P[""+D]=O,P.marginBottom=L,P):d==="vertical"?{marginBottom:L}:(E={},E[""+D]=O,E)}}return B.createElement("div",UR({ref:t,className:b,style:u},_),A.map(function(C,k){var M,P=((M=C)===null||M===void 0?void 0:M.key)||k,E=g!=null&&k>0;return B.createElement(V.Fragment,{key:P},E&&B.createElement("div",{className:v+"-item-split"},g),B.createElement("div",{className:v+"-item",style:w(k)},C))}))}var wq=V.forwardRef(gwt);wq.displayName="Space";function mwt(n,t){var e=V.useContext(pe).getPrefixCls,i=e("typography"),r=n.className,s=n.style,a=n.children,o=zt(i,r);return B.createElement("article",{ref:t,style:s,className:o},a)}var Cq=V.forwardRef(mwt);Cq.displayName="Typography";var vwt=function(n,t,e,i){function r(s){return s instanceof e?s:new e(function(a){a(s)})}return new(e||(e=Promise))(function(s,a){function o(h){try{u(i.next(h))}catch(c){a(c)}}function l(h){try{u(i.throw(h))}catch(c){a(c)}}function u(h){h.done?s(h.value):r(h.value).then(o,l)}u((i=i.apply(n,t||[])).next())})},_wt=function(n,t){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(u){return function(h){return l([u,h])}}function l(u){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,r&&(s=u[0]&2?r.return:u[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,u[1])).done)return s;switch(r=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,r=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){e.label=u[1];break}if(u[0]===6&&e.label<s[1]){e.label=s[1],s=u;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(u);break}s[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(n,e)}catch(h){u=[6,h],r=0}finally{i=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};function ywt(n){return vwt(this,void 0,void 0,function(){var t,e,i,r,s;return _wt(this,function(a){switch(a.label){case 0:if(!(navigator.clipboard&&navigator.clipboard.writeText))return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,navigator.clipboard.writeText(n)];case 2:return a.sent(),[2];case 3:return t=a.sent(),console.error(t??new DOMException("The request is not allowed","NotAllowedError")),[3,4];case 4:e=document.createElement("span"),e.textContent=n,e.style.whiteSpace="pre",document.body.appendChild(e),i=window.getSelection(),r=window.document.createRange(),i.removeAllRanges(),r.selectNode(e),i.addRange(r),s=!1;try{s=window.document.execCommand("copy")}catch(o){console.log("error",o)}return i.removeAllRanges(),window.document.body.removeChild(e),[2,s?Promise.resolve():Promise.reject(new DOMException("The request is not allowed","NotAllowedError"))]}})})}function w7(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function C7(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?w7(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):w7(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function bwt(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=C7(C7({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-copy")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{d:"M20 6h18a2 2 0 0 1 2 2v22M8 16v24c0 1.105.891 2 1.996 2h20.007A1.99 1.99 0 0 0 32 40.008V15.997A1.997 1.997 0 0 0 30 14H10a2 2 0 0 0-2 2Z"}))}var S3=B.forwardRef(bwt);S3.defaultProps={isIcon:!0};S3.displayName="IconCopy";function k7(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function T7(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?k7(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):k7(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function xwt(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=T7(T7({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-edit")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{d:"m30.48 19.038 5.733-5.734a1 1 0 0 0 0-1.414l-5.586-5.586a1 1 0 0 0-1.414 0l-5.734 5.734m7 7L15.763 33.754a1 1 0 0 1-.59.286l-6.048.708a1 1 0 0 1-1.113-1.069l.477-6.31a1 1 0 0 1 .29-.631l14.7-14.7m7 7-7-7M6 42h36"}))}var A3=B.forwardRef(xwt);A3.defaultProps={isIcon:!0};A3.displayName="IconEdit";var M7=function(n){return kc(n)||Un(n)};function Q_(n){var t=[""];return B.Children.forEach(n,function(e){var i=t.length-1,r=t[i];M7(e)&&M7(r)?t[i]=""+r+e:e&&e.props&&e.props.children&&t.push(Q_(e.props.children))}),t.join("")}var ld=function(){return ld=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ld.apply(this,arguments)},Swt=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s};function Awt(n){var t=n.children,e=n.copyable,i=n.editable,r=n.ellipsis,s=n.expanding,a=n.setEditing,o=n.onClickExpand,l=n.forceShowExpand,u=n.isEllipsis,h=n.currentContext,c=h===void 0?{}:h,d=xm(),p=c.getPrefixCls,f=c.locale,g=p("typography"),_=Swt(V.useState(!1),2),v=_[0],y=_[1],b=V.useRef(null),S=$e(e)?e:{},A=$e(r)?r:{},w=$e(i)?i:{},C=ym(A.expandNodes)?A.expandNodes:[f.Typography.fold,f.Typography.unfold];V.useEffect(function(){return function(){clearTimeout(b.current),b.current=null}},[]);function k(N){if(!v){var O=S.text!==void 0?S.text:Q_(t);ywt(O),y(!0),S.onCopy&&S.onCopy(O,N),b.current=setTimeout(function(){y(!1)},3e3)}}var M=function(N){w.onStart&&w.onStart(Q_(t),N),a(!0)},P=S.tooltips||[f.Typography.copy,f.Typography.copied],E=e&&B.createElement(pc,ld({content:v?P[1]:P[0]},S.tooltipProps),B.createElement("span",ld({className:v?g+"-operation-copied":g+"-operation-copy",onClick:k,role:"button","aria-label":P[0],tabIndex:0},d({onPressEnter:k})),v?B.createElement(o1,null):S.icon||B.createElement(S3,null))),I=i&&B.createElement(pc,ld({content:f.Typography.edit},w.tooltipProps),B.createElement("span",ld({tabIndex:0,"aria-label":f.Typography.edit,role:"button",className:g+"-operation-edit",onClick:M},d({onPressEnter:M})),B.createElement(A3,null))),D=l||A.expandable&&u?B.createElement("a",ld({className:g+"-operation-expand",onClick:o,role:"button",tabIndex:0,"aria-label":f.Typography.unfold},d({onPressEnter:o})),s?C[0]:C[1]):null;return B.createElement(B.Fragment,null,D,I,E)}function wwt(n,t){var e=n.prefixCls,i=n.children,r=n.setEditing,s=n.editableConfig,a=n.style,o=zt(e+"-typography",e+"-edit-content",n.className),l=Q_(i),u=V.useRef(null);V.useEffect(function(){if(u.current&&u.current.focus&&u.current.focus(),u.current&&u.current.dom){var p=u.current.dom.value.length;u.current.dom.setSelectionRange(p,p)}},[]);function h(){r(!1),s.onEnd&&s.onEnd(l)}function c(p){s.onChange&&s.onChange(p)}function d(){h()}return B.createElement("div",{className:o,style:a,ref:t},B.createElement(Tc.TextArea,{className:e+"-edit-content-textarea",onBlur:d,ref:u,value:l,autoSize:!0,onChange:c,onPressEnter:h}))}const Cwt=V.forwardRef(wwt);var Bf=function(){return Bf=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Bf.apply(this,arguments)},_v=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},kwt="hxj",mn;(function(n){n[n.INIT=0]="INIT",n[n.BEFORE_MEASURE=1]="BEFORE_MEASURE",n[n.MEASURING=2]="MEASURING",n[n.MEASURE_END=3]="MEASURE_END",n[n.NO_NEED_ELLIPSIS=4]="NO_NEED_ELLIPSIS"})(mn||(mn={}));function Twt(n){var t=n.children,e=n.rows,i=e===void 0?1:e,r=n.width,s=n.expanding,a=n.renderMeasureContent,o=n.simpleEllipsis,l=n.onEllipsis,u=n.suffix,h=n.expandNodes,c=n.expandable,d=n.ellipsisStr,p=V.useRef(),f=V.useRef(),g=_v(V.useState([0,0,0]),2),_=g[0],v=g[1],y=_v(V.useState(0),2),b=y[0],S=y[1],A=_v(V.useState(mn.NO_NEED_ELLIPSIS),2),w=A[0],C=A[1],k=_v(_,3),M=k[0],P=k[1],E=k[2],I=_v(V.useState(!1),2),D=I[0],N=I[1],O=V.useMemo(function(){return B.Children.toArray(t)},[t]),L=V.useRef(0);WK(function(){l&&l(D)},[D]);var H=function(Q){return kc(Q)||Un(Q)},j=function(Q){var dt=0;return Q.forEach(function(bt){H(bt)?dt+=String(bt).length:dt+=1}),dt},G=V.useMemo(function(){return j(O)},[O]),U=rA(function(Q){return v(Q)}),$=function(Q){var dt=[],bt=0;if(Q>=G)return O;for(var xt in O){var ht=O[xt];if(bt>=Q)return dt;var St=H(ht)?String(ht).length:1;if(St>Q-bt)return dt.push(String(ht).slice(0,Q-bt)),bt=Q,dt;bt+=St,dt.push(ht)}return dt},q=function(){var Q,dt;if(b){if(w===mn.INIT){var bt=i*b,xt=(Q=f.current)===null||Q===void 0?void 0:Q.offsetHeight,ht=xt>bt;!ht||o||s?(C(mn.MEASURE_END),N(ht),v([0,G,G])):(N(!0),C(mn.BEFORE_MEASURE))}else if(w===mn.BEFORE_MEASURE){var St=p==null?void 0:p.current.offsetWidth,yt=i*r;if(St>i*r){var vt=Math.max(yt/St-.1,0),pt=Math.min(yt/St+.1,1),jt=Math.floor(vt*G),Lt=Math.ceil(pt*G),Yt=Math.floor((jt+Lt)/2);L.current=Yt}C(mn.MEASURING)}else if(w===mn.MEASURING)if(M!==E-1){var xt=(dt=f.current)===null||dt===void 0?void 0:dt.offsetHeight,bt=i*b,Nt=M,te=E;xt<=bt?Nt=P:te=P;var ge=Math.floor((te+Nt)/2);U([Nt,ge,te])}else U([M,M,M]),C(mn.MEASURE_END)}};d0(function(){n.rows&&r?(v([0,Math.floor(G/2),G]),C(mn.INIT)):C(mn.NO_NEED_ELLIPSIS)},[G,o,s,r,u,h,c,d,n.rows]),d0(function(){if(p.current&&w===mn.INIT){var Q=p.current.offsetHeight;S(Q)}},[w]),d0(function(){q()},[w,P,M,E,b]);var tt={zIndex:-999,position:"fixed",opacity:0,padding:0,margin:0},it=Bf({whiteSpace:"nowrap"},tt),nt=o?Bf({textOverflow:"clip"},tt):tt,K;if(w===mn.INIT||w===mn.BEFORE_MEASURE)K=B.createElement("div",null,B.createElement("div",{ref:p,style:it},w===mn.INIT?kwt:a(t,!1)),B.createElement("div",{ref:f,style:Bf({width:r},nt)},a(t,D))),K=K.props.children;else if(w===mn.MEASURING){var J={height:b*i,overflow:"hidden"};K=B.createElement("div",null,B.createElement("div",{ref:f,style:Bf({width:r},nt)},a($(P),D)),B.createElement("div",{style:J},$(L.current))),K=K.props.children}else w===mn.MEASURE_END?K=a($(P),D):w===mn.NO_NEED_ELLIPSIS&&(K=a(t,!1));return{ellipsisNode:K,isEllipsis:D,measureStatus:w}}var Mwt=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},Pwt=function(n,t){if(typeof window<"u"&&window.CSS&&window.CSS.supports)return Gr(t)?window.CSS.supports(n):window.CSS.supports(n,t);if(typeof document<"u"&&document.createElement){var e=document.createElement("div");return e.setAttribute("style",n+":"+t+";"),typeof e.style[n]<"u"}return!1},Ewt={display:" -webkit-box","-webkit-line-clamp":2},Owt=function(){return Object.entries(Ewt).every(function(n){var t=Mwt(n,2),e=t[0],i=t[1];return Pwt(e,i)})};function Rwt(n){var t=n.cssEllipsis,e=n.ellipsisStr,i=e===void 0?"...":e,r=n.suffix,s=n.rows,a=V.useMemo(function(){return!t||s>1&&!Owt()?!1:i==="..."&&!r},[i,t,s,r]),o={textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},l={textOverflow:"ellipsis",whiteSpace:"normal",overflow:"hidden",WebkitLineClamp:""+n.rows,WebkitBoxOrient:"vertical",display:"-webkit-box"};return{simpleEllipsis:a,ellipsisStyle:a?n.rows>1?l:o:{}}}var P7=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},E7=function(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))};function Iwt(n){var t=null,e=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];t||(n.apply(void 0,E7([],P7(i),!1)),t=Ao(function(){})),t&&pa(t),t=Ao(function(){n.apply(void 0,E7([],P7(i),!1)),t=null})};return e.cancel=function(){pa(t),t=null},e}var na=function(){return na=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},na.apply(this,arguments)},Lwt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},GP=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s};function Dwt(n,t){var e=n.type,i=n.bold,r=n.disabled,s=n.mark,a=n.underline,o=n.delete,l=n.code,u=[],h=[];return e&&h.push(t+"-"+e),r&&h.push(t+"-disabled"),i&&u.push("b"),a&&u.push("u"),o&&u.push("del"),l&&u.push("code"),s&&u.push("mark"),{component:u,className:h}}function Bwt(n,t){var e,i=n.componentType,r=n.style,s=n.className,a=n.children,o=n.editable,l=n.ellipsis,u=n.heading,h=n.blockquote,c=Lwt(n,["componentType","style","className","children","editable","ellipsis","heading","blockquote"]),d=V.useContext(pe),p=d.getPrefixCls,f=d.rtl,g=p("typography"),_=V.useRef(),v=Dwt(n,g),y=v.component,b=v.className,S=GP(V.useState(!1),2),A=S[0],w=S[1],C=GP(V.useState(0),2),k=C[0],M=C[1],P=$e(o)?o:{},E="editing"in P?P.editing:A,I=l?na({rows:1,ellipsisStr:"...",cssEllipsis:!1},$e(l)?l:{}):{},D=I.wrapper||B.Fragment,N=GP(Ns(!1,{defaultValue:I.defaultExpanded,value:I.expanded}),2),O=N[0],L=N[1],H=Rwt(I),j=H.simpleEllipsis,G=H.ellipsisStyle,U=function(xt,ht){var St=Gr(I.ellipsisStr)?"...":I.ellipsisStr,yt=!Gr(I.suffix)&&I.suffix;return B.createElement(D,null,xt,ht&&!O&&!j?St:"",yt,K(ht))},$=Twt(na(na({},I),{children:a,expanding:O,width:k,renderMeasureContent:U,simpleEllipsis:j||O})),q=$.ellipsisNode,tt=$.isEllipsis,it=$.measureStatus,nt=Iwt(function(xt){var ht=(xt==null?void 0:xt[0]).contentRect;if(ht){var St=y.includes("code")?ht.width-18:ht.width,yt=[mn.NO_NEED_ELLIPSIS,mn.MEASURE_END];yt.includes(it)&&M(St)}});function K(xt){return B.createElement(B.Fragment,null,B.createElement(Awt,na({},n,{setEditing:w,onClickExpand:J,expanding:O,isEllipsis:xt,currentContext:d})))}function J(xt){L(!O),n.onClickExpand&&n.onClickExpand(xt),I.onExpand&&I.onExpand(!O,xt)}WK(function(){I.onEllipsis&&I.onEllipsis(tt)},[tt]),V.useImperativeHandle(t,function(){return _.current});function Q(xt,ht,St,yt){yt===void 0&&(yt={});var vt=xt;return ht.forEach(function(pt,jt){var Lt=jt===0?yt:{},Yt=$e(St.mark)&&St.mark.color?na({style:{backgroundColor:St.mark.color}},Lt):na({},Lt);vt=B.createElement(pt,na({},Yt),vt)}),vt}var dt;i==="Paragraph"?dt=h?"blockquote":"div":i==="Title"?dt="h"+u:i==="Text"&&(dt=l?"div":"span");function bt(){var xt,ht=Q_(B.Children.toArray(a)),St=I.showTooltip,yt=$e(I.showTooltip)&&I.showTooltip.type==="popover"?"popover":"tooltip",vt=$e(I.showTooltip)?I.showTooltip.props||{}:{},pt=yt==="popover"?kK:pc,jt=tt&&!St&&!O?{title:ht}:{},Lt=na({style:r},jt),Yt=tt&&St&&!O,Nt=B.createElement(Tu,{onResize:nt,getTargetDOMNode:function(){return _.current}},B.createElement(dt,na({ref:_,className:zt(g,b,(xt={},xt[g+"-rtl"]=f,xt),s)},Lt,An(c,["spacing","type","close","bold","disabled","mark","underline","delete","code","copyable","isEllipsis","expanding","onClickExpand","setEditing","forceShowExpand"])),j&&it!==mn.INIT&&!O&&tt?Q(U(B.createElement("span",{style:G},a),tt),y.length?y:["span"],n,{className:g+"-simple-ellipsis"}):Q(q,y,n)));return Yt?B.createElement(pt,na({content:ht},vt),B.createElement("span",null,Nt)):Nt}return E?B.createElement(Cwt,na({ref:t},n,{className:zt(g,b,(e={},e[g+"-rtl"]=f,e),g+"-"+dt,s),prefixCls:g,setEditing:w,editableConfig:P})):bt()}const w3=V.forwardRef(Bwt);var YR=function(){return YR=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},YR.apply(this,arguments)},Fwt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};function jwt(n,t){var e=n.heading,i=e===void 0?1:e,r=Fwt(n,["heading"]);return B.createElement(w3,YR({heading:i},r,{componentType:"Title",ref:t}))}var km=V.forwardRef(jwt);km.displayName="Title";var XR=function(){return XR=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},XR.apply(this,arguments)};function Nwt(n,t){return B.createElement(w3,XR({},n,{componentType:"Text",ref:t}))}var kq=V.forwardRef(Nwt);kq.displayName="Text";var KR=function(){return KR=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},KR.apply(this,arguments)};function zwt(n,t){var e=n.spacing,i=e===void 0?"default":e,r=n.className,s=V.useContext(pe).getPrefixCls,a=s("typography"),o=i==="close"?zt(a+"-spacing-close",r):r;return B.createElement(w3,KR({},n,{ref:t,componentType:"Paragraph",className:o}))}var Tm=V.forwardRef(zwt);Tm.displayName="Paragraph";var qR=function(){return qR=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},qR.apply(this,arguments)},ix=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],a;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return s},Hwt={rows:1,expandable:!0,defaultExpanded:!1},Vwt=function(n,t){var e,i,r=V.useContext(pe),s=nn(n,Hwt,(e=r.componentConfig)===null||e===void 0?void 0:e["Typography.Ellipsis"]),a=s.className,o=s.style,l=s.rows,u=s.disabled,h=s.showTooltip,c=s.children,d=s.expandable,p=s.expandRender,f=s.onExpand,g=s.onEllipsis,_=r.locale,v=bp?!1:/^((?!chrome|android).)*safari/i.test((i=navigator==null?void 0:navigator.userAgent)!==null&&i!==void 0?i:""),y=V.useRef(null),b=V.useRef(null),S=ix(V.useState(""),2),A=S[0],w=S[1],C=ix(V.useState(!1),2),k=C[0],M=C[1],P=V.useRef(null),E=V.useRef(null),I=ix(Ns(!1,{defaultValue:s.defaultExpanded,value:s.expanded}),2),D=I[0],N=I[1],O=ix(V.useState(!1),2),L=O[0],H=O[1],j=V.useMemo(function(){return $e(d)?!d.single&&l===1:l===1},[l,d]),G=V.useMemo(function(){return $e(h)?{tooltip:!0,tooltipProps:h}:{tooltip:!!h,tooltipProps:h}},[h]);V.useEffect(function(){if(b.current){var J=b.current.textContent;J&&w(J)}},[c,b]);var U=r.getPrefixCls("ellipsis"),$=function(){return p?p(D):B.createElement("span",{className:U+"-action-text"},D?_.Typography.fold:_.Typography.unfold)},q=function(){var J;return d&&L?B.createElement("div",{className:zt(U+"-action",(J={},J[U+"-action-collapsed"]=!D,J)),onClick:function(Q){D?(N(!1),f==null||f(!1,Q)):(N(!0),M(!1),f==null||f(!0,Q))}},$()):null},tt=V.useCallback(rA(function(){if(E.current&&P.current){var J=j?E.current.offsetWidth>P.current.offsetWidth:E.current.offsetHeight>P.current.offsetHeight;J?L===!1&&(H(!0),g==null||g(!0)):L===!0&&(H(!1),g==null||g(!1))}}),[L,j]),it=function(){return u?null:B.createElement(Tu,{onResize:tt},B.createElement("div",{className:j?zt(U+"-content-mirror",U+"-single"):zt(U+"-content-mirror",U+"-multiple",U+"-collapsed"),style:{WebkitBoxOrient:"vertical",MozBoxOrient:"vertical",WebkitLineClamp:l},ref:P},B.createElement(Tu,{onResize:tt},B.createElement("span",{ref:E,className:U+"-text"},c))))},nt=function(){var J,Q;return j?B.createElement("div",{className:zt(U+"-content",U+"-single")},B.createElement("span",{ref:b,className:U+"-text"},c)):v?B.createElement("div",{className:zt(U+"-content",U+"-multiple"),title:!G.tooltip&&L&&!D?A:void 0},!D&&q(),B.createElement("span",{ref:b,className:zt(U+"-text",(J={},J[U+"-collapsed"]=!D,J)),style:{WebkitBoxOrient:"vertical",MozBoxOrient:"vertical",WebkitLineClamp:l}},c),D&&q()):B.createElement("div",{className:zt(U+"-content",U+"-multiple",(Q={},Q[U+"-collapsed"]=!D,Q)),style:{WebkitBoxOrient:"vertical",MozBoxOrient:"vertical",WebkitLineClamp:l},title:!G.tooltip&&L&&!D?A:void 0},!D&&q(),B.createElement("span",{ref:b,className:U+"-text"},c),D&&q())},K=function(){return u?B.createElement("div",{className:U+"-content"},B.createElement("span",{ref:b,className:U+"-text"},c)):G.tooltip?B.createElement(pc,qR({content:A,popupVisible:k,disabled:!L||D,triggerProps:{mouseEnterDelay:100},onVisibleChange:function(J){J?L&&!D&&M(!0):M(!1)}},G.tooltipProps),nt()):nt()};return B.createElement("div",{ref:y,className:zt(U,a),style:o},it(),K())},Wwt=V.forwardRef(Vwt),Mc=Cq;Mc.Title=km;Mc.Text=kq;Mc.Paragraph=Tm;Mc.Ellipsis=Wwt;const $wt=()=>_t.jsx(_t.Fragment,{children:_t.jsx(Kr,{style:{padding:"10px",height:500},children:"Page Api"})}),Gwt=(...n)=>{console!=null&&console.warn&&(Ed(n[0])&&(n[0]=`react-i18next:: ${n[0]}`),console.warn(...n))},O7={},ZR=(...n)=>{Ed(n[0])&&O7[n[0]]||(Ed(n[0])&&(O7[n[0]]=new Date),Gwt(...n))},Tq=(n,t)=>()=>{if(n.isInitialized)t();else{const e=()=>{setTimeout(()=>{n.off("initialized",e)},0),t()};n.on("initialized",e)}},R7=(n,t,e)=>{n.loadNamespaces(t,Tq(n,e))},I7=(n,t,e,i)=>{Ed(e)&&(e=[e]),e.forEach(r=>{n.options.ns.indexOf(r)<0&&n.options.ns.push(r)}),n.loadLanguages(t,Tq(n,i))},Uwt=(n,t,e={})=>!t.languages||!t.languages.length?(ZR("i18n.languages were undefined or empty",t.languages),!0):t.hasLoadedNamespace(n,{lng:e.lng,precheck:(i,r)=>{var s;if(((s=e.bindI18n)==null?void 0:s.indexOf("languageChanging"))>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!r(i.isLanguageChangingTo,n))return!1}}),Ed=n=>typeof n=="string",Ywt=n=>typeof n=="object"&&n!==null,Xwt=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Kwt={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},qwt=n=>Kwt[n],Zwt=n=>n.replace(Xwt,qwt);let JR={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Zwt};const Jwt=(n={})=>{JR={...JR,...n}},Qwt=()=>JR;let Mq;const tCt=n=>{Mq=n},eCt=()=>Mq,iCt={type:"3rdParty",init(n){Jwt(n.options.react),tCt(n)}},nCt=V.createContext();class rCt{constructor(){Js(this,"getUsedNamespaces",()=>Object.keys(this.usedNamespaces));this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(e=>{var i;(i=this.usedNamespaces)[e]??(i[e]=!0)})}}const sCt=(n,t)=>{const e=V.useRef();return V.useEffect(()=>{e.current=n},[n,t]),e.current},Pq=(n,t,e,i)=>n.getFixedT(t,e,i),aCt=(n,t,e,i)=>V.useCallback(Pq(n,t,e,i),[n,t,e,i]),Mm=(n,t={})=>{var S,A,w,C;const{i18n:e}=t,{i18n:i,defaultNS:r}=V.useContext(nCt)||{},s=e||i||eCt();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new rCt),!s){ZR("You will need to pass in an i18next instance by using initReactI18next");const k=(P,E)=>Ed(E)?E:Ywt(E)&&Ed(E.defaultValue)?E.defaultValue:Array.isArray(P)?P[P.length-1]:P,M=[k,{},!1];return M.t=k,M.i18n={},M.ready=!1,M}(S=s.options.react)!=null&&S.wait&&ZR("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...Qwt(),...s.options.react,...t},{useSuspense:o,keyPrefix:l}=a;let u=r||((A=s.options)==null?void 0:A.defaultNS);u=Ed(u)?[u]:u||["translation"],(C=(w=s.reportNamespaces).addUsedNamespaces)==null||C.call(w,u);const h=(s.isInitialized||s.initializedStoreOnce)&&u.every(k=>Uwt(k,s,a)),c=aCt(s,t.lng||null,a.nsMode==="fallback"?u:u[0],l),d=()=>c,p=()=>Pq(s,t.lng||null,a.nsMode==="fallback"?u:u[0],l),[f,g]=V.useState(d);let _=u.join();t.lng&&(_=`${t.lng}${_}`);const v=sCt(_),y=V.useRef(!0);V.useEffect(()=>{const{bindI18n:k,bindI18nStore:M}=a;y.current=!0,!h&&!o&&(t.lng?I7(s,t.lng,u,()=>{y.current&&g(p)}):R7(s,u,()=>{y.current&&g(p)})),h&&v&&v!==_&&y.current&&g(p);const P=()=>{y.current&&g(p)};return k&&(s==null||s.on(k,P)),M&&(s==null||s.store.on(M,P)),()=>{y.current=!1,s&&(k==null||k.split(" ").forEach(E=>s.off(E,P))),M&&s&&M.split(" ").forEach(E=>s.store.off(E,P))}},[s,_]),V.useEffect(()=>{y.current&&h&&g(d)},[s,l,h]);const b=[f,s,h];if(b.t=f,b.i18n=s,b.ready=h,h||!h&&!o)return b;throw new Promise(k=>{t.lng?I7(s,t.lng,u,()=>k()):R7(s,u,()=>k())})},oCt=zs.Item,lCt=()=>{const{t:n}=Mm(),t=n("gallery.algorithmList",{returnObjects:!0});return _t.jsx(zs,{defaultSelectedKeys:["0"],style:{width:"100%",margin:0,padding:0},children:t==null?void 0:t.map((e,i)=>_t.jsx(oCt,{children:_t.jsx(l3,{style:{width:"100%",height:"100%",marginLeft:10},href:`#${e.title}`,children:e==null?void 0:e.title})},`${i}`))})},Eq=n=>n;var vn;(function(n){n["desktop-browser"]="desktop-browser",n["mobile-browser"]="mobile-browser",n.node="node",n.worker="worker",n.miniApp="miniApp",n.wx="wx",n.tt="tt",n.harmony="harmony",n["desktop-miniApp"]="desktop-miniApp",n.lynx="lynx"})(vn||(vn={}));var mt;(function(n){n.cartesianAxis="cartesianAxis",n.cartesianBandAxis="cartesianAxis-band",n.cartesianLinearAxis="cartesianAxis-linear",n.cartesianTimeAxis="cartesianAxis-time",n.cartesianLogAxis="cartesianAxis-log",n.cartesianSymlogAxis="cartesianAxis-symlog",n.polarAxis="polarAxis",n.polarBandAxis="polarAxis-band",n.polarLinearAxis="polarAxis-linear",n.crosshair="crosshair",n.cartesianCrosshair="cartesianCrosshair",n.polarCrosshair="polarCrosshair",n.dataZoom="dataZoom",n.geoCoordinate="geoCoordinate",n.indicator="indicator",n.discreteLegend="discreteLegend",n.continuousLegend="continuousLegend",n.colorLegend="colorLegend",n.sizeLegend="sizeLegend",n.mapLabel="mapLabel",n.markLine="markLine",n.markArea="markArea",n.markPoint="markPoint",n.polarMarkLine="polarMarkLine",n.polarMarkArea="polarMarkArea",n.polarMarkPoint="polarMarkPoint",n.geoMarkPoint="geoMarkPoint",n.tooltip="tooltip",n.title="title",n.player="player",n.scrollBar="scrollBar",n.label="label",n.totalLabel="totalLabel",n.brush="brush",n.poptip="poptip",n.customMark="customMark"})(mt||(mt={}));var Oq={exports:{}};(function(n){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function r(l,u,h){this.fn=l,this.context=u,this.once=h||!1}function s(l,u,h,c,d){if(typeof h!="function")throw new TypeError("The listener must be a function");var p=new r(h,c||l,d),f=e?e+u:u;return l._events[f]?l._events[f].fn?l._events[f]=[l._events[f],p]:l._events[f].push(p):(l._events[f]=p,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new i:delete l._events[u]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],h,c;if(this._eventsCount===0)return u;for(c in h=this._events)t.call(h,c)&&u.push(e?c.slice(1):c);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},o.prototype.listeners=function(u){var h=e?e+u:u,c=this._events[h];if(!c)return[];if(c.fn)return[c.fn];for(var d=0,p=c.length,f=new Array(p);d<p;d++)f[d]=c[d].fn;return f},o.prototype.listenerCount=function(u){var h=e?e+u:u,c=this._events[h];return c?c.fn?1:c.length:0},o.prototype.emit=function(u,h,c,d,p,f){var g=e?e+u:u;if(!this._events[g])return!1;var _=this._events[g],v=arguments.length,y,b;if(_.fn){switch(_.once&&this.removeListener(u,_.fn,void 0,!0),v){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,h),!0;case 3:return _.fn.call(_.context,h,c),!0;case 4:return _.fn.call(_.context,h,c,d),!0;case 5:return _.fn.call(_.context,h,c,d,p),!0;case 6:return _.fn.call(_.context,h,c,d,p,f),!0}for(b=1,y=new Array(v-1);b<v;b++)y[b-1]=arguments[b];_.fn.apply(_.context,y)}else{var S=_.length,A;for(b=0;b<S;b++)switch(_[b].once&&this.removeListener(u,_[b].fn,void 0,!0),v){case 1:_[b].fn.call(_[b].context);break;case 2:_[b].fn.call(_[b].context,h);break;case 3:_[b].fn.call(_[b].context,h,c);break;case 4:_[b].fn.call(_[b].context,h,c,d);break;default:if(!y)for(A=1,y=new Array(v-1);A<v;A++)y[A-1]=arguments[A];_[b].fn.apply(_[b].context,y)}}return!0},o.prototype.on=function(u,h,c){return s(this,u,h,c,!1)},o.prototype.once=function(u,h,c){return s(this,u,h,c,!0)},o.prototype.removeListener=function(u,h,c,d){var p=e?e+u:u;if(!this._events[p])return this;if(!h)return a(this,p),this;var f=this._events[p];if(f.fn)f.fn===h&&(!d||f.once)&&(!c||f.context===c)&&a(this,p);else{for(var g=0,_=[],v=f.length;g<v;g++)(f[g].fn!==h||d&&!f[g].once||c&&f[g].context!==c)&&_.push(f[g]);_.length?this._events[p]=_.length===1?_[0]:_:a(this,p)}return this},o.prototype.removeAllListeners=function(u){var h;return u?(h=e?e+u:u,this._events[h]&&a(this,h)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=e,o.EventEmitter=o,n.exports=o})(Oq);var uCt=Oq.exports;const xp=Du(uCt),Pm=(n,t)=>Object.prototype.toString.call(n)===`[object ${t}]`,Si=(n,t=!1)=>t?typeof n=="boolean":n===!0||n===!1||Pm(n,"Boolean"),ft=n=>typeof n=="function",F=n=>n==null,z=n=>n!=null,ae=n=>{const t=typeof n;return n!==null&&t==="object"||t==="function"},QR=n=>typeof n=="object"&&n!==null,No=function(n){if(!QR(n)||!Pm(n,"Object"))return!1;if(Object.getPrototypeOf(n)===null)return!0;let t=n;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(n)===t},Ri=n=>n===void 0,It=(n,t=!1)=>{const e=typeof n;return t?e==="string":e==="string"||Pm(n,"String")},ut=n=>Array.isArray?Array.isArray(n):Pm(n,"Array"),a2=function(n){return n!==null&&typeof n!="function"&&Number.isFinite(n.length)},hCt=n=>Pm(n,"Date"),Mt=(n,t=!1)=>{const e=typeof n;return t?e==="number":e==="number"||Pm(n,"Number")},cCt=n=>typeof n=="string"&&!isNaN(Number(n))&&!isNaN(parseFloat(n)),st=n=>Mt(n)&&Number.isFinite(n),Rq=n=>new RegExp(/^(http(s)?:\/\/)\w+[^\s]+(\.[^\s]+){1,}$/).test(n),Iq=n=>new RegExp(/^data:image\/(?:gif|png|jpeg|bmp|webp|svg\+xml)(?:;charset=utf-8)?;base64,(?:[A-Za-z0-9]|[+/])+={0,2}/g).test(n),dCt=n=>({}).toString.call(n).replace(/^\[object /,"").replace(/]$/,""),pCt=Object.prototype,fCt=function(n){const t=n&&n.constructor;return n===(typeof t=="function"&&t.prototype||pCt)},gCt=Object.prototype.hasOwnProperty;function Gt(n){if(F(n))return!0;if(a2(n))return!n.length;const t=dCt(n);if(t==="Map"||t==="Set")return!n.size;if(fCt(n))return!Object.keys(n).length;for(const e in n)if(gCt.call(n,e))return!1;return!0}const le=(n,t,e)=>{const i=It(t)?t.split("."):t;for(let r=0;r<i.length;r++)n=n?n[i[r]]:void 0;return n===void 0?e:n},mCt=Object.prototype.hasOwnProperty,Co=(n,t)=>n!=null&&mCt.call(n,t);function cs(n){let t;if(!z(n)||typeof n!="object")return n;const e=ut(n),i=n.length;t=e?new Array(i):typeof n=="object"?{}:Si(n)||Mt(n)||It(n)?n:hCt(n)?new Date(+n):void 0;const r=e?void 0:Object.keys(Object(n));let s=-1;if(t)for(;++s<(r||n).length;){const a=r?r[s]:s,o=n[a];t[a]=cs(o)}return t}function Lq(n,t,e=!1){if(t){if(n===t)return;if(z(t)&&typeof t=="object"){const i=Object(t),r=[];for(const o in i)r.push(o);let{length:s}=r,a=-1;for(;s--;){const o=r[++a];z(i[o])&&typeof i[o]=="object"?vCt(n,t,o,e):Dq(n,o,i[o])}}}}function vCt(n,t,e,i=!1){const r=n[e],s=t[e];let a=t[e],o=!0;if(ut(s)){if(i)a=[];else if(ut(r))a=r;else if(a2(r)){a=new Array(r.length);let l=-1;const u=r.length;for(;++l<u;)a[l]=r[l]}}else No(s)?(a=r,typeof r!="function"&&typeof r=="object"||(a={})):o=!1;o&&Lq(a,s,i),Dq(n,e,a)}function Dq(n,t,e){(e!==void 0&&!_Ct(n[t],e)||e===void 0&&!(t in n))&&(n[t]=e)}function _Ct(n,t){return n===t||Number.isNaN(n)&&Number.isNaN(t)}function gt(n,...t){let e=-1;const i=t.length;for(;++e<i;)Lq(n,t[e],!0);return n}function fc(n,t){if(!n||!No(n))return n;const e={};return Object.keys(n).forEach(i=>{const r=n[i];let s=!1;t.forEach(a=>{(It(a)&&a===i||a instanceof RegExp&&i.match(a))&&(s=!0)}),s||(e[i]=r)}),e}function L7(n){return Object.prototype.toString.call(n)}function D7(n){return Object.keys(n)}function mi(n,t,e){if(n===t)return!0;if(typeof n!=typeof t||n==null||t==null)return!1;if(Number.isNaN(n)&&Number.isNaN(t))return!0;if(L7(n)!==L7(t)||ft(n)||typeof n!="object")return!1;if(ut(n)){if(n.length!==t.length)return!1;for(let s=n.length-1;s>=0;s--)if(!mi(n[s],t[s]))return!1;return!0}if(!No(n))return!1;const i=D7(n),r=D7(t);if(i.length!==r.length)return!1;i.sort(),r.sort();for(let s=i.length-1;s>=0;s--)if(i[s]!=r[s])return!1;for(let s=i.length-1;s>=0;s--){const a=i[s];if(!mi(n[a],t[a]))return!1}return!0}function yCt(n){if(!n)return[];if(Object.keys)return Object.keys(n);const t=[];for(const e in n)n.hasOwnProperty(e)&&t.push(e);return t}function bCt(n,t,e){const i=yCt(t);for(let r=0;r<i.length;r++){const s=i[r];(e?t[s]!=null:n[s]==null)&&(n[s]=t[s])}return n}function On(n,t,e=!0){if(n="prototype"in n?n.prototype:n,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames){const i=Object.getOwnPropertyNames(t);for(let r=0;r<i.length;r++){const s=i[r];s!=="constructor"&&(e?t[s]!=null:n[s]==null)&&(n[s]=t[s])}}else bCt(n,t,e)}function ot(n){return z(n)?ut(n)?n:[n]:[]}function Gh(n){if(a2(n))return n[n.length-1]}const Vi=(n,t)=>{var e;if(n.length===0)return;let i=n[0];for(let r=1;r<n.length;r++){const s=n[r];((e=t==null?void 0:t(s,i))!==null&&e!==void 0?e:s-i>0)&&(i=s)}return i},dn=(n,t)=>{var e;if(n.length===0)return;let i=n[0];for(let r=1;r<n.length;r++){const s=n[r];((e=t==null?void 0:t(s,i))!==null&&e!==void 0?e:s-i<0)&&(i=s)}return i};function nx(n,t){if(!ut(n)||!ut(t)||n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}function xCt(n){return n&&ut(n)?Array.from(new Set(ot(n))):n}function Bq(n,t=Math.random){let e,i,r=n.length;for(;r;)e=Math.floor(t()*r),i=n[--r],n[r]=n[e],n[e]=i;return n}function tI(n){if(!ut(n))return[n];const t=[];for(const e of n)t.push(...tI(e));return t}function Fq(n,t,e){z(t)||(t=n,n=0),z(e)||(e=1);let i=-1;const r=0|Math.max(0,Math.ceil((t-n)/e)),s=new Array(r);for(;++i<r;)s[i]=n+i*e;return s}function jq(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function pl(n){return Number(n)}function SCt(n,t,e=pl){const i=n.length;if(!i)return;if(i<2)return e(n[0],0,n);const r=(i-1)*t,s=Math.floor(r),a=e(n[s],s,n);return a+(e(n[s+1],s+1,n)-a)*(r-s)}const ACt=typeof console<"u";function rx(n,t,e){const i=[t].concat([].slice.call(e));ACt&&console[n].apply(console,i)}var aa;(function(n){n[n.None=0]="None",n[n.Error=1]="Error",n[n.Warn=2]="Warn",n[n.Info=3]="Info",n[n.Debug=4]="Debug"})(aa||(aa={}));let ri=class ta{static getInstance(t,e){return ta._instance&&Mt(t)?ta._instance.level(t):ta._instance||(ta._instance=new ta(t,e)),ta._instance}static setInstance(t){return ta._instance=t}static setInstanceLevel(t){ta._instance?ta._instance.level(t):ta._instance=new ta(t)}static clearInstance(){ta._instance=null}constructor(t=aa.None,e){this._onErrorHandler=[],this._level=t,this._method=e}addErrorHandler(t){this._onErrorHandler.find(e=>e===t)||this._onErrorHandler.push(t)}removeErrorHandler(t){const e=this._onErrorHandler.findIndex(i=>i===t);e<0||this._onErrorHandler.splice(e,1)}callErrorHandler(...t){this._onErrorHandler.forEach(e=>e(...t))}canLogInfo(){return this._level>=aa.Info}canLogDebug(){return this._level>=aa.Debug}canLogError(){return this._level>=aa.Error}canLogWarn(){return this._level>=aa.Warn}level(t){return arguments.length?(this._level=+t,this):this._level}error(...t){var e;return this._level>=aa.Error&&(this._onErrorHandler.length?this.callErrorHandler(...t):rx((e=this._method)!==null&&e!==void 0?e:"error","ERROR",t)),this}warn(...t){return this._level>=aa.Warn&&rx(this._method||"warn","WARN",t),this}info(...t){return this._level>=aa.Info&&rx(this._method||"log","INFO",t),this}debug(...t){return this._level>=aa.Debug&&rx(this._method||"log","DEBUG",t),this}};ri._instance=null;function Nq(n,t,e=0,i){for(F(i)&&(i=n.length);e<i;){const r=e+i>>>1;jq(n[r],t)>0?i=r:e=r+1}return e}const B7=(n,t)=>zq(0,n.length,e=>t(n[e])),zq=(n,t,e)=>{let i=n,r=t;for(;i<r;){const s=Math.floor((i+r)/2);e(s)>=0?r=s:i=s+1}return i},wCt=(n,t)=>{let e=n;return e=n.sort(jq),SCt(e,.5)},CCt=1e-10,kCt=1e-10;function Ur(n,t,e=kCt,i=CCt){const r=i,s=e*Math.max(n,t);return Math.abs(n-t)<=Math.max(r,s)}function sl(n,t,e,i){return n>t&&!Ur(n,t,e,i)}function vo(n,t,e,i){return n<t&&!Ur(n,t,e,i)}const Em=n=>{let t=null,e=null;return(...i)=>(t&&i.every((r,s)=>r===t[s])||(t=i,e=n(...i)),e)},Zi=function(n,t,e){return n<t?t:n>e?e:n},ed=(n,t,e)=>{let[i,r]=n;r<i&&(i=n[1],r=n[0]);const s=r-i;return s>=e-t?[t,e]:(i=Math.min(Math.max(i,t),e-s),[i,i+s])};function o2(n,t){let e;return n>t&&(e=n,n=t,t=e),i=>Math.max(n,Math.min(t,i))}let yA=!1;try{yA=typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"}catch{yA=!1}function Ml(n,t,e){let i,r,s,a,o,l,u=0,h=!1,c=!1,d=!0;const p=!t&&t!==0&&yA;if(typeof n!="function")throw new TypeError("Expected a function");function f(S){const A=i,w=r;return i=r=void 0,u=S,a=n.apply(w,A),a}function g(S,A){return p?(cancelAnimationFrame(o),requestAnimationFrame(S)):setTimeout(S,A)}function _(S){const A=S-l;return l===void 0||A>=t||A<0||c&&S-u>=s}function v(){const S=Date.now();if(_(S))return y(S);o=g(v,function(A){const w=A-u,C=t-(A-l);return c?Math.min(C,s-w):C}(S))}function y(S){return o=void 0,d&&i?f(S):(i=r=void 0,a)}function b(...S){const A=Date.now(),w=_(A);if(i=S,r=this,l=A,w){if(o===void 0)return function(C){return u=C,o=g(v,t),h?f(C):a}(l);if(c)return o=g(v,t),f(l)}return o===void 0&&(o=g(v,t)),a}return t=+t||0,ae(e)&&(h=!!e.leading,c="maxWait"in e,c&&(s=Math.max(st(e.maxWait)?e.maxWait:0,t)),d="trailing"in e?!!e.trailing:d),b.cancel=function(){o!==void 0&&function(S){if(p)return cancelAnimationFrame(S);clearTimeout(S)}(o),u=0,i=l=r=o=void 0},b.flush=function(){return o===void 0?a:y(Date.now())},b.pending=function(){return o!==void 0},b}yA=!1;function Pc(n,t,e){let i=!0,r=!0;if(typeof n!="function")throw new TypeError("Expected a function");return ae(e)&&(i="leading"in e?!!e.leading:i,r="trailing"in e?!!e.trailing:r),Ml(n,t,{leading:i,trailing:r,maxWait:t})}function S0(n,t){return e=>n*(1-e)+t*e}function TCt(n,t){return function(e){return Math.round(n*(1-e)+t*e)}}function MCt(n,t){const e=n.valueOf(),i=t.valueOf(),r=new Date;return s=>(r.setTime(e*(1-s)+i*s),r)}const eI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,UP=new RegExp(eI.source,"g");function PCt(n){return function(){return n}}function ECt(n){return function(t){return n(t)+""}}function OCt(n,t){let e,i,r,s=eI.lastIndex=UP.lastIndex=0,a=-1;const o=[],l=[];for(n+="",t+="";(e=eI.exec(n))&&(i=UP.exec(t));)(r=i.index)>s&&(r=t.slice(s,r),o[a]?o[a]+=r:o[++a]=r),(e=e[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:S0(e,i)})),s=UP.lastIndex;return s<t.length&&(r=t.slice(s),o[a]?o[a]+=r:o[++a]=r),o.length<2?l[0]?ECt(l[0].x):PCt(t):(t=l.length,function(u){for(let h,c=0;c<t;++c)o[(h=l[c]).i]=h.x(u);return o.join("")})}function ud(n){if(st(n))return n;const t=+n;return st(t)?t:0}function RCt(n){return parseFloat("0."+Math.sin(n).toString().substring(6))}const We=1e-12,Qe=Math.PI,za=Qe/2,Bn=2*Qe,be=2*Math.PI,Ie=Math.abs,ei=Math.atan2,ni=Math.cos,ls=Math.max,nr=Math.min,He=Math.sin,hs=Math.sqrt,Yp=Math.pow;function Hq(n){return n>1?0:n<-1?Qe:Math.acos(n)}function F7(n){return n>=1?za:n<=-1?-za:Math.asin(n)}function j7(n,t,e,i,r){let s=e,a=i;return typeof n=="number"&&typeof e=="number"&&(s=(1-r)*n+r*e),typeof t=="number"&&typeof i=="number"&&(a=(1-r)*t+r*i),{x:s,y:a}}function N7(n,t){return n[0]*t[1]-n[1]*t[0]}function ICt(n,t){return Ie(n[0]-t[0])+Ie(n[1]-t[1])<1e-12}function Vq(n,t=10){return Math.round(n*t)/t}function zg(n){const t=n.toString().split(/[eE]/),e=(t[0].split(".")[1]||"").length-(+t[1]||0);return e>0?e:0}function ko(n,t){return Vq(n+t,10**Math.max(zg(n),zg(t)))}function iI(n,t){return Vq(n-t,10**Math.max(zg(n),zg(t)))}class Qi{constructor(t=0,e=0,i,r){this.x=0,this.y=0,this.x=t,this.y=e,this.x1=i,this.y1=r}clone(){return new Qi(this.x,this.y)}copyFrom(t){return this.x=t.x,this.y=t.y,this.x1=t.x1,this.y1=t.y1,this.defined=t.defined,this.context=t.context,this}set(t,e){return this.x=t,this.y=e,this}add(t){return Mt(t)?(this.x+=t,void(this.y+=t)):(this.x+=t.x,this.y+=t.y,this)}sub(t){return Mt(t)?(this.x-=t,void(this.y-=t)):(this.x-=t.x,this.y-=t.y,this)}multi(t){throw new Error("暂不支持")}div(t){throw new Error("暂不支持")}}class Ni{static distancePP(t,e){return hs(Yp(t.x-e.x,2)+Yp(t.y-e.y,2))}static distanceNN(t,e,i,r){return hs(Yp(t-i,2)+Yp(e-r,2))}static distancePN(t,e,i){return hs(Yp(e-t.x,2)+Yp(i-t.y,2))}static pointAtPP(t,e,i){return new Qi((e.x-t.x)*i+t.x,(e.y-t.y)*i+t.y)}}function nI(n,t,e){const{x1:i,y1:r,x2:s,y2:a}=t;return e.onlyTranslate()?(n!==t&&n.setValue(t.x1,t.y1,t.x2,t.y2),n.translate(e.e,e.f),t):(n.clear(),n.add(e.a*i+e.c*r+e.e,e.b*i+e.d*r+e.f),n.add(e.a*s+e.c*r+e.e,e.b*s+e.d*r+e.f),n.add(e.a*s+e.c*a+e.e,e.b*s+e.d*a+e.f),n.add(e.a*i+e.c*a+e.e,e.b*i+e.d*a+e.f),t)}class Fn{constructor(t){t?this.setValue(t.x1,t.y1,t.x2,t.y2):this.clear()}clone(){return new Fn(this)}clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this}empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE}equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2}setValue(t=0,e=0,i=0,r=0){return this.x1=t,this.y1=e,this.x2=i,this.y2=r,this}set(t=0,e=0,i=0,r=0){return i<t?(this.x2=t,this.x1=i):(this.x1=t,this.x2=i),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this}add(t=0,e=0){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this}expand(t=0){return ut(t)?(this.y1-=t[0],this.x2+=t[1],this.y2+=t[2],this.x1-=t[3]):(this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t),this}round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this}translate(t=0,e=0){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this}rotate(t=0,e=0,i=0){const r=this.rotatedPoints(t,e,i);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])}scale(t=0,e=0,i=0,r=0){const s=this.scalePoints(t,e,i,r);return this.clear().add(s[0],s[1]).add(s[2],s[3])}union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this}intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this}encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2}alignsWith(t){return t&&(this.x1===t.x1||this.x2===t.x2||this.y1===t.y1||this.y2===t.y2)}intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)}contains(t=0,e=0){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)}containsPoint(t){return!(t.x<this.x1||t.x>this.x2||t.y<this.y1||t.y>this.y2)}width(){return this.empty()?0:this.x2-this.x1}height(){return this.empty()?0:this.y2-this.y1}scaleX(t=0){return this.x1*=t,this.x2*=t,this}scaleY(t=0){return this.y1*=t,this.y2*=t,this}transformWithMatrix(t){return nI(this,this,t),this}copy(t){return this.x1=t.x1,this.y1=t.y1,this.x2=t.x2,this.y2=t.y2,this}rotatedPoints(t,e,i){const{x1:r,y1:s,x2:a,y2:o}=this,l=Math.cos(t),u=Math.sin(t),h=e-e*l+i*u,c=i-e*u-i*l;return[l*r-u*s+h,u*r+l*s+c,l*r-u*o+h,u*r+l*o+c,l*a-u*s+h,u*a+l*s+c,l*a-u*o+h,u*a+l*o+c]}scalePoints(t,e,i,r){const{x1:s,y1:a,x2:o,y2:l}=this;return[t*s+(1-t)*i,e*a+(1-e)*r,t*o+(1-t)*i,e*l+(1-e)*r]}}class Ai extends Fn{}function qe(n){return n*(Math.PI/180)}function Hg(n){return 180*n/Math.PI}const LCt=(n=0)=>{if(n<0)for(;n<-Bn;)n+=Bn;else if(n>0)for(;n>Bn;)n-=Bn;return n},DCt=LCt;function un(n,t,e){return t?{x:n.x+t*Math.cos(e),y:n.y+t*Math.sin(e)}:{x:n.x,y:n.y}}function bA(n,t){return Math.atan2(t.y-n.y,t.x-n.x)}function fl(n){for(;n<0;)n+=2*Math.PI;for(;n>=2*Math.PI;)n-=2*Math.PI;return n}function BCt(n,t){const e=Math.abs(t-n);if(e>=2*Math.PI||2*Math.PI-e<1e-6)return[0,Math.PI/2,Math.PI,1.5*Math.PI];const i=fl(Math.min(n,t)),r=i+e,s=[i,r];let a=Math.floor(i/Math.PI)*Math.PI/2;for(;a<r;)a>i&&s.push(a),a+=Math.PI/2;return s}function FCt(n,t,e,i){const{x:r,y:s}=t,a=BCt(e,i),{width:o,height:l}=n,u=[];return a.forEach(h=>{const c=Math.sin(h),d=Math.cos(h);c===1?u.push(l-s):c===-1?u.push(s):d===1?u.push(o-r):d===-1?u.push(r):(c>0?u.push(Math.abs((l-s)/d)):u.push(Math.abs(s/d)),d>0?u.push(Math.abs((o-r)/c)):u.push(Math.abs(r/c)))}),Math.min.apply(null,u)}class Wi{constructor(t=1,e=0,i=0,r=1,s=0,a=0){this.a=t,this.b=e,this.c=i,this.d=r,this.e=s,this.f=a}equalToMatrix(t){return!(this.e!==t.e||this.f!==t.f||this.a!==t.a||this.d!==t.d||this.b!==t.b||this.c!==t.c)}equalTo(t,e,i,r,s,a){return!(this.e!==s||this.f!==a||this.a!==t||this.d!==r||this.b!==e||this.c!==i)}setValue(t,e,i,r,s,a){return this.a=t,this.b=e,this.c=i,this.d=r,this.e=s,this.f=a,this}reset(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}getInverse(){const t=this.a,e=this.b,i=this.c,r=this.d,s=this.e,a=this.f,o=new Wi,l=t*r-e*i;return o.a=r/l,o.b=-e/l,o.c=-i/l,o.d=t/l,o.e=(i*a-r*s)/l,o.f=-(t*a-e*s)/l,o}rotate(t){const e=Math.cos(t),i=Math.sin(t),r=this.a*e+this.c*i,s=this.b*e+this.d*i,a=this.a*-i+this.c*e,o=this.b*-i+this.d*e;return this.a=r,this.b=s,this.c=a,this.d=o,this}rotateByCenter(t,e,i){const r=Math.cos(t),s=Math.sin(t),a=(1-r)*e+s*i,o=(1-r)*i-s*e,l=r*this.a-s*this.b,u=s*this.a+r*this.b,h=r*this.c-s*this.d,c=s*this.c+r*this.d,d=r*this.e-s*this.f+a,p=s*this.e+r*this.f+o;return this.a=l,this.b=u,this.c=h,this.d=c,this.e=d,this.f=p,this}scale(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this}setScale(t,e){return this.b=this.b/this.a*t,this.c=this.c/this.d*e,this.a=t,this.d=e,this}transform(t,e,i,r,s,a){return this.multiply(t,e,i,r,s,a),this}translate(t,e){return this.e+=this.a*t+this.c*e,this.f+=this.b*t+this.d*e,this}transpose(){const{a:t,b:e,c:i,d:r,e:s,f:a}=this;return this.a=e,this.b=t,this.c=r,this.d=i,this.e=a,this.f=s,this}multiply(t,e,i,r,s,a){const o=this.a,l=this.b,u=this.c,h=this.d,c=o*t+u*e,d=l*t+h*e,p=o*i+u*r,f=l*i+h*r,g=o*s+u*a+this.e,_=l*s+h*a+this.f;return this.a=c,this.b=d,this.c=p,this.d=f,this.e=g,this.f=_,this}interpolate(t,e){const i=new Wi;return i.a=this.a+(t.a-this.a)*e,i.b=this.b+(t.b-this.b)*e,i.c=this.c+(t.c-this.c)*e,i.d=this.d+(t.d-this.d)*e,i.e=this.e+(t.e-this.e)*e,i.f=this.f+(t.f-this.f)*e,i}transformPoint(t,e){const{a:i,b:r,c:s,d:a,e:o,f:l}=this,u=i*a-r*s,h=a/u,c=-r/u,d=-s/u,p=i/u,f=(s*l-a*o)/u,g=-(i*l-r*o)/u,{x:_,y:v}=t;e.x=_*h+v*d+f,e.y=_*c+v*p+g}onlyTranslate(t=1){return this.a===t&&this.b===0&&this.c===0&&this.d===t}clone(){return new Wi(this.a,this.b,this.c,this.d,this.e,this.f)}toTransformAttrs(){const t=this.a,e=this.b,i=this.c,r=this.d,s=t*r-e*i,a={x:this.e,y:this.f,rotateDeg:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!==0||e!==0){const o=Math.sqrt(t*t+e*e);a.rotateDeg=e>0?Math.acos(t/o):-Math.acos(t/o),a.scaleX=o,a.scaleY=s/o,a.skewX=(t*i+e*r)/s,a.skewY=0}else if(i!==0||r!==0){const o=Math.sqrt(i*i+r*r);a.rotateDeg=Math.PI/2-(r>0?Math.acos(-i/o):-Math.acos(i/o)),a.scaleX=s/o,a.scaleY=o,a.skewX=0,a.skewY=(t*i+e*r)/s}return a.rotateDeg=Hg(a.rotateDeg),a}}function jCt(n,t,e,i,r,s,a,o){const l=t.a,u=t.b,h=t.c,c=t.d,d=t.e,p=t.f,f=ni(a),g=He(a);let _,v;o?(_=o[0],v=o[1]):(_=e,v=i);const y=_-e,b=v-i,S=l*f+h*g,A=u*f+c*g,w=h*f-l*g,C=c*f-u*g;n.a=r*S,n.b=r*A,n.c=s*w,n.d=s*C,n.e=d+l*_+h*v-S*y-w*b,n.f=p+u*_+c*v-A*y-C*b}class NCt{constructor(){this.CLEAN_THRESHOLD=1e3,this.L_TIME=1e3,this.R_COUNT=1,this.R_TIMESTAMP_MAX_SIZE=20}clearCache(t,e){const{CLEAN_THRESHOLD:i=this.CLEAN_THRESHOLD,L_TIME:r=this.L_TIME,R_COUNT:s=this.R_COUNT}=e;if(t.size<i)return 0;let a=0;const o=u=>{a++,t.delete(u)},l=Date.now();return t.forEach((u,h)=>{if(u.timestamp.length<s)return o(h);let c=0;for(;l-u.timestamp[u.timestamp.length-1-c]<r&&(c++,!(c>=s)););if(c<s)return o(h);for(;l-u.timestamp[0]>r;)u.timestamp.shift()}),a}addLimitedTimestamp(t,e,i){const{R_TIMESTAMP_MAX_SIZE:r=this.R_TIMESTAMP_MAX_SIZE}=i;t.timestamp.length>r&&t.timestamp.shift(),t.timestamp.push(e)}clearTimeStamp(t,e){const{L_TIME:i=this.L_TIME}=e,r=Date.now();t.forEach(s=>{for(;r-s.timestamp[0]>i;)s.timestamp.shift()})}clearItemTimestamp(t,e){const{L_TIME:i=this.L_TIME}=e,r=Date.now();for(;r-t.timestamp[0]>i;)t.timestamp.shift()}}function xA(n,t,e){t/=100,e/=100;const i=(1-Math.abs(2*e-1))*t,r=i*(1-Math.abs(n/60%2-1)),s=e-i/2;let a=0,o=0,l=0;return 0<=n&&n<60?(a=i,o=r,l=0):60<=n&&n<120?(a=r,o=i,l=0):120<=n&&n<180?(a=0,o=i,l=r):180<=n&&n<240?(a=0,o=r,l=i):240<=n&&n<300?(a=r,o=0,l=i):300<=n&&n<360&&(a=i,o=0,l=r),a=Math.round(255*(a+s)),o=Math.round(255*(o+s)),l=Math.round(255*(l+s)),{r:a,g:o,b:l}}function l2(n,t,e){n/=255,t/=255,e/=255;const i=Math.min(n,t,e),r=Math.max(n,t,e),s=r-i;let a=0,o=0,l=0;return a=s===0?0:r===n?(t-e)/s%6:r===t?(e-n)/s+2:(n-t)/s+4,a=Math.round(60*a),a<0&&(a+=360),l=(r+i)/2,o=s===0?0:s/(1-Math.abs(2*l-1)),o=+(100*o).toFixed(1),l=+(100*l).toFixed(1),{h:a,s:o,l}}const z7=/^#([0-9a-f]{3,8})$/,H7={transparent:4294967040},dS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function sx(n){return((n=Math.max(0,Math.min(255,Math.round(n)||0)))<16?"0":"")+n.toString(16)}function YP(n){return Mt(n)?new gr(n>>16,n>>8&255,255&n,1):ut(n)?new gr(n[0],n[1],n[2]):new gr(255,255,255)}function zCt(n){return Mt(n)?new gr(n>>>24,n>>>16&255,n>>>8&255,255&n):ut(n)?new gr(n[0],n[1],n[2],n[3]):new gr(255,255,255,1)}function XP(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function KP(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}class xn{static Brighter(t,e=1){return e===1?t:new xn(t).brighter(e).toRGBA()}static SetOpacity(t,e=1){return e===1?t:new xn(t).setOpacity(e).toRGBA()}static getColorBrightness(t,e="hsl"){const i=t instanceof xn?t:new xn(t);switch(e){case"hsv":default:return i.getHSVBrightness();case"hsl":return i.getHSLBrightness();case"lum":return i.getLuminance();case"lum2":return i.getLuminance2();case"lum3":return i.getLuminance3()}}static parseColorString(t){if(z(H7[t]))return zCt(H7[t]);if(z(dS[t]))return YP(dS[t]);const e=`${t}`.trim().toLowerCase(),i=z7.exec(e);if(i){const r=parseInt(i[1],16),s=i[1].length;return s===3?new gr((r>>8&15)+((r>>8&15)<<4),(r>>4&15)+((r>>4&15)<<4),(15&r)+((15&r)<<4),1):s===6?YP(r):s===8?new gr(r>>24&255,r>>16&255,r>>8&255,(255&r)/255):void 0}if(/^(rgb|RGB|rgba|RGBA)/.test(e)){const r=e.replace(/(?:\(|\)|rgba|RGBA|rgb|RGB)*/g,"").split(",");return new gr(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10),parseFloat(r[3]))}if(/^(hsl|HSL|hsla|HSLA)/.test(e)){const r=e.replace(/(?:\(|\)|hsla|HSLA|hsl|HSL)*/g,"").split(","),s=xA(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10));return new gr(s.r,s.g,s.b,parseFloat(r[3]))}}constructor(t){const e=xn.parseColorString(t);e?this.color=e:(console.warn(`Warn: 传入${t}无法解析为Color`),this.color=new gr(255,255,255))}toRGBA(){return this.color.formatRgb()}toString(){return this.color.formatRgb()}toHex(){return this.color.formatHex()}toHsl(){return this.color.formatHsl()}brighter(t){const{r:e,g:i,b:r}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(e*t))),this.color.g=Math.max(0,Math.min(255,Math.floor(i*t))),this.color.b=Math.max(0,Math.min(255,Math.floor(r*t))),this}add(t){const{r:e,g:i,b:r}=this.color;return this.color.r+=Math.min(255,e+t.color.r),this.color.g+=Math.min(255,i+t.color.g),this.color.b+=Math.min(255,r+t.color.b),this}sub(t){return this.color.r=Math.max(0,this.color.r-t.color.r),this.color.g=Math.max(0,this.color.g-t.color.g),this.color.b=Math.max(0,this.color.b-t.color.b),this}multiply(t){const{r:e,g:i,b:r}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(e*t.color.r))),this.color.g=Math.max(0,Math.min(255,Math.floor(i*t.color.g))),this.color.b=Math.max(0,Math.min(255,Math.floor(r*t.color.b))),this}getHSVBrightness(){return Math.max(this.color.r,this.color.g,this.color.b)/255}getHSLBrightness(){return .5*(Math.max(this.color.r,this.color.g,this.color.b)/255+Math.min(this.color.r,this.color.g,this.color.b)/255)}setHsl(t,e,i){const r=this.color.opacity,s=l2(this.color.r,this.color.g,this.color.b),a=xA(F(t)?s.h:Zi(t,0,360),F(e)?s.s:e>=0&&e<=1?100*e:e,F(i)?s.l:i<=1&&i>=0?100*i:i);return this.color=new gr(a.r,a.g,a.b,r),this}setRGB(t,e,i){return!F(t)&&(this.color.r=t),!F(e)&&(this.color.g=e),!F(i)&&(this.color.b=i),this}setHex(t){const e=`${t}`.trim().toLowerCase(),i=z7.exec(e),r=parseInt(i[1],16),s=i[1].length;return s===3?new gr((r>>8&15)+((r>>8&15)<<4),(r>>4&15)+((r>>4&15)<<4),(15&r)+((15&r)<<4),1):s===6?YP(r):s===8?new gr(r>>24&255,r>>16&255,r>>8&255,(255&r)/255):this}setColorName(t){const e=dS[t.toLowerCase()];return e!==void 0?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}setScalar(t){return this.color.r=t,this.color.g=t,this.color.b=t,this}setOpacity(t=1){return this.color.opacity=t,this}getLuminance(){return(.2126*this.color.r+.7152*this.color.g+.0722*this.color.b)/255}getLuminance2(){return(.2627*this.color.r+.678*this.color.g+.0593*this.color.b)/255}getLuminance3(){return(.299*this.color.r+.587*this.color.g+.114*this.color.b)/255}clone(){return new xn(this.color.toString())}copyGammaToLinear(t,e=2){return this.color.r=Math.pow(t.color.r,e),this.color.g=Math.pow(t.color.g,e),this.color.b=Math.pow(t.color.b,e),this}copyLinearToGamma(t,e=2){const i=e>0?1/e:1;return this.color.r=Math.pow(t.color.r,i),this.color.g=Math.pow(t.color.g,i),this.color.b=Math.pow(t.color.b,i),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.color.r=XP(t.color.r),this.color.g=XP(t.color.g),this.color.b=XP(t.color.b),this}copyLinearToSRGB(t){return this.color.r=KP(t.color.r),this.color.g=KP(t.color.g),this.color.b=KP(t.color.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}}class gr{constructor(t,e,i,r){this.r=isNaN(+t)?255:Math.max(0,Math.min(255,+t)),this.g=isNaN(+e)?255:Math.max(0,Math.min(255,+e)),this.b=isNaN(+i)?255:Math.max(0,Math.min(255,+i)),z(r)?this.opacity=isNaN(+r)?1:Math.max(0,Math.min(1,+r)):this.opacity=1}formatHex(){return`#${sx(this.r)+sx(this.g)+sx(this.b)+(this.opacity===1?"":sx(255*this.opacity))}`}formatRgb(){const t=this.opacity;return`${t===1?"rgb(":"rgba("}${this.r},${this.g},${this.b}${t===1?")":`,${t})`}`}formatHsl(){const t=this.opacity,{h:e,s:i,l:r}=l2(this.r,this.g,this.b);return`${t===1?"hsl(":"hsla("}${e},${i}%,${r}%${t===1?")":`,${t})`}`}toString(){return this.formatHex()}}function Wq(n){let t="",e="",i="";const r=n[0]==="#"?1:0;for(let s=r;s<n.length;s++)n[s]!=="#"&&(s<r+2?t+=n[s]:s<r+4?e+=n[s]:s<r+6&&(i+=n[s]));return[parseInt(t,16),parseInt(e,16),parseInt(i,16)]}function HCt(n,t,e){return Number((1<<24)+(n<<16)+(t<<8)+e).toString(16).slice(1)}function VCt(n,t){const e=n.r,i=t.r,r=n.g,s=t.g,a=n.b,o=t.b,l=n.opacity,u=t.opacity;return h=>{const c=Math.round(e*(1-h)+i*h),d=Math.round(r*(1-h)+s*h),p=Math.round(a*(1-h)+o*h);return new gr(c,d,p,l*(1-h)+u*h)}}const WCt=Object.freeze(Object.defineProperty({__proto__:null,Color:xn,DEFAULT_COLORS:dS,RGB:gr,hexToRgb:Wq,hslToRgb:xA,interpolateRgb:VCt,rgbToHex:HCt,rgbToHsl:l2},Symbol.toStringTag,{value:"Module"}));function qP(n,t,e){n[0]=t[0]-e[0],n[1]=t[1]-e[1]}let zr,Hr,Vr,Wr,To,Mo,Po,Eo;function $q(n,t,e,i){let r,s=n[0],a=t[0],o=e[0],l=i[0];return a<s&&(r=a,a=s,s=r),l<o&&(r=l,l=o,o=r),!(a<o||l<s)&&(s=n[1],a=t[1],o=e[1],l=i[1],a<s&&(r=a,a=s,s=r),l<o&&(r=l,l=o,o=r),!(a<o||l<s))}function Gq(n,t,e,i){if(!$q(n,t,e,i))return!1;const r=[0,0],s=[0,0],a=[0,0];if(qP(r,t,n),qP(s,i,e),ICt(r,s))return!0;qP(a,e,n);const o=N7(a,s)/N7(r,s);return o>=0&&o<=1&&[n[0]+r[0]*o,n[1]+r[1]*o]}function Uq(n,t,e){return n===null?t:t===null?n:(zr=n.x1,Hr=n.x2,Vr=n.y1,Wr=n.y2,To=t.x1,Mo=t.x2,Po=t.y1,Eo=t.y2,zr>=Mo||Hr<=To||Vr>=Eo||Wr<=Po?{x1:0,y1:0,x2:0,y2:0}:{x1:Math.max(zr,To),y1:Math.max(Vr,Po),x2:Math.min(Hr,Mo),y2:Math.min(Wr,Eo)})}var Ff;(function(n){n[n.NONE=0]="NONE",n[n.BBOX1=1]="BBOX1",n[n.BBOX2=2]="BBOX2"})(Ff||(Ff={}));function $Ct(n,t,e){return n&&t?(zr=n.x1,Hr=n.x2,Vr=n.y1,Wr=n.y2,To=t.x1,Mo=t.x2,Po=t.y1,Eo=t.y2,zr>To&&Hr<Mo&&Vr>Po&&Wr<Eo?Ff.BBOX1:To>zr&&Mo<Hr&&Po>Vr&&Eo<Wr?Ff.BBOX2:Ff.NONE):Ff.NONE}function ty(n,t,e){return!n||!t||(e?(zr=n.x1,Hr=n.x2,Vr=n.y1,Wr=n.y2,To=t.x1,Mo=t.x2,Po=t.y1,Eo=t.y2,zr>Hr&&([zr,Hr]=[Hr,zr]),Vr>Wr&&([Vr,Wr]=[Wr,Vr]),To>Mo&&([To,Mo]=[Mo,To]),Po>Eo&&([Po,Eo]=[Eo,Po]),!(zr>Mo||Hr<To||Vr>Eo||Wr<Po)):!(n.x1>t.x2||n.x2<t.x1||n.y1>t.y2||n.y2<t.y1))}function A0(n,t,e){return!t||(e?(zr=t.x1,Hr=t.x2,Vr=t.y1,Wr=t.y2,zr>Hr&&([zr,Hr]=[Hr,zr]),Vr>Wr&&([Vr,Wr]=[Wr,Vr]),n.x>=zr&&n.x<=Hr&&n.y>=Vr&&n.y<=Wr):n.x>=t.x1&&n.x<=t.x2&&n.y>=t.y1&&n.y<=t.y2)}function ZP(n,t){return Math.abs(t[0]*n[0]+t[1]*n[1])}function ax({x:n,y:t},e,i={x:0,y:0}){return{x:(n-i.x)*Math.cos(e)+(t-i.y)*Math.sin(e)+i.x,y:(n-i.x)*Math.sin(e)+(i.y-t)*Math.cos(e)+i.y}}function rI(n){return{x:(n.x1+n.x2)/2,y:(n.y1+n.y2)/2}}function V7(n,t){const e=t?n.angle:qe(n.angle),i=rI(n);return[ax({x:n.x1,y:n.y1},e,i),ax({x:n.x2,y:n.y1},e,i),ax({x:n.x2,y:n.y2},e,i),ax({x:n.x1,y:n.y2},e,i)]}function GCt(n,t,e=!1,i){const r=V7(n,e),s=V7(t,e),a=(b,S)=>[S.x-b.x,S.y-b.y],o=rI(n),l=rI(t),u=a(o,l),h=a(r[0],r[1]),c=a(r[1],r[2]),d=a(s[0],s[1]),p=a(s[1],s[2]),f=e?n.angle:qe(n.angle);let g=e?n.angle+za:qe(90-n.angle);const _=e?t.angle:qe(t.angle);let v=e?t.angle+za:qe(90-t.angle);g>be&&(g-=be),v>be&&(v-=be);const y=(b,S,A,w)=>{const C=[Math.cos(S),Math.sin(S)];return b+(ZP(C,A)+ZP(C,w))/2>ZP(C,u)};return y((n.x2-n.x1)/2,f,d,p)&&y((n.y2-n.y1)/2,g,d,p)&&y((t.x2-t.x1)/2,_,h,c)&&y((t.y2-t.y1)/2,v,h,c)}let ox,lx,ux,hx;function UCt(n){return ox=1/0,lx=1/0,ux=-1/0,hx=-1/0,n.forEach(t=>{ox>t.x&&(ox=t.x),ux<t.x&&(ux=t.x),lx>t.y&&(lx=t.y),hx<t.y&&(hx=t.y)}),{x1:ox,y1:lx,x2:ux,y2:hx}}const YCt=1e-8;function XCt(n,t,e,i,r){for(let s=0,a=r[r.length-1];s<r.length;s++){const o=r[s];if($q([n,t],[e,i],[o.x,o.y],[a.x,a.y]))return!0;a=o}return!1}function vd(n,t,e){let i=0,r=n[0];if(!r)return!1;for(let a=1;a<n.length;a++){const o=n[a];i+=W7(r.x,r.y,o.x,o.y,t,e),r=o}const s=n[0];return $7(r.x,s.x)&&$7(r.y,s.y)||(i+=W7(r.x,r.y,s.x,s.y,t,e)),i!==0}function W7(n,t,e,i,r,s){if(s>t&&s>i||s<t&&s<i||i===t)return 0;const a=(s-t)/(i-t);let o=i<t?1:-1;a!==1&&a!==0||(o=i<t?.5:-.5);const l=a*(e-n)+n;return l===r?1/0:l>r?o:0}function $7(n,t){return Math.abs(n-t)<YCt}function G7(n,t){for(let e=0;e<t.length;e++)if(vd(n,t[e].x,t[e].y)||e>0&&XCt(t[e-1].x,t[e-1].y,t[e].x,t[e].y,n))return!0;return!1}const U7=n=>{let t=n.charCodeAt(0),e=n.length===2?n.charCodeAt(1):0,i=t;return 55296<=t&&t<=56319&&56320<=e&&e<=57343&&(t&=1023,e&=1023,i=t<<10|e,i+=65536),i===12288||65281<=i&&i<=65376||65504<=i&&i<=65510?"F":i===8361||65377<=i&&i<=65470||65474<=i&&i<=65479||65482<=i&&i<=65487||65490<=i&&i<=65495||65498<=i&&i<=65500||65512<=i&&i<=65518?"H":4352<=i&&i<=4447||4515<=i&&i<=4519||4602<=i&&i<=4607||9001<=i&&i<=9002||11904<=i&&i<=11929||11931<=i&&i<=12019||12032<=i&&i<=12245||12272<=i&&i<=12283||12289<=i&&i<=12350||12353<=i&&i<=12438||12441<=i&&i<=12543||12549<=i&&i<=12589||12593<=i&&i<=12686||12688<=i&&i<=12730||12736<=i&&i<=12771||12784<=i&&i<=12830||12832<=i&&i<=12871||12880<=i&&i<=13054||13056<=i&&i<=19903||19968<=i&&i<=42124||42128<=i&&i<=42182||43360<=i&&i<=43388||44032<=i&&i<=55203||55216<=i&&i<=55238||55243<=i&&i<=55291||63744<=i&&i<=64255||65040<=i&&i<=65049||65072<=i&&i<=65106||65108<=i&&i<=65126||65128<=i&&i<=65131||110592<=i&&i<=110593||127488<=i&&i<=127490||127504<=i&&i<=127546||127552<=i&&i<=127560||127568<=i&&i<=127569||131072<=i&&i<=194367||177984<=i&&i<=196605||196608<=i&&i<=262141?"W":32<=i&&i<=126||162<=i&&i<=163||165<=i&&i<=166||i===172||i===175||10214<=i&&i<=10221||10629<=i&&i<=10630?"Na":i===161||i===164||167<=i&&i<=168||i===170||173<=i&&i<=174||176<=i&&i<=180||182<=i&&i<=186||188<=i&&i<=191||i===198||i===208||215<=i&&i<=216||222<=i&&i<=225||i===230||232<=i&&i<=234||236<=i&&i<=237||i===240||242<=i&&i<=243||247<=i&&i<=250||i===252||i===254||i===257||i===273||i===275||i===283||294<=i&&i<=295||i===299||305<=i&&i<=307||i===312||319<=i&&i<=322||i===324||328<=i&&i<=331||i===333||338<=i&&i<=339||358<=i&&i<=359||i===363||i===462||i===464||i===466||i===468||i===470||i===472||i===474||i===476||i===593||i===609||i===708||i===711||713<=i&&i<=715||i===717||i===720||728<=i&&i<=731||i===733||i===735||768<=i&&i<=879||913<=i&&i<=929||931<=i&&i<=937||945<=i&&i<=961||963<=i&&i<=969||i===1025||1040<=i&&i<=1103||i===1105||i===8208||8211<=i&&i<=8214||8216<=i&&i<=8217||8220<=i&&i<=8221||8224<=i&&i<=8226||8228<=i&&i<=8231||i===8240||8242<=i&&i<=8243||i===8245||i===8251||i===8254||i===8308||i===8319||8321<=i&&i<=8324||i===8364||i===8451||i===8453||i===8457||i===8467||i===8470||8481<=i&&i<=8482||i===8486||i===8491||8531<=i&&i<=8532||8539<=i&&i<=8542||8544<=i&&i<=8555||8560<=i&&i<=8569||i===8585||8592<=i&&i<=8601||8632<=i&&i<=8633||i===8658||i===8660||i===8679||i===8704||8706<=i&&i<=8707||8711<=i&&i<=8712||i===8715||i===8719||i===8721||i===8725||i===8730||8733<=i&&i<=8736||i===8739||i===8741||8743<=i&&i<=8748||i===8750||8756<=i&&i<=8759||8764<=i&&i<=8765||i===8776||i===8780||i===8786||8800<=i&&i<=8801||8804<=i&&i<=8807||8810<=i&&i<=8811||8814<=i&&i<=8815||8834<=i&&i<=8835||8838<=i&&i<=8839||i===8853||i===8857||i===8869||i===8895||i===8978||9312<=i&&i<=9449||9451<=i&&i<=9547||9552<=i&&i<=9587||9600<=i&&i<=9615||9618<=i&&i<=9621||9632<=i&&i<=9633||9635<=i&&i<=9641||9650<=i&&i<=9651||9654<=i&&i<=9655||9660<=i&&i<=9661||9664<=i&&i<=9665||9670<=i&&i<=9672||i===9675||9678<=i&&i<=9681||9698<=i&&i<=9701||i===9711||9733<=i&&i<=9734||i===9737||9742<=i&&i<=9743||9748<=i&&i<=9749||i===9756||i===9758||i===9792||i===9794||9824<=i&&i<=9825||9827<=i&&i<=9829||9831<=i&&i<=9834||9836<=i&&i<=9837||i===9839||9886<=i&&i<=9887||9918<=i&&i<=9919||9924<=i&&i<=9933||9935<=i&&i<=9953||i===9955||9960<=i&&i<=9983||i===10045||i===10071||10102<=i&&i<=10111||11093<=i&&i<=11097||12872<=i&&i<=12879||57344<=i&&i<=63743||65024<=i&&i<=65039||i===65533||127232<=i&&i<=127242||127248<=i&&i<=127277||127280<=i&&i<=127337||127344<=i&&i<=127386||917760<=i&&i<=917999||983040<=i&&i<=1048573||1048576<=i&&i<=1114109?"A":"N"};function KCt(n,t={}){const{fontStyle:e=t.fontStyle,fontVariant:i=t.fontVariant,fontWeight:r=t.fontWeight,fontSize:s=t.fontSize,fontFamily:a=t.fontFamily}=n;return(e?e+" ":"")+(i?i+" ":"")+(r?r+" ":"")+s+"px "+(a||"sans-serif")}class Nr{constructor(t,e){this._numberCharSize=null,this._fullCharSize=null,this._letterCharSize=null,this._specialCharSizeMap={},this._canvas=null,this._context=null,this._contextSaved=!1,this._notSupportCanvas=!1,this._notSupportVRender=!1,this._userSpec={},this.specialCharSet=`-/: .,@%'"~`,this._option=t,this._userSpec=e??{},this.textSpec=this._initSpec(),z(t.specialCharSet)&&(this.specialCharSet=t.specialCharSet),this._standardMethod=z(t.getTextBounds)?this.fullMeasure.bind(this):this.measureWithNaiveCanvas.bind(this)}initContext(){if(this._notSupportCanvas)return!1;if(F(this._canvas)&&(z(this._option.getCanvasForMeasure)&&(this._canvas=this._option.getCanvasForMeasure()),F(this._canvas)&&typeof window<"u"&&window.document!==void 0&&globalThis&&z(globalThis.document)&&(this._canvas=globalThis.document.createElement("canvas"))),F(this._context)&&z(this._canvas)){const t=this._canvas.getContext("2d");z(t)&&(t.save(),t.font=KCt(this.textSpec),this._contextSaved=!0,this._context=t)}return!F(this._context)||(this._notSupportCanvas=!0,!1)}_initSpec(){var t,e,i;const{defaultFontParams:r={}}=this._option,{fontStyle:s=r.fontStyle,fontVariant:a=r.fontVariant,fontWeight:o=(t=r.fontWeight)!==null&&t!==void 0?t:"normal",fontSize:l=(e=r.fontSize)!==null&&e!==void 0?e:12,fontFamily:u=(i=r.fontFamily)!==null&&i!==void 0?i:"sans-serif",align:h,textAlign:c=h??"center",baseline:d,textBaseline:p=d??"middle",ellipsis:f,limit:g}=this._userSpec;let{lineHeight:_=l}=this._userSpec;if(It(_)&&_[_.length-1]==="%"){const v=Number.parseFloat(_.substring(0,_.length-1))/100;_=l*v}return{fontStyle:s,fontVariant:a,fontFamily:u,fontSize:l,fontWeight:o,textAlign:c,textBaseline:p,ellipsis:f,limit:g,lineHeight:_}}measure(t,e){switch(e){case"vrender":case"canopus":return this.fullMeasure(t);case"canvas":return this.measureWithNaiveCanvas(t);case"simple":return this.quickMeasureWithoutCanvas(t);default:return this.quickMeasure(t)}}fullMeasure(t){if(F(t))return{width:0,height:0};if(F(this._option.getTextBounds)||!this._notSupportVRender)return this.measureWithNaiveCanvas(t);const{fontFamily:e,fontSize:i,fontWeight:r,textAlign:s,textBaseline:a,ellipsis:o,limit:l,lineHeight:u}=this.textSpec;let h;try{const c=this._option.getTextBounds({text:t,fontFamily:e,fontSize:i,fontWeight:r,textAlign:s,textBaseline:a,ellipsis:!!o,maxLineWidth:l||1/0,lineHeight:u});h={width:c.width(),height:c.height()}}catch{this._notSupportVRender=!0,h=this.measureWithNaiveCanvas(t)}return h}measureWithNaiveCanvas(t){return this._measureReduce(t,this._measureWithNaiveCanvas.bind(this))}_measureWithNaiveCanvas(t){var e;if(!this.initContext())return this._quickMeasureWithoutCanvas(t);const i=this._context.measureText(t),{fontSize:r,lineHeight:s}=this.textSpec;return{width:i.width,height:(e=s)!==null&&e!==void 0?e:r}}quickMeasure(t){return this._measureReduce(t,this._quickMeasure.bind(this))}_quickMeasure(t){const e={width:0,height:0};for(let i=0;i<t.length;i++){const r=t[i];let s=this._measureSpecialChar(r);F(s)&&Nr.NUMBERS_CHAR_SET.includes(r)&&(s=this._measureNumberChar()),F(s)&&["F","W"].includes(U7(r))&&(s=this._measureFullSizeChar()),F(s)&&(s=this._measureLetterChar()),e.width+=s.width,e.height=Math.max(e.height,s.height)}return e}quickMeasureWithoutCanvas(t){return this._measureReduce(t,this._quickMeasureWithoutCanvas.bind(this))}_quickMeasureWithoutCanvas(t){var e;const i={width:0,height:0},{fontSize:r,lineHeight:s}=this.textSpec;for(let a=0;a<t.length;a++){const o=t[a],l=["F","W"].includes(U7(o))?1:.53;i.width+=l*r}return i.height=(e=s)!==null&&e!==void 0?e:r,i}_measureReduce(t,e){var i;const{fontSize:r,lineHeight:s}=this.textSpec,a={width:0,height:0};if(F(t))return a;if(ut(t)){const o=t.filter(z).map(l=>l.toString());return o.length===0?a:o.length===1?e(o[0]):{width:o.reduce((l,u)=>Math.max(l,e(u).width),0),height:o.length*(((i=s)!==null&&i!==void 0?i:r)+1)+1}}return e(t.toString())}_measureNumberChar(){if(F(this._numberCharSize)){const t=this._standardMethod(Nr.NUMBERS_CHAR_SET);this._numberCharSize={width:t.width/Nr.NUMBERS_CHAR_SET.length,height:t.height}}return this._numberCharSize}_measureFullSizeChar(){return F(this._fullCharSize)&&(this._fullCharSize=this._standardMethod(Nr.FULL_SIZE_CHAR)),this._fullCharSize}_measureLetterChar(){if(F(this._letterCharSize)){const t=this._standardMethod(Nr.ALPHABET_CHAR_SET);this._letterCharSize={width:t.width/Nr.ALPHABET_CHAR_SET.length,height:t.height}}return this._letterCharSize}_measureSpecialChar(t){return z(this._specialCharSizeMap[t])?this._specialCharSizeMap[t]:this.specialCharSet.includes(t)?(this._specialCharSizeMap[t]=this._standardMethod(t),this._specialCharSizeMap[t]):null}release(){z(this._canvas)&&(this._canvas=null),z(this._context)&&(this._contextSaved&&(this._context.restore(),this._contextSaved=!1),this._context=null)}}Nr.ALPHABET_CHAR_SET="abcdefghijklmnopqrstuvwxyz",Nr.NUMBERS_CHAR_SET="0123456789",Nr.FULL_SIZE_CHAR="字";const Yq=(n,t)=>{const{x1:e,x2:i,y1:r,y2:s}=n,a=Math.abs(i-e),o=Math.abs(s-r);let l=(e+i)/2,u=(r+s)/2,h=0,c=0;switch(t){case"top":case"inside-top":c=-.5;break;case"bottom":case"inside-bottom":c=.5;break;case"left":case"inside-left":h=-.5;break;case"right":case"inside-right":h=.5;break;case"top-right":h=.5,c=-.5;break;case"top-left":h=-.5,c=-.5;break;case"bottom-right":h=.5,c=.5;break;case"bottom-left":h=-.5,c=.5}return l+=h*a,u+=c*o,{x:l,y:u}};function ds(n){if(st(n))return[n,n,n,n];if(ut(n)){const t=n.length;if(t===1){const e=n[0];return[e,e,e,e]}if(t===2){const[e,i]=n;return[e,i,e,i]}if(t===3){const[e,i,r]=n;return[e,i,r,i]}if(t===4)return n}if(ae(n)){const{top:t=0,right:e=0,bottom:i=0,left:r=0}=n;return[t,e,i,r]}return[0,0,0,0]}function sI(n,t=0,e=0){if(!n)return{width:t,height:e};let i;try{i=window==null?void 0:window.getComputedStyle}catch{i=()=>({})}const r=i(n);if(/^(\d*\.?\d+)(px)$/.exec(r.width)){const s=parseFloat(r.width)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)||n.clientWidth-1,a=parseFloat(r.height)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)||n.clientHeight-1;return{width:s<=0?t:s,height:a<=0?e:a}}return{width:t,height:e}}function qCt(n){const{x:t,y:e}=n.getBoundingClientRect();return{x:t,y:e}}function Xq(n,t){let e=n.parentNode;for(;e!==null;){if(e===t)return!0;e=e.parentNode}return!1}const ZCt=(n="")=>{const t={};return n.split(";").forEach(e=>{if(e){const i=e.split(":");if(i.length===2){const r=i[0].trim(),s=i[1].trim();r&&s&&(t[r]=s)}}}),t},Y7=n=>n.replace(/([A-Z])/g,"-$1").toLowerCase();var Cs=63710088e-1,JCt={centimeters:Cs*100,centimetres:Cs*100,degrees:Cs/111325,feet:Cs*3.28084,inches:Cs*39.37,kilometers:Cs/1e3,kilometres:Cs/1e3,meters:Cs,metres:Cs,miles:Cs/1609.344,millimeters:Cs*1e3,millimetres:Cs*1e3,nauticalmiles:Cs/1852,radians:1,yards:Cs*1.0936};function X7(n,t,e){e===void 0&&(e={});var i={type:"Feature"};return(e.id===0||e.id)&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.properties=t||{},i.geometry=n,i}function Kq(n,t){t===void 0&&(t={});var e={type:"FeatureCollection"};return t.id&&(e.id=t.id),t.bbox&&(e.bbox=t.bbox),e.features=n,e}function QCt(n,t){t===void 0&&(t="kilometers");var e=JCt[t];if(!e)throw new Error(t+" units is invalid");return n/e}function tkt(n){return!!n&&n.constructor===Object}function ekt(n){return n.type==="Feature"?n.geometry:n}function ikt(n,t){if(!n||!t)return!1;const e=ekt(t),i=e.type,r=t.bbox;let s=e.coordinates;if(r&&A0(n,{x1:r[0],x2:r[1],y1:r[1],y2:r[3]},!0)===!0)return!1;i==="Polygon"&&(s=[s]);let a=!1;for(let o=0;o<s.length;++o)for(let l=0;l<s[o].length;++l)if(vd(s[o][l].map(u=>({x:u[0],y:u[1]})),n.x,n.y))return a=!0,a;return a}function nkt(n,t,e,i={}){const r=qe(n[0]),s=qe(n[1]),a=qe(e),o=QCt(t,i.units),l=Math.asin(Math.sin(s)*Math.cos(o)+Math.cos(s)*Math.sin(o)*Math.cos(a)),u=r+Math.atan2(Math.sin(a)*Math.sin(o)*Math.cos(s),Math.cos(o)-Math.sin(s)*Math.sin(l));return{x:Hg(u),y:Hg(l)}}class Ro{static getInstance(){return Ro.instance||(Ro.instance=new Ro),Ro.instance}constructor(){this.locale_shortWeekdays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.locale_periods=["AM","PM"],this.locale_weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.locale_shortMonths=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.numberRe=/^\s*\d+/,this.pads={"-":"",_:" ",0:"0"},this.requoteRe=/[\\^$*+?|[\]().{}]/g,this.locale_months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.formatShortWeekday=t=>this.locale_shortWeekdays[t.getDay()],this.formatWeekday=t=>this.locale_weekdays[t.getDay()],this.formatShortMonth=t=>this.locale_shortMonths[t.getMonth()],this.formatMonth=t=>this.locale_months[t.getMonth()],this.formatDayOfMonth=(t,e)=>this.pad(t.getDate(),e,2),this.formatHour24=(t,e)=>this.pad(t.getHours(),e,2),this.formatHour12=(t,e)=>this.pad(t.getHours()%12||12,e,2),this.formatMilliseconds=(t,e)=>this.pad(t.getMilliseconds(),e,3),this.formatMonthNumber=(t,e)=>this.pad(t.getMonth()+1,e,2),this.formatMinutes=(t,e)=>this.pad(t.getMinutes(),e,2),this.formatPeriod=t=>this.locale_periods[+(t.getHours()>=12)],this.formatSeconds=(t,e)=>this.pad(t.getSeconds(),e,2),this.formatFullYear=(t,e)=>this.pad(t.getFullYear()%1e4,e,4),this.formatUTCShortWeekday=t=>this.locale_shortWeekdays[t.getUTCDay()],this.formatUTCWeekday=t=>this.locale_weekdays[t.getUTCDay()],this.formatUTCShortMonth=t=>this.locale_shortMonths[t.getUTCMonth()],this.formatUTCMonth=t=>this.locale_months[t.getUTCMonth()],this.formatUTCDayOfMonth=(t,e)=>this.pad(t.getUTCDate(),e,2),this.formatUTCHour24=(t,e)=>this.pad(t.getUTCHours(),e,2),this.formatUTCHour12=(t,e)=>this.pad(t.getUTCHours()%12||12,e,2),this.formatUTCMilliseconds=(t,e)=>this.pad(t.getUTCMilliseconds(),e,3),this.formatUTCMonthNumber=(t,e)=>this.pad(t.getUTCMonth()+1,e,2),this.formatUTCMinutes=(t,e)=>this.pad(t.getUTCMinutes(),e,2),this.formatUTCPeriod=t=>this.locale_periods[+(t.getUTCHours()>=12)],this.formatUTCSeconds=(t,e)=>this.pad(t.getUTCSeconds(),e,2),this.formatUTCFullYear=(t,e)=>this.pad(t.getUTCFullYear()%1e4,e,4),this.formats={a:this.formatShortWeekday,A:this.formatWeekday,b:this.formatShortMonth,B:this.formatMonth,d:this.formatDayOfMonth,e:this.formatDayOfMonth,H:this.formatHour24,I:this.formatHour12,L:this.formatMilliseconds,m:this.formatMonthNumber,M:this.formatMinutes,p:this.formatPeriod,S:this.formatSeconds,Y:this.formatFullYear},this.utcFormats={a:this.formatUTCShortWeekday,A:this.formatUTCWeekday,b:this.formatUTCShortMonth,B:this.formatUTCMonth,d:this.formatUTCDayOfMonth,e:this.formatUTCDayOfMonth,H:this.formatUTCHour24,I:this.formatUTCHour12,L:this.formatUTCMilliseconds,m:this.formatUTCMonthNumber,M:this.formatUTCMinutes,p:this.formatUTCPeriod,S:this.formatUTCSeconds,Y:this.formatUTCFullYear},this.parseShortWeekday=(t,e,i)=>{const r=this.shortWeekdayRe.exec(e.slice(i));return r?(t.w=this.shortWeekdayLookup.get(r[0].toLowerCase()),i+r[0].length):-1},this.parseWeekday=(t,e,i)=>{const r=this.weekdayRe.exec(e.slice(i));return r?(t.w=this.weekdayLookup.get(r[0].toLowerCase()),i+r[0].length):-1},this.parseShortMonth=(t,e,i)=>{const r=this.shortMonthRe.exec(e.slice(i));return r?(t.m=this.shortMonthLookup.get(r[0].toLowerCase()),i+r[0].length):-1},this.parseMonth=(t,e,i)=>{const r=this.monthRe.exec(e.slice(i));return r?(t.m=this.monthLookup.get(r[0].toLowerCase()),i+r[0].length):-1},this.parseDayOfMonth=(t,e,i)=>{const r=this.numberRe.exec(e.slice(i,i+2));return r?(t.d=+r[0],i+r[0].length):-1},this.parseHour24=(t,e,i)=>{const r=this.numberRe.exec(e.slice(i,i+2));return r?(t.H=+r[0],i+r[0].length):-1},this.parseMilliseconds=(t,e,i)=>{const r=this.numberRe.exec(e.slice(i,i+3));return r?(t.L=+r[0],i+r[0].length):-1},this.parseMonthNumber=(t,e,i)=>{const r=this.numberRe.exec(e.slice(i,i+2));return r?(t.m=r-1,i+r[0].length):-1},this.parseMinutes=(t,e,i)=>{const r=this.numberRe.exec(e.slice(i,i+2));return r?(t.M=+r[0],i+r[0].length):-1},this.parsePeriod=(t,e,i)=>{const r=this.periodRe.exec(e.slice(i));return r?(t.p=this.periodLookup.get(r[0].toLowerCase()),i+r[0].length):-1},this.parseSeconds=(t,e,i)=>{const r=this.numberRe.exec(e.slice(i,i+2));return r?(t.S=+r[0],i+r[0].length):-1},this.parseFullYear=(t,e,i)=>{const r=this.numberRe.exec(e.slice(i,i+4));return r?(t.y=+r[0],i+r[0].length):-1},this.parses={a:this.parseShortWeekday,A:this.parseWeekday,b:this.parseShortMonth,B:this.parseMonth,d:this.parseDayOfMonth,e:this.parseDayOfMonth,H:this.parseHour24,I:this.parseHour24,L:this.parseMilliseconds,m:this.parseMonthNumber,M:this.parseMinutes,p:this.parsePeriod,S:this.parseSeconds,Y:this.parseFullYear},this.timeFormat=(t,e)=>this.newFormat(t,this.formats)(new Date(this.getFullTimeStamp(e))),this.timeUTCFormat=(t,e)=>this.newFormat(t,this.utcFormats)(new Date(this.getFullTimeStamp(e))),this.timeParse=(t,e)=>this.newParse(t,!1)(e+""),this.requoteF=this.requote.bind(this),this.periodRe=this.formatRe(this.locale_periods),this.periodLookup=this.formatLookup(this.locale_periods),this.weekdayRe=this.formatRe(this.locale_weekdays),this.weekdayLookup=this.formatLookup(this.locale_weekdays),this.shortWeekdayRe=this.formatRe(this.locale_shortWeekdays),this.shortWeekdayLookup=this.formatLookup(this.locale_shortWeekdays),this.monthRe=this.formatRe(this.locale_months),this.monthLookup=this.formatLookup(this.locale_months),this.shortMonthRe=this.formatRe(this.locale_shortMonths),this.shortMonthLookup=this.formatLookup(this.locale_shortMonths)}requote(t){return t.replace(this.requoteRe,"\\$&")}localDate(t){if(0<=t.y&&t.y<100){const e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}utcDate(t){if(0<=t.y&&t.y<100){const e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}newDate(t,e,i){return{y:t,m:e,d:i,H:0,M:0,S:0,L:0}}formatRe(t){return new RegExp("^(?:"+t.map(this.requoteF).join("|")+")","i")}formatLookup(t){return new Map(t.map((e,i)=>[e.toLowerCase(),i]))}pad(t,e,i){const r=t<0?"-":"",s=(r?-t:t)+"",a=s.length;return r+(a<i?new Array(i-a+1).join(e)+s:s)}parseSpecifier(t,e,i,r){let s=0;const a=e.length,o=i.length;let l,u;for(;s<a;){if(r>=o)return-1;if(l=e.charCodeAt(s++),l===37){if(l=e.charAt(s++),u=this.parses[l in this.pads?e.charAt(s++):l],!u||(r=u(t,i,r))<0)return-1}else if(l!==i.charCodeAt(r++))return-1}return r}newParse(t,e){const i=this;return function(r){const s=i.newDate(1900,void 0,1);return i.parseSpecifier(s,t,r+="",0)!==r.length?null:"Q"in s?new Date(s.Q):"s"in s?new Date(1e3*s.s+("L"in s?s.L:0)):(e&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),s.m===void 0&&(s.m="q"in s?s.q:0),"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,i.utcDate(s)):i.localDate(s))}}newFormat(t,e){const i=this;return function(r){const s=[];let a=-1,o=0;const l=t.length;let u,h,c;for(r instanceof Date||(r=new Date(+r));++a<l;)t.charCodeAt(a)===37&&(s.push(t.slice(o,a)),(h=i.pads[u=t.charAt(++a)])?u=t.charAt(++a):h=u==="e"?" ":"0",c=e[u],u=c(r,h),s.push(u),o=a+1);return s.push(t.slice(o,a)),s.join("")}}getFullTimeStamp(t){const e=parseInt(t+"",10);return String(e).length===10?1e3*e:e}}function rkt(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function SA(n,t){const e=t?n.toExponential(t-1):n.toExponential(),i=e.indexOf("e");if(i<0)return null;const r=e.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+e.slice(i+1)]}function skt(n,t){return function(e,i){let r=e.length;const s=[];let a=0,o=n[0],l=0;for(;r>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),s.push(e.substring(r-=o,r+o)),!((l+=o+1)>i));)o=n[a=(a+1)%n.length];return s.reverse().join(t)}}let qq;function akt(n,t){const e=SA(n,t);if(!e)return n+"";const i=e[0],r=e[1],s=r-(qq=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+SA(n,Math.max(0,t+s-1))[0]}function K7(n,t){const e=SA(n,t);if(!e)return n+"";const i=e[0],r=e[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}function okt(n){const t=n.length;let e,i=-1;t:for(let r=1;r<t;++r)switch(n[r]){case".":i=e=r;break;case"0":i===0&&(i=r),e=r;break;default:if(!+n[r])break t;i>0&&(i=0)}return i>0?n.slice(0,i)+n.slice(e+1):n}class lkt{constructor(t={}){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}toString(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}}const Zq=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function q7(n){let t;if(t=Zq.exec(n))return new lkt({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]});ri.getInstance().error("invalid format: "+n)}const Z7=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];class _d{constructor(){this.locale={thousands:",",grouping:[3],currency:["$",""]},this.group=this.locale.grouping===void 0||this.locale.thousands===void 0?t=>t:skt([...this.locale.grouping].map(Number),`${this.locale.thousands}`),this.currencyPrefix=this.locale.currency===void 0?"":this.locale.currency[0]+"",this.currencySuffix=this.locale.currency===void 0?"":this.locale.currency[1]+"",this.decimal=this.locale.decimal===void 0?".":this.locale.decimal+"",this.numerals=this.locale.numerals===void 0?t=>t:hkt([...this.locale.numerals].map(String)),this.percent=this.locale.percent===void 0?"%":this.locale.percent+"",this.minus=this.locale.minus===void 0?"−":this.locale.minus+"",this.nan=this.locale.nan===void 0?"NaN":this.locale.nan+"",this.formatter=t=>this.newFormat(t),this.format=(t,e)=>this.formatter(t)(e),this.formatPrefix=(t,e)=>this._formatPrefix(t,e)}static getInstance(){return _d.instance||(_d.instance=new _d),_d.instance}newFormat(t){const e=q7(t);let i=e.fill,r=e.align;const s=e.sign,a=e.symbol;let o=e.zero;const l=e.width;let u=e.comma,h=e.precision,c=e.trim,d=e.type;d==="n"?(u=!0,d="g"):J7[d]||(h===void 0&&(h=12),c=!0,d="g"),(o||i==="0"&&r==="=")&&(o=!0,i="0",r="=");const p=a==="$"?this.currencyPrefix:a==="#"&&/[boxX]/.test(d)?"0"+d.toLowerCase():"",f=a==="$"?this.currencySuffix:/[%p]/.test(d)?this.percent:"",g=J7[d],_=/[defgprstz%]/.test(d);h=h===void 0?6:/[gprs]/.test(d)?Math.max(1,Math.min(21,h)):Math.max(0,Math.min(20,h));const{nan:v,minus:y,decimal:b,group:S,numerals:A}=this;function w(C){let k,M,P,E=p,I=f,D=C;if(d==="c")I=g(D)+I,D="";else{D=+D;let L=D<0||1/D<0;if(D=isNaN(D)?v:g(Math.abs(D),h),c&&(D=okt(D)),L&&+D==0&&s!=="+"&&(L=!1),E=(L?s==="("?s:y:s==="-"||s==="("?"":s)+E,I=(d==="s"?Z7[8+qq/3]:"")+I+(L&&s==="("?")":""),_){for(k=-1,M=D.length;++k<M;)if(P=D.charCodeAt(k),48>P||P>57){I=(P===46?b+D.slice(k+1):D.slice(k))+I,D=D.slice(0,k);break}}}u&&!o&&(D=S(D,1/0));let N=E.length+D.length+I.length,O=N<l?new Array(l-N+1).join(i):"";switch(u&&o&&(D=S(O+D,O.length?l-I.length:1/0),O=""),r){case"<":D=E+D+I+O;break;case"=":D=E+O+D+I;break;case"^":D=O.slice(0,N=O.length>>1)+E+D+I+O.slice(N);break;default:D=O+E+D+I}return A(D)}return w.toString=function(){return t+""},w}_formatPrefix(t,e){const i=q7(t);i.type="f";const r=this.newFormat(i.toString()),s=3*Math.max(-8,Math.min(8,Math.floor(ukt(e)/3))),a=Math.pow(10,-s),o=Z7[8+s/3];return function(l){return r(a*l)+o}}}const J7={"%":(n,t)=>(100*n).toFixed(t),b:n=>Math.round(n).toString(2),c:n=>n+"",d:rkt,f:(n,t)=>n.toFixed(t),e:(n,t)=>n.toExponential(t),g:(n,t)=>n.toPrecision(t),o:n=>Math.round(n).toString(8),p:(n,t)=>K7(100*n,t),r:K7,s:akt,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16),t:(n,t)=>Number.isInteger(n)?n.toFixed(2):Math.floor(n*Math.pow(10,t))/Math.pow(10,t)+"",z:(n,t)=>n%1==0?n+"":n.toFixed(t)};function ukt(n){const t=SA(Math.abs(n));return t?t[1]:NaN}function hkt(n){return function(t){return t.replace(/[0-9]/g,e=>n[+e])}}const ckt=(n,t)=>{const{callback:e}=t;return e&&(n=n.filter(e)),n};function u2(){return new AA}function AA(){this.reset()}AA.prototype={constructor:AA,reset:function(){this.s=this.t=0},add:function(n){Q7(cx,n,this.t),Q7(this,cx.s,this.s),this.s?this.t+=cx.t:this.s=cx.t},valueOf:function(){return this.s}};var cx=new AA;function Q7(n,t,e){var i=n.s=t+e,r=i-t,s=i-r;n.t=t-s+(e-r)}var Te=1e-6,dkt=1e-12,ze=Math.PI,Sn=ze/2,t6=ze/4,_a=ze*2,Rr=180/ze,an=ze/180,bi=Math.abs,Om=Math.atan,Pu=Math.atan2,Fe=Math.cos,Jq=Math.exp,wA=Math.log,JP=Math.pow,Me=Math.sin,$a=Math.sign||function(n){return n>0?1:n<0?-1:0},Vs=Math.sqrt,C3=Math.tan;function Qq(n){return n>1?0:n<-1?ze:Math.acos(n)}function Ja(n){return n>1?Sn:n<-1?-Sn:Math.asin(n)}function Ga(){}function CA(n,t){n&&i6.hasOwnProperty(n.type)&&i6[n.type](n,t)}var e6={Feature:function(n,t){CA(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,i=-1,r=e.length;++i<r;)CA(e[i].geometry,t)}},i6={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)n=e[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){aI(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)aI(e[i],t,0)},Polygon:function(n,t){n6(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)n6(e[i],t)},GeometryCollection:function(n,t){for(var e=n.geometries,i=-1,r=e.length;++i<r;)CA(e[i],t)}};function aI(n,t,e){var i=-1,r=n.length-e,s;for(t.lineStart();++i<r;)s=n[i],t.point(s[0],s[1],s[2]);t.lineEnd()}function n6(n,t){var e=-1,i=n.length;for(t.polygonStart();++e<i;)aI(n[e],t,1);t.polygonEnd()}function of(n,t){n&&e6.hasOwnProperty(n.type)?e6[n.type](n,t):CA(n,t)}function oI(n){return[Pu(n[1],n[0]),Ja(n[2])]}function Vg(n){var t=n[0],e=n[1],i=Fe(e);return[i*Fe(t),i*Me(t),Me(e)]}function dx(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function kA(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function QP(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function px(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function lI(n){var t=Vs(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function uI(n,t){function e(i,r){return i=n(i,r),t(i[0],i[1])}return n.invert&&t.invert&&(e.invert=function(i,r){return i=t.invert(i,r),i&&n.invert(i[0],i[1])}),e}function hI(n,t){return[bi(n)>ze?n+Math.round(-n/_a)*_a:n,t]}hI.invert=hI;function tZ(n,t,e){return(n%=_a)?t||e?uI(s6(n),a6(t,e)):s6(n):t||e?a6(t,e):hI}function r6(n){return function(t,e){return t+=n,[t>ze?t-_a:t<-ze?t+_a:t,e]}}function s6(n){var t=r6(n);return t.invert=r6(-n),t}function a6(n,t){var e=Fe(n),i=Me(n),r=Fe(t),s=Me(t);function a(o,l){var u=Fe(l),h=Fe(o)*u,c=Me(o)*u,d=Me(l),p=d*e+h*i;return[Pu(c*r-p*s,h*e-d*i),Ja(p*r+c*s)]}return a.invert=function(o,l){var u=Fe(l),h=Fe(o)*u,c=Me(o)*u,d=Me(l),p=d*r-c*s;return[Pu(c*r+d*s,h*e+p*i),Ja(p*e-h*i)]},a}function pkt(n){n=tZ(n[0]*an,n[1]*an,n.length>2?n[2]*an:0);function t(e){return e=n(e[0]*an,e[1]*an),e[0]*=Rr,e[1]*=Rr,e}return t.invert=function(e){return e=n.invert(e[0]*an,e[1]*an),e[0]*=Rr,e[1]*=Rr,e},t}function fkt(n,t,e,i,r,s){if(e){var a=Fe(t),o=Me(t),l=i*e;r==null?(r=t+i*_a,s=t-l/2):(r=o6(a,r),s=o6(a,s),(i>0?r<s:r>s)&&(r+=i*_a));for(var u,h=r;i>0?h>s:h<s;h-=l)u=oI([a,-o*Fe(h),-o*Me(h)]),n.point(u[0],u[1])}}function o6(n,t){t=Vg(t),t[0]-=n,lI(t);var e=Qq(-t[1]);return((-t[2]<0?-e:e)+_a-Te)%_a}function eZ(){var n=[],t;return{point:function(e,i,r){t.push([e,i,r])},lineStart:function(){n.push(t=[])},lineEnd:Ga,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function pS(n,t){return bi(n[0]-t[0])<Te&&bi(n[1]-t[1])<Te}function fx(n,t,e,i){this.x=n,this.z=t,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function iZ(n,t,e,i,r){var s=[],a=[],o,l;if(n.forEach(function(f){if(!((g=f.length-1)<=0)){var g,_=f[0],v=f[g],y;if(pS(_,v)){if(!_[2]&&!v[2]){for(r.lineStart(),o=0;o<g;++o)r.point((_=f[o])[0],_[1]);r.lineEnd();return}v[0]+=2*Te}s.push(y=new fx(_,f,null,!0)),a.push(y.o=new fx(_,null,y,!1)),s.push(y=new fx(v,f,null,!1)),a.push(y.o=new fx(v,null,y,!0))}}),!!s.length){for(a.sort(t),l6(s),l6(a),o=0,l=a.length;o<l;++o)a[o].e=e=!e;for(var u=s[0],h,c;;){for(var d=u,p=!0;d.v;)if((d=d.n)===u)return;h=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(o=0,l=h.length;o<l;++o)r.point((c=h[o])[0],c[1]);else i(d.x,d.n.x,1,r);d=d.n}else{if(p)for(h=d.p.z,o=h.length-1;o>=0;--o)r.point((c=h[o])[0],c[1]);else i(d.x,d.p.x,-1,r);d=d.p}d=d.o,h=d.z,p=!p}while(!d.v);r.lineEnd()}}}function l6(n){if(t=n.length){for(var t,e=0,i=n[0],r;++e<t;)i.n=r=n[e],r.p=i,i=r;i.n=r=n[0],r.p=i}}var tE=u2();function eE(n){return bi(n[0])<=ze?n[0]:$a(n[0])*((bi(n[0])+ze)%_a-ze)}function gkt(n,t){var e=eE(t),i=t[1],r=Me(i),s=[Me(e),-Fe(e),0],a=0,o=0;tE.reset(),r===1?i=Sn+Te:r===-1&&(i=-Sn-Te);for(var l=0,u=n.length;l<u;++l)if(c=(h=n[l]).length)for(var h,c,d=h[c-1],p=eE(d),f=d[1]/2+t6,g=Me(f),_=Fe(f),v=0;v<c;++v,p=b,g=A,_=w,d=y){var y=h[v],b=eE(y),S=y[1]/2+t6,A=Me(S),w=Fe(S),C=b-p,k=C>=0?1:-1,M=k*C,P=M>ze,E=g*A;if(tE.add(Pu(E*k*Me(M),_*w+E*Fe(M))),a+=P?C+k*_a:C,P^p>=e^b>=e){var I=kA(Vg(d),Vg(y));lI(I);var D=kA(s,I);lI(D);var N=(P^C>=0?-1:1)*Ja(D[2]);(i>N||i===N&&(I[0]||I[1]))&&(o+=P^C>=0?1:-1)}}return(a<-Te||a<Te&&tE<-Te)^o&1}function nZ(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function mkt(n){return n.length===1&&(n=vkt(n)),{left:function(t,e,i,r){for(i==null&&(i=0),r==null&&(r=t.length);i<r;){var s=i+r>>>1;n(t[s],e)<0?i=s+1:r=s}return i},right:function(t,e,i,r){for(i==null&&(i=0),r==null&&(r=t.length);i<r;){var s=i+r>>>1;n(t[s],e)>0?r=s:i=s+1}return i}}}function vkt(n){return function(t,e){return nZ(n(t),e)}}mkt(nZ);function rZ(n){for(var t=n.length,e,i=-1,r=0,s,a;++i<t;)r+=n[i].length;for(s=new Array(r);--t>=0;)for(a=n[t],e=a.length;--e>=0;)s[--r]=a[e];return s}function sZ(n,t,e,i){return function(r){var s=t(r),a=eZ(),o=t(a),l=!1,u,h,c,d={point:p,lineStart:g,lineEnd:_,polygonStart:function(){d.point=v,d.lineStart=y,d.lineEnd=b,h=[],u=[]},polygonEnd:function(){d.point=p,d.lineStart=g,d.lineEnd=_,h=rZ(h);var S=gkt(u,i);h.length?(l||(r.polygonStart(),l=!0),iZ(h,ykt,S,e,r)):S&&(l||(r.polygonStart(),l=!0),r.lineStart(),e(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),h=u=null},sphere:function(){r.polygonStart(),r.lineStart(),e(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(S,A){n(S,A)&&r.point(S,A)}function f(S,A){s.point(S,A)}function g(){d.point=f,s.lineStart()}function _(){d.point=p,s.lineEnd()}function v(S,A){c.push([S,A]),o.point(S,A)}function y(){o.lineStart(),c=[]}function b(){v(c[0][0],c[0][1]),o.lineEnd();var S=o.clean(),A=a.result(),w,C=A.length,k,M,P;if(c.pop(),u.push(c),c=null,!!C){if(S&1){if(M=A[0],(k=M.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),w=0;w<k;++w)r.point((P=M[w])[0],P[1]);r.lineEnd()}return}C>1&&S&2&&A.push(A.pop().concat(A.shift())),h.push(A.filter(_kt))}}return d}}function _kt(n){return n.length>1}function ykt(n,t){return((n=n.x)[0]<0?n[1]-Sn-Te:Sn-n[1])-((t=t.x)[0]<0?t[1]-Sn-Te:Sn-t[1])}const u6=sZ(function(){return!0},bkt,Skt,[-ze,-Sn]);function bkt(n){var t=NaN,e=NaN,i=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(s,a){var o=s>0?ze:-ze,l=bi(s-t);bi(l-ze)<Te?(n.point(t,e=(e+a)/2>0?Sn:-Sn),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(o,e),n.point(s,e),r=0):i!==o&&l>=ze&&(bi(t-i)<Te&&(t-=i*Te),bi(s-o)<Te&&(s-=o*Te),e=xkt(t,e,s,a),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(o,e),r=0),n.point(t=s,e=a),i=o},lineEnd:function(){n.lineEnd(),t=e=NaN},clean:function(){return 2-r}}}function xkt(n,t,e,i){var r,s,a=Me(n-e);return bi(a)>Te?Om((Me(t)*(s=Fe(i))*Me(e)-Me(i)*(r=Fe(t))*Me(n))/(r*s*a)):(t+i)/2}function Skt(n,t,e,i){var r;if(n==null)r=e*Sn,i.point(-ze,r),i.point(0,r),i.point(ze,r),i.point(ze,0),i.point(ze,-r),i.point(0,-r),i.point(-ze,-r),i.point(-ze,0),i.point(-ze,r);else if(bi(n[0]-t[0])>Te){var s=n[0]<t[0]?ze:-ze;r=e*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(t[0],t[1])}function Akt(n){var t=Fe(n),e=6*an,i=t>0,r=bi(t)>Te;function s(h,c,d,p){fkt(p,n,e,d,h,c)}function a(h,c){return Fe(h)*Fe(c)>t}function o(h){var c,d,p,f,g;return{lineStart:function(){f=p=!1,g=1},point:function(_,v){var y=[_,v],b,S=a(_,v),A=i?S?0:u(_,v):S?u(_+(_<0?ze:-ze),v):0;if(!c&&(f=p=S)&&h.lineStart(),S!==p&&(b=l(c,y),(!b||pS(c,b)||pS(y,b))&&(y[2]=1)),S!==p)g=0,S?(h.lineStart(),b=l(y,c),h.point(b[0],b[1])):(b=l(c,y),h.point(b[0],b[1],2),h.lineEnd()),c=b;else if(r&&c&&i^S){var w;!(A&d)&&(w=l(y,c,!0))&&(g=0,i?(h.lineStart(),h.point(w[0][0],w[0][1]),h.point(w[1][0],w[1][1]),h.lineEnd()):(h.point(w[1][0],w[1][1]),h.lineEnd(),h.lineStart(),h.point(w[0][0],w[0][1],3)))}S&&(!c||!pS(c,y))&&h.point(y[0],y[1]),c=y,p=S,d=A},lineEnd:function(){p&&h.lineEnd(),c=null},clean:function(){return g|(f&&p)<<1}}}function l(h,c,d){var p=Vg(h),f=Vg(c),g=[1,0,0],_=kA(p,f),v=dx(_,_),y=_[0],b=v-y*y;if(!b)return!d&&h;var S=t*v/b,A=-t*y/b,w=kA(g,_),C=px(g,S),k=px(_,A);QP(C,k);var M=w,P=dx(C,M),E=dx(M,M),I=P*P-E*(dx(C,C)-1);if(!(I<0)){var D=Vs(I),N=px(M,(-P-D)/E);if(QP(N,C),N=oI(N),!d)return N;var O=h[0],L=c[0],H=h[1],j=c[1],G;L<O&&(G=O,O=L,L=G);var U=L-O,$=bi(U-ze)<Te,q=$||U<Te;if(!$&&j<H&&(G=H,H=j,j=G),q?$?H+j>0^N[1]<(bi(N[0]-O)<Te?H:j):H<=N[1]&&N[1]<=j:U>ze^(O<=N[0]&&N[0]<=L)){var tt=px(M,(-P+D)/E);return QP(tt,C),[N,oI(tt)]}}}function u(h,c){var d=i?n:ze-n,p=0;return h<-d?p|=1:h>d&&(p|=2),c<-d?p|=4:c>d&&(p|=8),p}return sZ(a,o,s,i?[0,-n]:[-ze,n-ze])}function wkt(n,t,e,i,r,s){var a=n[0],o=n[1],l=t[0],u=t[1],h=0,c=1,d=l-a,p=u-o,f;if(f=e-a,!(!d&&f>0)){if(f/=d,d<0){if(f<h)return;f<c&&(c=f)}else if(d>0){if(f>c)return;f>h&&(h=f)}if(f=r-a,!(!d&&f<0)){if(f/=d,d<0){if(f>c)return;f>h&&(h=f)}else if(d>0){if(f<h)return;f<c&&(c=f)}if(f=i-o,!(!p&&f>0)){if(f/=p,p<0){if(f<h)return;f<c&&(c=f)}else if(p>0){if(f>c)return;f>h&&(h=f)}if(f=s-o,!(!p&&f<0)){if(f/=p,p<0){if(f>c)return;f>h&&(h=f)}else if(p>0){if(f<h)return;f<c&&(c=f)}return h>0&&(n[0]=a+h*d,n[1]=o+h*p),c<1&&(t[0]=a+c*d,t[1]=o+c*p),!0}}}}}var Vv=1e9,gx=-Vv;function aZ(n,t,e,i){function r(u,h){return n<=u&&u<=e&&t<=h&&h<=i}function s(u,h,c,d){var p=0,f=0;if(u==null||(p=a(u,c))!==(f=a(h,c))||l(u,h)<0^c>0)do d.point(p===0||p===3?n:e,p>1?i:t);while((p=(p+c+4)%4)!==f);else d.point(h[0],h[1])}function a(u,h){return bi(u[0]-n)<Te?h>0?0:3:bi(u[0]-e)<Te?h>0?2:1:bi(u[1]-t)<Te?h>0?1:0:h>0?3:2}function o(u,h){return l(u.x,h.x)}function l(u,h){var c=a(u,1),d=a(h,1);return c!==d?c-d:c===0?h[1]-u[1]:c===1?u[0]-h[0]:c===2?u[1]-h[1]:h[0]-u[0]}return function(u){var h=u,c=eZ(),d,p,f,g,_,v,y,b,S,A,w,C={point:k,lineStart:I,lineEnd:D,polygonStart:P,polygonEnd:E};function k(O,L){r(O,L)&&h.point(O,L)}function M(){for(var O=0,L=0,H=p.length;L<H;++L)for(var j=p[L],G=1,U=j.length,$=j[0],q,tt,it=$[0],nt=$[1];G<U;++G)q=it,tt=nt,$=j[G],it=$[0],nt=$[1],tt<=i?nt>i&&(it-q)*(i-tt)>(nt-tt)*(n-q)&&++O:nt<=i&&(it-q)*(i-tt)<(nt-tt)*(n-q)&&--O;return O}function P(){h=c,d=[],p=[],w=!0}function E(){var O=M(),L=w&&O,H=(d=rZ(d)).length;(L||H)&&(u.polygonStart(),L&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),H&&iZ(d,o,O,s,u),u.polygonEnd()),h=u,d=p=f=null}function I(){C.point=N,p&&p.push(f=[]),A=!0,S=!1,y=b=NaN}function D(){d&&(N(g,_),v&&S&&c.rejoin(),d.push(c.result())),C.point=k,S&&h.lineEnd()}function N(O,L){var H=r(O,L);if(p&&f.push([O,L]),A)g=O,_=L,v=H,A=!1,H&&(h.lineStart(),h.point(O,L));else if(H&&S)h.point(O,L);else{var j=[y=Math.max(gx,Math.min(Vv,y)),b=Math.max(gx,Math.min(Vv,b))],G=[O=Math.max(gx,Math.min(Vv,O)),L=Math.max(gx,Math.min(Vv,L))];wkt(j,G,n,t,e,i)?(S||(h.lineStart(),h.point(j[0],j[1])),h.point(G[0],G[1]),H||h.lineEnd(),w=!1):H&&(h.lineStart(),h.point(O,L),w=!1)}y=O,b=L,S=H}return C}}function ey(n){return n}var iE=u2(),cI=u2(),oZ,lZ,dI,pI,su={point:Ga,lineStart:Ga,lineEnd:Ga,polygonStart:function(){su.lineStart=Ckt,su.lineEnd=Tkt},polygonEnd:function(){su.lineStart=su.lineEnd=su.point=Ga,iE.add(bi(cI)),cI.reset()},result:function(){var n=iE/2;return iE.reset(),n}};function Ckt(){su.point=kkt}function kkt(n,t){su.point=uZ,oZ=dI=n,lZ=pI=t}function uZ(n,t){cI.add(pI*n-dI*t),dI=n,pI=t}function Tkt(){uZ(oZ,lZ)}var Wg=1/0,TA=Wg,iy=-Wg,MA=iy,PA={point:Mkt,lineStart:Ga,lineEnd:Ga,polygonStart:Ga,polygonEnd:Ga,result:function(){var n=[[Wg,TA],[iy,MA]];return iy=MA=-(TA=Wg=1/0),n}};function Mkt(n,t){n<Wg&&(Wg=n),n>iy&&(iy=n),t<TA&&(TA=t),t>MA&&(MA=t)}var fI=0,gI=0,Wv=0,EA=0,OA=0,jf=0,mI=0,vI=0,$v=0,hZ,cZ,ul,hl,Ha={point:Zd,lineStart:h6,lineEnd:c6,polygonStart:function(){Ha.lineStart=Okt,Ha.lineEnd=Rkt},polygonEnd:function(){Ha.point=Zd,Ha.lineStart=h6,Ha.lineEnd=c6},result:function(){var n=$v?[mI/$v,vI/$v]:jf?[EA/jf,OA/jf]:Wv?[fI/Wv,gI/Wv]:[NaN,NaN];return fI=gI=Wv=EA=OA=jf=mI=vI=$v=0,n}};function Zd(n,t){fI+=n,gI+=t,++Wv}function h6(){Ha.point=Pkt}function Pkt(n,t){Ha.point=Ekt,Zd(ul=n,hl=t)}function Ekt(n,t){var e=n-ul,i=t-hl,r=Vs(e*e+i*i);EA+=r*(ul+n)/2,OA+=r*(hl+t)/2,jf+=r,Zd(ul=n,hl=t)}function c6(){Ha.point=Zd}function Okt(){Ha.point=Ikt}function Rkt(){dZ(hZ,cZ)}function Ikt(n,t){Ha.point=dZ,Zd(hZ=ul=n,cZ=hl=t)}function dZ(n,t){var e=n-ul,i=t-hl,r=Vs(e*e+i*i);EA+=r*(ul+n)/2,OA+=r*(hl+t)/2,jf+=r,r=hl*n-ul*t,mI+=r*(ul+n),vI+=r*(hl+t),$v+=r*3,Zd(ul=n,hl=t)}function pZ(n){this._context=n}pZ.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,_a);break}}},result:Ga};var _I=u2(),nE,fZ,gZ,Gv,Uv,ny={point:Ga,lineStart:function(){ny.point=Lkt},lineEnd:function(){nE&&mZ(fZ,gZ),ny.point=Ga},polygonStart:function(){nE=!0},polygonEnd:function(){nE=null},result:function(){var n=+_I;return _I.reset(),n}};function Lkt(n,t){ny.point=mZ,fZ=Gv=n,gZ=Uv=t}function mZ(n,t){Gv-=n,Uv-=t,_I.add(Vs(Gv*Gv+Uv*Uv)),Gv=n,Uv=t}function vZ(){this._string=[]}vZ.prototype={_radius:4.5,_circle:d6(4.5),pointRadius:function(n){return(n=+n)!==this._radius&&(this._radius=n,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._string.push("M",n,",",t),this._point=1;break}case 1:{this._string.push("L",n,",",t);break}default:{this._circle==null&&(this._circle=d6(this._radius)),this._string.push("M",n,",",t,this._circle);break}}},result:function(){if(this._string.length){var n=this._string.join("");return this._string=[],n}else return null}};function d6(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function k3(n,t){var e=4.5,i,r;function s(a){return a&&(typeof e=="function"&&r.pointRadius(+e.apply(this,arguments)),of(a,i(r))),r.result()}return s.area=function(a){return of(a,i(su)),su.result()},s.measure=function(a){return of(a,i(ny)),ny.result()},s.bounds=function(a){return of(a,i(PA)),PA.result()},s.centroid=function(a){return of(a,i(Ha)),Ha.result()},s.projection=function(a){return arguments.length?(i=a==null?(n=null,ey):(n=a).stream,s):n},s.context=function(a){return arguments.length?(r=a==null?(t=null,new vZ):new pZ(t=a),typeof e!="function"&&r.pointRadius(e),s):t},s.pointRadius=function(a){return arguments.length?(e=typeof a=="function"?a:(r.pointRadius(+a),+a),s):e},s.projection(n).context(t)}function h2(n){return function(t){var e=new yI;for(var i in n)e[i]=n[i];return e.stream=t,e}}function yI(){}yI.prototype={constructor:yI,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function T3(n,t,e){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),i!=null&&n.clipExtent(null),of(e,n.stream(PA)),t(PA.result()),i!=null&&n.clipExtent(i),n}function c2(n,t,e){return T3(n,function(i){var r=t[1][0]-t[0][0],s=t[1][1]-t[0][1],a=Math.min(r/(i[1][0]-i[0][0]),s/(i[1][1]-i[0][1])),o=+t[0][0]+(r-a*(i[1][0]+i[0][0]))/2,l=+t[0][1]+(s-a*(i[1][1]+i[0][1]))/2;n.scale(150*a).translate([o,l])},e)}function M3(n,t,e){return c2(n,[[0,0],t],e)}function P3(n,t,e){return T3(n,function(i){var r=+t,s=r/(i[1][0]-i[0][0]),a=(r-s*(i[1][0]+i[0][0]))/2,o=-s*i[0][1];n.scale(150*s).translate([a,o])},e)}function E3(n,t,e){return T3(n,function(i){var r=+t,s=r/(i[1][1]-i[0][1]),a=-s*i[0][0],o=(r-s*(i[1][1]+i[0][1]))/2;n.scale(150*s).translate([a,o])},e)}var p6=16,Dkt=Fe(30*an);function f6(n,t){return+t?Fkt(n,t):Bkt(n)}function Bkt(n){return h2({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}function Fkt(n,t){function e(i,r,s,a,o,l,u,h,c,d,p,f,g,_){var v=u-i,y=h-r,b=v*v+y*y;if(b>4*t&&g--){var S=a+d,A=o+p,w=l+f,C=Vs(S*S+A*A+w*w),k=Ja(w/=C),M=bi(bi(w)-1)<Te||bi(s-c)<Te?(s+c)/2:Pu(A,S),P=n(M,k),E=P[0],I=P[1],D=E-i,N=I-r,O=y*D-v*N;(O*O/b>t||bi((v*D+y*N)/b-.5)>.3||a*d+o*p+l*f<Dkt)&&(e(i,r,s,a,o,l,E,I,M,S/=C,A/=C,w,g,_),_.point(E,I),e(E,I,M,S,A,w,u,h,c,d,p,f,g,_))}}return function(i){var r,s,a,o,l,u,h,c,d,p,f,g,_={point:v,lineStart:y,lineEnd:S,polygonStart:function(){i.polygonStart(),_.lineStart=A},polygonEnd:function(){i.polygonEnd(),_.lineStart=y}};function v(k,M){k=n(k,M),i.point(k[0],k[1])}function y(){c=NaN,_.point=b,i.lineStart()}function b(k,M){var P=Vg([k,M]),E=n(k,M);e(c,d,h,p,f,g,c=E[0],d=E[1],h=k,p=P[0],f=P[1],g=P[2],p6,i),i.point(c,d)}function S(){_.point=v,i.lineEnd()}function A(){y(),_.point=w,_.lineEnd=C}function w(k,M){b(r=k,M),s=c,a=d,o=p,l=f,u=g,_.point=b}function C(){e(c,d,h,p,f,g,s,a,r,o,l,u,p6,i),_.lineEnd=S,S()}return _}}var jkt=h2({point:function(n,t){this.stream.point(n*an,t*an)}});function Nkt(n){return h2({point:function(t,e){var i=n(t,e);return this.stream.point(i[0],i[1])}})}function zkt(n,t,e,i,r){function s(a,o){return a*=i,o*=r,[t+n*a,e-n*o]}return s.invert=function(a,o){return[(a-t)/n*i,(e-o)/n*r]},s}function g6(n,t,e,i,r,s){var a=Fe(s),o=Me(s),l=a*n,u=o*n,h=a/n,c=o/n,d=(o*e-a*t)/n,p=(o*t+a*e)/n;function f(g,_){return g*=i,_*=r,[l*g-u*_+t,e-u*g-l*_]}return f.invert=function(g,_){return[i*(h*g-c*_+d),r*(p-c*g-h*_)]},f}function zu(n){return _Z(function(){return n})()}function _Z(n){var t,e=150,i=480,r=250,s=0,a=0,o=0,l=0,u=0,h,c=0,d=1,p=1,f=null,g=u6,_=null,v,y,b,S=ey,A=.5,w,C,k,M,P;function E(O){return k(O[0]*an,O[1]*an)}function I(O){return O=k.invert(O[0],O[1]),O&&[O[0]*Rr,O[1]*Rr]}E.stream=function(O){return M&&P===O?M:M=jkt(Nkt(h)(g(w(S(P=O)))))},E.preclip=function(O){return arguments.length?(g=O,f=void 0,N()):g},E.postclip=function(O){return arguments.length?(S=O,_=v=y=b=null,N()):S},E.clipAngle=function(O){return arguments.length?(g=+O?Akt(f=O*an):(f=null,u6),N()):f*Rr},E.clipExtent=function(O){return arguments.length?(S=O==null?(_=v=y=b=null,ey):aZ(_=+O[0][0],v=+O[0][1],y=+O[1][0],b=+O[1][1]),N()):_==null?null:[[_,v],[y,b]]},E.scale=function(O){return arguments.length?(e=+O,D()):e},E.translate=function(O){return arguments.length?(i=+O[0],r=+O[1],D()):[i,r]},E.center=function(O){return arguments.length?(s=O[0]%360*an,a=O[1]%360*an,D()):[s*Rr,a*Rr]},E.rotate=function(O){return arguments.length?(o=O[0]%360*an,l=O[1]%360*an,u=O.length>2?O[2]%360*an:0,D()):[o*Rr,l*Rr,u*Rr]},E.angle=function(O){return arguments.length?(c=O%360*an,D()):c*Rr},E.reflectX=function(O){return arguments.length?(d=O?-1:1,D()):d<0},E.reflectY=function(O){return arguments.length?(p=O?-1:1,D()):p<0},E.precision=function(O){return arguments.length?(w=f6(C,A=O*O),N()):Vs(A)},E.fitExtent=function(O,L){return c2(E,O,L)},E.fitSize=function(O,L){return M3(E,O,L)},E.fitWidth=function(O,L){return P3(E,O,L)},E.fitHeight=function(O,L){return E3(E,O,L)};function D(){var O=g6(e,0,0,d,p,c).apply(null,t(s,a)),L=(c?g6:zkt)(e,i-O[0],r-O[1],d,p,c);return h=tZ(o,l,u),C=uI(t,L),k=uI(h,C),w=f6(C,A),N()}function N(){return M=P=null,E}return function(){return t=n.apply(this,arguments),E.invert=t.invert&&I,D()}}function O3(n){var t=0,e=ze/3,i=_Z(n),r=i(t,e);return r.parallels=function(s){return arguments.length?i(t=s[0]*an,e=s[1]*an):[t*Rr,e*Rr]},r}function Hkt(n){var t=Fe(n);function e(i,r){return[i*t,Me(r)/t]}return e.invert=function(i,r){return[i/t,Ja(r*t)]},e}function Vkt(n,t){var e=Me(n),i=(e+Me(t))/2;if(bi(i)<Te)return Hkt(n);var r=1+e*(2*i-e),s=Vs(r)/i;function a(o,l){var u=Vs(r-2*i*Me(l))/i;return[u*Me(o*=i),s-u*Fe(o)]}return a.invert=function(o,l){var u=s-l,h=Pu(o,bi(u))*$a(u);return u*i<0&&(h-=ze*$a(o)*$a(u)),[h/i,Ja((r-(o*o+u*u)*i*i)/(2*i))]},a}function RA(){return O3(Vkt).scale(155.424).center([0,33.6442])}function yZ(){return RA().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Wkt(n){var t=n.length;return{point:function(e,i){for(var r=-1;++r<t;)n[r].point(e,i)},sphere:function(){for(var e=-1;++e<t;)n[e].sphere()},lineStart:function(){for(var e=-1;++e<t;)n[e].lineStart()},lineEnd:function(){for(var e=-1;++e<t;)n[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<t;)n[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<t;)n[e].polygonEnd()}}}function $kt(){var n,t,e=yZ(),i,r=RA().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,a=RA().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o,l,u={point:function(d,p){l=[d,p]}};function h(d){var p=d[0],f=d[1];return l=null,i.point(p,f),l||(s.point(p,f),l)||(o.point(p,f),l)}h.invert=function(d){var p=e.scale(),f=e.translate(),g=(d[0]-f[0])/p,_=(d[1]-f[1])/p;return(_>=.12&&_<.234&&g>=-.425&&g<-.214?r:_>=.166&&_<.234&&g>=-.214&&g<-.115?a:e).invert(d)},h.stream=function(d){return n&&t===d?n:n=Wkt([e.stream(t=d),r.stream(d),a.stream(d)])},h.precision=function(d){return arguments.length?(e.precision(d),r.precision(d),a.precision(d),c()):e.precision()},h.scale=function(d){return arguments.length?(e.scale(d),r.scale(d*.35),a.scale(d),h.translate(e.translate())):e.scale()},h.translate=function(d){if(!arguments.length)return e.translate();var p=e.scale(),f=+d[0],g=+d[1];return i=e.translate(d).clipExtent([[f-.455*p,g-.238*p],[f+.455*p,g+.238*p]]).stream(u),s=r.translate([f-.307*p,g+.201*p]).clipExtent([[f-.425*p+Te,g+.12*p+Te],[f-.214*p-Te,g+.234*p-Te]]).stream(u),o=a.translate([f-.205*p,g+.212*p]).clipExtent([[f-.214*p+Te,g+.166*p+Te],[f-.115*p-Te,g+.234*p-Te]]).stream(u),c()},h.fitExtent=function(d,p){return c2(h,d,p)},h.fitSize=function(d,p){return M3(h,d,p)},h.fitWidth=function(d,p){return P3(h,d,p)},h.fitHeight=function(d,p){return E3(h,d,p)};function c(){return n=t=null,h}return h.scale(1070)}function bZ(n){return function(t,e){var i=Fe(t),r=Fe(e),s=n(i*r);return[s*r*Me(t),s*Me(e)]}}function p1(n){return function(t,e){var i=Vs(t*t+e*e),r=n(i),s=Me(r),a=Fe(r);return[Pu(t*s,i*a),Ja(i&&e*s/i)]}}var xZ=bZ(function(n){return Vs(2/(1+n))});xZ.invert=p1(function(n){return 2*Ja(n/2)});function Gkt(){return zu(xZ).scale(124.75).clipAngle(180-.001)}var SZ=bZ(function(n){return(n=Qq(n))&&n/Me(n)});SZ.invert=p1(function(n){return n});function Ukt(){return zu(SZ).scale(79.4188).clipAngle(180-.001)}function d2(n,t){return[n,wA(C3((Sn+t)/2))]}d2.invert=function(n,t){return[n,2*Om(Jq(t))-Sn]};function Ykt(){return AZ(d2).scale(961/_a)}function AZ(n){var t=zu(n),e=t.center,i=t.scale,r=t.translate,s=t.clipExtent,a=null,o,l,u;t.scale=function(c){return arguments.length?(i(c),h()):i()},t.translate=function(c){return arguments.length?(r(c),h()):r()},t.center=function(c){return arguments.length?(e(c),h()):e()},t.clipExtent=function(c){return arguments.length?(c==null?a=o=l=u=null:(a=+c[0][0],o=+c[0][1],l=+c[1][0],u=+c[1][1]),h()):a==null?null:[[a,o],[l,u]]};function h(){var c=ze*i(),d=t(pkt(t.rotate()).invert([0,0]));return s(a==null?[[d[0]-c,d[1]-c],[d[0]+c,d[1]+c]]:n===d2?[[Math.max(d[0]-c,a),o],[Math.min(d[0]+c,l),u]]:[[a,Math.max(d[1]-c,o)],[l,Math.min(d[1]+c,u)]])}return h()}function mx(n){return C3((Sn+n)/2)}function Xkt(n,t){var e=Fe(n),i=n===t?Me(n):wA(e/Fe(t))/wA(mx(t)/mx(n)),r=e*JP(mx(n),i)/i;if(!i)return d2;function s(a,o){r>0?o<-Sn+Te&&(o=-Sn+Te):o>Sn-Te&&(o=Sn-Te);var l=r/JP(mx(o),i);return[l*Me(i*a),r-l*Fe(i*a)]}return s.invert=function(a,o){var l=r-o,u=$a(i)*Vs(a*a+l*l),h=Pu(a,bi(l))*$a(l);return l*i<0&&(h-=ze*$a(a)*$a(l)),[h/i,2*Om(JP(r/u,1/i))-Sn]},s}function Kkt(){return O3(Xkt).scale(109.5).parallels([30,30])}function IA(n,t){return[n,t]}IA.invert=IA;function qkt(){return zu(IA).scale(152.63)}function Zkt(n,t){var e=Fe(n),i=n===t?Me(n):(e-Fe(t))/(t-n),r=e/i+n;if(bi(i)<Te)return IA;function s(a,o){var l=r-o,u=i*a;return[l*Me(u),r-l*Fe(u)]}return s.invert=function(a,o){var l=r-o,u=Pu(a,bi(l))*$a(l);return l*i<0&&(u-=ze*$a(a)*$a(l)),[u/i,r-$a(i)*Vs(a*a+l*l)]},s}function Jkt(){return O3(Zkt).scale(131.154).center([0,13.9389])}var w0=1.340264,C0=-.081106,k0=893e-6,T0=.003796,LA=Vs(3)/2,Qkt=12;function wZ(n,t){var e=Ja(LA*Me(t)),i=e*e,r=i*i*i;return[n*Fe(e)/(LA*(w0+3*C0*i+r*(7*k0+9*T0*i))),e*(w0+C0*i+r*(k0+T0*i))]}wZ.invert=function(n,t){for(var e=t,i=e*e,r=i*i*i,s=0,a,o,l;s<Qkt&&(o=e*(w0+C0*i+r*(k0+T0*i))-t,l=w0+3*C0*i+r*(7*k0+9*T0*i),e-=a=o/l,i=e*e,r=i*i*i,!(bi(a)<dkt));++s);return[LA*n*(w0+3*C0*i+r*(7*k0+9*T0*i))/Fe(e),Ja(Me(e)/LA)]};function t2t(){return zu(wZ).scale(177.158)}function CZ(n,t){var e=Fe(t),i=Fe(n)*e;return[e*Me(n)/i,Me(t)/i]}CZ.invert=p1(Om);function e2t(){return zu(CZ).scale(144.049).clipAngle(60)}function i2t(){var n=1,t=0,e=0,i=1,r=1,s=0,a,o,l=null,u,h,c,d=1,p=1,f=h2({point:function(S,A){var w=b([S,A]);this.stream.point(w[0],w[1])}}),g=ey,_,v;function y(){return d=n*i,p=n*r,_=v=null,b}function b(S){var A=S[0]*d,w=S[1]*p;if(s){var C=w*a-A*o;A=A*a+w*o,w=C}return[A+t,w+e]}return b.invert=function(S){var A=S[0]-t,w=S[1]-e;if(s){var C=w*a+A*o;A=A*a-w*o,w=C}return[A/d,w/p]},b.stream=function(S){return _&&v===S?_:_=f(g(v=S))},b.postclip=function(S){return arguments.length?(g=S,l=u=h=c=null,y()):g},b.clipExtent=function(S){return arguments.length?(g=S==null?(l=u=h=c=null,ey):aZ(l=+S[0][0],u=+S[0][1],h=+S[1][0],c=+S[1][1]),y()):l==null?null:[[l,u],[h,c]]},b.scale=function(S){return arguments.length?(n=+S,y()):n},b.translate=function(S){return arguments.length?(t=+S[0],e=+S[1],y()):[t,e]},b.angle=function(S){return arguments.length?(s=S%360*an,o=Me(s),a=Fe(s),y()):s*Rr},b.reflectX=function(S){return arguments.length?(i=S?-1:1,y()):i<0},b.reflectY=function(S){return arguments.length?(r=S?-1:1,y()):r<0},b.fitExtent=function(S,A){return c2(b,S,A)},b.fitSize=function(S,A){return M3(b,S,A)},b.fitWidth=function(S,A){return P3(b,S,A)},b.fitHeight=function(S,A){return E3(b,S,A)},b}function kZ(n,t){var e=t*t,i=e*e;return[n*(.8707-.131979*e+i*(-.013791+i*(.003971*e-.001529*i))),t*(1.007226+e*(.015085+i*(-.044475+.028874*e-.005916*i)))]}kZ.invert=function(n,t){var e=t,i=25,r;do{var s=e*e,a=s*s;e-=r=(e*(1.007226+s*(.015085+a*(-.044475+.028874*s-.005916*a)))-t)/(1.007226+s*(.015085*3+a*(-.044475*7+.028874*9*s-.005916*11*a)))}while(bi(r)>Te&&--i>0);return[n/(.8707+(s=e*e)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),e]};function n2t(){return zu(kZ).scale(175.295)}function TZ(n,t){return[Fe(t)*Me(n),Me(t)]}TZ.invert=p1(Ja);function r2t(){return zu(TZ).scale(249.5).clipAngle(90+Te)}function MZ(n,t){var e=Fe(t),i=1+Fe(n)*e;return[e*Me(n)/i,Me(t)/i]}MZ.invert=p1(function(n){return 2*Om(n)});function s2t(){return zu(MZ).scale(250).clipAngle(142)}function PZ(n,t){return[wA(C3((Sn+t)/2)),-n]}PZ.invert=function(n,t){return[-t,2*Om(Jq(n))-Sn]};function a2t(){var n=AZ(PZ),t=n.center,e=n.rotate;return n.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},n.rotate=function(i){return arguments.length?e([i[0],i[1],i.length>2?i[2]+90:90]):(i=e(),[i[0],i[1],i[2]-90])},e([0,0,90]).scale(159.155)}function o2t(n){return n}function l2t(n){if(n==null)return o2t;var t,e,i=n.scale[0],r=n.scale[1],s=n.translate[0],a=n.translate[1];return function(o,l){l||(t=e=0);var u=2,h=o.length,c=new Array(h);for(c[0]=(t+=o[0])*i+s,c[1]=(e+=o[1])*r+a;u<h;)c[u]=o[u],++u;return c}}function u2t(n,t){for(var e,i=n.length,r=i-t;r<--i;)e=n[r],n[r++]=n[i],n[i]=e}function h2t(n,t){return typeof t=="string"&&(t=n.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(e){return m6(n,e)})}:m6(n,t)}function m6(n,t){var e=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,s=c2t(n,t);return e==null&&i==null?{type:"Feature",properties:r,geometry:s}:i==null?{type:"Feature",id:e,properties:r,geometry:s}:{type:"Feature",id:e,bbox:i,properties:r,geometry:s}}function c2t(n,t){var e=l2t(n.transform),i=n.arcs;function r(h,c){c.length&&c.pop();for(var d=i[h<0?~h:h],p=0,f=d.length;p<f;++p)c.push(e(d[p],p));h<0&&u2t(c,f)}function s(h){return e(h)}function a(h){for(var c=[],d=0,p=h.length;d<p;++d)r(h[d],c);return c.length<2&&c.push(c[0]),c}function o(h){for(var c=a(h);c.length<4;)c.push(c[0]);return c}function l(h){return h.map(o)}function u(h){var c=h.type,d;switch(c){case"GeometryCollection":return{type:c,geometries:h.geometries.map(u)};case"Point":d=s(h.coordinates);break;case"MultiPoint":d=h.coordinates.map(s);break;case"LineString":d=a(h.arcs);break;case"MultiLineString":d=h.arcs.map(a);break;case"Polygon":d=l(h.arcs);break;case"MultiPolygon":d=h.arcs.map(l);break;default:return null}return{type:c,coordinates:d}}return u(t)}var EZ={exports:{}},Go=function(n,t){this.p1=n,this.p2=t};Go.prototype.rise=function(){return this.p2[1]-this.p1[1]};Go.prototype.run=function(){return this.p2[0]-this.p1[0]};Go.prototype.slope=function(){return this.rise()/this.run()};Go.prototype.yIntercept=function(){return this.p1[1]-this.p1[0]*this.slope(this.p1,this.p2)};Go.prototype.isVertical=function(){return!isFinite(this.slope())};Go.prototype.isHorizontal=function(){return this.p1[1]==this.p2[1]};Go.prototype._perpendicularDistanceHorizontal=function(n){return Math.abs(this.p1[1]-n[1])};Go.prototype._perpendicularDistanceVertical=function(n){return Math.abs(this.p1[0]-n[0])};Go.prototype._perpendicularDistanceHasSlope=function(n){var t=this.slope(),e=this.yIntercept();return Math.abs(t*n[0]-n[1]+e)/Math.sqrt(Math.pow(t,2)+1)};Go.prototype.perpendicularDistance=function(n){return this.isVertical()?this._perpendicularDistanceVertical(n):this.isHorizontal()?this._perpendicularDistanceHorizontal(n):this._perpendicularDistanceHasSlope(n)};var d2t=Go,p2t=d2t,bI=function(n,t){for(var e=0,i=0,r=1;r<=n.length-2;r++){var s=new p2t(n[0],n[n.length-1]).perpendicularDistance(n[r]);s>e&&(i=r,e=s)}if(e>t)var a=bI(n.slice(0,i),t),o=bI(n.slice(i,n.length),t),l=a.concat(o);else n.length>1?l=[n[0],n[n.length-1]]:l=[n[0]];return l},f2t=bI;(function(n){var t=f2t;n.exports=function(r,s,a){return a||(r=JSON.parse(JSON.stringify(r))),r.features?i(r,s):r.type&&r.type==="Feature"?e(r,s):new Error("FeatureCollection or individual Feature required")},n.exports.simplify=function(r,s){return t(r,s)};function e(r,s){var a=r.geometry,o=a.type;if(o==="LineString")a.coordinates=n.exports.simplify(a.coordinates,s);else if(o==="Polygon"||o==="MultiLineString")for(var l=0;l<a.coordinates.length;l++)a.coordinates[l]=n.exports.simplify(a.coordinates[l],s);else if(o==="MultiPolygon")for(var u=0;u<a.coordinates.length;u++)for(var h=0;h<a.coordinates[u].length;h++)a.coordinates[u][h]=n.exports.simplify(a.coordinates[u][h],s);return r}function i(r,s){for(var a=0;a<r.features.length;a++)r.features[a]=e(r.features[a],s);return r}})(EZ);var g2t=EZ.exports;const m2t=Du(g2t),p2=function(n,...t){return _2t(cs(n),...t)};function OZ(n,t,e){const i=t[e];if(i===void 0)n[e]=null;else if(ae(i)){ae(n[e])||(n[e]={});for(const r in i)OZ(n[e],i,r)}else n[e]=i}function v2t(n,t){if(ae(t)&&n!==t)for(const e in t)OZ(n,t,e)}function _2t(n,...t){n||(n={});let e=-1;const i=t.length;for(;++e<i;)v2t(n,t[e]);return n}const y2t={tolerance:.01},b2t=(n,t)=>{const e=p2(y2t,t),{tolerance:i}=e;return m2t(n,i)};var Jd;(function(n){n.DSV="dsv",n.TREE="tree",n.GEO="geo",n.BYTE="bytejson",n.HEX="hex",n.GRAPH="graph",n.TABLE="table",n.GEO_GRATICULE="geo-graticule"})(Jd||(Jd={}));const x2t=(n,t)=>{const{fields:e,key:i,value:r,retains:s}=t,a=[];for(let o=0;o<n.length;o++)e.forEach(l=>{const u={};if(u[i]=l,u[r]=n[o][l],s)s.forEach(h=>{u[h]=n[o][h]});else for(const h in n[o])e.indexOf(h)===-1&&(u[h]=n[o][h]);a.push(u)});return a},RZ=(n,t)=>{var e,i;if(!(t!=null&&t.fields)||n.length===0)return n;const r=t.fields,s=n[0],a={},o=[];for(const l in r)if(Object.prototype.hasOwnProperty.call(r,l)){const u=r[l];if(!u.type){let c=s;l in s||(c=(e=n.find(d=>l in d))!==null&&e!==void 0?e:s),u.type=typeof c[l]=="number"?"linear":"ordinal"}let h;if(typeof u.sortIndex=="number"&&(h={key:l,type:u.type,index:u.sortIndex,sortIndex:{},sortIndexCount:0,sortReverse:u.sortReverse===!0},o.push(h)),((i=u.domain)===null||i===void 0?void 0:i.length)>0)if(u.type==="ordinal"){u._domainCache={},a[l]=u;const c={};u.domain.forEach((d,p)=>{c[d]=p,u._domainCache[d]=p}),h&&(h.sortIndex=c,h.sortIndexCount=u.domain.length)}else u.domain.length>=2&&(a[l]=u)}return Object.keys(a).length>0&&(n=n.filter(l=>{for(const u in a){const h=a[u];if(h.type==="ordinal"){if(!(l[u]in h._domainCache))return!1}else if(h.domain[0]>l[u]||h.domain[1]<l[u])return!1}return!0})),o.sort((l,u)=>l.index-u.index),n.sort((l,u)=>S2t(l,u,o)),n};function S2t(n,t,e){for(let i=0;i<e.length;i++){const r=e[i];let s=0;if(r.type==="ordinal"?(r.sortIndex[t[r.key]]===void 0&&(r.sortIndex[t[r.key]]=r.sortIndexCount++),r.sortIndex[n[r.key]]===void 0&&(r.sortIndex[n[r.key]]=r.sortIndexCount++),s=r.sortIndex[n[r.key]]-r.sortIndex[t[r.key]]):r.type==="linear"&&(s=n[r.key]-t[r.key]),r.sortReverse&&(s=-s),s!==0)return s}return 0}var v6={},rE={},sE=34,yv=10,aE=13;function IZ(n){return new Function("d","return {"+n.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function A2t(n,t){var e=IZ(n);return function(i,r){return t(e(i),r,n)}}function _6(n){var t=Object.create(null),e=[];return n.forEach(function(i){for(var r in i)r in t||e.push(t[r]=r)}),e}function ks(n,t){var e=n+"",i=e.length;return i<t?new Array(t-i+1).join(0)+e:e}function w2t(n){return n<0?"-"+ks(-n,6):n>9999?"+"+ks(n,6):ks(n,4)}function C2t(n){var t=n.getUTCHours(),e=n.getUTCMinutes(),i=n.getUTCSeconds(),r=n.getUTCMilliseconds();return isNaN(n)?"Invalid Date":w2t(n.getUTCFullYear())+"-"+ks(n.getUTCMonth()+1,2)+"-"+ks(n.getUTCDate(),2)+(r?"T"+ks(t,2)+":"+ks(e,2)+":"+ks(i,2)+"."+ks(r,3)+"Z":i?"T"+ks(t,2)+":"+ks(e,2)+":"+ks(i,2)+"Z":e||t?"T"+ks(t,2)+":"+ks(e,2)+"Z":"")}function R3(n){var t=new RegExp('["'+n+`
\r]`),e=n.charCodeAt(0);function i(c,d){var p,f,g=r(c,function(_,v){if(p)return p(_,v-1);f=_,p=d?A2t(_,d):IZ(_)});return g.columns=f||[],g}function r(c,d){var p=[],f=c.length,g=0,_=0,v,y=f<=0,b=!1;c.charCodeAt(f-1)===yv&&--f,c.charCodeAt(f-1)===aE&&--f;function S(){if(y)return rE;if(b)return b=!1,v6;var w,C=g,k;if(c.charCodeAt(C)===sE){for(;g++<f&&c.charCodeAt(g)!==sE||c.charCodeAt(++g)===sE;);return(w=g)>=f?y=!0:(k=c.charCodeAt(g++))===yv?b=!0:k===aE&&(b=!0,c.charCodeAt(g)===yv&&++g),c.slice(C+1,w-1).replace(/""/g,'"')}for(;g<f;){if((k=c.charCodeAt(w=g++))===yv)b=!0;else if(k===aE)b=!0,c.charCodeAt(g)===yv&&++g;else if(k!==e)continue;return c.slice(C,w)}return y=!0,c.slice(C,f)}for(;(v=S())!==rE;){for(var A=[];v!==v6&&v!==rE;)A.push(v),v=S();d&&(A=d(A,_++))==null||p.push(A)}return p}function s(c,d){return c.map(function(p){return d.map(function(f){return h(p[f])}).join(n)})}function a(c,d){return d==null&&(d=_6(c)),[d.map(h).join(n)].concat(s(c,d)).join(`
`)}function o(c,d){return d==null&&(d=_6(c)),s(c,d).join(`
`)}function l(c){return c.map(u).join(`
`)}function u(c){return c.map(h).join(n)}function h(c){return c==null?"":c instanceof Date?C2t(c):t.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:i,parseRows:r,format:a,formatBody:o,formatRows:l,formatRow:u,formatValue:h}}var k2t=R3(","),T2t=k2t.parse,M2t=R3("	"),P2t=M2t.parse;const E2t={delimiter:","},LZ=(n,t={},e)=>{e.type=Jd.DSV;const i=p2(E2t,t),{delimiter:r}=i;if(!It(r))throw new TypeError("Invalid delimiter: must be a string!");return R3(r).parse(n)},DZ=(n,t={},e)=>(e.type=Jd.DSV,T2t(n)),BZ=(n,t={},e)=>(e.type=Jd.DSV,P2t(n));function O2t(n){if(!n)throw new Error("geojson is required");switch(n.type){case"Feature":return FZ(n);case"FeatureCollection":return R2t(n);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return I3(n);default:throw new Error("unknown GeoJSON type")}}function FZ(n){var t={type:"Feature"};return Object.keys(n).forEach(function(e){switch(e){case"type":case"properties":case"geometry":return;default:t[e]=n[e]}}),t.properties=jZ(n.properties),t.geometry=I3(n.geometry),t}function jZ(n){var t={};return n&&Object.keys(n).forEach(function(e){var i=n[e];typeof i=="object"?i===null?t[e]=null:Array.isArray(i)?t[e]=i.map(function(r){return r}):t[e]=jZ(i):t[e]=i}),t}function R2t(n){var t={type:"FeatureCollection"};return Object.keys(n).forEach(function(e){switch(e){case"type":case"features":return;default:t[e]=n[e]}}),t.features=n.features.map(function(e){return FZ(e)}),t}function I3(n){var t={type:n.type};return n.bbox&&(t.bbox=n.bbox),n.type==="GeometryCollection"?(t.geometries=n.geometries.map(function(e){return I3(e)}),t):(t.coordinates=NZ(n.coordinates),t)}function NZ(n){var t=n;return typeof t[0]!="object"?t.slice():t.map(function(e){return NZ(e)})}function Yv(n){if(Array.isArray(n))return n;if(n.type==="Feature"){if(n.geometry!==null)return n.geometry.coordinates}else if(n.coordinates)return n.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function xI(n){for(var t=Yv(n),e=0,i=1,r,s;i<t.length;)r=s||t[0],s=t[i],e+=(s[0]-r[0])*(s[1]+r[1]),i++;return e>0}function y6(n,t){if(n.type==="Feature")t(n,0);else if(n.type==="FeatureCollection")for(var e=0;e<n.features.length&&t(n.features[e],e)!==!1;e++);}function L3(n,t){var e,i,r,s,a,o,l,u,h,c,d=0,p=n.type==="FeatureCollection",f=n.type==="Feature",g=p?n.features.length:1;for(e=0;e<g;e++){for(o=p?n.features[e].geometry:f?n.geometry:n,u=p?n.features[e].properties:f?n.properties:{},h=p?n.features[e].bbox:f?n.bbox:void 0,c=p?n.features[e].id:f?n.id:void 0,l=o?o.type==="GeometryCollection":!1,a=l?o.geometries.length:1,r=0;r<a;r++){if(s=l?o.geometries[r]:o,s===null){if(t(null,d,u,h,c)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(s,d,u,h,c)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<s.geometries.length;i++)if(t(s.geometries[i],d,u,h,c)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}d++}}function I2t(n,t){L3(n,function(e,i,r,s,a){var o=e===null?null:e.type;switch(o){case null:case"Point":case"LineString":case"Polygon":return t(X7(e,r,{bbox:s,id:a}),i,0)===!1?!1:void 0}var l;switch(o){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<e.coordinates.length;u++){var h=e.coordinates[u],c={type:l,coordinates:h};if(t(X7(c,r),i,u)===!1)return!1}})}function L2t(n,t){if(t=t||{},!tkt(t))throw new Error("options is invalid");var e=t.reverse||!1,i=t.mutate||!1;if(!n)throw new Error("<geojson> is required");if(typeof e!="boolean")throw new Error("<reverse> must be a boolean");if(typeof i!="boolean")throw new Error("<mutate> must be a boolean");i===!1&&(n=O2t(n));var r=[];switch(n.type){case"GeometryCollection":return L3(n,function(s){fS(s,e)}),n;case"FeatureCollection":return y6(n,function(s){y6(fS(s,e),function(a){r.push(a)})}),Kq(r)}return fS(n,e)}function fS(n,t){var e=n.type==="Feature"?n.geometry.type:n.type;switch(e){case"GeometryCollection":return L3(n,function(i){fS(i,t)}),n;case"LineString":return b6(Yv(n),t),n;case"Polygon":return x6(Yv(n),t),n;case"MultiLineString":return Yv(n).forEach(function(i){b6(i,t)}),n;case"MultiPolygon":return Yv(n).forEach(function(i){x6(i,t)}),n;case"Point":case"MultiPoint":return n}}function b6(n,t){xI(n)===t&&n.reverse()}function x6(n,t){xI(n[0])!==t&&n[0].reverse();for(var e=1;e<n.length;e++)xI(n[e])===t&&n[e].reverse()}function D2t(n){if(!n)throw new Error("geojson is required");var t=[];return I2t(n,function(e){t.push(e)}),Kq(t)}const S6=k3(),zZ={centroid:!1,name:!1,bbox:!1,rewind:!1},A6=n=>{if(n.geometry.type.startsWith("Multi")){const t=D2t(n).features[0];return Object.assign(Object.assign({},t),t.properties)}return Object.assign(Object.assign({},n),n.properties)},B2t=n=>{const t=[];return n.forEach(e=>{e.type==="FeatureCollection"?e.features.forEach(i=>{t.push(A6(i))}):t.push(A6(e))}),t},HZ=(n,t={},e)=>{e.type=Jd.GEO;const i=p2(zZ,t),{centroid:r,name:s,bbox:a,rewind:o}=i;if(Array.isArray(n))return B2t(n);let l=n.features;return o&&(l=L2t(n,{reverse:!ae(o)||o.reverse}).features),l.forEach(u=>{if(r){const h=S6.centroid(u);u.centroidX=h[0],u.centroidY=h[1]}if(s&&(u.name=u.properties.name),a){const h=S6.bounds(u);u.bbox=h}}),n.features=l,n},F2t={},j2t=(n,t,e)=>{e.type=Jd.GEO;const i=p2(zZ,F2t,t),{object:r}=i;if(!It(r))throw new TypeError("Invalid object: must be a string!");const s=h2t(n,n.objects[r]);return HZ(s,i,e)},f2=(n,t,e)=>{const i=!Si(t==null?void 0:t.dependencyUpdate)||(t==null?void 0:t.dependencyUpdate);if(!n||!ut(n))throw new TypeError("Invalid data: must be DataView array!");return ut(e.rawData)&&e.rawData.forEach(r=>{r.target&&(r.target.removeListener("change",e.reRunAllTransform),r.target.removeListener("markRunning",e.markRunning))}),i&&n.forEach(r=>{r.target.addListener("change",e.reRunAllTransform),r.target.addListener("markRunning",e.markRunning)}),n};let oE=0;const N2t=1e8;function VZ(n="dataset"){return oE>N2t&&(oE=0),n+"_"+oE++}class gc{constructor(t){var e;let i;this.options=t,this.isDataSet=!0,this.transformMap={},this.parserMap={},this.dataViewMap={},this.target=new xp,i=t!=null&&t.name?t.name:VZ("dataset"),this.name=i,this._logger=(e=t==null?void 0:t.logger)!==null&&e!==void 0?e:ri.getInstance()}setLogger(t){this._logger=t}getDataView(t){return this.dataViewMap[t]}setDataView(t,e){var i;this.dataViewMap[t]&&((i=this._logger)===null||i===void 0||i.error(`Error: dataView ${t} 之前已存在，请重新命名`)),this.dataViewMap[t]=e}removeDataView(t){this.dataViewMap[t]=null,delete this.dataViewMap[t]}registerParser(t,e){var i;this.parserMap[t]&&((i=this._logger)===null||i===void 0||i.warn(`Warn: transform ${t} 之前已注册，执行覆盖逻辑`)),this.parserMap[t]=e}removeParser(t){this.parserMap[t]=null,delete this.parserMap[t]}getParser(t){return this.parserMap[t]||this.parserMap.default}registerTransform(t,e){var i;this.transformMap[t]&&((i=this._logger)===null||i===void 0||i.warn(`Warn: transform ${t} 之前已注册，执行覆盖逻辑`)),this.transformMap[t]=e}removeTransform(t){this.transformMap[t]=null,delete this.transformMap[t]}getTransform(t){return this.transformMap[t]}multipleDataViewAddListener(t,e,i){this._callMap||(this._callMap=new Map);let r=this._callMap.get(i);r||(r=()=>{t.some(s=>s.isRunning)||i()}),t.forEach(s=>{s.target.addListener(e,r)}),this._callMap.set(i,r)}allDataViewAddListener(t,e){this.multipleDataViewAddListener(Object.values(this.dataViewMap),t,e)}multipleDataViewRemoveListener(t,e,i){if(this._callMap){const r=this._callMap.get(i);r&&t.forEach(s=>{s.target.removeListener(e,r)}),this._callMap.delete(i)}}multipleDataViewUpdateInParse(t){t.forEach(e=>{var i;return(i=this.getDataView(e.name))===null||i===void 0?void 0:i.markRunning()}),t.forEach(e=>{var i;return(i=this.getDataView(e.name))===null||i===void 0?void 0:i.parseNewData(e.data,e.options)})}multipleDataViewUpdateInRawData(t){t.forEach(e=>{var i;return(i=this.getDataView(e.name))===null||i===void 0?void 0:i.markRunning()}),t.forEach(e=>{var i;return(i=this.getDataView(e.name))===null||i===void 0?void 0:i.updateRawData(e.data,e.options)})}destroy(){this.transformMap=null,this.parserMap=null,this.dataViewMap=null,this._callMap=null,this.target.removeAllListeners()}}const lE="_data-view-diff-rank";class Le{constructor(t,e){let i;this.dataSet=t,this.options=e,this.isDataView=!0,this.target=new xp,this.parseOption=null,this.transformsArr=[],this.isRunning=!1,this.rawData={},this.history=!1,this.parserData={},this.latestData={},this._fields=null,this.reRunAllTransform=(r={pushHistory:!0,emitMessage:!0})=>(this.isRunning=!0,this.resetTransformData(),this.transformsArr.forEach(s=>{this.executeTransform(s,{pushHistory:r.pushHistory,emitMessage:!1}),this.isLastTransform(s)&&this.diffLastData()}),this.isRunning=!1,r.emitMessage!==!1&&this.target.emit("change",[]),this),this.markRunning=()=>{this.isRunning=!0,this.target.emit("markRunning",[])},i=e!=null&&e.name?e.name:VZ("dataview"),this.name=i,e!=null&&e.history&&(this.history=e.history,this.historyData=[]),this.dataSet.setDataView(i,this),this.setFields(e==null?void 0:e.fields)}parse(t,e,i=!1){var r;this.isRunning=!0,i&&this.target.emit("beforeParse",[]),e&&(this.parseOption=e);const s=this.cloneParseData(t,e);if(e!=null&&e.type){const a=((r=this.dataSet.getParser(e.type))!==null&&r!==void 0?r:this.dataSet.getParser("bytejson"))(s,e.options,this);this.rawData=s,this.parserData=a,this.history&&this.historyData.push(s,a),this.latestData=a}else this.parserData=s,this.rawData=s,this.history&&this.historyData.push(s),this.latestData=s;return this.isRunning=!1,i&&this.target.emit("afterParse",[]),this}transform(t,e=!0){if(this.isRunning=!0,t&&t.type){let i=!0;if(t.type==="fields"){this._fields=t.options.fields;const r=this.transformsArr.findIndex(s=>s.type===t.type);r>=0&&(i=!1,this.transformsArr[r].options.fields=this._fields)}if(i&&this.transformsArr.push(t),e){const r=this.isLastTransform(t);this.executeTransform(t),r&&this.diffLastData()}}return this.sortTransform(),this.isRunning=!1,this}isLastTransform(t){return this.transformsArr[this.transformsArr.length-1]===t}sortTransform(){this.transformsArr.length>=2&&this.transformsArr.sort((t,e)=>{var i,r;return((i=t.level)!==null&&i!==void 0?i:0)-((r=e.level)!==null&&r!==void 0?r:0)})}executeTransform(t,e={pushHistory:!0,emitMessage:!0}){const{pushHistory:i,emitMessage:r}=e,s=this.dataSet.getTransform(t.type)(this.latestData,t.options);this.history&&i!==!1&&this.historyData.push(s),this.latestData=s,r!==!1&&this.target.emit("change",[])}resetTransformData(){this.latestData=this.parserData,this.history&&(this.historyData.length=0,this.historyData.push(this.rawData,this.parserData))}enableDiff(t){this._diffData=!0,this._diffKeys=t,this._diffMap=new Map,this._diffRank=0}disableDiff(){this._diffData=!1,this._diffMap=null,this._diffRank=null}resetDiff(){this._diffMap=new Map,this._diffRank=0}diffLastData(){var t;if(!this._diffData||!this.latestData.forEach||!(!((t=this._diffKeys)===null||t===void 0)&&t.length))return;const e=this._diffRank+1;if(this._diffRank===0)this.latestData.forEach(i=>{i[lE]=e,this._diffMap.set(this._diffKeys.reduce((r,s)=>r+i[s],""),i)}),this.latestDataAUD={add:Array.from(this.latestData),del:[],update:[]};else{let i;this.latestDataAUD={add:[],del:[],update:[]},this.latestData.forEach(r=>{r[lE]=e,i=this._diffKeys.reduce((s,a)=>s+r[a],""),this._diffMap.get(i)?this.latestDataAUD.update.push(r):this.latestDataAUD.add.push(r),this._diffMap.set(i,r)}),this._diffMap.forEach((r,s)=>{r[lE]<e&&(this.latestDataAUD.del.push(r),this._diffMap.delete(s))})}this._diffRank=e}cloneParseData(t,e){let i=!1;return t instanceof Le||(e==null?void 0:e.clone)!==!0||(i=!0),i?cs(t):t}parseNewData(t,e){this.parse(t,e||this.parseOption),this.reRunAllTransform()}updateRawData(t,e){const i=this.cloneParseData(t,e);this.rawData=i,this.parserData=i,this.latestData=i,this.reRunAllTransform()}getFields(){var t;return this._fields?this._fields:((t=this.parseOption)===null||t===void 0?void 0:t.type)==="dataview"&&this.rawData.length===1&&this.rawData[0].getFields?this.rawData[0].getFields():null}setFields(t,e=!1){this._fields=t&&e?gt({},this._fields,t):t;const i=this.transformsArr.find(r=>r.type==="fields");!F(this._fields)&&F(i)?(this.dataSet.registerTransform("fields",RZ),this.transform({type:"fields",options:{fields:this._fields}},!1)):i&&(i.options.fields=this._fields)}destroy(){this.dataSet.removeDataView(this.name),this._diffMap=null,this._diffRank=null,this.latestData=null,this.rawData=null,this.parserData=null,this.transformsArr=null,this.target=null}}class pn{static GenAutoIncrementId(){return pn.auto_increment_id++}}pn.auto_increment_id=0;class se{constructor(t){this.id=pn.GenAutoIncrementId(),this.registry=t}}const g2="named",WZ="inject",$Z="multi_inject",GZ="inversify:tagged",UZ="inversify:paramtypes";class D3{constructor(t,e){this.key=t,this.value=e}toString(){return this.key===g2?`named: ${String(this.value).toString()} `:`tagged: { key:${this.key.toString()}, value: ${String(this.value)} }`}}var w6={};const hg=function(n){var t;return function(e){const i=Object.prototype.hasOwnProperty,r=typeof Symbol=="function",s=r&&Symbol.toPrimitive!==void 0?Symbol.toPrimitive:"@@toPrimitive",a=r&&Symbol.iterator!==void 0?Symbol.iterator:"@@iterator",o=typeof Object.create=="function",l={__proto__:[]}instanceof Array,u=!o&&!l,h={create:o?function(){return nt(Object.create(null))}:l?function(){return nt({__proto__:null})}:function(){return nt({})},has:u?function(K,J){return i.call(K,J)}:function(K,J){return J in K},get:u?function(K,J){return i.call(K,J)?K[J]:void 0}:function(K,J){return K[J]}},c=Object.getPrototypeOf(Function),d=typeof process=="object"&&w6&&w6.REFLECT_METADATA_USE_MAP_POLYFILL==="true",p=d||typeof Map!="function"||typeof Map.prototype.entries!="function"?q():Map,f=((d||typeof Set!="function"||typeof Set.prototype.entries!="function")&&tt(),new(d||typeof WeakMap!="function"?it():WeakMap));function g(K,J,Q,dt){if(!D(Q))throw new TypeError;return k(K,J,Q,dt)}function _(K,J,Q){if(!D(J))throw new TypeError;return P(Q)||(Q=j(Q)),S(K,J,Q)}function v(K,J,Q){if(!D(J))throw new TypeError;return P(Q)||(Q=j(Q)),A(K,J,Q)}function y(K,J,Q){if(!D(J))throw new TypeError;return P(Q)||(Q=j(Q)),w(K,J,Q)}function b(K,J,Q){let dt=f.get(K);if(P(dt)){if(!Q)return;dt=new p,f.set(K,dt)}let bt=dt.get(J);if(P(bt)){if(!Q)return;bt=new p,dt.set(J,bt)}return bt}function S(K,J,Q){if(A(K,J,Q))return!0;const dt=$(J);return!E(dt)&&S(K,dt,Q)}function A(K,J,Q){const dt=b(J,Q,!1);return!P(dt)&&L(dt.has(K))}function w(K,J,Q){if(A(K,J,Q))return C(K,J,Q);const dt=$(J);return E(dt)?void 0:w(K,dt,Q)}function C(K,J,Q){const dt=b(J,Q,!1);if(!P(dt))return dt.get(K)}function k(K,J,Q,dt){b(Q,dt,!0).set(K,J)}function M(K){if(K===null)return 1;switch(typeof K){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return K===null?1:6;default:return 6}}function P(K){return K===void 0}function E(K){return K===null}function I(K){return typeof K=="symbol"}function D(K){return typeof K=="object"?K!==null:typeof K=="function"}function N(K,J){switch(M(K)){case 0:case 1:case 2:case 3:case 4:case 5:return K}const Q="string",dt=U(K,s);if(dt!==void 0){const bt=dt.call(K,Q);if(D(bt))throw new TypeError;return bt}return O(K)}function O(K,J){{const Q=K.toString;if(G(Q)){const bt=Q.call(K);if(!D(bt))return bt}const dt=K.valueOf;if(G(dt)){const bt=dt.call(K);if(!D(bt))return bt}}throw new TypeError}function L(K){return!!K}function H(K){return""+K}function j(K){const J=N(K);return I(J)?J:H(J)}function G(K){return typeof K=="function"}function U(K,J){const Q=K[J];if(Q!=null){if(!G(Q))throw new TypeError;return Q}}function $(K){const J=Object.getPrototypeOf(K);if(typeof K!="function"||K===c||J!==c)return J;const Q=K.prototype,dt=Q&&Object.getPrototypeOf(Q);if(dt==null||dt===Object.prototype)return J;const bt=dt.constructor;return typeof bt!="function"||bt===K?J:bt}function q(){const K={},J=[],Q=function(){function ht(St,yt,vt){this._index=0,this._keys=St,this._values=yt,this._selector=vt}return ht.prototype["@@iterator"]=function(){return this},ht.prototype[a]=function(){return this},ht.prototype.next=function(){const St=this._index;if(St>=0&&St<this._keys.length){const yt=this._selector(this._keys[St],this._values[St]);return St+1>=this._keys.length?(this._index=-1,this._keys=J,this._values=J):this._index++,{value:yt,done:!1}}return{value:void 0,done:!0}},ht.prototype.throw=function(St){throw this._index>=0&&(this._index=-1,this._keys=J,this._values=J),St},ht.prototype.return=function(St){return this._index>=0&&(this._index=-1,this._keys=J,this._values=J),{value:St,done:!0}},ht}();return function(){function ht(){this._keys=[],this._values=[],this._cacheKey=K,this._cacheIndex=-2}return Object.defineProperty(ht.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),ht.prototype.has=function(St){return this._find(St,!1)>=0},ht.prototype.get=function(St){const yt=this._find(St,!1);return yt>=0?this._values[yt]:void 0},ht.prototype.set=function(St,yt){const vt=this._find(St,!0);return this._values[vt]=yt,this},ht.prototype.delete=function(St){const yt=this._find(St,!1);if(yt>=0){const vt=this._keys.length;for(let pt=yt+1;pt<vt;pt++)this._keys[pt-1]=this._keys[pt],this._values[pt-1]=this._values[pt];return this._keys.length--,this._values.length--,St===this._cacheKey&&(this._cacheKey=K,this._cacheIndex=-2),!0}return!1},ht.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=K,this._cacheIndex=-2},ht.prototype.keys=function(){return new Q(this._keys,this._values,dt)},ht.prototype.values=function(){return new Q(this._keys,this._values,bt)},ht.prototype.entries=function(){return new Q(this._keys,this._values,xt)},ht.prototype["@@iterator"]=function(){return this.entries()},ht.prototype[a]=function(){return this.entries()},ht.prototype._find=function(St,yt){return this._cacheKey!==St&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=St)),this._cacheIndex<0&&yt&&(this._cacheIndex=this._keys.length,this._keys.push(St),this._values.push(void 0)),this._cacheIndex},ht}();function dt(ht,St){return ht}function bt(ht,St){return St}function xt(ht,St){return[ht,St]}}function tt(){return function(){function K(){this._map=new p}return Object.defineProperty(K.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),K.prototype.has=function(J){return this._map.has(J)},K.prototype.add=function(J){return this._map.set(J,J),this},K.prototype.delete=function(J){return this._map.delete(J)},K.prototype.clear=function(){this._map.clear()},K.prototype.keys=function(){return this._map.keys()},K.prototype.values=function(){return this._map.values()},K.prototype.entries=function(){return this._map.entries()},K.prototype["@@iterator"]=function(){return this.keys()},K.prototype[a]=function(){return this.keys()},K}()}function it(){const J=h.create(),Q=dt();return function(){function yt(){this._key=dt()}return yt.prototype.has=function(vt){const pt=bt(vt,!1);return pt!==void 0&&h.has(pt,this._key)},yt.prototype.get=function(vt){const pt=bt(vt,!1);return pt!==void 0?h.get(pt,this._key):void 0},yt.prototype.set=function(vt,pt){return bt(vt,!0)[this._key]=pt,this},yt.prototype.delete=function(vt){const pt=bt(vt,!1);return pt!==void 0&&delete pt[this._key]},yt.prototype.clear=function(){this._key=dt()},yt}();function dt(){let yt;do yt="@@WeakMap@@"+St();while(h.has(J,yt));return J[yt]=!0,yt}function bt(yt,vt){if(!i.call(yt,Q)){if(!vt)return;Object.defineProperty(yt,Q,{value:h.create()})}return yt[Q]}function xt(yt,vt){for(let pt=0;pt<vt;++pt)yt[pt]=255*Math.random()|0;return yt}function ht(yt){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(yt)):xt(new Uint8Array(yt),yt):xt(new Array(yt),yt)}function St(){const yt=ht(16);yt[6]=79&yt[6]|64,yt[8]=191&yt[8]|128;let vt="";for(let pt=0;pt<16;++pt){const jt=yt[pt];pt!==4&&pt!==6&&pt!==8||(vt+="-"),jt<16&&(vt+="0"),vt+=jt.toString(16).toLowerCase()}return vt}}function nt(K){return K.__=void 0,delete K.__,K}e("defineMetadata",g),e("hasMetadata",_),e("hasOwnMetadata",v),e("getMetadata",y)}((t=n,function(e,i){typeof t[e]!="function"&&Object.defineProperty(t,e,{configurable:!0,writable:!0,value:i})})),n}({});function z2t(n,t,e,i){const r=[i];let s={};hg.hasOwnMetadata(n,t)&&(s=hg.getMetadata(n,t));let a=s[e];a===void 0&&(a=[]),a.push(...r),s[e]=a,hg.defineMetadata(n,s,t)}function H2t(n,t,e,i){z2t(GZ,n,e.toString(),i)}function YZ(n){return(t,e,i)=>{H2t(t,e,i,n)}}function XZ(n){return t=>(e,i,r)=>YZ(new D3(n,t))(e,i,r)}const fe=XZ(WZ),KZ=XZ($Z);function Vt(){return function(n){return hg.defineMetadata(UZ,null,n),n}}function Xn(n){return YZ(new D3(g2,n))}const Qd={Singleton:"Singleton",Transient:"Transient"},Ch={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};class B3{constructor(t,e){this.id=pn.GenAutoIncrementId(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=Ch.Invalid,this.constraint=i=>!0,this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.dynamicValue=null}clone(){const t=new B3(this.serviceIdentifier,this.scope);return t.activated=t.scope===Qd.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.provider=this.provider,t.constraint=this.constraint,t.cache=this.cache,t}}class V2t{getConstructorMetadata(t){return{compilerGeneratedMetadata:hg.getMetadata(UZ,t),userGeneratedMetadata:hg.getMetadata(GZ,t)||{}}}getPropertiesMetadata(t){throw new Error("暂未实现")}}const W2t=n=>t=>{const e=i=>{if(i==null)return!1;if(i.key===n&&i.value===t)return!0;if(i.constructorArgsMetadata==null)return!1;const r=i.constructorArgsMetadata;for(let s=0;s<r.length;s++)if(r[s].key===n&&r[s].value===t)return!0;return!1};return e.metaData=new D3(n,t),e},$2t=W2t(g2);class vx{constructor(t){this._binding=t}inRequestScope(){throw new Error("暂未实现")}inSingletonScope(){return this._binding.scope=Qd.Singleton,this}inTransientScope(){return this._binding.scope=Qd.Transient,this}whenTargetNamed(t){return this._binding.constraint=$2t(t),this}}class G2t{constructor(t){this._binding=t}to(t){return this._binding.type=Ch.Instance,this._binding.implementationType=t,new vx(this._binding)}toSelf(){const t=this._binding.serviceIdentifier;return this.to(t)}toDynamicValue(t){return this._binding.type=Ch.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new vx(this._binding)}toConstantValue(t){return this._binding.type=Ch.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=Qd.Singleton,new vx(this._binding)}toFactory(t){return this._binding.type=Ch.Factory,this._binding.factory=t,this._binding.scope=Qd.Singleton,new vx(this._binding)}toService(t){this.toDynamicValue(e=>e.container.get(t))}}class U2t{constructor(t){const e=t||{};e.defaultScope=e.defaultScope||Qd.Transient,this.options=e,this.id=pn.GenAutoIncrementId(),this._bindingDictionary=new Map,this._metadataReader=new V2t}load(t){const e=this._getContainerModuleHelpersFactory()(t.id);t.registry(e.bindFunction,e.unbindFunction,e.isboundFunction,e.rebindFunction)}get(t){const e=this._getNotAllArgs(t,!1);return this._get(e)}getAll(t){const e=this._getAllArgs(t);return this._get(e)}getTagged(t,e,i){const r=this._getNotAllArgs(t,!1,e,i);return this._get(r)}getNamed(t,e){return this.getTagged(t,g2,e)}isBound(t){return this._bindingDictionary.has(t)}bind(t){const e=this.options.defaultScope,i=new B3(t,e),r=this._bindingDictionary.get(t)||[];return r.push(i),this._bindingDictionary.set(t,r),new G2t(i)}unbind(t){this._bindingDictionary.delete(t)}rebind(t){return this.unbind(t),this.bind(t)}_getContainerModuleHelpersFactory(){const t=(a,o)=>{a._binding.moduleId=o},e=a=>o=>{const l=this.bind(o);return t(l,a),l},i=()=>a=>this.unbind(a),r=()=>a=>this.isBound(a),s=a=>o=>{const l=this.rebind(o);return t(l,a),l};return a=>({bindFunction:e(a),isboundFunction:r(),rebindFunction:s(a),unbindFunction:i(),unbindAsyncFunction:o=>null})}_getNotAllArgs(t,e,i,r){return{avoidConstraints:!1,isMultiInject:e,serviceIdentifier:t,key:i,value:r}}_getAllArgs(t){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:t}}_get(t){const e=[];return this._bindingDictionary.get(t.serviceIdentifier).filter(i=>i.constraint(t)).forEach(i=>{e.push(this._resolveFromBinding(i))}),t.isMultiInject||e.length!==1?e:e[0]}_getChildRequest(t){const e=t.implementationType,{userGeneratedMetadata:i}=this._metadataReader.getConstructorMetadata(e),r=Object.keys(i),s=[];for(let a=0;a<r.length;a++){const o=i[a],l={};o.forEach(p=>{l[p.key]=p.value});const u={inject:l[WZ],multiInject:l[$Z]},h=u.inject||u.multiInject,c={serviceIdentifier:h,constructorArgsMetadata:o},d={injectIdentifier:h,metadata:o,bindings:this._bindingDictionary.get(h).filter(p=>p.constraint(c))};s.push(d)}return s}_resolveFromBinding(t){const e=this._getResolvedFromBinding(t);return this._saveToScope(t,e),e}_getResolvedFromBinding(t){let e;switch(t.type){case Ch.ConstantValue:case Ch.Function:e=t.cache;break;case Ch.Instance:e=this._resolveInstance(t,t.implementationType);break;default:e=t.dynamicValue({container:this})}return e}_resolveInstance(t,e){if(t.activated)return t.cache;const i=this._getChildRequest(t);return this._createInstance(e,i)}_createInstance(t,e){return e.length?new t(...this._resolveRequests(e)):new t}_resolveRequests(t){return t.map(e=>e.bindings.length>1?e.bindings.map(i=>this._resolveFromBinding(i)):this._resolveFromBinding(e.bindings[0]))}_saveToScope(t,e){t.scope===Qd.Singleton&&(t.cache=e,t.activated=!0)}}const Rn=Symbol("ContributionProvider");class qZ{constructor(t,e){this.serviceIdentifier=t,this.container=e}getContributions(){return this.caches||(this.caches=[],this.container&&this.container.isBound(this.serviceIdentifier)&&this.caches.push(...this.container.getAll(this.serviceIdentifier))),this.caches}}function vr(n,t){n(Rn).toDynamicValue(({container:e})=>new qZ(t,e)).inSingletonScope().whenTargetNamed(t)}function Y2t(n,t){n(Rn).toDynamicValue(({container:e})=>new qZ(t,e)).whenTargetNamed(t)}class X2t{constructor(t,e){this._args=t,this.name=e,this.taps=[]}tap(t,e){this._tap("sync",t,e)}unTap(t,e){const i=typeof t=="string"?t.trim():t.name;i&&(this.taps=this.taps.filter(r=>!(r.name===i&&(!e||r.fn===e))))}_parseOptions(t,e,i){let r;if(typeof e=="string")r={name:e.trim()};else if(typeof e!="object"||e===null)throw new Error("Invalid tap options");if(typeof r.name!="string"||r.name==="")throw new Error("Missing name for tap");return r=Object.assign({type:t,fn:i},r),r}_tap(t,e,i){this._insert(this._parseOptions(t,e,i))}_insert(t){let e;typeof t.before=="string"?e=new Set([t.before]):Array.isArray(t.before)&&(e=new Set(t.before));let i=0;typeof t.stage=="number"&&(i=t.stage);let r=this.taps.length;for(;r>0;){r--;const s=this.taps[r];this.taps[r+1]=s;const a=s.stage||0;if(e){if(e.has(s.name)){e.delete(s.name);continue}if(e.size>0)continue}if(!(a>i)){r++;break}}this.taps[r]=t}}class la extends X2t{call(...t){this.taps.map(e=>e.fn).forEach(e=>e(...t))}}const m2=Symbol.for("EnvContribution"),F3=Symbol.for("VGlobal");var K2t=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},q2t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},C6=function(n,t){return function(e,i){t(e,i,n)}};let SI=class{get env(){return this._env}get devicePixelRatio(){return this._env||this.setEnv("browser"),this.envContribution.getDevicePixelRatio()}get supportEvent(){return this._env||this.setEnv("browser"),this.envContribution.supportEvent}set supportEvent(n){this._env||this.setEnv("browser"),this.envContribution.supportEvent=n}get supportsTouchEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsTouchEvents}set supportsTouchEvents(n){this._env||this.setEnv("browser"),this.envContribution.supportsTouchEvents=n}get supportsPointerEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsPointerEvents}set supportsPointerEvents(n){this._env||this.setEnv("browser"),this.envContribution.supportsPointerEvents=n}get supportsMouseEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsMouseEvents}set supportsMouseEvents(n){this._env||this.setEnv("browser"),this.envContribution.supportsMouseEvents=n}get applyStyles(){return this._env||this.setEnv("browser"),this.envContribution.applyStyles}set applyStyles(n){this._env||this.setEnv("browser"),this.envContribution.applyStyles=n}constructor(n){this.contributions=n,this.id=pn.GenAutoIncrementId(),this.hooks={onSetEnv:new la(["lastEnv","env","global"])},this.measureTextMethod="native",this.optimizeVisible=!1}bindContribution(n){const t=[];if(this.contributions.getContributions().forEach(e=>{const i=e.configure(this,n);i&&i.then&&t.push(i)}),t.length)return Promise.all(t)}getDynamicCanvasCount(){return this._env||this.setEnv("browser"),this.envContribution.getDynamicCanvasCount()}getStaticCanvasCount(){return this._env||this.setEnv("browser"),this.envContribution.getStaticCanvasCount()}setEnv(n,t){if(t&&t.force===!0||this._env!==n)return this.deactiveCurrentEnv(),this.activeEnv(n,t)}deactiveCurrentEnv(){this.envContribution&&this.envContribution.release()}activeEnv(n,t){const e=this._env;this._env=n;const i=this.bindContribution(t);if(i&&i.then)return i.then(()=>{this.envParams=t,this.hooks.onSetEnv.call(e,n,this)});this.envParams=t,this.hooks.onSetEnv.call(e,n,this)}setActiveEnvContribution(n){this.envContribution=n}createCanvas(n){return this._env||this.setEnv("browser"),this.envContribution.createCanvas(n)}createOffscreenCanvas(n){return this._env||this.setEnv("browser"),this.envContribution.createOffscreenCanvas(n)}releaseCanvas(n){return this._env||this.setEnv("browser"),this.envContribution.releaseCanvas(n)}addEventListener(n,t,e){return this._env||this.setEnv("browser"),this.envContribution.addEventListener(n,t,e)}removeEventListener(n,t,e){return this._env||this.setEnv("browser"),this.envContribution.removeEventListener(n,t,e)}dispatchEvent(n){return this._env||this.setEnv("browser"),this.envContribution.dispatchEvent(n)}getRequestAnimationFrame(){return this._env||this.setEnv("browser"),this.envContribution.getRequestAnimationFrame()}getCancelAnimationFrame(){return this._env||this.setEnv("browser"),this.envContribution.getCancelAnimationFrame()}getElementById(n){return this._env||this.setEnv("browser"),this.envContribution.getElementById?this.envContribution.getElementById(n):null}getRootElement(){return this._env||this.setEnv("browser"),this.envContribution.getRootElement?this.envContribution.getRootElement():null}getDocument(){return this._env||this.setEnv("browser"),this.envContribution.getDocument?this.envContribution.getDocument():null}mapToCanvasPoint(n,t){return this._env||this.setEnv("browser"),this.envContribution.mapToCanvasPoint?this.envContribution.mapToCanvasPoint(n,t):null}loadImage(n){return this._env||this.setEnv("browser"),this.envContribution.loadImage(n)}loadSvg(n){return this._env||this.setEnv("browser"),this.envContribution.loadSvg(n)}loadJson(n){return this._env||this.setEnv("browser"),this.envContribution.loadJson(n)}loadArrayBuffer(n){return this._env||this.setEnv("browser"),this.envContribution.loadArrayBuffer(n)}loadBlob(n){return this._env||this.setEnv("browser"),this.envContribution.loadBlob(n)}isChrome(){return this._isChrome!=null||(this._env||this.setEnv("browser"),this._isChrome=this._env==="browser"&&navigator.userAgent.indexOf("Chrome")>-1),this._isChrome}isSafari(){return this._isSafari!=null||(this._env||this.setEnv("browser"),this._isSafari=this._env==="browser"&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)),this._isSafari}getNativeAABBBounds(n){return this._env||this.setEnv("browser"),this.envContribution.getNativeAABBBounds(n)}removeDom(n){return this._env||this.setEnv("browser"),this.envContribution.removeDom(n)}createDom(n){return this._env||this.setEnv("browser"),this.envContribution.createDom(n)}updateDom(n,t){return this._env||this.setEnv("browser"),this.envContribution.updateDom(n,t)}getElementTop(n,t=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementTop(n,t)}getElementLeft(n,t=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementLeft(n,t)}getElementTopLeft(n,t=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementTopLeft(n,t)}};SI=K2t([Vt(),C6(0,fe(Rn)),C6(0,Xn(m2)),q2t("design:paramtypes",[Object])],SI);const Z2t=Bn-1e-8;class ZZ{constructor(t){this.init(t)}init(t){this.bounds=t}arc(t,e,i,r,s,a){if(Math.abs(s-r)>Z2t)return this.bounds.add(t-i,e-i),void this.bounds.add(t+i,e+i);let o,l,u,h,c=1/0,d=-1/0,p=1/0,f=-1/0;function g(_){u=i*Math.cos(_),h=i*Math.sin(_),u<c&&(c=u),u>d&&(d=u),h<p&&(p=h),h>f&&(f=h)}if(g(r),g(s),s!==r)if((r%=Bn)<0&&(r+=Bn),(s%=Bn)<0&&(s+=Bn),s<r&&(a=!a,o=r,r=s,s=o),a)for(s-=Bn,o=r-r%za,l=0;l<4&&o>s;++l,o-=za)g(o);else for(o=r-r%za+za,l=0;l<4&&o<s;++l,o+=za)g(o);this.bounds.add(t+c,e+p),this.bounds.add(t+d,e+f)}arcTo(t,e,i,r,s){throw new Error("不支持arcTo")}bezierCurveTo(t,e,i,r,s,a){this.bounds.add(t,e),this.bounds.add(i,r),this.bounds.add(s,a)}closePath(){}ellipse(){throw new Error("不支持ellipse")}lineTo(t,e){this.bounds.add(t,e)}moveTo(t,e){this.bounds.add(t,e)}quadraticCurveTo(t,e,i,r){this.bounds.add(t,e),this.bounds.add(i,r)}rect(t,e,i,r){this.bounds.add(t,e),this.bounds.add(t+i,e+r)}clear(){this.bounds.clear()}release(...t){}}class J2t{constructor(){this.curves=[],this.bounds=new Ai}getCurveLengths(){return this.curves.map(t=>t.getLength())}getPointAt(t){return{x:0,y:0}}getLength(){return 0}getBounds(){return this.bounds}}const Q2t=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,tTt={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7},ve={A:0,AT:1,C:2,Z:3,E:4,L:5,M:6,Q:7,R:8};let uE,k6,_x,T6,hE,yx;function eTt(n){if(!n)return[];const t=n.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);if(t===null)return[];let e,i;const r=[];for(let s=0,a=t.length;s<a;s++)if(uE=t[s],k6=uE.slice(1),_x=uE[0],e=[_x],i=k6.match(Q2t),i!==null){for(let o=0,l=i.length;o<l;o++)T6=i[o],hE=parseFloat(T6),Number.isNaN(hE)||e.push(hE);if(yx=tTt[_x],e.length-1>yx){let o;for(let l=1,u=e.length;l<u;l+=yx){o=[_x];for(let h=l,c=l+yx;h<c;h++)o.push(e[h]);r.push(o)}}else r.push(e)}else r.push(e);return r}var li;(function(n){n[n.NONE=0]="NONE",n[n.UPDATE_BOUNDS=1]="UPDATE_BOUNDS",n[n.UPDATE_SHAPE=2]="UPDATE_SHAPE",n[n.CLEAR_SHAPE=253]="CLEAR_SHAPE",n[n.UPDATE_SHAPE_AND_BOUNDS=3]="UPDATE_SHAPE_AND_BOUNDS",n[n.INIT=179]="INIT",n[n.CLEAR_BOUNDS=254]="CLEAR_BOUNDS",n[n.UPDATE_GLOBAL_MATRIX=32]="UPDATE_GLOBAL_MATRIX",n[n.CLEAR_GLOBAL_MATRIX=223]="CLEAR_GLOBAL_MATRIX",n[n.UPDATE_LOCAL_MATRIX=16]="UPDATE_LOCAL_MATRIX",n[n.CLEAR_LOCAL_MATRIX=239]="CLEAR_LOCAL_MATRIX",n[n.UPDATE_GLOBAL_LOCAL_MATRIX=48]="UPDATE_GLOBAL_LOCAL_MATRIX",n[n.UPDATE_LAYOUT=128]="UPDATE_LAYOUT",n[n.CLEAR_LAYOUT=127]="CLEAR_LAYOUT"})(li||(li={}));var ry;(function(n){n[n.GLOBAL=1]="GLOBAL",n[n.LOCAL=16]="LOCAL",n[n.GLOBAL_ACCURATE=3]="GLOBAL_ACCURATE",n[n.LOCAL_ACCURATE=48]="LOCAL_ACCURATE"})(ry||(ry={}));var ji;(function(n){n[n.INIT=0]="INIT",n[n.DEFAULT=1]="DEFAULT",n[n.STATE=2]="STATE",n[n.ANIMATE_BIND=10]="ANIMATE_BIND",n[n.ANIMATE_PLAY=11]="ANIMATE_PLAY",n[n.ANIMATE_START=12]="ANIMATE_START",n[n.ANIMATE_UPDATE=13]="ANIMATE_UPDATE",n[n.ANIMATE_END=14]="ANIMATE_END",n[n.TRANSLATE=20]="TRANSLATE",n[n.TRANSLATE_TO=21]="TRANSLATE_TO",n[n.SCALE=22]="SCALE",n[n.SCALE_TO=23]="SCALE_TO",n[n.ROTATE=24]="ROTATE",n[n.ROTATE_TO=25]="ROTATE_TO"})(ji||(ji={}));var Or;(function(n){n[n.INITIAL=0]="INITIAL",n[n.RUNNING=1]="RUNNING",n[n.PAUSED=2]="PAUSED",n[n.END=3]="END"})(Or||(Or={}));var $g;(function(n){n[n.NORMAL=0]="NORMAL",n[n.SET_ATTR_IMMEDIATELY=1]="SET_ATTR_IMMEDIATELY"})($g||($g={}));var Nf;(function(n){n.wait="wait",n.from="from",n.to="to",n.customAnimate="customAnimate"})(Nf||(Nf={}));var fi;(function(n){n[n.ROW=1]="ROW",n[n.COLUMN=2]="COLUMN"})(fi||(fi={}));var DA;(function(n){n[n.CubicBezierCurve=0]="CubicBezierCurve",n[n.QuadraticBezierCurve=1]="QuadraticBezierCurve",n[n.ArcCurve=2]="ArcCurve",n[n.LineCurve=3]="LineCurve",n[n.EllipseCurve=4]="EllipseCurve",n[n.MoveCurve=5]="MoveCurve"})(DA||(DA={}));var jn;(function(n){n[n.beforeFillStroke=0]="beforeFillStroke",n[n.afterFillStroke=1]="afterFillStroke"})(jn||(jn={}));function iTt(n,t,e,i,r,s,a,o,l){const u=qe(a),h=Math.sin(u),c=Math.cos(u),d=c*(o-n)*.5+h*(l-t)*.5,p=c*(l-t)*.5-h*(o-n)*.5;let f=d*d/((e=Math.abs(e))*e)+p*p/((i=Math.abs(i))*i);f>1&&(f=Math.sqrt(f),e*=f,i*=f);const g=c/e,_=h/e,v=-h/i,y=c/i,b=g*o+_*l,S=v*o+y*l,A=g*n+_*t,w=v*n+y*t;let C=1/((A-b)*(A-b)+(w-S)*(w-S))-.25;C<0&&(C=0);let k=Math.sqrt(C);s===r&&(k=-k);const M=.5*(b+A)-k*(w-S),P=.5*(S+w)+k*(A-b),E=Math.atan2(S-P,b-M);let I=Math.atan2(w-P,A-M)-E;I<0&&s===1?I+=Bn:I>0&&s===0&&(I-=Bn);const D=Math.ceil(Math.abs(I/(za+.001))),N=[];for(let O=0;O<D;++O){const L=E+O*I/D,H=E+(O+1)*I/D;N[O]=[M,P,L,H,e,i,h,c]}return N}function nTt(n){const t=n[0],e=n[1],i=n[2],r=n[3],s=n[4],a=n[5],o=n[6],l=n[7],u=l*s,h=-o*a,c=o*s,d=l*a,p=Math.cos(i),f=Math.sin(i),g=Math.cos(r),_=Math.sin(r),v=.5*(r-i),y=Math.sin(.5*v),b=8/3*y*y/Math.sin(v),S=t+p-b*f,A=e+f+b*p,w=t+g,C=e+_,k=w+b*_,M=C-b*g;return[u*S+h*A,c*S+d*A,u*k+h*M,c*k+d*M,u*w+h*C,c*w+d*C]}function M6(n,t,e,i){const r=iTt(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,e);for(let s=0;s<r.length;++s){const a=nTt(r[s]);n.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}const gS=(n,t,e,i,r,s,a)=>{const o=Math.abs(e-t),l=4*Math.tan(o/4)/3,u=e<t?-1:1,h=Math.cos(t),c=Math.sin(t),d=Math.cos(e),p=Math.sin(e),f=h*s+i,g=c*a+r,_=d*s+i,v=p*a+r,y=s*l*u,b=a*l*u;n.push(f-y*c,g+b*h,_+y*p,v-b*d,_,v)},rTt=[(n,t,e,i,r,s,a)=>t.arc(n[1]*r+e,n[2]*s+i,n[3]*(r+s)/2,n[4],n[5],n[6],a),(n,t,e,i,r,s,a)=>t.arcTo(n[1]*r+e,n[2]*s+i,n[3]*r+e,n[4]*s+i,n[5]*(r+s)/2,a),(n,t,e,i,r,s,a)=>t.bezierCurveTo(n[1]*r+e,n[2]*s+i,n[3]*r+e,n[4]*s+i,n[5]*r+e,n[6]*s+i,a),(n,t,e,i)=>t.closePath(),(n,t,e,i,r,s)=>t.ellipse(n[1]*r+e,n[2]*s+i,n[3]*r,n[4]*s,n[5],n[6],n[7],n[8]),(n,t,e,i,r,s,a)=>t.lineTo(n[1]*r+e,n[2]*s+i,a),(n,t,e,i,r,s,a)=>t.moveTo(n[1]*r+e,n[2]*s+i,a),(n,t,e,i,r,s,a)=>t.quadraticCurveTo(n[1]*r+e,n[2]*s+i,n[3]*r+e,n[4]*s+i,a),(n,t,e,i,r,s,a)=>t.rect(n[1]*r+e,n[2]*s+i,n[3]*r,n[4]*s,a)];function cu(n,t,e=0,i=0,r=1,s=1,a){for(let o=0;o<n.length;o++){const l=n[o];rTt[l[0]](l,t,e,i,r,s,a)}}class JZ{getLength(t){return t!=null?this.calcProjLength(t):(Number.isFinite(this.length)||(this.length=this.calcLength()),this.length)}}function sTt(n,t){let e=0;const i=n.length;for(let r=0;r<i;r++){const s=n[r],a=t[r],o=n[(r+1)%i],l=t[(r+1)%i];e+=Ni.distanceNN(s,a,o,l)}return e/2}function aTt(n,t,e,i,r){return sTt([n.x,t.x,e.x,i.x],[n.y,t.y,e.y,i.y])}function P6(n,t,e,i,r){const s=1-r;return s*s*s*n+3*t*r*s*s+3*e*r*r*s+i*r*r*r}function QZ(n,t,e,i,r){const s=P6(n.x,t.x,e.x,i.x,r),a=P6(n.y,t.y,e.y,i.y,r);return new Qi(s,a)}function AI(n,t){const{p0:e,p1:i,p2:r,p3:s}=n,a=QZ(e,i,r,s,t),o=Ni.pointAtPP(e,i,t),l=Ni.pointAtPP(i,r,t),u=Ni.pointAtPP(r,s,t),h=Ni.pointAtPP(o,l,t),c=Ni.pointAtPP(l,u,t);return[new wI(e,o,h,a),new wI(a,c,u,s)]}class wI extends JZ{constructor(t,e,i,r){super(),this.type=DA.CubicBezierCurve,this.p0=t,this.p1=e,this.p2=i,this.p3=r}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y+this.p2.x+this.p2.y+this.p3.x+this.p3.y)}getPointAt(t){if(this.defined!==!1)return QZ(this.p0,this.p1,this.p2,this.p3,t);throw new Error("defined为false的点不能getPointAt")}calcLength(){return this._validPoint()?aTt(this.p0,this.p1,this.p2,this.p3):60}calcProjLength(t){return t===fi.ROW?Ie(this.p0.x-this.p3.x):t===fi.COLUMN?Ie(this.p0.y-this.p3.y):0}getAngleAt(t){const e=ls(t-.01,0),i=nr(t+.01,1),r=this.getPointAt(e),s=this.getPointAt(i);return ei(s.y-r.y,s.x-r.x)}}function E6(n,t){const{p0:e,p1:i}=n,r=Ni.pointAtPP(e,i,t);return[new CI(e,r),new CI(r,i)]}class CI extends JZ{constructor(t,e){super(),this.type=DA.LineCurve,this.p0=t,this.p1=e}getPointAt(t){if(this.defined!==!1)return Ni.pointAtPP(this.p0,this.p1,t);throw new Error("defined为false的点不能getPointAt")}getAngleAt(t){return this.angle==null&&(this.angle=ei(this.p1.y-this.p0.y,this.p1.x-this.p0.x)),this.angle}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y)}calcLength(){return this._validPoint()?Ni.distancePP(this.p0,this.p1):60}calcProjLength(t){return t===fi.ROW?Ie(this.p0.x-this.p1.x):t===fi.COLUMN?Ie(this.p0.y-this.p1.y):0}}class j3{get endX(){return this._lastX}get endY(){return this._lastY}constructor(t,e){this.init(t,e)}init(t,e){this._lastX=this._lastY=this._startX=this._startY=0,this.curveType=t,this.direction=e,this.curves=[]}bezierCurveTo(t,e,i,r,s,a,o,l){const u=new wI(new Qi(this._lastX,this._lastY),new Qi(t,e),new Qi(i,r),new Qi(s,a));u.originP1=this._lastOriginP,u.originP2=l,u.defined=o,this.curves.push(u),this._lastX=s,this._lastY=a,this._lastOriginP=l}closePath(){if(this.curves.length<2)return;const t=this.curves[this.curves.length-1];this.lineTo(this._startX,this._startY,t.defined,this._startOriginP)}ellipse(){throw new Error("SegContext不支持调用ellipse")}lineTo(t,e,i,r){const s=this.addLinearCurve(t,e,i,this._lastOriginP,r);this.curves.push(s),this._lastX=t,this._lastY=e,this._lastOriginP=r}moveTo(t,e,i){return this._lastX=this._startX=t,this._lastY=this._startY=e,this._lastOriginP=i,this._startOriginP=i,this}quadraticCurveTo(t,e,i,r){throw new Error("SegContext不支持调用quadraticCurveTo")}clear(){this.curves=[],this.length=NaN}tryUpdateLength(t){return this.getLength(t)}addLinearCurve(t,e,i,r,s){const a=new CI(new Qi(this._lastX,this._lastY),new Qi(t,e));return a.originP1=r,a.originP2=s,a.defined=i,a}getPointAt(t){throw new Error("暂未实现")}getCurveLengths(){return[]}getLength(t){var e,i;if(t===fi.COLUMN){if(!this.curves.length)return 0;const r=this.curves[0],s=this.curves[this.curves.length-1],a=(e=s.p3)!==null&&e!==void 0?e:s.p1;return Ie(r.p0.y-a.y)}if(t===fi.ROW){if(!this.curves.length)return 0;const r=this.curves[0],s=this.curves[this.curves.length-1],a=(i=s.p3)!==null&&i!==void 0?i:s.p1;return Ie(r.p0.x-a.x)}return Number.isFinite(this.length)||(this.length=this.curves.reduce((r,s)=>r+s.getLength(),0)),this.length}}class oTt extends j3{bezierCurveTo(t,e,i,r,s,a,o,l){return super.bezierCurveTo(e,t,r,i,a,s,o,l)}lineTo(t,e,i,r){return super.lineTo(e,t,i,r)}moveTo(t,e,i){return super.moveTo(e,t,i)}clear(){return super.clear()}}function Rm(n,t,e=1){let i=!1;for(let r=0,s=t.length;r<=s;r++)r>=s===i&&((i=!i)?n.lineStart():n.lineEnd()),i&&n.point(t[r])}function f1(n,t,e){const i=t??(Ie(e[e.length-1].x-e[0].x)>Ie(e[e.length-1].y-e[0].y)?fi.ROW:fi.COLUMN);return n==="monotoneY"?new oTt(n,i):new j3(n,i)}class tJ{constructor(t,e){this.context=t,e&&(this.startPoint=e)}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this.context.closePath(),this._line=1-this._line}point(t){const e=t.x,i=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,i,this._lastDefined!==!1&&t.defined!==!1,t):this.context.moveTo(e,i,t);break;case 1:this._point=2;default:this.context.lineTo(e,i,this._lastDefined!==!1&&t.defined!==!1,t)}this._lastDefined=t.defined}tryUpdateLength(){return this.context.tryUpdateLength()}}function g1(n,t={}){const{direction:e,startPoint:i}=t;if(n.length<2-+!!i)return null;const r=f1("linear",e,n);return lTt(new tJ(r,i),n),r}function lTt(n,t){return Rm(n,t,1)}function O6(n,t,e,i,r){n.context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+t)/6,(n._y0+4*n._y1+e)/6,i,n.lastPoint1)}class uTt{constructor(t,e){this.context=t,this.startPoint=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){this._point===2&&O6(this,6*this._x1-(this._x0+4*this._x1),6*this._y1-(this._y0+4*this._y1),this._lastDefined1!==!1&&this._lastDefined2!==!1,this.lastPoint1),(this._line||this._line!==0&&this._point===1)&&this.context.closePath(),this._line=1-this._line}point(t){const e=t.x,i=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,i,this._lastDefined1!==!1&&this._lastDefined2!==!1,t):this.context.moveTo(e,i,t);break;case 1:this._point=2;break;default:O6(this,e,i,this._lastDefined1!==!1&&this._lastDefined2!==!1)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=i,this._lastDefined1=this._lastDefined2,this._lastDefined2=t.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}}function hTt(n,t){return Rm(n,t,2)}function eJ(n,t={}){const{direction:e,startPoint:i}=t;if(n.length<2-+!!i)return null;if(n.length<3-+!!i)return g1(n,t);const r=f1("basis",e,n);return hTt(new uTt(r,i),n),r}function R6(n){return n<0?-1:1}function I6(n,t,e){const i=n._x1-n._x0,r=t-n._x1,s=(n._y1-n._y0)/(i||Number(r<0&&-0)),a=(e-n._y1)/(r||Number(i<0&&-0)),o=(s*r+a*i)/(i+r);return(R6(s)+R6(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function L6(n,t){const e=n._x1-n._x0;return e?(3*(n._y1-n._y0)/e-t)/2:t}function cE(n,t,e,i,r){const s=n._x0,a=n._y0,o=n._x1,l=n._y1,u=(o-s)/3;n.context.bezierCurveTo(s+u,a+u*t,o-u,l-u*e,o,l,i,n.lastPoint1)}class iJ{constructor(t,e){this.context=t,this.startPoint=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){switch(this._point){case 2:this.context.lineTo(this._x1,this._y1,this._lastDefined1!==!1&&this._lastDefined2!==!1,this.lastPoint1);break;case 3:cE(this,this._t0,L6(this,this._t0),this._lastDefined1!==!1&&this._lastDefined2!==!1,this.lastPoint1)}(this._line||this._line!==0&&this._point===1)&&this.context.closePath(),this._line=1-this._line}point(t){let e=NaN;const i=t.x,r=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(i,r,this._lastDefined1!==!1&&this._lastDefined2!==!1,t):this.context.moveTo(i,r,t);break;case 1:this._point=2;break;case 2:this._point=3,cE(this,L6(this,e=I6(this,i,r)),e,this._lastDefined1!==!1&&this._lastDefined2!==!1);break;default:cE(this,this._t0,e=I6(this,i,r),this._lastDefined1!==!1&&this._lastDefined2!==!1)}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=r,this._t0=e,this._lastDefined1=this._lastDefined2,this._lastDefined2=t.defined!==!1,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}}class cTt extends iJ{constructor(t,e){super(t,e)}point(t){return super.point({y:t.x,x:t.y,defined:t.defined})}}function dTt(n,t){return Rm(n,t,2)}function nJ(n,t={}){const{direction:e,startPoint:i}=t;if(n.length<2-+!!i)return null;if(n.length<3-+!!i)return g1(n,t);const r=f1("monotoneX",e,n);return dTt(new iJ(r,i),n),r}function pTt(n,t){return Rm(n,t,2)}function rJ(n,t={}){const{direction:e,startPoint:i}=t;if(n.length<2-+!!i)return null;if(n.length<3-+!!i)return g1(n,t);const r=f1("monotoneY",e,n);return pTt(new cTt(r,i),n),r}let fTt=class{constructor(t,e=.5,i){this.context=t,this._t=e,this.startPoint=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x=this._y=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){0<this._t&&this._t<1&&this._point===2&&this.context.lineTo(this._x,this._y,this._lastDefined!==!1,this.lastPoint),(this._line||this._line!==0&&this._point===1)&&this.context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)}point(t){const e=t.x,i=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,i,this._lastDefined!==!1&&t.defined!==!1,t):this.context.moveTo(e,i,t);break;case 1:this._point=2;default:if(this._t<=0)this.context.lineTo(this._x,i,this._lastDefined!==!1&&t.defined!==!1,this.lastPoint),this.context.lineTo(e,i,this._lastDefined!==!1&&t.defined!==!1,t);else{const r=this._x*(1-this._t)+e*this._t;this.context.lineTo(r,this._y,this._lastDefined!==!1&&t.defined!==!1,this.lastPoint),this.context.lineTo(r,i,this._lastDefined!==!1&&t.defined!==!1,t)}}this._lastDefined=t.defined,this._x=e,this._y=i,this.lastPoint=t}tryUpdateLength(){return this.context.tryUpdateLength()}};function cg(n,t,e={}){const{direction:i,startPoint:r}=e;if(n.length<2-+!!r)return null;const s=new j3("step",i??(Ie(n[n.length-1].x-n[0].x)>Ie(n[n.length-1].y-n[0].y)?fi.ROW:fi.COLUMN));return gTt(new fTt(s,t,r),n),s}function gTt(n,t){return Rm(n,t,1)}class mTt extends tJ{lineEnd(){this.context.closePath()}}function sJ(n,t={}){const{direction:e,startPoint:i}=t;if(n.length<2-+!!i)return null;const r=f1("linear",e,n);return vTt(new mTt(r,i),n),r}function vTt(n,t){return Rm(n,t,1)}function kI(n,t,e){switch(t){case"linear":default:return g1(n,e);case"basis":return eJ(n,e);case"monotoneX":return nJ(n,e);case"monotoneY":return rJ(n,e);case"step":return cg(n,.5,e);case"stepBefore":return cg(n,0,e);case"stepAfter":return cg(n,1,e);case"linearClosed":return sJ(n,e)}}class En extends J2t{constructor(t){super(),this.commandList=[],t&&(this._ctx=t),this._boundsContext=new ZZ(this.bounds)}setCtx(t){this._ctx=t}moveTo(t,e){return this.commandList.push([ve.M,t,e]),this._ctx&&this._ctx.moveTo(t,e),this}lineTo(t,e){return this.commandList.push([ve.L,t,e]),this._ctx&&this._ctx.lineTo(t,e),this}quadraticCurveTo(t,e,i,r){return this.commandList.push([ve.Q,t,e,i,r]),this._ctx&&this._ctx.quadraticCurveTo(t,e,i,r),this}bezierCurveTo(t,e,i,r,s,a){return this.commandList.push([ve.C,t,e,i,r,s,a]),this._ctx&&this._ctx.bezierCurveTo(t,e,i,r,s,a),this}arcTo(t,e,i,r,s){return this.commandList.push([ve.AT,t,e,i,r,s]),this._ctx&&this._ctx.arcTo(t,e,i,r,s),this}ellipse(t,e,i,r,s,a,o,l){return this.commandList.push([ve.E,t,e,i,r,s,a,o,l]),this._ctx&&this._ctx.ellipse(t,e,i,r,s,a,o,l),this}rect(t,e,i,r){return this.commandList.push([ve.R,t,e,i,r]),this._ctx&&this._ctx.rect(t,e,i,r),this}arc(t,e,i,r,s,a){return this.commandList.push([ve.A,t,e,i,r,s,a]),this._ctx&&this._ctx.arc(t,e,i,r,s,a),this}closePath(){return this.commandList.push([ve.Z]),this._ctx&&this._ctx.closePath(),this}addCurve(t){this.curves.push(t)}clear(){this.transformCbList=null,this.commandList.length=0,this.curves.length=0}beginPath(){this.clear()}toString(){if(!this.toStringCbList){const i=[];i[ve.M]=r=>`M${r[1]} ${r[2]}`,i[ve.L]=r=>`L${r[1]} ${r[2]}`,i[ve.Q]=r=>`Q${r[1]} ${r[2]} ${r[3]} ${r[4]}`,i[ve.C]=r=>`C${r[1]} ${r[2]} ${r[3]} ${r[4]} ${r[5]} ${r[6]}`,i[ve.A]=r=>{const s=[];gS(s,r[4],r[5],r[1],r[2],r[3],r[3]);let a="";for(let o=0;o<s.length;o+=6)a+=`C${s[o]} ${s[o+1]} ${s[o+2]} ${s[o+3]} ${s[o+4]} ${s[o+5]}`;return a},i[ve.R]=r=>`M${r[1]} ${r[2]} h${r[3]} v${r[4]} H${r[1]}Z`,i[ve.Z]=r=>"Z",this.toStringCbList=i}const t=this.toStringCbList;let e="";return this.commandList.forEach(i=>{e+=t[i[0]](i)}),e}fromString(t,e,i,r,s){this.clear();const a=eTt(t);return this._runCommandStrList(a,e,i,r,s),this._updateBounds(),this}fromLine(t){const{points:e,curveType:i,clipRangeByDimension:r}=t.attribute;if(!e)return;const s=kI(e,i);r==="x"?this.direction=fi.ROW:r==="y"?this.direction=fi.COLUMN:r==="auto"&&(this.direction=s.direction),this.curves=s.curves}fromCustomPath2D(t,e,i,r,s){return this.clear(),this._runCommandList(t.commandList,e,i,r,s),this._updateBounds(),this}transform(t,e,i,r){const s=this.commandList;if(!this.transformCbList){const a=[];a[ve.M]=this.moveToTransform,a[ve.L]=this.lineToTransform,a[ve.Q]=this.quadraticCurveToTransform,a[ve.C]=this.bezierCurveToTransform,a[ve.AT]=this.arcToTransform,a[ve.E]=this.ellipseTransform,a[ve.R]=this.rectTransform,a[ve.A]=this.arcTransform,a[ve.Z]=this.closePathTransform,this.transformCbList=a}s.forEach(a=>{this.transformCbList[a[0]](a,t,e,i,r)}),this._updateBounds()}moveToTransform(t,e,i,r,s){t[1]=t[1]*r+e,t[2]=t[2]*s+i}lineToTransform(t,e,i,r,s){t[1]=t[1]*r+e,t[2]=t[2]*s+i}quadraticCurveToTransform(t,e,i,r,s){t[1]=t[1]*r+e,t[2]=t[2]*s+i,t[3]=t[3]*r+e,t[4]=t[4]*s+i}bezierCurveToTransform(t,e,i,r,s){t[1]=t[1]*r+e,t[2]=t[2]*s+i,t[3]=t[3]*r+e,t[4]=t[4]*s+i,t[5]=t[5]*r+e,t[6]=t[6]*s+i}arcToTransform(t,e,i,r,s){t[1]=t[1]*r+e,t[2]=t[2]*s+i,t[3]=t[3]*r+e,t[4]=t[4]*s+i,t[5]=t[5]*(r+s)/2}ellipseTransform(t,e,i,r,s){t[1]=t[1]*r+e,t[2]=t[2]*s+i,t[3]=t[3]*r,t[4]=t[4]*s}rectTransform(t,e,i,r,s){t[1]=t[1]*r+e,t[2]=t[2]*s+i,t[3]=t[3]*r,t[4]=t[4]*s}arcTransform(t,e,i,r,s){t[1]=t[1]*r+e,t[2]=t[2]*s+i,t[3]=t[3]*(r+s)/2}closePathTransform(){}_runCommandStrList(t,e=0,i=0,r=1,s=1){let a,o,l,u,h,c=null,d=0,p=0,f=0,g=0;for(let _=0,v=t.length;_<v;++_){switch(a=t[_],r===1&&s===1||(a=_Tt(a,r,s)),a[0]){case"l":d+=a[1],p+=a[2],this.lineTo(d+e,p+i);break;case"L":d=a[1],p=a[2],this.lineTo(d+e,p+i);break;case"h":d+=a[1],this.lineTo(d+e,p+i);break;case"H":d=a[1],this.lineTo(d+e,p+i);break;case"v":p+=a[1],this.lineTo(d+e,p+i);break;case"V":p=a[1],this.lineTo(d+e,p+i);break;case"m":d+=a[1],p+=a[2],this.moveTo(d+e,p+i);break;case"M":d=a[1],p=a[2],this.moveTo(d+e,p+i);break;case"c":o=d+a[5],l=p+a[6],f=d+a[3],g=p+a[4],this.bezierCurveTo(d+a[1]+e,p+a[2]+i,f+e,g+i,o+e,l+i),d=o,p=l;break;case"C":d=a[5],p=a[6],f=a[3],g=a[4],this.bezierCurveTo(a[1]+e,a[2]+i,f+e,g+i,d+e,p+i);break;case"s":o=d+a[3],l=p+a[4],f=2*d-f,g=2*p-g,this.bezierCurveTo(f+e,g+i,d+a[1]+e,p+a[2]+i,o+e,l+i),f=d+a[1],g=p+a[2],d=o,p=l;break;case"S":o=a[3],l=a[4],f=2*d-f,g=2*p-g,this.bezierCurveTo(f+e,g+i,a[1]+e,a[2]+i,o+e,l+i),d=o,p=l,f=a[1],g=a[2];break;case"q":o=d+a[3],l=p+a[4],f=d+a[1],g=p+a[2],this.quadraticCurveTo(f+e,g+i,o+e,l+i),d=o,p=l;break;case"Q":o=a[3],l=a[4],this.quadraticCurveTo(a[1]+e,a[2]+i,o+e,l+i),d=o,p=l,f=a[1],g=a[2];break;case"t":o=d+a[1],l=p+a[2],c[0].match(/[QqTt]/)===null?(f=d,g=p):c[0]==="t"?(f=2*d-u,g=2*p-h):c[0]==="q"&&(f=2*d-f,g=2*p-g),u=f,h=g,this.quadraticCurveTo(f+e,g+i,o+e,l+i),d=o,p=l,f=d+a[1],g=p+a[2];break;case"T":o=a[1],l=a[2],f=2*d-f,g=2*p-g,this.quadraticCurveTo(f+e,g+i,o+e,l+i),d=o,p=l;break;case"a":M6(this,d+e,p+i,[a[1],a[2],a[3],a[4],a[5],a[6]+d+e,a[7]+p+i]),d+=a[6],p+=a[7];break;case"A":M6(this,d+e,p+i,[a[1],a[2],a[3],a[4],a[5],a[6]+e,a[7]+i]),d=a[6],p=a[7];break;case"z":case"Z":this.closePath()}c=a}}_runCommandList(t,e=0,i=0,r=1,s=1){if(e!==0||i!==0||r!==1||s!==1)for(let a=0,o=t.length;a<o;++a){const l=t[a].slice();switch(l[0]){case ve.L:this.lineToTransform(l,e,i,r,s);break;case ve.M:this.moveToTransform(l,e,i,r,s);break;case ve.C:this.bezierCurveToTransform(l,e,i,r,s);break;case ve.Q:this.quadraticCurveToTransform(l,e,i,r,s);break;case ve.A:this.arcToTransform(l,e,i,r,s);break;case ve.E:this.ellipseTransform(l,e,i,r,s);break;case ve.R:this.rectTransform(l,e,i,r,s);break;case ve.AT:this.arcToTransform(l,e,i,r,s);break;case ve.Z:this.closePath()}}else this.commandList=t.map(a=>a.slice())}_updateBounds(){this.bounds.clear(),cu(this.commandList,this._boundsContext)}release(){this.commandList=[],this._boundsContext=null,this._ctx=null}getLength(){if(this.direction===fi.COLUMN){if(!this.curves.length)return 0;const t=this.curves[0],e=this.curves[this.curves.length-1];return Ie(t.p0.y-e.p1.y)}if(this.direction===fi.ROW){if(!this.curves.length)return 0;const t=this.curves[0],e=this.curves[this.curves.length-1];return Ie(t.p0.x-e.p1.x)}return this.curves.reduce((t,e)=>t+e.getLength(),0)}getAttrAt(t){if(!this.curves)return{pos:{x:0,y:0},angle:0};let e,i=0;for(let s=0;s<this.curves.length;s++){e=this.curves[s];const a=e.getLength(this.direction);if(i+a>=t)break;i+=a}const r=(t-i)/e.getLength(this.direction);return{pos:e.getPointAt(r),angle:e.getAngleAt(r)}}}const Oa=["l",0,0,0,0,0,0,0];function _Tt(n,t,e){const i=Oa[0]=n[0];if(i==="a"||i==="A")Oa[1]=t*n[1],Oa[2]=e*n[2],Oa[3]=n[3],Oa[4]=n[4],Oa[5]=n[5],Oa[6]=t*n[6],Oa[7]=e*n[7];else if(i==="h"||i==="H")Oa[1]=t*n[1];else if(i==="v"||i==="V")Oa[1]=e*n[1];else for(let r=1,s=n.length;r<s;++r)Oa[r]=(r%2==1?t:e)*n[r];return Oa}const yTt={alignSelf:"auto"},Wn={x:0,y:0,z:0,dx:0,dy:0,dz:0,scrollX:0,scrollY:0,scaleX:1,scaleY:1,scaleZ:1,angle:0,alpha:0,beta:0,scaleCenter:[0,0],anchor:[0,0],anchor3d:[0,0],postMatrix:new Wi},aJ={fillOpacity:1,fill:!1,shadowBlur:0,shadowColor:"black",shadowOffsetX:0,shadowOffsetY:0},dE={strokeOpacity:1,lineDash:[],lineDashOffset:0,lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:10,strokeBoundsBuffer:2,stroke:!1},oJ=Object.assign({outerBorder:Object.assign(Object.assign({},dE),{distance:0}),innerBorder:Object.assign(Object.assign({},dE),{distance:0})},dE),Sl={text:"",maxLineWidth:1/0,textAlign:"left",textBaseline:"alphabetic",fontSize:16,fontFamily:`PingFang SC,Microsoft Yahei,system-ui,-apple-system,segoe ui,
    Roboto,Helvetica,Arial,sans-serif, apple color emoji,segoe ui emoji,segoe ui symbol`,fontWeight:"",ellipsis:"…",fontVariant:"",fontStyle:"",lineHeight:void 0,underline:0,lineThrough:0,scaleIn3d:!1,direction:"horizontal",wordBreak:"break-all",ignoreBuf:!1,verticalMode:0,wrap:!1,whiteSpace:"no-wrap",heightLimit:1/0,lineClamp:1/0,suffixPosition:"end",underlineDash:[],underlineOffset:0,disableAutoClipedPoptip:void 0},bTt={pickStrokeBuffer:0},xTt=Object.assign(Object.assign(Object.assign(Object.assign({forceBoundsWidth:void 0,forceBoundsHeight:void 0,opacity:1,background:null,backgroundOpacity:1,backgroundCornerRadius:0,texture:null,textureColor:"black",textureSize:10,texturePadding:2,backgroundMode:"no-repeat",backgroundFit:!0,blur:0,cursor:null,html:null,react:null},aJ),oJ),yTt),bTt),lJ={connectedType:"none",connectedStyle:{},connectedX:NaN,connectedY:NaN},STt={_debug_bounds:!1},$i=Object.assign(Object.assign(Object.assign({strokeSeg:null,renderable:!0,pickable:!0,shadowGraphic:void 0,childrenPickable:!0,fillPickable:!0,strokePickable:!0,visible:!0,zIndex:0,layout:null,boundsPadding:0,renderStyle:"default",pickMode:"accurate",customPickShape:null,boundsMode:"accurate",keepDirIn3d:!0,shadowRootIdx:1,globalZIndex:1,globalCompositeOperation:"",overflow:"hidden"},STt),xTt),Wn),ATt=Object.assign(Object.assign({},$i),{startAngle:0,endAngle:be,innerRadius:0,outerRadius:1,innerPadding:0,outerPadding:0,cornerRadius:0,padRadius:0,padAngle:0,cap:!1,forceShowCap:!1}),wTt=Object.assign(Object.assign(Object.assign({},$i),lJ),{points:[],segments:[],curveType:"linear",clipRange:1,closePath:!1}),CTt=Object.assign(Object.assign({},$i),{radius:1,startAngle:0,endAngle:be}),kTt=Object.assign(Object.assign({},$i),{width:0,height:0,cornerRadius:0,path:[],clip:!1,visibleAll:!0,display:"relative",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"flex-start",alignContent:"flex-start",baseOpacity:1}),TTt=Object.assign(Object.assign({},$i),{path:"",width:0,height:0,cornerRadius:0,clip:!1}),MTt=Object.assign(Object.assign(Object.assign({},$i),lJ),{points:[],segments:[],curveType:"linear",clipRange:1,clipRangeByDimension:"default",closePath:!1}),PTt=Object.assign(Object.assign({},$i),{path:new En,customPath:()=>{ri.getInstance().warn("空函数")}}),ETt=Object.assign(Object.assign({},$i),{points:[],cornerRadius:0,closePath:!0}),OTt=Object.assign(Object.assign({},$i),{width:0,height:0,x1:0,y1:0,strokeBoundsBuffer:0,cornerRadius:0});Object.assign(Object.assign({},$i),{width:0,height:0,x1:0,y1:0,cornerRadius:0,length:0});const RTt=Object.assign(Object.assign({},$i),{symbolType:"circle",size:10,keepDirIn3d:!0}),uJ=Object.assign(Object.assign(Object.assign({},$i),Sl),{strokeBoundsBuffer:0,keepDirIn3d:!0}),tl=Object.assign(Object.assign(Object.assign({},$i),Sl),{editable:!1,width:300,height:300,ellipsis:!0,wordBreak:"break-word",verticalDirection:"top",textAlign:"left",textBaseline:"top",layoutDirection:"horizontal",textConfig:[],disableAutoWrapLine:!1,maxHeight:void 0,maxWidth:void 0,singleLine:!1}),sy=Object.assign(Object.assign({repeatX:"no-repeat",repeatY:"no-repeat",image:"",width:0,height:0},$i),{fill:!0,cornerRadius:0}),ITt=Object.assign(Object.assign({},sy),{backgroundShowMode:"never",backgroundWidth:0,backgroundHeight:0,textAlign:"left",textBaseline:"middle",direction:"horizontal",margin:0,id:"",width:20,height:20,backgroundFill:"rgba(101, 117, 168, 0.1)",backgroundFillOpacity:1,backgroundStroke:!1,backgroundStrokeOpacity:1,backgroundRadius:4,opacity:1});class LTt{}const wt=new LTt,N3={horizontal:{width:"width",height:"height",left:"left",top:"top",x:"x",y:"y",bottom:"bottom"},vertical:{width:"height",height:"width",left:"top",top:"left",x:"y",y:"x",bottom:"right"}},hJ={fontSize:16,fontFamily:"sans-serif",fill:!0,stroke:!1,fontWeight:"normal",lineHeight:"normal",fontStyle:"normal",textDecoration:"none",textAlign:"left",script:"normal"},D6=/\w|\(|\)|-/,DTt=/[.?!,;:/，。？！、；：]/,BTt=/\S/;function FTt(n,t){const e=t&&t.fill||hJ.fill;if(!e)return void(n.globalAlpha=0);const{fillOpacity:i=1,opacity:r=1}=t;n.globalAlpha=i*r,n.fillStyle=e;let s=t.fontSize||16;switch(t.script){case"super":case"sub":s*=.8}n.setTextStyle({textAlign:"left",textBaseline:t.textBaseline||"alphabetic",fontStyle:t.fontStyle||"",fontWeight:t.fontWeight||"",fontSize:s,fontFamily:t.fontFamily||"sans-serif"})}function jTt(n,t){const e=t&&t.stroke||hJ.stroke;if(!e)return void(n.globalAlpha=0);const{strokeOpacity:i=1,opacity:r=1}=t;n.globalAlpha=i*r,n.lineWidth=t&&typeof t.lineWidth=="number"?t.lineWidth:1,n.strokeStyle=e;let s=t.fontSize||16;switch(t.script){case"super":case"sub":s*=.8}n.setTextStyle({textAlign:"left",textBaseline:t.textBaseline||"alphabetic",fontStyle:t.fontStyle||"",fontWeight:t.fontWeight||"",fontSize:s,fontFamily:t.fontFamily||"sans-serif"})}function TI(n,t,e,i,r){if(!t||t<=0)return 0;const s=wt.graphicUtil.textMeasure;let a=i,o=n.slice(0,a),l=Math.floor(s.measureText(o,e).width),u=n.slice(0,a+1),h=Math.floor(s.measureText(u,e).width);for(;l>t||h<=t;){if(l>t?a--:a++,a>n.length){a=n.length;break}if(a<0){a=0;break}o=n.slice(0,a),l=Math.floor(s.measureText(o,e).width),u=n.slice(0,a+1),h=Math.floor(s.measureText(u,e).width)}return r&&(a=mS(n,a)),a}function mS(n,t){let e=t;for(;D6.test(n[e-1])&&D6.test(n[e])||DTt.test(n[e]);)if(e--,e<=0)return t;return e}function zf(n,t){const e=wt.graphicUtil.textMeasure.measureText(n,t),i={ascent:0,height:0,descent:0,width:0};return typeof e.actualBoundingBoxAscent!="number"||typeof e.actualBoundingBoxDescent!="number"?(i.width=Math.floor(e.width),i.height=t.fontSize||0,i.ascent=i.height,i.descent=0):(i.width=Math.floor(e.width),i.height=Math.floor(e.actualBoundingBoxAscent+e.actualBoundingBoxDescent),i.ascent=Math.floor(e.actualBoundingBoxAscent),i.descent=i.height-i.ascent),i}var NTt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let MI=class{configure(n,t){this.canvas=n.canvas,this.context=n.context,n.bindTextMeasure(this)}measureTextWidth(n,t){return this.context?(this.context.setTextStyleWithoutAlignBaseline(t),this.context.measureText(n).width):this.estimate(n,t).width}estimate(n,{fontSize:t=uJ.fontSize}){let e=0,i=0;for(let r=0;r<n.length;r++)n.charCodeAt(r)<128?e++:i++;return{width:~~(.8*e*t+i*t),height:t}}measureTextPixelHeight(n,t){var e;if(!this.context)return(e=t.fontSize)!==null&&e!==void 0?e:Sl.fontSize;this.context.setTextStyleWithoutAlignBaseline(t);const i=this.context.measureText(n);return Math.abs(i.actualBoundingBoxAscent-i.actualBoundingBoxDescent)}measureTextBoundHieght(n,t){var e;if(!this.context)return(e=t.fontSize)!==null&&e!==void 0?e:Sl.fontSize;this.context.setTextStyleWithoutAlignBaseline(t);const i=this.context.measureText(n);return Math.abs(i.fontBoundingBoxAscent-i.fontBoundingBoxDescent)}measureText(n,t){return this.context?(this.context.setTextStyleWithoutAlignBaseline(t),this.context.measureText(n)):this.estimate(n,t)}clipTextVertical(n,t,e,i){if(n.length===0)return{verticalList:n,width:0};const{fontSize:r=12}=t;n.forEach(l=>{l.width=l.direction===0?r:this.measureTextWidth(l.text,t)});const s=[];let a=0,o=0;for(;o<n.length&&a+n[o].width<e;o++)a+=n[o].width,s.push(n[o]);if(n[o]&&n[o].text.length>1){const l=this._clipText(n[o].text,t,e-a,0,n[o].text.length-1,"end",!1);if(i&&l.str!==n[o].text){let u="",h=0;for(let p=0;p<o;p++){const f=n[p];u+=f.text,h+=f.text.length}u+=n[o].text;const c=h+l.str.length;let d=mS(u,c);d-=h,d!==l.str.length-1&&(l.str=l.str.substring(0,d),l.width=this.measureTextWidth(l.str,t))}s.push(Object.assign(Object.assign({},n[o]),{text:l.str,width:l.width})),a+=l.width}return{verticalList:s,width:a}}clipText(n,t,e,i){if(n.length===0)return{str:"",width:0};let r=this.measureTextWidth(n,t);if(r<=e)return{str:n,width:r};if(r=this.measureTextWidth(n[0],t),r>e)return{str:"",width:0};const s=this._clipText(n,t,e,0,n.length-1,"end",!1);if(i&&s.str!==n){const a=mS(n,s.str.length);a!==s.str.length&&(s.str=n.substring(0,a),s.width=this.measureTextWidth(s.str,t))}return s}_clipText(n,t,e,i,r,s,a){let o;if(s==="start")o=this._clipTextStart(n,t,e,i,r),a&&(o.result=a+o.str);else if(s==="middle"){const l=this._clipTextMiddle(n,t,e,"","",0,0,1);o={str:"none",width:l.width,result:l.left+a+l.right}}else o=this._clipTextEnd(n,t,e,i,r),a&&(o.result=o.str+a);return o}_clipTextEnd(n,t,e,i,r){const s=Math.floor((i+r)/2),a=n.substring(0,s+1),o=this.measureTextWidth(a,t);let l;if(o>e){if(a.length<=1)return{str:"",width:0};const u=n.substring(0,s);return l=this.measureTextWidth(u,t),l<=e?{str:u,width:l}:this._clipTextEnd(n,t,e,i,s)}if(o<e){if(s>=n.length-1)return{str:n,width:this.measureTextWidth(n,t)};const u=n.substring(0,s+2);return l=this.measureTextWidth(u,t),l>=e?{str:a,width:o}:this._clipTextEnd(n,t,e,s,r)}return{str:a,width:o}}_clipTextStart(n,t,e,i,r){const s=Math.ceil((i+r)/2),a=n.substring(s-1,n.length-1),o=this.measureTextWidth(a,t);let l;if(o>e){if(a.length<=1)return{str:"",width:0};const u=n.substring(s,n.length-1);return l=this.measureTextWidth(u,t),l<=e?{str:u,width:l}:this._clipTextStart(n,t,e,s,n.length-1)}if(o<e){if(s<=0)return{str:n,width:this.measureTextWidth(n,t)};const u=n.substring(s-2,n.length-1);return l=this.measureTextWidth(u,t),l>=e?{str:a,width:o}:this._clipTextStart(n,t,e,i,s)}return{str:a,width:o}}_clipTextMiddle(n,t,e,i,r,s,a,o){const l=n.substring(0,o),u=this.measureTextWidth(l,t);if(u+a>e)return{left:i,right:r,width:s+a};const h=n.substring(n.length-o,n.length),c=this.measureTextWidth(h,t);return u+c>e?{left:l,right:r,width:u+a}:this._clipTextMiddle(n,t,e,l,h,u,c,o+1)}clipTextWithSuffixVertical(n,t,e,i,r,s){if(i==="")return this.clipTextVertical(n,t,e,r);if(n.length===0)return{verticalList:n,width:0};const a=this.clipTextVertical(n,t,e,r);if(a.verticalList.length===n.length&&a.verticalList[a.verticalList.length-1].width===n[n.length-1].width)return a;const o=this.measureTextWidth(i,t);if(o>e)return a;let l;if(e-=o,s==="start"){const u=this.revertVerticalList(n);l=this.clipTextVertical(u,t,e,r);const h=this.revertVerticalList(l.verticalList);h.unshift({text:i,direction:1,width:o}),l.verticalList=h}else if(s==="middle"){const u=this.clipTextVertical(n,t,e/2,r),h=this.revertVerticalList(n),c=this.clipTextVertical(h,t,e/2,r);u.verticalList.push({text:i,direction:1,width:o}),this.revertVerticalList(c.verticalList).forEach(d=>u.verticalList.push(d)),l={verticalList:u.verticalList,width:u.width+c.width}}else l=this.clipTextVertical(n,t,e,r),l.verticalList.push({text:i,direction:1,width:o});return l.width+=o,l}revertVerticalList(n){return n.reverse().map(t=>{const e=t.text.split("").reverse().join("");return Object.assign(Object.assign({},t),{text:e})})}clipTextWithSuffix(n,t,e,i,r,s,a=!1){if(i==="")return this.clipText(n,t,e,r);if(n.length===0)return{str:"",width:0};const o=this.measureTextWidth(n,t);if(!a&&o<=e)return{str:n,width:o};const l=this.measureTextWidth(i,t);if(l>e)return{str:"",width:0};if(a&&o+l<=e)return{str:n+i,width:o+l};e-=l;const u=this._clipText(n,t,e,0,n.length-1,s,i);if(r&&u.str!==n){const h=mS(n,u.str.length);h!==u.str.length&&(u.result=n.substring(0,h),u.width=this.measureTextWidth(u.str,t))}else a&&u.str===n&&(u.result=n+i);return u.str=u.result,u.width+=l,u}};MI=NTt([Vt()],MI);var zTt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};const PI=Symbol.for("TextMeasureContribution");let EI=class extends MI{};EI=zTt([Vt()],EI);const re=new U2t,cJ=Symbol.for("CanvasFactory"),HTt=Symbol.for("Context2dFactory");function BA(n){return re.getNamed(cJ,wt.global.env)(n)}class VTt{constructor(){this.pools=[],this.allocatedCanvas=[]}shareCanvas(){return this.allocatedCanvas.length?this.allocatedCanvas[0]:this.getCommonCanvas()}getCommonCanvas(){return this._commonCanvas||(this._commonCanvas=this.allocate({width:100,height:100,dpr:2})),this._commonCanvas}allocate(t){if(!this.pools.length){const i=BA(Object.assign({nativeCanvas:wt.global.createCanvas(t)},t));return this.allocatedCanvas.push(i),i}const e=this.pools.pop();return e.resize(t.width,t.height),e.dpr=t.dpr,e}allocateByObj(t){if(!this.pools.length){const i={width:t.width/t.dpr,height:t.height/t.dpr,dpr:t.dpr},r=BA(Object.assign({nativeCanvas:wt.global.createCanvas(i)},i));return this.allocatedCanvas.push(r),r}const e=this.pools.pop();return e.width=t.width,e.height=t.height,e}free(t){this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}}const Gg=new VTt;var WTt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},$Tt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};const FA=Symbol.for("VWindow"),z3=Symbol.for("WindowHandlerContribution");let OI=class{get width(){if(this._handler){const n=this._handler.getWH();return this._width=n.width}return this._width}get height(){if(this._handler){const n=this._handler.getWH();return this._height=n.height}return this._height}get dpr(){return this._handler.getDpr()}constructor(){this.hooks={onChange:new la(["x","y","width","height"])},this.active=()=>{const n=this.global;!n.env||this.actived||(re.getNamed(z3,n.env).configure(this,n),this.actived=!0)},this._uid=pn.GenAutoIncrementId(),this.global=wt.global,this.postInit()}postInit(){this.global.hooks.onSetEnv.tap("window",this.active),this.active()}get style(){var n;return(n=this._handler.getStyle())!==null&&n!==void 0?n:{}}set style(n){this._handler.setStyle(n)}create(n){var t,e;this._handler.createWindow(n);const i=this._handler.getWH();this._width=i.width,this._height=i.height,n.viewBox?this.setViewBox(n.viewBox):n.canvasControled!==!1?this.setViewBox({x1:0,y1:0,x2:this._width,y2:this._height}):this.setViewBox({x1:0,y1:0,x2:(t=n.width)!==null&&t!==void 0?t:this._width,y2:(e=n.height)!==null&&e!==void 0?e:this._height}),this.title=this._handler.getTitle(),this.resizable=!0}setWindowHandler(n){this._handler=n}setDpr(n){return this._handler.setDpr(n)}resize(n,t){return this._handler.resizeWindow(n,t)}configure(){throw new Error("暂不支持")}release(){return this.global.hooks.onSetEnv.unTap("window",this.active),this._handler.releaseWindow()}getContext(){return this._handler.getContext()}getNativeHandler(){return this._handler.getNativeHandler()}getImageBuffer(n){return this._handler.getImageBuffer?this._handler.getImageBuffer(n):null}addEventListener(n,t,e){return this._handler.addEventListener(n,t,e)}removeEventListener(n,t,e){return this._handler.removeEventListener(n,t,e)}dispatchEvent(n){return this._handler.dispatchEvent(n)}getBoundingClientRect(){return this._handler.getBoundingClientRect()}getContainer(){return this._handler.container}clearViewBox(n){this._handler.clearViewBox(n)}setViewBox(n){this._handler.setViewBox(n)}setViewBoxTransform(n,t,e,i,r,s){this._handler.setViewBoxTransform(n,t,e,i,r,s)}getViewBox(){return this._handler.getViewBox()}getViewBoxTransform(){return this._handler.getViewBoxTransform()}pointTransform(n,t){const e=this._handler.getViewBox(),i={x:n,y:t};return this._handler.getViewBoxTransform().transformPoint({x:n,y:t},i),i.x-=e.x1,i.y-=e.y1,i}hasSubView(){const n=this._handler.getViewBox();return!(n.x1===0&&n.y1===0&&this.width===n.width()&&this.height===n.height())}isVisible(n){return this._handler.isVisible(n)}onVisibleChange(n){return this._handler.onVisibleChange(n)}getTopLeft(n){return this._handler.getTopLeft(n)}};OI=WTt([Vt(),$Tt("design:paramtypes",[])],OI);var dJ=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},pJ=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},B6=function(n,t){return function(e,i){t(e,i,n)}};let RI=class{get canvas(){return this.tryInitCanvas(),this._canvas}get context(){return this.tryInitCanvas(),this._context}constructor(n){this.contributions=n,this.configured=!1,this.global=wt.global,this.global.hooks.onSetEnv.tap("graphic-util",(t,e,i)=>{this.configured=!1,this.configure(i,e)})}get textMeasure(){return this._textMeasure||this.configure(this.global,this.global.env),this._textMeasure}configure(n,t){this.configured||(this.contributions.getContributions().forEach(e=>{e.configure(this,t)}),this.configured=!0)}tryInitCanvas(){if(!this._canvas){const n=Gg.shareCanvas();this._canvas=n,this._context=n.getContext("2d")}}bindTextMeasure(n){this._textMeasure=n}measureText(n,t,e="native"){var i;this.configure(this.global,this.global.env);const r=this.global.measureTextMethod;this.global.measureTextMethod=e;const s={width:this._textMeasure.measureTextWidth(n,t),height:(i=t.fontSize)!==null&&i!==void 0?i:Sl.fontSize};return this.global.measureTextMethod=r,s}createTextMeasureInstance(n,t,e){return this.configure(this.global,this.global.env),new Nr(Object.assign({defaultFontParams:{fontFamily:Sl.fontFamily,fontSize:Sl.fontSize},getCanvasForMeasure:e||(()=>this.canvas),getTextBounds:void 0,specialCharSet:`-/: .,@%'"~`+Nr.ALPHABET_CHAR_SET+Nr.ALPHABET_CHAR_SET.toUpperCase()},t??{}),n)}drawGraphicToCanvas(n,t,e){if(!t.defaultLayer)return null;const i=re.get(FA),r=n.AABBBounds,s=r.width(),a=r.height(),o=-r.x1,l=-r.y1;i.create({viewBox:{x1:o,y1:l,x2:r.x2,y2:r.y2},width:s,height:a,canvas:e,dpr:t.window.dpr,canvasControled:!0,offscreen:!0,title:""});const u=t.params.optimize.disableCheckGraphicWidthOutRange;t.params.optimize.disableCheckGraphicWidthOutRange=!0,t.defaultLayer.getNativeHandler().drawTo(i,[n],{transMatrix:i.getViewBoxTransform(),viewBox:i.getViewBox(),stage:t,layer:t.defaultLayer,renderService:t.renderService,background:"transparent",clear:!0,updateBounds:!1}),t.params.optimize.disableCheckGraphicWidthOutRange=u;const h=i.getNativeHandler();return h.nativeCanvas?h.nativeCanvas:null}};RI=dJ([Vt(),B6(0,fe(Rn)),B6(0,Xn(PI)),pJ("design:paramtypes",[Object])],RI);var ph;(function(n){n[n.transform=0]="transform",n[n.matrix=1]="matrix"})(ph||(ph={}));const Tn=new Wi;let II=class{constructor(){this.matrix=new Wi}init(n){return this.mode=ph.transform,this.originTransform=n,this.matrix.reset(),this}fromMatrix(n,t){return this.mode=ph.matrix,this.outSourceMatrix=n,this.outTargetMatrix=t,this}scaleMatrix(n,t,e){const i=this.outSourceMatrix;if(Tn.setValue(i.a,i.b,i.c,i.d,i.e,i.f),this.outTargetMatrix.reset(),e){const{x:r,y:s}=e;this.outTargetMatrix.translate(r,s),this.outTargetMatrix.scale(n,t),this.outTargetMatrix.translate(-r,-s)}else this.outTargetMatrix.scale(n,t);return this.outTargetMatrix.multiply(Tn.a,Tn.b,Tn.c,Tn.d,Tn.e,Tn.f),this}rotateMatrix(n,t){const e=this.outSourceMatrix;if(Tn.setValue(e.a,e.b,e.c,e.d,e.e,e.f),this.outTargetMatrix.reset(),t){const{x:i,y:r}=t;this.outTargetMatrix.translate(i,r),this.outTargetMatrix.rotate(n),this.outTargetMatrix.translate(-i,-r)}else this.outTargetMatrix.rotate(n);return this.outTargetMatrix.multiply(Tn.a,Tn.b,Tn.c,Tn.d,Tn.e,Tn.f),this}scale(n,t,e){return this.mode===ph.matrix?this.scaleMatrix(n,t,e):this}rotate(n,t){return this.mode===ph.matrix?this.rotateMatrix(n,t):this}translateMatrix(n,t){const e=this.outSourceMatrix;return Tn.setValue(e.a,e.b,e.c,e.d,e.e,e.f),this.outTargetMatrix.reset(),this.outTargetMatrix.translate(n,t),this.outTargetMatrix.multiply(Tn.a,Tn.b,Tn.c,Tn.d,Tn.e,Tn.f),this}translate(n,t){return this.mode===ph.matrix?this.translateMatrix(n,t):this}simplify(n){return this.mode===ph.matrix?this.simplifyMatrix(n):this}simplifyMatrix(n){return this}};II=dJ([Vt(),pJ("design:paramtypes",[])],II);const ns={arc:ATt,area:wTt,circle:CTt,line:MTt,path:PTt,symbol:RTt,text:uJ,rect:OTt,polygon:ETt,richtext:tl,richtextIcon:ITt,image:sy,group:kTt,glyph:TTt},pE=Object.keys(ns);function GTt(){return{arc:Object.assign({},ns.arc),area:Object.assign({},ns.area),circle:Object.assign({},ns.circle),line:Object.assign({},ns.line),path:Object.assign({},ns.path),symbol:Object.assign({},ns.symbol),text:Object.assign({},ns.text),rect:Object.assign({},ns.rect),polygon:Object.assign({},ns.polygon),richtext:Object.assign({},ns.richtext),richtextIcon:Object.assign({},ns.richtextIcon),image:Object.assign({},ns.image),group:Object.assign({},ns.group),glyph:Object.assign({},ns.glyph)}}function bx(n,t){Object.keys(t).forEach(e=>{n[e]=t[e]})}const F6=GTt();class ay{constructor(){this.initTheme(),this.dirty=!1}initTheme(){this._defaultTheme={},pE.forEach(t=>{this._defaultTheme[t]=Object.create(F6[t])}),this.combinedTheme=this._defaultTheme}getTheme(t){if(!t)return this.combinedTheme;if(!this.dirty)return this.combinedTheme;let e={};const i=this.getParentWithTheme(t);return i&&(e=i.theme),this.applyTheme(t,e),this.combinedTheme}getParentWithTheme(t){for(;t.parent;)if((t=t.parent).theme)return t;return null}applyTheme(t,e,i=!1){if(this.dirty){const r=this.getParentWithTheme(t);if(r){const s=r.theme;(s.dirty||i)&&s.applyTheme(r,e,!0)}this.userTheme?this.doCombine(r&&r.theme.combinedTheme):(r?this.combinedTheme=r.theme.combinedTheme:(this.combinedTheme=this._defaultTheme,ri.getInstance().warn("未知错误，走到不应该走的区域里")),this.dirty=!1)}return this.combinedTheme}doCombine(t){const e=this.userTheme,i=this.combinedTheme;pE.forEach(r=>{const s=Object.create(F6[r]);t&&t[r]&&bx(s,t[r]),i[r]&&bx(s,i[r]),e[r]&&bx(s,e[r]),this.combinedTheme[r]=s}),e.common&&pE.forEach(r=>{bx(this.combinedTheme[r],e.common)}),this.dirty=!1}setTheme(t,e){let i=this.userTheme;i?Object.keys(t).forEach(r=>{i[r]?Object.assign(i[r],t[r]):i[r]=Object.assign({},t[r])}):i=t,this.userTheme=i,this.dirty=!0,this.dirtyChildren(e)}resetTheme(t,e){this.userTheme=t,this.dirty=!0,this.dirtyChildren(e)}dirtyChildren(t){t.forEachChildren(e=>{e.isContainer&&(e.theme&&(e.theme.dirty=!0),this.dirtyChildren(e))})}}const fJ=new ay;function Pt(n,t){return n.glyphHost?Pt(n.glyphHost):t?(n.isContainer,t):UTt(n)||n.attachedThemeGraphic&&Pt(n.attachedThemeGraphic)||fJ.getTheme()}function UTt(n){let t;if(t=n.isContainer?n:n.parent,t){for(;t&&!t.theme;)t=t.parent;return t?(t.theme||t.createTheme(),t.theme.getTheme(t)):fJ.getTheme()}return null}var YTt=function(n,t,e,i){return new(e||(e=Promise))(function(r,s){function a(u){try{l(i.next(u))}catch(h){s(h)}}function o(u){try{l(i.throw(u))}catch(h){s(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof e?h:new e(function(c){c(h)})).then(a,o)}l((i=i.apply(n,t||[])).next())})};let XTt=class extends xp{get previousSibling(){return this._prev}get nextSibling(){return this._next}get children(){return this.getChildren()}get firstChild(){return this._firstChild}get lastChild(){return this._lastChild}get count(){return this._count}get childrenCount(){return this._idMap?this._idMap.size:0}constructor(){super(),this._uid=pn.GenAutoIncrementId(),this._firstChild=null,this._lastChild=null,this.parent=null,this._count=1}forEachChildren(t,e=!1){if(e){let i=this._lastChild,r=0;for(;i;){if(t(i,r++))return;i=i._prev}}else{let i=this._firstChild,r=0;for(;i;){if(t(i,r++))return;i=i._next}}}forEachChildrenAsync(t,e=!1){return YTt(this,void 0,void 0,function*(){if(e){let i=this._lastChild,r=0;for(;i;){let s=t(i,r++);if(s.then&&(s=yield s),s)return;i=i._prev}}else{let i=this._firstChild,r=0;for(;i;){let s=t(i,r++);if(s.then&&(s=yield s),s)return;i=i._next}}})}forEach(t){return this.forEachChildren(t)}appendChild(t,e=!0){if(this._uid===t._uid)return null;if(!e&&t.isAncestorsOf(this))throw new Error("【Node::appendChild】不能将父辈元素append为子元素");return t.parent&&t.parent.removeChild(t),t.parent=this,this._lastChild?(this._lastChild._next=t,t._prev=this._lastChild,this._lastChild=t):(this._firstChild=this._lastChild=t,t._prev=t._next=null),this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this.setCount(t.count),this._structEdit=!0,t}appendChildArrHighPerformance(t,e=!1){return console.error("暂不支持该函数"),t}insertBefore(t,e){if(!e)return this.appendChild(t);if(this._uid===t._uid)return null;if(t.isAncestorsOf(this))throw new Error("【Node::insertBefore】不能将父辈元素insert为子元素");return e.parent!==this?null:(t.parent&&t.parent.removeChild(t),t.parent=this,t._prev=e._prev,e._prev?e._prev._next=t:this._firstChild=t,e._prev=t,t._next=e,this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this._structEdit=!0,this.setCount(t.count),t)}insertAfter(t,e){if(!e)return this.appendChild(t);if(this._uid===t._uid)return null;if(t.isAncestorsOf(this))throw new Error("【Node::insertAfter】不能将父辈元素insert为子元素");return e.parent!==this?null:(t.parent&&t.parent.removeChild(t),t.parent=this,e._next?(e._next._prev=t,t._next=e._next):this._lastChild=t,e._next=t,t._prev=e,this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this._structEdit=!0,this.setCount(t.count),t)}insertInto(t,e){if(!this._ignoreWarn&&this._nodeList&&ri.getInstance().warn("insertIntoKeepIdx和insertInto混用可能会存在错误"),e>=this.childrenCount)return this.appendChild(t);if(this._uid===t._uid)return null;if(t.isAncestorsOf(this))throw new Error("【Node::insertBefore】不能将父辈元素insert为子元素");if(t.parent&&t.parent.removeChild(t),t.parent=this,e===0)t._next=this._firstChild,this._firstChild&&(this._firstChild._prev=t),t._prev=null,this._firstChild=t;else{let i=this._firstChild;for(let r=0;r<e;r++){if(!i)return null;r>0&&(i=i._next)}if(!i)return null;t._next=i._next,t._prev=i,i._next=t,t._next&&(t._next._prev=t)}return this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this._structEdit=!0,this.setCount(t.count),t}insertIntoKeepIdx(t,e){if(this._nodeList||(this._nodeList=this.children),this._nodeList[e]){const s=this._nodeList[e];return this._nodeList.splice(e,0,t),this.insertBefore(t,s)}let i;this._nodeList[e]=t;for(let s=e-1;s>=0&&(i=this._nodeList[s],!i);s--);if(i)return i._next?this.insertBefore(t,i._next):this.appendChild(t);this._ignoreWarn=!0;const r=this.insertInto(t,0);return this._ignoreWarn=!1,r}removeChild(t){if(!this._idMap||!this._idMap.has(t._uid))return null;if(this._idMap.delete(t._uid),this._nodeList){const e=this._nodeList.findIndex(i=>i===t);e>=0&&this._nodeList.splice(e,1)}return t._prev?t._prev._next=t._next:this._firstChild=t._next,t._next?t._next._prev=t._prev:this._lastChild=t._prev,t.parent=null,t._prev=null,t._next=null,this._structEdit=!0,this.setCount(-t.count),t}delete(){this.parent&&this.parent.removeChild(this)}removeAllChild(t){if(!this._idMap)return;this._nodeList&&(this._nodeList.length=0);let e=this._firstChild;for(;e;){const i=e._next;e.parent=null,e._prev=null,e._next=null,e=e._next,e=i}this._firstChild=null,this._lastChild=null,this._idMap.clear(),this._structEdit=!0,this.setCount(1-this._count)}replaceChild(t,e){throw new Error("暂不支持")}find(t,e=!1){let i=null;return this.forEachChildren((r,s)=>!(r===this||!t(r,s))&&(i=r,!0)),e&&this.forEachChildren(r=>{if(r.isContainer){const s=r.find(t,!0);if(s)return i=s,!0}return!1}),i}findAll(t,e=!1){let i=[];return this.forEachChildren((r,s)=>{r!==this&&t(r,s)&&i.push(r)}),e&&this.forEachChildren(r=>{if(r.isContainer){const s=r.findAll(t,!0);s.length&&(i=i.concat(s))}}),i}getElementById(t){return this.find(e=>e.id===t,!0)}findChildById(t){return this.getElementById(t)}findChildByUid(t){return this._idMap&&this._idMap.get(t)||null}getElementsByName(t){return this.findAll(e=>e.name===t,!0)}findChildrenByName(t){return this.getElementsByName(t)}getElementsByType(t){return this.findAll(e=>e.type===t,!0)}getChildByName(t,e=!1){return this.find(i=>i.name===t,e)}getChildAt(t){let e=this._firstChild;if(!e)return null;for(let i=0;i<t;i++){if(!e._next)return null;e=e._next}return e}at(t){return this.getChildAt(t)}containNode(t){if(!this._idMap)return!1;if(this._idMap.has(t._uid))return!0;let e=this._firstChild;for(;e;){if(e.containNode(t))return!0;e=e._next}return!1}getRootNode(){let t=this.parent;for(;t!=null&&t.parent;)t=t.parent;return t||this}hasChildNodes(){return this._firstChild!==null}addChild(t){return this.appendChild(t)}add(t){return this.appendChild(t)}getChildren(){const t=[];let e=this._firstChild;for(;e;)t.push(e),e=e._next;return t}isChildOf(t){return!!this.parent&&this.parent._uid===t._uid}isParentOf(t){return t.isChildOf(this)}isDescendantsOf(t){let e=this.parent;if(!e)return!1;do{if(e._uid===t._uid)return!0;e=e.parent}while(e!==null);return!1}isAncestorsOf(t){return t.isDescendantsOf(this)}getAncestor(t){throw new Error("暂不支持")}setAllDescendantsProps(t,e){let i=this._firstChild;for(;i;)i[t]=e,i.setAllDescendantsProps(t,e),i=i._next}setCount(t){this._count+=t;let e=this.parent;if(e)do e._count+=t,e=e.parent;while(e!==null)}clone(){throw new Error("暂不支持")}cloneTo(t){throw new Error("暂不支持")}getParent(){return this.parent}del(t){return this.removeChild(t)}addEventListener(t,e,i){const r=Si(i,!0)&&i||ae(i)&&i.capture,s=ae(i)&&i.once,a=ft(e)?void 0:e;return t=r?`${t}capture`:t,e=ft(e)?e:e.handleEvent,s?super.once(t,e,a):super.on(t,e,a),this}on(t,e,i){return this.addEventListener(t,e,i)}removeEventListener(t,e,i){const r=Si(i,!0)&&i||ae(i)&&i.capture,s=ft(e)?void 0:e;t=r?`${t}capture`:t,e=ft(e)?e:e.handleEvent;const a=ae(i)&&i.once;return super.off(t,e,s,a),this}off(t,e,i){return this.removeEventListener(t,e,i)}once(t,e,i){return ae(i)?(i.once=!0,this.addEventListener(t,e,i)):this.addEventListener(t,e,{once:!0})}removeAllEventListeners(){return super.removeAllListeners(),this}removeAllListeners(){return this.removeAllEventListeners()}dispatchEvent(t,...e){return super.emit(t.type,t,...e),!t.defaultPrevented}emit(t,e){return this.dispatchEvent(t,e)}release(){this.removeAllListeners()}};class m1{get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get x(){return this.canvas.x}get y(){return this.canvas.y}get canvasX(){return this.canvas.x}get canvasY(){return this.canvas.y}get viewX(){return this.viewport.x}get viewY(){return this.viewport.y}constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=m1.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer={x:0,y:0},this.page={x:0,y:0},this.canvas={x:0,y:0},this.viewport={x:0,y:0},this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}composedPath(){return!this.manager||this.path&&this.path[this.path.length-1]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.composedDetailPath(),this.path}composedDetailPath(){return this.pickParams&&this.pickParams.graphic?(this.detailPath=this.path.slice(),this._composedDetailPath(this.pickParams)):this.detailPath=this.path.slice(),this.detailPath}_composedDetailPath(t){if(t&&t.graphic){const e=this.pickParams.graphic;if(e.stage){const i=e.stage.eventSystem.manager.propagationPath(e);this.detailPath.push(i),this._composedDetailPath(t.params)}}}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.stopPropagation(),this.propagationStopped=!0}initEvent(){}initUIEvent(){}clone(){throw new Error("Method not implemented.")}}class jA extends m1{constructor(){super(...arguments),this.client={x:0,y:0},this.movement={x:0,y:0},this.offset={x:0,y:0},this.global={x:0,y:0},this.screen={x:0,y:0}}get clientX(){return this.client.x}get clientY(){return this.client.y}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,i,r,s,a,o,l,u,h,c,d,p,f,g){throw new Error("Method not implemented.")}}class sa extends jA{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}clone(){var t,e,i;const r=new sa(this.manager);r.eventPhase=r.NONE,r.currentTarget=null,r.path=[],r.detailPath=[],r.target=null,r.nativeEvent=this.nativeEvent,r.originalEvent=this.originalEvent,(t=this.manager)===null||t===void 0||t.copyPointerData(this,r),(e=this.manager)===null||e===void 0||e.copyMouseData(this,r),(i=this.manager)===null||i===void 0||i.copyData(this,r),r.target=this.target,r.path=this.composedPath().slice();const s=this.composedDetailPath();return r.detailPath=s&&s.slice(),r.type=this.type,r}}class Uh extends jA{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}clone(){var t,e,i;const r=new Uh(this.manager);r.eventPhase=r.NONE,r.currentTarget=null,r.path=[],r.detailPath=[],r.target=null,r.nativeEvent=this.nativeEvent,r.originalEvent=this.originalEvent,(t=this.manager)===null||t===void 0||t.copyWheelData(this,r),(e=this.manager)===null||e===void 0||e.copyMouseData(this,r),(i=this.manager)===null||i===void 0||i.copyData(this,r),r.target=this.target,r.path=this.composedPath().slice();const s=this.composedDetailPath();return r.detailPath=s&&s.slice(),r.type=this.type,r}}Uh.DOM_DELTA_PIXEL=0,Uh.DOM_DELTA_LINE=1,Uh.DOM_DELTA_PAGE=2;class v2 extends m1{constructor(t,e){super(),this.type=t,this.detail=e}}const gJ="*",yd=typeof performance=="object"&&performance.now?performance:Date;function ah(n){return n==="mouse"||n==="pen"}class KTt{constructor(t,e){this.dispatch=new xp,this.cursorTarget=null,this.pauseNotify=!1,this.mappingState={trackingData:{}},this.eventPool=new Map,this.onPointerDown=(i,r)=>{if(!(i instanceof sa))return void ri.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const s=this.createPointerEvent(i,i.type,r);if(this.dispatchEvent(s,"pointerdown"),s.pointerType==="touch")this.dispatchEvent(s,"touchstart");else if(ah(s.pointerType)){const a=s.button===2;this.dispatchEvent(s,a?"rightdown":"mousedown")}this.trackingData(i.pointerId).pressTargetsByButton[i.button]=s.composedPath(),this.freeEvent(s)},this.onPointerMove=(i,r)=>{var s,a;if(!(i instanceof sa))return void ri.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const o=this.createPointerEvent(i,i.type,r),l=ah(o.pointerType),u=this.trackingData(i.pointerId),h=this.findMountedTarget(u.overTargets);if(u.overTargets&&h&&h!==this.rootTarget&&h!==o.target){const c=i.type==="mousemove"?"mouseout":"pointerout",d=this.createPointerEvent(i,c,h||void 0);if(this.dispatchEvent(d,"pointerout"),l&&this.dispatchEvent(d,"mouseout"),!o.composedPath().includes(h)){const p=this.createPointerEvent(i,"pointerleave",h||void 0);for(p.eventPhase=p.AT_TARGET;p.target&&!o.composedPath().includes(p.target);)p.currentTarget=p.target,this.notifyTarget(p),l&&this.notifyTarget(p,"mouseleave"),p.target=p.target.parent;this.freeEvent(p)}this.freeEvent(d)}if(h!==o.target){const c=i.type==="mousemove"?"mouseover":"pointerover",d=this.clonePointerEvent(o,c);this.dispatchEvent(d,"pointerover"),l&&this.dispatchEvent(d,"mouseover");let p=h==null?void 0:h.parent;for(;p&&p!==this.rootTarget.parent&&p!==o.target;)p=p.parent;if(!p||p===this.rootTarget.parent){const f=this.clonePointerEvent(o,"pointerenter");f.eventPhase=f.AT_TARGET;let g=f.target;const _=new Set;let v=h;for(;v&&v!==this.rootTarget;)_.add(v),v=v.parent;for(;g&&g!==h&&g!==this.rootTarget.parent;)_.has(g)||(f.currentTarget=g,this.notifyTarget(f),l&&this.notifyTarget(f,"mouseenter")),g=g.parent;this.freeEvent(f)}this.freeEvent(d)}this.dispatchEvent(o,"pointermove"),o.pointerType==="touch"&&this.dispatchEvent(o,"touchmove"),l&&(this.dispatchEvent(o,"mousemove"),this.cursorTarget=o.target,this.cursor=((a=(s=o.target)===null||s===void 0?void 0:s.attribute)===null||a===void 0?void 0:a.cursor)||this.rootTarget.getCursor()),u.overTargets=o.composedPath(),this.freeEvent(o)},this.onPointerOver=(i,r)=>{var s,a;if(!(i instanceof sa))return void ri.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const o=this.trackingData(i.pointerId),l=this.createPointerEvent(i,i.type,r),u=ah(l.pointerType);this.dispatchEvent(l,"pointerover"),u&&this.dispatchEvent(l,"mouseover"),l.pointerType==="mouse"&&(this.cursorTarget=l.target,this.cursor=((a=(s=l.target)===null||s===void 0?void 0:s.attribute)===null||a===void 0?void 0:a.cursor)||this.rootTarget.getCursor());const h=this.clonePointerEvent(l,"pointerenter");for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==this.rootTarget.parent;)h.currentTarget=h.target,this.notifyTarget(h),u&&this.notifyTarget(h,"mouseenter"),h.target=h.target.parent;o.overTargets=l.composedPath(),this.freeEvent(l),this.freeEvent(h)},this.onPointerOut=(i,r)=>{if(!(i instanceof sa))return void ri.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const s=this.trackingData(i.pointerId);if(s.overTargets){const a=ah(i.pointerType),o=this.findMountedTarget(s.overTargets),l=this.createPointerEvent(i,"pointerout",o||void 0);this.dispatchEvent(l),a&&this.dispatchEvent(l,"mouseout");const u=this.createPointerEvent(i,"pointerleave",o||void 0);for(u.eventPhase=u.AT_TARGET;u.target&&u.target!==this.rootTarget.parent;)u.currentTarget=u.target,this.notifyTarget(u),a&&this.notifyTarget(u,"mouseleave"),u.target=u.target.parent;s.overTargets=[],this.freeEvent(l),this.freeEvent(u)}this.cursorTarget=null,this.cursor=""},this.onPointerUp=(i,r)=>{var s;if(!(i instanceof sa))return void ri.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const a=yd.now(),o=this.createPointerEvent(i,i.type,r);if(this.dispatchEvent(o,"pointerup"),o.pointerType==="touch")this.dispatchEvent(o,"touchend");else if(ah(o.pointerType)){const c=o.button===2;this.dispatchEvent(o,c?"rightup":"mouseup")}const l=this.trackingData(i.pointerId),u=this.findMountedTarget(l.pressTargetsByButton[i.button]);let h=u;if(u&&!o.composedPath().includes(u)){let c=u;for(;c&&!o.composedPath().includes(c);){if(o.currentTarget=c,this.notifyTarget(o,"pointerupoutside"),o.pointerType==="touch")this.notifyTarget(o,"touchendoutside");else if(ah(o.pointerType)){const d=o.button===2;this.notifyTarget(o,d?"rightupoutside":"mouseupoutside")}c=c.parent}delete l.pressTargetsByButton[i.button],h=c}if(h){const c=this.clonePointerEvent(o,"click");c.target=h,c.path=[],c.detailPath=[],l.clicksByButton[i.button]||(l.clicksByButton[i.button]={clickCount:0,target:c.target,timeStamp:a});const d=l.clicksByButton[i.button];d.target===c.target&&a-d.timeStamp<((s=this._config.clickInterval)!==null&&s!==void 0?s:200)?++d.clickCount:d.clickCount=1,d.target=c.target,d.timeStamp=a,c.detail=d.clickCount,ah(c.pointerType)?(this.dispatchEvent(c,"click"),d.clickCount===2&&this.dispatchEvent(c,"dblclick")):c.pointerType==="touch"&&(this.dispatchEvent(c,"tap"),d.clickCount===2&&this.dispatchEvent(c,"dbltap")),this.dispatchEvent(c,"pointertap"),this.freeEvent(c)}this.freeEvent(o)},this.onPointerUpOutside=(i,r)=>{if(!(i instanceof sa))return void ri.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const s=this.trackingData(i.pointerId),a=this.findMountedTarget(s.pressTargetsByButton[i.button]),o=this.createPointerEvent(i,i.type,r);if(a){let l=a;for(;l;)o.currentTarget=l,this.notifyTarget(o,"pointerupoutside"),o.pointerType==="touch"?this.notifyTarget(o,"touchendoutside"):ah(o.pointerType)&&this.notifyTarget(o,o.button===2?"rightupoutside":"mouseupoutside"),l=l.parent;delete s.pressTargetsByButton[i.button]}this.freeEvent(o)},this.onWheel=(i,r)=>{if(!(i instanceof Uh))return void ri.getInstance().warn("EventManager cannot map a non-wheel event as a wheel event");const s=this.createWheelEvent(i,r);this.dispatchEvent(s),this.freeEvent(s)},this.rootTarget=t,this.mappingTable={},this._config=Object.assign({clickInterval:200},e),this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((i,r)=>i.priority-r.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){var e,i,r,s,a,o,l;if(!this.rootTarget)return;const u=this.mappingTable[t.type];let h;const c=`${t.canvasX}-${t.canvasY}`;if(!((e=this._prePointTargetCache)===null||e===void 0)&&e[c]&&(!((r=(i=this._prePointTargetCache)===null||i===void 0?void 0:i[c])===null||r===void 0)&&r.stage)&&((a=(s=this._prePointTargetCache)===null||s===void 0?void 0:s[c])===null||a===void 0?void 0:a.stage.renderCount)===((o=this._prePointTargetCache)===null||o===void 0?void 0:o.stageRenderCount)?h=this._prePointTargetCache[c]:(h=this.pickTarget(t.viewX,t.viewY,t),t.pickParams||(this._prePointTargetCache={[c]:h,stageRenderCount:(l=h==null?void 0:h.stage.renderCount)!==null&&l!==void 0?l:-1})),u)for(let d=0,p=u.length;d<p;d++)u[d].fn(t,h);else ri.getInstance().warn(`[EventManager]: Event mapping not defined for ${t.type}`)}propagate(t,e){if(!t.target)return;const i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let r=0,s=i.length-1;r<s;r++)if(t.currentTarget=i[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!t.propagationStopped&&!t.propagationImmediatelyStopped){t.eventPhase=t.BUBBLING_PHASE;for(let r=i.length-2;r>=0;r--)if(t.currentTarget=i[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}propagationPath(t){const e=[t];for(let i=0;i<2048&&t!==this.rootTarget&&t.parent;i++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}notifyTarget(t,e){if(this.pauseNotify)return;e=e??t.type;const i=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,i),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let i=1;i<t.length&&t[i].parent===e;i++)e=t[i];return e}createPointerEvent(t,e,i){var r,s;const a=this.allocateEvent(sa);return this.copyPointerData(t,a),this.copyMouseData(t,a),this.copyData(t,a),a.nativeEvent=t.nativeEvent,a.originalEvent=t,a.target=i||this.pickTarget((r=a.viewX)!==null&&r!==void 0?r:a.global.x,(s=a.viewY)!==null&&s!==void 0?s:a.global.y,a),typeof e=="string"&&(a.type=e),a}createWheelEvent(t,e){var i,r;const s=this.allocateEvent(Uh);return this.copyWheelData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.nativeEvent=t.nativeEvent,s.originalEvent=t,s.target=e||this.pickTarget((i=s.viewX)!==null&&i!==void 0?i:s.global.x,(r=s.viewY)!==null&&r!==void 0?r:s.global.y,s),s}clonePointerEvent(t,e){const i=this.allocateEvent(sa);i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice();const r=t.composedDetailPath();return i.detailPath=r&&r.slice(),i.type=e??i.type,i}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof sa&&e instanceof sa&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof jA&&e instanceof jA&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.ctrlKey=t.ctrlKey,e.shiftKey=t.shiftKey,e.metaKey=t.metaKey,["client","movement","canvas","screen","global","offset","viewport"].forEach(i=>{e[i].x=t[i].x,e[i].y=t[i].y}))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=yd.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.x=t.layer.x,e.layer.y=t.layer.y,e.page.x=t.page.x,e.page.y=t.page.y,e.pickParams=t.pickParams}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){var e;this.eventPool.has(t)||this.eventPool.set(t,[]);const i=((e=this.eventPool.get(t))===null||e===void 0?void 0:e.pop())||new t(this);return i.eventPhase=i.NONE,i.currentTarget=null,i.path=[],i.detailPath=[],i.target=null,i}freeEvent(t){var e;if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventManager!");const i=t.constructor;this.eventPool.has(i)||this.eventPool.set(i,[]),(e=this.eventPool.get(i))===null||e===void 0||e.push(t)}notifyListeners(t,e){const i=t.currentTarget._events[e];if(i)if("fn"in i)i.once&&t.currentTarget.removeEventListener(e,i.fn,{once:!0}),i.fn.call(i.context,t);else for(let r=0,s=i.length;r<s&&!t.propagationImmediatelyStopped;r++)i[r].once&&t.currentTarget.removeEventListener(e,i[r].fn,{once:!0}),i[r].fn.call(i[r].context,t);this.emitDelegation(t,e)}emitDelegation(t,e){const i=t.currentTarget._events[gJ];if(i)if("fn"in i)i.fn.call(i.context,t,e);else for(let r=0,s=i.length;r<s&&!t.propagationImmediatelyStopped;r++)i[r].fn.call(i[r].context,t,e)}pickTarget(t,e,i){let r;const s=this.rootTarget.pick(t,e);return r=s&&s.graphic?s.graphic:s&&s.group?s.group:this.rootTarget.AABBBounds.contains(t,e)?this.rootTarget:null,i&&(i.pickParams=s.params),r}release(){this.dispatch.removeAllListeners(),this.eventPool.clear(),this.rootTarget=null,this.mappingTable=null,this.mappingState=null,this.cursorTarget=null}}const qTt={dispatchEvent(n){var t;if(!(n instanceof m1))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return n.defaultPrevented=!1,n.path=[],n.detailPath&&(n.detailPath=[]),n.target=this,(t=n==null?void 0:n.manager)===null||t===void 0||t.dispatchEvent(n),!n.defaultPrevented},emit(n,t){return this.dispatchEvent(new v2(n,t))}},ZTt={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};class JTt{constructor(t){this.resolution=1,this.onPointerDown=h=>{if(this.supportsTouchEvents&&h.pointerType==="touch")return;const c=this.normalizeToPointerData(h);this.autoPreventDefault&&c[0].isNormalized&&(h.cancelable||!("cancelable"in h))&&h.preventDefault();for(let d=0,p=c.length;d<p;d++){const f=c[d],g=this.bootstrapEvent(this.rootPointerEvent,f);this.manager.mapEvent(g)}this.setCursor(this.manager.cursor,this.manager.cursorTarget)},this.onPointerMove=h=>{if(this.supportsTouchEvents&&h.pointerType==="touch"||this.isEventOutsideOfTargetElement(h))return;const c=this.normalizeToPointerData(h);for(let d=0,p=c.length;d<p;d++){const f=this.bootstrapEvent(this.rootPointerEvent,c[d]);this.manager.mapEvent(f)}this.setCursor(this.manager.cursor,this.manager.cursorTarget)},this.onPointerUp=h=>{if(this.supportsTouchEvents&&h.pointerType==="touch")return;const c=this.isEventOutsideOfTargetViewPort(h)?"outside":"",d=this.normalizeToPointerData(h);for(let p=0,f=d.length;p<f;p++){const g=this.bootstrapEvent(this.rootPointerEvent,d[p]);g.type+=c,this.manager.mapEvent(g)}this.setCursor(this.manager.cursor,this.manager.cursorTarget)},this.onPointerOverOut=h=>{if(this.supportsTouchEvents&&h.pointerType==="touch")return;const c=this.normalizeToPointerData(h);for(let d=0,p=c.length;d<p;d++){const f=this.bootstrapEvent(this.rootPointerEvent,c[d]);this.manager.mapEvent(f)}this.setCursor(this.manager.cursor,this.manager.cursorTarget)},this.onWheel=h=>{const c=this.normalizeWheelEvent(h);this.manager.mapEvent(c)};const{targetElement:e,resolution:i,rootNode:r,global:s,autoPreventDefault:a=!1,clickInterval:o,supportsTouchEvents:l=s.supportsTouchEvents,supportsPointerEvents:u=s.supportsPointerEvents}=t;this.manager=new KTt(r,{clickInterval:o}),this.globalObj=s,this.supportsPointerEvents=u,this.supportsTouchEvents=l,this.supportsMouseEvents=s.supportsMouseEvents,this.applyStyles=s.applyStyles,this.autoPreventDefault=a,this.eventsAdded=!1,this.rootPointerEvent=new sa,this.rootWheelEvent=new Uh,this.cursorStyles={default:"inherit",pointer:"pointer"},this.resolution=i,this.setTargetElement(e)}release(){this.removeEvents(),this.manager&&this.manager.release(),this.domElement=null,this.manager=null,this.globalObj=null}setCursor(t,e){if(!e&&!this.manager.rootTarget.window._handler.canvas.controled)return;t||(t="default");const{applyStyles:i,domElement:r}=this;if(this.currentCursor===t)return;this.currentCursor=t;const s=this.cursorStyles[t];s?typeof s=="string"&&i?r.style.cursor=s:typeof s=="function"?s(t):typeof s=="object"&&i&&Object.assign(r.style,s):i&&It(t)&&!Co(this.cursorStyles,t)&&(r.style.cursor=t)}setTargetElement(t){this.removeEvents(),this.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;const{globalObj:t,domElement:e}=this;this.supportsPointerEvents?(t.getDocument()?(t.getDocument().addEventListener("pointermove",this.onPointerMove,!0),t.getDocument().addEventListener("pointerup",this.onPointerUp,!0)):(e.addEventListener("pointermove",this.onPointerMove,!0),e.addEventListener("pointerup",this.onPointerUp,!0)),e.addEventListener("pointerdown",this.onPointerDown,!0),e.addEventListener("pointerleave",this.onPointerOverOut,!0),e.addEventListener("pointerover",this.onPointerOverOut,!0)):(t.getDocument()?(t.getDocument().addEventListener("mousemove",this.onPointerMove,!0),t.getDocument().addEventListener("mouseup",this.onPointerUp,!0)):(e.addEventListener("mousemove",this.onPointerMove,!0),e.addEventListener("mouseup",this.onPointerUp,!0)),e.addEventListener("mousedown",this.onPointerDown,!0),e.addEventListener("mouseout",this.onPointerOverOut,!0),e.addEventListener("mouseover",this.onPointerOverOut,!0)),this.supportsTouchEvents&&(e.addEventListener("touchstart",this.onPointerDown,!0),e.addEventListener("touchend",this.onPointerUp,!0),e.addEventListener("touchmove",this.onPointerMove,!0)),e.addEventListener("wheel",this.onWheel,{capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;const{globalObj:t,domElement:e}=this;this.supportsPointerEvents?(t.getDocument()?(t.getDocument().removeEventListener("pointermove",this.onPointerMove,!0),t.getDocument().removeEventListener("pointerup",this.onPointerUp,!0)):(e.removeEventListener("pointermove",this.onPointerMove,!0),e.removeEventListener("pointerup",this.onPointerUp,!0)),e.removeEventListener("pointerdown",this.onPointerDown,!0),e.removeEventListener("pointerleave",this.onPointerOverOut,!0),e.removeEventListener("pointerover",this.onPointerOverOut,!0)):(t.getDocument()?(t.getDocument().removeEventListener("mousemove",this.onPointerMove,!0),t.getDocument().removeEventListener("mouseup",this.onPointerUp,!0)):(e.removeEventListener("mousemove",this.onPointerMove,!0),e.removeEventListener("mouseup",this.onPointerUp,!0)),e.removeEventListener("mousedown",this.onPointerDown,!0),e.removeEventListener("mouseout",this.onPointerOverOut,!0),e.removeEventListener("mouseover",this.onPointerOverOut,!0)),this.supportsTouchEvents&&(e.removeEventListener("touchstart",this.onPointerDown,!0),e.removeEventListener("touchend",this.onPointerUp,!0),e.removeEventListener("touchmove",this.onPointerMove,!0)),e.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapToViewportPoint(t){return this.domElement.pointTransform?this.domElement.pointTransform(t.x,t.y):t}mapToCanvasPoint(t){var e,i;const r=(e=this.globalObj)===null||e===void 0?void 0:e.mapToCanvasPoint(t,this.domElement);if(r)return r;let s=0,a=0;if(t.changedTouches){const l=(i=t.changedTouches[0])!==null&&i!==void 0?i:{};s=l.clientX||0,a=l.clientY||0}else s=t.clientX||0,a=t.clientY||0;const o=this.domElement.getBoundingClientRect();return{x:s-o.left,y:a-o.top}}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t.changedTouches&&t.changedTouches.length)for(let i=0,r=t.changedTouches.length;i<r;i++){const s=t.changedTouches[i];Ri(s.button)&&(s.button=0),Ri(s.buttons)&&(s.buttons=1),Ri(s.isPrimary)&&(s.isPrimary=t.touches.length===1&&t.type==="touchstart"),Ri(s.width)&&(s.width=s.radiusX||1),Ri(s.height)&&(s.height=s.radiusY||1),Ri(s.tiltX)&&(s.tiltX=0),Ri(s.tiltY)&&(s.tiltY=0),Ri(s.pointerType)&&(s.pointerType="touch"),Ri(s.pointerId)&&(s.pointerId=s.identifier||0),Ri(s.pressure)&&(s.pressure=s.force||.5),Ri(s.twist)&&(s.twist=0),Ri(s.tangentialPressure)&&(s.tangentialPressure=0),Ri(s.layerX)&&(s.layerX=s.offsetX=s.clientX),Ri(s.layerY)&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=t.type,e.push(s)}else if(this.globalObj.supportsMouseEvents&&(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof PointerEvent))e.push(t);else{const i=t;Ri(i.isPrimary)&&(i.isPrimary=!0),Ri(i.width)&&(i.width=1),Ri(i.height)&&(i.height=1),Ri(i.tiltX)&&(i.tiltX=0),Ri(i.tiltY)&&(i.tiltY=0),Ri(i.pointerType)&&(i.pointerType="mouse"),Ri(i.pointerId)&&(i.pointerId=1),Ri(i.pressure)&&(i.pressure=.5),Ri(i.twist)&&(i.twist=0),Ri(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,e.push(i)}return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;this.transferMouseData(e,t),e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ;const{x:i,y:r}=this.mapToCanvasPoint(t);e.canvas.x=i,e.canvas.y=r,e.global.x=i,e.global.y=r,e.offset.x=i,e.offset.y=r;const{x:s,y:a}=this.mapToViewportPoint(e);return e.viewport.x=s,e.viewport.y=a,e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e);const{x:i,y:r}=this.mapToCanvasPoint(e);t.canvas.x=i,t.canvas.y=r,t.global.x=i,t.global.y=r,t.offset.x=i,t.offset.y=r;const{x:s,y:a}=this.mapToViewportPoint(t);return t.viewport.x=s,t.viewport.y=a,t.isTrusted=e.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=ZTt[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=yd.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.shiftKey=e.shiftKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null}isEventOutsideOfTargetViewPort(t){if(this.isEventOutsideOfTargetElement(t))return!0;if(this.domElement.getViewBox){const e=this.mapToViewportPoint(this.mapToCanvasPoint(t)),i=this.domElement.getViewBox(),r=i.width(),s=i.height();return!(e.x<r&&e.y<s&&e.x>0&&e.y>0)}return!1}isEventOutsideOfTargetElement(t){let e=t.target;return t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]),e!==(this.domElement.getNativeHandler?this.domElement.getNativeHandler().nativeCanvas:this.domElement)}pauseTriggerEvent(){this.manager.pauseNotify=!0}resumeTriggerEvent(){this.manager.pauseNotify=!1}}class NA{constructor(){this.time=0}static Avaliable(){return!0}avaliable(){return NA.Avaliable()}tick(t,e){this.time=Math.max(0,t+this.time),e(this,{once:!0})}tickTo(t,e){this.time=Math.max(0,t),e(this,{once:!0})}release(){this.timerId>0&&(this.timerId=-1)}getTime(){return this.time}}class zA{static Avaliable(){return!0}avaliable(){return zA.Avaliable()}tick(t,e){this.timerId=setTimeout(()=>{e(this)},t)}release(){this.timerId>0&&(clearTimeout(this.timerId),this.timerId=-1)}getTime(){return Date.now()}}class M0{static Avaliable(){return!!wt.global.getRequestAnimationFrame()}avaliable(){return M0.Avaliable()}tick(t,e){wt.global.getRequestAnimationFrame()(()=>{this.released||e(this)})}release(){this.released=!0}getTime(){return Date.now()}}var La;(function(n){n[n.INITIAL=0]="INITIAL",n[n.RUNNING=1]="RUNNING",n[n.PAUSE=2]="PAUSE"})(La||(La={}));class QTt{set mode(t){this._mode!==t&&(this._mode=t,this.setupTickHandler())}get mode(){return this._mode}constructor(t=[]){this.handleTick=(e,i)=>{const{once:r=!1}=i??{};this.ifCanStop()?this.stop():(this._handlerTick(e),r||e.tick(this.interval,this.handleTick))},this._handlerTick=e=>{const i=this.tickerHandler.getTime();let r=0;this.lastFrameTime>=0&&(r=i-this.lastFrameTime),this.lastFrameTime=i,this.status===La.RUNNING&&(this.tickCounts++,this.timelines.forEach(s=>{s.tick(r)}))},this.init(),this.lastFrameTime=-1,this.tickCounts=0,this.timelines=t,this.autoStop=!0}init(){this.interval=NaN,this.status=La.INITIAL,wt.global.hooks.onSetEnv.tap("default-ticker",()=>{this.initHandler()}),wt.global.env&&this.initHandler()}addTimeline(t){this.timelines.push(t)}remTimeline(t){this.timelines=this.timelines.filter(e=>e!==t)}initHandler(){if(this._mode)return null;const t=[{mode:"raf",cons:M0},{mode:"timeout",cons:zA},{mode:"manual",cons:NA}];for(let e=0;e<t.length;e++)if(t[e].cons.Avaliable()){this.mode=t[e].mode;break}return null}setupTickHandler(){let t;switch(this._mode){case"raf":t=new M0;break;case"timeout":t=new zA;break;case"manual":t=new NA;break;default:ri.getInstance().warn("非法的计时器模式"),t=new M0}return!!t.avaliable()&&(this.tickerHandler&&this.tickerHandler.release(),this.tickerHandler=t,!0)}setInterval(t){this.interval=t}getInterval(){return this.interval}setFPS(t){this.setInterval(1e3/t)}getFPS(){return 1e3/this.interval}tick(t){this.tickerHandler.tick(t,e=>{this.handleTick(e,{once:!0})})}tickTo(t){this.tickerHandler.tickTo&&this.tickerHandler.tickTo(t,e=>{this.handleTick(e,{once:!0})})}pause(){return this.status!==La.INITIAL&&(this.status=La.PAUSE,!0)}resume(){return this.status!==La.INITIAL&&(this.status=La.RUNNING,!0)}ifCanStop(){return!!(this.autoStop&&(!this.timelines.length||this.timelines.reduce((t,e)=>t+e.animateCount,0)===0))}start(t=!1){return this.status===La.RUNNING||!this.tickerHandler||!t&&(this.status===La.PAUSE||!this.timelines.length||this.timelines.reduce((e,i)=>e+i.animateCount,0)===0)?!1:(this.status=La.RUNNING,this.tickerHandler.tick(0,this.handleTick),!0)}stop(){this.status=La.INITIAL,this.setupTickHandler(),this.lastFrameTime=-1}}class ke{constructor(){}static linear(t){return t}static none(){return this.linear}static get(t){return t<-1?t=-1:t>1&&(t=1),function(e){return t===0?e:t<0?e*(e*-t+1+t):e*((2-e)*t+(1-t))}}static getPowIn(t){return function(e){return Math.pow(e,t)}}static getPowOut(t){return function(e){return 1-Math.pow(1-e,t)}}static getPowInOut(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}}static getBackIn(t){return function(e){return e*e*((t+1)*e-t)}}static getBackOut(t){return function(e){return--e*e*((t+1)*e+t)+1}}static getBackInOut(t){return t*=1.525,function(e){return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}}static sineIn(t){return 1-Math.cos(t*Math.PI/2)}static sineOut(t){return Math.sin(t*Math.PI/2)}static sineInOut(t){return-(Math.cos(Math.PI*t)-1)/2}static expoIn(t){return t===0?0:Math.pow(2,10*t-10)}static expoOut(t){return t===1?1:1-Math.pow(2,-10*t)}static expoInOut(t){return t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2}static circIn(t){return-(Math.sqrt(1-t*t)-1)}static circOut(t){return Math.sqrt(1- --t*t)}static circInOut(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}static bounceOut(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}static bounceIn(t){return 1-ke.bounceOut(1-t)}static bounceInOut(t){return t<.5?.5*ke.bounceIn(2*t):.5*ke.bounceOut(2*t-1)+.5}static getElasticIn(t,e){return function(i){if(i===0||i===1)return i;const r=e/be*Math.asin(1/t);return-t*Math.pow(2,10*(i-=1))*Math.sin((i-r)*be/e)}}static getElasticOut(t,e){return function(i){if(i===0||i===1)return i;const r=e/be*Math.asin(1/t);return t*Math.pow(2,-10*i)*Math.sin((i-r)*be/e)+1}}static getElasticInOut(t,e){return function(i){const r=e/be*Math.asin(1/t);return(i*=2)<1?t*Math.pow(2,10*(i-=1))*Math.sin((i-r)*be/e)*-.5:t*Math.pow(2,-10*(i-=1))*Math.sin((i-r)*be/e)*.5+1}}}ke.quadIn=ke.getPowIn(2),ke.quadOut=ke.getPowOut(2),ke.quadInOut=ke.getPowInOut(2),ke.cubicIn=ke.getPowIn(3),ke.cubicOut=ke.getPowOut(3),ke.cubicInOut=ke.getPowInOut(3),ke.quartIn=ke.getPowIn(4),ke.quartOut=ke.getPowOut(4),ke.quartInOut=ke.getPowInOut(4),ke.quintIn=ke.getPowIn(5),ke.quintOut=ke.getPowOut(5),ke.quintInOut=ke.getPowInOut(5),ke.backIn=ke.getBackIn(1.7),ke.backOut=ke.getBackOut(1.7),ke.backInOut=ke.getBackInOut(1.7),ke.elasticIn=ke.getElasticIn(1,.3),ke.elasticOut=ke.getElasticOut(1,.3),ke.elasticInOut=ke.getElasticInOut(1,.3*1.5);class mJ{constructor(){this.id=pn.GenAutoIncrementId(),this.animateHead=null,this.animateTail=null,this.animateCount=0,this.paused=!1}addAnimate(t){this.animateTail?(this.animateTail.nextAnimate=t,t.prevAnimate=this.animateTail,this.animateTail=t,t.nextAnimate=null):(this.animateHead=t,this.animateTail=t),this.animateCount++}pause(){this.paused=!0}resume(){this.paused=!1}tick(t){if(this.paused)return;let e=this.animateHead;for(this.animateCount=0;e;)e.status===Or.END?this.removeAnimate(e):e.status===Or.RUNNING||e.status===Or.INITIAL?(this.animateCount++,e.advance(t)):e.status===Or.PAUSED&&this.animateCount++,e=e.nextAnimate}clear(){let t=this.animateHead;for(;t;)t.release(),t=t.nextAnimate;this.animateHead=null,this.animateTail=null,this.animateCount=0}removeAnimate(t,e=!0){t._onRemove&&t._onRemove.forEach(i=>i()),t===this.animateHead?(this.animateHead=t.nextAnimate,t===this.animateTail?this.animateTail=null:this.animateHead.prevAnimate=null):t===this.animateTail?(this.animateTail=t.prevAnimate,this.animateTail.nextAnimate=null):(t.prevAnimate.nextAnimate=t.nextAnimate,t.nextAnimate.prevAnimate=t.prevAnimate),e&&t.release()}}const vJ=new mJ;class ms{constructor(t,e,i,r,s){this.from=t,this.to=e,this.duration=i,this.easing=r,this.params=s,this.updateCount=0}bind(t,e){this.target=t,this.subAnimate=e,this.onBind()}onBind(){}onFirstRun(){}onStart(){}onEnd(){}getEndProps(){return this.to}getFromProps(){return this.from}getMergedEndProps(){var t;const e=this.getEndProps();return e?this._endProps===e?this._mergedEndProps:(this._endProps=e,void(this._mergedEndProps=Object.assign({},(t=this.step.prev.getLastProps())!==null&&t!==void 0?t:{},e))):this.step.prev?this.step.prev.getLastProps():e}update(t,e,i){if(this.updateCount===0){this.onFirstRun();const r=this.step.getLastProps();Object.keys(r).forEach(s=>{this.subAnimate.animate.validAttr(s)&&(i[s]=r[s])})}this.updateCount+=1,this.onUpdate(t,e,i),t&&this.onEnd()}}class tMt extends ms{constructor(t){super(null,null,0,"linear"),this.cb=t}onUpdate(t,e,i){}onStart(){this.cb()}}let HA=class Xv{constructor(t=pn.GenAutoIncrementId(),e=vJ){this.id=t,this.timeline=e,this.status=Or.INITIAL,this.tailAnimate=new j6(this),this.subAnimates=[this.tailAnimate],this.timeScale=1,this.rawPosition=-1,this._startTime=0,this._duringTime=0,this.timeline.addAnimate(this)}setTimeline(t){t!==this.timeline&&(this.timeline.removeAnimate(this,!1),t.addAnimate(this))}getStartTime(){return this._startTime}getDuration(){return this.subAnimates.reduce((t,e)=>t+e.totalDuration,0)}after(t){const e=t.getDuration();return this._startTime=e,this}afterAll(t){let e=-1/0;return t.forEach(i=>{e=ls(i.getDuration(),e)}),this._startTime=e,this}parallel(t){return this._startTime=t.getStartTime(),this}static AddInterpolate(t,e){Xv.interpolateMap.set(t,e)}play(t){if(this.tailAnimate.play(t),this.target){const e=this.target.stage;e&&e.renderNextFrame()}return this.subAnimates.length===1&&this.tailAnimate.totalDuration===t.duration&&this.trySetAttribute(t.getFromProps(),t.mode),this}trySetAttribute(t,e=Xv.mode){t&&e&$g.SET_ATTR_IMMEDIATELY&&this.target.setAttributes&&this.target.setAttributes(t,!1,{type:ji.ANIMATE_PLAY})}runCb(t){const e=new tMt(()=>{t(this,e.step.prev)});return this.tailAnimate.play(e),this}customInterpolate(t,e,i,r,s,a){const o=Xv.interpolateMap.get(t)||Xv.interpolateMap.get("");return!!o&&o(t,e,i,r,s,a)}pause(){this.status===Or.RUNNING&&(this.status=Or.PAUSED)}resume(){this.status===Or.PAUSED&&(this.status=Or.RUNNING)}to(t,e,i,r){if(this.tailAnimate.to(t,e,i,r),this.target){const s=this.target.stage;s&&s.renderNextFrame()}return this}from(t,e,i,r){if(this.tailAnimate.from(t,e,i,r),this.target){const s=this.target.stage;s&&s.renderNextFrame()}return this}wait(t){if(this.tailAnimate.wait(t),this.target){const e=this.target.stage;e&&e.renderNextFrame()}return this}startAt(t){if(this.tailAnimate.startAt(t),this.target){const e=this.target.stage;e&&e.renderNextFrame()}return this}loop(t){if(this.tailAnimate.loop=t,this.target){const e=this.target.stage;e&&e.renderNextFrame()}return this}reversed(t){if(this.tailAnimate.reversed=t,this.target){const e=this.target.stage;e&&e.renderNextFrame()}return this}bounce(t){if(this.tailAnimate.bounce=t,this.target){const e=this.target.stage;e&&e.renderNextFrame()}return this}subAnimate(){const t=new j6(this,this.tailAnimate);return this.tailAnimate=t,this.subAnimates.push(t),t.bind(this.target),this}getStartProps(){return this.subAnimates[0].getStartProps()}getEndProps(){return this.tailAnimate.getEndProps()}depreventAttr(t){this._preventAttrs&&this._preventAttrs.delete(t)}preventAttr(t){this._preventAttrs||(this._preventAttrs=new Set),this._preventAttrs.add(t)}preventAttrs(t){t.forEach(e=>this.preventAttr(e))}validAttr(t){return!this._preventAttrs||!this._preventAttrs.has(t)}bind(t){return this.target=t,this.target.onAnimateBind&&this.target.onAnimateBind(this),this.subAnimates.forEach(e=>{e.bind(t)}),this}advance(t){if(this._duringTime<this._startTime){if(this._duringTime+t*this.timeScale<this._startTime)return void(this._duringTime+=t*this.timeScale);t=this._duringTime+t*this.timeScale-this._startTime,this._duringTime=this._startTime}this.status===Or.INITIAL&&(this.status=Or.RUNNING,this._onStart&&this._onStart.forEach(e=>e())),this.setPosition(this.rawPosition+t*this.timeScale)&&this.status===Or.RUNNING&&(this.status=Or.END,this._onEnd&&this._onEnd.forEach(e=>e()))}setPosition(t){let e,i=0;const r=this.rawPosition,s=this.subAnimates.reduce((o,l)=>o+l.totalDuration,0);t<0&&(t=0);const a=t>=s;if(a&&(t=s),t===r)return a;for(let o=0;o<this.subAnimates.length&&(e=this.subAnimates[o],!(i+e.totalDuration>=t));o++)i+=e.totalDuration,e=void 0;return this.rawPosition=t,e.setPosition(t-i),a}onStart(t){this._onStart||(this._onStart=[]),this._onStart.push(t)}onEnd(t){this._onEnd||(this._onEnd=[]),this._onEnd.push(t)}onRemove(t){this._onRemove||(this._onRemove=[]),this._onRemove.push(t)}onFrame(t){this._onFrame||(this._onFrame=[]),this._onFrame.push(t)}release(){this.status=Or.END}stop(t){t||this.target.onStop(),t==="start"?this.target.onStop(this.getStartProps()):t==="end"?this.target.onStop(this.getEndProps()):this.target.onStop(t),this.release()}};HA.mode=$g.NORMAL,HA.interpolateMap=new Map;class j6{get totalDuration(){return this.calcAttr(),this._totalDuration+this._startAt}constructor(t,e){this.rawPosition=-1,this.position=0,this.loop=0,this.duration=0,this.animate=t,this.stepHead=new N6(0,0,e?Object.assign({},e.stepTail.props):{}),this.stepTail=this.stepHead,this.dirty=!0,this._startAt=0}calcAttr(){this.dirty&&(this._totalDuration=this.duration*(this.loop+1))}bind(t){return this.target=t,this}play(t){let e=t.duration;(e==null||e<0)&&(e=0);const i=t.easing,r=typeof i=="string"?ke[i]:i,s=this._addStep(e,null,r);return s.type=Nf.customAnimate,this._appendProps(t.getEndProps(),s,!1),this._appendCustomAnimate(t,s),this}to(t,e,i,r){(e==null||e<0)&&(e=0);const s=typeof i=="string"?ke[i]:i,a=this._addStep(e,null,s);return a.type=Nf.to,this._appendProps(t,a,!!r&&r.tempProps),a.propKeys||(a.propKeys=Object.keys(a.props)),r&&r.noPreventAttrs||this.target.animates.forEach(o=>{o.id!==this.animate.id&&o.preventAttrs(a.propKeys)}),this}from(t,e,i,r){this.to(t,0,i,r);const s={};this.stepTail.propKeys||(this.stepTail.propKeys=Object.keys(this.stepTail.props)),this.stepTail.propKeys.forEach(a=>{s[a]=this.getLastPropByName(a,this.stepTail)}),this.to(s,e,i,r),this.stepTail.type=Nf.from}startAt(t){return t<0&&(t=0),this._startAt=t,this}getStartProps(){var t;return(t=this.stepHead)===null||t===void 0?void 0:t.props}getEndProps(){return this.stepTail.props}getLastStep(){return this._lastStep}wait(t){if(t>0){const e=this._addStep(+t,null);e.type=Nf.wait,e.prev.customAnimate?e.props=e.prev.customAnimate.getEndProps():e.props=e.prev.props,this.target.onAddStep&&this.target.onAddStep(e)}return this}_addStep(t,e,i){const r=new N6(this.duration,t,e,i);return this.duration+=t,this.stepTail.append(r),this.stepTail=r,r}_appendProps(t,e,i){e.props=i?t:Object.assign({},t);let r=e.prev;const s=e.props;for(e.propKeys||(e.propKeys=Object.keys(e.props)),e.propKeys.forEach(o=>{e.props[o]===void 0&&(e.props[o]=this.target.getDefaultAttribute(o))});r.prev;)r.props&&(r.propKeys||(r.propKeys=Object.keys(r.props)),r.propKeys.forEach(o=>{s[o]===void 0&&(s[o]=r.props[o])})),e.propKeys=Object.keys(e.props),r=r.prev;const a=this.stepHead.props;e.propKeys||(e.propKeys=Object.keys(s)),e.propKeys.forEach(o=>{if(a[o]===void 0){const l=this.animate.getStartProps();a[o]=l[o]=this.target.getComputedAttribute(o)}}),this.target.onAddStep&&this.target.onAddStep(e)}_appendCustomAnimate(t,e){e.customAnimate=t,t.step=e,t.bind(this.target,this)}setPosition(t){var e;const i=this.duration,r=this.loop,s=this.rawPosition;let a,o,l=!1;const u=(e=this._startAt)!==null&&e!==void 0?e:0;if(t<0&&(t=0),t<u)return this.rawPosition=t,!1;if(t-=u,i<=0)return l=!0,l;if(a=Math.floor(t/i),o=t-a*i,l=t>=r*i+i,l&&(o=i,a=r,t=o*a+i),t===s)return l;const h=!this.reversed!=!(this.bounce&&a%2);return h&&(o=i-o),this._deltaPosition=o-this.position,this.position=o,this.rawPosition=t+u,this.updatePosition(l,h),l}updatePosition(t,e){if(!this.stepHead)return;let i=this.stepHead.next;const r=this.position,s=this.duration;if(this.target&&i){let a=i.next;for(;a&&a.position<=r;)i=a,a=i.next;let o=t?s===0?1:r/s:(r-i.position)/i.duration;i.easing&&(o=i.easing(o)),this.tryCallCustomAnimateLifeCycle(i,this._lastStep||(e?this.stepTail:this.stepHead),e),this.updateTarget(i,o,t),this._lastStep=i,this.animate._onFrame&&this.animate._onFrame.forEach(l=>l(i,o))}}tryCallCustomAnimateLifeCycle(t,e,i){if(t!==e)if(i){let r=e.prev;for(;r&&r!==t;)r.customAnimate&&(r.customAnimate.onStart&&r.customAnimate.onStart(),r.customAnimate.onEnd&&r.customAnimate.onEnd()),r=t.prev;e&&e.customAnimate&&e.customAnimate.onEnd&&e.customAnimate.onEnd(),t&&t.customAnimate&&t.customAnimate.onStart&&t.customAnimate.onStart()}else{let r=e.next;for(;r&&r!==t;)r.customAnimate&&(r.customAnimate.onStart&&r.customAnimate.onStart(),r.customAnimate.onEnd&&r.customAnimate.onEnd()),r=r.next;e&&e.customAnimate&&e.customAnimate.onEnd&&e.customAnimate.onEnd(),t&&t.customAnimate&&t.customAnimate.onStart&&t.customAnimate.onStart()}}getLastPropByName(t,e){let i=e.prev;for(;i;){if(i.props&&i.props[t]!==void 0)return i.props[t];if(i.customAnimate){const r=i.customAnimate.getEndProps()[t];if(r!==void 0)return r}i=i.prev}return ri.getInstance().warn("未知错误，step中找不到属性"),e.props[t]}updateTarget(t,e,i){t.props==null&&t.customAnimate==null||this.target.onStep(this,this.animate,t,e,i)}}class N6{constructor(t,e,i,r){this.duration=e,this.position=t,this.props=i,this.easing=r}append(t){t.prev=this,t.next=this.next,this.next=t}getLastProps(){let t=this.prev;for(;t;){if(t.props)return t.props;if(t.customAnimate)return t.customAnimate.getMergedEndProps();t=t.prev}return null}}const z6={duration:200,easing:"cubicOut"},Hf={duration:1e3,easing:"quadInOut"};var H6;(function(n){n[n.Top=1]="Top",n[n.Right=2]="Right",n[n.Bottom=4]="Bottom",n[n.Left=8]="Left",n[n.ALL=15]="ALL"})(H6||(H6={}));const Hl=[!1,!1,!1,!1],eMt=n=>{var t;let e=!0;if(Si(n,!0)){for(let i=0;i<4;i++)Hl[i]=n,e&&(e=!((t=Hl[i])!==null&&t!==void 0&&!t));e=n}else if(Array.isArray(n))for(let i=0;i<4;i++)Hl[i]=!!n[i],e&&(e=!!Hl[i]);else Hl[0]=!1,Hl[1]=!1,Hl[2]=!1,Hl[3]=!1;return{isFullStroke:e,stroke:Hl}},bv=[0,0,0,0],br=n=>n?ut(n)?n.length===0?0:n.length===1?n[0]:n.length===2?(bv[0]=n[0],bv[2]=n[0],bv[1]=n[1],bv[3]=n[1],bv):n:n:0,Xp=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],xx=[1,2,3,0,1,2,3,0];function fE(n,t,e,i){for(;n>=be;)n-=be;for(;n<0;)n+=be;for(;n>t;)t+=be;Xp[0].x=e,Xp[1].y=e,Xp[2].x=-e,Xp[3].y=-e;const r=Math.ceil(n/za)%4,s=Math.ceil(t/za)%4;if(i.add(ni(n)*e,He(n)*e),i.add(ni(t)*e,He(t)*e),r!==s||t-n>Qe){let a=!1;for(let o=0;o<xx.length;o++)if(a||r!==xx[o]){if(a&&s===xx[o])break;if(a){const l=Xp[xx[o]];i.add(l.x,l.y)}}else{a=!0;const l=Xp[r];i.add(l.x,l.y)}}}function LI(n,t,e){const{x:i,y:r}=j7(n.x,n.y,t.x,t.y,e),{x:s,y:a}=j7(n.x1,n.y1,t.x1,t.y1,e),o=new Qi(i,r,s,a);return o.defined=t.defined,o}function H3(n,t,e){if(!n||!t)return[];Array.isArray(n)||(n=[n]),Array.isArray(t)||(t=[t]);let i=[];if(n.length>t.length){i=t.map(r=>{const s=new Qi(r.x,r.y,r.x1,r.y1);return s.defined=r.defined,s});for(let r=0;r<t.length;r++)i[r]=LI(n[r],t[r],e)}else{i=t.map(r=>{const s=new Qi(r.x,r.y,r.x1,r.y1);return s.defined=r.defined,s});for(let r=0;r<n.length;r++)i[r]=LI(n[r],t[r],e)}return i}const iMt=["x","y","dx","dy","scaleX","scaleY","angle","anchor","postMatrix","scrollX","scrollY"],nMt=n=>iMt.includes(n);function Sx(n,t){if(ut(n)){let e;for(let i=0;i<n.length&&e===void 0;i++)e=n[i][t];return e}return n[t]}class _2{constructor(t=_2.TimeOut){this.durations=[],this.timeout=t,this.lastDate=0,this.durationsListThreshold=30}call(t){return this.lastDate=Date.now(),setTimeout(()=>{this.appendDuration(Date.now()-this.lastDate),t(0)},this.timeout,!0)}clear(t){clearTimeout(t)}appendDuration(t){this.durations.push(t),this.durations.length>this.durationsListThreshold&&this.durations.shift(),this.timeout=Math.min(Math.max(this.durations.reduce((e,i)=>e+i,0)/this.durations.length,1e3/60),1e3/30)}}_2.TimeOut=1e3/60;const V6=new _2,au=(n,t)=>It(n)&&n[n.length-1]==="%"?t*(Number.parseFloat(n.substring(0,n.length-1))/100):n;class rMt extends ms{constructor(t,e,i,r,s){super(t,e,i,r,s)}getEndProps(){return this.valid===!1?{}:{text:this.to}}onBind(){var t,e,i,r,s,a,o,l;this.fromNumber=Mt((t=this.from)===null||t===void 0?void 0:t.text)?(e=this.from)===null||e===void 0?void 0:e.text:Number.parseFloat((i=this.from)===null||i===void 0?void 0:i.text),this.toNumber=Mt((r=this.to)===null||r===void 0?void 0:r.text)?(s=this.to)===null||s===void 0?void 0:s.text:Number.parseFloat((a=this.to)===null||a===void 0?void 0:a.text),Number.isFinite(this.toNumber)||(this.fromNumber=0),Number.isFinite(this.toNumber)||(this.valid=!1),this.valid!==!1&&(this.decimalLength=(l=(o=this.params)===null||o===void 0?void 0:o.fixed)!==null&&l!==void 0?l:Math.max(zg(this.fromNumber),zg(this.toNumber)))}onEnd(){}onUpdate(t,e,i){this.valid!==!1&&(i.text=t?this.toNumber:(this.fromNumber+(this.toNumber-this.fromNumber)*e).toFixed(this.decimalLength))}}var W6;(function(n){n[n.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",n[n.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",n[n.TOP_TO_BOTTOM=2]="TOP_TO_BOTTOM",n[n.BOTTOM_TO_TOP=3]="BOTTOM_TO_TOP",n[n.STROKE=4]="STROKE"})(W6||(W6={}));class _J extends ms{constructor(t,e,i,r,s){var a,o;super(t,e,i,r,s),this.newPointAnimateType=(a=s==null?void 0:s.newPointAnimateType)!==null&&a!==void 0?a:"grow",this.clipRangeByDimension=(o=s==null?void 0:s.clipRangeByDimension)!==null&&o!==void 0?o:"x"}onBind(){var t,e;const i=(t=this.from)===null||t===void 0?void 0:t.points,r=(e=this.to)===null||e===void 0?void 0:e.points;this.fromPoints=i?Array.isArray(i)?i:[i]:[],this.toPoints=r?Array.isArray(r)?r:[r]:[];const s=new Map;this.fromPoints.forEach(c=>{c.context&&s.set(c.context,c)});let a,o,l=1/0,u=-1/0;for(let c=0;c<this.toPoints.length;c+=1)if(s.has(this.toPoints[c].context)){l=c,a=s.get(this.toPoints[c].context);break}for(let c=this.toPoints.length-1;c>=0;c-=1)if(s.has(this.toPoints[c].context)){u=c,o=s.get(this.toPoints[c].context);break}this.newPointAnimateType==="clip"&&this.toPoints.length!==0&&(Number.isFinite(u)?(this.clipRange=this.toPoints[u][this.clipRangeByDimension]/this.toPoints[this.toPoints.length-1][this.clipRangeByDimension],st(this.clipRange)?this.clipRange=Zi(this.clipRange,0,1):this.clipRange=0):this.clipRange=0);let h=this.toPoints[0];this.interpolatePoints=this.toPoints.map((c,d)=>{const p=s.get(c.context);return p?(h=p,[p,c]):this.newPointAnimateType==="appear"||this.newPointAnimateType==="clip"?[c,c]:d<l&&a?[a,c]:d>u&&o?[o,c]:[h,c]}),this.points=this.interpolatePoints.map(c=>{const d=c[0],p=c[1],f=new Qi(d.x,d.y,d.x1,d.y1);return f.defined=p.defined,f.context=p.context,f})}onUpdate(t,e,i){this.points=this.points.map((r,s)=>{const a=LI(this.interpolatePoints[s][0],this.interpolatePoints[s][1],e);return a.context=r.context,a}),this.clipRange&&(i.clipRange=this.clipRange+(1-this.clipRange)*e),i.points=this.points}}class yJ extends ms{constructor(t,e,i,r,s){super(null,null,i,r,s),this.clipFromAttribute=t,this.clipToAttribute=e,this._group=s==null?void 0:s.group,this._clipGraphic=s==null?void 0:s.clipGraphic}onBind(){this._group&&this._clipGraphic&&(this._lastClip=this._group.attribute.clip,this._lastPath=this._group.attribute.path,this._group.setAttributes({clip:!0,path:[this._clipGraphic]},!1,{type:ji.ANIMATE_BIND}))}onEnd(){this._group&&this._group.setAttributes({clip:this._lastClip,path:this._lastPath},!1,{type:ji.ANIMATE_END})}onUpdate(t,e,i){if(!this._clipGraphic)return;const r={};Object.keys(this.clipFromAttribute).forEach(s=>{r[s]=this.clipFromAttribute[s]+(this.clipToAttribute[s]-this.clipFromAttribute[s])*e}),this._clipGraphic.setAttributes(r,!1,{type:ji.ANIMATE_UPDATE,animationState:{ratio:e,end:t}})}}class sMt extends yJ{constructor(t,e,i,r,s){var a,o,l,u,h,c,d,p,f,g,_,v;const y=(o=(a=s==null?void 0:s.group)===null||a===void 0?void 0:a.attribute)!==null&&o!==void 0?o:{},b=(l=y.width)!==null&&l!==void 0?l:0,S=(u=y.height)!==null&&u!==void 0?u:0,A=(h=s==null?void 0:s.animationType)!==null&&h!==void 0?h:"in",w=(c=s==null?void 0:s.startAngle)!==null&&c!==void 0?c:0,C=(d=s==null?void 0:s.orient)!==null&&d!==void 0?d:"clockwise";let k=0,M=0;C==="anticlockwise"?(M=A==="in"?w+2*Math.PI:w,M=w+2*Math.PI):(k=w,M=A==="out"?w+2*Math.PI:w);const P=wt.graphicService.creator.arc({x:(f=(p=s==null?void 0:s.center)===null||p===void 0?void 0:p.x)!==null&&f!==void 0?f:b/2,y:(_=(g=s==null?void 0:s.center)===null||g===void 0?void 0:g.y)!==null&&_!==void 0?_:S/2,outerRadius:(v=s==null?void 0:s.radius)!==null&&v!==void 0?v:(b+S)/2,innerRadius:0,startAngle:k,endAngle:M,fill:!0});let E,I;C==="anticlockwise"?(E={startAngle:w+2*Math.PI},I={startAngle:w}):(E={endAngle:w},I={endAngle:w+2*Math.PI}),super(A==="in"?E:I,A==="in"?I:E,i,r,{group:s==null?void 0:s.group,clipGraphic:P})}}class $6 extends yJ{constructor(t,e,i,r,s){var a,o,l,u,h,c,d,p,f;const g=(o=(a=s==null?void 0:s.group)===null||a===void 0?void 0:a.attribute)!==null&&o!==void 0?o:{},_=(u=(l=s==null?void 0:s.width)!==null&&l!==void 0?l:g.width)!==null&&u!==void 0?u:0,v=(c=(h=s==null?void 0:s.height)!==null&&h!==void 0?h:g.height)!==null&&c!==void 0?c:0,y=(d=s==null?void 0:s.animationType)!==null&&d!==void 0?d:"in",b=(p=s==null?void 0:s.direction)!==null&&p!==void 0?p:"x",S=(f=s==null?void 0:s.orient)!==null&&f!==void 0?f:"positive",A=wt.graphicService.creator.rect({x:0,y:0,width:y==="in"&&b==="x"?0:_,height:y==="in"&&b==="y"?0:v,fill:!0});let w={},C={};b==="y"?S==="negative"?(w={y:v,height:0},C={y:0,height:v}):(w={height:0},C={height:v}):S==="negative"?(w={x:_,width:0},C={x:0,width:_}):(w={width:0},C={width:_}),super(y==="in"?w:C,y==="in"?C:w,i,r,{group:s==null?void 0:s.group,clipGraphic:A})}}class aMt extends ms{onStart(){const{center:t,r:e}=typeof this.params=="function"?this.params():this.params,i=this.target.getComputedAttribute("x"),r=this.target.getComputedAttribute("y"),s=this.target.getComputedAttribute("z"),a=Math.acos((r-t.y)/e);let o=Math.acos((i-t.x)/e/Math.sin(a));s-t.z<0&&(o=be-o),this.theta=o,this.phi=a}onBind(){}onEnd(){}onUpdate(t,e,i){if(this.phi==null||this.theta==null)return;const{center:r,r:s,cb:a}=typeof this.params=="function"?this.params():this.params,o=2*Math.PI*e,l=this.theta+o,u=this.phi,h=s*Math.sin(u)*Math.cos(l)+r.x,c=s*Math.cos(u)+r.y,d=s*Math.sin(u)*Math.sin(l)+r.z;for(i.x=h,i.y=c,i.z=d,i.alpha=l+Qe/2;i.alpha>be;)i.alpha-=be;i.alpha=be-i.alpha,i.zIndex=-1e4*i.z,a&&a(i)}}class oMt extends ms{getEndProps(){return{}}onBind(){this.target.setTheme({common:{opacity:1}})}onEnd(){this.target.setTheme({common:{opacity:0}})}onUpdate(t,e,i){this.target.setTheme({common:{opacity:1-e}})}}class lMt extends ms{constructor(t,e){super(null,null,t,"linear"),this.customAnimates=e}initAnimates(){this.customAnimates.forEach(t=>{t.step=this.step,t.subAnimate=this.subAnimate,t.target=this.target})}getEndProps(){const t={};return this.customAnimates.forEach(e=>{Object.assign(t,e.getEndProps())}),t}onBind(){this.initAnimates(),this.customAnimates.forEach(t=>{t.onBind()})}onEnd(){this.customAnimates.forEach(t=>{t.onEnd()})}onStart(){this.customAnimates.forEach(t=>{t.onStart()})}onUpdate(t,e,i){this.updating||(this.updating=!0,this.customAnimates.forEach(r=>{const s=r.easing;e=(typeof s=="string"?ke[s]:s)(e),r.onUpdate(t,e,i)}),this.updating=!1)}}function G6(n,t,e,i,r,s){const a=(t-n)*r+n,o=(e-t)*r+t,l=(i-e)*r+e,u=(o-a)*r+a,h=(l-o)*r+o,c=(h-u)*r+u;s[0]=n,s[1]=a,s[2]=u,s[3]=c,s[4]=c,s[5]=h,s[6]=l,s[7]=i}function uMt(n,t){const e=n.length,i=t.length;if(e===i)return[n,t];const r=[],s=[],a=e<i?n:t,o=Math.min(e,i),l=Math.abs(i-e)/6,u=(o-2)/6,h=Math.ceil(l/u),c=[a[0],a[1]];let d=l;for(let p=2;p<o;p+=6){let f=a[p-2],g=a[p-1],_=a[p],v=a[p+1],y=a[p+2],b=a[p+3];const S=a[p+4],A=a[p+5];if(d<=0){c.push(_,v,y,b,S,A);continue}const w=Math.min(d,h)+1;for(let C=1;C<=w;C++){const k=C/w;G6(f,_,y,S,k,r),G6(g,v,b,A,k,s),f=r[3],g=s[3],c.push(r[1],s[1],r[2],s[2],f,g),_=r[5],v=s[5],y=r[6],b=s[6]}d-=w-1}return a===n?[c,t]:[n,c]}function U6(n,t){const e=n||t,i=e.length,r=e[i-2],s=e[i-1],a=[];for(let o=0;o<t.length;o+=2)a[o]=r,a[o+1]=s;return a}function hMt(n){const t=[],e=n.length;for(let i=0;i<e;i+=2)t[i]=n[e-i-2],t[i+1]=n[e-i-1];return t}function Y6(n){let t=0,e=0,i=0;const r=n.length;for(let s=0,a=r-2;s<r;a=s,s+=2){const o=n[a],l=n[a+1],u=n[s],h=n[s+1],c=o*h-u*l;t+=c,e+=(o+u)*c,i+=(l+h)*c}return t===0?[n[0]||0,n[1]||0,0]:[e/t/3,i/t/3,t]}function cMt(n,t,e,i){const r=(n.length-2)/6;let s=1/0,a=0;const o=n.length,l=o-2;for(let u=0;u<r;u++){const h=6*u;let c=0;for(let d=0;d<o;d+=2){const p=d===0?h:(h+d-2)%l+2,f=n[p]-e[0],g=n[p+1]-e[1],_=t[d]-i[0]-f,v=t[d+1]-i[1]-g;c+=_*_+v*v}c<s&&(s=c,a=u)}return a}function dMt(n,t,e,i){const r=[];let s;for(let a=0;a<n.length;a++){let o=n[a];const l=t[a],u=Y6(o),h=Y6(l);s==null&&(s=u[2]<0!=h[2]<0);const c=[],d=[];let p=0,f=1/0;const g=[],_=o.length;s&&(o=hMt(o));const v=6*cMt(o,l,u,h),y=_-2;for(let b=0;b<y;b+=2){const S=(v+b)%y+2;c[b+2]=o[S]-u[0],c[b+3]=o[S+1]-u[1]}if(c[0]=o[v]-u[0],c[1]=o[v+1]-u[1],e>0){const b=i/e;for(let S=-i/2;S<=i/2;S+=b){const A=Math.sin(S),w=Math.cos(S);let C=0;for(let k=0;k<o.length;k+=2){const M=c[k],P=c[k+1],E=l[k]-h[0],I=l[k+1]-h[1],D=E*w-I*A,N=E*A+I*w;g[k]=D,g[k+1]=N;const O=D-M,L=N-P;C+=O*O+L*L}if(C<f){f=C,p=S;for(let k=0;k<g.length;k++)d[k]=g[k]}}}r.push({from:c,to:d,fromCp:u,toCp:h,rotation:-p})}return r}function pMt(n,t){let e,i;const r=[],s=[];for(let a=0;a<Math.max(n.length,t.length);a++){const o=n[a],l=t[a];let u,h;o?l?([u,h]=uMt(o,l),e=u,i=h):(h=U6(i,o),u=o):(u=U6(e,l),h=l),r.push(u),s.push(h)}return[r,s]}const Vl=(n,t,e,i,r)=>{Ur(t,i)&&Ur(e,r)||n.push(t,e,i,r,i,r)};function DI(n){const t=n.commandList,e=[];let i,r=0,s=0,a=0,o=0;const l=(p,f)=>{i&&i.length>2&&e.push(i),i=[p,f]};let u,h,c,d;for(let p=0,f=t.length;p<f;p++){const g=t[p],_=p===0;switch(_&&(a=r=g[1],o=s=g[2],[ve.L,ve.C,ve.Q].includes(g[0])&&(i=[a,o])),g[0]){case ve.M:r=a=g[1],s=o=g[2],l(a,o);break;case ve.L:u=g[1],h=g[2],Vl(i,r,s,u,h),r=u,s=h;break;case ve.C:i.push(g[1],g[2],g[3],g[4],r=g[5],s=g[6]);break;case ve.Q:u=g[1],h=g[2],c=g[3],d=g[4],i.push(r+2/3*(u-r),s+2/3*(h-s),c+2/3*(u-c),d+2/3*(h-d),c,d),r=c,s=d;break;case ve.A:{const v=g[1],y=g[2],b=g[3],S=b,A=g[4],w=g[5],C=!!g[6];u=Math.cos(A)*b+v,h=Math.sin(A)*b+y,_?(a=u,o=h,l(a,o)):Vl(i,r,s,u,h),r=Math.cos(w)*b+v,s=Math.sin(w)*b+y;const k=(C?-1:1)*Math.PI/2;for(let M=A;C?M>w:M<w;M+=k){const P=C?Math.max(M+k,w):Math.min(M+k,w);gS(i,M,P,v,y,b,S)}break}case ve.E:{const v=g[1],y=g[2],b=g[3],S=g[4],A=g[5],w=g[6],C=g[7]+w,k=!!g[8],M=!Ur(A,0),P=Math.cos(A),E=Math.sin(A);let I=Math.cos(w)*b,D=Math.sin(w)*S;M?(u=I*P-D*E+v,h=I*E+D*P+y):(u=I+v,h=D+y),_?(a=u,o=h,l(a,o)):Vl(i,r,s,u,h),I=Math.cos(C)*b,D=Math.sin(C)*S,M?(r=I*P-D*E+v,s=I*E+D*P+y):(r=I+v,s=D+y);const N=(k?-1:1)*Math.PI/2;for(let O=w;k?O>C:O<C;O+=N){const L=k?Math.max(O+N,C):Math.min(O+N,C);if(gS(i,O,L,v,y,b,S),M){const H=i.length;for(let j=H-6;j<=H-1;j+=2)I=i[j],D=i[j+1],i[j]=(I-v)*P-(D-y)*E+v,i[j+1]=(I-v)*E+(D-y)*P+y}}break}case ve.R:a=r=g[1],o=s=g[2],u=a+g[3],h=o+g[4],l(u,o),Vl(i,u,o,u,h),Vl(i,u,h,a,h),Vl(i,a,h,a,o),Vl(i,a,o,u,o);break;case ve.AT:{const v=g[1],y=g[2],b=g[3],S=g[4],A=g[5],w=Ni.distancePP({x:r,y:s},{x:v,y}),C=Ni.distancePP({x:b,y:S},{x:v,y}),k=((r-v)*(b-v)+(s-y)*(S-y))/(w*C),M=A/Math.sin(k/2),P=(r+b-2*v)/2,E=(s+S-2*y)/2,I=Ni.distancePP({x:P,y:E},{x:0,y:0}),D=v+M*P/I,N=b+M*E/I,O=Math.sqrt(M*M-A*A);a=v+O*(r-v)/w,o=y+O*(s-y)/w,Vl(i,r,s,a,o),r=v+O*(b-v)/C,s=y+O*(S-y)/C;const L=bA({x:D,y:N},{x:a,y:o}),H=bA({x:D,y:N},{x:r,y:s});gS(i,L,H,D,N,A,A);break}case ve.Z:i&&Vl(i,r,s,a,o),r=a,s=o}}return i&&i.length>2&&e.push(i),e}function X6(n,t){for(let e=0;e<n.length;e++){const i=n[e];for(let r=0;r<i.length;r+=2){const s=i[r],a=i[r+1],o={x:s,y:a};t.transformPoint({x:s,y:a},o),i[r]=o.x,i[r+1]=o.y}}}function fMt(n){const t=new En;for(let e=0;e<n.length;e++){const i=n[e];if(i.length>2){t.moveTo(i[0],i[1]);for(let r=2;r<i.length;r+=6)t.bezierCurveTo(i[r],i[r+1],i[r+2],i[r+3],i[r+4],i[r+5])}}return t}const bJ=n=>{if(!n)return{x:0,y:0,width:0,height:0};let t=F(n.width)?n.x1-n.x:n.width,e=F(n.height)?n.y1-n.y:n.height,i=0,r=0;return t<0?(i=t,t=-t):Number.isNaN(t)&&(t=0),e<0?(r=e,e=-e):Number.isNaN(e)&&(e=0),{x:i,y:r,width:t,height:e}};function V3(n,t,e){const i=n/t;let r,s;n>=t?(s=Math.ceil(Math.sqrt(e*i)),r=Math.floor(e/s),r===0&&(r=1,s=e)):(r=Math.ceil(Math.sqrt(e/i)),s=Math.floor(e/r),s===0&&(s=1,r=e));const a=[];for(let l=0;l<r;l++)a.push(s);const o=e-r*s;if(o>0)for(let l=0;l<o;l+=s)l+s<o?a.push(s):a.push(o-l);return a}const gMt=(n,t)=>{const{width:e,height:i}=bJ(n.attribute),r=V3(e,i,t),s=[],a=i/r.length;for(let o=0,l=r.length;o<l;o++){const u=r[o],h=e/u;for(let c=0;c<u;c++)s.push({x:0+c*h,y:0+o*a,width:h,height:a})}return s},mMt=(n,t)=>{const e=n.getParsedAngle(),i=e.startAngle,r=e.endAngle,s=n.getComputedAttribute("innerRadius"),a=n.getComputedAttribute("outerRadius"),o=Math.abs(i-r),l=Math.abs(a-s),u=V3(o*(s+a)/2,l,t),h=[],c=l/u.length,d=a>=s?1:-1,p=r>=i?1:-1;for(let f=0,g=u.length;f<g;f++){const _=u[f],v=o/_;for(let y=0;y<_;y++)h.push({innerRadius:a-c*f*d,outerRadius:a-c*(f+1)*d,startAngle:i+v*y*p,endAngle:i+v*(y+1)*p})}return h},vMt=(n,t)=>{const e=n.getComputedAttribute("startAngle"),i=n.getComputedAttribute("endAngle"),r=n.getComputedAttribute("radius"),s=Math.abs(e-i),a=V3(s*r,r,t),o=[],l=s/a[0],u=r/a.length,h=i>=e?1:-1;for(let c=0,d=a.length;c<d;c++)for(let p=0,f=a[c];p<f;p++)o.push({innerRadius:u*c,outerRadius:u*(c+1),startAngle:e+l*p*h,endAngle:e+l*(p+1)*h});return o},K6=(n,t)=>{const e=n.filter(o=>o.defined!==!1&&Mt(o.x)&&Mt(o.y));if(e.length===0)return[];if(e.length===1)return new Array(t).fill(0).map(o=>e[0]);const i=[];if(t<=e.length){const o=e.length/t;let l=0,u=0;for(;l<t;)i.push(e[Math.floor(u)]),u+=o,l++;return i}const r=t-e.length,s=1/(r/(e.length-1)+1);let a=0;for(let o=0,l=n.length;o<l;o++)if(i.push(n[o]),o<l-1){let u=s;const h=n[o].x,c=n[o].y,d=n[o+1].x,p=n[o+1].y;for(;u<1&&a<r;)i.push({x:h+(d-h)*u,y:c+(p-c)*u}),u+=s,a+=1}return i},_Mt=(n,t)=>{var e,i;const r=n.attribute;let s=r.points;const a=r.segments;s||(s=a.reduce((h,c)=>{var d;return h.concat((d=c.points)!==null&&d!==void 0?d:[])},[]));const o=s.filter(h=>h.defined!==!1&&Mt(h.x)&&Mt(h.y));if(!o.length)return[];const l=[];o.forEach(h=>{l.push({x:h.x,y:h.y})});for(let h=o.length-1;h>=0;h--){const c=o[h];l.push({x:(e=c.x1)!==null&&e!==void 0?e:c.x,y:(i=c.y1)!==null&&i!==void 0?i:c.y})}const u=[];return oy(s,t,u),u},yMt=(n,t)=>{const e=n.attribute,i=e.points;if(i)return K6(i,t);if(e.segments){const r=e.segments.reduce((s,a)=>{var o;return s.concat((o=a.points)!==null&&o!==void 0?o:[])},[]);return K6(r,t)}return[]};function bMt(n,t){return n[0]*t[1]-n[1]*t[0]}const BI=n=>n.map(t=>({x:t.x,y:t.y})),q6=(n,t,e)=>{const i=n.length,r=[];for(let c=0;c<i;c++){const d=n[c],p=c===i-1?n[0]:n[c+1],f=Gq([t.x,t.y],[e.x,e.y],[d.x,d.y],[p.x,p.y]);f&&typeof f!="boolean"&&r.push({dot:bMt([f[0]-t.x,f[1]-t.x],[e.x-t.x,e.y-t.x]),point:{x:f[0],y:f[1]},edgeIndex:c})}if(r.length<2)return[BI(n),BI(n)];r.sort((c,d)=>c.dot-d.dot);let s=r[0],a=r[r.length-1];s.edgeIndex>a.edgeIndex&&([s,a]=[a,s]);const o=s.point,l=a.point,u=[{x:o.x,y:o.y}];for(let c=s.edgeIndex+1;c<=a.edgeIndex;c++)u.push({x:n[c].x,y:n[c].y});u.push({x:l.x,y:l.y});const h=[{x:l.x,y:l.y}];for(let c=a.edgeIndex+1,d=s.edgeIndex+i;c<=d;c++){const p=n[c%i];h.push({x:p.x,y:p.y})}return h.push({x:o.x,y:o.y}),[u,h]},xMt=n=>{const t=new Fn;n.forEach(s=>{t.add(s.x,s.y)});const e=t.width(),i=t.height();if(e>=i){const s=t.x1+e/2;return q6(n,{x:s,y:t.y1},{x:s,y:t.y2})}const r=t.y1+i/2;return q6(n,{x:t.x1,y:r},{x:t.x2,y:r})},oy=(n,t,e)=>{if(t===1)e.push({points:n});else{const i=Math.floor(t/2),r=xMt(n);oy(r[0],i,e),oy(r[1],t-i,e)}},SMt=(n,t)=>{const e=n.attribute.points;if(!e||!e.length)return[];if(t===1)return[{points:BI(e)}];const i=[];return oy(e,t,i),i},AMt=(n,t)=>{const e=n.getParsedPathShape(),i=DI(e);if(!i.length||t<0)return[];const r=i.length;if(i.length>=t){const l=[],u=Math.floor(i.length/t);for(let h=0;h<t;h++){const c=i.slice(h*u,h===t-1?r:(h+1)*u);l.push({path:fMt(c)})}return l}const s=[],a=Math.floor(t/r);let o=t;for(let l=0;l<r;l++){const u=[];for(let h=2,c=i[l].length;h<c;h+=2)u.push({x:i[0][h],y:i[0][h+1]});oy(u,l===r-1?o:a,s),o-=a}return s};var Yr;(function(n){n[n.Color255=0]="Color255",n[n.Color1=1]="Color1"})(Yr||(Yr={}));class Li{static Get(t,e=Yr.Color1,i=[0,0,0,1]){if(e===Yr.Color1){const a=Li.store1[t];if(a)return i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i;const o=xn.parseColorString(t);if(o){const l=[o.r/255,o.g/255,o.b/255,o.opacity];Li.store1[t]=l,Li.store255[t]=[o.r,o.g,o.b,o.opacity],i[0]=l[0],i[1]=l[1],i[2]=l[2],i[3]=l[3]}return i}const r=Li.store255[t];if(r)return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i;const s=xn.parseColorString(t);return s&&(Li.store1[t]=[s.r/255,s.g/255,s.b/255,s.opacity],Li.store255[t]=[s.r,s.g,s.b,s.opacity],i[0]=s.r,i[1]=s.g,i[2]=s.b,i[3]=s.opacity),i}static Set(t,e,i){if(e===Yr.Color1){if(Li.store1[t])return;Li.store1[t]=i,Li.store255[t]=[Math.floor(255*i[0]),Math.floor(255*i[1]),Math.floor(255*i[2]),Math.floor(255*i[3])]}else{if(Li.store255[t])return;Li.store255[t]=i,Li.store1[t]=[i[0]/255,i[1]/255,i[2]/255,i[3]]}}}Li.store255={},Li.store1={};function Ax(n,t=!1){return Array.isArray(n)&&Mt(n[0])?t?`rgb(${Math.round(n[0])},${Math.round(n[1])},${Math.round(n[2])},${n[3].toFixed(2)})`:`rgb(${Math.round(n[0])},${Math.round(n[1])},${Math.round(n[2])})`:n}function Od(n,t,e,i,r){return Array.isArray(n)&&!Mt(n[0])||Array.isArray(t)&&!Mt(t[0])?new Array(4).fill(0).map((s,a)=>Z6(ut(n)?n[a]:n,ut(t)?t[a]:t,e,i)):Z6(n,t,e,i,r)}function Z6(n,t,e,i,r){if(!n||!t)return n&&Ax(n)||t&&Ax(t)||!1;let s,a,o=!1,l=!1;if(Array.isArray(n)?s=n:typeof n=="string"?s=Li.Get(n,Yr.Color255):o=!0,Array.isArray(t)?a=t:typeof t=="string"?a=Li.Get(t,Yr.Color255):l=!0,o!==l){const u=o?n:t,h=o?t:n,c=Object.assign(Object.assign({},u),{stops:u.stops.map(d=>Object.assign(Object.assign({},d),{color:Ax(h)}))});return o?Od(u,c,e,i,r):Od(c,u,e,i,r)}if(o){if(n.gradient===t.gradient){const u=n,h=t,c=u.stops,d=h.stops;if(c.length!==d.length)return!1;if(u.gradient==="linear")return wMt(u,h,e);if(u.gradient==="radial")return CMt(u,h,e);if(u.gradient==="conical")return kMt(u,h,e)}return!1}return r&&r(s,a),Ax(TMt(s,a,e),i)}function wMt(n,t,e){const i=n.stops,r=t.stops;return{gradient:"linear",x0:n.x0+(t.x0-n.x0)*e,x1:n.x1+(t.x1-n.x1)*e,y0:n.y0+(t.y0-n.y0)*e,y1:n.y1+(t.y1-n.y1)*e,stops:new Array(i.length).fill(0).map((s,a)=>({color:W3(i[a].color,r[a].color,e),offset:i[a].offset+(r[a].offset-i[a].offset)*e}))}}function CMt(n,t,e){const i=n.stops,r=t.stops;return{gradient:"radial",x0:n.x0+(t.x0-n.x0)*e,x1:n.x1+(t.x1-n.x1)*e,y0:n.y0+(t.y0-n.y0)*e,y1:n.y1+(t.y1-n.y1)*e,r0:n.r0+(t.r0-n.r0)*e,r1:n.r1+(t.r1-n.r1)*e,stops:new Array(i.length).fill(0).map((s,a)=>({color:W3(i[a].color,r[a].color,e),offset:i[a].offset+(r[a].offset-i[a].offset)*e}))}}function kMt(n,t,e){const i=n.stops,r=t.stops;return{gradient:"conical",startAngle:n.startAngle+(t.startAngle-n.startAngle)*e,endAngle:n.endAngle+(t.endAngle-n.endAngle)*e,x:n.x+(t.x-n.x)*e,y:n.y+(t.y-n.y)*e,stops:new Array(i.length).fill(0).map((s,a)=>({color:W3(i[a].color,r[a].color,e),offset:i[a].offset+(r[a].offset-i[a].offset)*e}))}}function TMt(n,t,e){return[n[0]+(t[0]-n[0])*e,n[1]+(t[1]-n[1])*e,n[2]+(t[2]-n[2])*e,n[3]+(t[3]-n[3])*e]}const Wl=[0,0,0,0],xv=[0,0,0,0];function W3(n,t,e){return Li.Get(n,Yr.Color255,Wl),Li.Get(t,Yr.Color255,xv),`rgba(${Math.round(Wl[0]+(xv[0]-Wl[0])*e)},${Math.round(Wl[1]+(xv[1]-Wl[1])*e)},${Math.round(Wl[2]+(xv[2]-Wl[2])*e)},${Wl[3]+(xv[3]-Wl[3])*e})`}const xJ=(n,t,e)=>{n.forEach(i=>{if(Number.isFinite(i.to))t[i.key]=i.from+(i.to-i.from)*e;else if(i.key==="fill"||i.key==="stroke"){const r=Od(i.from,i.to,e,!1);r&&(t[i.key]=r)}})},SJ=(n,t,e)=>{const i=[],r=[];t.clear();for(let s=0;s<n.length;s++){const a=n[s],o=a.from,l=a.to,u=a.rotation*e,h=a.fromCp,c=a.toCp,d=Math.sin(u),p=Math.cos(u);r[0]=h[0]+(c[0]-h[0])*e,r[1]=h[1]+(c[1]-h[1])*e;for(let _=0;_<o.length;_+=2){const v=o[_],y=o[_+1],b=v*(1-e)+l[_]*e,S=y*(1-e)+l[_+1]*e;i[_]=b*p-S*d+r[0],i[_+1]=b*d+S*p+r[1]}let f=i[0],g=i[1];t.moveTo(f,g);for(let _=2;_<o.length;_+=6){const v=i[_],y=i[_+1],b=i[_+2],S=i[_+3],A=i[_+4],w=i[_+5];f===v&&g===y&&b===A&&S===w?t.lineTo(A,w):t.bezierCurveTo(v,y,b,S,A,w),f=A,g=w}}},AJ=(n,t,e)=>{const i=n?DI(n):[],r=DI(t);e&&i&&(e.fromTransform&&X6(i,e.fromTransform.clone().getInverse()),X6(i,e.toTransfrom));const[s,a]=pMt(i,r);return n?dMt(s,a,10,Math.PI):a.map((o,l)=>({from:s[l],to:o,fromCp:[0,0],toCp:[0,0],rotation:0}))},MMt=["fill","fillOpacity","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","lineDashOffset"],wJ=(n,t)=>{if(!n||!t)return null;const e=[];let i=!1;return Object.keys(n).forEach(r=>{if(!MMt.includes(r))return;const s=t[r];F(s)||F(n[r])||s===n[r]||(r==="fill"||r==="stroke"?e.push({from:typeof n[r]=="string"?Li.Get(n[r],Yr.Color255):n[r],to:typeof s=="string"?Li.Get(s,Yr.Color255):s,key:r}):e.push({from:n[r],to:s,key:r}),i=!0)}),i?e:null};class CJ extends ms{constructor(t,e,i){super(0,1,e,i),this.morphingData=t.morphingData,this.otherAttrs=t.otherAttrs,this.saveOnEnd=t.saveOnEnd}getEndProps(){return{}}onBind(){this.target.createPathProxy(),this.onUpdate(!1,0,this.target.attribute)}onEnd(){}onUpdate(t,e,i){const r=this.target,s=typeof r.pathProxy=="function"?r.pathProxy(r.attribute):r.pathProxy;SJ(this.morphingData,s,e),this.otherAttrs&&this.otherAttrs.length&&xJ(this.otherAttrs,i,e),t&&!this.saveOnEnd&&(this.target.pathProxy=null)}}const kJ=(n,t,e,i)=>{var r,s,a;if(n&&(!n.valid||!n.toCustomPath))return __DEV__&&console.error(n," is not validate"),null;if(!t.valid||!t.toCustomPath)return __DEV__&&console.error(t," is not validate"),null;let o=n==null?void 0:n.globalTransMatrix;i&&o&&(o=i.clone().multiply(o.a,o.b,o.c,o.d,o.e,o.f));const l=AJ((r=n==null?void 0:n.toCustomPath)===null||r===void 0?void 0:r.call(n),t.toCustomPath(),{fromTransform:o,toTransfrom:t.globalTransMatrix}),u=wJ(n==null?void 0:n.attribute,t.attribute),h=t.animate(e);return e!=null&&e.delay&&h.wait(e.delay),h.play(new CJ({morphingData:l,otherAttrs:u},(s=e==null?void 0:e.duration)!==null&&s!==void 0?s:Hf.duration,(a=e==null?void 0:e.easing)!==null&&a!==void 0?a:Hf.easing)),h},PMt=(n,t,e)=>{var i;const r=t.filter(u=>u&&u.toCustomPath&&u.valid);r.length||__DEV__&&console.error(r," is not validate"),n.valid&&n.toCustomPath||__DEV__&&console.error(n," is not validate");const s=((e==null?void 0:e.splitPath)==="clone"?MJ:(i=e==null?void 0:e.splitPath)!==null&&i!==void 0?i:PJ)(n,r.length,!1),a=e==null?void 0:e.onEnd;let o=r.length;const l=()=>{o--,o===0&&a&&a()};r.forEach((u,h)=>{var c;const d=s[h],p=((c=e==null?void 0:e.delay)!==null&&c!==void 0?c:0)+(e!=null&&e.individualDelay?e.individualDelay(h,r.length,d,u):0);kJ(d,u,Object.assign({},e,{onEnd:l,delay:p}),n.globalTransMatrix)})};class EMt extends ms{constructor(t,e,i){super(0,1,e,i),this.morphingData=t.morphingData,this.otherAttrs=t.otherAttrs}getEndProps(){return{}}onBind(){this.addPathProxy()}addPathProxy(){this.target.shadowRoot.forEachChildren(t=>{t.createPathProxy()}),this.onUpdate(!1,0,this.target.attribute)}clearPathProxy(){this.target.shadowRoot.forEachChildren(t=>{t.pathProxy=null})}onEnd(){}onUpdate(t,e,i){this.target.shadowRoot.forEachChildren((r,s)=>{var a;SJ(this.morphingData[s],typeof r.pathProxy=="function"?r.pathProxy(r.attribute):r.pathProxy,e),!((a=this.otherAttrs)===null||a===void 0)&&a[s]&&this.otherAttrs[s].length&&xJ(this.otherAttrs[s],r.attribute,e)}),t&&(this.clearPathProxy(),this.morphingData=null)}}const $3=n=>{const t={};return Object.keys(n).forEach(e=>{nMt(e)||(t[e]=n[e])}),t},TJ=(n,t,e)=>{const i=$3(n.attribute),r=n.attachShadow();if(t.length)r.setTheme({[t[0].type]:i}),t.forEach(s=>{r.appendChild(s)});else{const s=n.AABBBounds,a=s.width(),o=s.height();r.setTheme({rect:i}),new Array(e).fill(0).forEach(l=>{const u=wt.graphicService.creator.rect({x:0,y:0,width:a,height:o});r.appendChild(u),t.push(u)})}},MJ=(n,t,e)=>{const i=[],r=e?null:$3(n.attribute),s=n.toCustomPath();for(let a=0;a<t;a++){const o={path:new En().fromCustomPath2D(s)};i.push(wt.graphicService.creator.path(e?o:Object.assign({},r,o)))}return e&&TJ(n,i,t),i},PJ=(n,t,e)=>{const i=[],r=e?null:$3(n.attribute);if(n.type==="rect")gMt(n,t).forEach(s=>{i.push(wt.graphicService.creator.rect(e?s:Object.assign({},r,s)))});else if(n.type==="arc")mMt(n,t).forEach(s=>{i.push(wt.graphicService.creator.arc(e?s:Object.assign({},r,s)))});else if(n.type==="circle")vMt(n,t).forEach(s=>{i.push(wt.graphicService.creator.arc(e?s:Object.assign({},r,s)))});else if(n.type==="line"){const s=yMt(n,t),a={size:10,symbolType:"circle"};s.forEach(o=>{i.push(wt.graphicService.creator.symbol(e?Object.assign({},o,a):Object.assign({},r,o,a)))})}else n.type==="polygon"?SMt(n,t).forEach(s=>{i.push(wt.graphicService.creator.polygon(e?s:Object.assign({},r,s)))}):n.type==="area"?_Mt(n,t).forEach(s=>{i.push(wt.graphicService.creator.polygon(e?s:Object.assign({},r,s)))}):n.type==="path"&&AMt(n,t).forEach(s=>{"path"in s?i.push(wt.graphicService.creator.path(e?s:Object.assign({},r,s))):i.push(wt.graphicService.creator.polygon(e?s:Object.assign({},r,s)))});return e&&TJ(n,i,t),i},OMt=(n,t,e)=>{var i,r,s;const a=n.filter(c=>c.toCustomPath&&c.valid);a.length||__DEV__&&console.error(n," is not validate"),t.valid&&t.toCustomPath||__DEV__&&console.error(t," is not validate");const o=((e==null?void 0:e.splitPath)==="clone"?MJ:(i=e==null?void 0:e.splitPath)!==null&&i!==void 0?i:PJ)(t,a.length,!0),l=t.attribute;t.setAttribute("visible",!1);const u=a.map((c,d)=>AJ(c.toCustomPath(),o[d].toCustomPath(),{fromTransform:c.globalTransMatrix,toTransfrom:o[d].globalTransMatrix})),h=a.map((c,d)=>wJ(c.attribute,l));if(e!=null&&e.individualDelay){const c=e.onEnd;let d=a.length;const p=()=>{d--,d===0&&(t.setAttributes({visible:!0,ratio:null},!1,{type:ji.ANIMATE_END}),t.detachShadow(),c&&c())};o.forEach((f,g)=>{var _,v,y;const b=((_=e.delay)!==null&&_!==void 0?_:0)+e.individualDelay(g,a.length,n[g],f),S=f.animate(Object.assign({},e,{onEnd:p}));S.wait(b),S.play(new CJ({morphingData:u[g],saveOnEnd:!0,otherAttrs:h[g]},(v=e.duration)!==null&&v!==void 0?v:Hf.duration,(y=e.easing)!==null&&y!==void 0?y:Hf.easing))})}else{const c=e==null?void 0:e.onEnd,d=e?Object.assign({},e):{};d.onEnd=()=>{t.setAttribute("visible",!0,!1,{type:ji.ANIMATE_END}),t.detachShadow(),c&&c()};const p=t.animate(d);e!=null&&e.delay&&p.wait(e.delay),p.play(new EMt({morphingData:u,otherAttrs:h},(r=e==null?void 0:e.duration)!==null&&r!==void 0?r:Hf.duration,(s=e==null?void 0:e.easing)!==null&&s!==void 0?s:Hf.easing))}};class hi{static GetImage(t,e){var i;const r=hi.cache.get(t);r?r.loadState==="fail"?wt.global.getRequestAnimationFrame()(()=>{e.imageLoadFail(t)}):r.loadState==="init"||r.loadState==="loading"?(i=r.waitingMark)===null||i===void 0||i.push(e):e&&e.imageLoadSuccess(t,r.data):hi.loadImage(t,e)}static GetSvg(t,e){var i;let r=hi.cache.get(t);r?r.loadState==="fail"?wt.global.getRequestAnimationFrame()(()=>{e.imageLoadFail(t)}):r.loadState==="init"||r.loadState==="loading"?(i=r.waitingMark)===null||i===void 0||i.push(e):e&&e.imageLoadSuccess(t,r.data):(r={type:"image",loadState:"init"},hi.cache.set(t,r),r.dataPromise=wt.global.loadSvg(t),r.dataPromise?(r.waitingMark=[e],r.dataPromise.then(s=>{var a;r.loadState=s!=null&&s.data?"success":"fail",r.data=s==null?void 0:s.data,(a=r.waitingMark)===null||a===void 0||a.map((o,l)=>{s!=null&&s.data?(r.loadState="success",r.data=s.data,o.imageLoadSuccess(t,s.data)):(r.loadState="fail",o.imageLoadFail(t))})})):(r.loadState="fail",e.imageLoadFail(t)))}static GetFile(t,e){let i=hi.cache.get(t);return i?i.loadState==="init"||i.loadState==="fail"?Promise.reject():i.loadState==="loading"?i.dataPromise.then(r=>r.data):Promise.resolve(i.data):(i={type:e,loadState:"init"},hi.cache.set(t,i),e==="arrayBuffer"?i.dataPromise=wt.global.loadArrayBuffer(t):e==="blob"?i.dataPromise=wt.global.loadBlob(t):e==="json"&&(i.dataPromise=wt.global.loadJson(t)),i.dataPromise.then(r=>r.data))}static loading(){setTimeout(()=>{if(!hi.isLoading&&hi.toLoadAueue.length){hi.isLoading=!0;const t=hi.toLoadAueue.splice(0,10),e=[];t.forEach(i=>{const{url:r,marks:s}=i,a={type:"image",loadState:"init"};if(hi.cache.set(r,a),a.dataPromise=wt.global.loadImage(r),a.dataPromise){a.waitingMark=s;const o=a.dataPromise.then(l=>{var u;a.loadState=l!=null&&l.data?"success":"fail",a.data=l==null?void 0:l.data,(u=a.waitingMark)===null||u===void 0||u.map((h,c)=>{l!=null&&l.data?(a.loadState="success",a.data=l.data,h.imageLoadSuccess(r,l.data)):(a.loadState="fail",h.imageLoadFail(r))})});e.push(o)}else a.loadState="fail",s.forEach(o=>o.imageLoadFail(r))}),Promise.all(e).then(()=>{hi.isLoading=!1,this.onLoadSuccessCb.forEach(i=>i()),hi.loading()}).catch(i=>{console.error(i),hi.isLoading=!1,this.onLoadSuccessCb.forEach(r=>r()),hi.loading()})}},0)}static loadImage(t,e){const i=J6(t,hi.toLoadAueue);if(i!==-1)return hi.toLoadAueue[i].marks.push(e),void hi.loading();hi.toLoadAueue.push({url:t,marks:[e]}),hi.loading()}static improveImageLoading(t){const e=J6(t,hi.toLoadAueue);if(e!==-1){const i=hi.toLoadAueue.splice(e,1);hi.toLoadAueue.unshift(i[0])}}static onLoadSuccess(t){this.onLoadSuccessCb.push(t)}}function J6(n,t){for(let e=0;e<t.length;e++)if(t[e].url===n)return e;return-1}hi.cache=new Map,hi.isLoading=!1,hi.toLoadAueue=[],hi.onLoadSuccessCb=[];const RMt=new Wi,Q6=new Ai,ya=["lineWidth","scaleX","scaleY","angle","anchor","visible"],tH=["x","y"],eH=["scaleX","scaleY"],iH=["angle"],Sv=new Qi,Ar={strokeSeg:1,boundsPadding:2,pickMode:1,boundsMode:1,customPickShape:1,pickable:1,childrenPickable:1,visible:1,zIndex:1,layout:1,keepDirIn3d:1,globalZIndex:1,outerBorder:1,innerBorder:1,lineDash:1,lineCap:1,lineJoin:1,miterLimit:2,strokeBoundsBuffer:2,scaleCenter:1,anchor:1,anchor3d:1,postMatrix:1,backgroundMode:2,background:1,texture:1,cursor:1,html:1};class qr extends XTt{static mixin(t){const e=Object.keys(t);for(let i=0;i<e.length;++i){const r=e[i];Object.defineProperty(qr.prototype,r,Object.getOwnPropertyDescriptor(t,r))}}get AABBBounds(){return this.tryUpdateAABBBounds(this.attribute.boundsMode==="imprecise")}get OBBBounds(){return this.tryUpdateOBBBounds()}get globalAABBBounds(){return this.tryUpdateGlobalAABBBounds()}get transMatrix(){return this.tryUpdateLocalTransMatrix(!0)}get globalTransMatrix(){return this.tryUpdateGlobalTransMatrix(!0)}constructor(t={}){var e;super(),this._AABBBounds=new Ai,this._updateTag=li.INIT,this.attribute=t,this.valid=this.isValid(),t.background?this.loadImage((e=t.background.background)!==null&&e!==void 0?e:t.background,!0):t.shadowGraphic&&this.setShadowGraphic(t.shadowGraphic)}setMode(t){t==="3d"?this.set3dMode():this.set2dMode()}set3dMode(){this.in3dMode=!0}set2dMode(){this.in3dMode=!1}getOffsetXY(t,e=!1){var i,r;const{dx:s=t.dx,dy:a=t.dy}=this.attribute;if(e&&this.parent){const o=this.parent.attribute;Sv.x=s+((i=o.scrollX)!==null&&i!==void 0?i:0),Sv.y=a+((r=o.scrollY)!==null&&r!==void 0?r:0)}else Sv.x=s,Sv.y=a;return Sv}onAnimateBind(t){this._emitCustomEvent("animate-bind",t)}tryUpdateAABBBounds(t){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;if(!this.valid)return this._AABBBounds.clear(),this._AABBBounds;wt.graphicService.beforeUpdateAABBBounds(this,this.stage,!0,this._AABBBounds);const e=this.doUpdateAABBBounds(t);return wt.graphicService.afterUpdateAABBBounds(this,this.stage,this._AABBBounds,this,!0),e}combindShadowAABBBounds(t){if(this.shadowRoot){const e=this.shadowRoot.AABBBounds.clone();t.union(e)}}tryUpdateGlobalAABBBounds(){const t=this.AABBBounds;return this._globalAABBBounds?this._globalAABBBounds.setValue(t.x1,t.y1,t.x2,t.y2):this._globalAABBBounds=t.clone(),this._globalAABBBounds.empty()||this.parent&&this._globalAABBBounds.transformWithMatrix(this.parent.globalTransMatrix),this._globalAABBBounds}tryUpdateGlobalTransMatrix(t=!0){if(this._globalTransMatrix){if(this.parent){const e=this.parent.globalTransMatrix;this._globalTransMatrix.setValue(e.a,e.b,e.c,e.d,e.e,e.f)}}else this._globalTransMatrix=this.parent?this.parent.globalTransMatrix.clone():this.transMatrix.clone();return this.shouldUpdateGlobalMatrix()&&this.doUpdateGlobalMatrix(),this._globalTransMatrix}shouldUpdateGlobalMatrix(){return!0}tryUpdateLocalTransMatrix(t=!0){return this._transMatrix||(this._transMatrix=new Wi),this.shouldUpdateLocalMatrix()&&(this.doUpdateLocalMatrix(),t&&this.clearUpdateLocalPositionTag()),this._transMatrix}shouldUpdateAABBBounds(){return this.shadowRoot?!!(this._updateTag&li.UPDATE_BOUNDS)||this.shadowRoot.shouldUpdateAABBBounds():!!(this._updateTag&li.UPDATE_BOUNDS)}shouldSelfChangeUpdateAABBBounds(){return this.shadowRoot?!!(this._updateTag&li.UPDATE_BOUNDS)||this.shadowRoot.shouldUpdateAABBBounds():!!(this._updateTag&li.UPDATE_BOUNDS)}shouldUpdateLocalMatrix(){return!!(this._updateTag&li.UPDATE_LOCAL_MATRIX)}isValid(){var t,e;const i=this.attribute;return Number.isFinite(((t=i.x)!==null&&t!==void 0?t:0)+((e=i.y)!==null&&e!==void 0?e:0))}_validNumber(t){return t==null||Number.isFinite(t)}shouldUpdateShape(){return!!(this._updateTag&li.UPDATE_SHAPE)}clearUpdateShapeTag(){this._updateTag&=li.CLEAR_SHAPE}containsPoint(t,e,i,r){if(!r)return!1;if(i===ry.GLOBAL){const s=new Qi(t,e);this.parent&&this.parent.globalTransMatrix.transformPoint(s,s),t=s.x,e=s.y}return r.containsPoint(this,{x:t,y:e})}setAttributes(t,e=!1,i){(t=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,null,i)||t).background?this.loadImage(t.background,!0):t.shadowGraphic&&this.setShadowGraphic(t.shadowGraphic),this._setAttributes(t,e,i)}_setAttributes(t,e=!1,i){const r=Object.keys(t);for(let s=0;s<r.length;s++){const a=r[s];this.attribute[a]=t[a]}this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!e&&!this.needUpdateTags(r)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(i)}setAttribute(t,e,i,r){var s;const a=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({[t]:e},this.attribute,t,r);a?this._setAttributes(a,i,r):F((s=this.normalAttrs)===null||s===void 0?void 0:s[t])?(this.attribute[t]=e,this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!i&&!this.needUpdateTag(t)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r)):this.normalAttrs[t]=e,t==="background"?this.loadImage(e,!0):t==="shadowGraphic"&&this.setShadowGraphic(e)}needUpdateTags(t,e=ya){for(let i=0;i<e.length;i++){const r=e[i];if(t.indexOf(r)!==-1)return!0}return!1}needUpdateTag(t,e=ya){for(let i=0;i<e.length;i++)if(t===e[i])return!0;return!1}initAttributes(t){const e={type:ji.INIT};t=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,null,e)||t,this.attribute=t,t.background?this.loadImage(t.background,!0):t.shadowGraphic&&this.setShadowGraphic(t.shadowGraphic),this._updateTag=li.INIT,this.valid=this.isValid(),this.onAttributeUpdate(e)}translate(t,e){var i,r;if(t===0&&e===0)return this;const s={type:ji.TRANSLATE},a=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({x:t,y:e},this.attribute,tH,s);a&&(t=a.x,e=a.y,delete a.x,delete a.y,this._setAttributes(a));const o=this.attribute,l=o.postMatrix;return l?wt.transformUtil.fromMatrix(l,l).translate(t,e):(o.x=((i=o.x)!==null&&i!==void 0?i:Wn.x)+t,o.y=((r=o.y)!==null&&r!==void 0?r:Wn.y)+e),this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(s),this}translateTo(t,e){const i=this.attribute;if(i.x===t&&i.y===e)return this;const r={type:ji.TRANSLATE_TO},s=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({x:t,y:e},this.attribute,tH,r);return s?(this._setAttributes(s,!1,r),this):(i.x=t,i.y=e,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r),this)}scale(t,e,i){var r,s;if(t===1&&e===1)return this;const a={type:ji.SCALE},o=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({scaleX:t,scaleY:e,scaleCenter:i},this.attribute,eH,a);o&&(t=o.scaleX,e=o.scaleY,delete o.scaleX,delete o.scaleY,this._setAttributes(o));const l=this.attribute;if(i){let{postMatrix:u}=this.attribute;u||(u=new Wi,l.postMatrix=u),wt.transformUtil.fromMatrix(u,u).scale(t,e,i)}else l.scaleX=((r=l.scaleX)!==null&&r!==void 0?r:Wn.scaleX)*t,l.scaleY=((s=l.scaleY)!==null&&s!==void 0?s:Wn.scaleY)*e;return this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(a),this}scaleTo(t,e){const i=this.attribute;if(i.scaleX===t&&i.scaleY===e)return this;const r={type:ji.SCALE_TO},s=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({scaleX:t,scaleY:e},this.attribute,eH,r);return s?(this._setAttributes(s,!1,r),this):(i.scaleX=t,i.scaleY=e,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r),this)}rotate(t,e){var i;if(t===0)return this;const r={type:ji.ROTATE},s=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({angle:t,rotateCenter:e},this.attribute,iH,r);s&&(delete s.angle,this._setAttributes(s,!1,r));const a=this.attribute;if(e){let{postMatrix:o}=this.attribute;o||(o=new Wi,a.postMatrix=o),wt.transformUtil.fromMatrix(o,o).rotate(t,e)}else a.angle=((i=a.angle)!==null&&i!==void 0?i:Wn.angle)+t;return this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r),this}rotateTo(t){const e=this.attribute;if(e.angle===t)return this;const i={type:ji.ROTATE_TO},r=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,iH,i);return r?(this._setAttributes(r,!1,i),this):(e.angle=t,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(i),this)}skewTo(t,e){return this}animate(t){this.animates||(this.animates=new Map);const e=new HA(t==null?void 0:t.id,this.stage&&this.stage.getTimeline()).bind(this);if(t){const{onStart:i,onFrame:r,onEnd:s,onRemove:a}=t;i!=null&&e.onStart(i),r!=null&&e.onFrame(r),s!=null&&e.onEnd(s),a!=null&&e.onRemove(a),e.interpolateFunc=t.interpolate}return this.animates.set(e.id,e),e.onRemove(()=>{this.animates.delete(e.id)}),e}onAttributeUpdate(t){t&&t.skipUpdateCallback||(wt.graphicService.onAttributeUpdate(this),this._emitCustomEvent("afterAttributeUpdate",t))}update(t){t?(t.bounds&&this.tryUpdateAABBBounds(this.attribute.boundsMode==="imprecise"),t.trans&&this.tryUpdateLocalTransMatrix()):(this.tryUpdateAABBBounds(this.attribute.boundsMode==="imprecise"),this.tryUpdateLocalTransMatrix())}hasState(t){return!(!this.currentStates||!this.currentStates.length)&&(!!F(t)||this.currentStates.includes(t))}getState(t){var e;return(e=this.states)===null||e===void 0?void 0:e[t]}applyStateAttrs(t,e,i,r){var s,a,o,l;if(i){const u=Object.keys(t),h=this.getNoWorkAnimateAttr(),c={};let d;u.forEach(f=>{h[f]?(d||(d={}),d[f]=t[f]):c[f]=r&&t[f]===void 0?this.getDefaultAttribute(f):t[f]});const p=this.animate();p.stateNames=e,p.to(c,(a=(s=this.stateAnimateConfig)===null||s===void 0?void 0:s.duration)!==null&&a!==void 0?a:z6.duration,(l=(o=this.stateAnimateConfig)===null||o===void 0?void 0:o.easing)!==null&&l!==void 0?l:z6.easing),d&&this.setAttributes(d,!1,{type:ji.STATE})}else this.stopStateAnimates(),this.setAttributes(t,!1,{type:ji.STATE})}updateNormalAttrs(t){const e={};this.normalAttrs?(Object.keys(t).forEach(i=>{i in this.normalAttrs?(e[i]=this.normalAttrs[i],delete this.normalAttrs[i]):e[i]=this.getNormalAttribute(i)}),Object.keys(this.normalAttrs).forEach(i=>{t[i]=this.normalAttrs[i]})):Object.keys(t).forEach(i=>{e[i]=this.getNormalAttribute(i)}),this.normalAttrs=e}stopStateAnimates(t="end"){this.animates&&this.animates.forEach(e=>{e.stateNames&&(e.stop(t),this.animates.delete(e.id))})}getNormalAttribute(t){let e=this.attribute[t];return this.animates&&this.animates.forEach(i=>{if(i.stateNames){const r=i.getEndProps();Co(r,t)&&(e=r[t])}}),e}clearStates(t){this.hasState()&&this.normalAttrs?(this.currentStates=[],this.applyStateAttrs(this.normalAttrs,this.currentStates,t,!0)):this.currentStates=[],this.normalAttrs=null}removeState(t,e){if((this.currentStates?this.currentStates.indexOf(t):-1)>=0){const i=this.currentStates.filter(r=>r!==t);this.useStates(i,e)}}toggleState(t,e){if(this.hasState(t))this.removeState(t,e);else if((this.currentStates?this.currentStates.indexOf(t):-1)<0){const i=this.currentStates?this.currentStates.slice():[];i.push(t),this.useStates(i,e)}}addState(t,e,i){var r;if(this.currentStates&&this.currentStates.includes(t)&&(e||this.currentStates.length===1))return;const s=e&&(!((r=this.currentStates)===null||r===void 0)&&r.length)?this.currentStates.concat([t]):[t];this.useStates(s,i)}useStates(t,e){var i;if(!t.length)return void this.clearStates(e);if(!(((i=this.currentStates)===null||i===void 0?void 0:i.length)!==t.length||t.some((s,a)=>this.currentStates[a]!==s)))return;const r={};t.forEach(s=>{var a;const o=this.stateProxy?this.stateProxy(s,t):(a=this.states)===null||a===void 0?void 0:a[s];o&&Object.assign(r,o)}),this.updateNormalAttrs(r),this.currentStates=t,this.applyStateAttrs(r,t,e)}addUpdateBoundTag(){this._updateTag|=li.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag(),this.glyphHost&&this.glyphHost.addUpdateBoundTag()}addUpdateShapeTag(){this._updateTag|=li.UPDATE_SHAPE}addUpdateShapeAndBoundsTag(){this._updateTag|=li.UPDATE_SHAPE_AND_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag(),this.glyphHost&&this.glyphHost.addUpdateBoundTag()}updateShapeAndBoundsTagSetted(){return(this._updateTag&li.UPDATE_SHAPE_AND_BOUNDS)===li.UPDATE_SHAPE_AND_BOUNDS}clearUpdateBoundTag(){this._updateTag&=li.CLEAR_BOUNDS}addUpdatePositionTag(){this.shadowRoot&&this.shadowRoot.addUpdateGlobalPositionTag(),this._updateTag|=li.UPDATE_GLOBAL_LOCAL_MATRIX}addUpdateGlobalPositionTag(){this.shadowRoot&&this.shadowRoot.addUpdateGlobalPositionTag(),this._updateTag|=li.UPDATE_GLOBAL_MATRIX}clearUpdateLocalPositionTag(){this._updateTag&=li.CLEAR_LOCAL_MATRIX}clearUpdateGlobalPositionTag(){this._updateTag&=li.CLEAR_GLOBAL_MATRIX}addUpdateLayoutTag(){this._updateTag|=li.UPDATE_LAYOUT}clearUpdateLayoutTag(){this._updateTag&=li.CLEAR_LAYOUT}needUpdateLayout(){return!!(this._updateTag&li.UPDATE_LAYOUT)}getAnchor(t,e){const i=[0,0],r=()=>{if(e.b)return e.b;const{scaleX:s,scaleY:a,angle:o}=this.attribute;return Q6.copy(this._AABBBounds),this.setAttributes({scaleX:1,scaleY:1,angle:0}),e.b=this.AABBBounds.clone(),this._AABBBounds.copy(Q6),this.setAttributes({scaleX:s,scaleY:a,angle:o}),e.b};if(typeof t[0]=="string"){const s=parseFloat(t[0])/100,a=r();i[0]=a.x1+(a.x2-a.x1)*s}else i[0]=t[0];if(typeof t[1]=="string"){const s=parseFloat(t[1])/100,a=r();i[1]=a.y1+(a.y2-a.y1)*s}else i[1]=t[1];return i}doUpdateLocalMatrix(){const{x:t=Wn.x,y:e=Wn.y,scaleX:i=Wn.scaleX,scaleY:r=Wn.scaleY,angle:s=Wn.angle,scaleCenter:a,anchor:o,postMatrix:l}=this.attribute;let u=[0,0];const h={};if(o&&(u=this.getAnchor(o,h)),!a||i===1&&r===1)jCt(this._transMatrix,this._transMatrix.reset(),t,e,i,r,s,o&&u);else{const d=this._transMatrix;d.reset(),d.translate(u[0],u[1]),d.rotate(s),d.translate(-u[0],-u[1]),d.translate(t,e),u=this.getAnchor(a,h),wt.transformUtil.fromMatrix(d,d).scale(i,r,{x:u[0],y:u[1]})}const c=this.getOffsetXY(Wn);if(this._transMatrix.e+=c.x,this._transMatrix.f+=c.y,l){const d=RMt.setValue(l.a,l.b,l.c,l.d,l.e,l.f),p=this._transMatrix;d.multiply(p.a,p.b,p.c,p.d,p.e,p.f),p.setValue(d.a,d.b,d.c,d.d,d.e,d.f)}}doUpdateGlobalMatrix(){if(this.parent){this._globalTransMatrix.multiply(this.transMatrix.a,this.transMatrix.b,this.transMatrix.c,this.transMatrix.d,this.transMatrix.e,this.transMatrix.f);const{scrollX:t=0,scrollY:e=0}=this.parent.attribute;this._globalTransMatrix.translate(t,e)}}setStage(t,e){if(this.stage!==t){if(this.stage=t,this.layer=e,this.setStageToShadowRoot(t,e),this.animates&&this.animates.size){const i=t.getTimeline();this.animates.forEach(r=>{r.setTimeline(i)})}this._onSetStage&&this._onSetStage(this,t,e),wt.graphicService.onSetStage(this,t)}}setStageToShadowRoot(t,e){this.shadowRoot&&this.shadowRoot.setStage(t,e)}onAddStep(t){}onStop(t){t&&this.setAttributes(t,!1,{type:ji.ANIMATE_END})}onStep(t,e,i,r,s){const a={};if(i.customAnimate)i.customAnimate.update(s,r,a);else{const o=i.props,l=i.parsedProps,u=i.propKeys;this.stepInterpolate(t,e,a,i,r,s,o,void 0,l,u)}this.setAttributes(a,!1,{type:ji.ANIMATE_UPDATE,animationState:{ratio:r,end:s,step:i,isFirstFrameOfStep:t.getLastStep()!==i}}),this.stage&&this.stage.renderNextFrame()}stepInterpolate(t,e,i,r,s,a,o,l,u,h){h||(h=Object.keys(o),r.propKeys=h),a?r.propKeys.forEach(c=>{e.validAttr(c)&&(i[c]=o[c])}):h.forEach(c=>{var d;if(!e.validAttr(c))return;const p=o[c],f=(d=l&&l[c])!==null&&d!==void 0?d:t.getLastPropByName(c,r);if(p==null||f==null)return void(i[c]=p);let g;g=e.interpolateFunc&&e.interpolateFunc(c,s,f,p,i),g||(g=e.customInterpolate(c,s,f,p,this,i),g||this.defaultInterpolate(p,f,c,i,u,s)||this._interpolate(c,s,f,p,i))}),r.parsedProps=u}defaultInterpolate(t,e,i,r,s,a){if(Number.isFinite(t))return r[i]=e+(t-e)*a,!0;if(i==="fill"){s||(s={});const o=s.fillColorArray,l=Od(e,o??t,a,!1,(u,h)=>{s.fillColorArray=h});return l&&(r[i]=l),!0}if(i==="stroke"){s||(s={});const o=s.strokeColorArray,l=Od(e,o??t,a,!1,(u,h)=>{s.strokeColorArray=h});return l&&(r[i]=l),!0}if(i==="shadowColor"){s||(s={});const o=s.shadowColorArray,l=Od(e,o??t,a,!0,(u,h)=>{s.shadowColorArray=h});return l&&(r[i]=l),!0}return!1}_interpolate(t,e,i,r,s){}getDefaultAttribute(t){return Pt(this)[this.type][t]}getComputedAttribute(t){var e;return(e=this.attribute[t])!==null&&e!==void 0?e:this.getDefaultAttribute(t)}onSetStage(t,e=!1){this._onSetStage=t,e&&this.stage&&t(this,this.stage)}attachShadow(t){return t&&(t.shadowHost=this),this.shadowRoot=t??wt.graphicService.creator.shadowRoot(this),this.addUpdateBoundTag(),this.shadowRoot.setStage(this.stage,this.layer),this.shadowRoot}detachShadow(){this.shadowRoot&&(this.addUpdateBoundTag(),this.shadowRoot=null)}toJson(){return{attribute:this.attribute,_uid:this._uid,type:this.type,name:this.name,children:this.children.map(t=>t.toJson())}}createPathProxy(t){return It(t,!0)?this.pathProxy=new En().fromString(t):this.pathProxy=new En,this.pathProxy}loadImage(t,e=!1){if(!t||e&&IMt(t))return;const i=t;this.resources||(this.resources=new Map);const r={data:"init",state:null};this.resources.set(i,r),typeof t=="string"?(r.state="loading",t.startsWith("<svg")?(hi.GetSvg(t,this),this.backgroundImg=this.backgroundImg||e):(Rq(t)||t.includes("/")||Iq(t))&&(hi.GetImage(t,this),this.backgroundImg=this.backgroundImg||e)):ae(t)?(r.state="success",r.data=t,this.backgroundImg=this.backgroundImg||e):r.state="fail"}setShadowGraphic(t){t?this.attachShadow().add(t):this.detachShadow()}imageLoadSuccess(t,e,i){if(!this.resources)return;const r=this.resources.get(t);r&&(r.state="success",r.data=e,i&&i(),this.addUpdateBoundTag(),this.stage&&this.stage.renderNextFrame())}imageLoadFail(t,e){if(!this.resources)return;const i=this.resources.get(t);i&&(i.state="fail",e&&e())}_stopAnimates(t){t&&t.forEach(e=>{e.stop()})}stopAnimates(t=!1){this._stopAnimates(this.animates),this.shadowRoot&&this.shadowRoot.stopAnimates(!0),this.isContainer&&t&&this.forEachChildren(e=>{e.stopAnimates(t)})}release(){this.releaseStatus="released",wt.graphicService.onRelease(this)}_emitCustomEvent(t,e){var i,r;if(this._events&&t in this._events){const s=new v2(t,e);s.bubbles=!1,s.manager=(r=(i=this.stage)===null||i===void 0?void 0:i.eventSystem)===null||r===void 0?void 0:r.manager,this.dispatchEvent(s)}}}function IMt(n){return!(!n.fill&&!n.stroke)}qr.mixin(qTt);function LMt(n,t){const e=[];let i=t.exec(n);for(;i;){const r=[];r.startIndex=t.lastIndex-i[0].length;const s=i.length;for(let a=0;a<s;a++)r.push(i[a]);e.push(r),i=t.exec(n)}return e}class gE{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,e){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:e})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}}function nH(n,t,e,i){const r=n.indexOf(t,e);if(r===-1)throw new Error(i);return r+t.length-1}function DMt(n,t,e=">"){let i,r="";for(let s=t;s<n.length;s++){let a=n[s];if(i)a===i&&(i="");else if(a==='"'||a==="'")i=a;else if(a===e[0]){if(!e[1])return{data:r,index:s};if(n[s+1]===e[1])return{data:r,index:s}}else a==="	"&&(a=" ");r+=a}}function rH(n,t,e,i=">"){const r=DMt(n,t+1,i);if(!r)return;let s=r.data;const a=r.index,o=s.search(/\s/);let l=s,u=!0;return o!==-1&&(l=s.substr(0,o).replace(/\s\s*$/,""),s=s.substr(o+1)),{tagName:l,tagExp:s,closeIndex:a,attrExpPresent:u,rawTagName:l}}const BMt=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");class FMt{constructor(t){this.currentNode=null,this.options=t,this.tagsNodeStack=[],this.docTypeEntities={}}addChild(t,e,i){const r=e.tagname;typeof r=="string"&&(e.tagname=r),t.addChild(e)}buildAttributesMap(t,e,i){const r={};if(!t)return;const s=LMt(t,BMt),a=s.length;for(let o=0;o<a;o++){const l=s[o][1],u=s[o][4],h=l;l&&(r[h]=u===void 0||(isNaN(u)?u:Number(u)))}return r}parseXml(t){t=t.replace(/\r\n?/g,`
`);const e=new gE("!xml");let i=e,r="",s="";for(let a=0;a<t.length;a++)if(t[a]==="<")if(t[a+1]==="/"){const o=nH(t,">",a,"Closing Tag is not closed."),l=s.lastIndexOf(".");s=s.substring(0,l),i=this.tagsNodeStack.pop(),i&&i.child&&r&&i.child[i.child.length-1][":@"]&&(i.child[i.child.length-1][":@"].text=r),r="",a=o}else if(t[a+1]==="?")a=rH(t,a,!1,"?>").closeIndex+1;else if(t.substr(a+1,3)==="!--")a=nH(t,"-->",a+4,"Comment is not closed.");else{const o=rH(t,a);let l=o.tagName,u=o.tagExp;const h=o.attrExpPresent,c=o.closeIndex;if(l!==e.tagname&&(s+=s?"."+l:l),u.length>0&&u.lastIndexOf("/")===u.length-1){l[l.length-1]==="/"?(l=l.substr(0,l.length-1),s=s.substr(0,s.length-1),u=l):u=u.substr(0,u.length-1);const d=new gE(l);l!==u&&h&&(d[":@"]=this.buildAttributesMap(u,s,l)),this.addChild(i,d,s),s=s.substr(0,s.lastIndexOf("."))}else{const d=new gE(l);this.tagsNodeStack.push(i),l!==u&&h&&(d[":@"]=this.buildAttributesMap(u,s,l)),this.addChild(i,d,s),i=d}r="",a=c}else r+=t[a];return e.child}}function jMt(n,t){return EJ(n)}function EJ(n,t){const e={};for(let i=0;i<n.length;i++){const r=n[i],s=NMt(r);if(s!==void 0&&r[s]){const a=EJ(r[s]);HMt(a),r[":@"]&&zMt(a,r[":@"]),e[s]!==void 0&&e.hasOwnProperty(s)?(Array.isArray(e[s])||(e[s]=[e[s]]),e[s].push(a)):e[s]=a}}return e}function NMt(n){const t=Object.keys(n);for(let e=0;e<t.length;e++){const i=t[e];if(i!==":@")return i}}function zMt(n,t,e){if(t){const i=Object.keys(t),r=i.length;for(let s=0;s<r;s++){const a=i[s];n[a]=t[a]}}}function HMt(n){return Object.keys(n).length===0}class y2{constructor(t){this.options=Object.assign({},y2.defaultOptions,t)}valid(t){return t.startsWith("<")}parse(t){if(!this.valid)return!1;const e=new FMt(this.options).parseXml(t);return jMt(e,this.options)}}y2.defaultOptions={};function VMt(n){return n.startsWith("<svg")||n.startsWith("<?xml")}var WMt=function(n,t,e,i){return new(e||(e=Promise))(function(r,s){function a(u){try{l(i.next(u))}catch(h){s(h)}}function o(u){try{l(i.throw(u))}catch(h){s(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof e?h:new e(function(c){c(h)})).then(a,o)}l((i=i.apply(n,t||[])).next())})};function $Mt(n){return WMt(this,void 0,void 0,function*(){const t=[],e=n.getChildren();yield new Promise(i=>{wt.global.getRequestAnimationFrame()(()=>{i(null)})}),e.forEach(i=>{i.subLayers.size&&i.subLayers.forEach(r=>{r.drawContribution&&r.drawContribution.hooks&&r.drawContribution.rendering&&t.push(new Promise(s=>{r.drawContribution.hooks.completeDraw.tap("outWait",()=>{r.drawContribution.hooks.completeDraw.taps=r.drawContribution.hooks.completeDraw.taps.filter(a=>a.name!=="outWait"),s(null)})}))})}),yield Promise.all(t)})}function vS(n,t,e,i=0){return n.expand(t+(i/2+(e?GMt(e,t):0))),n}function GMt(n,t){return n?t:0}let UMt=0;function Zr(){return UMt++}var Rd;(function(n){n[n.HORIZONTAL=0]="HORIZONTAL",n[n.VERTICAL=1]="VERTICAL"})(Rd||(Rd={}));function sH(n){const t=[];let e=0,i="";for(let r=0;r<n.length;r++)KMt(n[r])?e?i+=n[r]:(e=1,i=n[r]):(e&&(t.push({text:i,direction:Rd.VERTICAL}),i="",e=0),t.push({text:n[r],direction:Rd.HORIZONTAL}));return i&&t.push({text:i,direction:Rd.VERTICAL}),t}const YMt=["…","（","）","—","【","】","「","」","《","》"],OJ=new Map;YMt.forEach(n=>OJ.set(n,!0));const XMt=[""],RJ=new Map;function KMt(n){if(OJ.has(n))return!0;if(RJ.has(n))return!1;let t=!1;return n.codePointAt(0)<256&&(t=!0),t}XMt.forEach(n=>RJ.set(n,!0));const b2=Zr(),v1=Zr(),_1=Zr(),x2=Zr(),S2=Zr(),G3=Zr(),A2=Zr(),y1=Zr(),w2=Zr(),C2=Zr(),U3=Zr(),k2=Zr(),Y3=Zr(),X3=Zr(),T2=Zr(),M2=Zr(),IJ=Symbol.for("GraphicService"),LJ=Symbol.for("GraphicCreator"),DJ={"stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-width":"lineWidth","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity",stroke:"stroke",fill:"fill"},qMt=Object.keys(DJ);var aH;(function(n){n[n.LESS_GROUP=0]="LESS_GROUP",n[n.MORE_GROUP=1]="MORE_GROUP"})(aH||(aH={}));let Im=class FI extends qr{constructor(t){super(t),this.type="group",this.parent=null,this.isContainer=!0,this.numberType=G3,this._childUpdateTag=li.UPDATE_BOUNDS}setMode(t){t==="3d"?this.set3dMode():this.set2dMode()}set3dMode(){this.in3dMode=!0}set2dMode(){this.in3dMode=!1}setTheme(t){return this.theme||(this.theme=new ay),this.theme.setTheme(t,this)}createTheme(){this.theme||(this.theme=new ay)}hideAll(){this.setAttribute("visible",!1),this.forEachChildren(t=>{t.isContainer&&t.hideAll?t.hideAll():t.setAttribute("visible",!1)})}showAll(){this.setAttribute("visible",!0),this.forEachChildren(t=>{t.isContainer&&t.showAll?t.showAll():t.setAttribute("visible",!0)})}containsPoint(t,e,i){if(i===ry.GLOBAL){const r=new Qi(t,e);return this.parent&&this.parent.globalTransMatrix.transformPoint(r,r),this.AABBBounds.contains(r.x,r.y)}return this.AABBBounds.contains(t,e)}shouldUpdateAABBBounds(){return!!super.shouldUpdateAABBBounds()||!!(this._childUpdateTag&li.UPDATE_BOUNDS)}tryUpdateAABBBounds(){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;wt.graphicService.beforeUpdateAABBBounds(this,this.stage,!0,this._AABBBounds);const t=this.shouldSelfChangeUpdateAABBBounds(),e=this.doUpdateAABBBounds();return this.addUpdateLayoutTag(),wt.graphicService.afterUpdateAABBBounds(this,this.stage,this._AABBBounds,this,t),e}doUpdateLocalMatrix(){const{x:t=Wn.x,y:e=Wn.y,dx:i=Wn.dx,dy:r=Wn.dy,scaleX:s=Wn.scaleX,scaleY:a=Wn.scaleY,angle:o=Wn.angle,postMatrix:l}=this.attribute;if(t!==0||e!==0||i!==0||r!==0||s!==1||a!==1||o!==0||l)return super.doUpdateLocalMatrix();this._transMatrix.reset()}doUpdateAABBBounds(){const t=this.attribute,e=Pt(this).group;this._AABBBounds.clear();const i=wt.graphicService.updateGroupAABBBounds(t,e,this._AABBBounds,this),{boundsPadding:r=e.boundsPadding}=t,s=br(r);return s&&i.expand(s),this.parent&&this.parent.addChildUpdateBoundTag(),this.clearUpdateBoundTag(),this._emitCustomEvent("AAABBBoundsChange"),i}clearUpdateBoundTag(){this._updateTag&=li.CLEAR_BOUNDS,this._childUpdateTag&=li.CLEAR_BOUNDS}tryUpdateOBBBounds(){throw new Error("暂不支持")}addUpdateBoundTag(){this._updateTag|=li.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag()}addChildUpdateBoundTag(){this._childUpdateTag&li.UPDATE_BOUNDS||(this._childUpdateTag|=li.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag())}getTheme(){return this.theme.getTheme(this)}incrementalAppendChild(t){const e=super.appendChild(t);return this.stage&&e&&(e.stage=this.stage,e.layer=this.layer),this.addUpdateBoundTag(),wt.graphicService.onAddIncremental(t,this,this.stage),e}incrementalClearChild(){super.removeAllChild(),this.addUpdateBoundTag(),wt.graphicService.onClearIncremental(this,this.stage)}appendChild(t,e=!0){const i=super.appendChild(t);return e&&this.stage&&i&&i.setStage(this.stage,this.layer),this.addUpdateBoundTag(),i}insertBefore(t,e){const i=super.insertBefore(t,e);return this.stage&&i&&i.setStage(this.stage,this.layer),this.addUpdateBoundTag(),i}insertAfter(t,e){const i=super.insertAfter(t,e);return this.stage&&i&&i.setStage(this.stage,this.layer),this.addUpdateBoundTag(),i}insertInto(t,e){const i=super.insertInto(t,e);return this.stage&&i&&i.setStage(this.stage,this.layer),this.addUpdateBoundTag(),i}removeChild(t){const e=super.removeChild(t);return t.stage=null,wt.graphicService.onRemove(t),this.addUpdateBoundTag(),e}removeAllChild(t=!1){this.forEachChildren(e=>{wt.graphicService.onRemove(e),t&&e.isContainer&&e.removeAllChild(t)}),super.removeAllChild(),this.addUpdateBoundTag()}setStage(t,e){this.stage!==t&&(this.stage=t,this.layer=e,this.setStageToShadowRoot(t,e),this._onSetStage&&this._onSetStage(this,t,e),wt.graphicService.onSetStage(this,t),this.forEachChildren(i=>{i.setStage(t,this.layer)}))}addUpdatePositionTag(){super.addUpdatePositionTag(),this.forEachChildren(t=>{t.isContainer&&t.addUpdateGlobalPositionTag()})}addUpdateGlobalPositionTag(){super.addUpdateGlobalPositionTag(),this.forEachChildren(t=>{t.isContainer&&t.addUpdateGlobalPositionTag()})}tryUpdateGlobalTransMatrix(t=!0){if(this.shouldUpdateGlobalMatrix()){if(this._globalTransMatrix){if(this.parent){const e=this.parent.globalTransMatrix;this._globalTransMatrix.setValue(e.a,e.b,e.c,e.d,e.e,e.f)}}else this._globalTransMatrix=this.parent?this.parent.globalTransMatrix.clone():this.transMatrix.clone();this.doUpdateGlobalMatrix(),t&&this.clearUpdateGlobalPositionTag()}return this._globalTransMatrix}shouldUpdateGlobalMatrix(){return!!(this._updateTag&li.UPDATE_GLOBAL_MATRIX)}_getChildByName(t,e){return this.find(i=>i.name===t,e)}createOrUpdateChild(t,e,i){let r=this._getChildByName(t);return r?r.setAttributes(e):(r=wt.graphicService.creator[i](e),r.name=t,this.add(r)),r}clone(){return new FI(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return FI.NOWORK_ANIMATE_ATTR}};Im.NOWORK_ANIMATE_ATTR=Ar;function K3(n){return new Im(n)}class ZMt extends Im{get offscreen(){return this.layerHandler.offscreen}get layerMode(){return this.layerHandler.type}get width(){return this.stage?this.stage.width:0}get height(){return this.stage?this.stage.height:0}get viewWidth(){return this.stage?this.stage.viewWidth:0}get viewHeight(){return this.stage?this.stage.viewHeight:0}get dirtyBound(){throw new Error("暂不支持")}get dpr(){return this._dpr}constructor(t,e,i,r){var s;super({}),this.stage=t,this.global=e,this.window=i,this.main=r.main,this.layerHandler=r.layerHandler,this.layerHandler.init(this,i,{main:r.main,canvasId:r.canvasId,width:this.viewWidth,height:this.viewHeight,zIndex:(s=r.zIndex)!==null&&s!==void 0?s:0}),this.layer=this,this.subLayers=new Map,this.theme=new ay,this.background="rgba(0, 0, 0, 0)",this.afterDrawCbs=[]}combineSubLayer(t=!0){const e=Array.from(this.subLayers.values()).sort((i,r)=>i.zIndex-r.zIndex);this.layerHandler.merge(e.map(i=>(i.layer.subLayers.size&&i.layer.combineSubLayer(t),i.layer.getNativeHandler()))),t&&e.forEach(i=>{i.group&&(i.group.incremental=0)}),e.forEach(i=>{wt.layerService.releaseLayer(this.stage,i.layer)}),this.subLayers.clear()}getNativeHandler(){return this.layerHandler}setStage(t,e){super.setStage(t,this)}pick(t,e){throw new Error("暂不支持")}tryRenderSecondaryLayer(t,e){this.layerHandler.secondaryHandlers&&this.layerHandler.secondaryHandlers.length&&this.layerHandler.secondaryHandlers.forEach(i=>{i.layer.renderCount=this.renderCount,i.layer.render(t,e)})}render(t,e){var i;this.layerHandler.render([this],{renderService:t.renderService,stage:this.stage,layer:this,viewBox:t.viewBox,transMatrix:t.transMatrix,background:(i=t.background)!==null&&i!==void 0?i:this.background,updateBounds:t.updateBounds},e),this.afterDrawCbs.forEach(r=>r(this)),this.tryRenderSecondaryLayer(t,e)}resize(t,e){this.layerHandler.resize(t,e)}resizeView(t,e){this.layerHandler.resizeView(t,e)}setDpr(t){this.layerHandler.setDpr(t)}afterDraw(t){this.afterDrawCbs.push(t)}startAnimate(t){throw new Error("暂不支持")}setToFrame(t){throw new Error("暂不支持")}prepare(t,e){}release(){super.release(),this.layerHandler.release(),this.subLayers&&this.subLayers.forEach(t=>{wt.layerService.releaseLayer(this.stage,t.layer)})}drawTo(t,e){var i;this.layerHandler.drawTo(t,[this],Object.assign({background:(i=e.background)!==null&&i!==void 0?i:this.background,renderService:e.renderService,viewBox:e.viewBox,transMatrix:e.transMatrix,stage:this.stage,layer:this},e)),this.afterDrawCbs.forEach(r=>r(this))}}const BJ=Symbol.for("TransformUtil"),FJ=Symbol.for("GraphicUtil"),q3=Symbol.for("LayerService"),jJ=Symbol.for("StaticLayerHandlerContribution"),NJ=Symbol.for("DynamicLayerHandlerContribution"),zJ=Symbol.for("VirtualLayerHandlerContribution");var Kv,JMt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},QMt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};let qv=Kv=class{static GenerateLayerId(){return`${Kv.idprefix}_${Kv.prefix_count++}`}constructor(){this.layerMap=new Map,this.global=wt.global}tryInit(){this.inited||(this.staticLayerCountInEnv=this.global.getStaticCanvasCount(),this.dynamicLayerCountInEnv=this.global.getDynamicCanvasCount(),this.inited=!0)}getStageLayer(n){return this.layerMap.get(n)}getRecommendedLayerType(n){return n||(this.staticLayerCountInEnv!==0?"static":this.dynamicLayerCountInEnv!==0?"dynamic":"virtual")}getLayerHandler(n){let t;return t=n==="static"?re.get(jJ):n==="dynamic"?re.get(NJ):re.get(zJ),t}createLayer(n,t={main:!1}){var e;this.tryInit();let i=this.getRecommendedLayerType(t.layerMode);i=t.main||t.canvasId?"static":i;const r=this.getLayerHandler(i),s=new ZMt(n,this.global,n.window,Object.assign(Object.assign({main:!1},t),{layerMode:i,canvasId:(e=t.canvasId)!==null&&e!==void 0?e:Kv.GenerateLayerId(),layerHandler:r})),a=this.layerMap.get(n)||[];return a.push(s),this.layerMap.set(n,a),this.staticLayerCountInEnv--,s}prepareStageLayer(n){let t;n.forEachChildren(e=>{const i=e.getNativeHandler();i.type==="virtual"?(i.mainHandler=t,t.secondaryHandlers.push(i)):(t=i,t.secondaryHandlers=[])})}releaseLayer(n,t){t.release();const e=this.layerMap.get(n)||[];this.layerMap.set(n,e.filter(i=>i!==t))}layerCount(n){return(this.layerMap.get(n)||[]).length}restLayerCount(n){return this.global.env==="browser"?10:0}releaseStage(n){this.layerMap.delete(n)}};qv.idprefix="visactor_layer",qv.prefix_count=0,qv=Kv=JMt([Vt(),QMt("design:paramtypes",[])],qv);const tPt=new se(n=>{n(F3).to(SI).inSingletonScope(),n(FA).to(OI),n(FJ).to(RI).inSingletonScope(),n(BJ).to(II).inSingletonScope(),n(q3).to(qv).inSingletonScope()});function Sp(n,t){return!(!n&&!t)}function Lm(n,t){let e;return e=ut(n)?n.some(i=>i||i===void 0):!!n,e&&t>0}function tp(n,t,e){return e&&n*t>0}function Z3(n,t,e,i,r){return r&&n*t>0&&e!==0&&i!==0}function J3(n,t){return n*t>0}function Q3(n,t,e,i){return n*t>0&&e!==0&&i!==0}function ePt(n,t,e,i,r,s,a,o){if(!n.pathProxy)return!1;const l=Pt(n,s==null?void 0:s.theme)[n.type.replace("3d","")],{fill:u=l.fill,stroke:h=l.stroke,opacity:c=l.opacity,fillOpacity:d=l.fillOpacity,lineWidth:p=l.lineWidth,strokeOpacity:f=l.strokeOpacity,visible:g=l.visible,x:_=l.x,y:v=l.y}=n.attribute,y=tp(c,d,u),b=J3(c,f),S=Sp(u),A=Lm(h,p);if(!g||!S&&!A||!(y||b||a||o))return!0;t.beginPath();const w=typeof n.pathProxy=="function"?n.pathProxy(n.attribute):n.pathProxy;return cu(w.commandList,t,e,i),t.setShadowBlendStyle&&t.setShadowBlendStyle(n,n.attribute,l),A&&b&&(t.setStrokeStyle(n,n.attribute,e-_,i-v,l),t.stroke()),S&&y&&(t.setCommonStyle(n,n.attribute,e-_,i-v,l),t.fill()),!0}function HJ(n,t,e,i,r,s,a,o){const l=e-n,u=i-t,h=a-r,c=o-s;let d=c*l-h*u;return d*d<We?[]:(d=(h*(t-s)-c*(n-r))/d,[n+d*l,t+d*u])}function kh(n,t,e,i,r,s,a){const o=n-e,l=t-i,u=(a?s:-s)/Math.sqrt(o*o+l*l),h=u*l,c=-u*o,d=n+h,p=t+c,f=e+h,g=i+c,_=(d+f)/2,v=(p+g)/2,y=f-d,b=g-p,S=y*y+b*b,A=r-s,w=d*g-f*p,C=(b<0?-1:1)*Math.sqrt(Math.max(0,A*A*S-w*w));let k=(w*b-y*C)/S,M=(-w*y-b*C)/S;const P=(w*b+y*C)/S,E=(-w*y+b*C)/S,I=k-_,D=M-v,N=P-_,O=E-v;return I*I+D*D>N*N+O*O&&(k=P,M=E),{cx:k,cy:M,x01:-h,y01:-c,x11:k*(r/A-1),y11:M*(r/A-1)}}function VA(n,t,e,i,r,s,a){const{startAngle:o,endAngle:l}=n.getParsedAngle(),u=Ie(l-o),h=l>o;let c=!1;if(r<s){const d=r;r=s,s=d}if(r<=We)t.moveTo(e,i);else if(u>=be-We)t.moveTo(e+r*ni(o),i+r*He(o)),t.arc(e,i,r,o,l,!h),s>We&&(t.moveTo(e+s*ni(l),i+s*He(l)),t.arc(e,i,s,l,o,h));else{const d=n.getParsedCornerRadius(),{outerDeltaAngle:p,innerDeltaAngle:f,outerStartAngle:g,outerEndAngle:_,innerEndAngle:v,innerStartAngle:y}=n.getParsePadAngle(o,l),b=d,S=d,A=d,w=d,C=Math.max(S,b),k=Math.max(A,w);let M=C,P=k;const E=r*ni(g),I=r*He(g),D=s*ni(v),N=s*He(v);let O,L,H,j;if((k>We||C>We)&&(O=r*ni(_),L=r*He(_),H=s*ni(y),j=s*He(y),u<Qe)){const G=HJ(E,I,H,j,O,L,D,N);if(G){const U=E-G[0],$=I-G[1],q=O-G[0],tt=L-G[1],it=1/He(Hq((U*q+$*tt)/(hs(U*U+$*$)*hs(q*q+tt*tt)))/2),nt=hs(G[0]*G[0]+G[1]*G[1]);P=nr(k,(s-nt)/(it-1)),M=nr(C,(r-nt)/(it+1))}}if(p<.001)a&&(a[3]||a[1])&&t.moveTo(e+E,i+I),c=!0;else if(M>We){const G=nr(b,M),U=nr(S,M),$=kh(H,j,E,I,r,G,Number(h)),q=kh(O,L,D,N,r,U,Number(h));M<C&&G===U?!a||a[0]?(t.moveTo(e+$.cx+$.x01,i+$.cy+$.y01),t.arc(e+$.cx,i+$.cy,M,ei($.y01,$.x01),ei(q.y01,q.x01),!h)):t.moveTo(e+$.cx+M*ni(ei(q.y01,q.x01)),i+$.cy+M*He(ei(q.y01,q.x01))):!a||a[0]?(t.moveTo(e+$.cx+$.x01,i+$.cy+$.y01),G>0&&t.arc(e+$.cx,i+$.cy,G,ei($.y01,$.x01),ei($.y11,$.x11),!h),t.arc(e,i,r,ei($.cy+$.y11,$.cx+$.x11),ei(q.cy+q.y11,q.cx+q.x11),!h),U>0&&t.arc(e+q.cx,i+q.cy,U,ei(q.y11,q.x11),ei(q.y01,q.x01),!h)):U>0?t.moveTo(e+q.cx+U*ni(ei(q.y01,q.x01)),i+q.cy+U*He(ei(q.y01,q.x01))):t.moveTo(e+O,i+r*He(_))}else!a||a[0]?(t.moveTo(e+E,i+I),t.arc(e,i,r,g,_,!h)):t.moveTo(e+r*ni(_),i+r*He(_));if(!(s>We)||f<.001)!a||a[1]?t.lineTo(e+D,i+N):t.moveTo(e+D,i+N),c=!0;else if(P>We){const G=nr(w,P),U=nr(A,P),$=kh(D,N,O,L,s,-U,Number(h)),q=kh(E,I,H,j,s,-G,Number(h));if(!a||a[1]?t.lineTo(e+$.cx+$.x01,i+$.cy+$.y01):t.moveTo(e+$.cx+$.x01,i+$.cy+$.y01),P<k&&G===U){const tt=ei(q.y01,q.x01);!a||a[2]?t.arc(e+$.cx,i+$.cy,P,ei($.y01,$.x01),tt,!h):t.moveTo(e+$.cx+ni(tt),i+$.cy+He(tt))}else!a||a[2]?(U>0&&t.arc(e+$.cx,i+$.cy,U,ei($.y01,$.x01),ei($.y11,$.x11),!h),t.arc(e,i,s,ei($.cy+$.y11,$.cx+$.x11),ei(q.cy+q.y11,q.cx+q.x11),h),G>0&&t.arc(e+q.cx,i+q.cy,G,ei(q.y11,q.x11),ei(q.y01,q.x01),!h)):G>0?t.moveTo(e+q.cx+G*ni(ei(q.y01,q.x01)),i+q.cy+G*He(ei(q.y01,q.x01))):t.moveTo(e+H,i+j)}else!a||a[1]?t.lineTo(e+D,i+N):t.moveTo(e+D,i+N),!a||a[2]?t.arc(e,i,s,v,y,h):t.moveTo(e+s*ni(y),i+s*He(y))}return a?a[3]&&t.lineTo(e+r*ni(o),i+r*He(o)):t.closePath(),c}class Fa{static GetCanvas(){try{return Fa.canvas||(Fa.canvas=wt.global.createCanvas({})),Fa.canvas}catch{return null}}static GetCtx(){if(!Fa.ctx){const t=Fa.GetCanvas();Fa.ctx=t.getContext("2d")}return Fa.ctx}}class hd extends NCt{static getInstance(){return hd._instance||(hd._instance=new hd),hd._instance}constructor(t=[],e=100){super(),this.cacheParams={CLEAN_THRESHOLD:100,L_TIME:1e3},this.dataMap=new Map;const i=Fa.GetCanvas(),r=Fa.GetCtx();if(i.width=e,i.height=1,!r)return;if(r.translate(0,0),!r)throw new Error("获取ctx发生错误");const s=r.createLinearGradient(0,0,e,0);t.forEach(a=>{s.addColorStop(a[0],a[1])}),r.fillStyle=s,r.fillRect(0,0,e,1),this.rgbaSet=r.getImageData(0,0,e,1).data}getColor(t){const e=this.rgbaSet.slice(4*t,4*t+4);return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]/255})`}GetOrCreate(t,e,i,r,s=[],a=100){let o=`${t}${e}${i}${r}`;s.forEach(u=>o+=u.join()),o+=a;let l=this.dataMap.get(o);return l||(l={data:new hd(s,a),timestamp:[]},this.addLimitedTimestamp(l,Date.now(),{}),this.dataMap.set(o,l)),this.clearCache(this.dataMap,this.cacheParams),l.data}}class Ir{static GetSize(t){for(let e=0;e<Ir.ImageSize.length;e++)if(Ir.ImageSize[e]>=t)return Ir.ImageSize[e];return t}static Get(t,e,i,r,s,a,o){const l=Ir.GenKey(t,e,i,r,s),u=Ir.cache[l];if(!u||u.length===0)return null;for(let h=0;h<u.length;h++)if(u[h].width>=a&&u[h].height>=o)return u[h].pattern;return null}static Set(t,e,i,r,s,a,o,l){const u=Ir.GenKey(t,e,i,r,s);Ir.cache[u]?Ir.cache[u].push({width:o,height:l,pattern:a}):Ir.cache[u]=[{width:o,height:l,pattern:a}]}static GenKey(t,e,i,r,s){return`${e},${i},${r},${s},${t.join()}`}}Ir.cache={},Ir.ImageSize=[20,40,80,160,320,640,1280,2560];function iPt(n,t,e,i){const{stops:r,startAngle:s,endAngle:a}=i;for(;e<0;)e+=be;for(;e>be;)e-=be;if(e<s||e>a)return r[0].color;let o,l,u=(e-s)/(a-s);for(let h=0;h<r.length;h++)if(r[h].offset>=u){o=r[h-1],l=r[h];break}return u=(u-o.offset)/(l.offset-o.offset),Od(o.color,l.color,u,!1)}function nPt(n,t,e,i,r,s,a,o,l){const u=Math.floor(180*r/Math.PI),h=Fa.GetCanvas(),c=Fa.GetCtx();if(!c)return null;const d=Ir.GetSize(o),p=Ir.GetSize(l);let f=Ir.Get(t,e,i,s,a,d,p);if(f)return f;const g=Math.sqrt(Math.max(Math.max(Math.pow(e,2)+Math.pow(i,2),Math.pow(d-e,2)+Math.pow(i,2)),Math.max(Math.pow(d-e,2)+Math.pow(p-i,2),Math.pow(e,2)+Math.pow(p-i,2)))),_=u+1,v=r/Math.max(1,_-1),y=hd.getInstance().GetOrCreate(e,i,d,p,t,_),b=2*Math.PI*g/360;h.width=d,h.height=p,c.setTransform(1,0,0,1,0,0),c.clearRect(0,0,d,p),c.translate(e,i),c.rotate(s);for(let A=0,w=_-1;A<w&&!(s+A*v>a);A++){const C=y.getColor(A);c.beginPath(),c.rotate(v),c.moveTo(0,0),c.lineTo(g,-2*b),c.lineTo(g,0),c.fillStyle=C,c.closePath(),c.fill()}const S=c.getImageData(0,0,d,p);return h.width=S.width,h.height=S.height,c.putImageData(S,0,0),f=n.createPattern(h,"no-repeat"),f&&Ir.Set(t,e,i,s,a,f,d,p),f}const jI=Symbol.for("ArcRenderContribution"),NI=Symbol.for("AreaRenderContribution"),zI=Symbol.for("CircleRenderContribution"),VJ=Symbol.for("GroupRenderContribution"),HI=Symbol.for("ImageRenderContribution"),VI=Symbol.for("PathRenderContribution"),WI=Symbol.for("PolygonRenderContribution"),Zv=Symbol.for("RectRenderContribution"),$I=Symbol.for("SymbolRenderContribution"),GI=Symbol.for("TextRenderContribution"),tF=Symbol.for("InteractiveSubRenderContribution"),oH=["radius","startAngle","endAngle",...ya];class ly extends qr{constructor(t={radius:1}){super(t),this.type="circle",this.numberType=x2}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{startAngle:t,endAngle:e,radius:i}=this.attribute;return this._validNumber(t)&&this._validNumber(e)&&this._validNumber(i)}doUpdateAABBBounds(t){const e=Pt(this).circle;this._AABBBounds.clear();const i=this.attribute,r=wt.graphicService.updateCircleAABBBounds(i,Pt(this).circle,this._AABBBounds,t,this),{boundsPadding:s=e.boundsPadding}=i,a=br(s);return a&&r.expand(a),this.clearUpdateBoundTag(),r}tryUpdateOBBBounds(){throw new Error("暂不支持")}getDefaultAttribute(t){return Pt(this).circle[t]}needUpdateTags(t){return super.needUpdateTags(t,oH)}needUpdateTag(t){return super.needUpdateTag(t,oH)}toCustomPath(){var t,e,i;const r=this.attribute,s=(t=r.radius)!==null&&t!==void 0?t:this.getDefaultAttribute("radius"),a=(e=r.startAngle)!==null&&e!==void 0?e:this.getDefaultAttribute("startAngle"),o=(i=r.endAngle)!==null&&i!==void 0?i:this.getDefaultAttribute("endAngle"),l=new En;return l.arc(0,0,s,a,o),l}clone(){return new ly(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return ly.NOWORK_ANIMATE_ATTR}}ly.NOWORK_ANIMATE_ATTR=Ar;function rPt(n){return new ly(n)}function UI(n,t={},e){e||(e=1);const{fontStyle:i=t.fontStyle,fontVariant:r=t.fontVariant,fontWeight:s=t.fontWeight,fontSize:a=t.fontSize,fontFamily:o=t.fontFamily}=n;return(i?i+" ":"")+(r?r+" ":"")+(s?s+" ":"")+a*e+"px "+(o||"sans-serif")}function sPt(n,t){return n==="top"?Math.ceil(.79*t):n==="middle"?Math.round(.3*t):n==="bottom"?Math.round(-.21*t):0}function iu(n,t){return n==="end"||n==="right"?-t:n==="center"?-t/2:0}function al(n,t,e,i=0){return n==="middle"?-t/2:n==="top"?0:n==="bottom"?i-t:n&&n!=="alphabetic"?0:(e||(e=t),-(t-e)/2-.79*e)}function aPt(n){const t={};return["textAlign","fontFamily","fontVariant","fontStyle","fontWeight"].forEach(e=>{n[e]&&(t[Y7(e)]=n[e])}),["fontSize","lineHeight"].forEach(e=>{const i=Y7(e);F(n[e])||(t[i]=/^[0-9]*$/.test(`${n[e]}`)?`${n[e]}px`:`${n[e]}`)}),n.underline?t["text-decoration"]="underline":n.lineThrough&&(t["text-decoration"]="line-through"),n.fill&&It(n.fill)&&(t.color=n.fill),t}class lH{constructor(t,e,i){this.fontFamily=t,this.textOptions=e,this.textMeasure=i}LayoutBBox(t,e,i){if(e==="left"||e==="start")t.xOffset=0;else if(e==="center")t.xOffset=t.width/-2;else{if(e!=="right"&&e!=="end")throw new Error("非法的textAlign");t.xOffset=-t.width}return t.yOffset=i==="top"?0:i==="middle"?t.height/-2:i==="alphabetic"?-.79*t.height:-t.height,t}GetLayout(t,e,i,r,s,a,o,l,u){const h=[],c=[e,i],d=[0,0];for(;t.length>0;){const{str:f}=this.textMeasure.clipTextWithSuffix(t,this.textOptions,e,o,l,u);h.push({str:f,width:this.textMeasure.measureTextWidth(f,this.textOptions)}),t=t.substring(f.length)}r==="left"||r==="start"||(r==="center"?d[0]=c[0]/-2:r!=="right"&&r!=="end"||(d[0]=-c[0])),s==="top"||(s==="middle"?d[1]=c[1]/-2:s==="bottom"&&(d[1]=-c[1]));const p={xOffset:d[0],yOffset:d[1],width:c[0],height:c[1]};return this.layoutWithBBox(p,h,r,s,a)}GetLayoutByLines(t,e,i,r,s="",a,o,l="end"){t=t.map(d=>d.toString());const u=[],h=[0,0];if(typeof o=="number"&&o!==1/0){let d;for(let p=0,f=t.length;p<f;p++)d=Math.min(this.textMeasure.measureTextWidth(t[p],this.textOptions),o),u.push({str:this.textMeasure.clipTextWithSuffix(t[p],this.textOptions,d,s,a,l).str,width:d});h[0]=o}else{let d,p;o=0;for(let f=0,g=t.length;f<g;f++)p=t[f],d=this.textMeasure.measureTextWidth(p,this.textOptions),o=Math.max(o,d),u.push({str:p,width:d});h[0]=o}h[1]=u.length*r,h[0]=u.reduce((d,p)=>Math.max(d,p.width),0);const c={xOffset:0,yOffset:0,width:h[0],height:h[1]};return this.LayoutBBox(c,e,i),this.layoutWithBBox(c,u,e,i,r)}layoutWithBBox(t,e,i,r,s){const a=[0,0],o=e.length*s;r==="top"||(r==="middle"?a[1]=(t.height-o)/2:r==="bottom"&&(a[1]=t.height-o));for(let l=0;l<e.length;l++)this.lineOffset(t,e[l],i,r,s,a);return{bbox:t,lines:e,fontFamily:this.fontFamily,fontSize:this.textOptions.fontSize,fontWeight:this.textOptions.fontWeight,lineHeight:s,textAlign:i,textBaseline:r}}lineOffset(t,e,i,r,s,a){return i==="left"||i==="start"?e.leftOffset=0:i==="center"?e.leftOffset=(t.width-e.width)/2:i!=="right"&&i!=="end"||(e.leftOffset=t.width-e.width),e.topOffset=(s-this.textOptions.fontSize)/2+.79*this.textOptions.fontSize+a[1],a[1]+=s,e}}const uH=["text","maxLineWidth","textAlign","textBaseline","heightLimit","lineClamp","fontSize","fontFamily","fontWeight","ellipsis","lineHeight","direction","wordBreak","heightLimit","lineClamp",...ya];let _S=class Ul extends qr{get font(){const t=Pt(this).text;return this._font||(this._font=UI(this.attribute,t)),this._font}get clipedText(){var t;const e=this.attribute,i=Pt(this).text;if(!this.isSimplify())return;const{maxLineWidth:r=i.maxLineWidth}=e;return Number.isFinite(r)?(this.tryUpdateAABBBounds(),this.cache.clipedText):((t=e.text)!==null&&t!==void 0?t:i.text).toString()}get clipedWidth(){if(this.isSimplify())return this.tryUpdateAABBBounds(),this.cache.clipedWidth}get cliped(){const t=Pt(this).text,e=this.attribute;if(this.isMultiLine)return;const{maxLineWidth:i=t.maxLineWidth}=e;return!!Number.isFinite(i)&&(this.tryUpdateAABBBounds(),e.direction==="vertical"&&this.cache.verticalList&&this.cache.verticalList[0]?this.cache.verticalList[0].map(r=>r.text).join("")!==e.text.toString():this.clipedText!=null&&this.clipedText!==e.text.toString())}get multilineLayout(){if(this.isMultiLine)return this.tryUpdateAABBBounds(),this.cache.layoutData}isSimplify(){return!this.isMultiLine&&this.attribute.direction!=="vertical"}get isMultiLine(){return Array.isArray(this.attribute.text)||this.attribute.whiteSpace==="normal"}constructor(t={text:"",fontSize:16}){super(t),this.type="text",this.numberType=M2,this.cache={}}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{text:t}=this.attribute;return ut(t)?!t.every(e=>e==null||e===""):t!=null&&t!==""}doUpdateAABBBounds(){const t=Pt(this).text;this._AABBBounds.clear();const e=this.attribute,i=wt.graphicService.updateTextAABBBounds(e,t,this._AABBBounds,this),{boundsPadding:r=t.boundsPadding}=this.attribute,s=br(r);return s&&i.expand(s),this.clearUpdateBoundTag(),i}updateWrapAABBBounds(t){var e,i,r,s;const a=Pt(this).text,{fontFamily:o=a.fontFamily,textAlign:l=a.textAlign,textBaseline:u=a.textBaseline,fontSize:h=a.fontSize,ellipsis:c=a.ellipsis,maxLineWidth:d,stroke:p=a.stroke,lineWidth:f=a.lineWidth,wordBreak:g=a.wordBreak,fontWeight:_=a.fontWeight,ignoreBuf:v=a.ignoreBuf,suffixPosition:y=a.suffixPosition,heightLimit:b=0,lineClamp:S}=this.attribute,A=(e=au(this.attribute.lineHeight,this.attribute.fontSize||a.fontSize))!==null&&e!==void 0?e:this.attribute.fontSize||a.fontSize,w=v?0:2;if(!this.shouldUpdateShape()&&(!((i=this.cache)===null||i===void 0)&&i.layoutData)){const O=this.cache.layoutData.bbox;return this._AABBBounds.set(O.xOffset,O.yOffset,O.xOffset+O.width,O.yOffset+O.height),p&&this._AABBBounds.expand(f/2),this._AABBBounds}const C=wt.graphicUtil.textMeasure,k=new lH(o,{fontSize:h,fontWeight:_,fontFamily:o},C),M=ut(t)?t.map(O=>O.toString()):[t.toString()],P=[],E=[0,0];let I=1/0;if(b>0&&(I=Math.max(Math.floor(b/A),1)),S&&(I=Math.min(I,S)),typeof d=="number"&&d!==1/0){if(d>0)for(let L=0;L<M.length;L++){const H=M[L];let j=!0;if(L===I-1){const U=k.textMeasure.clipTextWithSuffix(H,k.textOptions,d,c,!1,y,L!==M.length-1);P.push({str:U.str,width:U.width});break}const G=k.textMeasure.clipText(H,k.textOptions,d,g==="break-word");if(H!==""&&G.str===""){if(c){const U=k.textMeasure.clipTextWithSuffix(H,k.textOptions,d,c,!1,y);G.str=(r=U.str)!==null&&r!==void 0?r:"",G.width=(s=U.width)!==null&&s!==void 0?s:0}else G.str="",G.width=0;j=!1}if(P.push({str:G.str,width:G.width}),G.str.length!==H.length){if(j){const U=H.substring(G.str.length);M.splice(L+1,0,U)}}}let O=0;P.forEach(L=>{O=Math.max(O,L.width)}),E[0]=O}else{let O,L,H=0;for(let j=0,G=M.length;j<G;j++){if(j===I-1){const U=k.textMeasure.clipTextWithSuffix(M[j],k.textOptions,d,c,!1,y);P.push({str:U.str,width:U.width}),H=Math.max(H,U.width);break}L=M[j],O=k.textMeasure.measureTextWidth(L,k.textOptions,g==="break-word"),H=Math.max(H,O),P.push({str:L,width:O})}E[0]=H}E[1]=P.length*(A+w);const D={xOffset:0,yOffset:0,width:E[0],height:E[1]};k.LayoutBBox(D,l,u);const N=k.layoutWithBBox(D,P,l,u,A);return this.cache.layoutData=N,this.clearUpdateShapeTag(),this._AABBBounds.set(D.xOffset,D.yOffset,D.xOffset+D.width,D.yOffset+D.height),p&&this._AABBBounds.expand(f/2),this._AABBBounds}updateSingallineAABBBounds(t){const e=Pt(this).text,{direction:i=e.direction,underlineOffset:r=e.underlineOffset}=this.attribute,s=i==="horizontal"?this.updateHorizontalSinglelineAABBBounds(t):this.updateVerticalSinglelineAABBBounds(t);return i==="horizontal"&&r&&this._AABBBounds.add(this._AABBBounds.x1,this._AABBBounds.y2+r),s}updateMultilineAABBBounds(t){const e=Pt(this).text,{direction:i=e.direction,underlineOffset:r=e.underlineOffset}=this.attribute,s=i==="horizontal"?this.updateHorizontalMultilineAABBBounds(t):this.updateVerticalMultilineAABBBounds(t);return i==="horizontal"&&r&&this._AABBBounds.add(this._AABBBounds.x1,this._AABBBounds.y2+r),s}updateHorizontalSinglelineAABBBounds(t){var e,i;const r=Pt(this).text,{wrap:s=r.wrap}=this.attribute;if(s)return this.updateWrapAABBBounds([t]);const a=wt.graphicUtil.textMeasure;let o,l;const u=this.attribute,{maxLineWidth:h=r.maxLineWidth,ellipsis:c=r.ellipsis,textAlign:d=r.textAlign,textBaseline:p=r.textBaseline,fontFamily:f=r.fontFamily,fontSize:g=r.fontSize,fontWeight:_=r.fontWeight,stroke:v=r.stroke,lineWidth:y=r.lineWidth,ignoreBuf:b=r.ignoreBuf,whiteSpace:S=r.whiteSpace,suffixPosition:A=r.suffixPosition}=u;if(S==="normal")return this.updateWrapAABBBounds(t);const w=b?0:Math.max(2,.075*g),C=u.fontSize||r.fontSize,k=(e=au(u.lineHeight,C))!==null&&e!==void 0?e:C+w;if(!this.shouldUpdateShape()&&this.cache){o=(i=this.cache.clipedWidth)!==null&&i!==void 0?i:0;const I=iu(d,o),D=al(p,k,g);return this._AABBBounds.set(I,D,I+o,D+k),v&&this._AABBBounds.expand(y/2),this._AABBBounds}if(Number.isFinite(h)){if(c){const I=c===!0?r.ellipsis:c,D=a.clipTextWithSuffix(t.toString(),{fontSize:g,fontWeight:_,fontFamily:f},h,I,!1,A);l=D.str,o=D.width}else{const I=a.clipText(t.toString(),{fontSize:g,fontWeight:_,fontFamily:f},h,!1);l=I.str,o=I.width}this.cache.clipedText=l,this.cache.clipedWidth=o}else o=a.measureTextWidth(t.toString(),{fontSize:g,fontWeight:_,fontFamily:f}),this.cache.clipedText=t.toString(),this.cache.clipedWidth=o;this.clearUpdateShapeTag();const M=iu(d,o);let P=k;wt.global&&wt.global.isSafari()&&(P+=.2*g);const E=al(p,P,g,w);return this._AABBBounds.set(M,E,M+o,E+P),v&&this._AABBBounds.expand(y/2),this._AABBBounds}getBaselineMapAlign(){return Ul.baselineMapAlign}getAlignMapBaseline(){return Ul.alignMapBaseline}updateVerticalSinglelineAABBBounds(t){var e,i,r;const s=Pt(this).text,a=wt.graphicUtil.textMeasure;let o;const l=this.attribute,{ignoreBuf:u=s.ignoreBuf}=l,h=u?0:2,{maxLineWidth:c=s.maxLineWidth,ellipsis:d=s.ellipsis,fontSize:p=s.fontSize,fontWeight:f=s.fontWeight,fontFamily:g=s.fontFamily,stroke:_=s.stroke,lineWidth:v=s.lineWidth,verticalMode:y=s.verticalMode,suffixPosition:b=s.suffixPosition}=l,S=(e=au(l.lineHeight,l.fontSize||s.fontSize))!==null&&e!==void 0?e:(l.fontSize||s.fontSize)+h;let{textAlign:A=s.textAlign,textBaseline:w=s.textBaseline}=l;if(!y){const P=A;A=(i=Ul.baselineMapAlign[w])!==null&&i!==void 0?i:"left",w=(r=Ul.alignMapBaseline[P])!==null&&r!==void 0?r:"top"}if(!this.shouldUpdateShape()&&this.cache){o=this.cache.clipedWidth;const P=iu(A,o),E=al(w,S,p);return this._AABBBounds.set(E,P,E+S,P+o),_&&this._AABBBounds.expand(v/2),this._AABBBounds}let C=[sH(t.toString())];if(Number.isFinite(c)){if(d){const P=d===!0?s.ellipsis:d,E=a.clipTextWithSuffixVertical(C[0],{fontSize:p,fontWeight:f,fontFamily:g},c,P,!1,b);C=[E.verticalList],o=E.width}else{const P=a.clipTextVertical(C[0],{fontSize:p,fontWeight:f,fontFamily:g},c,!1);C=[P.verticalList],o=P.width}this.cache.verticalList=C,this.cache.clipedWidth=o}else o=0,C[0].forEach(P=>{const E=P.direction===Rd.HORIZONTAL?p:a.measureTextWidth(P.text,{fontSize:p,fontWeight:f,fontFamily:g});o+=E,P.width=E}),this.cache.verticalList=C,this.cache.clipedWidth=o;this.clearUpdateShapeTag();const k=iu(A,o),M=al(w,S,p);return this._AABBBounds.set(M,k,M+S,k+o),_&&this._AABBBounds.expand(v/2),this._AABBBounds}updateHorizontalMultilineAABBBounds(t){var e,i;const r=Pt(this).text,{wrap:s=r.wrap}=this.attribute;if(s)return this.updateWrapAABBBounds(t);const a=this.attribute,{fontFamily:o=r.fontFamily,textAlign:l=r.textAlign,textBaseline:u=r.textBaseline,fontSize:h=r.fontSize,fontWeight:c=r.fontWeight,ellipsis:d=r.ellipsis,maxLineWidth:p,stroke:f=r.stroke,lineWidth:g=r.lineWidth,whiteSpace:_=r.whiteSpace,suffixPosition:v=r.suffixPosition}=a,y=(e=au(a.lineHeight,a.fontSize||r.fontSize))!==null&&e!==void 0?e:a.fontSize||r.fontSize;if(_==="normal")return this.updateWrapAABBBounds(t);if(!this.shouldUpdateShape()&&(!((i=this.cache)===null||i===void 0)&&i.layoutData)){const w=this.cache.layoutData.bbox;return this._AABBBounds.set(w.xOffset,w.yOffset,w.xOffset+w.width,w.yOffset+w.height),f&&this._AABBBounds.expand(g/2),this._AABBBounds}const b=wt.graphicUtil.textMeasure,S=new lH(o,{fontSize:h,fontWeight:c,fontFamily:o},b).GetLayoutByLines(t,l,u,y,d===!0?r.ellipsis:d||void 0,!1,p,v),{bbox:A}=S;return this.cache.layoutData=S,this.clearUpdateShapeTag(),this._AABBBounds.set(A.xOffset,A.yOffset,A.xOffset+A.width,A.yOffset+A.height),f&&this._AABBBounds.expand(g/2),this._AABBBounds}updateVerticalMultilineAABBBounds(t){var e,i,r;const s=Pt(this).text,a=wt.graphicUtil.textMeasure;let o;const l=this.attribute,{ignoreBuf:u=s.ignoreBuf}=l,h=u?0:2,{maxLineWidth:c=s.maxLineWidth,ellipsis:d=s.ellipsis,fontFamily:p=s.fontFamily,fontSize:f=s.fontSize,fontWeight:g=s.fontWeight,stroke:_=s.stroke,lineWidth:v=s.lineWidth,verticalMode:y=s.verticalMode,suffixPosition:b=s.suffixPosition}=l,S=(e=au(l.lineHeight,l.fontSize||s.fontSize))!==null&&e!==void 0?e:(l.fontSize||s.fontSize)+h;let{textAlign:A=s.textAlign,textBaseline:w=s.textBaseline}=l;if(!y){const E=A;A=(i=Ul.baselineMapAlign[w])!==null&&i!==void 0?i:"left",w=(r=Ul.alignMapBaseline[E])!==null&&r!==void 0?r:"top"}if(o=0,!this.shouldUpdateShape()&&this.cache){this.cache.verticalList.forEach(N=>{const O=N.reduce((L,H)=>L+H.width,0);o=ls(O,o)});const E=iu(A,o),I=this.cache.verticalList.length*S,D=al(w,I,f);return this._AABBBounds.set(D,E,D+I,E+o),_&&this._AABBBounds.expand(v/2),this._AABBBounds}const C=t.map(E=>sH(E.toString()));C.forEach((E,I)=>{if(Number.isFinite(c))if(d){const D=d===!0?s.ellipsis:d,N=a.clipTextWithSuffixVertical(E,{fontSize:f,fontWeight:g,fontFamily:p},c,D,!1,b);C[I]=N.verticalList,o=N.width}else{const D=a.clipTextVertical(E,{fontSize:f,fontWeight:g,fontFamily:p},c,!1);C[I]=D.verticalList,o=D.width}else o=0,E.forEach(D=>{const N=D.direction===Rd.HORIZONTAL?f:a.measureTextWidth(D.text,{fontSize:f,fontWeight:g,fontFamily:p});o+=N,D.width=N})}),this.cache.verticalList=C,this.clearUpdateShapeTag(),this.cache.verticalList.forEach(E=>{const I=E.reduce((D,N)=>D+N.width,0);o=ls(I,o)});const k=iu(A,o),M=this.cache.verticalList.length*S,P=al(w,M,f);return this._AABBBounds.set(P,k,P+M,k+o),_&&this._AABBBounds.expand(v/2),this._AABBBounds}tryUpdateOBBBounds(){throw new Error("暂不支持")}getDefaultAttribute(t){return Pt(this).text[t]}needUpdateTags(t,e=uH){return super.needUpdateTags(t,e)}needUpdateTag(t,e=uH){return super.needUpdateTag(t,e)}clone(){return new Ul(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return Ul.NOWORK_ANIMATE_ATTR}};_S.NOWORK_ANIMATE_ATTR=Object.assign({ellipsis:1,wordBreak:1,direction:1,textAlign:1,textBaseline:1,fontFamily:1,fontWeight:1},Ar),_S.baselineMapAlign={top:"left",bottom:"right",middle:"center"},_S.alignMapBaseline={left:"top",right:"bottom",center:"middle"};function Ug(n){return new _S(n)}class In{bounds(t,e){if(Mt(t)){const i=t/2;e.x1=-i,e.x2=i,e.y1=-i,e.y2=i}else e.x1=-t[0]/2,e.x2=t[0]/2,e.y1=-t[1]/2,e.y2=t[1]/2}}function hH(n,t,e,i,r){return r?n.arc(e,i,t,0,Bn,!1,r):n.arc(e,i,t,0,Bn),!1}class oPt extends In{constructor(){super(...arguments),this.type="circle",this.pathStr="M0.5,0A0.5,0.5,0,1,1,-0.5,0A0.5,0.5,0,1,1,0.5,0"}draw(t,e,i,r,s){return hH(t,e/2,i,r,s)}drawOffset(t,e,i,r,s,a){return hH(t,e/2+s,i,r,a)}drawToSvgPath(t,e,i,r){const s=t/2;return`M ${e-s}, ${i} a ${s},${s} 0 1,0 ${2*s},0 a ${s},${s} 0 1,0 -${2*s},0`}}const lPt=new oPt;function uPt(n,t,e,i,r){return n.moveTo(-3*t+e,-t+i,r),n.lineTo(-t+e,-t+i,r),n.lineTo(-t+e,-3*t+i,r),n.lineTo(t+e,-3*t+i,r),n.lineTo(t+e,-t+i,r),n.lineTo(3*t+e,-t+i,r),n.lineTo(3*t+e,t+i,r),n.lineTo(t+e,t+i,r),n.lineTo(t+e,3*t+i,r),n.lineTo(-t+e,3*t+i,r),n.lineTo(-t+e,t+i,r),n.lineTo(-3*t+e,t+i,r),n.closePath(),!0}function hPt(n,t,e,i,r,s){return n.moveTo(-3*t+e-r,-t+i-r,s),n.lineTo(-t+e-r,-t+i-r,s),n.lineTo(-t+e-r,-3*t+i-r,s),n.lineTo(t+e+r,-3*t+i-r,s),n.lineTo(t+e+r,-t+i-r,s),n.lineTo(3*t+e+r,-t+i-r,s),n.lineTo(3*t+e+r,t+i+r,s),n.lineTo(t+e+r,t+i+r,s),n.lineTo(t+e+r,3*t+i+r,s),n.lineTo(-t+e-r,3*t+i+r,s),n.lineTo(-t+e-r,t+i+r,s),n.lineTo(-3*t+e-r,t+i+r,s),n.closePath(),!0}class cPt extends In{constructor(){super(...arguments),this.type="cross",this.pathStr="M-0.5,-0.2L-0.5,0.2L-0.2,0.2L-0.2,0.5L0.2,0.5L0.2,0.2L0.5,0.2L0.5,-0.2L0.2,-0.2L0.2,-0.5L-0.2,-0.5L-0.2,-0.2Z"}draw(t,e,i,r,s){return uPt(t,e/6,i,r,s)}drawOffset(t,e,i,r,s,a){return hPt(t,e/6,i,r,s,a)}}const dPt=new cPt;function mE(n,t,e,i,r){return n.moveTo(e,i-t,r),n.lineTo(t+e,i,r),n.lineTo(e,i+t,r),n.lineTo(e-t,i,r),n.closePath(),!0}class pPt extends In{constructor(){super(...arguments),this.type="diamond",this.pathStr="M-0.5,0L0,-0.5L0.5,0L0,0.5Z"}draw(t,e,i,r,s){return mE(t,e/2,i,r,s)}drawFitDir(t,e,i,r,s){return mE(t,e/2,i,r,s)}drawOffset(t,e,i,r,s,a){return mE(t,e/2+s,i,r,a)}}const fPt=new pPt;function cH(n,t,e,i){const r=2*t;return n.rect(e-t,i-t,r,r),!1}class gPt extends In{constructor(){super(...arguments),this.type="square",this.pathStr="M-0.5,-0.5h1v1h-1Z"}draw(t,e,i,r){return cH(t,e/2,i,r)}drawOffset(t,e,i,r,s){return cH(t,e/2+s,i,r)}}const mPt=new gPt;function vPt(n,t,e,i){return n.moveTo(e+t,t+i),n.lineTo(e-t,t+i),n.lineTo(e,i-t),n.closePath(),!0}function _Pt(n,t,e,i,r){return n.moveTo(e+t+2*r,t+i+r),n.lineTo(e-t-2*r,t+i+r),n.lineTo(e,i-t-2*r),n.closePath(),!0}class eF extends In{constructor(){super(...arguments),this.type="triangleUp",this.pathStr="M0.5,0.5 L-0.5,0.5 L0,-0.5 Z"}draw(t,e,i,r){return vPt(t,e/2,i,r)}drawOffset(t,e,i,r,s){return _Pt(t,e/2,i,r,s)}}const yPt=new eF;class bPt extends eF{constructor(){super(...arguments),this.type="triangle"}}const xPt=new bPt,WJ=Math.sin(Math.PI/10)/Math.sin(7*Math.PI/10),SPt=Math.sin(Bn/10)*WJ,APt=-Math.cos(Bn/10)*WJ;function dH(n,t,e,i){const r=SPt*t,s=APt*t;n.moveTo(e,-t+i),n.lineTo(r+e,s+i);for(let a=1;a<5;++a){const o=Bn*a/5,l=Math.cos(o),u=Math.sin(o);n.lineTo(u*t+e,-l*t+i),n.lineTo(l*r-u*s+e,u*r+l*s+i)}return n.closePath(),!0}class wPt extends In{constructor(){super(...arguments),this.type="star",this.pathStr="M0 -1L0.22451398828979266 -0.3090169943749474L0.9510565162951535 -0.30901699437494745L0.3632712640026804 0.1180339887498948L0.5877852522924732 0.8090169943749473L8.326672684688674e-17 0.3819660112501051L-0.587785252292473 0.8090169943749476L-0.3632712640026804 0.11803398874989487L-0.9510565162951536 -0.30901699437494723L-0.22451398828979274 -0.30901699437494734Z"}draw(t,e,i,r){return dH(t,e/2,i,r)}drawOffset(t,e,i,r,s){return dH(t,e/2+s,i,r)}}const CPt=new wPt,kPt=hs(3);function pH(n,t,e,i){const r=t,s=r/kPt,a=s/5,o=t;return n.moveTo(0+e,-r+i),n.lineTo(s/2+e,i),n.lineTo(a/2+e,i),n.lineTo(a/2+e,o+i),n.lineTo(-a/2+e,o+i),n.lineTo(-a/2+e,i),n.lineTo(-s/2+e,i),n.closePath(),!0}class TPt extends In{constructor(){super(...arguments),this.type="arrow",this.pathStr="M-0.07142857142857142,0.5L0.07142857142857142,0.5L0.07142857142857142,-0.0625L0.2,-0.0625L0,-0.5L-0.2,-0.0625L-0.07142857142857142,-0.0625Z"}draw(t,e,i,r){return pH(t,e/2,i,r)}drawOffset(t,e,i,r,s){return pH(t,e/2+s,i,r)}}const MPt=new TPt;function fH(n,t,e,i){const r=2*t;return n.moveTo(e,-t+i),n.lineTo(r/3/2+e,t+i),n.lineTo(-r/3/2+e,t+i),n.closePath(),!0}class PPt extends In{constructor(){super(...arguments),this.type="wedge",this.pathStr="M0,-0.5773502691896257L-0.125,0.28867513459481287L0.125,0.28867513459481287Z"}draw(t,e,i,r){return fH(t,e/2,i,r)}drawOffset(t,e,i,r,s){return fH(t,e/2+s,i,r)}}const EPt=new PPt;function gH(n,t,e,i){return n.moveTo(-t+e,i),n.lineTo(e,t+i),!1}class OPt extends In{constructor(){super(...arguments),this.type="stroke",this.pathStr=""}draw(t,e,i,r){return gH(t,e/2,i,r)}drawOffset(t,e,i,r,s){return gH(t,e/2+s,i,r)}}const RPt=new OPt,Ra=-.5,Ia=hs(3)/2,mH=1/hs(12);function vH(n,t,e,i){const r=t/2,s=t*mH,a=r,o=t*mH+t,l=-a,u=o;return n.moveTo(r+e,s+i),n.lineTo(a+e,o+i),n.lineTo(l+e,u+i),n.lineTo(Ra*r-Ia*s+e,Ia*r+Ra*s+i),n.lineTo(Ra*a-Ia*o+e,Ia*a+Ra*o+i),n.lineTo(Ra*l-Ia*u+e,Ia*l+Ra*u+i),n.lineTo(Ra*r+Ia*s+e,Ra*s-Ia*r+i),n.lineTo(Ra*a+Ia*o+e,Ra*o-Ia*a+i),n.lineTo(Ra*l+Ia*u+e,Ra*u-Ia*l+i),n.closePath(),!1}class IPt extends In{constructor(){super(...arguments),this.type="wye",this.pathStr="M0.25 0.14433756729740646L0.25 0.6443375672974064L-0.25 0.6443375672974064L-0.25 0.14433756729740643L-0.6830127018922193 -0.10566243270259357L-0.4330127018922193 -0.5386751345948129L0 -0.28867513459481287L0.4330127018922193 -0.5386751345948129L0.6830127018922193 -0.10566243270259357Z"}draw(t,e,i,r){return vH(t,e/2,i,r)}drawOffset(t,e,i,r,s){return vH(t,e/2+s,i,r)}}const LPt=new IPt;function DPt(n,t,e,i){return n.moveTo(-t+e,i),n.lineTo(t+e,t+i),n.lineTo(t+e,i-t),n.closePath(),!0}function BPt(n,t,e,i,r){return n.moveTo(-t+e-2*r,i),n.lineTo(t+e+r,t+i+2*r),n.lineTo(t+e+r,i-t-2*r),n.closePath(),!0}class FPt extends In{constructor(){super(...arguments),this.type="triangleLeft",this.pathStr="M-0.5,0 L0.5,0.5 L0.5,-0.5 Z"}draw(t,e,i,r){return DPt(t,e/2,i,r)}drawOffset(t,e,i,r,s){return BPt(t,e/2,i,r,s)}}const jPt=new FPt;function NPt(n,t,e,i){return n.moveTo(e-t,t+i),n.lineTo(t+e,i),n.lineTo(e-t,i-t),n.closePath(),!0}function zPt(n,t,e,i,r){return n.moveTo(e-t-r,t+i+2*r),n.lineTo(t+e+2*r,i),n.lineTo(e-t-r,i-t-2*r),n.closePath(),!0}class HPt extends In{constructor(){super(...arguments),this.type="triangleRight",this.pathStr="M-0.5,0.5 L0.5,0 L-0.5,-0.5 Z"}draw(t,e,i,r){return NPt(t,e/2,i,r)}drawOffset(t,e,i,r,s){return zPt(t,e/2,i,r,s)}}const VPt=new HPt;function WPt(n,t,e,i){return n.moveTo(e-t,i-t),n.lineTo(e+t,i-t),n.lineTo(e,i+t),n.closePath(),!0}function $Pt(n,t,e,i,r){return n.moveTo(e-t-2*r,i-t-r),n.lineTo(e+t+2*r,i-t-r),n.lineTo(e,i+t+2*r),n.closePath(),!0}class GPt extends In{constructor(){super(...arguments),this.type="triangleDown",this.pathStr="M-0.5,-0.5 L0.5,-0.5 L0,0.5 Z"}draw(t,e,i,r){return WPt(t,e/2,i,r)}drawOffset(t,e,i,r,s){return $Pt(t,e/2,i,r,s)}}const UPt=new GPt,YI=hs(3);function _H(n,t,e,i){const r=t*YI;return n.moveTo(e,i+-r/3*2),n.lineTo(t+e,i+r),n.lineTo(e-t,i+r),n.closePath(),!0}class YPt extends eF{constructor(){super(...arguments),this.type="thinTriangle",this.pathStr="M0,-0.5773502691896257L-0.5,0.28867513459481287L0.5,0.28867513459481287Z"}draw(t,e,i,r){return _H(t,e/2/YI,i,r)}drawOffset(t,e,i,r,s){return _H(t,e/2/YI+s,i,r)}}const XPt=new YPt;function yH(n,t,e,i){const r=2*t;return n.moveTo(t+e,i-r),n.lineTo(e-t,i),n.lineTo(t+e,r+i),!0}class KPt extends In{constructor(){super(...arguments),this.type="arrow2Left",this.pathStr="M 0.25 -0.5 L -0.25 0 l 0.25 0.5"}draw(t,e,i,r){return yH(t,e/4,i,r)}drawOffset(t,e,i,r,s){return yH(t,e/4+s,i,r)}}const qPt=new KPt;function bH(n,t,e,i){const r=2*t;return n.moveTo(e-t,i-r),n.lineTo(e+t,i),n.lineTo(e-t,r+i),!0}class ZPt extends In{constructor(){super(...arguments),this.type="arrow2Right",this.pathStr="M -0.25 -0.5 l 0.25 0 l -0.25 0.5"}draw(t,e,i,r){return bH(t,e/4,i,r)}drawOffset(t,e,i,r,s){return bH(t,e/4+s,i,r)}}const JPt=new ZPt;function xH(n,t,e,i){const r=2*t;return n.moveTo(e-r,i+t),n.lineTo(e,i-t),n.lineTo(e+r,i+t),!0}class QPt extends In{constructor(){super(...arguments),this.type="arrow2Up",this.pathStr="M -0.5 0.25 L 0 -0.25 l 0.5 0.25"}draw(t,e,i,r){return xH(t,e/4,i,r)}drawOffset(t,e,i,r,s){return xH(t,e/4+s,i,r)}}const tEt=new QPt;function SH(n,t,e,i){const r=2*t;return n.moveTo(e-r,i-t),n.lineTo(e,i+t),n.lineTo(e+r,i-t),!0}class eEt extends In{constructor(){super(...arguments),this.type="arrow2Down",this.pathStr="M -0.5 -0.25 L 0 0.25 l 0.5 -0.25"}draw(t,e,i,r){return SH(t,e/4,i,r)}drawOffset(t,e,i,r,s){return SH(t,e/4+s,i,r)}}const iEt=new eEt;function AH(n,t,e,i,r){return n.moveTo(e,i-t),n.lineTo(e,i+t),!0}class nEt extends In{constructor(){super(...arguments),this.type="lineV",this.pathStr="M0,-0.5L0,0.5"}draw(t,e,i,r,s){return AH(t,e/2,i,r)}drawOffset(t,e,i,r,s,a){return AH(t,e/2+s,i,r)}drawToSvgPath(t,e,i,r){const s=t/2;return`M ${e}, ${i-s} L ${e},${i+s}`}}const rEt=new nEt;function wH(n,t,e,i,r){return n.moveTo(e-t,i),n.lineTo(e+t,i),!0}class sEt extends In{constructor(){super(...arguments),this.type="lineH",this.pathStr="M-0.5,0L0.5,0"}draw(t,e,i,r,s){return wH(t,e/2,i,r)}drawOffset(t,e,i,r,s,a){return wH(t,e/2+s,i,r)}drawToSvgPath(t,e,i,r){const s=t/2;return`M ${e-s}, ${i} L ${e+s},${i}`}}const aEt=new sEt;function CH(n,t,e,i,r){return n.moveTo(e-t,i-t),n.lineTo(e+t,i+t),n.moveTo(e+t,i-t),n.lineTo(e-t,i+t),!0}class oEt extends In{constructor(){super(...arguments),this.type="close",this.pathStr="M-0.5,-0.5L0.5,0.5,M0.5,-0.5L-0.5,0.5"}draw(t,e,i,r,s){return CH(t,e/2,i,r)}drawOffset(t,e,i,r,s,a){return CH(t,e/2+s,i,r)}drawToSvgPath(t,e,i,r){const s=t/2;return`M ${e-s}, ${i-s} L ${e+s},${i+s} M ${e+s}, ${i-s} L ${e-s},${i+s}`}}const lEt=new oEt;function kH(n,t,e,i){return n.rect(e-t[0]/2,i-t[1]/2,t[0],t[1]),!1}function TH(n,t,e,i){const r=t,s=t/2;return n.rect(e-r/2,i-s/2,r,s),!1}class uEt extends In{constructor(){super(...arguments),this.type="rect",this.pathStr="M -0.5,0.25 L 0.5,0.25 L 0.5,-0.25,L -0.5,-0.25 Z"}draw(t,e,i,r){return Mt(e)?TH(t,e,i,r):kH(t,e,i,r)}drawOffset(t,e,i,r,s){return Mt(e)?TH(t,e+2*s,i,r):kH(t,[e[0]+2*s,e[1]+2*s],i,r)}}const hEt=new uEt,Av=new Ai;class MH{constructor(t,e,i=!1){this.pathStr="",this.type=t,ut(e)?this.svgCache=e:this.path=e,this.isSvg=i}drawOffset(t,e,i,r,s,a,o){return this.isSvg?!!this.svgCache&&(this.svgCache.forEach(l=>{t.beginPath(),cu(l.path.commandList,t,i,r,e,e),o&&o(l.path,l.attribute)}),!1):(cu(this.path.commandList,t,i,r,e+s,e+s),!1)}draw(t,e,i,r,s,a){return this.isSvg?!!this.svgCache&&(this.svgCache.forEach(o=>{t.beginPath(),cu(o.path.commandList,t,i,r,e,e),a&&a(o.path,o.attribute)}),!1):(cu(this.path.commandList,t,i,r,e,e),!1)}bounds(t,e){if(this.isSvg)return this.svgCache?(e.clear(),void this.svgCache.forEach(({path:i})=>{Av.x1=i.bounds.x1*t,Av.y1=i.bounds.y1*t,Av.x2=i.bounds.x2*t,Av.y2=i.bounds.y2*t,e.union(Av)})):void 0;this.path.bounds&&(e.x1=this.path.bounds.x1*t,e.y1=this.path.bounds.y1*t,e.x2=this.path.bounds.x2*t,e.y2=this.path.bounds.y2*t)}}const cEt=[lPt,dPt,fPt,mPt,XPt,xPt,CPt,MPt,EPt,RPt,LPt,jPt,VPt,yPt,UPt,qPt,JPt,tEt,iEt,hEt,rEt,aEt,lEt],WA={};cEt.forEach(n=>{WA[n.type]=n});const dEt={arrowLeft:"M 0.25 -0.5 L -0.25 0 l 0.5 0.5",arrowRight:"M -0.25 -0.5 l 0.5 0.5 l -0.5 0.5",rectRound:"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z",roundLine:"M 1.2392 -0.258 L -1.3432 -0.258 C -1.4784 -0.258 -1.588 -0.1436 -1.588 -0.002 c 0 0.1416 0.1096 0.256 0.2448 0.256 l 2.5824 0 c 0.1352 0 0.2448 -0.1144 0.2448 -0.256 C 1.484 -0.1436 1.3744 -0.258 1.2392 -0.258 z"},wx=new Ai,PH=["symbolType","size",...ya];let uy=class lf extends qr{constructor(t={symbolType:"circle"}){super(t),this.type="symbol",this.numberType=T2}getParsedPath(){return this.shouldUpdateShape()&&(this.doUpdateParsedPath(),this.clearUpdateShapeTag()),this._parsedPath}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{size:t}=this.attribute;return ut(t)?t.length===2&&t.every(this._validNumber):this._validNumber(t)}doUpdateParsedPath(){const t=Pt(this).symbol;let{symbolType:e=t.symbolType}=this.attribute,i=WA[e];if(i)return this._parsedPath=i,i;if(i=lf.userSymbolMap[e],i)return this._parsedPath=i,i;if(e=dEt[e]||e,VMt(e)===!0){const l=new y2,{svg:u}=l.parse(e);if(!u)return null;const h=ut(u.path)?u.path:[u.path];wx.clear();const c=[];h.forEach(g=>{const _=new En().fromString(g.d),v={};qMt.forEach(y=>{g[y]&&(v[DJ[y]]=g[y])}),c.push({path:_,attribute:v}),wx.union(_.bounds)});const d=wx.width(),p=wx.height(),f=1/ls(d,p);return c.forEach(g=>g.path.transform(0,0,f,f)),this._parsedPath=new MH(e,c,!0),lf.userSymbolMap[e]=this._parsedPath,this._parsedPath}const r=new En().fromString(e),s=r.bounds.width(),a=r.bounds.height(),o=1/ls(s,a);return r.transform(0,0,o,o),this._parsedPath=new MH(e,r),lf.userSymbolMap[e]=this._parsedPath,this._parsedPath}doUpdateAABBBounds(t){const e=Pt(this).symbol;this._AABBBounds.clear();const i=this.attribute,r=wt.graphicService.updateSymbolAABBBounds(i,Pt(this).symbol,this._AABBBounds,t,this),{boundsPadding:s=e.boundsPadding}=i,a=br(s);return a&&r.expand(a),this.clearUpdateBoundTag(),r}tryUpdateOBBBounds(){throw new Error("暂不支持")}getDefaultAttribute(t){return Pt(this).symbol[t]}needUpdateTags(t){return super.needUpdateTags(t,PH)}needUpdateTag(t){return super.needUpdateTag(t,PH)}toCustomPath(){const t=this.getParsedPath(),e=this.attribute.size,i=ut(e)?e:[e,e];return t.path?new En().fromCustomPath2D(t.path,0,0,i[0],i[1]):new En().fromString(t.pathStr,0,0,i[0],i[1])}clone(){return new lf(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return lf.NOWORK_ANIMATE_ATTR}};uy.userSymbolMap={},uy.NOWORK_ANIMATE_ATTR=Object.assign({symbolType:1},Ar);function P2(n){return new uy(n)}const EH=["segments","points","curveType",...ya];let $J=class XI extends qr{constructor(t={}){super(t),this.type="line",this.numberType=y1}isValid(){return super.isValid()&&this._isValid()}_isValid(){if(this.pathProxy)return!0;const{points:t,segments:e}=this.attribute;return e?e.length!==0:!!t&&!(t.length<=1)}_interpolate(t,e,i,r,s){t==="points"&&(s.points=H3(i,r,e))}doUpdateAABBBounds(){const t=Pt(this).line;this._AABBBounds.clear();const e=this.attribute,i=wt.graphicService.updateLineAABBBounds(e,Pt(this).line,this._AABBBounds,this),{boundsPadding:r=t.boundsPadding}=e,s=br(r);return s&&i.expand(s),this.clearUpdateBoundTag(),i}tryUpdateOBBBounds(){throw new Error("暂不支持")}getDefaultAttribute(t){return Pt(this).line[t]}needUpdateTags(t){return super.needUpdateTags(t,EH)}needUpdateTag(t){return super.needUpdateTag(t,EH)}toCustomPath(){const t=this.attribute,e=new En,i=t.segments,r=s=>{if(s&&s.length){let a=!0;s.forEach(o=>{o.defined!==!1&&(a?e.moveTo(o.x,o.y):e.lineTo(o.x,o.y),a=!1)})}};return i&&i.length?i.forEach(s=>{r(s.points)}):t.points&&r(t.points),e}clone(){return new XI(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return XI.NOWORK_ANIMATE_ATTR}};$J.NOWORK_ANIMATE_ATTR=Object.assign({segments:1,curveType:1},Ar);function iF(n){return new $J(n)}const OH=["width","x1","y1","height","cornerRadius",...ya];class Yg extends qr{constructor(t){super(t),this.type="rect",this.numberType=k2}isValid(){return super.isValid()&&this._isValid()}_isValid(){return!0}doUpdateAABBBounds(){const t=Pt(this).rect;this._AABBBounds.clear();const e=this.attribute,i=wt.graphicService.updateRectAABBBounds(e,Pt(this).rect,this._AABBBounds,this),{boundsPadding:r=t.boundsPadding}=e,s=br(r);return s&&i.expand(s),this.clearUpdateBoundTag(),i}tryUpdateOBBBounds(){throw new Error("暂不支持")}getDefaultAttribute(t){return Pt(this).rect[t]}needUpdateTags(t){return super.needUpdateTags(t,OH)}needUpdateTag(t){return super.needUpdateTag(t,OH)}toCustomPath(){const t=this.attribute,{x:e,y:i,width:r,height:s}=bJ(t),a=new En;return a.moveTo(e,i),a.rect(e,i,r,s),a}clone(){return new Yg(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return Yg.NOWORK_ANIMATE_ATTR}}Yg.NOWORK_ANIMATE_ATTR=Ar;function ep(n){return new Yg(n)}const RH=[[0,0,0],[1,0,0],[1,1,0],[0,1,0],[0,0,1],[1,0,1],[1,1,1],[0,1,1]];class E2 extends Yg{constructor(t){super(t),this.type="rect3d",this.numberType=Y3}findFace(){const t={polygons:[],vertices:[],edges:[]},e=Pt(this).rect,{x1:i,y1:r,x:s,y:a,length:o=nr(e.width,e.height)}=this.attribute;let{width:l,height:u}=this.attribute;l=l??i-s,u=u??r-a;for(let h=0;h<RH.length;h++){const c=RH[h];t.vertices.push([c[0]*l,c[1]*u,c[2]*o])}return t.polygons.push({polygon:[0,1,5,4],normal:[0,-1,0]}),t.polygons.push({polygon:[2,3,7,6],normal:[0,1,0]}),t.polygons.push({polygon:[4,7,3,0],normal:[-1,0,0]}),t.polygons.push({polygon:[1,2,6,5],normal:[1,0,0]}),t.polygons.push({polygon:[0,1,2,3],normal:[0,0,-1]}),t.polygons.push({polygon:[4,5,6,7],normal:[0,0,1]}),t.edges=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[3,7],[1,5],[2,6]],t}getNoWorkAnimateAttr(){return E2.NOWORK_ANIMATE_ATTR}}E2.NOWORK_ANIMATE_ATTR=Ar;function GJ(n){return new E2(n)}class hy extends qr{constructor(t){super(t),this.type="glyph",this.numberType=S2,this.subGraphic=[],this._onInit&&this._onInit(this),this.valid=this.isValid()}setSubGraphic(t){this.detachSubGraphic(),this.subGraphic=t,t.forEach(e=>{e.glyphHost=this,Object.setPrototypeOf(e.attribute,this.attribute)}),this.valid=this.isValid(),this.addUpdateBoundTag()}detachSubGraphic(){this.subGraphic.forEach(t=>{t.glyphHost=null,Object.setPrototypeOf(t.attribute,{})})}getSubGraphic(){return this.subGraphic}onInit(t){this._onInit=t}onUpdate(t){this._onUpdate=t}isValid(){return!0}setAttribute(t,e,i,r){super.setAttribute(t,e,i,r),this.subGraphic.forEach(s=>{s.addUpdateShapeAndBoundsTag(),s.addUpdatePositionTag()})}setAttributes(t,e=!1,i){super.setAttributes(t,e,i),this.subGraphic.forEach(r=>{r.addUpdateShapeAndBoundsTag(),r.addUpdatePositionTag()})}translate(t,e){return super.translate(t,e),this.subGraphic.forEach(i=>{i.addUpdatePositionTag(),i.addUpdateBoundTag()}),this}translateTo(t,e){return super.translateTo(t,e),this.subGraphic.forEach(i=>{i.addUpdatePositionTag(),i.addUpdateBoundTag()}),this}scale(t,e,i){return super.scale(t,e,i),this.subGraphic.forEach(r=>{r.addUpdatePositionTag(),r.addUpdateBoundTag()}),this}scaleTo(t,e){return super.scaleTo(t,e),this.subGraphic.forEach(i=>{i.addUpdatePositionTag(),i.addUpdateBoundTag()}),this}rotate(t){return super.rotate(t),this.subGraphic.forEach(e=>{e.addUpdatePositionTag(),e.addUpdateBoundTag()}),this}rotateTo(t){return super.rotate(t),this.subGraphic.forEach(e=>{e.addUpdatePositionTag(),e.addUpdateBoundTag()}),this}doUpdateAABBBounds(){this._AABBBounds.clear();const t=wt.graphicService.updateGlyphAABBBounds(this.attribute,Pt(this).glyph,this._AABBBounds,this);return this.clearUpdateBoundTag(),t}tryUpdateOBBBounds(){throw new Error("暂不支持")}needUpdateTags(t){return!1}needUpdateTag(t){return!1}useStates(t,e){var i;if(!t.length)return void this.clearStates(e);if(!(((i=this.currentStates)===null||i===void 0?void 0:i.length)!==t.length||t.some((a,o)=>this.currentStates[o]!==a)))return;this.stopStateAnimates();const r={},s=this.subGraphic.map(()=>({}));t.forEach(a=>{var o;const l=this.glyphStateProxy?this.glyphStateProxy(a,t):this.glyphStates[a];l&&(Object.assign(r,l.attributes),!((o=l.subAttributes)===null||o===void 0)&&o.length&&s.forEach((u,h)=>{Object.assign(u,l.subAttributes[h])}))}),this.subGraphic.forEach((a,o)=>{a.updateNormalAttrs(s[o]),a.applyStateAttrs(s[o],t,e)}),this.updateNormalAttrs(r),this.currentStates=t,this.applyStateAttrs(r,t,e)}clearStates(t){this.stopStateAnimates(),this.hasState()&&this.normalAttrs?(this.currentStates=[],this.subGraphic.forEach(e=>{e.applyStateAttrs(e.normalAttrs,this.currentStates,t,!0),e.normalAttrs=null}),this.applyStateAttrs(this.normalAttrs,this.currentStates,t,!0)):this.currentStates=[],this.normalAttrs=null}clone(){const t=new hy(Object.assign({},this.attribute));return t.setSubGraphic(this.subGraphic.map(e=>e.clone())),t}getNoWorkAnimateAttr(){return hy.NOWORK_ANIMATE_ATTR}}hy.NOWORK_ANIMATE_ATTR=Ar;function UJ(n){return new hy(n)}class pEt{constructor(t,e,i,r,s,a,o,l,u,h,c,d,p,f){this.left=t,this.top=e,this.width=i,this.height=r,this.actualHeight=0,this.bottom=e+r,this.right=t+i,this.ellipsis=s,this.wordBreak=a,this.verticalDirection=o,this.lines=[],this.globalAlign=l,this.globalBaseline=u,this.layoutDirection=h,this.directionKey=N3[this.layoutDirection],this.isWidthMax=c,this.isHeightMax=d,this.singleLine=p,f?(f.clear(),this.icons=f):this.icons=new Map}draw(t,e){const{width:i,height:r}=this.getActualSize(),s=this.isWidthMax?Math.min(this.width,i):this.width||i||0;let a=this.isHeightMax?Math.min(this.height,r):this.height||r||0;a=Math.min(a,r);let o=0;switch(this.globalBaseline){case"top":o=0;break;case"middle":o=-a/2;break;case"bottom":o=-a}let l=0;this.globalAlign==="right"||this.globalAlign==="end"?l=-s:this.globalAlign==="center"&&(l=-s/2);let u=this[this.directionKey.height];this.singleLine&&(u=this.lines[0].height+1);let h=!1;if(this.verticalDirection==="middle")if(this.actualHeight>=u&&u!==0)for(let c=0;c<this.lines.length;c++){const{top:d,height:p}=this.lines[c];if(d+p<this[this.directionKey.top]||d+p>this[this.directionKey.top]+u)return h;let f=!1;this.ellipsis&&this.lines[c+1]&&this.lines[c+1].top+this.lines[c+1].height>this[this.directionKey.top]+u&&(f=!0,h=!0),this.lines[c].draw(t,f,this.lines[c][this.directionKey.left]+l,this.lines[c][this.directionKey.top]+o,this.ellipsis,e)}else{const c=Math.floor((u-this.actualHeight)/2);this.layoutDirection==="vertical"?l+=c:o+=c;for(let d=0;d<this.lines.length;d++)this.lines[d].draw(t,!1,this.lines[d][this.directionKey.left]+l,this.lines[d][this.directionKey.top]+o,this.ellipsis,e)}else if(this.verticalDirection==="bottom"&&this.layoutDirection!=="vertical")for(let c=0;c<this.lines.length;c++){const{top:d,height:p}=this.lines[c],f=u-this.lines[c].top-this.lines[c].height;if(u===0)this.lines[c].draw(t,!1,l,f+o,this.ellipsis,e);else{if(f+p>this[this.directionKey.top]+u||f<this[this.directionKey.top])return h;{let g=!1;this.ellipsis&&this.lines[c+1]&&f-this.lines[c+1].height<this[this.directionKey.top]&&(g=!0,h=!0),this.lines[c].draw(t,g,l,f+o,this.ellipsis,e)}}}else{this.verticalDirection==="bottom"&&this.layoutDirection==="vertical"&&this.singleLine&&this.isWidthMax&&(l+=this.lines[0].height+1);for(let c=0;c<this.lines.length;c++){this.verticalDirection==="bottom"&&this.layoutDirection==="vertical"&&(l-=this.lines[c].height+this.lines[c].top);const{top:d,height:p}=this.lines[c];if(u===0)this.lines[c].draw(t,!1,this.lines[c][this.directionKey.left]+l,this.lines[c][this.directionKey.top]+o,this.ellipsis,e);else{if(d+p<this[this.directionKey.top]||d+p>this[this.directionKey.top]+u)return h;{let f=!1;this.ellipsis&&this.lines[c+1]&&this.lines[c+1].top+this.lines[c+1].height>this[this.directionKey.top]+u&&(f=!0,h=!0),this.lines[c].draw(t,f,this.lines[c][this.directionKey.left]+l,this.lines[c][this.directionKey.top]+o,this.ellipsis,e)}}}}return h}getActualSize(){return this.ellipsis?this.getActualSizeWidthEllipsis():this.getRawActualSize()}getRawActualSize(){let t=0,e=0;for(let i=0;i<this.lines.length;i++){const r=this.lines[i];r.actualWidth>t&&(t=r.actualWidth),e+=r.height}return{width:this.layoutDirection==="vertical"?e:t,height:this.layoutDirection==="vertical"?t:e}}getActualSizeWidthEllipsis(){let t=0,e=0;const{width:i,height:r}=this.getRawActualSize();this.width,this.height;let s=this[this.directionKey.height];if(this.singleLine&&(s=this.lines[0].height+1),this.verticalDirection==="middle")if(this.actualHeight>=s&&s!==0)for(let a=0;a<this.lines.length;a++){const{top:o,height:l}=this.lines[a];if(!(o+l<this[this.directionKey.top]||o+l>this[this.directionKey.top]+s))if(this.ellipsis&&this.lines[a+1]&&this.lines[a+1].top+this.lines[a+1].height>this[this.directionKey.top]+s){const u=this.ellipsis===!0?"...":this.ellipsis||"",h=this.lines[a].getWidthWithEllips(u);h>t&&(t=h),e+=this.lines[a].height}else this.lines[a].actualWidth>t&&(t=this.lines[a].actualWidth),e+=this.lines[a].height}else{Math.floor((s-this.actualHeight)/2);for(let a=0;a<this.lines.length;a++)this.lines[a].actualWidth>t&&(t=this.lines[a].actualWidth),e+=this.lines[a].height}else if(this.verticalDirection==="bottom")for(let a=0;a<this.lines.length;a++){const{top:o,height:l}=this.lines[a],u=s-this.lines[a].top-this.lines[a].height;if(s===0)this.lines[a].actualWidth>t&&(t=this.lines[a].actualWidth),e+=this.lines[a].height;else if(!(u+l>this[this.directionKey.top]+s||u<this[this.directionKey.top]))if(this.ellipsis&&this.lines[a+1]&&u-this.lines[a+1].height<this[this.directionKey.top]){const h=this.ellipsis===!0?"...":this.ellipsis||"",c=this.lines[a].getWidthWithEllips(h);c>t&&(t=c),e+=this.lines[a].height}else this.lines[a].actualWidth>t&&(t=this.lines[a].actualWidth),e+=this.lines[a].height}else for(let a=0;a<this.lines.length;a++){const{top:o,height:l}=this.lines[a];if(s===0)this.lines[a].actualWidth>t&&(t=this.lines[a].actualWidth),e+=this.lines[a].height;else if(!(o+l<this[this.directionKey.top]||o+l>this[this.directionKey.top]+s))if(this.ellipsis&&this.lines[a+1]&&this.lines[a+1].top+this.lines[a+1].height>this[this.directionKey.top]+s){const u=this.ellipsis===!0?"...":this.ellipsis||"",h=this.lines[a].getWidthWithEllips(u);h>t&&(t=h),e+=this.lines[a].height}else this.lines[a].actualWidth>t&&(t=this.lines[a].actualWidth),e+=this.lines[a].height}return{width:this.layoutDirection==="vertical"?e:t,height:this.layoutDirection==="vertical"?t:e}}}class cy{constructor(t,e,i){this.fontSize=i.fontSize||16,this.textBaseline=i.textBaseline||"alphabetic";const r=au(i.lineHeight,this.fontSize);this.lineHeight=typeof r=="number"?r>this.fontSize?r:this.fontSize:Math.floor(1.2*this.fontSize),this.height=this.lineHeight;const{ascent:s,height:a,descent:o,width:l}=zf(t,i);let u=0,h=0,c=0;this.height>a&&(u=(this.height-a)/2,h=Math.ceil(u),c=Math.floor(u)),this.textBaseline==="top"?(this.ascent=u,this.descent=a-u):this.textBaseline==="bottom"?(this.ascent=a-u,this.descent=u):this.textBaseline==="middle"?(this.ascent=this.height/2,this.descent=this.height/2):(this.ascent=s+h,this.descent=o+c),this.length=t.length,this.width=l||0,this.text=t||"",this.newLine=e||!1,this.character=i,this.left=0,this.top=0,this.ellipsis="normal",this.ellipsisWidth=0,this.ellipsisOtherParagraphWidth=0,i.direction==="vertical"&&(this.direction=i.direction,this.widthOrigin=this.width,this.heightOrigin=this.height,this.width=this.heightOrigin,this.height=this.widthOrigin,this.lineHeight=this.height),this.ellipsisStr="..."}updateWidth(){const{width:t}=zf(this.text,this.character);this.width=t,this.direction==="vertical"&&(this.widthOrigin=this.width,this.width=this.heightOrigin,this.height=this.widthOrigin)}draw(t,e,i,r,s){let a=this.text,o=this.left+i;e+=this.top;let l=this.direction;if(this.verticalEllipsis)a=this.ellipsisStr,l="vertical",e-=this.ellipsisWidth/2;else{if(this.ellipsis==="hide")return;if(this.ellipsis==="add")a+=this.ellipsisStr,s!=="right"&&s!=="end"||(o-=this.ellipsisWidth);else if(this.ellipsis==="replace"){const u=TI(a,(l==="vertical"?this.height:this.width)-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,a.length-1);if(a=a.slice(0,u),a+=this.ellipsisStr,s==="right"||s==="end"){const{width:h}=zf(this.text.slice(u),this.character);l==="vertical"||(o-=this.ellipsisWidth-h)}}}switch(this.character.script){case"super":e-=this.ascent*(1/3);break;case"sub":e+=this.descent/2}l==="vertical"&&(t.save(),t.rotateAbout(Math.PI/2,o,e),t.translate(-this.heightOrigin||-this.lineHeight/2,-this.descent/2),t.translate(o,e),o=0,e=0),this.character.stroke&&(jTt(t,this.character),t.strokeText(a,o,e)),FTt(t,this.character),this.character.fill&&t.fillText(a,o,e),this.character.fill&&(typeof this.character.lineThrough=="boolean"||typeof this.character.underline=="boolean"?(this.character.underline&&t.fillRect(o,1+e,this.widthOrigin||this.width,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1),this.character.lineThrough&&t.fillRect(o,1+e-this.ascent/2,this.widthOrigin||this.width,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)):this.character.textDecoration==="underline"?t.fillRect(o,1+e,this.widthOrigin||this.width,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1):this.character.textDecoration==="line-through"&&t.fillRect(o,1+e-this.ascent/2,this.widthOrigin||this.width,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)),l==="vertical"&&t.restore()}getWidthWithEllips(t){let e=this.text;const i=t==="vertical"?this.height:this.width;if(this.ellipsis==="hide")return i;if(this.ellipsis==="add")return i+this.ellipsisWidth;if(this.ellipsis==="replace"){const r=TI(e,i-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,e.length-1);e=e.slice(0,r),e+=this.ellipsisStr;const{width:s}=zf(this.text.slice(r),this.character);return i+this.ellipsisWidth-s}return i}}function fEt(n,t){const e=n.text.slice(0,t),i=n.text.slice(t);return[new cy(e,n.newLine,n.character),new cy(i,!0,n.character)]}const IH=["width","height","image",...ya];class Xg extends qr{constructor(t){super(t),this.type="image",this.numberType=A2,this.loadImage(this.attribute.image)}get width(){var t;return(t=this.attribute.width)!==null&&t!==void 0?t:0}set width(t){this.attribute.width===t&&(this.attribute.width=t,this.addUpdateShapeAndBoundsTag())}get height(){var t;return(t=this.attribute.height)!==null&&t!==void 0?t:0}set height(t){this.attribute.height===t&&(this.attribute.height=t,this.addUpdateShapeAndBoundsTag())}get repeatX(){var t;return(t=this.attribute.repeatX)!==null&&t!==void 0?t:"no-repeat"}set repeatX(t){this.attribute.repeatX===t&&(this.attribute.repeatX=t)}get repeatY(){var t;return(t=this.attribute.repeatY)!==null&&t!==void 0?t:"no-repeat"}set repeatY(t){this.attribute.repeatY===t&&(this.attribute.repeatY=t)}get image(){return this.attribute.image}set image(t){t!==this.attribute.image&&(this.attribute.image=t,this.loadImage(this.attribute.image))}imageLoadSuccess(t,e,i){super.imageLoadSuccess(t,e,()=>{this.successCallback&&this.successCallback()})}imageLoadFail(t,e){super.imageLoadFail(t,()=>{this.failCallback&&this.failCallback()})}setAttributes(t,e,i){return t.image&&this.loadImage(t.image),super.setAttributes(t,e,i)}setAttribute(t,e,i,r){return t==="image"&&this.loadImage(e),super.setAttribute(t,e,i,r)}doUpdateAABBBounds(){const t=Pt(this).image;this._AABBBounds.clear();const e=this.attribute,i=wt.graphicService.updateImageAABBBounds(e,Pt(this).image,this._AABBBounds,this),{boundsPadding:r=t.boundsPadding}=e,s=br(r);return s&&i.expand(s),this.clearUpdateBoundTag(),i}tryUpdateOBBBounds(){throw new Error("暂不支持")}getDefaultAttribute(t){return sy[t]}needUpdateTags(t){return super.needUpdateTags(t,IH)}needUpdateTag(t){return super.needUpdateTag(t,IH)}clone(){return new Xg(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return Xg.NOWORK_ANIMATE_ATTR}}Xg.NOWORK_ANIMATE_ATTR=Object.assign({image:1,repeatX:1,repeatY:1},Ar);function nF(n){return new Xg(n)}class nu extends Xg{constructor(t){if(super(t),this._x=0,this._y=0,this._hovered=!1,this._marginArray=[0,0,0,0],t.backgroundShowMode==="always"&&(this._hovered=!0),t.margin){const e=br(t.margin);this._marginArray=typeof e=="number"?[e,e,e,e]:e}this.onBeforeAttributeUpdate=(e,i,r)=>{if(ut(r)&&r.indexOf("margin")!==-1||r==="margin")if(i.margin){const s=br(i.margin);this._marginArray=typeof s=="number"?[s,s,s,s]:s}else this._marginArray=[0,0,0,0]}}get width(){var t;return((t=this.attribute.width)!==null&&t!==void 0?t:0)+this._marginArray[1]+this._marginArray[3]}get height(){var t;return((t=this.attribute.height)!==null&&t!==void 0?t:0)+this._marginArray[0]+this._marginArray[2]}tryUpdateAABBBounds(){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;this.doUpdateAABBBounds();const{width:t=sy.width,height:e=sy.height}=this.attribute,{backgroundWidth:i=t,backgroundHeight:r=e}=this.attribute,s=(i-t)/2,a=(r-e)/2;return this._AABBBounds.expand([0,2*s,2*a,0]),this._AABBBounds}setHoverState(t){this.attribute.backgroundShowMode==="hover"&&this._hovered!==t&&(this._hovered=t)}}class gEt{constructor(t,e,i,r,s,a,o,l){this.left=t,this.width=e,this.baseline=i,this.ascent=r,this.descent=s,this.top=i-r,this.paragraphs=a.map(h=>h),this.textAlign=(this.paragraphs[0]instanceof nu?this.paragraphs[0].attribute.textAlign:this.paragraphs[0].character.textAlign)||"left",this.direction=o,this.directionKey=N3[this.direction],this.actualWidth=0;let u=0;this.paragraphs.forEach((h,c)=>{if(c===0&&h instanceof cy){const d=BTt.exec(h.text);(d==null?void 0:d.index)!==0&&(h.text=h.text.slice(d==null?void 0:d.index),h.updateWidth())}this.actualWidth+=h[this.directionKey.width],u=Math.max(h[this.directionKey.height],u)}),this.height=u,this.blankWidth=l?0:this.width-this.actualWidth,this.calcOffset(e,l)}calcOffset(t,e){const i=this.directionKey,r=this.height;let s=this.left,a=0;this.actualWidth<t&&!e&&(this.textAlign==="right"||this.textAlign==="end"?s=t-this.actualWidth:this.textAlign==="center"?s=(t-this.actualWidth)/2:this.textAlign==="justify"&&(this.paragraphs.length<2?s=(t-this.actualWidth)/2:a=(t-this.actualWidth)/(this.paragraphs.length-1))),this.paragraphs.map(function(o){o instanceof nu?(o["_"+i.x]=s,s+=o[i.width]+a,o["_"+i.y]=o.attribute.textBaseline==="top"?0:o.attribute.textBaseline==="bottom"?r-o.height:(r-o.height)/2):(o[i.left]=s,s+=o[i.width]+a)})}draw(t,e,i,r,s,a){if(s&&(e||this.paragraphs.some(o=>o.overflow))){let o=0;for(let l=this.paragraphs.length-1;l>=0;l--){const u=this.paragraphs[l];if(u.overflow)continue;if(u instanceof nu)break;if(this.direction==="vertical"&&u.direction!=="vertical"){u.verticalEllipsis=!0;break}const h=s===!0?"...":s||"";u.ellipsisStr=h;const{width:c}=zf(h,u.character),d=c||0;if(d<=this.blankWidth+o){e&&(u.ellipsis="add");break}if(d<=this.blankWidth+o+u.width){u.ellipsis="replace",u.ellipsisWidth=d,u.ellipsisOtherParagraphWidth=this.blankWidth+o;break}u.ellipsis="hide",o+=u.width}}this.paragraphs.map((o,l)=>{if(o instanceof nu)return o.setAttributes({x:i+o._x,y:r+o._y}),void a(o,t,i+o._x,r+o._y,this.ascent);o.draw(t,r+this.ascent,i,l===0,this.textAlign)})}getWidthWithEllips(t){let e=0;for(let r=this.paragraphs.length-1;r>=0;r--){const s=this.paragraphs[r];if(s instanceof nu)break;const{width:a}=zf(t,s.character),o=a||0;if(o<=this.blankWidth+e){s.ellipsis="add",s.ellipsisWidth=o;break}if(o<=this.blankWidth+e+s.width){s.ellipsis="replace",s.ellipsisWidth=o,s.ellipsisOtherParagraphWidth=this.blankWidth+e;break}s.ellipsis="hide",e+=s.width}let i=0;return this.paragraphs.map((r,s)=>{i+=r instanceof nu?r.width:r.getWidthWithEllips(this.direction)}),i}}class mEt{constructor(t){this.frame=t,this.width=this.frame.width,this.height=this.frame.height,this.lineWidth=0,this.y=this.frame.top,this.maxAscent=0,this.maxDescent=0,this.maxAscentForBlank=0,this.maxDescentForBlank=0,this.lineBuffer=[],this.direction=t.layoutDirection,this.directionKey=N3[this.direction]}store(t){if(t instanceof nu){this.frame.icons.set(t.richtextId,t),this.lineBuffer.push(t),this.lineWidth+=t[this.directionKey.width];let e=0,i=0;t.attribute.textBaseline==="top"?(e=0,i=t.height):t.attribute.textBaseline==="bottom"?(e=t.height,i=0):(e=t.height/2,i=t.height/2),this.maxAscent=Math.max(this.maxAscent,e),this.maxDescent=Math.max(this.maxDescent,i)}else this.lineBuffer.push(t),t.text.length!==0?(this.lineWidth+=t[this.directionKey.width],this.maxAscent=Math.max(this.maxAscent,t.ascent),this.maxDescent=Math.max(this.maxDescent,t.descent)):(this.maxAscentForBlank=Math.max(this.maxAscentForBlank,t.ascent),this.maxDescentForBlank=Math.max(this.maxDescentForBlank,t.descent))}send(){if(this.lineBuffer.length===0)return;const t=this.maxAscent===0?this.maxAscentForBlank:this.maxAscent,e=this.maxDescent===0?this.maxDescentForBlank:this.maxDescent,i=new gEt(this.frame.left,this[this.directionKey.width],this.y+t,t,e,this.lineBuffer,this.direction,this.direction==="horizontal"?this.frame.isWidthMax:this.frame.isHeightMax);this.frame.lines.push(i),this.frame.actualHeight+=i.height,this.y+=i.height,this.lineBuffer.length=0,this.lineWidth=this.maxAscent=this.maxDescent=this.maxAscentForBlank=this.maxDescentForBlank=0}deal(t){t instanceof nu?this.direction==="horizontal"&&this.width===0||this.direction==="vertical"&&this.height===0||this.lineWidth+t[this.directionKey.width]<=this[this.directionKey.width]?this.store(t):this.lineBuffer.length===0?(this.store(t),this.send()):(this.send(),this.deal(t)):typeof this.width!="number"||this.width<0||(t.newLine&&this.send(),t.text.length!==0&&(this.direction==="horizontal"&&this.width===0||this.direction==="vertical"&&this.height===0||this.lineWidth+t[this.directionKey.width]<=this[this.directionKey.width]?this.store(t):this.lineWidth===this[this.directionKey.width]?(this.send(),this.deal(t)):this.cut(t)))}cut(t){const e=this[this.directionKey.width]-this.lineWidth||0,i=Math.ceil(e/t[this.directionKey.width]*t.length)||0,r=TI(t.text,e,t.character,i,this.frame.wordBreak==="break-word");if(r!==0){const[s,a]=fEt(t,r);this.store(s),this.deal(a)}else this.lineBuffer.length!==0&&(this.send(),this.deal(t))}}const LH=["width","height","ellipsis","wordBreak","verticalDirection","maxHeight","maxWidth","textAlign","textBaseline","textConfig","layoutDirection",...ya];class dy extends qr{constructor(t){super(t),this.type="richtext",this._currentHoverIcon=null,this.numberType=X3}get width(){var t;return(t=this.attribute.width)!==null&&t!==void 0?t:tl.width}set width(t){this.attribute.width!==t&&(this.attribute.width=t,this.addUpdateShapeAndBoundsTag())}get height(){var t;return(t=this.attribute.height)!==null&&t!==void 0?t:tl.height}set height(t){this.attribute.height!==t&&(this.attribute.height=t,this.addUpdateShapeAndBoundsTag())}get maxWidth(){return this.attribute.maxWidth}set maxWidth(t){this.attribute.maxWidth!==t&&(this.attribute.maxWidth=t,this.addUpdateShapeAndBoundsTag())}get maxHeight(){return this.attribute.maxHeight}set maxHeight(t){this.attribute.maxHeight!==t&&(this.attribute.maxHeight=t,this.addUpdateShapeAndBoundsTag())}get ellipsis(){var t;return(t=this.attribute.ellipsis)!==null&&t!==void 0?t:tl.ellipsis}set ellipsis(t){this.attribute.ellipsis!==t&&(this.attribute.ellipsis=t,this.addUpdateShapeAndBoundsTag())}get wordBreak(){var t;return(t=this.attribute.wordBreak)!==null&&t!==void 0?t:tl.wordBreak}set wordBreak(t){this.attribute.wordBreak!==t&&(this.attribute.wordBreak=t,this.addUpdateShapeAndBoundsTag())}get verticalDirection(){var t;return(t=this.attribute.verticalDirection)!==null&&t!==void 0?t:tl.verticalDirection}set verticalDirection(t){this.attribute.verticalDirection!==t&&(this.attribute.verticalDirection=t,this.addUpdateShapeAndBoundsTag())}get textAlign(){var t;return(t=this.attribute.textAlign)!==null&&t!==void 0?t:tl.textAlign}set textAlign(t){this.attribute.textAlign!==t&&(this.attribute.textAlign=t,this.addUpdateShapeAndBoundsTag())}get textBaseline(){var t;return(t=this.attribute.textBaseline)!==null&&t!==void 0?t:tl.textBaseline}set textBaseline(t){this.attribute.textBaseline!==t&&(this.attribute.textBaseline=t,this.addUpdateShapeAndBoundsTag())}get textConfig(){var t;return(t=this.attribute.textConfig)!==null&&t!==void 0?t:tl.textConfig}set textConfig(t){this.attribute.textConfig=t,this.addUpdateShapeAndBoundsTag()}doUpdateAABBBounds(){const t=Pt(this).richtext;this._AABBBounds.clear();const e=this.attribute,i=wt.graphicService.updateRichTextAABBBounds(e,Pt(this).richtext,this._AABBBounds,this),{boundsPadding:r=t.boundsPadding}=e,s=br(r);return s&&i.expand(s),this.clearUpdateBoundTag(),i}tryUpdateOBBBounds(){throw new Error("暂不支持")}getDefaultAttribute(t){return tl[t]}needUpdateTags(t){return super.needUpdateTags(t,LH)}needUpdateTag(t){return super.needUpdateTag(t,LH)}getFrameCache(){return this.shouldUpdateShape()&&(this.doUpdateFrameCache(),this.clearUpdateShapeTag()),this._frameCache}combinedStyleToCharacter(t){const{fill:e,stroke:i,fontSize:r,fontFamily:s,fontStyle:a,fontWeight:o,lineWidth:l,opacity:u,fillOpacity:h,strokeOpacity:c}=this.attribute;return Object.assign({fill:e,stroke:i,fontSize:r,fontFamily:s,fontStyle:a,fontWeight:o,lineWidth:l,opacity:u,fillOpacity:h,strokeOpacity:c},t)}doUpdateFrameCache(t){var e;const{textConfig:i=[],maxWidth:r,maxHeight:s,width:a,height:o,ellipsis:l,wordBreak:u,verticalDirection:h,textAlign:c,textBaseline:d,layoutDirection:p,singleLine:f,disableAutoWrapLine:g}=this.attribute,_=[],v=t??i;for(let k=0;k<v.length;k++)if("image"in v[k]){const M=this.combinedStyleToCharacter(v[k]),P=M.id&&this._frameCache&&this._frameCache.icons&&this._frameCache.icons.get(M.id);if(P)_.push(P);else{const E=new nu(M);E.successCallback=()=>{var I;this.addUpdateBoundTag(),(I=this.stage)===null||I===void 0||I.renderNextFrame()},E.richtextId=M.id,_.push(E)}}else{const M=this.combinedStyleToCharacter(v[k]);if(Mt(M.text)&&(M.text=`${M.text}`),M.text&&M.text.includes(`
`)){const P=M.text.split(`
`);for(let E=0;E<P.length;E++)_.push(new cy(P[E],E!==0,M))}else M.text&&_.push(new cy(M.text,!1,M))}const y=typeof r=="number"&&Number.isFinite(r)&&r>0,b=typeof s=="number"&&Number.isFinite(s)&&s>0,S=typeof a=="number"&&Number.isFinite(a)&&a>0&&(!y||a<=r),A=typeof o=="number"&&Number.isFinite(o)&&o>0&&(!b||o<=s),w=new pEt(0,0,(S?a:y?r:0)||0,(A?o:b?s:0)||0,l,u,h,c,d,p||"horizontal",!S&&y,!A&&b,f||!1,(e=this._frameCache)===null||e===void 0?void 0:e.icons),C=new mEt(w);if(g){let k=0,M=!1;for(let P=0;P<_.length;P++){const E=_[P];M?(E.overflow=!0,E.left=1/0,E.top=1/0,!E.newLine&&w.lines[w.lines.length-1].paragraphs.push(E)):C.deal(E),w.lines.length!==k&&(k=w.lines.length,C.lineBuffer.length=0,E.overflow=!0,E.left=1e3,E.top=1e3,w.lines[w.lines.length-1].paragraphs.push(E),M=!0),E.newLine&&(M=!1,C.lineWidth=0)}}else for(let k=0;k<_.length;k++)C.deal(_[k]);if(C.send(),!(w.layoutDirection==="horizontal"?S:A)){const k=w.getActualSizeWidthEllipsis();let M=w.layoutDirection==="horizontal"?k.width:k.height;(w.layoutDirection==="horizontal"?y:b)&&(M=Math.min(M,w.layoutDirection==="horizontal"?r:s)),w.lines.forEach(function(P){P.calcOffset(M,!1)})}this._frameCache=w}clone(){return new dy(Object.assign({},this.attribute))}setStage(t,e){super.setStage(t,e),this.getFrameCache().icons.forEach(i=>{i.setStage(t,e)})}bindIconEvent(){this.addEventListener("pointermove",t=>{var e,i,r,s,a;const o=this.pickIcon(t.global);o&&o===this._currentHoverIcon||(o?((e=this._currentHoverIcon)===null||e===void 0||e.setHoverState(!1),this._currentHoverIcon=o,this._currentHoverIcon.setHoverState(!0),(i=this.stage)===null||i===void 0||i.setCursor(o.attribute.cursor),(r=this.stage)===null||r===void 0||r.renderNextFrame()):!o&&this._currentHoverIcon&&(this._currentHoverIcon.setHoverState(!1),this._currentHoverIcon=null,(s=this.stage)===null||s===void 0||s.setCursor(),(a=this.stage)===null||a===void 0||a.renderNextFrame()))}),this.addEventListener("pointerleave",t=>{var e,i;this._currentHoverIcon&&(this._currentHoverIcon.setHoverState(!1),this._currentHoverIcon=null,(e=this.stage)===null||e===void 0||e.setCursor(),(i=this.stage)===null||i===void 0||i.renderNextFrame())})}pickIcon(t){const e=this.getFrameCache(),{e:i,f:r}=this.globalTransMatrix;let s;return e.icons.forEach(a=>{var o,l;a.AABBBounds.containsPoint({x:t.x-i,y:t.y-r})&&(s=a,s.globalX=((o=s.attribute.x)!==null&&o!==void 0?o:0)+i,s.globalY=((l=s.attribute.y)!==null&&l!==void 0?l:0)+r)}),s}getNoWorkAnimateAttr(){return dy.NOWORK_ANIMATE_ATTR}}dy.NOWORK_ANIMATE_ATTR=Object.assign({ellipsis:1,wordBreak:1,verticalDirection:1,textAlign:1,textBaseline:1,textConfig:1,layoutDirection:1},Ar);function YJ(n){return new dy(n)}const DH=["path","customPath",...ya];class py extends qr{constructor(t){super(t),this.type="path",this.numberType=w2}get pathShape(){return this.tryUpdateAABBBounds(),this.getParsedPathShape()}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{path:t}=this.attribute;return t!=null&&t!==""}getParsedPathShape(){const t=Pt(this).path;if(!this.valid)return t.path;const e=this.attribute;return e.path instanceof En?e.path:(F(this.cache)&&this.doUpdatePathShape(),this.cache instanceof En?this.cache:t.path)}doUpdateAABBBounds(){const t=Pt(this).path;this.doUpdatePathShape(),this._AABBBounds.clear();const e=this.attribute,i=wt.graphicService.updatePathAABBBounds(e,Pt(this).path,this._AABBBounds,this),{boundsPadding:r=t.boundsPadding}=e,s=br(r);return s&&i.expand(s),this.clearUpdateBoundTag(),i}doUpdatePathShape(){const t=this.attribute;It(t.path,!0)?this.cache=new En().fromString(t.path):t.customPath&&(this.cache=new En,t.customPath(this.cache,this))}tryUpdateOBBBounds(){throw new Error("暂不支持")}getDefaultAttribute(t){return Pt(this).path[t]}needUpdateTags(t){return super.needUpdateTags(t,DH)}needUpdateTag(t){return super.needUpdateTag(t,DH)}toCustomPath(){return new En().fromCustomPath2D(this.getParsedPathShape(),0,0)}clone(){return new py(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return py.NOWORK_ANIMATE_ATTR}}py.NOWORK_ANIMATE_ATTR=Object.assign({path:1,customPath:1},Ar);function XJ(n){return new py(n)}const BH=["segments","points","curveType",...ya];class fy extends qr{constructor(t){super(t),this.type="area",this.numberType=_1}isValid(){return super.isValid()&&this._isValid()}_isValid(){if(this.pathProxy)return!0;const{points:t,segments:e}=this.attribute;return e?e.length!==0:!!t&&t.length!==0}doUpdateAABBBounds(){const t=Pt(this).area;this._AABBBounds.clear();const e=this.attribute,i=wt.graphicService.updateAreaAABBBounds(e,Pt(this).area,this._AABBBounds,this),{boundsPadding:r=t.boundsPadding}=e,s=br(r);return s&&i.expand(s),this.clearUpdateBoundTag(),i}tryUpdateOBBBounds(){throw new Error("暂不支持")}_interpolate(t,e,i,r,s){t==="points"&&(s.points=H3(i,r,e))}getDefaultAttribute(t){return Pt(this).area[t]}needUpdateTags(t){return super.needUpdateTags(t,BH)}needUpdateTag(t){return super.needUpdateTag(t,BH)}toCustomPath(){const t=new En,e=this.attribute,i=e.segments,r=s=>{if(s&&s.length){let a=!0;const o=[];if(s.forEach(l=>{var u,h;l.defined!==!1&&(a?t.moveTo(l.x,l.y):t.lineTo(l.x,l.y),o.push({x:(u=l.x1)!==null&&u!==void 0?u:l.x,y:(h=l.y1)!==null&&h!==void 0?h:l.y}),a=!1)}),o.length){for(let l=o.length-1;l>=0;l--)t.lineTo(o[l].x,o[l].y);t.closePath()}}};return e.points?r(e.points):i&&i.length&&i.forEach(s=>{r(s.points)}),t}clone(){return new fy(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return fy.NOWORK_ANIMATE_ATTR}}fy.NOWORK_ANIMATE_ATTR=Object.assign({segments:1,curveType:1},Ar);function KJ(n){return new fy(n)}const FH=["innerRadius","outerRadius","startAngle","endAngle","cornerRadius","padAngle","padRadius","cap",...ya];class Kg extends qr{constructor(t){super(t),this.type="arc",this.numberType=b2}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{startAngle:t,endAngle:e,outerRadius:i,innerRadius:r}=this.attribute;return this._validNumber(t)&&this._validNumber(e)&&this._validNumber(i)&&this._validNumber(r)}getParsedCornerRadius(){const t=Pt(this).arc,{cornerRadius:e=t.cornerRadius,innerPadding:i=t.innerPadding,outerPadding:r=t.outerPadding}=this.attribute;let{outerRadius:s=t.outerRadius,innerRadius:a=t.innerRadius}=this.attribute;if(s+=r,a-=i,e===0||e==="0%")return 0;const o=Math.abs(s-a);return Math.min(Mt(e,!0)?e:o*parseFloat(e)/100,o/2)}getParsedAngle(){const t=Pt(this).arc;let{startAngle:e=t.startAngle,endAngle:i=t.endAngle}=this.attribute;const{cap:r=t.cap}=this.attribute,s=i-e>=0?1:-1,a=i-e;if(e=DCt(e),i=e+a,r&&Ie(a)<be-We){let o=1,l=1;r.length&&(o=Number(r[0]),l=Number(r[1]));let{outerRadius:u=t.outerRadius,innerRadius:h=t.innerRadius}=this.attribute;const{outerPadding:c=t.outerPadding,innerPadding:d=t.innerPadding}=this.attribute;u+=c,h-=d;const p=Math.abs(u-h)/2,f=p/u;if(p>We&&u>We)return{startAngle:e-s*f*o,endAngle:i+s*f*l,sc:s*f*o,ec:s*f*l}}return{startAngle:e,endAngle:i}}getParsePadAngle(t,e){const i=Pt(this).arc,{innerPadding:r=i.innerPadding,outerPadding:s=i.outerPadding,padAngle:a=i.padAngle}=this.attribute;let{outerRadius:o=i.outerRadius,innerRadius:l=i.innerRadius}=this.attribute;o+=s,l-=r;const{padRadius:u=hs(o*o+l*l)}=this.attribute,h=Ie(e-t);let c=t,d=e,p=t,f=e;const g=a/2;let _=h,v=h;if(g>We&&u>We){const y=e>t?1:-1;let b=F7(Number(u)/l*He(g)),S=F7(Number(u)/o*He(g));return(_-=2*b)>We?(b*=y,p+=b,f-=b):(_=0,p=f=(t+e)/2),(v-=2*S)>We?(S*=y,c+=S,d-=S):(v=0,c=d=(t+e)/2),{outerStartAngle:c,outerEndAngle:d,innerStartAngle:p,innerEndAngle:f,innerDeltaAngle:_,outerDeltaAngle:v}}return{outerStartAngle:c,outerEndAngle:d,innerStartAngle:p,innerEndAngle:f,innerDeltaAngle:_,outerDeltaAngle:v}}doUpdateAABBBounds(t){const e=Pt(this).arc;this._AABBBounds.clear();const i=this.attribute,r=wt.graphicService.updateArcAABBBounds(i,Pt(this).arc,this._AABBBounds,t,this),{boundsPadding:s=e.boundsPadding}=i,a=br(s);return a&&r.expand(a),this.clearUpdateBoundTag(),r}tryUpdateOBBBounds(){throw new Error("暂不支持")}needUpdateTags(t){return super.needUpdateTags(t,FH)}needUpdateTag(t){return super.needUpdateTag(t,FH)}getDefaultAttribute(t){return Pt(this).arc[t]}toCustomPath(){const t=this.attribute,{startAngle:e,endAngle:i}=this.getParsedAngle();let r=t.innerRadius-(t.innerPadding||0),s=t.outerRadius-(t.outerPadding||0);const a=Ie(i-e),o=i>e;if(s<r){const u=s;s=r,r=u}const l=new En;if(s<=We)l.moveTo(0,0);else if(a>=be-We)l.moveTo(0+s*ni(e),0+s*He(e)),l.arc(0,0,s,e,i,!o),r>We&&(l.moveTo(0+r*ni(i),0+r*He(i)),l.arc(0,0,r,i,e,o));else{const u=s*ni(e),h=s*He(e),c=r*ni(i),d=r*He(i);l.moveTo(0+u,0+h),l.arc(0,0,s,e,i,!o),l.lineTo(0+c,0+d),l.arc(0,0,r,i,e,o),l.closePath()}return l}clone(){return new Kg(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return Kg.NOWORK_ANIMATE_ATTR}}Kg.NOWORK_ANIMATE_ATTR=Object.assign({cap:1},Ar);function rF(n){return new Kg(n)}class O2 extends Kg{constructor(t){super(t),this.type="arc3d",this.numberType=v1}doUpdateAABBBounds(){const t=Pt(this).arc;this._AABBBounds.clear();const e=this.attribute,i=wt.graphicService.updateArc3dAABBBounds(e,Pt(this).polygon,this._AABBBounds,this),{boundsPadding:r=t.boundsPadding}=e,s=br(r);return s&&i.expand(s),this.clearUpdateBoundTag(),this._AABBBounds}getNoWorkAnimateAttr(){return O2.NOWORK_ANIMATE_ATTR}}O2.NOWORK_ANIMATE_ATTR=Object.assign({cap:1},Ar);function qJ(n){return new O2(n)}const jH=["points","cornerRadius",...ya];class qg extends qr{constructor(t){super(t),this.type="polygon",this.numberType=C2}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{points:t}=this.attribute;return t&&t.length>=2}doUpdateAABBBounds(){const t=Pt(this).polygon;this._AABBBounds.clear();const e=this.attribute,i=wt.graphicService.updatePolygonAABBBounds(e,Pt(this).polygon,this._AABBBounds,this),{boundsPadding:r=t.boundsPadding}=e,s=br(r);return s&&i.expand(s),this.clearUpdateBoundTag(),this._AABBBounds}tryUpdateOBBBounds(){throw new Error("暂不支持")}_interpolate(t,e,i,r,s){t==="points"&&(s.points=H3(i,r,e))}getDefaultAttribute(t){return Pt(this).polygon[t]}needUpdateTags(t){return super.needUpdateTags(t,jH)}needUpdateTag(t){return super.needUpdateTag(t,jH)}toCustomPath(){const t=this.attribute.points,e=new En;return t.forEach((i,r)=>{r===0?e.moveTo(i.x,i.y):e.lineTo(i.x,i.y)}),e.closePath(),e}clone(){return new qg(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return qg.NOWORK_ANIMATE_ATTR}}qg.NOWORK_ANIMATE_ATTR=Ar;function ZJ(n){return new qg(n)}class R2 extends qg{constructor(t){super(t),this.type="pyramid3d",this.numberType=U3}doUpdateAABBBounds(){const t=Pt(this).polygon;this._AABBBounds.clear();const e=this.attribute,i=wt.graphicService.updatePyramid3dAABBBounds(e,Pt(this).polygon,this._AABBBounds,this),{boundsPadding:r=t.boundsPadding}=e,s=br(r);return s&&i.expand(s),this.clearUpdateBoundTag(),this._AABBBounds}findFace(){const{points:t}=this.attribute,e=t.map((o,l)=>{const u=l===3?t[0]:t[l+1],h=o.x-u.x;return h===0?0:(o.y-u.y)/h}),i=t.map(o=>({p:o,d:0}));let r=!1,s=0;for(let o=0;o<e.length-1;o++){for(let l=o+1;l<e.length;l++){if(e[o]===e[l]){r=!0;const u=Ni.distancePP(i[o].p,i[o+1].p);i[o].d=u,i[o+1].d=u,s=ls(s,u);const h=Ni.distancePP(i[l].p,i[l+1].p);i[l].d=h,i[l+1].d=h,s=ls(s,h)}if(r)break}if(r)break}for(let o=t.length-1;o>=0;o--){const l=t[o];i.unshift({p:l,d:0})}for(let o=0;o<t.length;o++){const l=(s-i[o+t.length].d)/2;i[o].d+=l,i[o+t.length].d+=l}const a={polygons:[],vertices:[],edges:[]};return i.forEach(o=>{a.vertices.push([o.p.x,o.p.y,o.d])}),a.polygons.push({polygon:[0,4,5,1],normal:[0,-1,0]}),a.polygons.push({polygon:[7,6,2,3],normal:[0,1,0]}),a.polygons.push({polygon:[0,4,7,3],normal:[-1,0,0]}),a.polygons.push({polygon:[1,5,6,2],normal:[1,0,0]}),a.polygons.push({polygon:[0,1,2,3],normal:[0,0,-1]}),a.polygons.push({polygon:[4,5,6,7],normal:[0,0,1]}),a.edges=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[3,7],[1,5],[2,6]],a}_isValid(){return super._isValid()&&this.attribute.points.length===4}getNoWorkAnimateAttr(){return R2.NOWORK_ANIMATE_ATTR}}R2.NOWORK_ANIMATE_ATTR=Ar;function JJ(n){return new R2(n)}class vEt extends Im{constructor(t){super({x:0,y:0}),this.type="shadowroot",this.shadowHost=t}addUpdateBoundTag(){super.addUpdateBoundTag(),this.shadowHost&&this.shadowHost.addUpdateBoundTag()}addUpdateShapeAndBoundsTag(){super.addUpdateShapeAndBoundsTag(),this.shadowHost&&this.shadowHost.addUpdateBoundTag()}tryUpdateGlobalTransMatrix(t=!0){if(this.shouldUpdateGlobalMatrix()){const e=this.transMatrix;this._globalTransMatrix?this._globalTransMatrix.setValue(e.a,e.b,e.c,e.d,e.e,e.f):this._globalTransMatrix=e.clone(),this.doUpdateGlobalMatrix(),t&&this.clearUpdateGlobalPositionTag()}return this._globalTransMatrix}doUpdateGlobalMatrix(){if(this.shadowHost){const t=this.shadowHost.globalTransMatrix;this._globalTransMatrix.multiply(t.a,t.b,t.c,t.d,t.e,t.f)}}tryUpdateGlobalAABBBounds(){return this._globalAABBBounds?this._globalAABBBounds.setValue(this._AABBBounds.x1,this._AABBBounds.y1,this._AABBBounds.x2,this._AABBBounds.y2):this._globalAABBBounds=this._AABBBounds.clone(),this.shadowHost&&this._globalAABBBounds.transformWithMatrix(this.shadowHost.globalTransMatrix),this._globalAABBBounds}}function _Et(n){return new vEt(n)}class uf{updateBounds(t,e,i,r){const{outerBorder:s,shadowBlur:a=e.shadowBlur}=t;if(s){const o=e.outerBorder,{distance:l=o.distance,lineWidth:u=o.lineWidth}=s;i.expand(l+(a+u)/2)}return i}}class yEt extends uf{updateBounds(t,e,i,r){const{outerBorder:s,shadowBlur:a=e.shadowBlur,strokeBoundsBuffer:o=e.strokeBoundsBuffer}=t;if(s){const l=e.outerBorder,{distance:u=l.distance,lineWidth:h=l.lineWidth}=s;vS(i,u+(a+h)/2,!0,o)}return i}}function NH(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}class bEt{constructor(){this.pools=[]}allocate(t,e,i,r,s,a){if(!this.pools.length)return new Wi(t,e,i,r,s,a);const o=this.pools.pop();return o.a=t,o.b=e,o.c=i,o.d=r,o.e=s,o.f=a,o}allocateByObj(t){if(!this.pools.length)return new Wi(t.a,t.b,t.c,t.d,t.e,t.f);const e=this.pools.pop();return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.e=t.e,e.f=t.f,e}free(t){this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}}class I2{constructor(){this.pools=[]}static identity(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}allocate(){if(!this.pools.length)return NH();const t=this.pools.pop();return I2.identity(t),t}allocateByObj(t){let e;e=this.pools.length?this.pools.pop():NH();for(let i=0;i<e.length;i++)e[i]=t[i];return e}free(t){t&&this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}}const Ua=new bEt,gi=new I2;var xEt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},SEt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},AEt=function(n,t){return function(e,i){t(e,i,n)}};function wEt(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function CEt(n,t,e){const i=Math.sin(e),r=Math.cos(e),s=t[4],a=t[5],o=t[6],l=t[7],u=t[8],h=t[9],c=t[10],d=t[11];return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[4]=s*r+u*i,n[5]=a*r+h*i,n[6]=o*r+c*i,n[7]=l*r+d*i,n[8]=u*r-s*i,n[9]=h*r-a*i,n[10]=c*r-o*i,n[11]=d*r-l*i,n}function kEt(n,t,e){const i=Math.sin(e),r=Math.cos(e),s=t[0],a=t[1],o=t[2],l=t[3],u=t[8],h=t[9],c=t[10],d=t[11];return t!==n&&(n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=s*r-u*i,n[1]=a*r-h*i,n[2]=o*r-c*i,n[3]=l*r-d*i,n[8]=s*i+u*r,n[9]=a*i+h*r,n[10]=o*i+c*r,n[11]=l*i+d*r,n}function TEt(n,t,e){const i=Math.sin(e),r=Math.cos(e),s=t[0],a=t[1],o=t[2],l=t[3],u=t[4],h=t[5],c=t[6],d=t[7];return t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=s*r+u*i,n[1]=a*r+h*i,n[2]=o*r+c*i,n[3]=l*r+d*i,n[4]=u*r-s*i,n[5]=h*r-a*i,n[6]=c*r-o*i,n[7]=d*r-l*i,n}function wv(n,t,e){const i=e[0],r=e[1],s=e[2];let a,o,l,u,h,c,d,p,f,g,_,v;return t===n?(n[12]=t[0]*i+t[4]*r+t[8]*s+t[12],n[13]=t[1]*i+t[5]*r+t[9]*s+t[13],n[14]=t[2]*i+t[6]*r+t[10]*s+t[14],n[15]=t[3]*i+t[7]*r+t[11]*s+t[15]):(a=t[0],o=t[1],l=t[2],u=t[3],h=t[4],c=t[5],d=t[6],p=t[7],f=t[8],g=t[9],_=t[10],v=t[11],n[0]=a,n[1]=o,n[2]=l,n[3]=u,n[4]=h,n[5]=c,n[6]=d,n[7]=p,n[8]=f,n[9]=g,n[10]=_,n[11]=v,n[12]=a*i+h*r+f*s+t[12],n[13]=o*i+c*r+g*s+t[13],n[14]=l*i+d*r+_*s+t[14],n[15]=u*i+p*r+v*s+t[15]),n}function KI(n,t){n[0]=t.a,n[1]=t.b,n[2]=0,n[3]=0,n[4]=t.c,n[5]=t.d,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=t.e,n[13]=t.f,n[14]=0,n[15]=1}function MEt(n,t,e){const i=e[0],r=e[1],s=e[2];return n[0]=t[0]*i,n[1]=t[1]*i,n[2]=t[2]*i,n[3]=t[3]*i,n[4]=t[4]*r,n[5]=t[5]*r,n[6]=t[6]*r,n[7]=t[7]*r,n[8]=t[8]*s,n[9]=t[9]*s,n[10]=t[10]*s,n[11]=t[11]*s,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function b1(n,t,e){const i=t[0],r=t[1],s=t[2],a=t[3],o=t[4],l=t[5],u=t[6],h=t[7],c=t[8],d=t[9],p=t[10],f=t[11],g=t[12],_=t[13],v=t[14],y=t[15];let b=e[0],S=e[1],A=e[2],w=e[3];return n[0]=b*i+S*o+A*c+w*g,n[1]=b*r+S*l+A*d+w*_,n[2]=b*s+S*u+A*p+w*v,n[3]=b*a+S*h+A*f+w*y,b=e[4],S=e[5],A=e[6],w=e[7],n[4]=b*i+S*o+A*c+w*g,n[5]=b*r+S*l+A*d+w*_,n[6]=b*s+S*u+A*p+w*v,n[7]=b*a+S*h+A*f+w*y,b=e[8],S=e[9],A=e[10],w=e[11],n[8]=b*i+S*o+A*c+w*g,n[9]=b*r+S*l+A*d+w*_,n[10]=b*s+S*u+A*p+w*v,n[11]=b*a+S*h+A*f+w*y,b=e[12],S=e[13],A=e[14],w=e[15],n[12]=b*i+S*o+A*c+w*g,n[13]=b*r+S*l+A*d+w*_,n[14]=b*s+S*u+A*p+w*v,n[15]=b*a+S*h+A*f+w*y,n}function QJ(n,t,e){var i;const{x:r=e.x,y:s=e.y,z:a=e.z,dx:o=e.dx,dy:l=e.dy,dz:u=e.dz,scaleX:h=e.scaleX,scaleY:c=e.scaleY,scaleZ:d=e.scaleZ,alpha:p=e.alpha,beta:f=e.beta,angle:g=e.angle,anchor3d:_=t.attribute.anchor,anchor:v}=t.attribute,y=[0,0,0];if(_){if(typeof _[0]=="string"){const b=parseFloat(_[0])/100,S=t.AABBBounds;y[0]=S.x1+(S.x2-S.x1)*b}else y[0]=_[0];if(typeof _[1]=="string"){const b=parseFloat(_[1])/100,S=t.AABBBounds;y[1]=S.x1+(S.x2-S.x1)*b}else y[1]=_[1];y[2]=(i=_[2])!==null&&i!==void 0?i:0}if(wEt(n),wv(n,n,[r+o,s+l,a+u]),wv(n,n,[y[0],y[1],y[2]]),CEt(n,n,f),kEt(n,n,p),wv(n,n,[-y[0],-y[1],y[2]]),MEt(n,n,[h,c,d]),g){const b=gi.allocate(),S=[0,0];if(v){if(typeof _[0]=="string"){const A=parseFloat(_[0])/100,w=t.AABBBounds;S[0]=w.x1+(w.x2-w.x1)*A}else S[0]=_[0];if(typeof _[1]=="string"){const A=parseFloat(_[1])/100,w=t.AABBBounds;S[1]=w.x1+(w.x2-w.x1)*A}else S[1]=_[1]}wv(b,b,[S[0],S[1],0]),TEt(b,b,g),wv(b,b,[-S[0],-S[1],0]),b1(n,n,b)}}function PEt(n){const{alpha:t,beta:e}=n.attribute;return t||e}let qI=class{constructor(n){this.creator=n,this.hooks={onAttributeUpdate:new la(["graphic"]),onSetStage:new la(["graphic","stage"]),onRemove:new la(["graphic"]),onRelease:new la(["graphic"]),onAddIncremental:new la(["graphic","group","stage"]),onClearIncremental:new la(["graphic","group","stage"]),beforeUpdateAABBBounds:new la(["graphic","stage","willUpdate","aabbBounds"]),afterUpdateAABBBounds:new la(["graphic","stage","aabbBounds","globalAABBBounds","selfChange"])},this.tempAABBBounds1=new Ai,this.tempAABBBounds2=new Ai,this._rectBoundsContribitions=[new uf],this._symbolBoundsContribitions=[new yEt],this._imageBoundsContribitions=[new uf],this._circleBoundsContribitions=[new uf],this._arcBoundsContribitions=[new uf],this._pathBoundsContribitions=[new uf]}onAttributeUpdate(n){this.hooks.onAttributeUpdate.taps.length&&this.hooks.onAttributeUpdate.call(n)}onSetStage(n,t){this.hooks.onSetStage.taps.length&&this.hooks.onSetStage.call(n,t)}onRemove(n){this.hooks.onRemove.taps.length&&this.hooks.onRemove.call(n)}onRelease(n){this.hooks.onRelease.taps.length&&this.hooks.onRelease.call(n)}onAddIncremental(n,t,e){this.hooks.onAddIncremental.taps.length&&this.hooks.onAddIncremental.call(n,t,e)}onClearIncremental(n,t){this.hooks.onClearIncremental.taps.length&&this.hooks.onClearIncremental.call(n,t)}beforeUpdateAABBBounds(n,t,e,i){this.hooks.beforeUpdateAABBBounds.taps.length&&this.hooks.beforeUpdateAABBBounds.call(n,t,e,i)}afterUpdateAABBBounds(n,t,e,i,r){this.hooks.afterUpdateAABBBounds.taps.length&&this.hooks.afterUpdateAABBBounds.call(n,t,e,i,r)}updatePathProxyAABBBounds(n,t){const e=typeof t.pathProxy=="function"?t.pathProxy(t.attribute):t.pathProxy;if(!e)return!1;const i=new ZZ(n);return cu(e.commandList,i,0,0),!0}updateRectAABBBounds(n,t,e,i){if(!this._validCheck(n,t,e,i))return e;if(!this.updatePathProxyAABBBounds(e,i)){let{width:a,height:o}=n;const{x1:l,y1:u,x:h,y:c}=n;a=a??l-h,o=o??u-c,(isFinite(a)||isFinite(o)||isFinite(h)||isFinite(c))&&e.set(0,0,a||0,o||0)}const r=this.tempAABBBounds1,s=this.tempAABBBounds2;return r.setValue(e.x1,e.y1,e.x2,e.y2),s.setValue(e.x1,e.y1,e.x2,e.y2),this._rectBoundsContribitions.length&&this._rectBoundsContribitions.forEach(a=>{a.updateBounds(n,t,r,i),e.union(r),r.setValue(s.x1,s.y1,s.x2,s.y2)}),this.transformAABBBounds(n,e,t,!1,i),e}updateGroupAABBBounds(n,t,e,i){const r=e;e=e.clone();const{width:s,height:a,path:o,clip:l=t.clip,display:u}=n;o&&o.length?o.forEach(d=>{e.union(d.AABBBounds)}):s!=null&&a!=null&&e.set(0,0,Math.max(0,s),Math.max(0,a)),l||i.forEachChildren(d=>{e.union(d.AABBBounds)});const h=this.tempAABBBounds1,c=this.tempAABBBounds2;return h.setValue(e.x1,e.y1,e.x2,e.y2),c.setValue(e.x1,e.y1,e.x2,e.y2),this.transformAABBBounds(n,e,t,!1,i),r.copy(e),r}updateGlyphAABBBounds(n,t,e,i){return this._validCheck(n,t,e,i)&&i.getSubGraphic().forEach(r=>{e.union(r.AABBBounds)}),e}updateHTMLTextAABBBounds(n,t,e,i){const{textAlign:r,textBaseline:s}=n;if(n.forceBoundsHeight!=null){const a=Mt(n.forceBoundsHeight)?n.forceBoundsHeight:n.forceBoundsHeight(),o=al(s,a,a);e.set(e.x1,o,e.x2,o+a)}if(n.forceBoundsWidth!=null){const a=Mt(n.forceBoundsWidth)?n.forceBoundsWidth:n.forceBoundsWidth(),o=iu(r,a);e.set(o,e.y1,o+a,e.y2)}}updateRichTextAABBBounds(n,t,e,i){if(!this._validCheck(n,t,e,i)||!i)return e;const{width:r=t.width,height:s=t.height,maxWidth:a=t.maxWidth,maxHeight:o=t.maxHeight,textAlign:l=t.textAlign,textBaseline:u=t.textBaseline}=n;if(r>0&&s>0)e.set(0,0,r,s);else{const f=i.getFrameCache(),{width:g,height:_}=f.getActualSize();let v=r||g||0,y=s||_||0;y=typeof o=="number"&&y>o?o:y||0,v=typeof a=="number"&&v>a?a:v||0,e.set(0,0,v,y)}let h=0;switch(u){case"top":h=0;break;case"middle":h=-e.height()/2;break;case"bottom":h=-e.height()}let c=0;switch(l){case"left":c=0;break;case"center":c=-e.width()/2;break;case"right":c=-e.width()}e.translate(c,h);const d=this.tempAABBBounds1,p=this.tempAABBBounds2;return d.setValue(e.x1,e.y1,e.x2,e.y2),p.setValue(e.x1,e.y1,e.x2,e.y2),n.forceBoundsHeight==null&&n.forceBoundsWidth==null||this.updateHTMLTextAABBBounds(n,t,e),this.transformAABBBounds(n,e,t,!1,i),e}updateTextAABBBounds(n,t,e,i){if(!this._validCheck(n,t,e,i)||!i)return e;const{text:r=t.text}=i.attribute;Array.isArray(r)?i.updateMultilineAABBBounds(r):i.updateSingallineAABBBounds(r);const s=this.tempAABBBounds1,a=this.tempAABBBounds2;s.setValue(e.x1,e.y1,e.x2,e.y2),a.setValue(e.x1,e.y1,e.x2,e.y2);const{scaleX:o=t.scaleX,scaleY:l=t.scaleY,shadowBlur:u=t.shadowBlur,strokeBoundsBuffer:h=t.strokeBoundsBuffer}=n;if(u){const c=u/Math.abs(o+l);vS(s,c,!0,h),e.union(s)}return this.combindShadowAABBBounds(e,i),n.forceBoundsHeight==null&&n.forceBoundsWidth==null||this.updateHTMLTextAABBBounds(n,t,e),nI(e,e,i.transMatrix),e}updatePathAABBBounds(n,t,e,i){if(!this._validCheck(n,t,e,i))return e;this.updatePathProxyAABBBounds(e,i)||this.updatePathAABBBoundsImprecise(n,t,e,i);const r=this.tempAABBBounds1,s=this.tempAABBBounds2;r.setValue(e.x1,e.y1,e.x2,e.y2),s.setValue(e.x1,e.y1,e.x2,e.y2),this._pathBoundsContribitions.length&&this._pathBoundsContribitions.forEach(o=>{o.updateBounds(n,t,r,i),e.union(r),r.setValue(s.x1,s.y1,s.x2,s.y2)});const{lineJoin:a=t.lineJoin}=n;return this.transformAABBBounds(n,e,t,a==="miter",i),e}updatePathAABBBoundsImprecise(n,t,e,i){if(!i)return e;const r=i.getParsedPathShape();return e.union(r.getBounds()),e}updatePyramid3dAABBBounds(n,t,e,i){if(!i)return e;const r=i.stage;if(!r||!r.camera)return e;i.findFace().vertices.forEach(o=>{const l=o[0],u=o[1];e.add(l,u)});const s=this.tempAABBBounds1,a=this.tempAABBBounds2;return s.setValue(e.x1,e.y1,e.x2,e.y2),a.setValue(e.x1,e.y1,e.x2,e.y2),this.transformAABBBounds(n,e,t,!1,i),e}updateArc3dAABBBounds(n,t,e,i){if(!i)return e;const r=i.stage;if(!r||!r.camera)return e;const{outerRadius:s=t.outerRadius,height:a=0}=n,o=s+a;e.setValue(-o,-o,o,o);const l=this.tempAABBBounds1,u=this.tempAABBBounds2;return l.setValue(e.x1,e.y1,e.x2,e.y2),u.setValue(e.x1,e.y1,e.x2,e.y2),this.transformAABBBounds(n,e,t,!1,i),e}updatePolygonAABBBounds(n,t,e,i){if(!this._validCheck(n,t,e,i))return e;this.updatePathProxyAABBBounds(e,i)||this.updatePolygonAABBBoundsImprecise(n,t,e,i);const r=this.tempAABBBounds1,s=this.tempAABBBounds2;r.setValue(e.x1,e.y1,e.x2,e.y2),s.setValue(e.x1,e.y1,e.x2,e.y2);const{lineJoin:a=t.lineJoin}=n;return this.transformAABBBounds(n,e,t,a==="miter",i),e}updatePolygonAABBBoundsImprecise(n,t,e,i){const{points:r=t.points}=n;return r.forEach(s=>{e.add(s.x,s.y)}),e}updateLineAABBBounds(n,t,e,i){if(!this._validCheck(n,t,e,i))return e;this.updatePathProxyAABBBounds(e,i)||(n.segments?this.updateLineAABBBoundsBySegments(n,t,e,i):this.updateLineAABBBoundsByPoints(n,t,e,i));const r=this.tempAABBBounds1,s=this.tempAABBBounds2;r.setValue(e.x1,e.y1,e.x2,e.y2),s.setValue(e.x1,e.y1,e.x2,e.y2);const{lineJoin:a=t.lineJoin}=n;return this.transformAABBBounds(n,e,t,a==="miter",i),e}updateLineAABBBoundsByPoints(n,t,e,i){const{points:r=t.points}=n,s=e;return r.forEach(a=>{s.add(a.x,a.y)}),s}updateLineAABBBoundsBySegments(n,t,e,i){const{segments:r=t.segments}=n,s=e;return r.forEach(a=>{a.points.forEach(o=>{s.add(o.x,o.y)})}),s}updateAreaAABBBounds(n,t,e,i){if(!this._validCheck(n,t,e,i))return e;this.updatePathProxyAABBBounds(e,i)||(n.segments?this.updateAreaAABBBoundsBySegments(n,t,e,i):this.updateAreaAABBBoundsByPoints(n,t,e,i));const r=this.tempAABBBounds1,s=this.tempAABBBounds2;r.setValue(e.x1,e.y1,e.x2,e.y2),s.setValue(e.x1,e.y1,e.x2,e.y2);const{lineJoin:a=t.lineJoin}=n;return this.transformAABBBounds(n,e,t,a==="miter",i),e}updateAreaAABBBoundsByPoints(n,t,e,i){const{points:r=t.points}=n,s=e;return r.forEach(a=>{var o,l;s.add(a.x,a.y),s.add((o=a.x1)!==null&&o!==void 0?o:a.x,(l=a.y1)!==null&&l!==void 0?l:a.y)}),s}updateAreaAABBBoundsBySegments(n,t,e,i){const{segments:r=t.segments}=n,s=e;return r.forEach(a=>{a.points.forEach(o=>{var l,u;s.add(o.x,o.y),s.add((l=o.x1)!==null&&l!==void 0?l:o.x,(u=o.y1)!==null&&u!==void 0?u:o.y)})}),s}updateCircleAABBBounds(n,t,e,i,r){if(!this._validCheck(n,t,e,r))return e;this.updatePathProxyAABBBounds(e,r)||(i?this.updateCircleAABBBoundsImprecise(n,t,e,r):this.updateCircleAABBBoundsAccurate(n,t,e,r));const s=this.tempAABBBounds1,a=this.tempAABBBounds2;return s.setValue(e.x1,e.y1,e.x2,e.y2),a.setValue(e.x1,e.y1,e.x2,e.y2),this._circleBoundsContribitions.length&&this._circleBoundsContribitions.forEach(o=>{o.updateBounds(n,t,s,r),e.union(s),s.setValue(a.x1,a.y1,a.x2,a.y2)}),this.transformAABBBounds(n,e,t,!1,r),e}updateCircleAABBBoundsImprecise(n,t,e,i){const{radius:r=t.radius}=n;return e.set(-r,-r,r,r),e}updateCircleAABBBoundsAccurate(n,t,e,i){const{startAngle:r=t.startAngle,endAngle:s=t.endAngle,radius:a=t.radius}=n;return s-r>be-We?e.set(-a,-a,a,a):fE(r,s,a,e),e}updateArcAABBBounds(n,t,e,i,r){if(!this._validCheck(n,t,e,r))return e;this.updatePathProxyAABBBounds(e,r)||(i?this.updateArcAABBBoundsImprecise(n,t,e,r):this.updateArcAABBBoundsAccurate(n,t,e,r));const s=this.tempAABBBounds1,a=this.tempAABBBounds2;s.setValue(e.x1,e.y1,e.x2,e.y2),a.setValue(e.x1,e.y1,e.x2,e.y2),this._arcBoundsContribitions.length&&this._arcBoundsContribitions.forEach(l=>{l.updateBounds(n,t,s,r),e.union(s),s.setValue(a.x1,a.y1,a.x2,a.y2)});const{lineJoin:o=t.lineJoin}=n;return this.transformAABBBounds(n,e,t,o==="miter",r),e}updateArcAABBBoundsImprecise(n,t,e,i){let{outerRadius:r=t.outerRadius,innerRadius:s=t.innerRadius}=n;const{outerPadding:a=t.outerPadding,innerPadding:o=t.innerPadding}=n;return r+=a,s-=o,r<s&&(r=s),e.set(-r,-r,r,r),e}updateArcAABBBoundsAccurate(n,t,e,i){let{outerRadius:r=t.outerRadius,innerRadius:s=t.innerRadius}=n;const{outerPadding:a=t.outerPadding,innerPadding:o=t.innerPadding}=n;if(r+=a,s-=o,r<s){const h=r;r=s,s=h}let{endAngle:l=t.endAngle,startAngle:u=t.startAngle}=n;if(u>l){const h=u;u=l,l=h}return r<=We?e.set(0,0,0,0):Math.abs(l-u)>be-We?e.set(-r,-r,r,r):(fE(u,l,r,e),fE(u,l,s,e)),e}updateSymbolAABBBounds(n,t,e,i,r){if(!this._validCheck(n,t,e,r))return e;this.updatePathProxyAABBBounds(e,r)||(i?this.updateSymbolAABBBoundsImprecise(n,t,e,r):this.updateSymbolAABBBoundsAccurate(n,t,e,r));const s=this.tempAABBBounds1,a=this.tempAABBBounds2;s.setValue(e.x1,e.y1,e.x2,e.y2),a.setValue(e.x1,e.y1,e.x2,e.y2),this._symbolBoundsContribitions.length&&this._symbolBoundsContribitions.forEach(l=>{l.updateBounds(n,t,s,r),e.union(s),s.setValue(a.x1,a.y1,a.x2,a.y2)});const{lineJoin:o=t.lineJoin}=n;return this.transformAABBBounds(n,e,t,o==="miter",r),e}updateSymbolAABBBoundsImprecise(n,t,e,i){const{size:r=t.size}=n;if(ut(r))e.set(-r[0]/2,-r[1]/2,r[0]/2,r[1]/2);else{const s=r/2;e.set(-s,-s,s,s)}return e}updateSymbolAABBBoundsAccurate(n,t,e,i){if(!i)return e;const{size:r=t.size}=n;return i.getParsedPath().bounds(r,e),e}updateImageAABBBounds(n,t,e,i){if(!this._validCheck(n,t,e,i))return e;if(!this.updatePathProxyAABBBounds(e,i)){const{width:a=t.width,height:o=t.height}=n;e.set(0,0,a,o)}const r=this.tempAABBBounds1,s=this.tempAABBBounds2;return r.setValue(e.x1,e.y1,e.x2,e.y2),s.setValue(e.x1,e.y1,e.x2,e.y2),this._imageBoundsContribitions.length&&this._imageBoundsContribitions.forEach(a=>{a.updateBounds(n,t,r,i),e.union(r),r.setValue(s.x1,s.y1,s.x2,s.y2)}),this.transformAABBBounds(n,e,t,!1,i),e}combindShadowAABBBounds(n,t){if(t&&t.shadowRoot){const e=t.shadowRoot.AABBBounds;n.union(e)}}transformAABBBounds(n,t,e,i,r){if(!t.empty()){const{scaleX:o=e.scaleX,scaleY:l=e.scaleY,stroke:u=e.stroke,shadowBlur:h=e.shadowBlur,lineWidth:c=e.lineWidth,pickStrokeBuffer:d=e.pickStrokeBuffer,strokeBoundsBuffer:p=e.strokeBoundsBuffer}=n,f=this.tempAABBBounds1,g=this.tempAABBBounds2;if(u&&c){const _=(c+d)/Math.abs(o+l);vS(f,_,i,p),t.union(f),f.setValue(g.x1,g.y1,g.x2,g.y2)}if(h){const{shadowOffsetX:_=e.shadowOffsetX,shadowOffsetY:v=e.shadowOffsetY}=n,y=h/Math.abs(o+l)*2;vS(f,y,!1,p+1),f.translate(_,v),t.union(f)}}if(this.combindShadowAABBBounds(t,r),t.empty())return;let s=!0;const a=r.transMatrix;r&&r.isContainer&&(s=!(a.a===1&&a.b===0&&a.c===0&&a.d===1&&a.e===0&&a.f===0)),s&&nI(t,t,a)}_validCheck(n,t,e,i){if(!i||n.forceBoundsHeight!=null||n.forceBoundsWidth!=null)return!0;if(!i.valid)return e.clear(),!1;const{visible:r=t.visible}=n;return!!r||(e.clear(),!1)}};qI=xEt([Vt(),AEt(0,fe(LJ)),SEt("design:paramtypes",[Object])],qI);class EEt{constructor(){this.store=new Map}RegisterGraphicCreator(t,e){this.store.set(t,e),this[t]=e}CreateGraphic(t,e){const i=this.store.get(t);return i?i(e):null}}const $t=new EEt;let Cx,kx;function x1(n){return Cx||(Cx=$t.CreateGraphic("text",{})),Cx.initAttributes(n),Cx.AABBBounds}function OEt(n){return kx||(kx=$t.CreateGraphic("richtext",{})),kx.setAttributes(n),kx.AABBBounds}const gn={x:0,y:0,z:0,lastModelMatrix:null};class vs{init(t){t&&(this._renderContribitions=t.getContributions()),this._renderContribitions||(this._renderContribitions=[]),this.builtinContributions&&this.builtinContributions.forEach(e=>this._renderContribitions.push(e)),this._renderContribitions.length&&(this._renderContribitions.sort((e,i)=>i.order-e.order),this._beforeRenderContribitions=this._renderContribitions.filter(e=>e.time===jn.beforeFillStroke),this._afterRenderContribitions=this._renderContribitions.filter(e=>e.time===jn.afterFillStroke))}beforeRenderStep(t,e,i,r,s,a,o,l,u,h,c,d,p){this._beforeRenderContribitions&&this._beforeRenderContribitions.forEach(f=>{f.supportedAppName&&t.stage&&t.stage.params&&t.stage.params.context&&t.stage.params.context.appName&&!(Array.isArray(f.supportedAppName)?f.supportedAppName:[f.supportedAppName]).includes(t.stage.params.context.appName)||f.drawShape(t,e,i,r,s,a,o,l,u,h,c,d,p)})}afterRenderStep(t,e,i,r,s,a,o,l,u,h,c,d,p){this._afterRenderContribitions&&this._afterRenderContribitions.forEach(f=>{f.supportedAppName&&t.stage&&t.stage.params&&t.stage.params.context&&t.stage.params.context.appName&&!(Array.isArray(f.supportedAppName)?f.supportedAppName:[f.supportedAppName]).includes(t.stage.params.context.appName)||f.drawShape(t,e,i,r,s,a,o,l,u,h,c,d,p)})}valid(t,e,i,r){const{fill:s=e.fill,background:a,stroke:o=e.stroke,opacity:l=e.opacity,fillOpacity:u=e.fillOpacity,lineWidth:h=e.lineWidth,strokeOpacity:c=e.strokeOpacity,visible:d=e.visible}=t.attribute,p=tp(l,u,s),f=J3(l,c),g=Sp(s,a),_=Lm(o,h);return!(!t.valid||!d)&&!(!g&&!_)&&!!(p||f||i||r||a)&&{fVisible:p,sVisible:f,doFill:g,doStroke:_}}transform(t,e,i,r=!1){const{x:s=e.x,y:a=e.y,z:o=e.z,scaleX:l=e.scaleX,scaleY:u=e.scaleY,angle:h=e.angle,postMatrix:c}=t.attribute,d=i.modelMatrix,p=i.camera;gn.x=s,gn.y=a,gn.z=o,gn.lastModelMatrix=d;const f=p&&(r||PEt(t)),g=f?t.transMatrix.onlyTranslate()&&!c:l===1&&u===1&&h===0&&!c;if(f){const _=gi.allocate(),v=gi.allocate();QJ(v,t,e),b1(_,d||_,v),gn.x=0,gn.y=0,gn.z=0,i.modelMatrix=_,i.setTransform(1,0,0,1,0,0,!0),gi.free(v)}if(g&&!d){const _=t.getOffsetXY(e);gn.x+=_.x,gn.y+=_.y,gn.z=o,i.setTransformForCurrent()}else if(f)gn.x=0,gn.y=0,gn.z=0,i.setTransform(1,0,0,1,0,0,!0);else if(p&&i.project){const _=t.getOffsetXY(e);gn.x+=_.x,gn.y+=_.y,this.transformWithoutTranslate(i,gn.x,gn.y,gn.z,l,u,h)}else i.transformFromMatrix(t.transMatrix,!0),gn.x=0,gn.y=0,gn.z=0;return gn}transformUseContext2d(t,e,i,r){const s=r.camera;if(this.camera=s,s){const a=t.AABBBounds,o=a.x2-a.x1,l=a.y2-a.y1,u=r.project(0,0,i),h=r.project(o,0,i),c=r.project(o,l,i),d={x:0,y:0},p={x:o,y:0},f={x:o,y:l};r.camera=null;const g=1/(d.x*(f.y-p.y)-p.x*f.y+f.x*p.y+(p.x-f.x)*d.y),_=-(d.y*(c.x-h.x)-p.y*c.x+f.y*h.x+(p.y-f.y)*u.x)*g,v=(p.y*c.y+d.y*(h.y-c.y)-f.y*h.y+(f.y-p.y)*u.y)*g,y=(d.x*(c.x-h.x)-p.x*c.x+f.x*h.x+(p.x-f.x)*u.x)*g,b=-(p.x*c.y+d.x*(h.y-c.y)-f.x*h.y+(f.x-p.x)*u.y)*g,S=(d.x*(f.y*h.x-p.y*c.x)+d.y*(p.x*c.x-f.x*h.x)+(f.x*p.y-p.x*f.y)*u.x)*g,A=(d.x*(f.y*h.y-p.y*c.y)+d.y*(p.x*c.y-f.x*h.y)+(f.x*p.y-p.x*f.y)*u.y)*g;r.setTransform(_,v,y,b,S,A,!0)}}restoreTransformUseContext2d(t,e,i,r){this.camera&&(r.camera=this.camera)}transformWithoutTranslate(t,e,i,r,s,a,o){const l=t.project(e,i,r);t.translate(l.x,l.y,!1),t.scale(s,a,!1),t.rotate(o,!1),t.translate(-l.x,-l.y,!1),t.setTransformForCurrent()}_draw(t,e,i,r,s){const{context:a}=r;if(!a)return;const{renderable:o}=t.attribute;if(o===!1)return;a.highPerformanceSave();const l=this.transform(t,e,a,i),{x:u,y:h,z:c,lastModelMatrix:d}=l;this.z=c,ePt(t,a,u,h,r,s)||(this.drawShape(t,a,u,h,r,s),this.z=0,a.modelMatrix!==d&&gi.free(a.modelMatrix),a.modelMatrix=d),a.highPerformanceRestore()}}const REt=function(){const n={linearGradient:/^(linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,fromAngleValue:/^from\s*(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/(^\#[0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^(rgb\(\d{1,3},\s*\d{1,3},\s*\d{1,3}\))/i,rgbaColor:/^(rgba\(\d{1,3},\s*\d{1,3},\s*\d{1,3},\s*((\d\.\d+)|\d{1,3})\))/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/};let t="";function e(S){const A=new Error(t+": "+S);throw A.source=t,A}function i(){const S=p(r);return t.length>0&&e("Invalid input not EOF"),S}function r(){return s("linear",n.linearGradient,a)||s("radial",n.radialGradient,l)||s("conic",n.conicGradient,o)}function s(S,A,w){return function(C,k){const M=y(C);if(M){y(n.startCall)||e("Missing (");const P=k(M);return y(n.endCall)||e("Missing )"),P}}(A,function(C){const k=w();return k&&(y(n.comma)||e("Missing comma before color stops")),{type:S,orientation:k,colorStops:p(f)}})}function a(){return v("directional",n.sideOrCorner,1)||v("angular",n.angleValue,1)}function o(){return v("angular",n.fromAngleValue,1)}function l(){let S,A,w=u();return w&&(S=[],S.push(w),A=t,y(n.comma)&&(w=u(),w?S.push(w):t=A)),S}function u(){let S=function(){const A=v("shape",/^(circle)/i,0);return A&&(A.style=_()||h()),A}()||function(){const A=v("shape",/^(ellipse)/i,0);return A&&(A.style=g()||h()),A}();if(S)S.at=c();else{const A=h();if(A){S=A;const w=c();w&&(S.at=w)}else{const w=d();w&&(S={type:"default-radial",at:w})}}return S}function h(){return v("extent-keyword",n.extentKeywords,1)}function c(){if(v("position",/^at/,0)){const S=d();return S||e("Missing positioning value"),S}}function d(){const S={x:g(),y:g()};if(S.x||S.y)return{type:"position",value:S}}function p(S){let A=S();const w=[];if(A)for(w.push(A);y(n.comma);)A=S(),A?w.push(A):e("One extra comma");return w}function f(){const S=v("hex",n.hexColor,1)||v("rgba",n.rgbaColor,1)||v("rgb",n.rgbColor,1)||v("literal",n.literalColor,0);return S||e("Expected color definition"),S.length=g(),S}function g(){return v("%",n.percentageValue,1)||v("position-keyword",n.positionKeywords,1)||_()}function _(){return v("px",n.pixelValue,1)||v("em",n.emValue,1)}function v(S,A,w){const C=y(A);if(C)return{type:S,value:C[w]}}function y(S){const A=/^[\n\r\t\s]+/.exec(t);A&&b(A[0].length);const w=S.exec(t);return w&&b(w[0].length),w}function b(S){t=t.substr(S)}return function(S){return t=S.toString(),i()}}();class Vf{static IsGradient(t){return!(typeof t=="string"&&!t.includes("gradient"))}static IsGradientStr(t){return typeof t=="string"&&t.includes("gradient")}static Parse(t){if(Vf.IsGradientStr(t))try{const e=REt(t)[0];if(e){if(e.type==="linear")return Vf.ParseLinear(e);if(e.type==="radial")return Vf.ParseRadial(e);if(e.type==="conic")return Vf.ParseConic(e)}}catch{return t}return t}static ParseConic(t){const{orientation:e,colorStops:i=[]}=t,r=Qe/2,s=parseFloat(e.value)/180*Qe-r;return{gradient:"conical",x:.5,y:.5,startAngle:s,endAngle:s+be,stops:i.map(a=>({color:a.value,offset:parseFloat(a.length.value)/100}))}}static ParseRadial(t){const{colorStops:e=[]}=t;return{gradient:"radial",x0:.5,y0:.5,x1:.5,y1:.5,r0:0,r1:1,stops:e.map(i=>({color:i.value,offset:parseFloat(i.length.value)/100}))}}static ParseLinear(t){const{orientation:e,colorStops:i=[]}=t,r=Qe/2;let s=e.type==="angular"?parseFloat(e.value)/180*Qe:0;for(;s<0;)s+=be;for(;s>be;)s-=be;let a=0,o=0,l=0,u=0;return s<r?(a=0,o=1,l=Math.sin(s),u=Math.cos(s)):s<Qe?(a=0,o=0,l=Math.cos(s-r),u=Math.sin(s-r)):s<Qe+r?(a=1,o=0,l=a-Math.sin(s-Qe),u=Math.cos(s-Qe)):(a=1,l=a-Math.cos(s-r-Qe),u-=Math.sin(s-r-Qe)),{gradient:"linear",x0:a,y0:o,x1:l,y1:u,stops:i.map(h=>({color:h.value,offset:parseFloat(h.length.value)/100}))}}}function xr(n,t,e){let i=t;const{a:r,b:s,c:a,d:o}=n.currentMatrix,l=Math.sign(r)*Math.sqrt(r*r+s*s),u=Math.sign(o)*Math.sqrt(a*a+o*o);return l+u===0?0:(i=i/Math.abs(l+u)*2*e,i)}function ZI(n,t,e,i,r){if(!t||t===!0)return"black";let s,a;if(ut(t))for(let o=0;o<t.length&&(a=t[o],!a);o++);else a=t;return a=Vf.Parse(a),typeof a=="string"?a:(a.gradient==="linear"?s=IEt(n,a,e,i,r):a.gradient==="conical"?s=DEt(n,a,e,i,r):a.gradient==="radial"&&(s=LEt(n,a,e,i,r)),s||"orange")}function IEt(n,t,e,i=0,r=0){var s,a,o,l;const u=e.AABBBounds;if(!u)return;let h=u.x2-u.x1,c=u.y2-u.y1,d=u.x1-i,p=u.y1-r;if(e.attribute){const{scaleX:g=1,scaleY:_=1}=e.attribute;if(g*_==0)return;h/=g,c/=_,d/=g,p/=_}const f=n.createLinearGradient(d+((s=t.x0)!==null&&s!==void 0?s:0)*h,p+((a=t.y0)!==null&&a!==void 0?a:0)*c,d+((o=t.x1)!==null&&o!==void 0?o:1)*h,p+((l=t.y1)!==null&&l!==void 0?l:0)*c);return t.stops.forEach(g=>{f.addColorStop(g.offset,g.color)}),f}function LEt(n,t,e,i=0,r=0){var s,a,o,l,u,h;const c=e.AABBBounds;if(!c)return;let d=c.x2-c.x1,p=c.y2-c.y1,f=c.x1-i,g=c.y1-r;if(e.attribute){const{scaleX:v=1,scaleY:y=1}=e.attribute;if(v*y==0)return;f/=v,g/=y,d/=v,p/=y}const _=n.createRadialGradient(f+((s=t.x0)!==null&&s!==void 0?s:.5)*d,g+((a=t.y0)!==null&&a!==void 0?a:.5)*p,Math.max(d,p)*((o=t.r0)!==null&&o!==void 0?o:0),f+((l=t.x1)!==null&&l!==void 0?l:.5)*d,g+((u=t.y1)!==null&&u!==void 0?u:.5)*p,Math.max(d,p)*((h=t.r1)!==null&&h!==void 0?h:.5));return t.stops.forEach(v=>{_.addColorStop(v.offset,v.color)}),_}function DEt(n,t,e,i=0,r=0){var s,a;const o=e.AABBBounds;if(!o)return;let l=o.x2-o.x1,u=o.y2-o.y1,h=o.x1-i,c=o.y1-r;if(e.attribute){const{scaleX:p=1,scaleY:f=1}=e.attribute;if(p*f==0)return;l/=p,u/=f,h/=p,c/=f}const d=n.createConicGradient(h+((s=t.x)!==null&&s!==void 0?s:0)*l,c+((a=t.y)!==null&&a!==void 0?a:0)*u,t.startAngle,t.endAngle);return t.stops.forEach(p=>{d.addColorStop(p.offset,p.color)}),d.GetPattern(l+h,u+c,void 0)}var BEt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},FEt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},zH=function(n,t){return function(e,i){t(e,i,n)}};class S1{constructor(){this.time=jn.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,s,a,o,l,u,h,c,d,p){var f;const{background:g,backgroundOpacity:_=(f=t.attribute.fillOpacity)!==null&&f!==void 0?f:u.backgroundOpacity,opacity:v=u.opacity,backgroundMode:y=u.backgroundMode,backgroundFit:b=u.backgroundFit}=t.attribute;if(g)if(t.backgroundImg&&t.resources){const S=t.resources.get(g);if(S.state!=="success"||!S.data)return;if(e.save(),t.parent&&!t.transMatrix.onlyTranslate()){const w=Pt(t.parent).group,{scrollX:C=w.scrollX,scrollY:k=w.scrollY}=t.parent.attribute;e.setTransformFromMatrix(t.parent.globalTransMatrix,!0),e.translate(C,k)}e.clip();const A=t.AABBBounds;e.setCommonStyle(t,t.attribute,i,r,u),e.globalAlpha=_*v,this.doDrawImage(e,S.data,A,y,b),e.restore(),t.transMatrix.onlyTranslate()||e.setTransformForCurrent()}else e.highPerformanceSave(),e.setCommonStyle(t,t.attribute,i,r,u),e.globalAlpha=_*v,e.fillStyle=g,e.fill(),e.highPerformanceRestore()}doDrawImage(t,e,i,r,s){if(r==="no-repeat")t.drawImage(e,i.x1,i.y1,i.width(),i.height());else{const a=i.width(),o=i.height();let l=a,u=o;if(s&&r!=="repeat"&&(e.width||e.height)){const d=e.width,p=e.height;r==="repeat-x"?(l=d*(o/p),u=o):r==="repeat-y"&&(u=p*(a/d),l=a);const f=t.dpr,g=Gg.allocate({width:l,height:u,dpr:f}),_=g.getContext("2d");_&&(_.inuse=!0,_.clearMatrix(),_.setTransformForCurrent(!0),_.clearRect(0,0,l,u),_.drawImage(e,0,0,l,u),e=g.nativeCanvas),Gg.free(g)}const h=t.dpr,c=t.createPattern(e,r);c.setTransform&&c.setTransform(new DOMMatrix([1/h,0,0,1/h,0,0])),t.fillStyle=c,t.translate(i.x1,i.y1),t.fillRect(0,0,a,o),t.translate(-i.x1,-i.y1)}}}const Ap=new S1;let Qa=class{constructor(n){this.subRenderContribitions=n,this.time=jn.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(n,t,e,i,r,s,a,o,l,u,h,c,d){this._subRenderContribitions||(this._subRenderContribitions=this.subRenderContribitions.getContributions()),this._subRenderContribitions.forEach(p=>{p.render(n,t,e,i,r,s,a,o,l,u,h,c,d)})}};Qa=BEt([Vt(),zH(0,fe(Rn)),zH(0,Xn(tF)),FEt("design:paramtypes",[Object])],Qa);class sF{constructor(){this.time=jn.afterFillStroke,this.useStyle=!0,this.order=10}createCommonPattern(t,e,i,r,s){const a=(t-2*e)/2,o=r.dpr,l=Gg.allocate({width:t,height:t,dpr:o}),u=l.getContext("2d");if(!u)return null;u.inuse=!0,u.clearMatrix(),u.setTransformForCurrent(!0),u.clearRect(0,0,t,t),s(a,u);const h=r.createPattern(l.nativeCanvas,"repeat");return h.setTransform&&h.setTransform(new DOMMatrix([1/o,0,0,1/o,0,0])),Gg.free(l),h}createCirclePattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,(s,a)=>{a.fillStyle=i,a.arc(s,s,s,0,be),a.fill()})}createDiamondPattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,(s,a)=>{const o=t/2,l=o;a.fillStyle=i,a.moveTo(o,l-s),a.lineTo(s+o,l),a.lineTo(o,l+s),a.lineTo(o-s,l),a.closePath(),a.fill()})}createRectPattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,(s,a)=>{const o=e,l=o;a.fillStyle=i,a.fillRect(o,l,2*s,2*s)})}createVerticalLinePattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,(s,a)=>{const o=e;a.fillStyle=i,a.fillRect(o,0,2*s,t)})}createHorizontalLinePattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,(s,a)=>{const o=e;a.fillStyle=i,a.fillRect(0,o,t,2*s)})}createBiasLRLinePattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,(s,a)=>{a.strokeStyle=i,a.lineWidth=s,a.moveTo(0,0),a.lineTo(t,t);const o=t/2,l=-o;a.moveTo(o,l),a.lineTo(o+t,l+t),a.moveTo(-o,-l),a.lineTo(-o+t,-l+t),a.stroke()})}createBiasRLLinePattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,(s,a)=>{a.strokeStyle=i,a.lineWidth=s,a.moveTo(t,0),a.lineTo(0,t);const o=t/2,l=o;a.moveTo(t+o,l),a.lineTo(o,l+t),a.moveTo(t-o,-l),a.lineTo(-o,-l+t),a.stroke()})}createGridPattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,(s,a)=>{const o=e,l=o;a.fillStyle=i,a.fillRect(o,l,s,s),a.fillRect(o+s,l+s,s,s)})}initTextureMap(t,e){this.textureMap=new Map}drawShape(t,e,i,r,s,a,o,l,u,h,c,d,p){this.textureMap||this.initTextureMap(e,t.stage);const{texture:f=u.texture,textureColor:g=u.textureColor,textureSize:_=u.textureSize,texturePadding:v=u.texturePadding}=t.attribute;f&&this.drawTexture(f,t,e,i,r,u,g,_,v)}drawTexture(t,e,i,r,s,a,o,l,u){let h=this.textureMap.get(t);if(!h)switch(t){case"circle":h=this.createCirclePattern(l,u,o,i);break;case"diamond":h=this.createDiamondPattern(l,u,o,i);break;case"rect":h=this.createRectPattern(l,u,o,i);break;case"vertical-line":h=this.createVerticalLinePattern(l,u,o,i);break;case"horizontal-line":h=this.createHorizontalLinePattern(l,u,o,i);break;case"bias-lr":h=this.createBiasLRLinePattern(l,u,o,i);break;case"bias-rl":h=this.createBiasRLLinePattern(l,u,o,i);break;case"grid":h=this.createGridPattern(l,u,o,i)}h&&(i.highPerformanceSave(),i.setCommonStyle(e,e.attribute,r,s,a),i.fillStyle=h,i.fill(),i.highPerformanceRestore())}}const Dm=new sF;class jEt{constructor(){this.time=jn.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,s,a,o,l,u,h,c,d){const{outerBorder:p,innerBorder:f}=t.attribute,g=p&&p.visible!==!1,_=f&&f.visible!==!1;if(!g&&!_)return;const{innerPadding:v=u.innerPadding,outerPadding:y=u.outerPadding,startAngle:b=u.startAngle,endAngle:S=u.endAngle,opacity:A=u.opacity,x:w=u.x,y:C=u.y,scaleX:k=u.scaleX,scaleY:M=u.scaleY}=t.attribute;let{innerRadius:P=u.innerRadius,outerRadius:E=u.outerRadius}=t.attribute;E+=y,P-=v;const I=!(!p||!p.stroke),D=!(!f||!f.stroke);if(g){const{distance:N=u.outerBorder.distance}=p,O=xr(e,N,e.dpr),L=N/E;if(t.setAttributes({outerRadius:E+O,innerRadius:P-O,startAngle:b-L,endAngle:S+L}),e.beginPath(),VA(t,e,i,r,E+O,P-O),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,u),d)d(e,p,u.outerBorder);else if(I){const H=u.outerBorder.opacity;u.outerBorder.opacity=A,e.setStrokeStyle(t,p,(w-i)/k,(C-r)/M,u.outerBorder),u.outerBorder.opacity=H,e.stroke()}}if(_){const{distance:N=u.innerBorder.distance}=f,O=xr(e,N,e.dpr),L=N/E;if(t.setAttributes({outerRadius:E-O,innerRadius:P+O,startAngle:b+L,endAngle:S-L}),e.beginPath(),VA(t,e,i,r,E-O,P+O),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,u),d)d(e,f,u.innerBorder);else if(D){const H=u.innerBorder.opacity;u.innerBorder.opacity=A,e.setStrokeStyle(t,f,(w-i)/k,(C-r)/M,u.innerBorder),u.innerBorder.opacity=H,e.stroke()}}t.setAttributes({outerRadius:E,innerRadius:P,startAngle:b,endAngle:S})}}const NEt=new jEt,zEt=Dm,HEt=Ap;class VEt{constructor(){this.time=jn.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,s,a,o,l,u,h,c,d){const{outerBorder:p,innerBorder:f}=t.attribute,g=p&&p.visible!==!1,_=f&&f.visible!==!1;if(!g&&!_)return;const{radius:v=u.radius,startAngle:y=u.startAngle,endAngle:b=u.endAngle,opacity:S=u.opacity,x:A=u.x,y:w=u.y,scaleX:C=u.scaleX,scaleY:k=u.scaleY}=t.attribute,M=!(!p||!p.stroke),P=!(!f||!f.stroke);if(g){const{distance:E=u.outerBorder.distance}=p,I=xr(e,E,e.dpr);if(e.beginPath(),e.arc(i,r,v+I,y,b),e.closePath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,u),d)d(e,p,u.outerBorder);else if(M){const D=u.outerBorder.opacity;u.outerBorder.opacity=S,e.setStrokeStyle(t,p,(A-i)/C,(w-r)/k,u.outerBorder),u.outerBorder.opacity=D,e.stroke()}}if(_){const{distance:E=u.innerBorder.distance}=f,I=xr(e,E,e.dpr);if(e.beginPath(),e.arc(i,r,v-I,y,b),e.closePath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,u),d)d(e,f,u.innerBorder);else if(P){const D=u.innerBorder.opacity;u.innerBorder.opacity=S,e.setStrokeStyle(t,f,(A-i)/C,(w-r)/k,u.innerBorder),u.innerBorder.opacity=D,e.stroke()}}}}const WEt=new VEt,$Et=Dm,GEt=Ap;class UEt extends S1{constructor(){super(...arguments),this.time=jn.beforeFillStroke}drawShape(t,e,i,r,s,a,o,l,u,h,c,d){const{background:p,backgroundMode:f=u.backgroundMode,backgroundFit:g=u.backgroundFit}=t.attribute;if(p)if(t.backgroundImg&&t.resources){const _=t.resources.get(p);if(_.state!=="success"||!_.data)return;e.highPerformanceSave(),e.setTransformFromMatrix(t.parent.globalTransMatrix,!0);const v=t.AABBBounds;this.doDrawImage(e,_.data,v,f,g),e.highPerformanceRestore(),e.setTransformForCurrent()}else e.highPerformanceSave(),e.fillStyle=p,e.fill(),e.highPerformanceRestore()}}const YEt=new UEt,Tx=Qe/2;function mc(n,t,e,i,r,s){let a;if(i<0&&(t+=i,i=-i),r<0&&(e+=r,r=-r),Mt(s,!0))a=[s=Ie(s),s,s,s];else if(Array.isArray(s)){const A=s;let w,C;switch(A.length){case 0:a=[0,0,0,0];break;case 1:w=Ie(A[0]),a=[w,w,w,w];break;case 2:case 3:w=Ie(A[0]),C=Ie(A[1]),a=[w,C,w,C];break;default:a=A,a[0]=Ie(a[0]),a[1]=Ie(a[1]),a[2]=Ie(a[2]),a[3]=Ie(a[3])}}else a=[0,0,0,0];if(i<0||a[0]+a[1]+a[2]+a[3]<1e-12)return n.rect(t,e,i,r);const[o,l,u,h]=[[t,e],[t+i,e],[t+i,e+r],[t,e+r]],c=Math.min(i/2,r/2),d=[Math.min(c,a[0]),Math.min(c,a[1]),Math.min(c,a[2]),Math.min(c,a[3])],p=[o[0]+d[0],o[1]],f=[o[0],o[1]+d[0]],g=[l[0]-d[1],l[1]],_=[l[0],l[1]+d[1]],v=[u[0]-d[2],u[1]],y=[u[0],u[1]-d[2]],b=[h[0]+d[3],h[1]],S=[h[0],h[1]-d[3]];if(n.moveTo(p[0],p[1]),n.lineTo(g[0],g[1]),!nx(g,_)){const A=g[0],w=g[1]+d[1];n.arc(A,w,d[1],-Tx,0,!1)}if(n.lineTo(y[0],y[1]),!nx(v,y)){const A=y[0]-d[2],w=y[1];n.arc(A,w,d[2],0,Tx,!1)}if(n.lineTo(b[0],b[1]),!nx(b,S)){const A=b[0],w=b[1]-d[3];n.arc(A,w,d[3],Tx,Qe,!1)}if(n.lineTo(f[0],f[1]),!nx(p,f)){const A=p[0],w=p[1]+d[0];n.arc(A,w,d[0],Qe,Qe+Tx,!1)}return n.closePath(),n}var tQ=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};class eQ{constructor(){this.time=jn.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,s,a,o,l,u,h,c,d){const{outerBorder:p,innerBorder:f}=t.attribute,g=p&&p.visible!==!1,_=f&&f.visible!==!1;if(!g&&!_)return;const{cornerRadius:v=u.cornerRadius,opacity:y=u.opacity,x:b=u.x,y:S=u.y,scaleX:A=u.scaleX,scaleY:w=u.scaleY,x1:C,y1:k}=t.attribute;let{width:M,height:P}=t.attribute;M=(M??C-i)||0,P=(P??k-r)||0;const E=!(!p||!p.stroke),I=!(!f||!f.stroke);if(g){const{distance:D=u.outerBorder.distance}=p,N=xr(e,D,e.dpr),O=i-N,L=r-N,H=2*N;if(v===0||ut(v)&&v.every(j=>j===0)?(e.beginPath(),e.rect(O,L,M+H,P+H)):(e.beginPath(),mc(e,O,L,M+H,P+H,v)),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,u),d)d(e,p,u.outerBorder);else if(E){const j=u.outerBorder.opacity;u.outerBorder.opacity=y,e.setStrokeStyle(t,p,(b-i)/A,(S-r)/w,u.outerBorder),u.outerBorder.opacity=j,e.stroke()}}if(_){const{distance:D=u.innerBorder.distance}=f,N=xr(e,D,e.dpr),O=i+N,L=r+N,H=2*N;if(v===0||ut(v)&&v.every(j=>j===0)?(e.beginPath(),e.rect(O,L,M-H,P-H)):(e.beginPath(),mc(e,O,L,M-H,P-H,v)),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,u),d)d(e,f,u.innerBorder);else if(I){const j=u.innerBorder.opacity;u.innerBorder.opacity=y,e.setStrokeStyle(t,f,(b-i)/A,(S-r)/w,u.innerBorder),u.innerBorder.opacity=j,e.stroke()}}}}let $A=class{constructor(){this.time=jn.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(n,t,e,i,r,s,a,o,l,u,h,c,d){const{stroke:p=l.stroke}=n.attribute;Array.isArray(p)&&p.some(f=>f===!1)&&(d.doStroke=!1)}};$A=tQ([Vt()],$A);let GA=class{constructor(){this.time=jn.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(n,t,e,i,r,s,a,o,l,u,h,c){const{x1:d,y1:p,x:f=l.x,y:g=l.y,stroke:_=l.stroke}=n.attribute;let{width:v,height:y}=n.attribute;if(v=(v??d-f)||0,y=(y??p-g)||0,Array.isArray(_)&&_.some(b=>b===!1)){if(t.setStrokeStyle(n,n.attribute,e,i,l),t.beginPath(),t.moveTo(e,i),_[0]?t.lineTo(e+v,i):t.moveTo(e+v,i),_[1]?t.lineTo(e+v,i+y):t.moveTo(e+v,i+y),_[2]?t.lineTo(e,i+y):t.moveTo(e,i+y),_[3]){const b=_[0]?i-t.lineWidth/2:i;t.lineTo(e,b)}else t.moveTo(e,i);t.stroke()}}};GA=tQ([Vt()],GA);const XEt=new eQ,KEt=Dm,qEt=Ap;class ZEt extends S1{constructor(){super(...arguments),this.time=jn.beforeFillStroke}drawShape(t,e,i,r,s,a,o,l,u,h,c,d){const{background:p,backgroundMode:f=u.backgroundMode,backgroundFit:g=u.backgroundFit}=t.attribute;if(p)if(t.backgroundImg){const _=t.resources.get(p);if(_.state!=="success"||!_.data)return;if(e.save(),t.parent&&!t.transMatrix.onlyTranslate()){const y=Pt(t.parent).group,{scrollX:b=y.scrollX,scrollY:S=y.scrollY}=t.parent.attribute;e.setTransformFromMatrix(t.parent.globalTransMatrix,!0),e.translate(b,S)}const v=t.AABBBounds;this.doDrawImage(e,_.data,v,f,g),e.restore(),t.transMatrix.onlyTranslate()||e.setTransformForCurrent()}else if(ae(p)){const{stroke:_,fill:v,lineWidth:y=1,cornerRadius:b=0,expandX:S=0,expandY:A=0}=p;if(!_&&!v)return;e.beginPath();const{x:w,y:C,width:k,height:M}=JEt(t);b?mc(e,w-S,C-A,k+2*S,M+2*A,b):e.rect(w-S,C-A,k+2*S,M+2*A),e.globalAlpha=1,v&&(e.fillStyle=v,e.fill()),_&&y>0&&(e.lineWidth=y,e.strokeStyle=_,e.stroke())}else{e.beginPath();const _=t.AABBBounds;e.rect(i,r,_.width(),_.height()),e.fillStyle=p,e.globalAlpha=1,e.fill()}}}function JEt(n){const t=br(n.attribute.boundsPadding),e=n.AABBBounds;let i=e.x1,r=e.y1,s=e.width(),a=e.height();return Mt(t)?(i+=t,r+=t,s-=2*t,a-=2*t):(i+=t[3],r+=t[0],s-=t[1]+t[3],a-=t[0]+t[2]),{x:i,y:r,width:s,height:a}}class QEt extends eQ{constructor(){super(...arguments),this.time=jn.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,s,a,o,l,u,h,c,d){return super.drawShape(t,e,i,r,s,a,o,l,u,h,c,d)}}const tOt=new QEt,eOt=new ZEt;class iOt{constructor(){this.time=jn.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,s,a,o,l,u,h,c,d){const p=t.getParsedPath();if(!p)return;const{outerBorder:f,innerBorder:g}=t.attribute,_=f&&f.visible!==!1,v=g&&g.visible!==!1;if(!_&&!v)return;const{size:y=u.size,opacity:b=u.opacity,x:S=u.x,y:A=u.y,scaleX:w=u.scaleX,scaleY:C=u.scaleY}=t.attribute,k=!(!f||!f.stroke),M=!(!g||!g.stroke);if(_){const{distance:P=u.outerBorder.distance}=f,E=xr(e,P,e.dpr);if(e.beginPath(),p.drawOffset(e,y,i,r,E)===!1&&e.closePath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,u),d)d(e,f,u.outerBorder);else if(k){const I=u.outerBorder.opacity;u.outerBorder.opacity=b,e.setStrokeStyle(t,f,(S-i)/w,(A-r)/C,u.outerBorder),u.outerBorder.opacity=I,e.stroke()}}if(v){const{distance:P=u.innerBorder.distance}=g,E=xr(e,P,e.dpr);if(e.beginPath(),p.drawOffset(e,y,i,r,-E)===!1&&e.closePath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,u),d)d(e,g,u.innerBorder);else if(M){const I=u.innerBorder.opacity;u.innerBorder.opacity=b,e.setStrokeStyle(t,g,(S-i)/w,(A-r)/C,u.innerBorder),u.innerBorder.opacity=I,e.stroke()}}}}const nOt=new iOt,rOt=Dm,sOt=Ap;class aOt extends sF{constructor(){super(...arguments),this.time=jn.afterFillStroke}drawShape(t,e,i,r,s,a,o,l,u,h,c,d,p){var f,g,_,v;this.textureMap||this.initTextureMap(e,t.stage);const{attribute:y=t.attribute}=p||{},{texture:b=(f=t.attribute.texture)!==null&&f!==void 0?f:Sx(u,"texture"),textureColor:S=(g=t.attribute.textureColor)!==null&&g!==void 0?g:Sx(u,"textureColor"),textureSize:A=(_=t.attribute.textureSize)!==null&&_!==void 0?_:Sx(u,"textureSize"),texturePadding:w=(v=t.attribute.texturePadding)!==null&&v!==void 0?v:Sx(u,"texturePadding")}=y;b&&this.drawTexture(b,t,e,i,r,u,S,A,w)}}var oOt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},lOt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},HH=function(n,t){return function(e,i){t(e,i,n)}};let UA=class extends vs{constructor(n){super(),this.arcRenderContribitions=n,this.numberType=b2,this.builtinContributions=[NEt,HEt,zEt],this.init(n)}drawArcTailCapPath(n,t,e,i,r,s,a,o){const l=o-a,u=n.getParsedAngle(),h=u.startAngle;let c=u.endAngle;c=o;const d=Ie(c-h),p=c>h;let f=!1;if(r<s){const q=r;r=s,s=q}const g=n.getParsedCornerRadius(),{outerDeltaAngle:_,innerDeltaAngle:v,outerStartAngle:y,outerEndAngle:b,innerEndAngle:S,innerStartAngle:A}=n.getParsePadAngle(h,c),w=g,C=g,k=g,M=g,P=Math.max(C,w),E=Math.max(k,M);let I=P,D=E;const N=r*ni(y),O=r*He(y),L=s*ni(S),H=s*He(S);let j,G,U,$;if((E>We||P>We)&&(j=r*ni(b),G=r*He(b),U=s*ni(A),$=s*He(A),d<Qe)){const q=HJ(N,O,U,$,j,G,L,H);if(q){const tt=N-q[0],it=O-q[1],nt=j-q[0],K=G-q[1],J=1/He(Hq((tt*nt+it*K)/(hs(tt*tt+it*it)*hs(nt*nt+K*K)))/2),Q=hs(q[0]*q[0]+q[1]*q[1]);D=nr(E,(s-Q)/(J-1)),I=nr(P,(r-Q)/(J+1))}}if(I>We){const q=nr(w,I),tt=nr(C,I),it=kh(U,$,N,O,r,q,Number(p)),nt=kh(j,G,L,H,r,tt,Number(p));if(I<P&&q===tt)t.moveTo(e+it.cx+it.x01,i+it.cy+it.y01),t.arc(e+it.cx,i+it.cy,I,ei(it.y01,it.x01),ei(nt.y01,nt.x01),!p);else{const K=c-l-.03,J=ei(nt.y11,nt.x11);t.arc(e,i,r,K,J,!p),tt>0&&t.arc(e+nt.cx,i+nt.cy,tt,ei(nt.y11,nt.x11),ei(nt.y01,nt.x01),!p)}}else t.moveTo(e+N,i+O);if(!(s>We)||v<.001)t.lineTo(e+L,i+H),f=!0;else if(D>We){const q=nr(M,D),tt=nr(k,D),it=kh(L,H,j,G,s,-tt,Number(p)),nt=kh(N,O,U,$,s,-q,Number(p));if(t.lineTo(e+it.cx+it.x01,i+it.cy+it.y01),D<E&&q===tt){const K=ei(nt.y01,nt.x01);t.arc(e+it.cx,i+it.cy,D,ei(it.y01,it.x01),K,!p)}else{tt>0&&t.arc(e+it.cx,i+it.cy,tt,ei(it.y01,it.x01),ei(it.y11,it.x11),!p);const K=ei(it.cy+it.y11,it.cx+it.x11),J=c-l-.03;t.arc(e,i,s,K,J,p)}}else t.lineTo(e+s*ni(A),i+s*He(A));return f}drawShape(n,t,e,i,r,s,a,o){const l=Pt(n,s==null?void 0:s.theme).arc,{fill:u=l.fill,stroke:h=l.stroke,x:c=l.x,y:d=l.y}=n.attribute,p=this.valid(n,l,a,o);if(!p)return;const{fVisible:f,sVisible:g,doFill:_,doStroke:v}=p,{outerPadding:y=l.outerPadding,innerPadding:b=l.innerPadding,cap:S=l.cap,forceShowCap:A=l.forceShowCap}=n.attribute;let{outerRadius:w=l.outerRadius,innerRadius:C=l.innerRadius}=n.attribute;w+=y,C-=b;let k=0;const M=(Si(S)&&S||S[0])&&u.gradient==="conical";if(M){const{sc:D,startAngle:N,endAngle:O}=n.getParsedAngle();Ie(O-N)<be-We&&(k=D||0,u.startAngle-=k,u.endAngle-=k)}let P=!1;const{isFullStroke:E,stroke:I}=eMt(h);if((_||E)&&(t.beginPath(),VA(n,t,e,i,w,C),P=!0,t.setShadowBlendStyle&&t.setShadowBlendStyle(n,n.attribute,l),this.beforeRenderStep(n,t,e,i,_,v,f,g,l,r,a,o),_&&(a?a(t,n.attribute,l):f&&(t.setCommonStyle(n,n.attribute,c-e,d-i,l),t.fill())),v&&E&&(o?o(t,n.attribute,l):g&&(t.setStrokeStyle(n,n.attribute,c-e,d-i,l),t.stroke()))),!E&&v&&(t.beginPath(),VA(n,t,e,i,w,C,I),P||this.beforeRenderStep(n,t,e,i,_,v,f,g,l,r,a,o),o?o(t,n.attribute,l):g&&(t.setStrokeStyle(n,n.attribute,e,i,l),t.stroke())),(Si(S)&&S||S[1])&&A){const{startAngle:D,endAngle:N}=n.getParsedAngle();if(Ie(N-D)>=be-We){t.beginPath();const O=Math.abs(w-C)/2/w,{endAngle:L=l.endAngle,fill:H=l.fill}=n.attribute,j=L;if(this.drawArcTailCapPath(n,t,e,i,w,C,j,j+O),P||this.beforeRenderStep(n,t,e,i,_,v,f,g,l,r,a,o),_){const G=H;if(G.gradient==="conical"){const U=iPt(0,0,L,G);a||tp&&(t.setCommonStyle(n,n.attribute,e,i,l),t.fillStyle=U,t.fill())}}v&&(o||g&&(t.setStrokeStyle(n,n.attribute,e,i,l),t.stroke()))}}this.afterRenderStep(n,t,e,i,_,v,f,g,l,r,a,o),M&&(u.startAngle+=k,u.endAngle+=k)}draw(n,t,e,i){const r=Pt(n,i==null?void 0:i.theme).arc;this._draw(n,r,!1,e,i)}};UA=oOt([Vt(),HH(0,fe(Rn)),HH(0,Xn(jI)),lOt("design:paramtypes",[Object])],UA);var uOt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},hOt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},VH=function(n,t){return function(e,i){t(e,i,n)}};let YA=class extends vs{constructor(n){super(),this.circleRenderContribitions=n,this.numberType=x2,this.builtinContributions=[WEt,GEt,$Et],this.init(n)}drawShape(n,t,e,i,r,s,a,o){const l=Pt(n,s==null?void 0:s.theme).circle,{radius:u=l.radius,startAngle:h=l.startAngle,endAngle:c=l.endAngle,x:d=l.x,y:p=l.y}=n.attribute,f=this.valid(n,l,a,o);if(!f)return;const{fVisible:g,sVisible:_,doFill:v,doStroke:y}=f;t.beginPath(),t.arc(e,i,u,h,c),t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(n,n.attribute,l),this.beforeRenderStep(n,t,e,i,v,y,g,_,l,r,a,o),v&&(a?a(t,n.attribute,l):g&&(t.setCommonStyle(n,n.attribute,d-e,p-i,l),t.fill())),y&&(o?o(t,n.attribute,l):_&&(t.setStrokeStyle(n,n.attribute,d-e,p-i,l),t.stroke())),this.afterRenderStep(n,t,e,i,v,y,g,_,l,r,a,o)}draw(n,t,e,i){const r=Pt(n,i==null?void 0:i.theme).circle;this._draw(n,r,!1,e,i)}};YA=uOt([Vt(),VH(0,fe(Rn)),VH(0,Xn(zI)),hOt("design:paramtypes",[Object])],YA);function XA(n,t,e,i){if(!t.p1)return;const{offsetX:r=0,offsetY:s=0,offsetZ:a=0}=i||{};if(e===1)t.p2&&t.p3?n.bezierCurveTo(r+t.p1.x,s+t.p1.y,r+t.p2.x,s+t.p2.y,r+t.p3.x,s+t.p3.y,a):n.lineTo(r+t.p1.x,s+t.p1.y,a);else if(t.p2&&t.p3){const[o]=AI(t,e);n.bezierCurveTo(r+o.p1.x,s+o.p1.y,r+o.p2.x,s+o.p2.y,r+o.p3.x,s+o.p3.y,a)}else{const o=t.getPointAt(e);n.lineTo(r+o.x,s+o.y,a)}}function JI(n,t,e,i,r){var s;const{offsetX:a=0,offsetY:o=0,offsetZ:l=0,mode:u="none",drawConnect:h=!1,zeroX:c=0,zeroY:d=0}=r||{};if(h&&u==="none"||!t)return;let p=!0;const{curves:f}=t;if(e>=1){if(h){let S,A=!0;f.forEach((w,C)=>{var k;let M=w.p0;if(w.originP1!==w.originP2){if(S&&S.originP1===S.originP2&&(M=S.p0),w.defined)A||(n.lineTo(M.x+a,M.y+o,l),A=!A);else{const{originP1:P,originP2:E}=w;let I;if(P&&P.defined!==!1?I=M:P&&E.defined!==!1&&(I=(k=w.p3)!==null&&k!==void 0?k:w.p1),A){A=!A;const D=I?I.x:w.p0.x,N=I?I.y:w.p0.y;n.moveTo(D+a,N+o,l)}else I&&(A=!A,n.lineTo(I.x+a,I.y+o,l))}S=w}else S=w})}else f.forEach(S=>{S.defined?(p&&n.moveTo(S.p0.x+a,S.p0.y+o,l),XA(n,S,1,r),p=!1):p=!0});return}if(e<=0)return;let g;i==="x"?g=fi.ROW:i==="y"?g=fi.COLUMN:i==="auto"&&(g=t.direction);const _=e*t.tryUpdateLength(g);let v=0,y=!0,b=null;for(let S=0,A=f.length;S<A;S++){const w=f[S],C=w.getLength(g),k=(_-v)/C;if(v+=C,k<0)break;if(h){let M=w.p0;if(w.originP1===w.originP2){b=w;continue}if(b&&b.originP1===b.originP2&&(M=b.p0),w.defined)y||(n.lineTo(M.x+a,M.y+o,l),y=!y);else{const{originP1:P,originP2:E}=w;let I;if(P&&P.defined!==!1?I=M:P&&E.defined!==!1&&(I=(s=w.p3)!==null&&s!==void 0?s:w.p1),y){y=!y;const D=I?I.x:w.p0.x,N=I?I.y:w.p0.y;n.moveTo(D+a,N+o,l)}else I&&(y=!y,n.lineTo(I.x+a,I.y+o,l))}b=w}else{if(!w.defined){p=!0;continue}p&&n.moveTo(w.p0.x+a,w.p0.y+o,l),XA(n,w,nr(k,1),r),p=!1}}}function cOt(n,t,e,i){const{offsetX:r=0,offsetY:s=0}=i||{},a=t?t.points[t.points.length-1]:e.points[0];n.moveTo(a.x+r,a.y+s),e.points.forEach(o=>{o.defined!==!1?n.lineTo(o.x+r,o.y+s):n.moveTo(o.x+r,o.y+s)})}function dOt(n,t,e,i){const{offsetX:r=0,offsetY:s=0}=i||{},{points:a}=e,o=[];for(let l=0;l<a.length;l++)a[l].defined;o.push(a),o.forEach((l,u)=>{var h,c,d,p;const f=t&&u===0?t.points[t.points.length-1]:l[0];n.moveTo(f.x+r,f.y+s),l.forEach(g=>{g.defined!==!1?n.lineTo(g.x+r,g.y+s):n.moveTo(g.x+r,g.y+s)});for(let g=l.length-1;g>=0;g--){const _=l[g];n.lineTo((h=_.x1)!==null&&h!==void 0?h:_.x,(c=_.y1)!==null&&c!==void 0?c:_.y)}n.lineTo((d=f.x1)!==null&&d!==void 0?d:f.x,(p=f.y1)!==null&&p!==void 0?p:f.y),n.closePath()})}var pOt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let gy=class extends vs{constructor(){super(...arguments),this.numberType=y1}draw(n,t,e,i){const r=Pt(n,i==null?void 0:i.theme).line;this._draw(n,r,!1,e,i)}drawSegmentItem(n,t,e,i,r,s,a,o,l,u,h,c,d,p,f){var g,_,v,y,b;if(!t)return;n.beginPath();const S=(g=this.z)!==null&&g!==void 0?g:0;JI(n.camera?n:n.nativeContext,t,l,u,{offsetX:h,offsetY:c,offsetZ:S}),d.cache&&!ut(d.cache)&&d.cache.curves.every(E=>E.defined)&&d.attribute.curveType&&d.attribute.curveType.includes("Closed")&&n.closePath(),n.setShadowBlendStyle&&n.setShadowBlendStyle(d,a,o);const{x:A=0,x:w=0}=a;e!==!1&&(p?p(n,a,o):r&&(n.setCommonStyle(d,a,A-h,w-c,o),n.fill())),i!==!1&&(f?f(n,a,o):s&&(n.setStrokeStyle(d,a,A-h,w-c,o),n.stroke()));let{connectedType:C,connectedX:k,connectedY:M,connectedStyle:P}=a;if(ut(o)?(C=(_=C??o[0].connectedType)!==null&&_!==void 0?_:o[1].connectedType,k=(v=k??o[0].connectedX)!==null&&v!==void 0?v:o[1].connectedX,M=(y=M??o[0].connectedY)!==null&&y!==void 0?y:o[1].connectedY,P=(b=P??o[0].connectedStyle)!==null&&b!==void 0?b:o[1].connectedStyle):(C=C??o.connectedType,k=k??o.connectedX,M=M??o.connectedY,P=P??o.connectedStyle),C!=="connect"&&C!=="zero"&&(C="none"),C!=="none"){n.beginPath(),JI(n.camera?n:n.nativeContext,t,l,u,{offsetX:h,offsetY:c,offsetZ:S,drawConnect:!0,mode:C,zeroX:k,zeroY:M});const E=[];ut(o)?o.forEach(I=>E.push(I)):E.push(o),E.push(a),e!==!1&&(p?p(n,a,o):r&&(n.setCommonStyle(d,P,A-h,w-c,E),n.fill())),i!==!1&&(f?f(n,a,o):s&&(n.setStrokeStyle(d,P,A-h,w-c,E),n.stroke()))}return!1}drawLinearLineHighPerformance(n,t,e,i,r,s,a,o,l,u,h,c,d){var p;t.beginPath();const f=(p=this.z)!==null&&p!==void 0?p:0,{points:g}=n.attribute,_=g[0];t.moveTo(_.x+a,_.y+o,f);for(let b=1;b<g.length;b++){const S=g[b];t.lineTo(S.x+a,S.y+o,f)}t.setShadowBlendStyle&&t.setShadowBlendStyle(n,n.attribute,l);const{x:v=0,x:y=0}=n.attribute;e!==!1&&(c?c(t,n.attribute,l):r&&(t.setCommonStyle(n,n.attribute,v-a,y-o,l),t.fill())),i!==!1&&(d?d(t,n.attribute,l):s&&(t.setStrokeStyle(n,n.attribute,v-a,y-o,l),t.stroke()))}drawShape(n,t,e,i,r,s,a,o){const l=Pt(n,s==null?void 0:s.theme).line,{fill:u=l.fill,stroke:h=l.stroke,fillOpacity:c=l.fillOpacity,strokeOpacity:d=l.strokeOpacity,segments:p,points:f,closePath:g}=n.attribute;if(!this.valid(n,l,a,o))return;let{curveType:_=l.curveType}=n.attribute;g&&_==="linear"&&(_="linearClosed");const{clipRange:v=l.clipRange,clipRangeByDimension:y=l.clipRangeByDimension}=n.attribute;if(v===1&&!p&&!f.some(b=>b.defined===!1)&&_==="linear")return this.drawLinearLineHighPerformance(n,t,!!u,!!h,c,d,e,i,l,r,s,a,o);if(n.shouldUpdateShape()){const{points:b,segments:S}=n.attribute,A=b;if(S&&S.length){let w,C;if(n.cache=S.map((k,M)=>{if(k.points.length<=1&&M===0)return k.points[0]&&(C={endX:k.points[0].x,endY:k.points[0].y,curves:[{defined:k.points[0].defined!==!1}]}),null;M===1?w={x:C.endX,y:C.endY,defined:C.curves[C.curves.length-1].defined}:M>1&&(w.x=C.endX,w.y=C.endY,w.defined=C.curves[C.curves.length-1].defined);const P=kI(k.points,_,{startPoint:w});return C=P,P}).filter(k=>!!k),_==="linearClosed"){let k;for(let M=0;M<n.cache.length;M++){const P=n.cache[M];for(let E=0;E<P.curves.length;E++)if(P.curves[E].defined){k=P.curves[E].p0;break}if(k)break}n.cache[n.cache.length-1]&&n.cache[n.cache.length-1].lineTo(k.x,k.y,!0)}}else{if(!b||!b.length)return n.cache=null,void n.clearUpdateShapeTag();n.cache=kI(A,_)}n.clearUpdateShapeTag()}if(Array.isArray(n.cache)){const b=n.attribute.segments.filter(S=>S.points.length);if(b[0].points.length===1&&b.shift(),v===1){let S=!1;n.cache.forEach((A,w)=>{S||(S=this.drawSegmentItem(t,A,!!u,!!h,c,d,b[w],[l,n.attribute],v,y,e,i,n,a,o))})}else{const S=n.cache.reduce((k,M)=>k+M.getLength(),0),A=v*S;let w=0,C=!1;n.cache.forEach((k,M)=>{if(C)return;const P=k.getLength(),E=(A-w)/P;w+=P,E>0&&(C=this.drawSegmentItem(t,k,!!u,!!h,c,d,b[M],[l,n.attribute],nr(E,1),y,e,i,n,a,o))})}}else this.drawSegmentItem(t,n.cache,!!u,!!h,c,d,n.attribute,l,v,y,e,i,n,a,o)}};gy=pOt([Vt()],gy);function fOt(n,t,e,i){var r;const{drawConnect:s=!1,mode:a="none"}=i||{};if(s&&a==="none")return;const{top:o,bottom:l}=t;if(o.curves.length!==l.curves.length)return;if(e>=1){const w=[],C=[];let k=!0;if(s){let M,P,E=!0;const I=o.curves.length;o.curves.forEach((D,N)=>{const O=l.curves[I-N-1];let L=D,H=O;if(D.originP1===D.originP2)return M=D,void(P=O);if(M&&M.originP1===M.originP2&&(L=M,H=P),D.defined)E||(w.push(L),C.push(H),Kp(n,w,C,i),w.length=0,C.length=0,E=!E);else{const{originP1:j,originP2:G}=D;let U,$;j&&j.defined!==!1?(U=L,$=H):j&&G.defined!==!1&&(U=D,$=O),E?(E=!E,w.push(U||D),C.push($||O)):U&&(E=!E,w.push(U||D),C.push($||O),Kp(n,w,C,i),w.length=0,C.length=0)}M=D}),Kp(n,w,C,i)}else{for(let M=0,P=o.curves.length;M<P;M++){const E=o.curves[M];k!==E.defined?(k?(Mx(n,w,C,i),w.length=0,C.length=0):(w.push(E),C.push(l.curves[P-M-1])),k=!k):k&&(w.push(E),C.push(l.curves[P-M-1]))}Mx(n,w,C,i)}return}if(e<=0)return;let{direction:u}=i||{};const{curves:h}=o,c=(r=h[h.length-1].p3)!==null&&r!==void 0?r:h[h.length-1].p1,d=Ie(c.x-h[0].p0.x),p=Ie(c.y-h[0].p0.y);u=u??(d>p?fi.ROW:fi.COLUMN),Number.isFinite(d)||(u=fi.COLUMN),Number.isFinite(p)||(u=fi.ROW);const f=e*(u===fi.ROW?d:p);let g=0,_=!0;const v=[],y=[];let b,S,A=!0;for(let w=0,C=o.curves.length;w<C;w++){const k=o.curves[w],M=k.getLength(u),P=(f-g)/M;if(P<0)break;if(g+=M,s){const E=l.curves[C-w-1];let I=k,D=E;if(k.originP1===k.originP2){b=k,S=E;continue}if(b&&b.originP1===b.originP2&&(I=b,D=S),k.defined)A||(v.push(I),y.push(D),Kp(n,v,y,i),v.length=0,y.length=0,A=!A);else{const{originP1:N,originP2:O}=k;let L,H;N&&N.defined!==!1?(L=I,H=D):N&&O.defined!==!1&&(L=k,H=E),A?(A=!A,v.push(L||k),y.push(H||E)):L&&(A=!A,v.push(L||k),y.push(H||E),Kp(n,v,y,i),v.length=0,y.length=0)}b=k}else{let E=null,I=null;_!==k.defined?(_?(Mx(n,v,y,i),v.length=0,y.length=0):(E=k,I=l.curves[C-w-1]),_=!_):_&&(E=k,I=l.curves[C-w-1]),E&&I&&(P<1&&(E=E.p2&&E.p3?AI(E,P)[0]:E6(E,P)[0],I=I.p2&&I.p3?AI(I,1-P)[1]:E6(I,1-P)[1]),E.defined=_,I.defined=_,v.push(E),y.push(I)),E=null,I=null}}s?Kp(n,v,y,i):Mx(n,v,y,i)}function Kp(n,t,e,i){if(t.length<2)return;const{offsetX:r=0,offsetY:s=0,offsetZ:a=0,mode:o}=i||{};let l=t[0];n.moveTo(l.p0.x+r,l.p0.y+s,a),l=t[t.length-1];let u=l.p3||l.p1;n.lineTo(u.x+r,u.y+s,a),l=e[e.length-1],n.lineTo(l.p0.x+r,l.p0.y+s,a),l=e[0],u=l.p3||l.p1,n.lineTo(u.x+r,u.y+s,a),n.closePath()}function Mx(n,t,e,i){const{offsetX:r=0,offsetY:s=0,offsetZ:a=0}=i||{};let o=!0;t.forEach(l=>{l.defined?(o&&n.moveTo(l.p0.x+r,l.p0.y+s,a),XA(n,l,1,i),o=!1):o=!0}),o=!0;for(let l=e.length-1;l>=0;l--){const u=e[l];u.defined?(o&&n.lineTo(u.p0.x+r,u.p0.y+s,a),XA(n,u,1,i),o=!1):o=!0}n.closePath()}const gOt=new aOt,mOt=Ap;var vOt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},_Ot=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},WH=function(n,t){return function(e,i){t(e,i,n)}};function Px(n,t,e){switch(t){case"linear":default:return g1(n,e);case"basis":return eJ(n,e);case"monotoneX":return nJ(n,e);case"monotoneY":return rJ(n,e);case"step":return cg(n,.5,e);case"stepBefore":return cg(n,0,e);case"stepAfter":return cg(n,1,e);case"linearClosed":return sJ(n,e)}}let my=class extends vs{constructor(n){super(),this.areaRenderContribitions=n,this.numberType=_1,this.builtinContributions=[gOt,mOt],this.init(n)}drawLinearAreaHighPerformance(n,t,e,i,r,s,a,o,l,u,h,c,d){var p,f,g,_,v;const{points:y}=n.attribute;if(y.length<2)return;t.beginPath();const b=(p=this.z)!==null&&p!==void 0?p:0,S=y[0];t.moveTo(S.x+a,S.y+o,b);for(let C=1;C<y.length;C++){const k=y[C];t.lineTo(k.x+a,k.y+o,b)}for(let C=y.length-1;C>=0;C--){const k=y[C];t.lineTo(((f=k.x1)!==null&&f!==void 0?f:k.x)+a,((g=k.y1)!==null&&g!==void 0?g:k.y)+o,b)}t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(n,n.attribute,l),this.beforeRenderStep(n,t,a,o,!!r,!1,e,!1,l,u,c,null,{attribute:n.attribute});const{x:A=0,x:w=0}=n.attribute;if(e!==!1&&(c?c(t,n.attribute,l):r&&(t.setCommonStyle(n,n.attribute,A-a,w-o,l),t.fill())),this.afterRenderStep(n,t,a,o,!!r,!1,e,!1,l,u,c,null,{attribute:n.attribute}),i){const{stroke:C=l&&l.stroke}=n.attribute;if(ut(C)&&(C[0]||C[2])&&C[1]===!1){if(t.beginPath(),C[0]){t.moveTo(S.x+a,S.y+o,b);for(let k=1;k<y.length;k++){const M=y[k];t.lineTo(M.x+a,M.y+o,b)}}else if(C[2]){const k=y[y.length-1];t.moveTo(k.x+a,k.y+o,b);for(let M=y.length-2;M>=0;M--){const P=y[M];t.lineTo(((_=P.x1)!==null&&_!==void 0?_:P.x)+a,((v=P.y1)!==null&&v!==void 0?v:P.y)+o,b)}}}d?d(t,n.attribute,l):(t.setStrokeStyle(n,n.attribute,A-a,w-o,l),t.stroke())}}drawShape(n,t,e,i,r,s,a,o){var l,u,h,c,d,p;const f=Pt(n,s==null?void 0:s.theme).area,{fill:g=f.fill,stroke:_=f.stroke,fillOpacity:v=f.fillOpacity,z:y=f.z,strokeOpacity:b=f.strokeOpacity}=n.attribute,S=this.valid(n,f,a,o);if(!S)return;const{doFill:A,doStroke:w}=S,{clipRange:C=f.clipRange,closePath:k,points:M,segments:P}=n.attribute;let{curveType:E=f.curveType}=n.attribute;if(k&&E==="linear"&&(E="linearClosed"),C===1&&!P&&!M.some(I=>I.defined===!1)&&E==="linear")return this.drawLinearAreaHighPerformance(n,t,!!g,w,v,b,e,i,f,r,s,a,o);if(n.shouldUpdateShape()){if(P&&P.length){let I,D;const N=P.map((H,j)=>{if(H.points.length<=1&&j===0)return H.points[0]&&(D={endX:H.points[0].x,endY:H.points[0].y}),null;j===1?I={x:D.endX,y:D.endY}:j>1&&(I.x=D.endX,I.y=D.endY);const G=Px(H.points,E,{startPoint:I});return D=G,G}).filter(H=>!!H);let O;const L=[];for(let H=P.length-1;H>=0;H--){const j=P[H].points,G=[];for(let U=j.length-1;U>=0;U--)G.push({x:(l=j[U].x1)!==null&&l!==void 0?l:j[U].x,y:(u=j[U].y1)!==null&&u!==void 0?u:j[U].y});if(H!==0){const U=P[H-1].points,$=U[U.length-1];$&&G.push({x:(h=$.x1)!==null&&h!==void 0?h:$.x,y:(c=$.y1)!==null&&c!==void 0?c:$.y})}G.length>1&&(O=Px(G,E==="stepBefore"?"stepAfter":E==="stepAfter"?"stepBefore":E),L.unshift(O))}n.cacheArea=L.map((H,j)=>({top:N[j],bottom:H}))}else{if(!M||!M.length)return n.cacheArea=null,void n.clearUpdateShapeTag();{const I=M,D=[];for(let L=M.length-1;L>=0;L--)D.push({x:(d=M[L].x1)!==null&&d!==void 0?d:M[L].x,y:(p=M[L].y1)!==null&&p!==void 0?p:M[L].y});const N=Px(I,E),O=Px(D,E==="stepBefore"?"stepAfter":E==="stepAfter"?"stepBefore":E);n.cacheArea={top:N,bottom:O}}}n.clearUpdateShapeTag()}if(Array.isArray(n.cacheArea)){const I=n.attribute.segments.filter(D=>D.points.length);if(I[0].points.length===1&&I.shift(),C===1){let D=!1;n.cacheArea.forEach((N,O)=>{D||(D=this.drawSegmentItem(t,N,A,v,w,b,I[O],[f,n.attribute],C,e,i,y,n,r,a,o))})}else{const D=n.cacheArea.reduce((H,j)=>H+j.top.getLength(),0),N=C*D;let O=0,L=!1;n.cacheArea.forEach((H,j)=>{if(L)return;const G=H.top.getLength(),U=(N-O)/G;O+=G,U>0&&(L=this.drawSegmentItem(t,H,A,v,w,b,I[j],[f,n.attribute],nr(U,1),e,i,y,n,r,a,o))})}}else this.drawSegmentItem(t,n.cacheArea,A,v,w,b,n.attribute,f,C,e,i,y,n,r,a,o)}draw(n,t,e,i){const r=Pt(n,i==null?void 0:i.theme).area;this._draw(n,r,!1,e,i)}drawSegmentItem(n,t,e,i,r,s,a,o,l,u,h,c,d,p,f,g){let _=!1;return _=_||this._drawSegmentItem(n,t,e,i,r,s,a,o,l,u,h,c,d,p,!1,f,g),_=_||this._drawSegmentItem(n,t,e,i,r,s,a,o,l,u,h,c,d,p,!0,f,g),_}_drawSegmentItem(n,t,e,i,r,s,a,o,l,u,h,c,d,p,f,g,_){var v,y,b,S;if(!(t&&t.top&&t.bottom&&t.top.curves&&t.top.curves.length&&t.bottom.curves&&t.bottom.curves.length))return;let{connectedType:A,connectedX:w,connectedY:C,connectedStyle:k}=a;const M=[];if(f&&(ut(o)?(A=(v=A??o[0].connectedType)!==null&&v!==void 0?v:o[1].connectedType,w=(y=w??o[0].connectedX)!==null&&y!==void 0?y:o[1].connectedX,C=(b=C??o[0].connectedY)!==null&&b!==void 0?b:o[1].connectedY,k=(S=k??o[0].connectedStyle)!==null&&S!==void 0?S:o[1].connectedStyle):(A=A??o.connectedType,w=w??o.connectedX,C=C??o.connectedY,k=k??o.connectedStyle),A!=="connect"&&A!=="zero"&&(A="none"),ut(o)?o.forEach(G=>M.push(G)):M.push(o),M.push(a)),f&&A==="none")return!1;n.beginPath();const{points:P,segments:E}=d.attribute;let I,D,N=fi.ROW;if(E){const G=E[E.length-1];D=E[0].points[0],I=G.points[G.points.length-1]}else D=P[0],I=P[P.length-1];const O=Ie(I.x-D.x),L=Ie(I.y-D.y);N=I.x1==null?fi.ROW:I.y1==null?fi.COLUMN:Number.isFinite(O+L)?O>L?fi.ROW:fi.COLUMN:fi.ROW,fOt(n.camera?n:n.nativeContext,t,l,{offsetX:u,offsetY:h,offsetZ:c,direction:N,drawConnect:f,mode:A,zeroX:w,zeroY:C}),this.beforeRenderStep(d,n,u,h,!!i,!1,e,!1,o,p,g,null,{attribute:a}),n.setShadowBlendStyle&&n.setShadowBlendStyle(d,a,o);const{x:H=0,x:j=0}=a;if(e!==!1&&(g?g(n,a,o):i&&(n.setCommonStyle(d,f?k:a,H-u,j-h,f?M:o),n.fill())),this.afterRenderStep(d,n,u,h,!!i,!1,e,!1,o,p,g,null,{attribute:a}),r!==!1)if(_)_(n,a,o);else{const{stroke:G=o&&o[1]&&o[1].stroke}=a;ut(G)&&(G[0]||G[2])&&G[1]===!1&&(n.beginPath(),JI(n.camera?n:n.nativeContext,G[0]?t.top:t.bottom,l,N===fi.ROW?"x":"y",{offsetX:u,offsetY:h,offsetZ:c,drawConnect:f,mode:A,zeroX:w,zeroY:C})),n.setStrokeStyle(d,f?k:a,H-u,j-h,f?M:o),n.stroke()}return!1}};my=vOt([Vt(),WH(0,fe(Rn)),WH(0,Xn(NI)),_Ot("design:paramtypes",[Object])],my);const yOt=Dm,bOt=Ap;var xOt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},SOt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},$H=function(n,t){return function(e,i){t(e,i,n)}};let KA=class extends vs{constructor(n){super(),this.pathRenderContribitions=n,this.numberType=w2,this.builtinContributions=[bOt,yOt],this.init(n)}drawShape(n,t,e,i,r,s,a,o){var l,u,h;const c=(l=this.tempTheme)!==null&&l!==void 0?l:Pt(n,s==null?void 0:s.theme).path,{x:d=c.x,y:p=c.y}=n.attribute,f=(u=this.z)!==null&&u!==void 0?u:0,g=this.valid(n,c,a,o);if(!g)return;const{fVisible:_,sVisible:v,doFill:y,doStroke:b}=g;if(t.beginPath(),n.pathShape)cu(n.pathShape.commandList,t,e,i,1,1,f);else{const S=(h=n.attribute.path)!==null&&h!==void 0?h:c.path;cu(S.commandList,t,e,i,1,1,f)}t.setShadowBlendStyle&&t.setShadowBlendStyle(n,n.attribute,c),this.beforeRenderStep(n,t,e,i,y,b,_,v,c,r,a,o),b&&(o?o(t,n.attribute,c):v&&(t.setStrokeStyle(n,n.attribute,d-e,p-i,c),t.stroke())),y&&(a?a(t,n.attribute,c):_&&(t.setCommonStyle(n,n.attribute,d-e,p-i,c),t.fill())),this.afterRenderStep(n,t,e,i,y,b,_,v,c,r,a,o)}draw(n,t,e,i){const r=Pt(n,i==null?void 0:i.theme).path;this.tempTheme=r,this._draw(n,r,!1,e,i),this.tempTheme=null}};KA=xOt([Vt(),$H(0,fe(Rn)),$H(0,Xn(VI)),SOt("design:paramtypes",[Object])],KA);var AOt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},wOt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},GH=function(n,t){return function(e,i){t(e,i,n)}};let qA=class extends vs{constructor(n){super(),this.rectRenderContribitions=n,this.type="rect",this.numberType=k2,this.builtinContributions=[XEt,qEt,KEt],this.init(n)}drawShape(n,t,e,i,r,s,a,o){var l;const u=(l=this.tempTheme)!==null&&l!==void 0?l:Pt(n,s==null?void 0:s.theme).rect,{fill:h=u.fill,background:c,stroke:d=u.stroke,cornerRadius:p=u.cornerRadius,opacity:f=u.opacity,fillOpacity:g=u.fillOpacity,lineWidth:_=u.lineWidth,strokeOpacity:v=u.strokeOpacity,visible:y=u.visible,x1:b,y1:S,x:A=u.x,y:w=u.y}=n.attribute;let{width:C,height:k}=n.attribute;C=(C??b-A)||0,k=(k??S-w)||0;const M=Z3(f,g,C,k,h),P=Q3(f,v,C,k),E=Sp(h,c),I=Lm(d,_);if(!n.valid||!y||!E&&!I||!(M||P||a||o||c))return;p===0||ut(p)&&p.every(N=>N===0)?(t.beginPath(),t.rect(e,i,C,k)):(t.beginPath(),mc(t,e,i,C,k,p));const D={doFill:E,doStroke:I};t.setShadowBlendStyle&&t.setShadowBlendStyle(n,n.attribute,u),this.beforeRenderStep(n,t,e,i,E,I,M,P,u,r,a,o,D),D.doFill&&(a?a(t,n.attribute,u):M&&(t.setCommonStyle(n,n.attribute,A-e,w-i,u),t.fill())),D.doStroke&&(o?o(t,n.attribute,u):P&&(t.setStrokeStyle(n,n.attribute,A-e,w-i,u),t.stroke())),this.afterRenderStep(n,t,e,i,E,I,M,P,u,r,a,o)}draw(n,t,e,i){const r=Pt(n,i==null?void 0:i.theme).rect;this.tempTheme=r,this._draw(n,r,!1,e,i),this.tempTheme=null}};qA=AOt([Vt(),GH(0,fe(Rn)),GH(0,Xn(Zv)),wOt("design:paramtypes",[Object])],qA);var COt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},kOt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},UH=function(n,t){return function(e,i){t(e,i,n)}};let ZA=class extends vs{constructor(n){super(),this.symbolRenderContribitions=n,this.numberType=T2,this.builtinContributions=[nOt,sOt,rOt],this.init(n)}drawShape(n,t,e,i,r,s,a,o){var l;const u=Pt(n,s==null?void 0:s.theme).symbol,{size:h=u.size,x:c=u.x,y:d=u.y,scaleX:p=u.scaleX,scaleY:f=u.scaleY}=n.attribute,g=this.valid(n,u,a,o);if(!g)return;const{fVisible:_,sVisible:v,doFill:y,doStroke:b}=g,S=n.getParsedPath();if(!S)return;const{keepDirIn3d:A=u.keepDirIn3d}=n.attribute,w=(l=this.z)!==null&&l!==void 0?l:0;if(t.beginPath(),A&&t.camera&&t.project){const C=t.project(e,i,w),k=t.camera;t.camera=null,S.draw(t,ut(h)?[h[0]*p,h[1]*f]:h*p,C.x,C.y,void 0,(M,P)=>{var E,I,D;if(n._parsedPath.svgCache){const N=Object.assign({},P);N.fill=(E=P.fill)!==null&&E!==void 0?E:n.attribute.fill,N.opacity=(I=P.fill)!==null&&I!==void 0?I:n.attribute.opacity,N.fillOpacity=n.attribute.fillOpacity,N.stroke=(D=P.stroke)!==null&&D!==void 0?D:n.attribute.stroke,P=N}P.fill&&(a?a(t,n.attribute,u):(t.setCommonStyle(n,P,c-e,d-i,u),t.fill())),P.stroke&&(o?o(t,n.attribute,u):(t.setStrokeStyle(n,P,(c-e)/p,(d-i)/f,u),t.stroke()))})===!1&&t.closePath(),t.camera=k}else S.draw(t,h,e,i,w,(C,k)=>{var M,P,E;if(n._parsedPath.svgCache){const I=Object.assign({},k);I.fill=(M=k.fill)!==null&&M!==void 0?M:n.attribute.fill,I.opacity=(P=k.opacity)!==null&&P!==void 0?P:n.attribute.opacity,I.fillOpacity=n.attribute.fillOpacity,I.stroke=(E=k.stroke)!==null&&E!==void 0?E:n.attribute.stroke,k=I}k.fill&&(a?a(t,n.attribute,u):(t.setCommonStyle(n,k,c-e,d-i,u),t.fill())),k.stroke&&(o?o(t,n.attribute,u):(t.setStrokeStyle(n,k,(c-e)/p,(d-i)/f,u),t.stroke()))})===!1&&t.closePath();t.setShadowBlendStyle&&t.setShadowBlendStyle(n,n.attribute,u),this.beforeRenderStep(n,t,e,i,y,b,_,v,u,r,a,o),y&&!S.isSvg&&(a?a(t,n.attribute,u):_&&(t.setCommonStyle(n,n.attribute,c-e,d-i,u),t.fill())),b&&!S.isSvg&&(o?o(t,n.attribute,u):v&&(t.setStrokeStyle(n,n.attribute,(c-e)/p,(d-i)/f,u),t.stroke())),this.afterRenderStep(n,t,e,i,y,b,_,v,u,r,a,o)}draw(n,t,e,i){const r=Pt(n,i==null?void 0:i.theme).symbol;this._draw(n,r,!1,e,i)}};ZA=COt([Vt(),UH(0,fe(Rn)),UH(0,Xn($I)),kOt("design:paramtypes",[Object])],ZA);class TOt{constructor(){this.pools=[];for(let t=0;t<10;t++)this.pools.push(new Ai)}allocate(t,e,i,r){if(!this.pools.length)return new Ai().setValue(t,e,i,r);const s=this.pools.pop();return s.x1=t,s.y1=e,s.x2=i,s.y2=r,s}allocateByObj(t){if(!this.pools.length)return new Ai(t);const e=this.pools.pop();return e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e}free(t){this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}}const JA=new TOt;class MOt extends S1{constructor(){super(...arguments),this.time=jn.beforeFillStroke}drawShape(t,e,i,r,s,a,o,l,u,h,c,d){var p,f,g,_,v,y,b,S,A,w;const{backgroundMode:C=u.backgroundMode,backgroundFit:k=u.backgroundFit}=t.attribute;let M,{background:P}=t.attribute;if(!P)return;const E=()=>{t.type==="richtext"&&(e.restore(),e.save(),M&&e.setTransformFromMatrix(M,!0,1))};let I;t.type==="richtext"&&(M=e.currentMatrix.clone(),e.restore(),e.save(),e.setTransformForCurrent());const D=ae(P)&&P.background,N=t.transMatrix.onlyTranslate();if(D){const O=t.AABBBounds,L=((p=P.x)!==null&&p!==void 0?p:O.x1)+((f=P.dx)!==null&&f!==void 0?f:0),H=((g=P.y)!==null&&g!==void 0?g:O.y1)+((_=P.dy)!==null&&_!==void 0?_:0),j=(v=P.width)!==null&&v!==void 0?v:O.width(),G=(y=P.height)!==null&&y!==void 0?y:O.height();if(I=JA.allocate(L,H,L+j,H+G),P=P.background,!N){const U=I.width(),$=I.height();I.set(((b=P.x)!==null&&b!==void 0?b:0)+((S=P.dx)!==null&&S!==void 0?S:0),((A=P.y)!==null&&A!==void 0?A:0)+((w=P.dy)!==null&&w!==void 0?w:0),U,$)}}else I=t.AABBBounds,N||(I=x1(Object.assign(Object.assign({},t.attribute),{angle:0,scaleX:1,scaleY:1,x:0,y:0,dx:0,dy:0})).clone());if(t.backgroundImg&&t.resources){const O=t.resources.get(P);if(O.state!=="success"||!O.data)return void E();e.highPerformanceSave(),N&&e.setTransformFromMatrix(t.parent.globalTransMatrix,!0),e.setCommonStyle(t,t.attribute,i,r,u),this.doDrawImage(e,O.data,I,C,k),e.highPerformanceRestore(),e.setTransformForCurrent()}else{const{backgroundCornerRadius:O}=t.attribute;e.highPerformanceSave(),e.setCommonStyle(t,t.attribute,i,r,u),e.fillStyle=P,O?(mc(e,I.x1,I.y1,I.width(),I.height(),O),e.fill()):e.fillRect(I.x1,I.y1,I.width(),I.height()),e.highPerformanceRestore()}D&&JA.free(I),E()}}const iQ=new MOt;var POt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},EOt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},YH=function(n,t){return function(e,i){t(e,i,n)}};let QI=class extends vs{constructor(n){super(),this.textRenderContribitions=n,this.numberType=M2,this.builtinContributions=[iQ],this.init(n)}drawShape(n,t,e,i,r,s,a,o){var l,u,h;const c=Pt(n,s==null?void 0:s.theme).text,{text:d,underline:p=c.underline,lineThrough:f=c.lineThrough,keepDirIn3d:g=c.keepDirIn3d,direction:_=c.direction,whiteSpace:v=c.whiteSpace,fontSize:y=c.fontSize,verticalMode:b=c.verticalMode,x:S=c.x,y:A=c.y}=n.attribute;let{textAlign:w=c.textAlign,textBaseline:C=c.textBaseline}=n.attribute;if(!b&&_==="vertical"){const H=w;w=(l=n.getBaselineMapAlign()[C])!==null&&l!==void 0?l:"left",C=(u=n.getAlignMapBaseline()[H])!==null&&u!==void 0?u:"top"}const k=(h=au(n.attribute.lineHeight,y))!==null&&h!==void 0?h:y,M=this.valid(n,c,a,o);if(!M)return;const{fVisible:P,sVisible:E,doFill:I,doStroke:D}=M,N=!g,O=this.z||0;t.beginPath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(n,n.attribute,c),this.beforeRenderStep(n,t,e,i,I,D,P,E,c,r,a,o),N&&this.transformUseContext2d(n,c,O,t);const L=(H,j,G,U)=>{let $=e+j;const q=i+G;if(U){t.highPerformanceSave(),$+=y;const tt=Ua.allocate(1,0,0,1,0,0);tt.rotateByCenter(Math.PI/2,$,q),t.transformFromMatrix(tt,!0),Ua.free(tt)}D&&(o?o(t,n.attribute,c):E&&(t.setStrokeStyle(n,n.attribute,S-e,A-i,c),t.strokeText(H,$,q,O))),I&&(a?a(t,n.attribute,c):P&&(t.setCommonStyle(n,n.attribute,S-e,A-i,c),t.fillText(H,$,q,O),this.drawUnderLine(p,f,n,$,q,O,c,t))),U&&(t.highPerformanceRestore(),t.setTransformForCurrent())};if(n.isMultiLine)if(t.setTextStyleWithoutAlignBaseline(n.attribute,c,O),_==="horizontal"){const{multilineLayout:H}=n;if(!H)return void t.highPerformanceRestore();const{xOffset:j,yOffset:G}=H.bbox;D&&(o?o(t,n.attribute,c):E&&(t.setStrokeStyle(n,n.attribute,S-e,A-i,c),H.lines.forEach(U=>{t.strokeText(U.str,(U.leftOffset||0)+j+e,(U.topOffset||0)+G+i,O)}))),I&&(a?a(t,n.attribute,c):P&&(t.setCommonStyle(n,n.attribute,S-e,A-i,c),H.lines.forEach(U=>{t.fillText(U.str,(U.leftOffset||0)+j+e,(U.topOffset||0)+G+i,O),this.drawMultiUnderLine(p,f,n,(U.leftOffset||0)+j+e,(U.topOffset||0)+G+i-sPt("bottom",y)-.05*y,O,U.width,c,t)})))}else{n.tryUpdateAABBBounds();const H=n.cache,{verticalList:j}=H;t.textAlign="left",t.textBaseline="top";const G=k*j.length;let U=0;j.forEach(tt=>{const it=tt.reduce((nt,K)=>nt+(K.width||0),0);U=ls(it,U)});let $=0,q=0;C==="bottom"?q=-G:C==="middle"&&(q=-G/2),w==="center"?$-=U/2:w==="right"&&($-=U),j.forEach((tt,it)=>{const nt=tt.reduce((Q,dt)=>Q+(dt.width||0),0),K=U-nt;let J=$;w==="center"?J+=K/2:w==="right"&&(J+=K),tt.forEach(Q=>{const{text:dt,width:bt,direction:xt}=Q;L(dt,G-(it+1)*k+q,J,xt),J+=bt})})}else if(_==="horizontal"){t.setTextStyle(n.attribute,c,O);const H=n.clipedText;let j=0;k!==y&&(C==="top"?j=(k-y)/2:C==="middle"||C==="bottom"&&(j=-(k-y)/2)),L(H,0,j,0)}else{n.tryUpdateAABBBounds();const H=n.cache;if(H){t.setTextStyleWithoutAlignBaseline(n.attribute,c,O);const{verticalList:j}=H;let G=0;const U=j[0].reduce((q,tt)=>q+(tt.width||0),0);let $=0;C==="bottom"?$=-k:C==="middle"&&($=-k/2),w==="center"?G-=U/2:w==="right"&&(G-=U),t.textAlign="left",t.textBaseline="top",j[0].forEach(q=>{const{text:tt,width:it,direction:nt}=q;L(tt,$,G,nt),G+=it})}}N&&this.restoreTransformUseContext2d(n,c,O,t),this.afterRenderStep(n,t,e,i,I,D,P,E,c,r,a,o)}draw(n,t,e,i){const r=Pt(n,i==null?void 0:i.theme).text,{keepDirIn3d:s=r.keepDirIn3d}=n.attribute,a=!s;this._draw(n,r,a,e,i)}drawUnderLine(n,t,e,i,r,s,a,o){if(t+n<=0)return;const{textAlign:l=a.textAlign,textBaseline:u=a.textBaseline,fontSize:h=a.fontSize,fill:c=a.fill,opacity:d=a.opacity,underlineOffset:p=a.underlineOffset,underlineDash:f=a.underlineDash,fillOpacity:g=a.fillOpacity}=e.attribute,_=e.clipedWidth,v=iu(l,_),y=al(u,h,h),b={lineWidth:0,stroke:c,opacity:d,strokeOpacity:g};if(n){b.lineWidth=n,o.setStrokeStyle(e,b,i,r,a),f&&o.setLineDash(f),o.beginPath();const S=r+y+h+p;o.moveTo(i+v,S,s),o.lineTo(i+v+_,S,s),o.stroke()}if(t){b.lineWidth=t,o.setStrokeStyle(e,b,i,r,a),o.beginPath();const S=r+y+h/2;o.moveTo(i+v,S,s),o.lineTo(i+v+_,S,s),o.stroke()}}drawMultiUnderLine(n,t,e,i,r,s,a,o,l){if(t+n<=0)return;const{fontSize:u=o.fontSize,fill:h=o.fill,opacity:c=o.opacity,underlineOffset:d=o.underlineOffset,underlineDash:p=o.underlineDash,fillOpacity:f=o.fillOpacity}=e.attribute,g=al("alphabetic",u,u),_={lineWidth:0,stroke:h,opacity:c,strokeOpacity:f};let v=-3;if(n){_.lineWidth=n,l.setStrokeStyle(e,_,i,r,o),p&&l.setLineDash(p),l.beginPath();const y=r+g+u+v+d;l.moveTo(i+0,y,s),l.lineTo(i+0+a,y,s),l.stroke()}if(v=-1,t){_.lineWidth=t,l.setStrokeStyle(e,_,i,r,o),l.beginPath();const y=r+g+u/2+v;l.moveTo(i+0,y,s),l.lineTo(i+0+a,y,s),l.stroke()}}};QI=POt([Vt(),YH(0,fe(Rn)),YH(0,Xn(GI)),EOt("design:paramtypes",[Object])],QI);function nQ(n,t,e,i){n.moveTo(t[0].x+e,t[0].y+i);for(let r=1;r<t.length;r++)n.lineTo(t[r].x+e,t[r].y+i)}function OOt(n,t,e,i,r,s=!0){var a;if(t.length<3)return void nQ(n,t,e,i);let o=0,l=t.length-1;s||(o+=1,l-=1,n.moveTo(t[0].x+e,t[0].y+i));for(let u=o;u<=l;u++){const h=t[u===0?l:(u-1)%t.length],c=t[u%t.length],d=t[(u+1)%t.length],p=c.x-h.x,f=c.y-h.y,g=c.x-d.x,_=c.y-d.y,v=(Math.atan2(f,p)-Math.atan2(_,g))/2,y=Math.abs(Math.tan(v));let b=Array.isArray(r)?(a=r[u%t.length])!==null&&a!==void 0?a:0:r,S=b/y;const A=Ex(p,f),w=Ex(g,_),C=Math.min(A,w);S>C&&(S=C,b=C*y);const k=vE(c,S,A,p,f),M=vE(c,S,w,g,_),P=2*c.x-k.x-M.x,E=2*c.y-k.y-M.y,I=Ex(P,E),D=vE(c,Ex(S,b),I,P,E);let N=Math.atan2(k.y-D.y,k.x-D.x);const O=Math.atan2(M.y-D.y,M.x-D.x);let L=O-N;L<0&&(N=O,L=-L),L>Math.PI&&(L-=Math.PI),u===0?n.moveTo(k.x+e,k.y+i):n.lineTo(k.x+e,k.y+i),L&&n.arcTo(c.x+e,c.y+i,M.x+e,M.y+i,b),n.lineTo(M.x+e,M.y+i)}s||n.lineTo(t[l+1].x+e,t[l+1].y+i)}function Ex(n,t){return Math.sqrt(n*n+t*t)}function vE(n,t,e,i,r){const s=t/e;return{x:n.x-i*s,y:n.y-r*s}}const ROt=Dm,IOt=Ap;var LOt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},DOt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},XH=function(n,t){return function(e,i){t(e,i,n)}};let tL=class extends vs{constructor(n){super(),this.polygonRenderContribitions=n,this.numberType=C2,this.builtinContributions=[IOt,ROt],this.init(n)}drawShape(n,t,e,i,r,s,a,o){const l=Pt(n,s==null?void 0:s.theme).polygon,{points:u=l.points,cornerRadius:h=l.cornerRadius,x:c=l.x,y:d=l.y,closePath:p=l.closePath}=n.attribute,f=this.valid(n,l,a,o);if(!f)return;const{fVisible:g,sVisible:_,doFill:v,doStroke:y}=f;t.beginPath(),h<=0||ut(h)&&h.every(b=>b===0)?nQ(t.camera?t:t.nativeContext,u,e,i):OOt(t.camera?t:t.nativeContext,u,e,i,h,p),p&&t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(n,n.attribute,l),this.beforeRenderStep(n,t,e,i,v,y,g,_,l,r,a,o),v&&(a?a(t,n.attribute,l):g&&(t.setCommonStyle(n,n.attribute,c-e,d-i,l),t.fill())),y&&(o?o(t,n.attribute,l):_&&(t.setStrokeStyle(n,n.attribute,c-e,d-i,l),t.stroke())),this.afterRenderStep(n,t,e,i,v,y,g,_,l,r,a,o)}draw(n,t,e,i){const r=Pt(n,i==null?void 0:i.theme).polygon;this._draw(n,r,!1,e,i)}};tL=LOt([Vt(),XH(0,fe(Rn)),XH(0,Xn(WI)),DOt("design:paramtypes",[Object])],tL);var BOt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},FOt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},KH=function(n,t){return function(e,i){t(e,i,n)}};const jOt=["","repeat-x","repeat-y","repeat"];let eL=class extends vs{constructor(n){super(),this.imageRenderContribitions=n,this.numberType=A2,this.builtinContributions=[tOt,eOt],this.init(n)}drawShape(n,t,e,i,r,s,a,o){const l=Pt(n).image,{width:u=l.width,height:h=l.height,repeatX:c=l.repeatX,repeatY:d=l.repeatY,x:p=l.x,y:f=l.y,cornerRadius:g=l.cornerRadius,image:_}=n.attribute,v=this.valid(n,l,a);if(!v)return;const{fVisible:y,sVisible:b,doFill:S,doStroke:A}=v;if(t.setShadowBlendStyle&&t.setShadowBlendStyle(n,l),this.beforeRenderStep(n,t,e,i,S,!1,y,!1,l,r,a),S){if(a)a(t,n.attribute,l);else if(y){if(!_||!n.resources)return;const w=n.resources.get(_);if(w.state!=="success")return;let C=!1;g===0||ut(g)&&g.every(M=>M===0)||(t.beginPath(),mc(t,e,i,u,h,g),t.save(),t.clip(),C=!0),t.setCommonStyle(n,n.attribute,e,i,l);let k=0;if(c==="repeat"&&(k|=1),d==="repeat"&&(k|=2),k){const M=t.createPattern(w.data,jOt[k]);t.fillStyle=M,t.translate(e,i,!0),t.fillRect(0,0,u,h),t.translate(-e,-i,!0)}else t.drawImage(w.data,e,i,u,h);C&&t.restore()}}A&&(o?o(t,n.attribute,l):b&&(t.setStrokeStyle(n,n.attribute,p-e,f-i,l),t.stroke())),this.afterRenderStep(n,t,e,i,S,!1,y,!1,l,r,a)}draw(n,t,e){const{image:i}=n.attribute;if(!i||!n.resources)return;const r=n.resources.get(i);if(r.state==="loading"&&It(i))return void hi.improveImageLoading(i);if(r.state!=="success")return;const{context:s}=t.drawParams;if(!s)return;const a=Pt(n).image;this._draw(n,a,!1,e)}};eL=BOt([Vt(),KH(0,fe(Rn)),KH(0,Xn(HI)),FOt("design:paramtypes",[Object])],eL);const rQ=Symbol.for("IncrementalDrawContribution"),QA=Symbol.for("ArcRender"),iL=Symbol.for("Arc3dRender"),tw=Symbol.for("AreaRender"),ew=Symbol.for("CircleRender"),Kn=Symbol.for("GraphicRender"),qH=Symbol.for("GroupRender"),iw=Symbol.for("LineRender"),nw=Symbol.for("PathRender"),rw=Symbol.for("PolygonRender"),sw=Symbol.for("RectRender"),nL=Symbol.for("Rect3DRender"),aw=Symbol.for("SymbolRender"),rL=Symbol.for("TextRender"),sL=Symbol.for("RichTextRender"),aL=Symbol.for("Pyramid3dRender"),ow=Symbol.for("GlyphRender"),ZH=Symbol.for("ImageRender"),aF=Symbol.for("DrawContribution");var NOt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},zOt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};const lw=Symbol.for("DrawItemInterceptor"),JH=new Ai,QH=new Ai;class HOt{constructor(){this.order=1}afterDrawItem(t,e,i,r,s){return t.attribute.shadowRootIdx==null&&t.shadowRoot&&t.shadowRoot.attribute.shadowRootIdx<0||(t.attribute.shadowRootIdx>0||!t.attribute.shadowRootIdx||t.shadowRoot&&t.shadowRoot.attribute.shadowRootIdx>0)&&this.drawItem(t,e,i,r,s),!1}beforeDrawItem(t,e,i,r,s){return t.attribute.shadowRootIdx==null&&t.shadowRoot&&t.shadowRoot.attribute.shadowRootIdx>0||(t.attribute.shadowRootIdx<0||t.shadowRoot&&t.shadowRoot.attribute.shadowRootIdx<0)&&this.drawItem(t,e,i,r,s),!1}drawItem(t,e,i,r,s){if(!t.shadowRoot)return!1;const{context:a}=i;if(a.highPerformanceSave(),a.transformFromMatrix(t.transMatrix,!0),r.dirtyBounds&&r.backupDirtyBounds){JH.copy(r.dirtyBounds),QH.copy(r.backupDirtyBounds);const o=t.globalTransMatrix.getInverse();r.dirtyBounds.copy(r.backupDirtyBounds).transformWithMatrix(o),r.backupDirtyBounds.copy(r.dirtyBounds)}return r.renderGroup(t.shadowRoot,i,t.parent.globalTransMatrix),a.highPerformanceRestore(),r.dirtyBounds&&r.backupDirtyBounds&&(r.dirtyBounds.copy(JH),r.backupDirtyBounds.copy(QH)),!0}}class VOt{constructor(){this.order=1}afterDrawItem(t,e,i,r,s){return t.attribute._debug_bounds&&this.drawItem(t,e,i,r,s),!1}drawItem(t,e,i,r,s){if(!t.attribute._debug_bounds)return!1;const{context:a}=i;a.highPerformanceSave(),t.parent&&a.setTransformFromMatrix(t.parent.globalTransMatrix,!0),t.glyphHost&&t.glyphHost.parent&&a.setTransformFromMatrix(t.glyphHost.parent.globalTransMatrix,!0);const o=t.AABBBounds;return t.attribute._debug_bounds!==!0&&t.attribute._debug_bounds(a,t),a.strokeRect(o.x1,o.y1,o.width(),o.height()),a.highPerformanceRestore(),!0}}let uw=class{constructor(){this.order=1,this.interceptors=[new HOt,new $Ot,new WOt,new VOt]}afterDrawItem(n,t,e,i,r){for(let s=0;s<this.interceptors.length;s++)if(this.interceptors[s].afterDrawItem&&this.interceptors[s].afterDrawItem(n,t,e,i,r))return!0;return!1}beforeDrawItem(n,t,e,i,r){if((!n.in3dMode||e.in3dInterceptor)&&!n.shadowRoot&&!(n.baseGraphic||n.attribute.globalZIndex||n.interactiveGraphic))return!1;for(let s=0;s<this.interceptors.length;s++)if(this.interceptors[s].beforeDrawItem&&this.interceptors[s].beforeDrawItem(n,t,e,i,r))return!0;return!1}};uw=NOt([Vt(),zOt("design:paramtypes",[])],uw);class WOt{constructor(){this.order=1}beforeDrawItem(t,e,i,r,s){return!this.processing&&(t.baseGraphic?this.beforeDrawInteractive(t,e,i,r,s):this.beforeSetInteractive(t,e,i,r,s))}beforeSetInteractive(t,e,i,r,s){let a=t.interactiveGraphic;if(t.attribute.globalZIndex){a||(a=t.clone(),t.interactiveGraphic=a,a.baseGraphic=t),a.setAttributes({globalZIndex:0,zIndex:t.attribute.globalZIndex},!1,{skipUpdateCallback:!0}),i.stage.tryInitInteractiveLayer();const o=i.stage.getLayer("_builtin_interactive");return o&&this.getShadowRoot(o).add(a),!0}if(a){i.stage.tryInitInteractiveLayer();const o=i.stage.getLayer("_builtin_interactive");o&&this.getShadowRoot(o).removeChild(a),t.interactiveGraphic=null,a.baseGraphic=null}return!1}beforeDrawInteractive(t,e,i,r,s){const a=t.baseGraphic;if(!a.stage){const o=i.stage.getLayer("_builtin_interactive");return o&&this.getShadowRoot(o).removeChild(t),!0}if(a){this.processing=!0;const{context:o}=i;return o.highPerformanceSave(),o.setTransformFromMatrix(a.parent.globalTransMatrix,!0),a.isContainer?r.renderGroup(a,i,a.parent.globalTransMatrix):r.renderItem(a,i),o.highPerformanceRestore(),this.processing=!1,!0}return!1}getShadowRoot(t){var e;let i=t.getElementById("_interactive_group");return i||(i=$t.CreateGraphic("group",{}),i.id="_interactive_group",t.add(i)),(e=i.shadowRoot)!==null&&e!==void 0?e:i.attachShadow()}}class $Ot{constructor(){this.order=1}beforeDrawItem(t,e,i,r,s){if(!t.in3dMode||i.in3dInterceptor)return!1;i.in3dInterceptor=!0;const{context:a,stage:o}=e.drawParams;a.canvas,a.save(),this.initCanvasCtx(a),a.camera=o.camera;const l=a.currentMatrix;l.a/=a.dpr,l.b/=a.dpr,l.c/=a.dpr,l.d/=a.dpr,l.e/=a.dpr,l.f/=a.dpr;const u=gi.allocate();KI(u,l);const h=a.modelMatrix;if(h){if(u){const c=gi.allocate();a.modelMatrix=b1(c,h,u)}}else a.modelMatrix=u;if(a.setTransform(1,0,0,1,0,0,!0),t.isContainer){let c=!1,d=!1;if(t.forEachChildren(p=>(c=p.numberType===v1,!c)),t.forEachChildren(p=>(d=!!p.findFace,!d)),c){const p=t.getChildren(),f=[...p];f.sort((_,v)=>{var y,b,S,A;let w=(((y=_.attribute.startAngle)!==null&&y!==void 0?y:0)+((b=_.attribute.endAngle)!==null&&b!==void 0?b:0))/2,C=(((S=v.attribute.startAngle)!==null&&S!==void 0?S:0)+((A=v.attribute.endAngle)!==null&&A!==void 0?A:0))/2;for(;w<0;)w+=be;for(;C<0;)C+=be;return C-w}),f.forEach(_=>{_._next=null,_._prev=null}),t.removeAllChild(),t.update(),f.forEach(_=>{t.appendChild(_)});const g=t.parent.globalTransMatrix;i.hack_pieFace="outside",r.renderGroup(t,i,g),i.hack_pieFace="inside",r.renderGroup(t,i,g),i.hack_pieFace="top",r.renderGroup(t,i,g),t.removeAllChild(),p.forEach(_=>{_._next=null,_._prev=null}),p.forEach(_=>{t.appendChild(_)})}else if(d){const p=t.getChildren(),f=p.map(g=>({ave_z:g.findFace().vertices.map(_=>{var v;return a.view(_[0],_[1],(v=_[2]+g.attribute.z)!==null&&v!==void 0?v:0)[2]}).reduce((_,v)=>_+v,0),g}));f.sort((g,_)=>_.ave_z-g.ave_z),t.removeAllChild(),f.forEach(g=>{g.g._next=null,g.g._prev=null}),t.update(),f.forEach(g=>{t.add(g.g)}),r.renderGroup(t,i,t.parent.globalTransMatrix,!0),t.removeAllChild(),p.forEach(g=>{g._next=null,g._prev=null}),t.update(),p.forEach(g=>{t.add(g)})}else r.renderGroup(t,i,t.parent.globalTransMatrix)}else r.renderItem(t,i);return a.camera=null,a.restore(),a.modelMatrix!==h&&gi.free(a.modelMatrix),a.modelMatrix=h,i.in3dInterceptor=!1,!0}initCanvasCtx(t){t.setTransformForCurrent()}}var GOt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},UOt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},YOt=function(n,t){return function(e,i){t(e,i,n)}};const sQ=Symbol.for("RenderService");let oL=class{constructor(n){this.drawContribution=n}prepare(n){n&&this.renderTreeRoots.forEach(t=>{this._prepare(t,n)})}_prepare(n,t){n.forEachChildren(e=>{this._prepare(e,t)}),n.update({bounds:t,trans:!0})}prepareRenderList(){}beforeDraw(n){}draw(n){this.drawContribution.draw(this,Object.assign({},this.drawParams))}afterDraw(n){this.drawContribution.afterDraw&&this.drawContribution.afterDraw(this,Object.assign({},this.drawParams))}render(n,t){this.renderTreeRoots=n,this.drawParams=t;const e=t.updateBounds;this.prepare(e),this.prepareRenderList(),this.beforeDraw(t),this.draw(t),this.afterDraw(t),this.drawParams=null}};oL=GOt([Vt(),YOt(0,fe(aF)),UOt("design:paramtypes",[Object])],oL);const XOt=new se(n=>{n(sQ).to(oL)}),dg=Symbol.for("PickerService"),t9=Symbol.for("GlobalPickerService");var oF=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};const Wf=Symbol.for("PickItemInterceptor");let hw=class{constructor(){this.order=1}afterPickItem(n,t,e,i,r){return n.attribute.shadowRootIdx>0||!n.attribute.shadowRootIdx?this._pickItem(n,t,e,i,r):null}beforePickItem(n,t,e,i,r){return n.attribute.shadowRootIdx<0?this._pickItem(n,t,e,i,r):null}_pickItem(n,t,e,i,r){if(!n.shadowRoot)return null;const{parentMatrix:s}=r||{};if(!s)return null;const a=t.pickContext;a.highPerformanceSave();const o=n.shadowRoot,l=Ua.allocateByObj(s),u=new Qi(l.a*e.x+l.c*e.y+l.e,l.b*e.x+l.d*e.y+l.f),h=t.pickGroup(o,u,l,i);return a.highPerformanceRestore(),h}};hw=oF([Vt()],hw);let cw=class{constructor(){this.order=1}beforePickItem(n,t,e,i,r){const s=n.baseGraphic;if(s&&s.parent){const a=new Qi(e.x,e.y),o=t.pickContext;o.highPerformanceSave();const l=s.parent.globalTransMatrix;l.transformPoint(a,a);const u=s.isContainer?t.pickGroup(s,a.clone(),l,i):t.pickItem(s,a.clone(),l,i);return o.highPerformanceRestore(),u}return null}};cw=oF([Vt()],cw);let dw=class{constructor(){this.order=1}beforePickItem(n,t,e,i,r){if(!n.in3dMode||i.in3dInterceptor)return null;const s=t.pickContext,a=n.stage;if(!s||!a)return null;if(i.in3dInterceptor=!0,s.save(),this.initCanvasCtx(s),s.camera=a.camera,n.isContainer){let o,l=!1,u=!1;if(n.forEachChildren(h=>(l=h.numberType===v1,!l)),n.forEachChildren(h=>(u=!!h.findFace,!u)),l){const h=n.getChildren(),c=[...h];c.sort((d,p)=>{var f,g,_,v;let y=((g=(f=d.attribute.startAngle)!==null&&f!==void 0?f:0+d.attribute.endAngle)!==null&&g!==void 0?g:0)/2,b=((v=(_=p.attribute.startAngle)!==null&&_!==void 0?_:0+p.attribute.endAngle)!==null&&v!==void 0?v:0)/2;for(;y<0;)y+=be;for(;b<0;)b+=be;return b-y}),c.forEach(d=>{d._next=null,d._prev=null}),n.removeAllChild(),n.update(),c.forEach(d=>{n.appendChild(d)}),i.hack_pieFace="outside",o=t.pickGroup(n,e,r.parentMatrix,i),o.graphic||(i.hack_pieFace="inside",o=t.pickGroup(n,e,r.parentMatrix,i)),o.graphic||(i.hack_pieFace="top",o=t.pickGroup(n,e,r.parentMatrix,i)),n.removeAllChild(),h.forEach(d=>{d._next=null,d._prev=null}),h.forEach(d=>{n.appendChild(d)})}else if(u){const h=n.getChildren(),c=h.map(d=>({ave_z:d.findFace().vertices.map(p=>{var f;return s.view(p[0],p[1],(f=p[2]+d.attribute.z)!==null&&f!==void 0?f:0)[2]}).reduce((p,f)=>p+f,0),g:d}));c.sort((d,p)=>p.ave_z-d.ave_z),n.removeAllChild(),c.forEach(d=>{d.g._next=null,d.g._prev=null}),n.update(),c.forEach(d=>{n.add(d.g)}),o=t.pickGroup(n,e,r.parentMatrix,i),n.removeAllChild(),h.forEach(d=>{d._next=null,d._prev=null}),n.update(),h.forEach(d=>{n.add(d)})}else o=t.pickGroup(n,e,r.parentMatrix,i);return s.camera=null,i.in3dInterceptor=!1,s.restore(),o}return s.restore(),null}initCanvasCtx(n){n.setTransformForCurrent()}};dw=oF([Vt()],dw);const KOt=new se((n,t,e)=>{e(dg)||(n(t9).toSelf(),n(dg).toService(t9)),n(dw).toSelf().inSingletonScope(),n(Wf).toService(dw),n(hw).toSelf().inSingletonScope(),n(Wf).toService(hw),n(cw).toSelf().inSingletonScope(),n(Wf).toService(cw),vr(n,Wf)}),qOt=new se(n=>{n(IJ).to(qI).inSingletonScope(),n(LJ).toConstantValue($t)}),vy=Symbol.for("AutoEnablePlugins"),aQ=Symbol.for("PluginService");var ZOt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},JOt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},e9=function(n,t){return function(e,i){t(e,i,n)}};let lL=class{constructor(n){this.autoEnablePlugins=n,this.onStartupFinishedPlugin=[],this.onRegisterPlugin=[],this.actived=!1}active(n,t){this.stage=n,this.actived=!0;const{pluginList:e}=t;e&&re.isBound(vy)&&this.autoEnablePlugins.getContributions().forEach(i=>{e.includes(i.name)&&this.register(i)})}findPluginsByName(n){const t=[];return this.onStartupFinishedPlugin.forEach(e=>{e.name===n&&t.push(e)}),this.onRegisterPlugin.forEach(e=>{e.name===n&&t.push(e)}),t}register(n){n.activeEvent==="onStartupFinished"?this.onStartupFinishedPlugin.push(n):n.activeEvent==="onRegister"&&(this.onRegisterPlugin.push(n),n.activate(this))}unRegister(n){n.activeEvent==="onStartupFinished"?this.onStartupFinishedPlugin.splice(this.onStartupFinishedPlugin.indexOf(n),1):n.activeEvent==="onRegister"&&this.onRegisterPlugin.splice(this.onStartupFinishedPlugin.indexOf(n),1),n.deactivate(this)}release(...n){this.onStartupFinishedPlugin.forEach(t=>{t.deactivate(this)}),this.onStartupFinishedPlugin=[],this.onRegisterPlugin.forEach(t=>{t.deactivate(this)}),this.onRegisterPlugin=[]}};lL=ZOt([Vt(),e9(0,fe(Rn)),e9(0,Xn(vy)),JOt("design:paramtypes",[Object])],lL);const QOt=new se(n=>{n(aQ).to(lL),Y2t(n,vy)}),tRt=new se(n=>{vr(n,m2)}),eRt=new se(n=>{n(PI).to(EI).inSingletonScope(),vr(n,PI)});var iRt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},nRt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};let pw=class{constructor(){this.type="static",this.offscreen=!1,this.global=wt.global}setDpr(n){this.canvas.dpr=n}init(n,t,e){if(this.layer=n,this.window=t,e.main)this.main=!0,this.context=t.getContext(),this.canvas=this.context.getCanvas();else{let i;this.main=!1,e.canvasId&&(i=this.global.getElementById(e.canvasId)),i||(i=this.global.createCanvas({width:t.width,height:t.height})),i.style&&(i.style["pointer-events"]="none");const r=t.getContext().getCanvas().nativeCanvas,s=BA({nativeCanvas:i,width:t.width,height:t.height,dpr:t.dpr,id:e.canvasId,canvasControled:!0,container:t.getContainer(),x:r.offsetLeft,y:r.offsetTop});s.applyPosition(),this.canvas=s,this.context=s.getContext()}}resize(n,t){this.canvas.resize(n,t)}resizeView(n,t){}render(n,t,e){var i;if(!this.main){const r=this.window.getContext().getCanvas().nativeCanvas;!r||this.canvas.x===r.offsetLeft&&this.canvas.y===r.offsetTop||(this.canvas.x=r.offsetLeft,this.canvas.y=r.offsetTop,this.canvas.applyPosition())}t.renderService.render(n,Object.assign(Object.assign({context:this.context,clear:(i=t.background)!==null&&i!==void 0?i:"#ffffff"},t),e))}merge(n){n.forEach(t=>{const e=t.getContext().canvas.nativeCanvas;this.context.drawImage(e,0,0)})}prepare(n,t){}drawTo(n,t,e){var i;const r=n.getContext();e.renderService.render(t,Object.assign(Object.assign({context:r},e),{clear:e.clear?(i=e.background)!==null&&i!==void 0?i:"#fff":void 0}))}getContext(){return this.context}release(){this.canvas.release()}};pw=iRt([Vt(),nRt("design:paramtypes",[])],pw);var rRt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},sRt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};let fw=class{constructor(){this.offscreen=!1,this.type="virtual",this.global=wt.global}setDpr(n){}init(n,t,e){if(this.layer=n,this.window=t,e.main)throw new Error("virtual layer不能作为main layer");this.main=!1,this.canvas=null,this.context=null}resize(n,t){}resizeView(n,t){}render(n,t,e){this.mainHandler.render(n,t,Object.assign(Object.assign({},e),{clear:!1}))}merge(n){}prepare(n,t){}drawTo(n,t,e){var i;const r=n.getContext();e.renderService.render(t,Object.assign(Object.assign({context:r},e),{clear:e.clear?(i=e.background)!==null&&i!==void 0?i:"#fff":void 0}))}getContext(){return null}release(){}};fw=rRt([Vt(),sRt("design:paramtypes",[])],fw);var aRt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},oRt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};let gw=class{constructor(){this.offscreen=!0,this.type="dynamic",this.global=wt.global}setDpr(n){this.canvas.dpr=n}init(n,t,e){this.layer=n;const i=this.global.createOffscreenCanvas({width:e.width,height:e.height,dpr:t.dpr}),r=BA({nativeCanvas:i,width:e.width,height:e.height,dpr:t.dpr,canvasControled:!0});this.canvas=r,this.context=r.getContext()}resize(n,t){this.canvas.resize(n,t)}resizeView(n,t){this.canvas.resize(n,t)}render(n,t){var e;t.renderService.render(n,Object.assign(Object.assign({context:this.context,viewBox:t.stage.window.getViewBox(),transMatrix:t.stage.window.getViewBoxTransform()},t),{clear:(e=t.background)!==null&&e!==void 0?e:"#ffffff"}))}prepare(n,t){}release(){this.canvas.release()}getContext(){return this.context}drawTo(n,t,e){const i=n.getContext(),r=n.dpr,{viewBox:s}=e,a=s.x1,o=s.y1,l=s.width(),u=s.height();i.nativeContext.save(),i.nativeContext.setTransform(r,0,0,r,0,0),e.clear&&i.clearRect(a,o,l,u),i.drawImage(this.canvas.nativeCanvas,0,0,this.canvas.width,this.canvas.height,a,o,l,u),i.nativeContext.restore()}merge(n){}};gw=aRt([Vt(),oRt("design:paramtypes",[])],gw);const lRt=new se(n=>{n(pw).toSelf(),n(gw).toSelf(),n(fw).toSelf(),n(jJ).toService(pw),n(NJ).toService(gw),n(zJ).toService(fw)});function uRt(n){n.load(tRt),n.load(eRt),n.load(lRt)}var hRt=function(n,t,e,i){return new(e||(e=Promise))(function(r,s){function a(u){try{l(i.next(u))}catch(h){s(h)}}function o(u){try{l(i.throw(u))}catch(h){s(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof e?h:new e(function(c){c(h)})).then(a,o)}l((i=i.apply(n,t||[])).next())})};function oQ(n,t,e,i=!1,r=!1){const s={},a=[];let o=!1;if(r)o=!0;else{let l;n.forEachChildren((u,h)=>{const{zIndex:c=t}=u.attribute;if(h===0)l=c;else if(l!==c)return o=!0,!0;return!1},i)}if(o){n.forEachChildren(u=>{const{zIndex:h=t}=u.attribute;s[h]?s[h].push(u):(s[h]=[u],a.push(h))},i),a.sort((u,h)=>i?h-u:u-h);let l=!1;for(let u=0;u<a.length&&!l;u++){const h=a[u],c=s[h];r&&c.sort((d,p)=>{var f,g;return(i?-1:1)*(((f=p.attribute.z)!==null&&f!==void 0?f:0)-((g=d.attribute.z)!==null&&g!==void 0?g:0))});for(let d=0;d<c.length;d++)if(e(c[d],d)){l=!0;break}}}else n.forEachChildren(e,i)}function i9(n,t,e,i=!1){return hRt(this,void 0,void 0,function*(){yield n.forEachChildrenAsync(e,i)})}function cRt(n,t,e,i=!1){const r={},s=[];let a=!1;n.forEachChildren((u,h)=>{const{zIndex:c=e}=u.attribute;if(h!==0){if(c!==void 0)return a=!0,!0}return!1},i);let o=null,l=!1;if(a){n.forEachChildren(h=>{const{zIndex:c=e}=h.attribute;r[c]?r[c].push(h):(r[c]=[h],s.push(c))},i),s.sort((h,c)=>i?c-h:h-c);let u=!1;for(let h=0;h<s.length&&!u;h++){const c=s[h],d=r[c];for(let p=0;p<d.length;p++){if(l){u=!0,o=d[p];break}d[p]._uid!==t||(l=!0)}}}else n.forEachChildren(u=>l?(o=u,!0):(u._uid===t&&(l=!0),!1),i);return o}var dRt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},pRt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},_E=function(n,t){return function(e,i){t(e,i,n)}};let mw=class{constructor(n,t){this.contributions=n,this.drawItemInterceptorContributions=t,this.currentRenderMap=new Map,this.defaultRenderMap=new Map,this.styleRenderMap=new Map,this.dirtyBounds=new Fn,this.backupDirtyBounds=new Fn,this.global=wt.global,this.layerService=wt.layerService,this.init()}init(){this.contributions.forEach(n=>{if(n.style){const t=this.styleRenderMap.get(n.style)||new Map;t.set(n.numberType,n),this.styleRenderMap.set(n.style,t)}else this.defaultRenderMap.set(n.numberType,n)}),this.InterceptorContributions=this.drawItemInterceptorContributions.getContributions().sort((n,t)=>n.order-t.order)}prepareForDraw(n,t){t.updateBounds?this.useDirtyBounds=!0:this.useDirtyBounds=!t.stage.params.optimize.disableCheckGraphicWidthOutRange}draw(n,t){this.prepareForDraw(n,t),t.drawContribution=this,this.currentRenderMap=this.styleRenderMap.get(t.renderStyle)||this.defaultRenderMap,this.currentRenderService=n;const{context:e,stage:i,viewBox:r,transMatrix:s}=t;if(!e)return;const a=this.dirtyBounds.setValue(0,0,r.width(),r.height());if(i.dirtyBounds&&!i.dirtyBounds.empty()){const l=Uq(a,i.dirtyBounds);a.x1=Math.floor(l.x1),a.y1=Math.floor(l.y1),a.x2=Math.ceil(l.x2),a.y2=Math.ceil(l.y2)}const o=e.dpr%1;(o||o!==.5)&&(a.x1=Math.floor(a.x1*e.dpr)/e.dpr,a.y1=Math.floor(a.y1*e.dpr)/e.dpr,a.x2=Math.ceil(a.x2*e.dpr)/e.dpr,a.y2=Math.ceil(a.y2*e.dpr)/e.dpr),this.backupDirtyBounds.copy(a),e.inuse=!0,e.setClearMatrix(s.a,s.b,s.c,s.d,s.e,s.f),e.clearMatrix(),e.setTransformForCurrent(!0),e.translate(r.x1,r.y1,!0),e.beginPath(),e.rect(a.x1,a.y1,a.width(),a.height()),e.clip(),i.camera&&(this.dirtyBounds.setValue(-1/0,-1/0,1/0,1/0),this.backupDirtyBounds.setValue(-1/0,-1/0,1/0,1/0)),this.clearScreen(n,e,t),e.save(),n.renderTreeRoots.sort((l,u)=>{var h,c;return((h=l.attribute.zIndex)!==null&&h!==void 0?h:$i.zIndex)-((c=u.attribute.zIndex)!==null&&c!==void 0?c:$i.zIndex)}).forEach(l=>{l.isContainer?this.renderGroup(l,t,Ua.allocate(1,0,0,1,0,0)):this.renderItem(l,t)}),e.restore(),e.setClearMatrix(1,0,0,1,0,0),e.inuse=!1,e.draw()}doRegister(){throw new Error("暂不支持")}_findNextGraphic(n){let t=n.parent,e=n._uid;for(;t;){const i=cRt(t,e,$i.zIndex);if(i)return i;e=t._uid,t=t.parent}return null}renderGroup(n,t,e,i){if(t.break||n.attribute.visibleAll===!1)return;if(n.incremental&&(t.startAtId==null||t.startAtId===n._uid))return t.break=!0,void this._increaseRender(n,t);if(this.useDirtyBounds&&!ty(n.AABBBounds,this.dirtyBounds,!1))return;let r,s=e;if(this.useDirtyBounds){r=JA.allocateByObj(this.dirtyBounds);const a=n.transMatrix;s=Ua.allocateByObj(e).multiply(a.a,a.b,a.c,a.d,a.e,a.f),this.dirtyBounds.copy(this.backupDirtyBounds).transformWithMatrix(s.getInverse())}this.renderItem(n,t,{drawingCb:()=>{var a;i?n.forEachChildren(o=>{t.break||(o.isContainer?this.renderGroup(o,t,s):this.renderItem(o,t))}):oQ(n,$i.zIndex,o=>{t.break||(o.isContainer?this.renderGroup(o,t,s):this.renderItem(o,t))},!1,!!(!((a=t.context)===null||a===void 0)&&a.camera))}}),this.useDirtyBounds&&(this.dirtyBounds.copy(r),JA.free(r),Ua.free(s))}_increaseRender(n,t){const{layer:e,stage:i}=t,{subLayers:r}=e;let s=r.get(n._uid);s||(s={layer:this.layerService.createLayer(i),zIndex:r.size,group:n},r.set(n._uid,s));const a=s.layer.getNativeHandler().getContext(),o=s.drawContribution||re.get(rQ);o.dirtyBounds.setValue(-1/0,-1/0,1/0,1/0),o.backupDirtyBounds.setValue(-1/0,-1/0,1/0,1/0),o.draw(this.currentRenderService,Object.assign(Object.assign({},t),{drawContribution:o,clear:"transparent",layer:s.layer,context:a,startAtId:n._uid,break:!1})),s.drawContribution=o;const l=this._findNextGraphic(n);if(l)if(l.isContainer&&l.incremental)this._increaseRender(l,t);else{let u=r.get(l._uid);u||(u={layer:this.layerService.createLayer(i),zIndex:r.size},r.set(l._uid,u));const h=u.layer.getNativeHandler().getContext();this.draw(this.currentRenderService,Object.assign(Object.assign({},t),{drawContribution:o,clear:"transparent",layer:u.layer,context:h,startAtId:l._uid,break:!1}))}}getRenderContribution(n){let t;return t||(t=this.selectRenderByNumberType(n.numberType,n)),t||(t=this.selectRenderByType(n.type)),t}renderItem(n,t,e){if(this.InterceptorContributions.length)for(let o=0;o<this.InterceptorContributions.length;o++){const l=this.InterceptorContributions[o];if(l.beforeDrawItem&&l.beforeDrawItem(n,this.currentRenderService,t,this,e))return}const i=this.getRenderContribution(n);if(!i)return;let r,s=!1;if(n.parent){const{scrollX:o=0,scrollY:l=0}=n.parent.attribute;if(s=!(!o&&!l),s){r=this.dirtyBounds.clone();const u=n.globalTransMatrix.getInverse();this.dirtyBounds.copy(this.backupDirtyBounds).transformWithMatrix(u),this.dirtyBounds.translate(-o,-l)}}if(this.useDirtyBounds&&!n.isContainer&&!ty(n.AABBBounds,this.dirtyBounds,!1))return void(s&&this.dirtyBounds.copy(r));const a=t.startAtId!=null&&n._uid!==t.startAtId;if(n._uid===t.startAtId&&(t.startAtId=null),e&&(e.skipDraw=a),a?n.isContainer&&i.draw(n,this.currentRenderService,t,e):i.draw(n,this.currentRenderService,t,e),s&&this.dirtyBounds.copy(r),this.InterceptorContributions.length)for(let o=0;o<this.InterceptorContributions.length;o++){const l=this.InterceptorContributions[o];if(l.afterDrawItem&&l.afterDrawItem(n,this.currentRenderService,t,this))return}}selectRenderByType(n){return ri.getInstance().warn("未知错误，不应该走到这里"),null}selectRenderByNumberType(n,t){let e;if(t.attribute.renderStyle){const i=this.styleRenderMap.get(t.attribute.renderStyle);e=i&&i.get(n)}return e||this.currentRenderMap.get(n)||this.defaultRenderMap.get(n)}clearScreen(n,t,e){var i,r;const{clear:s,viewBox:a}=e,o=a.width(),l=a.height();if(s){t.clearRect(0,0,o,l);const u=(i=n.drawParams)===null||i===void 0?void 0:i.stage;if(u&&(t.globalAlpha=(r=u.attribute.opacity)!==null&&r!==void 0?r:1),u&&u.backgroundImg&&u.resources){const h=u.resources.get(s);h&&h.state==="success"&&h.data&&t.drawImage(h.data,0,0,o,l)}else t.fillStyle=ZI(t,s,{AABBBounds:{x1:0,y1:0,x2:0+o,y2:0+l}},0,0),t.fillRect(0,0,o,l)}}afterDraw(n,t){}};mw=dRt([Vt(),_E(0,KZ(Kn)),_E(1,fe(Rn)),_E(1,Xn(lw)),pRt("design:paramtypes",[Array,Object])],mw);var fRt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},gRt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},n9=function(n,t){return function(e,i){t(e,i,n)}};let uL=class{constructor(n){this.groupRenderContribitions=n,this.numberType=G3}drawShape(n,t,e,i,r,s,a,o){const l=Pt(n,s==null?void 0:s.theme).group,{fill:u=l.fill,background:h,stroke:c=l.stroke,opacity:d=l.opacity,width:p=l.width,height:f=l.height,clip:g=l.clip,fillOpacity:_=l.fillOpacity,strokeOpacity:v=l.strokeOpacity,cornerRadius:y=l.cornerRadius,path:b=l.path,lineWidth:S=l.lineWidth,visible:A=l.visible}=n.attribute,w=Z3(d,_,p,f,u),C=Q3(d,v,p,f),k=Sp(u,h),M=Lm(c,S);if(!n.valid||!A||!g&&(!k&&!M||!(w||C||a||o||h)))return;if(b&&b.length&&r.drawContribution){const E=t.disableFill,I=t.disableStroke,D=t.disableBeginPath;t.disableFill=!0,t.disableStroke=!0,t.disableBeginPath=!0,b.forEach(N=>{r.drawContribution.getRenderContribution(N).draw(N,r.renderService,r,s)}),t.disableFill=E,t.disableStroke=I,t.disableBeginPath=D}else y===0||ut(y)&&y.every(E=>E===0)?(t.beginPath(),t.rect(e,i,p,f)):(t.beginPath(),mc(t,e,i,p,f,y));this._groupRenderContribitions||(this._groupRenderContribitions=this.groupRenderContribitions.getContributions()||[],this._groupRenderContribitions.push(YEt));const P={doFill:k,doStroke:M};this._groupRenderContribitions.forEach(E=>{E.time===jn.beforeFillStroke&&E.drawShape(n,t,e,i,k,M,w,C,l,r,a,o,P)}),g&&t.clip(),t.setShadowBlendStyle&&t.setShadowBlendStyle(n,n.attribute,l),P.doFill&&(a?a(t,n.attribute,l):w&&(t.setCommonStyle(n,n.attribute,e,i,l),t.fill())),P.doStroke&&(o?o(t,n.attribute,l):C&&(t.setStrokeStyle(n,n.attribute,e,i,l),t.stroke())),this._groupRenderContribitions.forEach(E=>{E.time===jn.afterFillStroke&&E.drawShape(n,t,e,i,k,M,w,C,l,r,a,o)})}draw(n,t,e,i){const{context:r}=e;if(!r)return;const{clip:s,baseOpacity:a=1}=n.attribute;s?r.save():r.highPerformanceSave(),r.baseGlobalAlpha*=a;const o=Pt(n,i==null?void 0:i.theme).group,l=r.modelMatrix;if(r.camera){const d=gi.allocate(),p=gi.allocate();QJ(p,n,o),b1(d,l||d,p),r.modelMatrix=d,gi.free(p),r.setTransform(1,0,0,1,0,0,!0)}else r.transformFromMatrix(n.transMatrix,!0);r.beginPath(),i.skipDraw?this.drawShape(n,r,0,0,e,i,()=>!1,()=>!1):this.drawShape(n,r,0,0,e);const{scrollX:u=o.scrollX,scrollY:h=o.scrollY}=n.attribute;let c;(u||h)&&r.translate(u,h),i&&i.drawingCb&&(c=i.drawingCb()),r.modelMatrix!==l&&gi.free(r.modelMatrix),r.modelMatrix=l,r.baseGlobalAlpha/=a,c&&c.then?c.then(()=>{s?r.restore():r.highPerformanceRestore()}):s?r.restore():r.highPerformanceRestore()}};uL=fRt([Vt(),n9(0,fe(Rn)),n9(0,Xn(VJ)),gRt("design:paramtypes",[Object])],uL);var mRt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let vw=class extends gy{constructor(){super(...arguments),this.numberType=y1}drawShape(n,t,e,i,r,s,a,o){if(n.incremental&&r.multiGraphicOptions){const{startAtIdx:l,length:u}=r.multiGraphicOptions,{segments:h=[]}=n.attribute;if(l>h.length)return;const c=Pt(n).line,{fill:d=c.fill,stroke:p=c.stroke,opacity:f=c.opacity,fillOpacity:g=c.fillOpacity,strokeOpacity:_=c.strokeOpacity,lineWidth:v=c.lineWidth,visible:y=c.visible}=n.attribute,b=tp(f,g,d),S=J3(f,_),A=Sp(d),w=Lm(p,v);if(!n.valid||!y||!A&&!w||!(b||S||a||o))return;const{context:C}=r;for(let k=l;k<l+u;k++)this.drawIncreaseSegment(n,C,h[k-1],h[k],n.attribute.segments[k],[c,n.attribute],e,i)}else super.drawShape(n,t,e,i,r,s,a,o)}drawIncreaseSegment(n,t,e,i,r,s,a,o){i&&(t.beginPath(),cOt(t.nativeContext,e,i,{offsetX:a,offsetY:o}),t.setShadowBlendStyle&&t.setShadowBlendStyle(n,r,s),t.setStrokeStyle(n,r,a,o,s),t.stroke())}};vw=mRt([Vt()],vw);var vRt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let _w=class extends my{constructor(){super(...arguments),this.numberType=_1}drawShape(n,t,e,i,r,s,a){if(n.incremental&&r.multiGraphicOptions){const{startAtIdx:o,length:l}=r.multiGraphicOptions,{segments:u=[]}=n.attribute;if(o>u.length)return;const h=Pt(n).area,{fill:c=h.fill,fillOpacity:d=h.fillOpacity,opacity:p=h.opacity,visible:f=h.visible}=n.attribute,g=tp(p,d,c),_=Sp(c);if(!n.valid||!f||!_||!g&&!a)return;for(let v=o;v<o+l;v++)this.drawIncreaseSegment(n,t,u[v-1],u[v],n.attribute.segments[v],[h,n.attribute],e,i)}else super.drawShape(n,t,e,i,r,s,a)}drawIncreaseSegment(n,t,e,i,r,s,a,o){i&&(t.beginPath(),dOt(t.camera?t:t.nativeContext,e,i,{offsetX:a,offsetY:o}),t.setShadowBlendStyle&&t.setShadowBlendStyle(n,r,s),t.setCommonStyle(n,r,a,o,s),t.fill())}};_w=vRt([Vt()],_w);var $f,_Rt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},yRt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},Cv=function(n,t){return function(e,i){t(e,i,n)}},Zo=function(n,t,e,i){return new(e||(e=Promise))(function(r,s){function a(u){try{l(i.next(u))}catch(h){s(h)}}function o(u){try{l(i.throw(u))}catch(h){s(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof e?h:new e(function(c){c(h)})).then(a,o)}l((i=i.apply(n,t||[])).next())})};(function(n){n[n.NORMAL=0]="NORMAL",n[n.STOP=1]="STOP"})($f||($f={}));let hL=class extends mw{constructor(n,t,e,i){super(n,i),this.contributions=n,this.lineRender=t,this.areaRender=e,this.drawItemInterceptorContributions=i,this.rendering=!1,this.currFrameStartAt=0,this.currentIdx=0,this.status=$f.NORMAL,this.checkingForDrawPromise=null,this.hooks={completeDraw:new la([])},this.defaultRenderMap.set(this.lineRender.numberType,this.lineRender),this.defaultRenderMap.set(this.areaRender.numberType,this.areaRender)}draw(n,t){return Zo(this,void 0,void 0,function*(){if(this.checkingForDrawPromise)return;this.lastRenderService=n,this.lastDrawContext=t,this.checkingForDrawPromise=this.checkForDraw(t);const e=yield this.checkingForDrawPromise;if(this.checkingForDrawPromise=null,e)return;this.currentRenderService=n;const{context:i,viewBox:r}=t;i&&(i.inuse=!0,i.clearMatrix(),i.setTransformForCurrent(!0),i.save(),t.restartIncremental&&this.clearScreen(this.currentRenderService,i,t),i.translate(r.x1,r.y1,!0),i.save(),n.renderTreeRoots.sort((s,a)=>{var o,l;return((o=s.attribute.zIndex)!==null&&o!==void 0?o:$i.zIndex)-((l=a.attribute.zIndex)!==null&&l!==void 0?l:$i.zIndex)}).forEach(s=>{this.renderGroup(s,t)}),this.hooks.completeDraw.tap("top-draw",()=>{i.restore(),i.restore(),i.draw(),i.inuse=!1,this.rendering=!1}))})}_increaseRender(n,t){return Zo(this,void 0,void 0,function*(){this.rendering=!0,yield this._renderIncrementalGroup(n,t)})}_renderIncrementalGroup(n,t){return Zo(this,void 0,void 0,function*(){this.count=n.count,yield new Promise(e=>{this.renderItem(n,t,{drawingCb:()=>Zo(this,void 0,void 0,function*(){if(n.count!==2)yield i9(n,$i.zIndex,(i,r)=>{if(this.status===$f.STOP)return!0;if(i.isContainer||r<this.currentIdx)return!1;const s=this.currFrameStartAt+n.incremental;return r<s&&(this.currentIdx=r+1,this.renderItem(i,t)),r===s-1&&(this.currFrameStartAt=this.currentIdx,this.waitToNextFrame())}),e(!1);else{const i=n.getChildAt(0);if(i.incremental&&i.attribute.segments)for(i.incrementalAt||(i.incrementalAt=0);i.incrementalAt<i.attribute.segments.length;)t.multiGraphicOptions={startAtIdx:i.incrementalAt,length:i.incremental},this.renderItem(i,t),i.incrementalAt+=i.incremental,yield this.waitToNextFrame();else this.renderItem(i,t);e(!1)}})})}),this.hooks.completeDraw.call()})}waitToNextFrame(){return Zo(this,void 0,void 0,function*(){return new Promise(n=>{this.global.getRequestAnimationFrame()(()=>{n(!1)})})})}checkForDraw(n){return Zo(this,void 0,void 0,function*(){let t=this.rendering;return n.restartIncremental&&(t=!1,yield this.forceStop(),this.resetToInit()),t})}forceStop(){return Zo(this,void 0,void 0,function*(){this.rendering&&(this.status=$f.STOP,yield new Promise(n=>{this.hooks.completeDraw.tap("stopCb",()=>{this.status=$f.NORMAL,this.hooks.completeDraw.taps=this.hooks.completeDraw.taps.filter(t=>t.name!=="stopCb"),n(!1)})}))})}resetToInit(){this.currFrameStartAt=0,this.currentIdx=0}renderGroup(n,t){return Zo(this,void 0,void 0,function*(){if(!t.break&&n.attribute.visibleAll!==!1)return n.incremental&&t.startAtId===n._uid?(yield this._increaseRender(n,t),void(t.break=!0)):void(yield new Promise(e=>{this.renderItem(n,t,{drawingCb:()=>Zo(this,void 0,void 0,function*(){yield i9(n,$i.zIndex,i=>Zo(this,void 0,void 0,function*(){t.break||i.isContainer&&(yield this.renderGroup(i,t))})),e(!1)})})}))})}};hL=_Rt([Vt(),Cv(0,KZ(Kn)),Cv(1,fe(vw)),Cv(2,fe(_w)),Cv(3,fe(Rn)),Cv(3,Xn(lw)),yRt("design:paramtypes",[Array,Object,Object,Object])],hL);const bRt=new se(n=>{n(S1).toSelf().inSingletonScope(),n(sF).toSelf().inSingletonScope(),n(aF).to(mw),n(rQ).to(hL),n(qH).to(uL).inSingletonScope(),n(Kn).toService(qH),vr(n,VJ),n(Qa).toSelf().inSingletonScope(),vr(n,tF),vr(n,Kn),n(uw).toSelf().inSingletonScope(),n(lw).toService(uw),vr(n,lw)});function xRt(n){n.load(bRt)}function yw(){yw.__loaded||(yw.__loaded=!0,re.load(tPt),re.load(qOt),re.load(XOt),re.load(KOt),re.load(QOt),uRt(re),xRt(re))}yw.__loaded=!1,yw();const _e=re.get(F3);wt.global=_e;const SRt=re.get(FJ);wt.graphicUtil=SRt;const ARt=re.get(BJ);wt.transformUtil=ARt;const wRt=re.get(IJ);wt.graphicService=wRt;const CRt=re.get(q3);wt.layerService=CRt;class kRt{constructor(){this.name="AutoRenderPlugin",this.activeEvent="onRegister",this._uid=pn.GenAutoIncrementId(),this.key=this.name+this._uid}activate(t){this.pluginService=t,wt.graphicService.hooks.onAttributeUpdate.tap(this.key,e=>{e.glyphHost&&(e=e.glyphHost),e.stage===t.stage&&e.stage!=null&&e.stage.renderNextFrame()}),wt.graphicService.hooks.onSetStage.tap(this.key,e=>{e.glyphHost&&(e=e.glyphHost),e.stage===t.stage&&e.stage!=null&&e.stage.renderNextFrame()})}deactivate(t){wt.graphicService.hooks.onAttributeUpdate.taps=wt.graphicService.hooks.onAttributeUpdate.taps.filter(e=>e.name!==this.key),wt.graphicService.hooks.onSetStage.taps=wt.graphicService.hooks.onSetStage.taps.filter(e=>e.name!==this.key)}}class TRt{constructor(){this.name="ViewTransform3dPlugin",this.activeEvent="onRegister",this._uid=pn.GenAutoIncrementId(),this.key=this.name+this._uid,this.onMouseDown=t=>{this.option3d||(this.option3d=this.pluginService.stage.option3d),this.option3d&&(this.mousedown=!0,this.pageX=t.page.x,this.pageY=t.page.y)},this.onMouseUp=t=>{this.option3d||(this.option3d=this.pluginService.stage.option3d),this.option3d&&(this.mousedown=!1)},this.onMouseMove=t=>{var e,i;const r=this.pluginService.stage;if(this.option3d||(this.option3d=r.option3d),this.option3d&&this.mousedown)if(this.pageX&&this.pageY){const s=t.page.x-this.pageX,a=t.page.y-this.pageY;this.pageX=t.page.x,this.pageY=t.page.y;const o=s/100,l=a/100;this.option3d.alpha=((e=this.option3d.alpha)!==null&&e!==void 0?e:0)+o,this.option3d.beta=((i=this.option3d.beta)!==null&&i!==void 0?i:0)+l,r.set3dOptions(this.option3d),r.renderNextFrame()}else this.pageX=t.page.x,this.pageY=t.page.y}}activate(t){this.pluginService=t;const e=t.stage;this.option3d=e.option3d,e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("mouseup",this.onMouseUp),e.addEventListener("mousemove",this.onMouseMove)}deactivate(t){const e=t.stage;e.removeEventListener("mousedown",this.onMouseDown),e.removeEventListener("mouseup",this.onMouseUp),e.removeEventListener("mousemove",this.onMouseMove)}}class MRt{constructor(){this.name="IncrementalAutoRenderPlugin",this.activeEvent="onRegister",this.nextFrameRenderGroupSet=new Set,this.willNextFrameRender=!1,this.nextUserParams={},this._uid=pn.GenAutoIncrementId(),this.key=this.name+this._uid}activate(t){this.pluginService=t,wt.graphicService.hooks.onAddIncremental.tap(this.key,(e,i,r)=>{e.glyphHost&&(e=e.glyphHost),e.stage===t.stage&&e.stage!=null&&(this.nextUserParams.startAtId=i._uid,this.renderNextFrame(i))}),wt.graphicService.hooks.onClearIncremental.tap(this.key,(e,i)=>{e.stage===t.stage&&e.stage!=null&&(this.nextUserParams.startAtId=e._uid,this.nextUserParams.restartIncremental=!0,this.renderNextFrame(e))})}deactivate(t){wt.graphicService.hooks.onAddIncremental.taps=wt.graphicService.hooks.onAddIncremental.taps.filter(e=>e.name!==this.key),wt.graphicService.hooks.onClearIncremental.taps=wt.graphicService.hooks.onClearIncremental.taps.filter(e=>e.name!==this.key)}renderNextFrame(t){this.nextFrameRenderGroupSet.add(t),this.willNextFrameRender||(this.willNextFrameRender=!0,wt.global.getRequestAnimationFrame()(()=>{this._doRenderInThisFrame(),this.willNextFrameRender=!1}))}_doRenderInThisFrame(){const t=this.pluginService.stage;this.nextFrameRenderGroupSet.size&&(this.nextFrameRenderGroupSet.forEach(e=>{const i=e.layer;if(!i||!e.layer.subLayers)return;const r=e.layer.subLayers.get(e._uid);r&&r.drawContribution&&r.drawContribution.draw(t.renderService,Object.assign({stage:t,layer:i,viewBox:t.window.getViewBox(),transMatrix:t.window.getViewBoxTransform(),clear:"transparent",renderService:t.renderService,updateBounds:!1,startAtId:e._uid,context:r.layer.getNativeHandler().getContext()},this.nextUserParams))}),this.nextUserParams={},this.nextFrameRenderGroupSet.clear())}}class lQ{constructor(){this.name="HtmlAttributePlugin",this.activeEvent="onRegister",this._uid=pn.GenAutoIncrementId(),this.key=this.name+this._uid,this.htmlMap={},this.renderId=0}activate(t){this.pluginService=t,t.stage.hooks.afterRender.tap(this.key,e=>{e&&e===this.pluginService.stage&&this.drawHTML(t.stage.renderService)})}deactivate(t){t.stage.hooks.afterRender.taps=t.stage.hooks.afterRender.taps.filter(e=>e.name!==this.key),wt.graphicService.hooks.onRemove.unTap(this.key),wt.graphicService.hooks.onRelease.unTap(this.key),this.release()}getWrapContainer(t,e,i){let r;return r=e?typeof e=="string"?wt.global.getElementById(e):e:t.window.getContainer(),{wrapContainer:wt.global.createDom(Object.assign({tagName:"div",parent:r},i)),nativeContainer:r}}parseDefaultStyleFromGraphic(t){const e=t.type==="text"&&t.attribute?t.attribute:Pt(t).text;return aPt(e)}getTransformOfText(t){const e=Pt(t).text,{textAlign:i=e.textAlign,textBaseline:r=e.textBaseline}=t.attribute,s=t.globalTransMatrix.toTransformAttrs(),{rotateDeg:a,scaleX:o,scaleY:l}=s,u={left:"0",start:"0",end:"-100%",center:"-50%",right:"-100%",top:"0",middle:"-50%",bottom:"-100%",alphabetic:"-79%"},h={left:"0",start:"0",end:"100%",center:"50%",right:"100%",top:"0",middle:"50%",bottom:"100%",alphabetic:"79%"};return{textAlign:i,transform:`translate(${u[i]},${u[r]}) rotate(${a}deg) scaleX(${o}) scaleY(${l})`,transformOrigin:`${h[i]} ${h[r]}`}}updateStyleOfWrapContainer(t,e,i,r,s){const{pointerEvents:a}=s;let o=this.parseDefaultStyleFromGraphic(t);o.display=t.attribute.visible!==!1?"block":"none",o.pointerEvents=a===!0?"all":a||"none",i.style.position||(i.style.position="absolute",r.style.position="relative");let l=0,u=0;const h=t.globalAABBBounds;let c=s.anchorType;if(F(c)&&(c=t.type==="text"?"position":"boundsLeftTop"),c==="boundsLeftTop"&&(c="top-left"),c==="position"||h.empty()){const _=t.globalTransMatrix;l=_.e,u=_.f}else{const _=Yq(h,c);l=_.x,u=_.y}const d=wt.global.getElementTopLeft(r,!1),p=e.window.getTopLeft(!1),f=l+p.left-d.left,g=u+p.top-d.top;if(o.left=`${f}px`,o.top=`${g}px`,t.type==="text"&&c==="position"&&(o=Object.assign(Object.assign({},o),this.getTransformOfText(t))),ft(s.style)){const _=s.style({top:g,left:f,width:h.width(),height:h.height()},t,i);_&&(o=Object.assign(Object.assign({},o),_))}else ae(s.style)?o=Object.assign(Object.assign({},o),s.style):It(s.style)&&s.style&&(o=Object.assign(Object.assign({},o),ZCt(s.style)));wt.global.updateDom(i,{width:s.width,height:s.width,style:o})}clearCacheContainer(){this.htmlMap&&Object.keys(this.htmlMap).forEach(t=>{this.htmlMap[t]&&this.htmlMap[t].renderId!==this.renderId&&this.removeElement(t)}),this.renderId+=1}drawHTML(t){wt.global.env==="browser"&&(t.renderTreeRoots.sort((e,i)=>{var r,s;return((r=e.attribute.zIndex)!==null&&r!==void 0?r:$i.zIndex)-((s=i.attribute.zIndex)!==null&&s!==void 0?s:$i.zIndex)}).forEach(e=>{this.renderGroupHTML(e)}),this.clearCacheContainer())}renderGroupHTML(t){this.renderGraphicHTML(t),t.forEachChildren(e=>{e.isContainer?this.renderGroupHTML(e):this.renderGraphicHTML(e)})}removeElement(t){if(!this.htmlMap||!this.htmlMap[t])return;const{wrapContainer:e}=this.htmlMap[t];e&&wt.global.removeDom(e),this.htmlMap[t]=null}renderGraphicHTML(t){var e;const{html:i}=t.attribute;if(!i)return;const r=t.stage;if(!r)return;const{dom:s,container:a}=i;if(!s)return;const o=F(i.id)?`${(e=t.id)!==null&&e!==void 0?e:t._uid}_react`:i.id;if(this.htmlMap&&this.htmlMap[o]&&a&&a!==this.htmlMap[o].container&&this.removeElement(o),this.htmlMap&&this.htmlMap[o])typeof s=="string"?this.htmlMap[o].wrapContainer.innerHTML=s:s!==this.htmlMap[o].wrapContainer.firstChild&&(this.htmlMap[o].wrapContainer.removeChild(this.htmlMap[o].wrapContainer.firstChild),this.htmlMap[o].wrapContainer.appendChild(s));else{const{wrapContainer:h,nativeContainer:c}=this.getWrapContainer(r,a);h&&(typeof s=="string"?h.innerHTML=s:h.appendChild(s),this.htmlMap||(this.htmlMap={}),this.htmlMap[o]={wrapContainer:h,nativeContainer:c,container:a,renderId:this.renderId})}if(!this.htmlMap||!this.htmlMap[o])return;const{wrapContainer:l,nativeContainer:u}=this.htmlMap[o];this.updateStyleOfWrapContainer(t,r,l,u,i),this.htmlMap[o].renderId=this.renderId}release(){wt.global.env==="browser"&&this.removeAllDom(this.pluginService.stage.defaultLayer)}removeAllDom(t){this.htmlMap&&(Object.keys(this.htmlMap).forEach(e=>{this.removeElement(e)}),this.htmlMap=null)}}const r9=new Ai;class PRt{constructor(){this.name="DirtyBoundsPlugin",this.activeEvent="onRegister",this._uid=pn.GenAutoIncrementId(),this.key=this.name+this._uid}activate(t){this.pluginService=t,t.stage.hooks.afterRender.tap(this.key,e=>{e&&e===this.pluginService.stage&&e.dirtyBounds.clear()}),wt.graphicService.hooks.beforeUpdateAABBBounds.tap(this.key,(e,i,r,s)=>{e.glyphHost&&(e=e.glyphHost),i&&i===this.pluginService.stage&&i.renderCount&&(e.isContainer&&!e.shouldSelfChangeUpdateAABBBounds()||r&&(r9.setValue(s.x1,s.y1,s.x2,s.y2),i.dirty(r9,e.parent&&e.parent.globalTransMatrix)))}),wt.graphicService.hooks.afterUpdateAABBBounds.tap(this.key,(e,i,r,s,a)=>{i&&i===this.pluginService.stage&&i.renderCount&&(e.isContainer&&!a||i.dirty(s.globalAABBBounds))}),wt.graphicService.hooks.onRemove.tap(this.key,e=>{const i=e.stage;i&&i===this.pluginService.stage&&i.renderCount&&i&&i.dirty(e.globalAABBBounds)})}deactivate(t){wt.graphicService.hooks.beforeUpdateAABBBounds.taps=wt.graphicService.hooks.beforeUpdateAABBBounds.taps.filter(e=>e.name!==this.key),wt.graphicService.hooks.afterUpdateAABBBounds.taps=wt.graphicService.hooks.afterUpdateAABBBounds.taps.filter(e=>e.name!==this.key),t.stage.hooks.afterRender.taps=t.stage.hooks.afterRender.taps.filter(e=>e.name!==this.key),wt.graphicService.hooks.onRemove.taps=wt.graphicService.hooks.onRemove.taps.filter(e=>e.name!==this.key)}}const s9=new Ai;class ERt{constructor(){this.name="FlexLayoutPlugin",this.activeEvent="onRegister",this.id=pn.GenAutoIncrementId(),this.key=this.name+this.id,this.tempBounds=new Ai}pauseLayout(t){this.pause=t}tryLayoutChildren(t){t.firstChild&&this.tryLayout(t.firstChild)}tryLayout(t,e=!0){if(this.pause)return;const i=t.parent;if(!(e||i&&t.needUpdateLayout()))return;const r=Pt(i).group,{display:s=r.display}=i.attribute;if(s!=="flex")return;const{flexDirection:a=r.flexDirection,flexWrap:o=r.flexWrap,alignItems:l=r.alignItems,clip:u=r.clip}=i.attribute,{alignContent:h=l??r.alignContent}=i.attribute;let{width:c,height:d,justifyContent:p=r.justifyContent}=i.attribute;const f=i.getChildren();if(c==null||d==null){let k=0,M=0,P=0;if(f.forEach(E=>{const I=this.getAABBBounds(E);I.empty()||(a==="column"||a==="column-reverse"?(M+=I.height(),k=Math.max(k,I.width())):(k+=I.width(),M=Math.max(M,I.height())),P+=I.x1,P+=I.y1,P+=I.x2,P+=I.y2)}),!isFinite(P))return;c=k,d=M}i.attribute.width==null?i.attribute.width=c:c=i.attribute.width,i.attribute.height==null?i.attribute.height=d:d=i.attribute.height,this.tempBounds.copy(i._AABBBounds);const g={main:{len:c,field:"x"},cross:{len:d,field:"y"}},_=g.main,v=g.cross;a!=="column"&&a!=="column-reverse"||(_.len=d,v.len=c,_.field="y",v.field="x"),a!=="row-reverse"&&a!=="column-reverse"||(p==="flex-start"?p="flex-end":p==="flex-end"?p="flex-start":f.reverse());let y=0,b=0;const S=[];f.forEach(k=>{const M=this.getAABBBounds(k);if(M.empty())return;const P=_.field==="x"?M.width():M.height(),E=v.field==="x"?M.width():M.height();S.push({mainLen:P,crossLen:E}),y+=P,b=Math.max(b,E)});const A=[];if(y>_.len&&o==="wrap"){let k=0,M=0;S.forEach(({mainLen:P,crossLen:E},I)=>{k+P>_.len?k===0?(A.push({idx:I,mainLen:k+P,crossLen:E}),k=0,M=0):(A.push({idx:I-1,mainLen:k,crossLen:M}),k=P,M=E):(k+=P,M=Math.max(M,E))}),A.push({idx:S.length-1,mainLen:k,crossLen:M})}else A.push({idx:S.length-1,mainLen:y,crossLen:b});let w=0;if(A.forEach(k=>{this.layoutMain(i,f,p,_,S,w,k),w=k.idx+1}),b=A.reduce((k,M)=>k+M.crossLen,0),A.length===1){const k={"flex-start":0,"flex-end":v.len,center:v.len/2};this.layoutCross(f,l,v,k,S,A[0],0)}else if(h==="flex-start"){w=0;let k=0;A.forEach((M,P)=>{const E={"flex-start":k,"flex-end":k+M.crossLen,center:k+M.crossLen/2};this.layoutCross(f,"flex-start",v,E,S,A[P],w),w=M.idx+1,k+=M.crossLen})}else if(h==="center"){w=0;let k=Math.max(0,(v.len-b)/2);A.forEach((M,P)=>{const E={"flex-start":k,"flex-end":k+M.crossLen,center:k+M.crossLen/2};this.layoutCross(f,"center",v,E,S,A[P],w),w=M.idx+1,k+=M.crossLen})}else if(h==="space-around"){w=0;const k=Math.max(0,(v.len-b)/A.length/2);let M=k;A.forEach((P,E)=>{const I={"flex-start":M,"flex-end":M+P.crossLen,center:M+P.crossLen/2};this.layoutCross(f,"flex-start",v,I,S,A[E],w),w=P.idx+1,M+=P.crossLen+2*k})}else if(h==="space-between"){w=0;const k=Math.max(0,(v.len-b)/(2*A.length-2));let M=0;A.forEach((P,E)=>{const I={"flex-start":M,"flex-end":M+P.crossLen,center:M+P.crossLen/2};this.layoutCross(f,"flex-start",v,I,S,A[E],w),w=P.idx+1,M+=P.crossLen+2*k})}f.forEach((k,M)=>{k.addUpdateBoundTag(),k.addUpdatePositionTag(),k.clearUpdateLayoutTag()}),i.addUpdateLayoutTag();const C=this.getAABBBounds(i);u||this.tempBounds.equals(C)||this.tryLayout(i,!1)}getAABBBounds(t){this.skipBoundsTrigger=!0;const e=t.AABBBounds;return this.skipBoundsTrigger=!1,e}updateChildPos(t,e,i){return t+(e??0)-i}layoutMain(t,e,i,r,s,a,o){if(i==="flex-start"){let l=0;for(let u=a;u<=o.idx;u++){const h=l+Jo(e[u],r.field),c=this.getAABBBounds(e[u]);!c.empty()&&(e[u].attribute[r.field]=this.updateChildPos(h,e[u].attribute[r.field],c[`${r.field}1`])),l+=s[u].mainLen}}else if(i==="flex-end"){let l=r.len;for(let u=o.idx;u>=a;u--){l-=s[u].mainLen;const h=l+Jo(e[u],r.field),c=this.getAABBBounds(e[u]);!c.empty()&&(e[u].attribute[r.field]=this.updateChildPos(h,e[u].attribute[r.field],c[`${r.field}1`]))}}else if(i==="space-around")if(o.mainLen>=r.len){let l=0;for(let u=a;u<=o.idx;u++){const h=l+Jo(e[u],r.field),c=this.getAABBBounds(e[u]);!c.empty()&&(e[u].attribute[r.field]=this.updateChildPos(h,e[u].attribute[r.field],c[`${r.field}1`])),l+=s[u].mainLen}}else{const l=o.idx-a+1,u=(r.len-o.mainLen)/l/2;let h=u;for(let c=a;c<=o.idx;c++){const d=h+Jo(e[c],r.field),p=this.getAABBBounds(e[c]);!p.empty()&&(e[c].attribute[r.field]=this.updateChildPos(d,e[c].attribute[r.field],p[`${r.field}1`])),h+=s[c].mainLen+2*u}}else if(i==="space-between")if(o.mainLen>=r.len){let l=0;for(let u=a;u<=o.idx;u++){const h=l+Jo(e[u],r.field),c=this.getAABBBounds(e[u]);!c.empty()&&(e[u].attribute[r.field]=this.updateChildPos(h,e[u].attribute[r.field],c[`${r.field}1`])),l+=s[u].mainLen}}else{const l=o.idx-a+1,u=(r.len-o.mainLen)/(2*l-2);let h=0;for(let c=a;c<=o.idx;c++){const d=h+Jo(e[c],r.field),p=this.getAABBBounds(e[c]);!p.empty()&&(e[c].attribute[r.field]=this.updateChildPos(d,e[c].attribute[r.field],p[`${r.field}1`])),h+=s[c].mainLen+2*u}}else if(i==="center"){let l=(r.len-o.mainLen)/2;for(let u=a;u<=o.idx;u++){const h=l+Jo(e[u],r.field),c=this.getAABBBounds(e[u]);!c.empty()&&(e[u].attribute[r.field]=this.updateChildPos(h,e[u].attribute[r.field],c[`${r.field}1`])),l+=s[u].mainLen}}}layoutCross(t,e,i,r,s,a,o){var l;for(let u=o;u<=a.idx;u++){const h=t[u];let{alignSelf:c}=h.attribute;c&&c!=="auto"||(c=e);const d=this.getAABBBounds(h),p=(l=r[c])!==null&&l!==void 0?l:r["flex-start"];c==="flex-end"?!d.empty()&&(h.attribute[i.field]=this.updateChildPos(p-s[u].crossLen+Jo(h,i.field),h.attribute[i.field],d[`${i.field}1`])):c==="center"?!d.empty()&&(h.attribute[i.field]=this.updateChildPos(p-s[u].crossLen/2+Jo(h,i.field),h.attribute[i.field],d[`${i.field}1`])):!d.empty()&&(h.attribute[i.field]=this.updateChildPos(p+Jo(h,i.field),h.attribute[i.field],d[`${i.field}1`]))}}activate(t){this.pluginService=t,wt.graphicService.hooks.onAttributeUpdate.tap(this.key,e=>{e.glyphHost&&(e=e.glyphHost),e.stage&&e.stage===this.pluginService.stage&&this.tryLayout(e,!1)}),wt.graphicService.hooks.beforeUpdateAABBBounds.tap(this.key,(e,i,r,s)=>{e.glyphHost&&(e=e.glyphHost),i&&i===this.pluginService.stage&&e.isContainer&&!this.skipBoundsTrigger&&s9.copy(s)}),wt.graphicService.hooks.afterUpdateAABBBounds.tap(this.key,(e,i,r,s,a)=>{i&&i===this.pluginService.stage&&e.isContainer&&!this.skipBoundsTrigger&&(s9.equals(r)||this.tryLayout(e,!1))}),wt.graphicService.hooks.onSetStage.tap(this.key,e=>{e.glyphHost&&(e=e.glyphHost),this.tryLayout(e,!1)})}deactivate(t){wt.graphicService.hooks.onAttributeUpdate.taps=wt.graphicService.hooks.onAttributeUpdate.taps.filter(e=>e.name!==this.key),wt.graphicService.hooks.beforeUpdateAABBBounds.taps=wt.graphicService.hooks.beforeUpdateAABBBounds.taps.filter(e=>e.name!==this.key),wt.graphicService.hooks.afterUpdateAABBBounds.taps=wt.graphicService.hooks.afterUpdateAABBBounds.taps.filter(e=>e.name!==this.key),wt.graphicService.hooks.onSetStage.taps=wt.graphicService.hooks.onSetStage.taps.filter(e=>e.name!==this.key)}}function Jo(n,t){return 0}const lF=new QTt;lF.addTimeline(vJ);lF.setFPS(60);class ORt{constructor(t,e,i=.8){this.dir=t,this.color=e,this.colorRgb=Li.Get(e,Yr.Color1),this.ambient=i;const r=hs(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);this.formatedDir=[t[0]/r,t[1]/r,t[2]/r]}computeColor(t,e){const i=this.formatedDir,r=nr(ls((t[0]*i[0]+t[1]*i[1]+t[2]*i[2])*(1-this.ambient/2),0)+this.ambient,1);let s;s=It(e)?Li.Get(e,Yr.Color1):e;const a=this.colorRgb;return`rgb(${a[0]*s[0]*r}, ${a[1]*s[1]*r}, ${a[2]*s[2]*r})`}}function RRt(n,t,e,i){let r,s,a,o,l,u,h,c,d,p;const f=t[0],g=t[1],_=t[2],v=i[0],y=i[1],b=i[2],S=e[0],A=e[1],w=e[2];return Math.abs(f-S)<We&&Math.abs(g-A)<We&&Math.abs(_-w)<We?I2.identity(n):(h=f-S,c=g-A,d=_-w,p=1/Math.hypot(h,c,d),h*=p,c*=p,d*=p,r=y*d-b*c,s=b*h-v*d,a=v*c-y*h,p=Math.hypot(r,s,a),p?(p=1/p,r*=p,s*=p,a*=p):(r=0,s=0,a=0),o=c*a-d*s,l=d*r-h*a,u=h*s-c*r,p=Math.hypot(o,l,u),p?(p=1/p,o*=p,l*=p,u*=p):(o=0,l=0,u=0),n[0]=r,n[1]=o,n[2]=h,n[3]=0,n[4]=s,n[5]=l,n[6]=c,n[7]=0,n[8]=a,n[9]=u,n[10]=d,n[11]=0,n[12]=-(r*f+s*g+a*_),n[13]=-(o*f+l*g+u*_),n[14]=-(h*f+c*g+d*_),n[15]=1,n)}function IRt(n,t,e,i,r,s,a){const o=1/(t-e),l=1/(i-r),u=1/(s-a);return n[0]=-2*o,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*l,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*u,n[11]=0,n[12]=(t+e)*o,n[13]=(r+i)*l,n[14]=(a+s)*u,n[15]=1,n}function a9(n,t,e){const i=t[0],r=t[1],s=t[2],a=t[3],o=t[4],l=t[5],u=t[6],h=t[7],c=t[8],d=t[9],p=t[10],f=t[11],g=t[12],_=t[13],v=t[14],y=t[15];let b=e[0],S=e[1],A=e[2],w=e[3];return n[0]=b*i+S*o+A*c+w*g,n[1]=b*r+S*l+A*d+w*_,n[2]=b*s+S*u+A*p+w*v,n[3]=b*a+S*h+A*f+w*y,b=e[4],S=e[5],A=e[6],w=e[7],n[4]=b*i+S*o+A*c+w*g,n[5]=b*r+S*l+A*d+w*_,n[6]=b*s+S*u+A*p+w*v,n[7]=b*a+S*h+A*f+w*y,b=e[8],S=e[9],A=e[10],w=e[11],n[8]=b*i+S*o+A*c+w*g,n[9]=b*r+S*l+A*d+w*_,n[10]=b*s+S*u+A*p+w*v,n[11]=b*a+S*h+A*f+w*y,b=e[12],S=e[13],A=e[14],w=e[15],n[12]=b*i+S*o+A*c+w*g,n[13]=b*r+S*l+A*d+w*_,n[14]=b*s+S*u+A*p+w*v,n[15]=b*a+S*h+A*f+w*y,n}function ra(n,t,e){const i=t[0],r=t[1],s=t[2];let a=e[3]*i+e[7]*r+e[11]*s+e[15];return a=a||1,n[0]=(e[0]*i+e[4]*r+e[8]*s+e[12])/a,n[1]=(e[1]*i+e[5]*r+e[9]*s+e[13])/a,n[2]=(e[2]*i+e[6]*r+e[10]*s+e[14])/a,n}class LRt{set params(t){this._params=Object.assign({},t),this._projectionMatrixCached=this.forceGetProjectionMatrix(),this._viewMatrixCached=this.forceGetViewMatrix()}get params(){return Object.assign({},this._params)}constructor(t){this.params=t}getViewMatrix(){return this._viewMatrixCached||(this._viewMatrixCached=gi.allocate()),this._viewMatrixCached}forceGetViewMatrix(){this._viewMatrixCached||(this._viewMatrixCached=gi.allocate());const{pos:t,center:e,up:i}=this.params.viewParams;return RRt(this._viewMatrixCached,t,e,i),this._vp||(this._vp=gi.allocate()),this._vp=a9(this._vp,this.getProjectionMatrix(),this.getViewMatrix()),this._viewMatrixCached}getProjectionMatrix(){return this._projectionMatrixCached||(this._projectionMatrixCached=gi.allocate()),this._projectionMatrixCached}forceGetProjectionMatrix(){this._projectionMatrixCached||(this._projectionMatrixCached=gi.allocate());const{left:t,top:e,right:i,bottom:r}=this._params;return IRt(this._projectionMatrixCached,t,i,r,e,0,-2e6),this._vp||(this._vp=gi.allocate()),this._vp=a9(this._vp,this.getProjectionMatrix(),this.getViewMatrix()),this._projectionMatrixCached}getField(){const{fieldRatio:t=.8,fieldDepth:e,left:i,right:r}=this._params;return(e??r-i)*t}getProjectionScale(t){const e=this.getField();return e/(e+t)}view(t,e,i){const r=[0,0,0];return ra(r,[t,e,i],this._viewMatrixCached),r}vp(t,e,i){const r=[0,0,0],{pos:s}=this._params.viewParams;ra(r,[t,e,i],this._viewMatrixCached),t=r[0],e=r[1],i=r[2];const a=this.getProjectionScale(i);return{x:t*a+s[0],y:e*a+s[1]}}}let hf;function DRt(){if(hf==null)try{const n=document.createElement("canvas"),t=n.getContext("2d");hf=!!(window&&n.getBoundingClientRect&&requestAnimationFrame&&window.devicePixelRatio&&t&&t.isPointInPath&&t.isPointInStroke),hf&&(hf=!!document.createElement)}catch{hf=!1}}function uF(){DRt();const n=wt.global&&wt.global.env;return n?n==="browser":hf}class BRt extends lQ{constructor(){super(...arguments),this.name="ReactAttributePlugin",this.activeEvent="onRegister",this._uid=pn.GenAutoIncrementId(),this.key=this.name+this._uid,this.htmlMap={}}removeElement(t){if(!this.htmlMap||!this.htmlMap[t])return;const{root:e,wrapContainer:i}=this.htmlMap[t];e&&wt.global.getRequestAnimationFrame()(()=>{e.unmount()}),i&&wt.global.removeDom(i),this.htmlMap[t]=null}renderGraphicHTML(t){var e;const{react:i}=t.attribute;if(!i)return;const r=t.stage;if(!r)return;const s=r.params.ReactDOM,{element:a,container:o}=i;if(!(a&&s&&s.createRoot))return;const l=F(i.id)?`${(e=t.id)!==null&&e!==void 0?e:t._uid}_react`:i.id;if(this.htmlMap&&this.htmlMap[l]&&o&&o!==this.htmlMap[l].container&&this.removeElement(l),this.htmlMap&&this.htmlMap[l])this.htmlMap[l].root.render(a);else{const{wrapContainer:c,nativeContainer:d}=this.getWrapContainer(r,o);if(c){const p=s.createRoot(c);p.render(a),this.htmlMap||(this.htmlMap={}),this.htmlMap[l]={root:p,wrapContainer:c,nativeContainer:d,container:o,renderId:this.renderId}}}if(!this.htmlMap||!this.htmlMap[l])return;const{wrapContainer:u,nativeContainer:h}=this.htmlMap[l];this.updateStyleOfWrapContainer(t,r,u,h,i),this.htmlMap[l].renderId=this.renderId}}const o9={WIDTH:500,HEIGHT:500,X:0,Y:0,BACKGROUND:"white"};class FRt extends Im{set viewBox(t){this.window.setViewBox(t)}get viewBox(){return this.window.getViewBox()}get x(){return this.window.getViewBox().x1}set x(t){const e=this.window.getViewBox();e.translate(t-e.x1,0),this.window.setViewBox(e)}get y(){return this.window.getViewBox().y1}set y(t){const e=this.window.getViewBox();e.translate(0,t-e.y1),this.window.setViewBox(e)}get width(){return this.window.width}set width(t){this.resize(t,this.height)}get viewWidth(){return this.window.getViewBox().width()}set viewWidth(t){this.resizeView(t,this.viewHeight)}get viewHeight(){return this.window.getViewBox().height()}set viewHeight(t){this.resizeView(this.viewWidth,t)}get height(){return this.window.height}set height(t){this.resize(this.width,t)}get dpr(){return this.window.dpr}set dpr(t){this.setDpr(t)}get background(){var t;return(t=this._background)!==null&&t!==void 0?t:o9.BACKGROUND}set background(t){this._background=t}get defaultLayer(){return this.at(0)}get eventSystem(){return this._eventSystem}constructor(t={}){var e;super({}),this._onVisibleChange=i=>{if(!(this._skipRender<0))if(i){if(this.dirtyBounds){const r=this.window.getViewBox();this.dirtyBounds.setValue(r.x1,r.y1,r.width(),r.height())}this._skipRender>1&&this.renderNextFrame(),this._skipRender=0}else this._skipRender=1},this.beforeRender=i=>{this._beforeRender&&this._beforeRender(i)},this.afterRender=i=>{this.renderCount++,this._afterRender&&this._afterRender(i),this._afterNextRenderCbs&&this._afterNextRenderCbs.forEach(r=>r(i)),this._afterNextRenderCbs=null},this.params=t,this.theme=new ay,this.hooks={beforeRender:new la(["stage"]),afterRender:new la(["stage"])},this.global=wt.global,!this.global.env&&uF()&&this.global.setEnv("browser"),this.window=re.get(FA),this.renderService=re.get(sQ),this.pluginService=re.get(aQ),this.layerService=re.get(q3),this.pluginService.active(this,t),this.window.create({width:t.width,height:t.height,viewBox:t.viewBox,container:t.container,dpr:t.dpr||this.global.devicePixelRatio,canvasControled:t.canvasControled!==!1,title:t.title||"",canvas:t.canvas}),this.state="normal",this.renderCount=0,this.tryInitEventSystem(),this._background=(e=t.background)!==null&&e!==void 0?e:o9.BACKGROUND,this.appendChild(this.layerService.createLayer(this,{main:!0})),this.nextFrameRenderLayerSet=new Set,this.willNextFrameRender=!1,this.stage=this,this.renderStyle=t.renderStyle,t.autoRender&&this.enableAutoRender(),t.disableDirtyBounds===!1&&this.enableDirtyBounds(),t.enableHtmlAttribute&&this.enableHtmlAttribute(t.enableHtmlAttribute),t.ReactDOM&&this.enableReactAttribute(t.ReactDOM),t.enableLayout&&this.enableLayout(),this.hooks.beforeRender.tap("constructor",this.beforeRender),this.hooks.afterRender.tap("constructor",this.afterRender),this._beforeRender=t.beforeRender,this._afterRender=t.afterRender,this.ticker=t.ticker||lF,this.supportInteractiveLayer=t.interactiveLayer!==!1,this.timeline=new mJ,this.ticker.addTimeline(this.timeline),this.timeline.pause(),t.optimize||(t.optimize={}),this.optmize(t.optimize),t.background&&It(this._background)&&this._background.includes("/")&&this.setAttributes({background:this._background})}pauseRender(){this._skipRender=-1}resumeRender(){this._skipRender=0}tryInitEventSystem(){this.global.supportEvent&&!this._eventSystem&&(this._eventSystem=new JTt(Object.assign({targetElement:this.window,resolution:this.window.dpr||this.global.devicePixelRatio,rootNode:this,global:this.global,supportsPointerEvents:this.params.supportsPointerEvents,supportsTouchEvents:this.params.supportsTouchEvents},this.params.event)))}preventRender(t){t?this._skipRender=-1/0:this.params.optimize.skipRenderWithOutRange!==!1?this._skipRender=this.window.isVisible()?0:1:this._skipRender=0}optmize(t){this.optmizeRender(t.skipRenderWithOutRange),this.params.optimize=t}optmizeRender(t=!1){t&&(this._skipRender=this._skipRender<0?this._skipRender:this.window.isVisible()?0:1,this.window.onVisibleChange(this._onVisibleChange))}getTimeline(){return this.timeline}get3dOptions(t){const{center:e={x:this.width/2,y:this.height/2,z:0,dx:0,dy:0,dz:0},light:i={},alpha:r=0,beta:s=0,camera:a,fieldRatio:o=1,fieldDepth:l}=t;return Object.assign(Object.assign({},t),{center:e,light:i,alpha:r,beta:s,camera:a,fieldRatio:o,fieldDepth:l})}set3dOptions(t){var e,i,r,s,a,o;this.option3d=t;const l=this.get3dOptions(t),{light:u,center:h,camera:c,alpha:d,beta:p,fieldRatio:f,fieldDepth:g}=l,{dir:_=[1,1,-1],color:v="white",ambient:y}=u,b=((e=h.x)!==null&&e!==void 0?e:this.width/2)+((i=h.dx)!==null&&i!==void 0?i:0),S=((r=h.y)!==null&&r!==void 0?r:this.height/2)+((s=h.dy)!==null&&s!==void 0?s:0),A=[b,S,((a=h.z)!==null&&a!==void 0?a:0)+((o=h.dz)!==null&&o!==void 0?o:0)];let w=0,C=0,k=0;c||(w=Math.sin(d)+b,C=Math.sin(p)+S,k=Math.cos(d)*Math.cos(p)*1),this.light=new ORt(_,v,y);const M={left:0,right:this.width,top:0,bottom:this.height,fieldRatio:f,fieldDepth:g,viewParams:{pos:[w,C,k],center:A,up:[0,1,0]}};this.camera?this.camera.params=M:this.camera=new LRt(M),t.enableView3dTransform&&this.enableView3dTransform()}setBeforeRender(t){this._beforeRender=t}setAfterRender(t){this._afterRender=t}afterNextRender(t){this._afterNextRenderCbs||(this._afterNextRenderCbs=[]),this._afterNextRenderCbs.push(t)}enableView3dTransform(){this.view3dTranform||(this.view3dTranform=!0,this.pluginService.register(new TRt))}disableView3dTranform(){this.view3dTranform&&(this.view3dTranform=!1,this.pluginService.findPluginsByName("ViewTransform3dPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableAutoRender(){this.autoRender||(this.autoRender=!0,this.pluginService.register(new kRt))}disableAutoRender(){this.autoRender&&(this.autoRender=!1,this.pluginService.findPluginsByName("AutoRenderPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableIncrementalAutoRender(){this.increaseAutoRender||(this.increaseAutoRender=!0,this.pluginService.register(new MRt))}disableIncrementalAutoRender(){this.increaseAutoRender&&(this.increaseAutoRender=!1,this.pluginService.findPluginsByName("IncrementalAutoRenderPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableDirtyBounds(){if(this.dirtyBounds)return;this.dirtyBounds=new Fn;let t=this.pluginService.findPluginsByName("DirtyBoundsPlugin")[0];t?t.activate(this.pluginService):(t=new PRt,this.pluginService.register(t))}disableDirtyBounds(){this.dirtyBounds&&(this.dirtyBounds=null,this.pluginService.findPluginsByName("DirtyBoundsPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableLayout(){this._enableLayout||(this._enableLayout=!0,this.pluginService.register(new ERt))}disableLayout(){this._enableLayout&&(this._enableLayout=!1,this.pluginService.findPluginsByName("FlexLayoutPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableHtmlAttribute(t){this.htmlAttribute||(this.htmlAttribute=t,this.pluginService.register(new lQ))}disableHtmlAttribute(){this.htmlAttribute&&(this.htmlAttribute=!1,this.pluginService.findPluginsByName("HtmlAttributePlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableReactAttribute(t){this.reactAttribute||(this.reactAttribute=t,this.pluginService.register(new BRt))}disableReactAttribute(){this.reactAttribute&&(this.reactAttribute=!1,this.pluginService.findPluginsByName("ReactAttributePlugin").forEach(t=>{this.pluginService.unRegister(t)}))}getPluginsByName(t){return this.pluginService.findPluginsByName(t)}tryUpdateAABBBounds(){const t=this.window.getViewBox();return this._AABBBounds.setValue(t.x1,t.y1,t.x2,t.y2),this._AABBBounds}combineLayer(t,e){throw new Error("暂不支持")}createLayer(t,e){if(this.releaseStatus==="released")return;const i=this.layerService.createLayer(this,{main:!1,layerMode:e,canvasId:t});return this.appendChild(i),i}sortLayer(t){const e=this.children;e.sort(t),this.removeAllChild(),e.forEach(i=>{this.appendChild(i)})}removeLayer(t){return this.removeChild(this.findChildByUid(t))}tryInitInteractiveLayer(){this.releaseStatus!=="released"&&this.supportInteractiveLayer&&!this.interactiveLayer&&(this.interactiveLayer=this.createLayer(),this.interactiveLayer.name="_builtin_interactive",this.interactiveLayer.attribute.pickable=!1,this.nextFrameRenderLayerSet.add(this.interactiveLayer))}clearViewBox(t){this.window.clearViewBox(t)}render(t,e){if(this.releaseStatus==="released")return;this.ticker.start(),this.timeline.resume();const i=this.state;this.state="rendering",this.layerService.prepareStageLayer(this),this._skipRender||(this.lastRenderparams=e,this.hooks.beforeRender.call(this),this._skipRender||(this.renderLayerList(this.children),this.combineLayersToWindow(),this.nextFrameRenderLayerSet.clear()),this.hooks.afterRender.call(this)),this.state=i,this._skipRender&&this._skipRender++}combineLayersToWindow(){if(this.global.env==="harmony"){const t=this.window.getContext().nativeContext;this.forEachChildren((e,i)=>{if(i>0){const r=e.getNativeHandler().getContext().canvas.nativeCanvas.nativeCanvas._c.transferToImageBitmap();t.transferFromImageBitmap(r)}})}}renderNextFrame(t,e){this.nextFrameRenderLayerSet.size!==this.childrenCount&&(t||this).forEach(i=>{this.nextFrameRenderLayerSet.add(i)}),this.willNextFrameRender||(this.willNextFrameRender=!0,this.global.getRequestAnimationFrame()(()=>{this._doRenderInThisFrame(),this.willNextFrameRender=!1}))}_doRenderInThisFrame(){if(this.releaseStatus==="released")return;this.timeline.resume(),this.ticker.start();const t=this.state;this.state="rendering",this.layerService.prepareStageLayer(this),this.nextFrameRenderLayerSet.size&&!this._skipRender&&(this.hooks.beforeRender.call(this),this._skipRender||(this.renderLayerList(Array.from(this.nextFrameRenderLayerSet.values()),this.lastRenderparams||{}),this.combineLayersToWindow(),this.nextFrameRenderLayerSet.clear()),this.hooks.afterRender.call(this)),this.state=t,this._skipRender&&this._skipRender++}renderLayerList(t,e){const i=[];for(let r=0;r<t.length;r++){let s=t[r];s.layerMode==="virtual"&&(s=s.getNativeHandler().mainHandler.layer),i.includes(s)||i.push(s)}i.forEach(r=>{r.renderCount>this.renderCount||(r.renderCount=this.renderCount+1,r.render({renderService:this.renderService,background:r===this.defaultLayer?this.background:void 0,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty()),viewBox:this.window.getViewBox(),transMatrix:this.window.getViewBoxTransform()},Object.assign({renderStyle:this.renderStyle},e)))}),this.interactiveLayer&&!t.includes(this.interactiveLayer)&&this.interactiveLayer.render({renderService:this.renderService,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty()),viewBox:this.window.getViewBox(),transMatrix:this.window.getViewBoxTransform()},Object.assign({renderStyle:this.renderStyle},e))}resizeWindow(t,e,i=!0){this.window.resize(t,e),i&&this.render()}resize(t,e,i=!0){this.releaseStatus!=="released"&&(this.window.hasSubView()||this.viewBox.setValue(this.viewBox.x1,this.viewBox.y1,this.viewBox.x1+t,this.viewBox.y1+e),this.window.resize(t,e),this.forEachChildren(r=>{r.resize(t,e)}),this.camera&&this.option3d&&this.set3dOptions(this.option3d),i&&this.render())}resizeView(t,e,i=!0){this.releaseStatus!=="released"&&(this.viewBox.setValue(this.viewBox.x1,this.viewBox.y1,this.viewBox.x1+t,this.viewBox.y1+e),this.forEachChildren(r=>{r.resizeView(t,e)}),this.camera&&(this.camera.params=Object.assign(Object.assign({},this.camera.params),{right:this.width,bottom:this.height})),i&&this.render())}setViewBox(t,e,i,r,s){let a=!0;typeof t=="object"?(this.viewBox.setValue(t.x1,t.y1,t.x2,t.y2),e===!1&&(a=!1)):(this.viewBox.setValue(t,e,t+i,e+r),s===!1&&(a=!1)),this.forEachChildren(o=>{o.resizeView(this.viewBox.width(),this.viewBox.height())}),a&&this.render()}setDpr(t,e=!0){this.forEachChildren(i=>{i.setDpr(t)}),e&&this.render()}setOrigin(t,e){throw new Error("暂不支持")}export(t){throw new Error("暂不支持")}pick(t,e){if(this.releaseStatus==="released")return;this.pickerService||(this.pickerService=re.get(dg));const i=this.pickerService.pick(this.children,new Qi(t,e),{bounds:this.AABBBounds});return!(!(i!=null&&i.graphic)&&!(i!=null&&i.group))&&i}startAnimate(t){throw new Error("暂不支持")}setToFrame(t){throw new Error("暂不支持")}release(){super.release(),this.hooks.beforeRender.unTap("constructor",this.beforeRender),this.hooks.afterRender.unTap("constructor",this.afterRender),this.eventSystem&&this.eventSystem.release(),this.layerService.releaseStage(this),this.pluginService.release(),this.forEach(t=>{t.release()}),this.interactiveLayer&&this.interactiveLayer.release(),this.window.release(),this.ticker.remTimeline(this.timeline),this.renderService.renderTreeRoots=[]}setStage(t){}dirty(t,e){this.releaseStatus!=="released"&&(e&&t.transformWithMatrix(e),this.dirtyBounds.empty()&&this.dirtyBounds.setValue(t.x1,t.y1,t.x2,t.y2),this.dirtyBounds.union(t))}getLayer(t){return this.children.filter(e=>e.name===t)[0]}renderTo(t){this.releaseStatus!=="released"&&this.forEachChildren((e,i)=>{e.drawTo(t,{renderService:this.renderService,viewBox:t.getViewBox(),transMatrix:t.getViewBoxTransform(),background:e===this.defaultLayer?this.background:void 0,clear:i===0,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty())})})}renderToNewWindow(t=!0,e){if(this.releaseStatus==="released")return;const i=re.get(FA),r=e?-e.x1:0,s=e?-e.y1:0,a=e?e.x2:this.viewWidth,o=e?e.y2:this.viewHeight,l=e?e.width():this.viewWidth,u=e?e.height():this.viewHeight;return i.create({viewBox:{x1:r,y1:s,x2:a,y2:o},width:l,height:u,dpr:this.window.dpr,canvasControled:!0,offscreen:!0,title:""}),this.renderTo(i),i}toCanvas(t=!0,e){if(this.releaseStatus==="released")return;const i=this.renderToNewWindow(t,e).getNativeHandler();return i.nativeCanvas?i.nativeCanvas:null}setCursor(t){this._cursor=t,this.eventSystem.setCursor(t,"ignore")}getCursor(){return this._cursor}eventPointTransform(t){const e=this.global.mapToCanvasPoint(t,this.window.getContext().canvas.nativeCanvas);return this.stage.window.pointTransform(e.x,e.y)}pauseTriggerEvent(){this._eventSystem&&this._eventSystem.pauseTriggerEvent()}resumeTriggerEvent(){this._eventSystem&&this._eventSystem.resumeTriggerEvent()}}function jRt(n){return new FRt(n)}var NRt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},zRt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};const yE={WIDTH:500,HEIGHT:500,DPR:1};let P0=class{get displayWidth(){return this._pixelWidth/this._dpr}get displayHeight(){return this._pixelHeight/this._dpr}get id(){return this._id}get x(){return this._x}set x(n){this._x=n}get y(){return this._y}set y(n){this._y=n}get nativeCanvas(){return this._nativeCanvas}get width(){return this._pixelWidth}set width(n){this._pixelWidth=n,this._displayWidth=n/(this._dpr||1)}get height(){return this._pixelHeight}set height(n){this._pixelHeight=n,this._displayHeight=n/(this._dpr||1)}getContext(n){return this._context}get visiable(){return this._visiable}set visiable(n){this._visiable=n,n?this.show():this.hide()}get dpr(){return this._dpr}set dpr(n){this._dpr=n,this.resize(this._displayWidth,this._displayHeight)}constructor(n){var t;const{nativeCanvas:e,width:i=yE.WIDTH,height:r=yE.HEIGHT,dpr:s=yE.DPR,x:a,y:o,id:l,canvasControled:u=!0}=n;this._x=a??0,this._y=o??0,this._pixelWidth=i*s,this._pixelHeight=r*s,this._visiable=n.visiable!==!1,this.controled=u,this._displayWidth=i,this._displayHeight=r,this._dpr=s,this._nativeCanvas=e,this._id=(t=e.id)!==null&&t!==void 0?t:l,l&&(e.id=l),this.init(n)}getNativeCanvas(){return this._nativeCanvas}hide(){}show(){}applyPosition(){}resetStyle(n){}resize(n,t){}toDataURL(n,t){return""}readPixels(n,t,e,i){return this._context.getImageData(n,t,e,i)}convertToBlob(n){throw new Error("暂未实现")}transferToImageBitmap(){throw new Error("暂未实现")}release(...n){this.controled&&this._nativeCanvas.parentElement&&this._nativeCanvas.parentElement.removeChild(this._nativeCanvas)}};P0.env="browser",P0=NRt([Vt(),zRt("design:paramtypes",[Object])],P0);var HRt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let bw=class{configure(n,...t){n.env===this.type&&n.setActiveEnvContribution(this)}getNativeAABBBounds(n){return new Ai}removeDom(n){return!1}createDom(n){return null}updateDom(n,t){return!1}getDynamicCanvasCount(){return 999}getStaticCanvasCount(){return 999}getElementById(n){return document.getElementById(n)}getRootElement(){return document.body}loadJson(n){const t=fetch(n).then(e=>e.json());return t.then(e=>({data:e,state:"success"})).catch(()=>({data:null,state:"fail"})),t}loadArrayBuffer(n){return fetch(n).then(t=>t.arrayBuffer()).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadBlob(n){return fetch(n).then(t=>t.blob()).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}getElementTop(n,t){return 0}getElementLeft(n,t){return 0}getElementTopLeft(n,t){return{top:0,left:0}}};bw=HRt([Vt()],bw);var VRt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},WRt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};let xw=class{constructor(){this._uid=pn.GenAutoIncrementId(),this.viewBox=new Ai,this.modelMatrix=new Wi(1,0,0,1,0,0)}onChange(n){this._onChangeCb=n}configure(n,t){t.env===this.type&&n.setWindowHandler(this)}release(...n){this.releaseWindow()}isVisible(n){return!0}onVisibleChange(n){}getTopLeft(n){return{top:0,left:0}}setViewBox(n){this.viewBox.setValue(n.x1,n.y1,n.x2,n.y2)}getViewBox(){return this.viewBox}setViewBoxTransform(n,t,e,i,r,s){this.modelMatrix.setValue(n,t,e,i,r,s)}getViewBoxTransform(){return this.modelMatrix}};xw=VRt([Vt(),WRt("design:paramtypes",[])],xw);var $Rt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},GRt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},l9=function(n,t){return function(e,i){t(e,i,n)}};let cL=class{constructor(n){this.pickItemInterceptorContributions=n,this.type="default",this.global=wt.global}_init(){this.InterceptorContributions=this.pickItemInterceptorContributions.getContributions().sort((n,t)=>n.order-t.order)}pick(n,t,e){let i={graphic:null,group:null};e.pickerService=this;const r=e.bounds.width(),s=e.bounds.height();if(!new Ai().setValue(0,0,r,s).containsPoint(t))return i;this.pickContext&&(this.pickContext.inuse=!0),e.pickContext=this.pickContext,this.pickContext&&this.pickContext.clearMatrix(!0,1);const a=new Wi(1,0,0,1,0,0);let o;for(let l=n.length-1;l>=0&&(i=n[l].isContainer?this.pickGroup(n[l],t,a,e):this.pickItem(n[l],t,a,e),!i.graphic);l--)o||(o=i.group);if(i.graphic||(i.group=o),this.pickContext&&(this.pickContext.inuse=!1),i.graphic){let l=i.graphic;for(;l.parent;)l=l.parent;l.shadowHost&&(i.params={shadowTarget:i.graphic},i.graphic=l.shadowHost)}return i}containsPoint(n,t,e){var i;return!!(!((i=this.pickItem(n,t,null,e??{pickContext:this.pickContext,pickerService:this}))===null||i===void 0)&&i.graphic)}pickGroup(n,t,e,i){let r={group:null,graphic:null};if(n.attribute.visibleAll===!1)return r;const s=i.pickContext,a=s.modelMatrix;if(s.camera){const p=n.transMatrix,f=gi.allocate();if(KI(f,p),a){if(f){const g=gi.allocate();s.modelMatrix=b1(g,a,f),gi.free(f)}}else KI(f,n.globalTransMatrix),s.modelMatrix=f}if(this.InterceptorContributions.length)for(let p=0;p<this.InterceptorContributions.length;p++){const f=this.InterceptorContributions[p];if(f.beforePickItem){const g=f.beforePickItem(n,this,t,i,{parentMatrix:e});if(g)return s.modelMatrix!==a&&gi.free(s.modelMatrix),s.modelMatrix=a,g}}const o=n.transMatrix,l=Ua.allocateByObj(e),u=new Qi(t.x,t.y);l.transformPoint(u,u);const h=n.AABBBounds.containsPoint(u);if(!h&&!n.stage.camera)return r;const c=this.pickItem(n,u.clone(),e,i);c&&c.graphic&&(r.graphic=c.graphic,r.params=c.params);const d=n.attribute.pickable!==!1&&h;return l.multiply(o.a,o.b,o.c,o.d,o.e,o.f),n.attribute.childrenPickable===!1||c&&c.graphic||oQ(n,$i.zIndex,p=>{if(p.isContainer){const f=new Qi(t.x,t.y),g=Pt(n).group,{scrollX:_=g.scrollX,scrollY:v=g.scrollY}=n.attribute;f.x-=_,f.y-=v,r=this.pickGroup(p,f,l,i)}else{const f=new Qi(t.x,t.y);l.transformPoint(f,f);const g=Pt(n).group,{scrollX:_=g.scrollX,scrollY:v=g.scrollY}=n.attribute;f.x-=_,f.y-=v;const y=this.pickItem(p,f,e,i);y&&y.graphic&&(r.graphic=y.graphic,r.params=y.params)}return!!r.graphic||!!r.group},!0,!!s.camera),s.modelMatrix!==a&&gi.free(s.modelMatrix),s.modelMatrix=a,r.graphic||r.group||!d||n.stage.camera||(r.group=n),Ua.free(l),r}selectPicker(n){return this.pickerMap.get(n.numberType)||null}};cL=$Rt([Vt(),l9(0,fe(Rn)),l9(0,Xn(Wf)),GRt("design:paramtypes",[Object])],cL);function URt(n,t){let e,i,r=n[0].x,s=n[0].y;const a=[n[0]];for(let o=1,l=n.length;o<l;o++)e=n[o].x-r,i=n[o].y-s,e*e+i*i>t&&(r=n[o].x,s=n[o].y,a.push(n[o]));return n[n.length-1].x===r&&n[n.length-1].y===s||a.push(n[n.length-1]),a}function dL(n,t,e,i,r){let s=i,a=t;const o=n[t].x,l=n[t].y,u=n[e].x-o,h=n[e].y-l,c=u*u+h*h;let d,p,f,g,_;for(let v=t+1,y=e-1;v<y;v++)g=n[v].x-o,_=n[v].y-l,d=g*h-u*_,p=d*d,f=p/c,f>s&&(s=f,a=v);s>i&&(a-t>2&&dL(n,t,a,i,r),r.push(n[a],n[a+1]),e-a>2&&dL(n,a,e,i,r))}function YRt(n,t){const e=n.length-1,i=[n[0]];return dL(n,0,e,t,i),i.push(n[e]),i}function XRt(n,t,e){if(n.length<=10)return n;const i=t!==void 0?t*t:1;return n=YRt(n=URt(n,i),i)}let u9=!1;const KRt=new se(n=>{u9||(u9=!0,n(UA).toSelf().inSingletonScope(),n(QA).to(UA).inSingletonScope(),n(Kn).toService(QA),n(jI).toService(Qa),vr(n,jI))});let h9=!1;const qRt=new se(n=>{h9||(h9=!0,n(qA).toSelf().inSingletonScope(),n(sw).to(qA).inSingletonScope(),n(Kn).toService(sw),n(GA).toSelf(),n($A).toSelf(),n(Zv).toService(GA),n(Zv).toService($A),n(Zv).toService(Qa),vr(n,Zv))});let c9=!1;const ZRt=new se(n=>{c9||(c9=!0,n(gy).toSelf().inSingletonScope(),n(vw).toSelf().inSingletonScope(),n(iw).to(gy).inSingletonScope(),n(Kn).toService(iw))});let d9=!1;const JRt=new se(n=>{d9||(d9=!0,n(my).toSelf().inSingletonScope(),n(tw).to(my).inSingletonScope(),n(Kn).toService(tw),n(NI).toService(Qa),vr(n,NI),n(_w).toSelf().inSingletonScope())});let p9=!1;const QRt=new se(n=>{p9||(p9=!0,n(ZA).toSelf().inSingletonScope(),n(aw).to(ZA).inSingletonScope(),n(Kn).toService(aw),n($I).toService(Qa),vr(n,$I))});let f9=!1;const tIt=new se(n=>{f9||(f9=!0,n(YA).toSelf().inSingletonScope(),n(ew).to(YA).inSingletonScope(),n(Kn).toService(ew),n(zI).toService(Qa),vr(n,zI))});let g9=!1;const eIt=new se(n=>{g9||(g9=!0,n(rL).to(QI).inSingletonScope(),n(Kn).toService(rL),n(GI).toService(Qa),vr(n,GI))});let m9=!1;const iIt=new se(n=>{m9||(m9=!0,n(KA).toSelf().inSingletonScope(),n(nw).to(KA).inSingletonScope(),n(Kn).toService(nw),n(VI).toService(Qa),vr(n,VI))});let v9=!1;const nIt=new se(n=>{v9||(v9=!0,n(rw).to(tL).inSingletonScope(),n(Kn).toService(rw),n(WI).toService(Qa),vr(n,WI))});var rIt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let pL=class{constructor(){this.numberType=S2}drawShape(n,t,e,i,r,s,a,o){r.drawContribution&&n.getSubGraphic().forEach(l=>{const u=r.drawContribution.getRenderContribution(l);u&&u.drawShape&&u.drawShape(l,t,e,i,r,s,a,o)})}draw(n,t,e,i){const{context:r}=e;if(!r||(r.highPerformanceSave(),!e.drawContribution))return;const s=Pt(n),a=n.getSubGraphic();a.length&&a.forEach(o=>{e.drawContribution.renderItem(o,e,{theme:s})}),r.highPerformanceRestore()}};pL=rIt([Vt()],pL);let _9=!1;const sIt=new se(n=>{_9||(_9=!0,n(ow).to(pL).inSingletonScope(),n(Kn).toService(ow))});var aIt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},oIt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};let fL=class extends vs{constructor(){super(),this.numberType=X3,this.builtinContributions=[iQ],this.init()}drawShape(n,t,e,i,r){const s=Pt(n).richtext,{strokeOpacity:a=s.strokeOpacity,opacity:o=s.opacity,fillOpacity:l=s.fillOpacity,visible:u=s.visible}=n.attribute;if(!n.valid||!u)return;const h=tp(o,l,!0),c=tp(o,a,!0);h&&(t.translate(e,i),this.beforeRenderStep(n,t,e,i,h,c,h,c,s,r),n.getFrameCache().draw(t,this.drawIcon),this.afterRenderStep(n,t,e,i,h,c,h,c,s,r))}drawIcon(n,t,e,i,r){var s;const a=Pt(n).richtextIcon,{width:o=a.width,height:l=a.height,opacity:u=a.opacity,image:h,backgroundFill:c=a.backgroundFill,backgroundFillOpacity:d=a.backgroundFillOpacity,backgroundStroke:p=a.backgroundStroke,backgroundStrokeOpacity:f=a.backgroundStrokeOpacity,backgroundRadius:g=a.backgroundRadius,margin:_}=n.attribute,{backgroundWidth:v=o,backgroundHeight:y=l}=n.attribute;if(_&&(e+=n._marginArray[3],i+=n._marginArray[0]),n._hovered){const S=(v-o)/2,A=(y-l)/2;g===0?(t.beginPath(),t.rect(e-S,i-A,v,y)):(t.beginPath(),mc(t,e-S,i-A,v,y,g)),c&&(t.globalAlpha=d,t.fillStyle=c,t.fill()),p&&(t.globalAlpha=f,t.strokeStyle=p,t.stroke())}const b=h&&((s=n==null?void 0:n.resources)===null||s===void 0?void 0:s.get(h));b&&b.state==="success"&&(t.globalAlpha=u,t.drawImage(b.data,e,i,o,l))}draw(n,t,e){const i=Pt(n).richtext;this._draw(n,i,!1,e)}};fL=aIt([Vt(),oIt("design:paramtypes",[])],fL);let y9=!1;const lIt=new se(n=>{y9||(y9=!0,n(sL).to(fL).inSingletonScope(),n(Kn).toService(sL))});let b9=!1;const uIt=new se(n=>{b9||(b9=!0,n(ZH).to(eL).inSingletonScope(),n(Kn).toService(ZH),n(HI).toService(Qa),vr(n,HI))});var hIt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let gL=class extends vs{constructor(){super(...arguments),this.type="rect3d",this.numberType=Y3}drawShape(n,t,e,i,r,s,a,o){var l;const u=Pt(n,s==null?void 0:s.theme).rect,{fill:h=u.fill,stroke:c=u.stroke,x1:d,y1:p,x:f,y:g,opacity:_=u.opacity,fillOpacity:v=u.fillOpacity,lineWidth:y=u.lineWidth,strokeOpacity:b=u.strokeOpacity,visible:S=u.visible}=n.attribute;let{width:A,height:w}=n.attribute;A=(A??d-f)||0,w=(w??p-g)||0;const C=(l=this.z)!==null&&l!==void 0?l:0,k=Z3(_,v,A,w,h),M=Q3(_,b,A,w),P=Sp(h),E=Lm(c,y);if(!n.valid||!S||!P&&!E||!(k||M||a||o))return;const{light:I,camera:D}=r.stage||{},N=n.findFace();if(h!==!1){t.setCommonStyle(n,n.attribute,e,i,u);let O=h;typeof O!="string"&&(O="black"),this.fill(e,i,C,N,O,t,I,a)}c!==!1&&(t.setStrokeStyle(n,n.attribute,e,i,u),this.stroke(e,i,C,N,t))}stroke(n,t,e,i,r){const s=i.vertices;i.edges.forEach(a=>{const o=s[a[0]],l={x:n+o[0],y:t+o[1],z:e+o[2]},u=s[a[1]],h={x:n+u[0],y:t+u[1],z:e+u[2]};r.beginPath(),r.moveTo(l.x,l.y,l.z),r.lineTo(h.x,h.y,h.z),r.stroke()})}fill(n,t,e,i,r,s,a,o){const l=Li.Get(r,Yr.Color255),u=i.vertices,h=u.map(d=>s.view(d[0],d[1],d[2])[2]),c=[];i.polygons.forEach((d,p)=>{c.push({faceIdx:p,polygon:d});const{polygon:f,normal:g}=d,_=h[f[0]],v=h[f[1]],y=h[f[2]],b=h[f[3]];d.ave_z=_+v+y+b}),c.sort((d,p)=>p.polygon.ave_z-d.polygon.ave_z),c.forEach(d=>{const{polygon:p,normal:f}=d.polygon,g=u[p[0]],_=u[p[1]],v=u[p[2]],y=u[p[3]],b={x:n+g[0],y:t+g[1],z:e+g[2]},S={x:n+_[0],y:t+_[1],z:e+_[2]},A={x:n+v[0],y:t+v[1],z:e+v[2]},w={x:n+y[0],y:t+y[1],z:e+y[2]};s.beginPath(),s.moveTo(b.x,b.y,b.z),s.lineTo(S.x,S.y,S.z),s.lineTo(A.x,A.y,A.z),s.lineTo(w.x,w.y,w.z),s.closePath(),o?o(s,null,null):(s.fillStyle=a?a.computeColor(f,l):r,s.fill())})}draw(n,t,e){const i=Pt(n).rect;this._draw(n,i,!1,e)}};gL=hIt([Vt()],gL);let x9=!1;const cIt=new se(n=>{x9||(x9=!0,n(nL).to(gL).inSingletonScope(),n(Kn).toService(nL))});var dIt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};function pIt(n,t,e,i,r,s,a){const{startAngle:o,endAngle:l}=n.getParsedAngle(),u=Ie(l-o),h=l>o;let c=!1;if(s<a){const d=s;s=a,a=d}if(s<=We)t.moveTo(e,i,r);else if(u>=be-We)t.moveTo(e+s*ni(o),i+s*He(o),r),t.arc(e,i,s,o,l,!h,r),a>We&&(t.moveTo(e+a*ni(l),i+a*He(l),r),t.arc(e,i,a,l,o,h,r));else{const{outerDeltaAngle:d,innerDeltaAngle:p,outerStartAngle:f,outerEndAngle:g,innerEndAngle:_,innerStartAngle:v}=n.getParsePadAngle(o,l),y=s*ni(f),b=s*He(f),S=a*ni(_),A=a*He(_);d<.001?c=!0:(t.moveTo(e+y,i+b,r),t.arc(e,i,s,f,g,!h,r)),!(a>We)||p<.001?(t.lineTo(e+S,i+A,r),c=!0):(t.lineTo(e+S,i+A,r),t.arc(e,i,a,_,v,h,r))}return t.closePath(),c}function fIt(n,t,e,i,r,s,a,o){const{startAngle:l,endAngle:u}=n.getParsedAngle(),h=Ie(u-l),c=u>l;let d=!1;if(a<=We)t.moveTo(e,i,r);else if(h>=be-We)t.moveTo(e+a*ni(l),i+a*He(l),r),t.arc(e,i,a,l,u,!c,r),t.lineTo(e+a*ni(u),i+a*He(u),s),t.arc(e,i,a,u,l,c,s);else{const{innerouterDeltaAngle:p,innerouterStartAngle:f,innerouterEndAngle:g}=o(l,u),_=a*ni(f),v=a*He(f),y=a*ni(g),b=a*He(g);p<.001?d=!0:(t.moveTo(e+_,i+v,r),t.arc(e,i,a,f,g,!c,r),t.lineTo(e+y,i+b,s),t.arc(e,i,a,g,f,c,s))}return t.closePath(),d}let mL=class extends vs{constructor(){super(...arguments),this.numberType=v1}drawShape(n,t,e,i,r,s,a,o){var l;const u=Pt(n,s==null?void 0:s.theme).arc,{fill:h=u.fill}=n.attribute,c=this.valid(n,u,a,o);if(!c)return;const{fVisible:d,sVisible:p,doFill:f,doStroke:g}=c,_=(l=this.z)!==null&&l!==void 0?l:0,{outerPadding:v=u.outerPadding,innerPadding:y=u.innerPadding,height:b=10}=n.attribute;let{outerRadius:S=u.outerRadius,innerRadius:A=u.innerRadius}=n.attribute;S+=v,A-=y;const w=Li.Get(h,Yr.Color255),{light:C}=r.stage||{},k=r.hack_pieFace,M={top:_,bottom:_+b},P={top:[0,1,0],bottom:[0,-1,0],outside:[1,0,-1],inside:[1,0,-1]};k==="bottom"||k==="top"?(t.beginPath(),pIt(n,t,e,i,M[k],S,A),t.setShadowBlendStyle&&t.setShadowBlendStyle(n,n.attribute,u),f&&(a?a(t,n.attribute,u):d&&(t.setCommonStyle(n,n.attribute,e,i,u),t.fillStyle=C?C.computeColor(P[k],w):h,t.fill())),g&&(o?o(t,n.attribute,u):p&&(t.setStrokeStyle(n,n.attribute,e,i,u),t.stroke()))):k!=="outside"&&k!=="inside"||(k==="inside"&&(t.save(),t.beginPath(),t.arc(e,i,A,0,be,!0,M.top),t.clip()),t.beginPath(),fIt(n,t,e,i,M.top,M.bottom,k==="outside"?S:A,(E,I)=>{const{outerDeltaAngle:D,innerDeltaAngle:N,outerStartAngle:O,outerEndAngle:L,innerEndAngle:H,innerStartAngle:j}=n.getParsePadAngle(E,I);return k==="outside"?{innerouterDeltaAngle:D,innerouterEndAngle:L,innerouterStartAngle:O}:{innerouterDeltaAngle:N,innerouterEndAngle:H,innerouterStartAngle:j}}),t.setShadowBlendStyle&&t.setShadowBlendStyle(n,n.attribute,u),f&&(a?a(t,n.attribute,u):d&&(t.setCommonStyle(n,n.attribute,e,i,u),t.fillStyle=C?C.computeColor(P[k],w):h,t.fill())),g&&(o?o(t,n.attribute,u):p&&(t.setStrokeStyle(n,n.attribute,e,i,u),t.stroke())),k==="inside"&&t.restore())}draw(n,t,e,i){const r=Pt(n,i==null?void 0:i.theme).arc;this._draw(n,r,!1,e,i)}};mL=dIt([Vt()],mL);let S9=!1;const gIt=new se(n=>{S9||(S9=!0,n(iL).to(mL).inSingletonScope(),n(Kn).toService(iL))});var mIt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let vL=class extends vs{constructor(){super(...arguments),this.type="pyramid3d",this.numberType=U3}drawShape(n,t,e,i,r,s,a,o){var l;const u=Pt(n,s==null?void 0:s.theme).polygon,{fill:h=u.fill,stroke:c=u.stroke,face:d=[!0,!0,!0,!0,!0,!0]}=n.attribute,p=(l=this.z)!==null&&l!==void 0?l:0;if(!this.valid(n,u,a,o))return;const{light:f,camera:g}=r.stage||{},_=n.findFace();if(h!==!1){t.setCommonStyle(n,n.attribute,e,i,u);let v=h;typeof v!="string"&&(v="black"),this.fill(e,i,p,_,d,v,t,f,g,n,u,a)}c!==!1&&(t.setStrokeStyle(n,n.attribute,e,i,u),this.stroke(e,i,p,_,t))}stroke(n,t,e,i,r){const s=i.vertices;i.edges.forEach(a=>{const o=s[a[0]],l=s[a[1]],u={x:n+o[0],y:t+o[1],z:e+o[2]},h={x:n+l[0],y:t+l[1],z:e+l[2]};r.beginPath(),r.moveTo(u.x,u.y,u.z),r.lineTo(h.x,h.y,h.z),r.stroke()})}fill(n,t,e,i,r,s,a,o,l,u,h,c){const d=Li.Get(s,Yr.Color255),p=i.vertices,f=p.map(_=>a.view(_[0],_[1],_[2])[2]),g=[];i.polygons.forEach((_,v)=>{if(!r[v])return;g.push({faceIdx:v,polygon:_});const{polygon:y,normal:b}=_,S=f[y[0]],A=f[y[1]],w=f[y[2]],C=f[y[3]];_.ave_z=S+A+w+C}),g.sort((_,v)=>v.polygon.ave_z-_.polygon.ave_z),g.forEach(_=>{const{polygon:v,normal:y}=_.polygon,b=p[v[0]],S=p[v[1]],A=p[v[2]],w=p[v[3]],C={x:n+b[0],y:t+b[1],z:e+b[2]},k={x:n+S[0],y:t+S[1],z:e+S[2]},M={x:n+A[0],y:t+A[1],z:e+A[2]},P={x:n+w[0],y:t+w[1],z:e+w[2]};a.beginPath(),a.moveTo(C.x,C.y,C.z),a.lineTo(k.x,k.y,k.z),a.lineTo(M.x,M.y,M.z),a.lineTo(P.x,P.y,P.z),a.closePath(),c?c(a,u.attribute,h):(a.fillStyle=o?o.computeColor(y,d):s,a.fill())})}draw(n,t,e){const i=Pt(n).polygon;this._draw(n,i,!1,e)}};vL=mIt([Vt()],vL);let A9=!1;const vIt=new se(n=>{A9||(A9=!0,n(aL).to(vL).inSingletonScope(),n(Kn).toService(aL))});function _It(){$t.RegisterGraphicCreator("arc",rF)}function yIt(){$t.RegisterGraphicCreator("arc3d",qJ)}function bIt(){$t.RegisterGraphicCreator("area",KJ)}function xIt(){$t.RegisterGraphicCreator("circle",rPt)}function SIt(){$t.RegisterGraphicCreator("glyph",UJ)}function AIt(){$t.RegisterGraphicCreator("group",K3)}function wIt(){$t.RegisterGraphicCreator("image",nF)}function CIt(){$t.RegisterGraphicCreator("line",iF)}function kIt(){$t.RegisterGraphicCreator("path",XJ)}function TIt(){$t.RegisterGraphicCreator("polygon",ZJ)}function MIt(){$t.RegisterGraphicCreator("pyramid3d",JJ)}function PIt(){$t.RegisterGraphicCreator("rect",ep)}function EIt(){$t.RegisterGraphicCreator("rect3d",GJ)}function OIt(){$t.RegisterGraphicCreator("richtext",YJ)}function RIt(){$t.RegisterGraphicCreator("symbol",P2)}function IIt(){$t.RegisterGraphicCreator("text",Ug)}function LIt(){$t.RegisterGraphicCreator("shadowRoot",_Et)}const wl=(n,t)=>(ft(Sw.warnHandler)&&Sw.warnHandler.call(null,n,t),ri.getInstance().warn(`[VChart warn]: ${n}`)),ip=(n,t,e)=>{{if(!ft(Sw.errorHandler))throw new Error(n);Sw.errorHandler.call(null,n,t)}},Sw={silent:!1,warnHandler:!1,errorHandler:!1},uQ=uF(),Th=uQ&&globalThis?globalThis.document:void 0;function ga(n){return(n==="desktop-browser"||n==="mobile-browser")&&uQ}function vc(n){return Ec(n)||n==="mobile-browser"}function Ec(n){return n.includes("miniApp")||n==="lynx"||n==="wx"}let bE=0;function wp(){return bE>=9999999&&(bE=0),bE++}function Zg(n){return n!=null&&n!==""&&(!!Mt(n)||+n==+n)}function DIt(n){if(st(n))return n;const t=+n;return st(t)?t:0}function Gf(n){return!(!n||n.length===0)&&!F(n[0])&&!F(n[0].dataId)&&ut(n[0].fields)}const Cp=(n,t,e)=>(n.fields=t||[],n.fname=e,n),BIt=n=>t=>le(t,n),Id=n=>{ri.getInstance().error(n)},FIt=n=>{const t=[],e=n.length;let i,r,s,a=null,o=0,l="";n+="";const u=()=>{t.push(l+n.substring(i,r)),l="",i=r+1};for(i=0,r=0;r<e;r+=1)if(s=n[r],s==="\\")l+=n.substring(i,r),l+=n.substring(++r,++r),i=r;else if(s===a)u(),a=null,o=-1;else{if(a)continue;i===o&&s==='"'||i===o&&s==="'"?(i=r+1,a=s):s!=="."||o?s==="["?(r>i&&u(),i=r+1,o=i):s==="]"&&(o||Id("Access path missing open bracket: "+n),o>0&&u(),o=0,i=r+1):r>i?u():i=r+1}return o&&Id("Access path missing closing bracket: "+n),a&&Id("Access path missing closing quote: "+n),r>i&&(r+=1,u()),t},w9=(n,t,e={})=>{if(ft(n))return n;const i=FIt(n),r=i.length===1?i[0]:n;return Cp((e&&e.get||BIt)(i),[r],r)},Vo=(n,t,e={})=>{if(ut(n)){const i=n.map(r=>w9(r,t,e));return r=>i.map(s=>s(r))}return w9(n,t,e)};Vo("id");const jIt=Cp(function(n){return n},[],"identity"),NIt=Cp(function(){return 0},[],"zero");Cp(function(){return 1},[],"one");Cp(function(){return!0},[],"true");Cp(function(){return!1},[],"false");Cp(function(){return{}},[],"emptyObject");const _L=(n,t)=>{const e=ft(t)?t:s=>s;let i,r;if(n&&n.length){const s=n.length;for(let a=0;a<s;a+=1){let o=e(n[a]);F(o)||!Mt(o=+o)||Number.isNaN(o)||(F(i)?(i=o,r=o):(i=Math.min(i,o),r=Math.max(r,o)))}return[i,r]}return[i,r]},L2=(n,t,e,i=!0)=>{if(t===e)return!0;if(F(t)||F(e))return F(t)&&F(e);if(!QR(t)&&!QR(e))return t===e;const r=ut(t)?t:t[n],s=ut(e)?e:e[n];return r===s||i!==!1&&(ut(s)?!(!ut(r)||s.length!==r.length||!s.every((a,o)=>a===r[o])):!!ae(s)&&!(!ae(r)||Object.keys(s).length!==Object.keys(r).length||!Object.keys(s).every(a=>L2(a,s,r))))},ca=(n,t)=>F(n)?t:It(n)?t*parseFloat(n)/100:n;function zIt(n,t,e,i){const r=i-n*n,s=Math.abs(r)<1e-24?0:(e-n*t)/r;return[t-s*n,s]}function hQ(n,t,e,i){let r,s,a=-1;n.forEach(o=>{r=t(o),s=e(o),!F(r)&&(r=+r)>=r&&!F(s)&&(s=+s)>=s&&i(r,s,++a)})}function HIt(n,t,e,i,r){let s=0,a=0;return hQ(n,t,e,(o,l)=>{const u=l-r(o),h=l-i;s+=u*u,a+=h*h}),1-s/a}function VIt(n,t=i=>i.x,e=i=>i.y){let i=0,r=0,s=0,a=0,o=0;hQ(n,t,e,(h,c)=>{++o,i+=(h-i)/o,r+=(c-r)/o,s+=(h*c-s)/o,a+=(h*h-a)/o});const l=zIt(i,r,s,a),u=h=>l[0]+l[1]*h;return{coef:l,predict:u,rSquared:HIt(n,t,e,r,u)}}function mr(n){return n==="horizontal"}function C9(n){return n==="vertical"}const k9=["x","y","dx","dy","scaleX","scaleY","angle","anchor","postMatrix","visible","clip","pickable","childrenPickable","zIndex","cursor"];class Nn extends Im{constructor(t,e){super(t),e!=null&&e.mode&&(this.mode=e.mode,this.setMode(e.mode)),e!=null&&e.skipDefault&&(this.skipDefault=!0),this.setTheme({common:{strokeBoundsBuffer:0}}),this.attribute=t,this.onSetStage(()=>{this.render(),this.bindEvents()})}setAttribute(t,e,i){No(this.attribute[t])&&No(e)&&!ft(this.attribute[t])&&!ft(e)?gt(this.attribute[t],e):this.attribute[t]=e,k9.includes(t)||this.render(),this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!i&&!this.needUpdateTag(t)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.onAttributeUpdate()}setAttributes(t,e){const i=Object.keys(t);this._mergeAttributes(t,i),i.every(r=>k9.includes(r))||this.render(),this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!e&&!this.needUpdateTags(i)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.onAttributeUpdate()}_mergeAttributes(t,e){F(e)&&(e=Object.keys(t));for(let i=0;i<e.length;i++){const r=e[i];!No(this.attribute[r])||ft(this.attribute[r])||ft(t[r])?this.attribute[r]=t[r]:gt(this.attribute[r],t[r])}}bindEvents(){}_getNodeId(t){var e;return`${(e=this.id)!==null&&e!==void 0?e:this._uid}-${this.name}-${t}`}_dispatchEvent(t,e){var i;const r=new v2(t,e);r.manager=(i=this.stage)===null||i===void 0?void 0:i.eventSystem.manager,this.dispatchEvent(r)}}const Hu=Symbol.for("MathPickerContribution"),T9=Symbol.for("MathArcPicker"),M9=Symbol.for("MathAreaPicker"),P9=Symbol.for("MathCirclePicker"),Aw=Symbol.for("MathImagePicker"),E9=Symbol.for("MathLinePicker"),O9=Symbol.for("MathPathPicker"),R9=Symbol.for("MathRectPicker"),I9=Symbol.for("MathSymbolPicker"),L9=Symbol.for("MathTextPicker"),D9=Symbol.for("MathPolygonPicker"),B9=Symbol.for("MathGlyphPicker"),F9=Symbol.for("CanvasArcPicker"),j9=Symbol.for("CanvasArc3dPicker"),N9=Symbol.for("CanvasAreaPicker"),z9=Symbol.for("CanvasCirclePicker"),H9=Symbol.for("CanvasImagePicker"),V9=Symbol.for("CanvasLinePicker"),W9=Symbol.for("CanvasPathPicker"),$9=Symbol.for("CanvasRectPicker"),G9=Symbol.for("CanvasRect3dPicker"),U9=Symbol.for("CanvasSymbolPicker"),Y9=Symbol.for("CanvasTextPicker"),X9=Symbol.for("CanvasPolygonPicker"),K9=Symbol.for("CanvasPyramid3dPicker"),q9=Symbol.for("CanvasRichTextPicker"),Z9=Symbol.for("CanvasGlyphPicker"),J9=Symbol.for("CanvasGroupPicker"),lr=Symbol.for("CanvasPickerContribution");class WIt{constructor(t){this.onPointerDown=e=>{const i=e.target,r=this.rootNode,s=i===r;if(i&&!s){let u=function(c){if(l||(c.type="dragstart",i==null||i.dispatchEvent(c),l=!0),c.type="drag",i==null||i.dispatchEvent(c),!s){i.attribute.pickable=!1;const d=(r==null?void 0:r.pick(c.global.x,c.global.y)).graphic;i.attribute.pickable=!0,o!==d&&(o&&(c.type="dragleave",c.target=o,o.dispatchEvent(c)),d&&(c.type="dragenter",c.target=d,d.dispatchEvent(c)),o=d,o&&(c.type="dragover",c.target=o,o.dispatchEvent(c)))}};var a=u;let o,l=!1;r==null||r.addEventListener("pointermove",u);const h=function(){l&&(o&&(e.type="drop",e.target=o,o.dispatchEvent(e)),e.type="dragend",i.dispatchEvent(e),l=!1),r==null||r.removeEventListener("pointermove",u)};i.addEventListener("pointerup",h,{once:!0}),i.addEventListener("pointerupoutside",h,{once:!0})}},this.rootNode=t,this.initEvents()}initEvents(){var t;(t=this.rootNode)===null||t===void 0||t.addEventListener("pointerdown",this.onPointerDown)}removeEvents(){var t;(t=this.rootNode)===null||t===void 0||t.removeEventListener("pointerdown",this.onPointerDown)}release(){this.removeEvents(),this.rootNode=null}}const Q9=(n,t)=>{const e=t.x-n.x,i=t.y-n.y;return Math.abs(e)>Math.abs(i)?e>0?"right":"left":i>0?"down":"up"},Ox=(n,t)=>{const e=Math.abs(t.x-n.x),i=Math.abs(t.y-n.y);return Math.sqrt(e*e+i*i)},$It=n=>{const t=n.length;if(t===1)return{x:Math.round(n[0].x),y:Math.round(n[0].y)};let e=0,i=0,r=0;for(;r<t;)e+=n[r].x,i+=n[r].y,r++;return{x:Math.round(e/t),y:Math.round(i/t)}};class GIt extends xp{constructor(t,e={}){var i,r,s,a,o,l,u,h,c,d;super(),this.cachedEvents=[],this.startPoints=[],this.processEvent={},this.throttleTimer=0,this.emitThrottles=[],this.lastTapTarget=null,this.onStart=p=>{this.reset(),this.startTime=yd.now();const{cachedEvents:f,startPoints:g}=this;p&&f.push(p.clone()),g.length=f.length;for(let _=0;_<f.length;_++){const{x:v,y}=f[_],b={x:v,y};g[_]=b}if(g.length!==1)this.startDistance=Ox(g[0],g[1]),this.center=$It([g[0],g[1]]);else{const _=f[0];this.pressTimeout=setTimeout(()=>{_.direction="none",_.deltaX=0,_.deltaY=0,_.points=g,this.triggerStartEvent("press",_),this.triggerEvent("press",_),this.eventType="press",this.direction="none"},this.config.press.time)}},this.onMove=p=>{this.clearPressTimeout();const{startPoints:f,cachedEvents:g}=this;if(!f.length)return;const _=p.clone(),{x:v,y,pointerId:b}=_;for(let M=0,P=g.length;M<P;M++)if(b===g[M].pointerId){g[M]=_;break}const S={x:v,y},A=g.map(M=>({x:M.x,y:M.y})),w=yd.now();if(this.prevMoveTime=this.lastMoveTime,this.prevMovePoint=this.lastMovePoint,this.lastMoveTime=w,this.lastMovePoint=S,f.length===1){const M=f[0],P=v-M.x,E=y-M.y,I=this.direction||Q9(M,S);this.direction=I;const D=this.getEventType(S);return _.direction=I,_.deltaX=P,_.deltaY=E,_.points=A,this.triggerStartEvent(D,_),void this.triggerEvent(D,_)}const{startDistance:C}=this,k=Ox(A[0],A[1]);_.scale=k/C,_.center=this.center,_.points=A,this.triggerStartEvent("pinch",_),this.triggerEvent("pinch",_)},this.onEnd=p=>{const f=p.clone(),{cachedEvents:g,startPoints:_}=this,v=g.map(y=>({x:y.x,y:y.y}));if(f.points=v,this.triggerEndEvent(f),g.length===1){const y=yd.now(),b=this.lastMoveTime;if(y-b<100){const S=b-(this.prevMoveTime||this.startTime);if(S>0){const A=this.prevMovePoint||_[0],w=this.lastMovePoint||_[0],C=Ox(A,w),k=C/S;k>this.config.swipe.velocity&&C>this.config.swipe.threshold&&(f.velocity=k,f.direction=Q9(A,w),this.triggerEvent("swipe",f))}}y-this.lastTapTime<this.config.tap.interval&&p.target===this.lastTapTarget?this.tapCount++:this.tapCount=1,this.lastTapTime=y,this.lastTapTarget=p.target,this.tapCount===1?this.triggerEvent("tap",f):this.tapCount===2&&(this.triggerEvent("doubletap",f),this.tapCount=0)}for(let y=0,b=g.length;y<b;y++)if(g[y].pointerId===f.pointerId){g.splice(y,1),_.splice(y,1);break}this.reset(),g.length>0&&this.onStart()},this.element=t,this.tapCount=0,this.lastTapTime=0,this.config={press:{time:(r=(i=e==null?void 0:e.press)===null||i===void 0?void 0:i.time)!==null&&r!==void 0?r:251,threshold:(a=(s=e==null?void 0:e.press)===null||s===void 0?void 0:s.threshold)!==null&&a!==void 0?a:9},swipe:{threshold:(l=(o=e==null?void 0:e.swipe)===null||o===void 0?void 0:o.threshold)!==null&&l!==void 0?l:10,velocity:(h=(u=e==null?void 0:e.swipe)===null||u===void 0?void 0:u.velocity)!==null&&h!==void 0?h:.3},tap:{interval:(d=(c=e==null?void 0:e.tap)===null||c===void 0?void 0:c.interval)!==null&&d!==void 0?d:300}},this.initEvents()}initEvents(){const{element:t}=this;t&&(t.addEventListener("pointerdown",this.onStart),t.addEventListener("pointermove",this.onMove),t.addEventListener("pointerup",this.onEnd),t.addEventListener("pointerupoutside",this.onEnd))}removeEvents(){const{element:t}=this;t&&(t.removeEventListener("pointerdown",this.onStart),t.removeEventListener("pointermove",this.onMove),t.removeEventListener("pointerup",this.onEnd),t.removeEventListener("pointerupoutside",this.onEnd))}release(){this.removeEvents(),this.element=null}getEventType(t){const{eventType:e,startTime:i,startPoints:r}=this;if(e)return e;let s;return s=yd.now()-i>this.config.press.time&&Ox(r[0],t)<this.config.press.threshold?"press":"pan",this.eventType=s,s}enable(t){this.processEvent[t]=!0}isProcess(t){return this.processEvent[t]}pushEvent(t,e){const{emitThrottles:i}=this,r={type:t,ev:e};for(let s=0,a=i.length;s<a;s++)if(i[s].type===t)return void i.splice(s,1,r);i.push(r)}clearPressTimeout(){this.pressTimeout&&(clearTimeout(this.pressTimeout),this.pressTimeout=null)}reset(){this.clearPressTimeout(),this.startTime=0,this.startDistance=0,this.direction=null,this.eventType=null,this.prevMoveTime=0,this.prevMovePoint=null,this.lastMoveTime=0,this.lastMovePoint=null}triggerEvent(t,e){this.pushEvent(t,e);const{throttleTimer:i,emitThrottles:r}=this;i||(this.throttleTimer=wt.global.getRequestAnimationFrame()(()=>{for(let s=0,a=r.length;s<a;s++){const{type:o,ev:l}=r[s];this.emitEvent(o,l)}this.throttleTimer=0,this.emitThrottles.length=0}))}triggerStartEvent(t,e){this.isProcess(t)||(this.enable(t),this.triggerEvent(`${t}start`,e))}triggerEndEvent(t){const e=this.processEvent;Object.keys(e).forEach(i=>{this.triggerEvent(`${i}end`,t),i==="press"&&this.triggerEvent(`${i}up`,t),delete e[i]})}emitEvent(t,e){const i=this.element._events[gJ];if(i)if("fn"in i)i.fn.call(i.context,e,t);else for(let r=0,s=i.length;r<s&&!e.propagationImmediatelyStopped;r++)i[r].fn.call(i[r].context,e,t);this.emit(t,e)}}var UIt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},YIt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};const Se=[0,0,0],XIt=(n,t,e,i,r,s,a,o)=>{if(o)for(;e>t;)e-=be;else for(;e<t;)e+=be;const l=Qe/3*(e>t?1:-1);let u=t,h=u;for(;h!==e;){h=l>0?Math.min(h+l,e):Math.max(h+l,e);const c=Math.abs(h-u),d=4*Math.tan(c/4)/3,p=h<u?-1:1,f=Math.cos(u),g=Math.sin(u),_=Math.cos(h),v=Math.sin(h),y=f*s+i,b=g*a+r,S=_*s+i,A=v*a+r,w=s*d*p,C=a*d*p;n.push([y-w*g,b+C*f,S+w*v,A-C*_,S,A]),u=h}};let pg=class{set fillStyle(n){this.nativeContext.fillStyle=n}get fillStyle(){return this.nativeContext.fillStyle}set font(n){this.nativeContext.font=n}get font(){return this.nativeContext.font}set globalAlpha(n){this.nativeContext.globalAlpha=n*this.baseGlobalAlpha}get globalAlpha(){return this.nativeContext.globalAlpha}set lineCap(n){this.nativeContext.lineCap=n}get lineCap(){return this.nativeContext.lineCap}set lineDashOffset(n){this.nativeContext.lineDashOffset=n}get lineDashOffset(){return this.nativeContext.lineDashOffset}set lineJoin(n){this.nativeContext.lineJoin=n}get lineJoin(){return this.nativeContext.lineJoin}set lineWidth(n){this.nativeContext.lineWidth=n}get lineWidth(){return this.nativeContext.lineWidth}set miterLimit(n){this.nativeContext.miterLimit=n}get miterLimit(){return this.nativeContext.miterLimit}set shadowBlur(n){this.nativeContext.shadowBlur=n}get shadowBlur(){return this.nativeContext.shadowBlur}set shadowColor(n){this.nativeContext.shadowColor=n}get shadowColor(){return this.nativeContext.shadowColor}set shadowOffsetX(n){this.nativeContext.shadowOffsetX=n}get shadowOffsetX(){return this.nativeContext.shadowOffsetX}set shadowOffsetY(n){this.nativeContext.shadowOffsetY=n}get shadowOffsetY(){return this.nativeContext.shadowOffsetY}set strokeStyle(n){this.nativeContext.strokeStyle=n}get strokeStyle(){return this.nativeContext.strokeStyle}set textAlign(n){this.nativeContext.textAlign=n}get textAlign(){return this.nativeContext.textAlign}set textBaseline(n){this.nativeContext.textBaseline=n}get textBaseline(){return this.nativeContext.textBaseline}get inuse(){return!!this._inuse}set inuse(n){n!==!!this._inuse&&(this._inuse=n,n?(this.nativeContext.save(),this.reset()):this.nativeContext.restore())}constructor(n,t){this.fillAttributes=Object.assign(Object.assign({},aJ),{opacity:1}),this.strokeAttributes=Object.assign(Object.assign({},oJ),{opacity:1}),this.textAttributes=Object.assign(Object.assign({},Sl),{opacity:1}),this._clearShadowStyle=!1,this._clearFilterStyle=!1,this._clearGlobalCompositeOperationStyle=!1;const e=n.nativeCanvas.getContext("2d");if(!e)throw new Error("发生错误，获取2d上下文失败");this.nativeContext=e,this.canvas=n,this.matrix=new Wi(1,0,0,1,0,0),this.stack=[],this.dpr=t,this.applyedMatrix=new Wi(1,0,0,1,0,0),this._clearMatrix=new Wi(1,0,0,1,0,0),this.baseGlobalAlpha=1}reset(){this.stack.length&&ri.getInstance().warn("可能存在bug，matrix没有清空"),this.matrix.setValue(1,0,0,1,0,0),this.applyedMatrix=new Wi(1,0,0,1,0,0),this.stack.length=0,this.nativeContext.setTransform(1,0,0,1,0,0)}getCanvas(){return this.canvas}getContext(){return this.nativeContext}setTransformForCurrent(n=!1){!n&&this.applyedMatrix.equalToMatrix(this.matrix)||(this.applyedMatrix.setValue(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f),this.nativeContext.setTransform(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f))}get currentMatrix(){return this.matrix}cloneMatrix(n){return Ua.allocateByObj(n)}clear(){this.save(),this.resetTransform(),this.nativeContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.restore()}restore(){this.nativeContext.restore(),this.stack.length>0&&(Ua.free(this.matrix),this.matrix=this.stack.pop(),this.setTransformForCurrent(!0))}highPerformanceRestore(){this.stack.length>0&&(Ua.free(this.matrix),this.matrix=this.stack.pop())}rotate(n,t=!0){this.matrix.rotate(n),t&&this.setTransformForCurrent()}save(){const n=this.cloneMatrix(this.matrix);this.stack.push(n),this.nativeContext.save()}highPerformanceSave(){const n=this.cloneMatrix(this.matrix);this.stack.push(n)}scale(n,t,e=!0){this.matrix.scale(n,t),e&&this.setTransformForCurrent()}setScale(n,t,e=!0){this.matrix.setScale(n,t),e&&this.setTransformForCurrent()}scalePoint(n,t,e,i,r=!0){this.translate(e,i,!1),this.scale(n,t,!1),this.translate(-e,-i,!1),r&&this.setTransformForCurrent()}setTransform(n,t,e,i,r,s,a=!0,o=this.dpr){this.matrix.setValue(o*n,o*t,o*e,o*i,o*r,o*s),a&&this.setTransformForCurrent()}setTransformFromMatrix(n,t=!0,e=this.dpr){this.matrix.setValue(n.a*e,n.b*e,n.c*e,n.d*e,n.e*e,n.f*e),t&&this.setTransformForCurrent()}resetTransform(n=!0,t=this.dpr){this.setTransform(t,0,0,t,0,0),n&&this.setTransformForCurrent()}transform(n,t,e,i,r,s,a=!0){this.matrix.multiply(n,t,e,i,r,s),a&&this.setTransformForCurrent()}transformFromMatrix(n,t){this.matrix.multiply(n.a,n.b,n.c,n.d,n.e,n.f),t&&this.setTransformForCurrent()}translate(n,t,e=!0){this.matrix.translate(n,t),e&&this.setTransformForCurrent()}rotateDegrees(n,t=!0){const e=n*Math.PI/180;this.rotate(e,t)}rotateAbout(n,t,e,i=!0){this.translate(t,e,!1),this.rotate(n,!1),this.translate(-t,-e,!1),i&&this.setTransformForCurrent()}rotateDegreesAbout(n,t,e,i=!0){this.translate(t,e,!1),this.rotateDegrees(n,!1),this.translate(-t,-e,!1),i&&this.setTransformForCurrent()}beginPath(){this.disableBeginPath||this.nativeContext.beginPath()}clip(n,t){n?typeof n=="string"?this.nativeContext.clip(n):this.nativeContext.clip(n,t):this.nativeContext.clip()}arc(n,t,e,i,r,s,a){if(a=a||0,this.camera){const o=[];XIt(o,i,r,n,t,e,e,s);for(let l=0;l<o.length;++l){const u=o[l];this.bezierCurveTo(u[0],u[1],u[2],u[3],u[4],u[5],a)}}else this.nativeContext.arc(n,t,e,i,r,s)}arcTo(n,t,e,i,r){this.nativeContext.arcTo(n,t,e,i,r)}bezierCurveTo(n,t,e,i,r,s,a){if(a=a||0,this.camera){let o=a,l=a;this.modelMatrix&&(ra(Se,[n,t,a],this.modelMatrix),n=Se[0],t=Se[1],o=Se[2],ra(Se,[e,i,a],this.modelMatrix),e=Se[0],i=Se[1],l=Se[2],ra(Se,[r,s,a],this.modelMatrix),r=Se[0],s=Se[1],a=Se[2]);let u=this.camera.vp(r,s,a);r=u.x,s=u.y,u=this.camera.vp(n,t,o),n=u.x,t=u.y,u=this.camera.vp(e,i,l),e=u.x,i=u.y}this.nativeContext.bezierCurveTo(n,t,e,i,r,s)}closePath(){this.nativeContext.closePath()}ellipse(n,t,e,i,r,s,a,o){o==null?this.nativeContext.ellipse(n,t,e,i,r,s,a):this.nativeContext.ellipse(n,t,e,i,r,s,a,o)}lineTo(n,t,e){if(e=e||0,this.camera){this.modelMatrix&&(ra(Se,[n,t,e],this.modelMatrix),n=Se[0],t=Se[1],e=Se[2]);const i=this.camera.vp(n,t,e);n=i.x,t=i.y}this.nativeContext.lineTo(n,t)}moveTo(n,t,e){if(e=e||0,this.camera){this.modelMatrix&&(ra(Se,[n,t,e],this.modelMatrix),n=Se[0],t=Se[1],e=Se[2]);const i=this.camera.vp(n,t,e);n=i.x,t=i.y}this.nativeContext.moveTo(n,t)}quadraticCurveTo(n,t,e,i,r){if(r=r||0,this.camera){let s=r;this.modelMatrix&&(ra(Se,[n,t,r],this.modelMatrix),n=Se[0],t=Se[1],s=Se[2],ra(Se,[e,i,r],this.modelMatrix),e=Se[0],i=Se[1],r=Se[2]);let a=this.camera.vp(e,i,r);e=a.x,i=a.y,a=this.camera.vp(n,t,s),n=a.x,t=a.y}this.nativeContext.quadraticCurveTo(n,t,e,i)}rect(n,t,e,i,r){r=r||0,this.camera?(this.moveTo(n,t,r),this.lineTo(n+e,t,r),this.lineTo(n+e,t+i,r),this.lineTo(n,t+i,r),this.closePath()):this.nativeContext.rect(n,t,e,i)}createImageData(){const n=arguments;return n.length===2?this.nativeContext.createImageData(n[0],n[1]):n.length===1?this.nativeContext.createImageData(n[0]):null}createLinearGradient(n,t,e,i){return this.nativeContext.createLinearGradient(n,t,e,i)}createPattern(n,t){return n.width===0||n.height===0?null:this.nativeContext.createPattern(n,t)}createRadialGradient(n,t,e,i,r,s){return this.nativeContext.createRadialGradient(n,t,e,i,r,s)}createConicGradient(n,t,e,i){let r,s=!1;const a=this;return{stops:[],addColorStop(o,l){this.stops.push([o,l]),s=!0},GetPattern(o,l,u){return s&&(u||(u=i-e),r=nPt(a,this.stops,n,t,u,e,i,o,l),s=!1),r}}}fill(n,t){this.disableFill||(n?this.nativeContext.fill(n):this.nativeContext.fill())}fillRect(n,t,e,i){this.nativeContext.fillRect(n,t,e,i)}clearRect(n,t,e,i){this.nativeContext.clearRect(n,t,e,i)}project(n,t,e){if(e=e||0,this.camera){this.modelMatrix&&(ra(Se,[n,t,e],this.modelMatrix),n=Se[0],t=Se[1],e=Se[2]);const i=this.camera.vp(n,t,e);n=i.x,t=i.y}return{x:n,y:t}}view(n,t,e){return e=e||0,this.camera?(this.modelMatrix&&(ra(Se,[n,t,e],this.modelMatrix),n=Se[0],t=Se[1],e=Se[2]),this.camera.view(n,t,e)):[n,t,e]}fillText(n,t,e,i){if(i=i||0,this.camera){this.modelMatrix&&(ra(Se,[t,e,i],this.modelMatrix),t=Se[0],e=Se[1],i=Se[2]);const r=this.camera.vp(t,e,i);t=r.x,e=r.y}this.nativeContext.fillText(n,t,e)}getImageData(n,t,e,i){return this.nativeContext.getImageData(n,t,e,i)}getLineDash(){return this.nativeContext.getLineDash()}isPointInPath(n,t){return this.nativeContext.isPointInPath(n,t)}isPointInStroke(n,t){return this.nativeContext.isPointInStroke(n,t)}measureText(n,t=wt.global.measureTextMethod){var e,i;if(!t||t==="native")return this.nativeContext.measureText(n);this.mathTextMeasure||(this.mathTextMeasure=wt.graphicUtil.createTextMeasureInstance({},{},()=>this.canvas.nativeCanvas));const r=(e=this.fontFamily)!==null&&e!==void 0?e:Sl.fontFamily,s=(i=this.fontSize)!==null&&i!==void 0?i:Sl.fontSize;return this.mathTextMeasure.textSpec.fontFamily===r&&this.mathTextMeasure.textSpec.fontSize===s||(this.mathTextMeasure.textSpec.fontFamily=r,this.mathTextMeasure.textSpec.fontSize=s,this.mathTextMeasure._numberCharSize=null,this.mathTextMeasure._fullCharSize=null,this.mathTextMeasure._letterCharSize=null,this.mathTextMeasure._specialCharSizeMap={}),this.mathTextMeasure.measure(n,t)}putImageData(n,t,e){this.nativeContext.putImageData(n,t,e)}setLineDash(n){const t=arguments,e=this.nativeContext;this.nativeContext.setLineDash?t[0]&&e.setLineDash(t[0]):"mozDash"in e?e.mozDash=t[0]:"webkitLineDash"in e&&(e.webkitLineDash=t[0])}stroke(n){this.disableStroke||(n?this.nativeContext.stroke(n):this.nativeContext.stroke())}strokeRect(n,t,e,i){this.nativeContext.strokeRect(n,t,e,i)}strokeText(n,t,e,i){if(i=i||0,this.camera){this.modelMatrix&&(ra(Se,[t,e,i],this.modelMatrix),t=Se[0],e=Se[1],i=Se[2]);const r=this.camera.vp(t,e,i);t=r.x,e=r.y}this.nativeContext.strokeText(n,t,e)}drawImage(){const n=this.nativeContext,t=arguments;t.length===3?n.drawImage(t[0],t[1],t[2]):t.length===5?n.drawImage(t[0],t[1],t[2],t[3],t[4]):t.length===9&&n.drawImage(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}setCommonStyle(n,t,e,i,r){if(Array.isArray(r)){if(r.length<=1)return this._setCommonStyle(n,t,e,i,r[0]);const s=Object.create(r[0]);return r.forEach((a,o)=>{o!==0&&Object.assign(s,a)}),this._setCommonStyle(n,t,e,i,s)}return this._setCommonStyle(n,t,e,i,r)}_setCommonStyle(n,t,e,i,r){const s=this.nativeContext;r||(r=this.fillAttributes);const{fillOpacity:a=r.fillOpacity,opacity:o=r.opacity,fill:l=r.fill}=t;a>1e-12&&o>1e-12?(s.globalAlpha=a*o*this.baseGlobalAlpha,s.fillStyle=ZI(this,l,n,e,i)):s.globalAlpha=a*o*this.baseGlobalAlpha}setShadowBlendStyle(n,t,e){if(Array.isArray(e)){if(e.length<=1)return this._setShadowBlendStyle(n,e[0]);const i=Object.create(e[0]);return e.forEach((r,s)=>{s!==0&&Object.assign(i,r)}),this._setShadowBlendStyle(n,t,i)}return this._setShadowBlendStyle(n,t,e)}_setShadowBlendStyle(n,t,e){const i=this.nativeContext;e||(e=this.fillAttributes);const{opacity:r=e.opacity,shadowBlur:s=e.shadowBlur,shadowColor:a=e.shadowColor,shadowOffsetX:o=e.shadowOffsetX,shadowOffsetY:l=e.shadowOffsetY,blur:u=e.blur,globalCompositeOperation:h=e.globalCompositeOperation}=t;r<=1e-12||(s||o||l?(i.shadowBlur=s*this.dpr,i.shadowColor=a,i.shadowOffsetX=o*this.dpr,i.shadowOffsetY=l*this.dpr,this._clearShadowStyle=!0):this._clearShadowStyle&&(i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0),u?(i.filter=`blur(${u}px)`,this._clearFilterStyle=!0):this._clearFilterStyle&&(i.filter="blur(0px)",this._clearFilterStyle=!1),h?(i.globalCompositeOperation=h,this._clearGlobalCompositeOperationStyle=!0):this._clearGlobalCompositeOperationStyle&&(i.globalCompositeOperation="source-over",this._clearGlobalCompositeOperationStyle=!1))}setStrokeStyle(n,t,e,i,r){if(Array.isArray(r)){if(r.length<=1)return this._setStrokeStyle(n,t,e,i,r[0]);const s=Object.create(r[0]);return r.forEach((a,o)=>{o!==0&&Object.assign(s,a)}),this._setStrokeStyle(n,t,e,i,s)}return this._setStrokeStyle(n,t,e,i,r)}_setStrokeStyle(n,t,e,i,r){const s=this.nativeContext;r||(r=this.strokeAttributes);const{strokeOpacity:a=r.strokeOpacity,opacity:o=r.opacity}=t;if(a>1e-12&&o>1e-12){const{lineWidth:l=r.lineWidth,stroke:u=r.stroke,lineJoin:h=r.lineJoin,lineDash:c=r.lineDash,lineCap:d=r.lineCap,miterLimit:p=r.miterLimit}=t;s.globalAlpha=a*o*this.baseGlobalAlpha,s.lineWidth=xr(this,l,this.dpr),s.strokeStyle=ZI(this,u,n,e,i),s.lineJoin=h,c&&s.setLineDash(c),s.lineCap=d,s.miterLimit=p}}setTextStyleWithoutAlignBaseline(n,t,e){const i=this.nativeContext;t||(t=this.textAttributes);const{scaleIn3d:r=t.scaleIn3d}=n;n.font?i.font=n.font:i.font=UI(n,t,r&&this.camera&&this.camera.getProjectionScale(e));const{fontFamily:s=t.fontFamily,fontSize:a=t.fontSize}=n;this.fontFamily=s,this.fontSize=a,i.textAlign="left",i.textBaseline="alphabetic"}setTextStyle(n,t,e){var i,r;const s=this.nativeContext;t||(t=this.textAttributes),n.font?s.font=n.font:s.font=UI(n,t,this.camera&&this.camera.getProjectionScale(e));const{fontFamily:a=t.fontFamily,fontSize:o=t.fontSize}=n;this.fontFamily=a,this.fontSize=o,s.textAlign=(i=n.textAlign)!==null&&i!==void 0?i:t.textAlign,s.textBaseline=(r=n.textBaseline)!==null&&r!==void 0?r:t.textBaseline}draw(){}clearMatrix(n=!0,t=this.dpr){this.setTransformFromMatrix(this._clearMatrix,n,t)}setClearMatrix(n,t,e,i,r,s){this._clearMatrix.setValue(n,t,e,i,r,s)}onlyTranslate(n=this.dpr){return this.matrix.a===n&&this.matrix.b===0&&this.matrix.c===0&&this.matrix.d===n}release(...n){this.stack.forEach(t=>Ua.free(t)),this.stack.length=0}};pg.env="browser",pg=UIt([Vt(),YIt("design:paramtypes",[Object,Number])],pg);var KIt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},qIt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};let fg=class extends P0{constructor(n){super(n)}init(n){const{container:t}=n;if(typeof t=="string"){const e=wt.global.getElementById(t);e&&(this._container=e)}else this._container=t;this._context=new pg(this,this._dpr),this.initStyle()}initStyle(){if(!this.controled)return;const{nativeCanvas:n}=this;n.width=this._pixelWidth,n.height=this._pixelHeight,!n.style||this.setCanvasStyle(n,this._x,this._y,this._displayWidth,this._displayHeight),this._container&&this._container.appendChild(n),this.visiable||this.hide()}hide(){this._nativeCanvas&&(this._nativeCanvas.style.display="none")}show(){this._nativeCanvas&&(this._nativeCanvas.style.display="block")}applyPosition(){const n=this._nativeCanvas;n.style.position="absolute",n.style.top=`${this._y}px`,n.style.left=`${this._x}px`}resetStyle(n){if(!this.controled)return;const{width:t=this._displayWidth,height:e=this._displayHeight,dpr:i=this._dpr,x:r=this._x,y:s=this._y}=n,{nativeCanvas:a}=this;a.width=t*i,a.height=e*i,!a.style||this.setCanvasStyle(a,r,s,t,e),n.id&&(a.id=n.id),this.visiable||this.hide()}setCanvasStyle(n,t,e,i,r){this.controled&&(n.style.width=`${i}px`,n.style.height=`${r}px`)}toDataURL(n,t){return n==="image/jpeg"?this._nativeCanvas.toDataURL(n,t):n==="image/png"?this._nativeCanvas.toDataURL(n):this._nativeCanvas.toDataURL(n,t)}resize(n,t){this.controled&&(this._pixelWidth=n*this._dpr,this._pixelHeight=t*this._dpr,this._displayWidth=n,this._displayHeight=t,this._nativeCanvas.style&&(this._nativeCanvas.style.width=`${n}px`,this._nativeCanvas.style.height=`${t}px`),this._nativeCanvas.width=this._pixelWidth,this._nativeCanvas.height=this._pixelHeight,this._context.dpr=this._dpr)}};fg.env="browser",fg=KIt([Vt(),qIt("design:paramtypes",[Object])],fg);function cQ(n,t){return new se(e=>{e(cJ).toDynamicValue(()=>i=>new n(i)).whenTargetNamed(n.env),e(HTt).toDynamicValue(()=>(i,r)=>new t(i,r)).whenTargetNamed(t.env)})}const ZIt=cQ(fg,pg);var JIt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},QIt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},kv=function(n,t){return function(e,i){t(e,i,n)}};let Uf=class extends cL{constructor(n,t,e){super(e),this.contributions=n,this.drawContribution=t,this.pickItemInterceptorContributions=e,this.global.hooks.onSetEnv.tap("canvas-picker-service",(i,r,s)=>{this.configure(s,r)}),this.configure(this.global,this.global.env),this.pickerMap=new Map,this.init()}init(){this.contributions.getContributions().forEach(n=>{this.pickerMap.set(n.numberType,n)}),super._init()}configure(n,t){this.pickCanvas=Gg.shareCanvas(),this.pickContext=this.pickCanvas.getContext("2d")}pickItem(n,t,e,i){if(n.attribute.pickable===!1)return null;if(this.InterceptorContributions.length)for(let l=0;l<this.InterceptorContributions.length;l++){const u=this.InterceptorContributions[l];if(u.beforePickItem){const h=u.beforePickItem(n,this,t,i,{parentMatrix:e});if(h)return h}}const r=this.pickerMap.get(n.numberType);if(!r)return null;const s=r.contains(n,t,i),a=s?n:null,o={graphic:a,params:s};if(a)return o;if(this.InterceptorContributions.length)for(let l=0;l<this.InterceptorContributions.length;l++){const u=this.InterceptorContributions[l];if(u.afterPickItem){const h=u.afterPickItem(n,this,t,i,{parentMatrix:e});if(h)return h}}return o}};Uf=JIt([Vt(),kv(0,fe(Rn)),kv(0,Xn(lr)),kv(1,fe(aF)),kv(2,fe(Rn)),kv(2,Xn(Wf)),QIt("design:paramtypes",[Object,Object,Object])],Uf);var tLt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let yL=class{constructor(){this.type="group",this.numberType=G3}contains(n,t,e){return!1}};yL=tLt([Vt()],yL);const ww=new se((n,t,e,i)=>{ww.__vloaded||(ww.__vloaded=!0,n(J9).to(yL).inSingletonScope(),n(lr).toService(J9),vr(n,lr))});ww.__vloaded=!1;const eLt=new se((n,t,e,i)=>{e(Uf)||n(Uf).toSelf().inSingletonScope(),e(dg)?i(dg).toService(Uf):n(dg).toService(Uf)});function iLt(n){n.load(ww),n.load(eLt)}var Jv,nLt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},rLt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};let _h=Jv=class extends xw{get container(){return this.canvas.nativeCanvas.parentElement}static GenerateCanvasId(){return`${Jv.idprefix}_${Jv.prefix_count++}`}constructor(){super(),this.type="browser",this._canvasIsIntersecting=!0,this.global=wt.global,this.viewBox=new Ai,this.modelMatrix=new Wi(1,0,0,1,0,0)}getTitle(){return this.canvas.id&&this.canvas.id.toString()}getWH(){return{width:this.canvas.width/(this.canvas.dpr||1),height:this.canvas.height/(this.canvas.dpr||1)}}getXY(){return this.canvas.nativeCanvas.getBoundingClientRect()}createWindow(n){n.canvas?this.createWindowByCanvas(n):this.createWindowByConfig(n),this.postInit()}postInit(){if(this.global.optimizeVisible)try{this.observerCanvas()}catch{console.error("发生错误，该环境不存在IntersectionObserver")}}isElementVisible(n){const t=n.getBoundingClientRect(),e=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight;return!(t.right<0||t.bottom<0||t.left>e||t.top>i)}observerCanvas(){this._canvasIsIntersecting=this.isElementVisible(this.canvas.nativeCanvas);const n=new IntersectionObserver((t,e)=>{t.forEach(i=>{this._canvasIsIntersecting!==i.isIntersecting?(this._canvasIsIntersecting=i.isIntersecting,this._onVisibleChangeCb&&this._onVisibleChangeCb(i.isIntersecting)):this._canvasIsIntersecting=i.isIntersecting})});n&&n.observe(this.canvas.nativeCanvas)}createWindowByConfig(n){const t=this.global.createCanvas({width:n.width,height:n.height});let e;if(e=typeof n.container=="string"?this.global.getElementById(n.container):n.container?n.container:this.global.getRootElement(),!e)throw new Error("发生错误，containerId可能传入有误");n.offscreen?e=null:e.appendChild(t);const i={width:n.width,height:n.height,dpr:n.dpr,nativeCanvas:t,container:e,id:Jv.GenerateCanvasId(),canvasControled:!0};this.canvas=new fg(i)}createWindowByCanvas(n){var t;let e;if(typeof n.canvas=="string"){if(e=this.global.getElementById(n.canvas),!e)throw new Error("canvasId 参数不正确，请确认canvas存在并插入dom")}else e=n.canvas;if(!e)throw new Error("发生错误，传入的canvas不正确");let i=n.width,r=n.height;if(i==null||r==null||!n.canvasControled){const a=e.getBoundingClientRect();i=a.width,r=a.height}let s=n.dpr;s==null&&(s=(t=e.getContext("2d").pixelRatio)!==null&&t!==void 0?t:e.width/i),this.canvas=new fg({width:i,height:r,dpr:s,nativeCanvas:e,canvasControled:n.canvasControled})}releaseWindow(){this.canvas.release()}resizeWindow(n,t){this.canvas.resize(n,t)}setDpr(n){this.canvas.dpr=n}getContext(){return this.canvas.getContext()}getNativeHandler(){return this.canvas}getDpr(){return this.canvas.dpr}addEventListener(n,t,e){return this.canvas.nativeCanvas.addEventListener(n,t,e)}removeEventListener(n,t,e){return this.canvas.nativeCanvas.removeEventListener(n,t,e)}dispatchEvent(n){return this.canvas.nativeCanvas.dispatchEvent(n)}getStyle(){var n;return(n=this.canvas.nativeCanvas.style)!==null&&n!==void 0?n:{}}setStyle(n){this.canvas.nativeCanvas.style=n}getBoundingClientRect(){const n=this.canvas.nativeCanvas,t=this.getWH();return n.parentElement?this.canvas.nativeCanvas.getBoundingClientRect():{x:0,y:0,width:t.width,height:t.height,left:0,top:0,right:0,bottom:0}}clearViewBox(n){const t=this.viewBox,e=this.getContext(),i=this.getDpr();e.nativeContext.save(),e.nativeContext.setTransform(i,0,0,i,0,0),e.clearRect(t.x1,t.y1,t.x2-t.x1,t.y2-t.y1),n&&(e.fillStyle=n,e.fillRect(t.x1,t.y1,t.x2-t.x1,t.y2-t.y1)),e.nativeContext.restore()}isVisible(n){return this._canvasIsIntersecting}onVisibleChange(n){this._onVisibleChangeCb=n}getTopLeft(n){return this.global.getElementTopLeft(this.canvas.nativeCanvas,n)}};_h.env="browser",_h.idprefix="visactor_window",_h.prefix_count=0,_h=Jv=nLt([Vt(),rLt("design:paramtypes",[])],_h);const sLt=new se(n=>{n(_h).toSelf(),n(z3).toDynamicValue(t=>t.container.get(_h)).whenTargetNamed(_h.env)});var aLt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},oLt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};class lLt{get x1(){return this.dom.getBoundingClientRect().left}get x2(){return this.dom.getBoundingClientRect().right}get y1(){return this.dom.getBoundingClientRect().top}get y2(){return this.dom.getBoundingClientRect().bottom}get width(){return this.dom.getBoundingClientRect().width}get height(){return this.dom.getBoundingClientRect().height}constructor(t){this.dom=t}}function tV(n,t=!1){const e=document.createElement("img");if(e.crossOrigin="anonymous",t){const i=new Blob([n],{type:"image/svg+xml"});n=window.URL.createObjectURL(i)}return e.src=n,e.complete?Promise.resolve(e):new Promise((i,r)=>{e.onload=()=>{i(e)},e.onerror=()=>{r(new Error("加载失败"))}})}let Cw=class extends bw{constructor(){super(),this.type="browser",this.supportEvent=!0;try{this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.supportsMouseEvents=!!globalThis.MouseEvent}catch{this.supportsTouchEvents=!1,this.supportsPointerEvents=!1,this.supportsPointerEvents=!1}this.applyStyles=!0}mapToCanvasPoint(n,t){var e,i;let r=0,s=0,a=0,o=0;if(n.changedTouches){const l=(e=n.changedTouches[0])!==null&&e!==void 0?e:{};r=l.clientX||0,s=l.clientY||0,a=r,o=s}else r=n.clientX||0,s=n.clientY||0,a=n.offsetX||0,o=n.offsetY||0;if(t){const l=r,u=s,h=t.getBoundingClientRect(),c=(i=t.getNativeHandler)===null||i===void 0?void 0:i.call(t).nativeCanvas;let d,p;return c&&(d=h.width/c.offsetWidth,p=h.height/c.offsetHeight),{x:(l-h.left)/(st(d)?d:1),y:(u-h.top)/(st(p)?p:1)}}return{x:a,y:o}}getNativeAABBBounds(n){let t=n;if(typeof n=="string"&&(t=new DOMParser().parseFromString(n,"text/html").firstChild,t.lastChild&&(t=t.lastChild.firstChild)),t.getBoundingClientRect){const e=t.getBoundingClientRect();return new lLt(e)}return new Ai}removeDom(n){return n.parentElement.removeChild(n),!0}updateDom(n,t){const{width:e,height:i,style:r}=t;return r&&(It(r)?n.setAttribute("style",r):Object.keys(r).forEach(s=>{n.style[s]=r[s]})),e!=null&&(n.style.width=`${e}px`),i!=null&&(n.style.height=`${i}px`),!0}createDom(n){const{tagName:t="div",parent:e}=n,i=document.createElement(t);if(this.updateDom(i,n),e){const r=It(e)?this.getElementById(e):e;r&&r.appendChild&&r.appendChild(i)}return i}loadImage(n){return tV(n,!1).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadSvg(n){return tV(n,!0).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}createCanvas(n){var t,e;const i=document.createElement("canvas");n.id&&(i.id=(t=n.id)!==null&&t!==void 0?t:pn.GenAutoIncrementId().toString());const r=(e=n.dpr)!==null&&e!==void 0?e:window.devicePixelRatio;return n.width&&n.height&&(i.style.width=`${n.width}px`,i.style.height=`${n.height}px`,i.width=n.width*r,i.height=n.height*r),i}createOffscreenCanvas(n){var t;const e=(t=n.dpr)!==null&&t!==void 0?t:window.devicePixelRatio;return new OffscreenCanvas(n.width*e,n.height*e)}releaseCanvas(n){let t;t=typeof n=="string"?document.getElementById(n):n,t&&t.parentElement&&t.parentElement.removeChild(t)}getDevicePixelRatio(){return window.devicePixelRatio}getRequestAnimationFrame(){return window.requestAnimationFrame}getCancelAnimationFrame(){return window.cancelAnimationFrame}addEventListener(n,t,e){return document.addEventListener(n,t,e)}removeEventListener(n,t,e){return document.removeEventListener(n,t,e)}dispatchEvent(n){return document.dispatchEvent(n)}getElementById(n){return document.getElementById(n)}getRootElement(){return document.body}getDocument(){return document}release(...n){}getElementTop(n,t){let e=n.offsetTop,i=n.offsetParent;for(;i!==null;)e+=i.offsetTop,i=i.offsetParent;return e}getElementLeft(n,t){let e=n.offsetLeft,i=n.offsetParent;for(;i!==null;)e+=i.offsetLeft,i=i.offsetParent;return e}getElementTopLeft(n,t){let e=n.offsetTop,i=n.offsetLeft,r=n.offsetParent;for(;r!==null;)e+=r.offsetTop,i+=r.offsetLeft,r=r.offsetParent;return{top:e,left:i}}};Cw=aLt([Vt(),oLt("design:paramtypes",[])],Cw);const kw=new se(n=>{kw.isBrowserBound||(kw.isBrowserBound=!0,n(Cw).toSelf().inSingletonScope(),n(m2).toService(Cw))});kw.isBrowserBound=!1;function Tw(n,t=!0){Tw.__loaded||(Tw.__loaded=!0,n.load(kw),n.load(ZIt),n.load(sLt),t&&iLt(n))}Tw.__loaded=!1;var uLt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},hLt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},cLt=function(n,t){return function(e,i){t(e,i,n)}};let bL=class{constructor(n){this.canvasRenderer=n,this.type="arc",this.numberType=b2}contains(n,t,e){if(!n.AABBBounds.containsPoint(t))return!1;if(n.attribute.pickMode==="imprecise")return!0;const{pickContext:i}=e??{};if(!i)return!1;const r=Pt(n).arc;i.highPerformanceSave();let{x:s=r.x,y:a=r.y}=n.attribute;if(n.transMatrix.onlyTranslate()){const l=n.getOffsetXY(r);s+=l.x,a+=l.y,i.setTransformForCurrent()}else s=0,a=0,i.transformFromMatrix(n.transMatrix,!0);let o=!1;return this.canvasRenderer.drawShape(n,i,s,a,{},null,(l,u,h)=>!!o||(o=l.isPointInPath(t.x,t.y),o),(l,u,h)=>{if(o)return!0;const c=u.lineWidth||h.lineWidth,d=u.pickStrokeBuffer||h.pickStrokeBuffer;return i.lineWidth=c+d,o=l.isPointInStroke(t.x,t.y),o}),i.highPerformanceRestore(),o}};bL=uLt([Vt(),cLt(0,fe(QA)),hLt("design:paramtypes",[Object])],bL);let eV=!1;const dLt=new se((n,t,e,i)=>{eV||(eV=!0,n(T9).to(bL).inSingletonScope(),n(Hu).toService(T9))});var pLt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},fLt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},gLt=function(n,t){return function(e,i){t(e,i,n)}};let xL=class{constructor(n){this.canvasRenderer=n,this.type="area",this.numberType=_1}contains(n,t,e){if(!n.AABBBounds.containsPoint(t))return!1;if(n.attribute.pickMode==="imprecise")return!0;const{pickContext:i}=e??{};if(!i)return!1;const r=Pt(n).area;let{x:s=r.x,y:a=r.y}=n.attribute;if(i.highPerformanceSave(),n.transMatrix.onlyTranslate()){const l=n.getOffsetXY(r);s+=l.x,a+=l.y,i.setTransformForCurrent()}else s=0,a=0,i.transformFromMatrix(n.transMatrix,!0);let o=!1;return this.canvasRenderer.drawShape(n,i,s,a,{},null,l=>!!o||(o=l.isPointInPath(t.x,t.y),o)),i.highPerformanceRestore(),o}};xL=pLt([Vt(),gLt(0,fe(tw)),fLt("design:paramtypes",[Object])],xL);let iV=!1;const mLt=new se((n,t,e,i)=>{iV||(iV=!0,n(M9).to(xL).inSingletonScope(),n(Hu).toService(M9))});var vLt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},_Lt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},yLt=function(n,t){return function(e,i){t(e,i,n)}};let SL=class{constructor(n){this.canvasRenderer=n,this.type="circle",this.numberType=x2}contains(n,t,e){if(!n.AABBBounds.containsPoint(t))return!1;if(n.attribute.pickMode==="imprecise")return!0;const{pickContext:i}=e??{};if(!i)return!1;const r=Pt(n).circle;let{x:s=r.x,y:a=r.y}=n.attribute;if(i.highPerformanceSave(),n.transMatrix.onlyTranslate()){const l=n.getOffsetXY(r);s+=l.x,a+=l.y,i.setTransformForCurrent()}else s=0,a=0,i.transformFromMatrix(n.transMatrix,!0);let o=!1;return this.canvasRenderer.drawShape(n,i,s,a,{},null,(l,u,h)=>!!o||(o=l.isPointInPath(t.x,t.y),o),(l,u,h)=>{if(o)return!0;const c=u.lineWidth||h.lineWidth,d=u.pickStrokeBuffer||h.pickStrokeBuffer;return i.lineWidth=c+d,o=l.isPointInStroke(t.x,t.y),o}),i.highPerformanceRestore(),o}};SL=vLt([Vt(),yLt(0,fe(ew)),_Lt("design:paramtypes",[Object])],SL);let nV=!1;const bLt=new se((n,t,e,i)=>{nV||(nV=!0,n(P9).to(SL).inSingletonScope(),n(Hu).toService(P9))});var xLt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},SLt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},ALt=function(n,t){return function(e,i){t(e,i,n)}};let Mw=class{constructor(n){this.canvasRenderer=n,this.type="glyph",this.numberType=S2}contains(n,t,e){if(!n.AABBBounds.containsPoint(t))return!1;if(n.attribute.pickMode==="imprecise")return!0;const{pickContext:i}=e??{};if(!i)return!1;const r=e==null?void 0:e.pickerService;if(r){let s=!1;return n.getSubGraphic().forEach(a=>{s||(s=!!r.pickItem(a,t,null,e))}),s}return!1}};Mw=xLt([Vt(),ALt(0,fe(ow)),SLt("design:paramtypes",[Object])],Mw);let rV=!1;const wLt=new se((n,t,e,i)=>{rV||(rV=!0,n(B9).to(Mw).inSingletonScope(),n(Mw).toService(B9))});var CLt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let Jg=class{constructor(){this.type="image",this.numberType=A2}contains(n,t,e){const{pickContext:i}=e??{};return!!i&&!!n.AABBBounds.containsPoint(t)}};Jg=CLt([Vt()],Jg);let sV=!1;const kLt=new se((n,t,e,i)=>{sV||(sV=!0,n(Aw).to(Jg).inSingletonScope(),n(Jg).toService(Aw))});var TLt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},MLt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},PLt=function(n,t){return function(e,i){t(e,i,n)}};let AL=class{constructor(n){this.canvasRenderer=n,this.type="line",this.numberType=y1}contains(n,t,e){if(!n.AABBBounds.containsPoint(t))return!1;if(n.attribute.pickMode==="imprecise")return!0;const{pickContext:i}=e??{};if(!i)return!1;const r=Pt(n).line;let{x:s=r.x,y:a=r.y}=n.attribute;if(i.highPerformanceSave(),n.transMatrix.onlyTranslate()){const l=n.getOffsetXY(r);s+=l.x,a+=l.y,i.setTransformForCurrent()}else s=0,a=0,i.transformFromMatrix(n.transMatrix,!0);let o=!1;return this.canvasRenderer.drawShape(n,i,s,a,{},null,l=>!!o||(o=l.isPointInPath(t.x,t.y),o),(l,u,h)=>{if(o)return!0;const c=u.lineWidth||h.lineWidth,d=u.pickStrokeBuffer||h.pickStrokeBuffer;return i.lineWidth=c+d,o=l.isPointInStroke(t.x,t.y),o}),i.highPerformanceRestore(),o}};AL=TLt([Vt(),PLt(0,fe(iw)),MLt("design:paramtypes",[Object])],AL);let aV=!1;const ELt=new se((n,t,e,i)=>{aV||(aV=!0,n(E9).to(AL).inSingletonScope(),n(Hu).toService(E9))});var OLt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},RLt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},ILt=function(n,t){return function(e,i){t(e,i,n)}};let wL=class{constructor(n){this.canvasRenderer=n,this.type="polygon",this.numberType=C2}contains(n,t,e){if(!n.AABBBounds.contains(t.x,t.y))return!1;const{pickContext:i}=e??{};if(!i)return!1;const r=Pt(n).polygon;let{x:s=r.x,y:a=r.y}=n.attribute;if(i.highPerformanceSave(),n.transMatrix.onlyTranslate()){const l=n.getOffsetXY(r);s+=l.x,a+=l.y,i.setTransformForCurrent()}else s=0,a=0,i.transformFromMatrix(n.transMatrix,!0);let o=!1;return this.canvasRenderer.drawShape(n,i,s,a,{},null,(l,u,h)=>!!o||(o=l.isPointInPath(t.x,t.y),o),(l,u,h)=>{if(o)return!0;const c=u.lineWidth||h.lineWidth,d=u.pickStrokeBuffer||h.pickStrokeBuffer;return i.lineWidth=c+d,o=l.isPointInStroke(t.x,t.y),o}),i.highPerformanceRestore(),o}};wL=OLt([Vt(),ILt(0,fe(rw)),RLt("design:paramtypes",[Object])],wL);let oV=!1;const LLt=new se((n,t,e,i)=>{oV||(oV=!0,n(D9).to(wL).inSingletonScope(),n(Hu).toService(D9))});var DLt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},BLt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},FLt=function(n,t){return function(e,i){t(e,i,n)}};let CL=class{constructor(n){this.canvasRenderer=n,this.type="path",this.numberType=w2}contains(n,t,e){if(!n.AABBBounds.containsPoint(t))return!1;if(n.attribute.pickMode==="imprecise")return!0;const{pickContext:i}=e??{};if(!i)return!1;const r=Pt(n).path;let{x:s=r.x,y:a=r.y}=n.attribute;if(i.highPerformanceSave(),n.transMatrix.onlyTranslate()){const l=n.getOffsetXY(r);s+=l.x,a+=l.y,i.setTransformForCurrent()}else s=0,a=0,i.transformFromMatrix(n.transMatrix,!0);let o=!1;return this.canvasRenderer.drawShape(n,i,s,a,{},null,(l,u,h)=>!!o||(o=l.isPointInPath(t.x,t.y),o),(l,u,h)=>{if(o)return!0;const c=u.lineWidth||h.lineWidth,d=u.pickStrokeBuffer||h.pickStrokeBuffer;return i.lineWidth=c+d,o=l.isPointInStroke(t.x,t.y),o}),i.highPerformanceRestore(),o}};CL=DLt([Vt(),FLt(0,fe(nw)),BLt("design:paramtypes",[Object])],CL);let lV=!1;const jLt=new se((n,t,e,i)=>{lV||(lV=!0,n(O9).to(CL).inSingletonScope(),n(Hu).toService(O9))});var NLt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},zLt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},HLt=function(n,t){return function(e,i){t(e,i,n)}};const xE=new Ai;let kL=class{constructor(n){this.canvasRenderer=n,this.type="rect",this.numberType=k2}contains(n,t,e){if(!n.AABBBounds.containsPoint(t))return!1;if(n.attribute.pickMode==="imprecise")return!0;const{pickContext:i}=e??{};if(!i)return!1;const r=Pt(n).rect,{cornerRadius:s=r.cornerRadius}=n.attribute;let{x:a=r.x,y:o=r.y}=n.attribute;i.highPerformanceSave();let l=!0;if(n.transMatrix.onlyTranslate()){const h=n.getOffsetXY(r);a+=h.x,o+=h.y,i.setTransformForCurrent()}else a=0,o=0,l=!1,i.transformFromMatrix(n.transMatrix,!0);let u=!0;if(!l||Mt(s,!0)&&s!==0||ut(s)&&s.some(h=>h!==0))u=!1,this.canvasRenderer.drawShape(n,i,a,o,{},null,(h,c,d)=>!!u||(u=h.isPointInPath(t.x,t.y),u),(h,c,d)=>{if(u)return!0;const p=c.lineWidth||d.lineWidth,f=c.pickStrokeBuffer||d.pickStrokeBuffer;return i.lineWidth=p+f,u=h.isPointInStroke(t.x,t.y),u});else if(u){const{fill:h=r.fill,stroke:c=r.stroke,lineWidth:d=r.lineWidth}=n.attribute;if(h)u=!0;else if(c){const p=n.AABBBounds;xE.setValue(p.x1,p.y1,p.x2,p.y2),xE.expand(-d/2),u=!xE.containsPoint(t)}}return i.highPerformanceRestore(),u}};kL=NLt([Vt(),HLt(0,fe(sw)),zLt("design:paramtypes",[Object])],kL);let uV=!1;const VLt=new se((n,t,e,i)=>{uV||(uV=!0,n(R9).to(kL).inSingletonScope(),n(Hu).toService(R9))});let hV=!1;const WLt=new se((n,t,e,i)=>{hV||(hV=!0,n(Aw).to(Jg).inSingletonScope(),n(Jg).toService(Aw))});var $Lt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},GLt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},ULt=function(n,t){return function(e,i){t(e,i,n)}};let TL=class{constructor(n){this.canvasRenderer=n,this.type="symbol",this.numberType=T2}contains(n,t,e){if(!n.AABBBounds.containsPoint(t))return!1;if(n.attribute.pickMode==="imprecise")return!0;const{pickContext:i}=e??{};if(!i)return!1;const r=Pt(n).symbol;let{x:s=r.x,y:a=r.y}=n.attribute;if(i.highPerformanceSave(),n.transMatrix.onlyTranslate()){const l=n.getOffsetXY(r);s+=l.x,a+=l.y,i.setTransformForCurrent()}else s=0,a=0,i.transformFromMatrix(n.transMatrix,!0);let o=!1;return this.canvasRenderer.drawShape(n,i,s,a,{},null,(l,u,h)=>!!o||(o=l.isPointInPath(t.x,t.y),o),(l,u,h)=>{if(o)return!0;const c=u.lineWidth||h.lineWidth,d=u.pickStrokeBuffer||h.pickStrokeBuffer;return i.lineWidth=c+d,o=l.isPointInStroke(t.x,t.y),o}),i.highPerformanceRestore(),o}};TL=$Lt([Vt(),ULt(0,fe(aw)),GLt("design:paramtypes",[Object])],TL);let cV=!1;const YLt=new se((n,t,e,i)=>{cV||(cV=!0,n(I9).to(TL).inSingletonScope(),n(Hu).toService(I9))});var XLt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let ML=class{constructor(){this.type="text",this.numberType=M2}contains(n,t,e){return!!n.AABBBounds.containsPoint(t)}};ML=XLt([Vt()],ML);let dV=!1;const KLt=new se((n,t,e,i)=>{dV||(dV=!0,n(L9).to(ML).inSingletonScope(),n(Hu).toService(L9))});var qLt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},ZLt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};let E0=class extends pg{constructor(n,t){super(n,t);const e=n.nativeCanvas.getContext("2d");if(!e)throw new Error("发生错误，获取2d上下文失败");this.nativeContext=e,this.canvas=n,this.matrix=new Wi(1,0,0,1,0,0),this.stack=[],this.dpr=t??1}release(...n){}};E0.env="node",E0=qLt([Vt(),ZLt("design:paramtypes",[Object,Number])],E0);var JLt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},QLt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};let gg=class extends P0{constructor(n){super(n)}init(){this._context=new E0(this,this._dpr),this.nativeCanvas.width=this._pixelWidth,this.nativeCanvas.height=this._pixelHeight}release(...n){this._nativeCanvas.release&&ft(this._nativeCanvas.release)&&this._nativeCanvas.release()}};gg.env="node",gg=JLt([Vt(),QLt("design:paramtypes",[Object])],gg);const tDt=cQ(gg,E0);var eDt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},iDt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},nDt=function(n,t){return function(e,i){t(e,i,n)}};let mg=class extends xw{get container(){return null}constructor(n){super(),this.global=n,this.type="node"}getTitle(){return""}getWH(){return{width:this.canvas.displayWidth,height:this.canvas.displayHeight}}getXY(){return{x:0,y:0}}createWindow(n){n.canvas?this.createWindowByCanvas(n):this.createWindowByConfig(n)}createWindowByConfig(n){const t=this.global.createCanvas({width:n.width,height:n.height}),e={width:n.width,height:n.height,dpr:n.dpr,nativeCanvas:t,id:pn.GenAutoIncrementId().toString(),canvasControled:!0};this.canvas=new gg(e)}createWindowByCanvas(n){const t=n.canvas;let e=n.width,i=n.height;e!=null&&i!=null&&n.canvasControled||(e=t.width,i=t.height),this.canvas=new gg({width:e,height:i,dpr:1,nativeCanvas:t,canvasControled:n.canvasControled})}releaseWindow(){this.canvas.release()}resizeWindow(n,t){this.canvas.resize(n,t)}setDpr(n){this.canvas.dpr=n}getContext(){return this.canvas.getContext()}getNativeHandler(){return this.canvas}getDpr(){return this.canvas.dpr}getImageBuffer(n="image/png"){return this.canvas.nativeCanvas.toBuffer(n)}addEventListener(n,t,e){}dispatchEvent(n){return!0}removeEventListener(n,t,e){}getStyle(){}setStyle(n){}getBoundingClientRect(){return null}clearViewBox(n){}};mg.env="node",mg=eDt([Vt(),nDt(0,fe(F3)),iDt("design:paramtypes",[Object])],mg);const rDt=new se(n=>{n(mg).toSelf(),n(z3).toDynamicValue(t=>t.container.get(mg)).whenTargetNamed(mg.env)});var sDt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let Pw=class extends bw{constructor(){super(...arguments),this.type="node",this._lastTime=0,this.supportEvent=!1}configure(n,t){n.env===this.type&&(n.setActiveEnvContribution(this),this.pkg=t)}getDynamicCanvasCount(){return 0}getStaticCanvasCount(){return 999}loadJson(n){const t=fetch(n).then(e=>e.json());return t.then(e=>({data:e,state:"success"})).catch(()=>({data:null,state:"fail"})),t}loadArrayBuffer(n){return fetch(n).then(t=>t.arrayBuffer()).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadImage(n){const{loadImage:t}=this.pkg;return t?t(n).then(e=>({loadState:e?"success":"fail",data:e})).catch(()=>({loadState:"fail",data:null})):Promise.reject(new Error("node-canvas loadImage could not be found!"))}loadSvg(n){const t=this.pkg.Resvg;if(!t)return Promise.reject(new Error("@resvg/resvg-js svgParser could not be found!"));const e=new t(n).render().asPng();return this.loadImage(e)}createCanvas(n){return this.pkg.createCanvas(n.width,n.height)}releaseCanvas(n){}getDevicePixelRatio(){return 1}getRequestAnimationFrame(){return function(n){return V6.call(n)}}getCancelAnimationFrame(){return n=>{V6.clear(n)}}addEventListener(n,t,e){}removeEventListener(n,t,e){}getElementById(n){return null}getRootElement(){return null}dispatchEvent(n){}release(...n){}createOffscreenCanvas(n){}};Pw=sDt([Vt()],Pw);const Ew=new se(n=>{Ew.isNodeBound||(Ew.isNodeBound=!0,n(Pw).toSelf().inSingletonScope(),n(m2).toService(Pw))});Ew.isNodeBound=!1;function Ow(n,t=!0){Ow.__loaded||(Ow.__loaded=!0,n.load(Ew),n.load(tDt),n.load(rDt))}Ow.__loaded=!1;var aDt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},oDt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},lDt=function(n,t){return function(e,i){t(e,i,n)}};let PL=class{constructor(n){this.canvasRenderer=n,this.type="arc",this.numberType=b2}contains(n,t,e){if(!n.AABBBounds.containsPoint(t))return!1;if(n.attribute.pickMode==="imprecise")return!0;const{pickContext:i}=e??{};if(!i)return!1;const r=Pt(n).arc;i.highPerformanceSave();let{x:s=r.x,y:a=r.y}=n.attribute;if(n.transMatrix.onlyTranslate()){const l=n.getOffsetXY(r);s+=l.x,a+=l.y,i.setTransformForCurrent()}else s=0,a=0,i.transformFromMatrix(n.transMatrix,!0);let o=!1;return this.canvasRenderer.drawShape(n,i,s,a,{},null,(l,u,h)=>!!o||(o=l.isPointInPath(t.x,t.y),o),(l,u,h)=>{if(o)return!0;const c=u.lineWidth||h.lineWidth,d=u.pickStrokeBuffer||h.pickStrokeBuffer;return i.lineWidth=xr(i,c+d,i.dpr),o=l.isPointInStroke(t.x,t.y),o}),i.highPerformanceRestore(),o}};PL=aDt([Vt(),lDt(0,fe(QA)),oDt("design:paramtypes",[Object])],PL);let pV=!1;const uDt=new se((n,t,e,i)=>{pV||(pV=!0,n(F9).to(PL).inSingletonScope(),n(lr).toService(F9))});var hDt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},cDt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},dDt=function(n,t){return function(e,i){t(e,i,n)}};const SE=new Ai;let EL=class{constructor(n){this.canvasRenderer=n,this.type="rect",this.numberType=k2}contains(n,t,e){if(!n.AABBBounds.containsPoint(t))return!1;if(n.attribute.pickMode==="imprecise")return!0;const{pickContext:i}=e??{};if(!i)return!1;const r=Pt(n).rect,{cornerRadius:s=r.cornerRadius}=n.attribute;let{x:a=r.x,y:o=r.y}=n.attribute;i.highPerformanceSave();let l=!0;if(n.transMatrix.onlyTranslate()){const h=n.getOffsetXY(r);a+=h.x,o+=h.y,i.setTransformForCurrent()}else a=0,o=0,l=!1,i.transformFromMatrix(n.transMatrix,!0);let u=!0;if(!l||n.shadowRoot||Mt(s,!0)&&s!==0||ut(s)&&s.some(h=>h!==0))u=!1,this.canvasRenderer.drawShape(n,i,a,o,{},null,(h,c,d)=>!!u||(u=h.isPointInPath(t.x,t.y),u),(h,c,d)=>{if(u)return!0;const p=c.lineWidth||d.lineWidth,f=c.pickStrokeBuffer||d.pickStrokeBuffer;return i.lineWidth=xr(i,p+f,i.dpr),u=h.isPointInStroke(t.x,t.y),u});else{const{fill:h=r.fill,stroke:c=r.stroke,lineWidth:d=r.lineWidth}=n.attribute;if(h)u=!0;else if(c){const p=n.AABBBounds;SE.setValue(p.x1,p.y1,p.x2,p.y2),SE.expand(-d/2),u=!SE.containsPoint(t)}}return i.highPerformanceRestore(),u}};EL=hDt([Vt(),dDt(0,fe(sw)),cDt("design:paramtypes",[Object])],EL);let fV=!1;const pDt=new se((n,t,e,i)=>{fV||(fV=!0,n($9).to(EL).inSingletonScope(),n(lr).toService($9))});var fDt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let Eu=class extends vs{};Eu=fDt([Vt()],Eu);var gDt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},mDt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},vDt=function(n,t){return function(e,i){t(e,i,n)}};let OL=class extends Eu{constructor(n){super(),this.canvasRenderer=n,this.type="line",this.numberType=y1}contains(n,t,e){if(!n.AABBBounds.containsPoint(t))return!1;if(n.attribute.pickMode==="imprecise")return!0;const{pickContext:i}=e??{};if(!i)return!1;i.highPerformanceSave();const r=Pt(n).line,s=this.transform(n,r,i),{x:a,y:o,z:l,lastModelMatrix:u}=s;let h=t;if(i.camera){h=t.clone();const d=n.parent.globalTransMatrix;h.x=d.a*t.x+d.c*t.y+d.e,h.y=d.b*t.x+d.d*t.y+d.f}this.canvasRenderer.z=l;let c=!1;return this.canvasRenderer.drawShape(n,i,a,o,{},null,d=>!!c||(c=d.isPointInPath(h.x,h.y),c),(d,p,f)=>{if(c)return!0;const g=p.lineWidth||f.lineWidth,_=p.pickStrokeBuffer||f.pickStrokeBuffer;return i.lineWidth=xr(i,g+_,i.dpr),c=d.isPointInStroke(h.x,h.y),c}),this.canvasRenderer.z=0,i.modelMatrix!==u&&gi.free(i.modelMatrix),i.modelMatrix=u,i.highPerformanceRestore(),c}};OL=gDt([Vt(),vDt(0,fe(iw)),mDt("design:paramtypes",[Object])],OL);let gV=!1;const _Dt=new se((n,t,e,i)=>{gV||(gV=!0,n(V9).to(OL).inSingletonScope(),n(lr).toService(V9))});var yDt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},bDt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},xDt=function(n,t){return function(e,i){t(e,i,n)}};let RL=class{constructor(n){this.canvasRenderer=n,this.type="area",this.numberType=_1}contains(n,t,e){if(!n.AABBBounds.containsPoint(t))return!1;if(n.attribute.pickMode==="imprecise")return!0;const{pickContext:i}=e??{};if(!i)return!1;const r=Pt(n).area;let{x:s=r.x,y:a=r.y}=n.attribute;const{fillPickable:o=r.fillPickable,strokePickable:l=r.strokePickable}=n.attribute;if(i.highPerformanceSave(),n.transMatrix.onlyTranslate()){const h=n.getOffsetXY(r);s+=h.x,a+=h.y,i.setTransformForCurrent()}else s=0,a=0,i.transformFromMatrix(n.transMatrix,!0);let u=!1;return this.canvasRenderer.drawShape(n,i,s,a,{},null,h=>!!u||!!o&&(u=h.isPointInPath(t.x,t.y),u),(h,c,d)=>{if(u)return!0;if(!l)return!1;const p=c.lineWidth||d.lineWidth,f=c.pickStrokeBuffer||d.pickStrokeBuffer;return i.lineWidth=xr(i,p+f,i.dpr),u=h.isPointInStroke(t.x,t.y),u}),i.highPerformanceRestore(),u}};RL=yDt([Vt(),xDt(0,fe(tw)),bDt("design:paramtypes",[Object])],RL);let mV=!1;const SDt=new se((n,t,e,i)=>{mV||(mV=!0,n(N9).to(RL).inSingletonScope(),n(lr).toService(N9))});var ADt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},wDt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},CDt=function(n,t){return function(e,i){t(e,i,n)}};let IL=class extends Eu{constructor(n){super(),this.canvasRenderer=n,this.type="symbol",this.numberType=T2}contains(n,t,e){const{pickContext:i}=e??{};if(!i)return!1;const r=n.getParsedPath();if(!i.camera){if(!n.AABBBounds.containsPoint(t))return!1;if(r.isSvg||n.attribute.pickMode==="imprecise")return!0}i.highPerformanceSave();const s=Pt(n).symbol,a=this.transform(n,s,i),{x:o,y:l,z:u,lastModelMatrix:h}=a;let c=t;if(i.camera){c=t.clone();const p=n.parent.globalTransMatrix;c.x=p.a*t.x+p.c*t.y+p.e,c.y=p.b*t.x+p.d*t.y+p.f}this.canvasRenderer.z=u;let d=!1;return this.canvasRenderer.drawShape(n,i,o,l,{},null,(p,f,g)=>!!d||(d=p.isPointInPath(c.x,c.y),d),(p,f,g)=>{if(d)return!0;const _=f.lineWidth||g.lineWidth,v=f.pickStrokeBuffer||g.pickStrokeBuffer;return i.lineWidth=xr(i,_+v,i.dpr),d=p.isPointInStroke(c.x,c.y),d}),this.canvasRenderer.z=0,i.modelMatrix!==h&&gi.free(i.modelMatrix),i.modelMatrix=h,i.highPerformanceRestore(),d}};IL=ADt([Vt(),CDt(0,fe(aw)),wDt("design:paramtypes",[Object])],IL);let vV=!1;const kDt=new se((n,t,e,i)=>{vV||(vV=!0,n(U9).to(IL).inSingletonScope(),n(lr).toService(U9))});var TDt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},MDt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},PDt=function(n,t){return function(e,i){t(e,i,n)}};let LL=class{constructor(n){this.canvasRenderer=n,this.type="circle",this.numberType=x2}contains(n,t,e){if(!n.AABBBounds.containsPoint(t))return!1;if(n.attribute.pickMode==="imprecise")return!0;const{pickContext:i}=e??{};if(!i)return!1;const r=Pt(n).circle;let{x:s=r.x,y:a=r.y}=n.attribute;if(i.highPerformanceSave(),n.transMatrix.onlyTranslate()){const l=n.getOffsetXY(r);s+=l.x,a+=l.y,i.setTransformForCurrent()}else s=0,a=0,i.transformFromMatrix(n.transMatrix,!0);let o=!1;return this.canvasRenderer.drawShape(n,i,s,a,{},null,(l,u,h)=>!!o||(o=l.isPointInPath(t.x,t.y),o),(l,u,h)=>{if(o)return!0;const c=u.lineWidth||h.lineWidth,d=u.pickStrokeBuffer||h.pickStrokeBuffer;return i.lineWidth=xr(i,c+d,i.dpr),o=l.isPointInStroke(t.x,t.y),o}),i.highPerformanceRestore(),o}};LL=TDt([Vt(),PDt(0,fe(ew)),MDt("design:paramtypes",[Object])],LL);let _V=!1;const EDt=new se((n,t,e,i)=>{_V||(_V=!0,n(z9).to(LL).inSingletonScope(),n(lr).toService(z9))});var ODt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},RDt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},IDt=function(n,t){return function(e,i){t(e,i,n)}};let DL=class extends Eu{constructor(n){super(),this.canvasRenderer=n,this.type="text",this.numberType=M2}contains(n,t,e){const{pickContext:i}=e??{};if(!i)return!1;const r=n.AABBBounds;if(!i.camera)return!!r.containsPoint(t);i.highPerformanceSave();const s=Pt(n).text,{keepDirIn3d:a=s.keepDirIn3d}=n.attribute,o=!a,l=this.transform(n,s,i,o),{x:u,y:h,z:c,lastModelMatrix:d}=l;this.canvasRenderer.z=c;let p=t;if(i.camera){p=t.clone();const g=n.parent.globalTransMatrix;p.x=g.a*t.x+g.c*t.y+g.e,p.y=g.b*t.x+g.d*t.y+g.f}let f=!1;return this.canvasRenderer.drawShape(n,i,u,h,{},null,(g,_,v)=>{if(f)return!0;const{fontSize:y=s.fontSize,textBaseline:b=s.textBaseline,textAlign:S=s.textAlign}=n.attribute,A=n.AABBBounds,w=A.height(),C=A.width(),k=al(b,w,y),M=iu(S,C);return g.rect(M+u,k+h,C,w,c),f=g.isPointInPath(p.x,p.y),f},(g,_,v)=>f),this.canvasRenderer.z=0,i.modelMatrix!==d&&gi.free(i.modelMatrix),i.modelMatrix=d,i.highPerformanceRestore(),f}};DL=ODt([Vt(),IDt(0,fe(rL)),RDt("design:paramtypes",[Object])],DL);let yV=!1;const LDt=new se((n,t,e,i)=>{yV||(yV=!0,n(Y9).to(DL).inSingletonScope(),n(lr).toService(Y9))});var DDt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},BDt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},FDt=function(n,t){return function(e,i){t(e,i,n)}};let BL=class extends Eu{constructor(n){super(),this.canvasRenderer=n,this.type="path",this.numberType=w2}contains(n,t,e){if(!n.AABBBounds.containsPoint(t))return!1;if(n.attribute.pickMode==="imprecise")return!0;const{pickContext:i}=e??{};if(!i)return!1;const r=Pt(n).path;i.highPerformanceSave();const s=this.transform(n,r,i),{x:a,y:o,z:l,lastModelMatrix:u}=s;let h=t;if(i.camera){h=t.clone();const d=n.parent.globalTransMatrix;h.x=d.a*t.x+d.c*t.y+d.e,h.y=d.b*t.x+d.d*t.y+d.f}this.canvasRenderer.z=l;let c=!1;return this.canvasRenderer.drawShape(n,i,a,o,{},null,(d,p,f)=>!!c||(c=d.isPointInPath(h.x,h.y),c),(d,p,f)=>{if(c)return!0;const g=p.lineWidth||f.lineWidth,_=p.pickStrokeBuffer||f.pickStrokeBuffer;return i.lineWidth=xr(i,g+_,i.dpr),c=d.isPointInStroke(h.x,h.y),c}),this.canvasRenderer.z=0,i.modelMatrix!==u&&gi.free(i.modelMatrix),i.modelMatrix=u,i.highPerformanceRestore(),c}};BL=DDt([Vt(),FDt(0,fe(nw)),BDt("design:paramtypes",[Object])],BL);let bV=!1;const jDt=new se((n,t,e,i)=>{bV||(bV=!0,n(W9).to(BL).inSingletonScope(),n(lr).toService(W9))});var NDt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},zDt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},HDt=function(n,t){return function(e,i){t(e,i,n)}};let FL=class{constructor(n){this.canvasRenderer=n,this.type="polygon",this.numberType=C2}contains(n,t,e){if(!n.AABBBounds.contains(t.x,t.y))return!1;if(n.attribute.pickMode==="imprecise")return!0;const{pickContext:i}=e??{};if(!i)return!1;const r=Pt(n).polygon;let{x:s=r.x,y:a=r.y}=n.attribute;if(i.highPerformanceSave(),n.transMatrix.onlyTranslate()){const l=n.getOffsetXY(r);s+=l.x,a+=l.y,i.setTransformForCurrent()}else s=0,a=0,i.transformFromMatrix(n.transMatrix,!0);let o=!1;return this.canvasRenderer.drawShape(n,i,s,a,{},null,(l,u,h)=>!!o||(o=l.isPointInPath(t.x,t.y),o),(l,u,h)=>{if(o)return!0;const c=u.lineWidth||h.lineWidth,d=u.pickStrokeBuffer||h.pickStrokeBuffer;return i.lineWidth=xr(i,c+d,i.dpr),o=l.isPointInStroke(t.x,t.y),o}),i.highPerformanceRestore(),o}};FL=NDt([Vt(),HDt(0,fe(rw)),zDt("design:paramtypes",[Object])],FL);let xV=!1;const VDt=new se((n,t,e,i)=>{xV||(xV=!0,n(X9).to(FL).inSingletonScope(),n(lr).toService(X9))});var WDt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},$Dt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},GDt=function(n,t){return function(e,i){t(e,i,n)}};let jL=class{constructor(n){this.canvasRenderer=n,this.type="glyph",this.numberType=S2}contains(n,t,e){if(!n.AABBBounds.containsPoint(t))return!1;if(n.attribute.pickMode==="imprecise")return!0;const{pickContext:i}=e??{};if(!i)return!1;const r=e==null?void 0:e.pickerService;if(r){let s=!1;return n.getSubGraphic().forEach(a=>{if(s)return;const o=r.pickItem(a,t,null,e);s=!(!o||!o.graphic)}),s}return!1}};jL=WDt([Vt(),GDt(0,fe(ow)),$Dt("design:paramtypes",[Object])],jL);let SV=!1;const UDt=new se((n,t,e,i)=>{SV||(SV=!0,n(Z9).to(jL).inSingletonScope(),n(lr).toService(Z9))});var YDt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},XDt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},KDt=function(n,t){return function(e,i){t(e,i,n)}};let NL=class{constructor(n){this.canvasRenderer=n,this.type="richtext",this.numberType=X3}contains(n,t,e){return!!n.AABBBounds.containsPoint(t)}};NL=YDt([Vt(),KDt(0,fe(sL)),XDt("design:paramtypes",[Object])],NL);let AV=!1;const qDt=new se((n,t,e,i)=>{AV||(AV=!0,n(q9).to(NL).inSingletonScope(),n(lr).toService(q9))});var ZDt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let zL=class{constructor(){this.type="image",this.numberType=A2}contains(n,t,e){const{pickContext:i}=e??{};return!!i&&!!n.AABBBounds.containsPoint(t)}};zL=ZDt([Vt()],zL);let wV=!1;const JDt=new se((n,t,e,i)=>{wV||(wV=!0,n(H9).to(zL).inSingletonScope(),n(lr).toService(H9))});var QDt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},tBt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},eBt=function(n,t){return function(e,i){t(e,i,n)}};new Ai;let HL=class extends Eu{constructor(n){super(),this.canvasRenderer=n,this.type="rect3d",this.numberType=Y3}contains(n,t,e){const{pickContext:i}=e??{};if(!i)return!1;const r=Pt(n).rect;i.highPerformanceSave();const s=this.transform(n,r,i),{x:a,y:o,z:l,lastModelMatrix:u}=s;let h=t;if(i.camera){h=t.clone();const d=n.parent.globalTransMatrix;h.x=d.a*t.x+d.c*t.y+d.e,h.y=d.b*t.x+d.d*t.y+d.f}this.canvasRenderer.z=l;let c=!1;return this.canvasRenderer.drawShape(n,i,a,o,e,null,(d,p,f)=>!!c||(c=d.isPointInPath(h.x,h.y),c)),this.canvasRenderer.z=0,i.modelMatrix!==u&&gi.free(i.modelMatrix),i.modelMatrix=u,i.highPerformanceRestore(),c}};HL=QDt([Vt(),eBt(0,fe(nL)),tBt("design:paramtypes",[Object])],HL);let CV=!1;const iBt=new se((n,t,e,i)=>{CV||(CV=!0,n(G9).to(HL).inSingletonScope(),n(lr).toService(G9))});var nBt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},rBt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},sBt=function(n,t){return function(e,i){t(e,i,n)}};let VL=class extends Eu{constructor(n){super(),this.canvasRenderer=n,this.type="arc3d",this.numberType=v1}contains(n,t,e){const{pickContext:i}=e??{};if(!i)return!1;const r=Pt(n).arc;i.highPerformanceSave();const s=this.transform(n,r,i),{x:a,y:o,z:l,lastModelMatrix:u}=s;let h=t;if(i.camera){h=t.clone();const d=n.parent.globalTransMatrix;h.x=d.a*t.x+d.c*t.y+d.e,h.y=d.b*t.x+d.d*t.y+d.f}this.canvasRenderer.z=l;let c=!1;return this.canvasRenderer.drawShape(n,i,a,o,e,null,(d,p,f)=>!!c||(c=d.isPointInPath(h.x,h.y),c)),this.canvasRenderer.z=0,i.modelMatrix!==u&&gi.free(i.modelMatrix),i.modelMatrix=u,i.highPerformanceRestore(),c}};VL=nBt([Vt(),sBt(0,fe(iL)),rBt("design:paramtypes",[Object])],VL);let kV=!1;const aBt=new se((n,t,e,i)=>{kV||(kV=!0,n(j9).to(VL).inSingletonScope(),n(lr).toService(j9))});var oBt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},lBt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},uBt=function(n,t){return function(e,i){t(e,i,n)}};let WL=class extends Eu{constructor(n){super(),this.canvasRenderer=n,this.type="pyramid3d",this.numberType=U3}contains(n,t,e){const{pickContext:i}=e??{};if(!i)return!1;const r=Pt(n).polygon;i.highPerformanceSave();const s=this.transform(n,r,i),{x:a,y:o,z:l,lastModelMatrix:u}=s;let h=t;if(i.camera){h=t.clone();const d=n.parent.globalTransMatrix;h.x=d.a*t.x+d.c*t.y+d.e,h.y=d.b*t.x+d.d*t.y+d.f}this.canvasRenderer.z=l;let c=!1;return this.canvasRenderer.drawShape(n,i,a,o,{},null,(d,p,f)=>!!c||(c=d.isPointInPath(h.x,h.y),c),(d,p,f)=>!1),this.canvasRenderer.z=0,i.modelMatrix!==u&&gi.free(i.modelMatrix),i.modelMatrix=u,i.highPerformanceRestore(),c}};WL=oBt([Vt(),uBt(0,fe(aL)),lBt("design:paramtypes",[Object])],WL);let TV=!1;const hBt=new se((n,t,e,i)=>{TV||(TV=!0,n(K9).to(WL).inSingletonScope(),n(lr).toService(K9))}),io=uF();function Rw(){Rw.__loaded||(Rw.__loaded=!0,_It(),re.load(KRt),re.load(io?uDt:dLt))}Rw.__loaded=!1;const Bm=Rw;function Iw(){Iw.__loaded||(Iw.__loaded=!0,yIt(),re.load(gIt),re.load(aBt))}Iw.__loaded=!1;const cBt=Iw;function Lw(){Lw.__loaded||(Lw.__loaded=!0,bIt(),re.load(JRt),re.load(io?SDt:mLt))}Lw.__loaded=!1;const dQ=Lw;function Dw(){Dw.__loaded||(Dw.__loaded=!0,xIt(),re.load(tIt),re.load(io?EDt:bLt))}Dw.__loaded=!1;const dBt=Dw;function Bw(){Bw.__loaded||(Bw.__loaded=!0,SIt(),re.load(sIt),re.load(io?UDt:wLt))}Bw.__loaded=!1;const pBt=Bw;function Fw(){Fw.__loaded||(Fw.__loaded=!0,AIt())}Fw.__loaded=!1;const rn=Fw;function jw(){jw.__loaded||(jw.__loaded=!0,wIt(),re.load(uIt),re.load(io?JDt:kLt))}jw.__loaded=!1;const pQ=jw;function Nw(){Nw.__loaded||(Nw.__loaded=!0,CIt(),re.load(ZRt),re.load(io?_Dt:ELt))}Nw.__loaded=!1;const Vu=Nw;function zw(){zw.__loaded||(zw.__loaded=!0,kIt(),re.load(iIt),re.load(io?jDt:jLt))}zw.__loaded=!1;const A1=zw;function Hw(){Hw.__loaded||(Hw.__loaded=!0,TIt(),re.load(nIt),re.load(io?VDt:LLt))}Hw.__loaded=!1;const D2=Hw;function Vw(){Vw.__loaded||(Vw.__loaded=!0,MIt(),re.load(vIt),re.load(hBt))}Vw.__loaded=!1;const fBt=Vw;function Ww(){Ww.__loaded||(Ww.__loaded=!0,PIt(),re.load(qRt),re.load(io?pDt:VLt))}Ww.__loaded=!1;const Wu=Ww;function $w(){$w.__loaded||($w.__loaded=!0,EIt(),re.load(cIt),re.load(iBt))}$w.__loaded=!1;const gBt=$w;function Gw(){Gw.__loaded||(Gw.__loaded=!0,OIt(),re.load(lIt),re.load(io?qDt:WLt))}Gw.__loaded=!1;const Oc=Gw;function Uw(){Uw.__loaded||(Uw.__loaded=!0,LIt())}Uw.__loaded=!1;const wr=Uw;function Yw(){Yw.__loaded||(Yw.__loaded=!0,RIt(),re.load(QRt),re.load(io?kDt:YLt))}Yw.__loaded=!1;const no=Yw;function Xw(){Xw.__loaded||(Xw.__loaded=!0,IIt(),re.load(eIt),re.load(io?LDt:KLt))}Xw.__loaded=!1;const Pl=Xw;function fQ(){rn(),Wu()}const Qg=-.5*Math.PI,tm=1.5*Math.PI,O0="PingFang SC,Helvetica Neue,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol",mBt=14;var ln;(function(n){n.selected="selected",n.selectedReverse="selected_reverse",n.hover="hover",n.hoverReverse="hover_reverse"})(ln||(ln={}));const ue={[ln.selectedReverse]:{},[ln.selected]:{},[ln.hover]:{},[ln.hoverReverse]:{}},Kw={container:"",width:30,height:30,style:{}},vBt="scrollDrag",MV={debounce:Ml,throttle:Pc};fQ();let qw=class gQ extends Nn{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},gQ.defaultAttributes,t)),this.name="scrollbar",this._onRailPointerDown=i=>{const{viewX:r,viewY:s}=i,{direction:a,width:o,height:l,range:u}=this.attribute,h=this._sliderSize,[c,d]=this._getScrollRange();let p;if(a==="vertical"){const f=s-this._viewPosition.y,g=Zi(f-h/2,c,d);p=f/l,this._slider.setAttribute("y",g,!0)}else{const f=r-this._viewPosition.x,g=Zi(f-h/2,c,d);p=f/o,this._slider.setAttribute("x",g,!0)}this.setScrollRange([p-(u[1]-u[0])/2,p+(u[1]-u[0])/2],!1),this.stage&&!this.stage.autoRender&&this.stage.renderNextFrame()},this._onSliderPointerDown=i=>{const{stopSliderDownPropagation:r=!0}=this.attribute;r&&i.stopPropagation();const{direction:s}=this.attribute,{x:a,y:o}=this.stage.eventPointTransform(i);this._prePos=s==="horizontal"?a:o,this._dispatchEvent("scrollDown",{pos:this._prePos,event:i}),_e.env==="browser"?(_e.addEventListener("pointermove",this._onSliderPointerMoveWithDelay,{capture:!0}),_e.addEventListener("pointerup",this._onSliderPointerUp)):(this.stage.addEventListener("pointermove",this._onSliderPointerMoveWithDelay,{capture:!0}),this.stage.addEventListener("pointerup",this._onSliderPointerUp),this.stage.addEventListener("pointerupoutside",this._onSliderPointerUp))},this._computeScrollValue=i=>{const{direction:r}=this.attribute,{x:s,y:a}=this.stage.eventPointTransform(i);let o,l,u=0;const{width:h,height:c}=this._getSliderRenderBounds();return r==="vertical"?(l=a,u=l-this._prePos,o=u/c):(l=s,u=l-this._prePos,o=u/h),[l,o]},this._onSliderPointerMove=i=>{const{stopSliderMovePropagation:r=!0}=this.attribute;r&&i.stopPropagation();const s=this.getScrollRange(),[a,o]=this._computeScrollValue(i);this.setScrollRange([s[0]+o,s[1]+o],!0),this._prePos=a},this._onSliderPointerMoveWithDelay=this.attribute.delayTime===0?this._onSliderPointerMove:MV[this.attribute.delayType](this._onSliderPointerMove,this.attribute.delayTime),this._onSliderPointerUp=i=>{i.preventDefault();const{realTime:r=!0,range:s,limitRange:a=[0,1]}=this.attribute,o=this.getScrollRange(),[l,u]=this._computeScrollValue(i),h=[o[0]+u,o[1]+u];this._dispatchEvent("scrollUp",{pre:s,value:ed(h,a[0],a[1])}),_e.env==="browser"?(_e.removeEventListener("pointermove",this._onSliderPointerMoveWithDelay,{capture:!0}),_e.removeEventListener("pointerup",this._onSliderPointerUp)):(this.stage.removeEventListener("pointermove",this._onSliderPointerMoveWithDelay,{capture:!0}),this.stage.removeEventListener("pointerup",this._onSliderPointerUp),this.stage.removeEventListener("pointerupoutside",this._onSliderPointerUp))}}setScrollRange(t,e=!0){const{direction:i="horizontal",limitRange:r=[0,1],range:s,realTime:a=!0}=this.attribute,o=ed(t,r[0],r[1]);if(e){const l=this._getSliderPos(o);if(this._slider){const u=l[1]-l[0];this._sliderSize=u,i==="horizontal"?this._slider.setAttributes({x:l[0],width:u},!0):this._slider.setAttributes({y:l[0],height:u},!0),this.stage&&!this.stage.autoRender&&this.stage.renderNextFrame()}}this.attribute.range=o,a&&this._dispatchEvent(vBt,{pre:s,value:o})}getScrollRange(){return this.attribute.range}bindEvents(){if(this.attribute.disableTriggerEvent)return;const{delayType:t="throttle",delayTime:e=0}=this.attribute;this._rail&&this._rail.addEventListener("pointerdown",MV[t](this._onRailPointerDown,e)),this._slider&&this._slider.addEventListener("pointerdown",this._onSliderPointerDown)}render(){this._reset();const{direction:t="horizontal",width:e,height:i,range:r,limitRange:s=[0,1],railStyle:a,sliderStyle:o,padding:l=2}=this.attribute,u=this.createOrUpdateChild("scrollbar-container",{},"group"),h=u.createOrUpdateChild("scrollbar-rail",Object.assign({x:0,y:0,width:e,height:i},a),"rect");this._rail=h;const c=this._getSliderRenderBounds(),d=this._getSliderPos(ed(r,s[0],s[1])),p=d[1]-d[0];let f;this._sliderSize=p,f=t==="horizontal"?{x:d[0],y:c.y1,width:p,height:c.height}:{x:c.x1,y:d[0],width:c.width,height:p};const g=u.createOrUpdateChild("slider",Object.assign(Object.assign(Object.assign(Object.assign({},f),{cornerRadius:this._getDefaultSliderCornerRadius()}),o),{boundsPadding:ds(l),pickMode:"imprecise"}),"rect");this._slider=g,this._container=u;const _=this._container.AABBBounds;this._viewPosition={x:_.x1,y:_.y1}}_getSliderRenderBounds(){if(this._sliderRenderBounds)return this._sliderRenderBounds;const{width:t,height:e,padding:i=2}=this.attribute,[r,s,a,o]=ds(i),l={x1:o,y1:r,x2:t-s,y2:e-a,width:Math.max(0,t-(o+s)),height:Math.max(0,e-(r+a))};return this._sliderRenderBounds=l,l}_getDefaultSliderCornerRadius(){const{direction:t,round:e}=this.attribute;if(e){const{width:i,height:r}=this._getSliderRenderBounds();return t==="horizontal"?r:i}return 0}_getSliderPos(t){const{direction:e}=this.attribute,{width:i,height:r,x1:s,y1:a}=this._getSliderRenderBounds();return e==="horizontal"?[i*t[0]+s,i*t[1]+s]:[r*t[0]+a,r*t[1]+a]}_getScrollRange(){if(this._sliderLimitRange)return this._sliderLimitRange;const{limitRange:t=[0,1],direction:e}=this.attribute,[i,r]=ed(t,0,1),{width:s,height:a,x1:o,y1:l}=this._getSliderRenderBounds(),u=this._sliderSize;return e==="horizontal"?ed([o+i*s,o+r*s],o,s-u):ed([l+i*a,l+r*a],l,a-u)}_reset(){this._sliderRenderBounds=null,this._sliderLimitRange=null}};qw.defaultAttributes={direction:"horizontal",round:!0,sliderSize:20,sliderStyle:{fill:"rgba(0, 0, 0, .5)"},railStyle:{fill:"rgba(0, 0, 0, .0)"},padding:2,scrollRange:[0,1],delayType:"throttle",delayTime:0,realTime:!0};function Io(n,t){n.forEachChildren(e=>{const i=t(e);e.isContainer&&!i&&Io(e,t)})}const Xi=n=>!F(n)&&n.visible!==!1;function _Bt(n,t){if(!t)return[];const e=n.find(i=>i.name===t,!0);return e?e.getChildren():[]}function yBt(n,t){if(!t)return[];const e=n.find(i=>i.name===t,!0);return e?e.findAll(i=>i.type!=="group",!0):[]}function bBt(n){const t=[n[0]];for(let e=1;e<n.length;e++)n[e].x===n[e-1].x&&n[e].y===n[e-1].y||t.push(n[e]);return t}function Zw(n){return n>=0&&n<Math.PI/2||n>3*Math.PI/2&&n<=2*Math.PI}function il(n,t,e){return Math.abs(n-t)<e}function mQ(n,t,e){return n?{textAlign:"right",textBaseline:"middle"}:{textAlign:t<Math.PI&&e.toLocaleLowerCase().includes("top")||t>Math.PI&&e.toLocaleLowerCase().includes("bottom")?"left":t<Math.PI&&e.toLocaleLowerCase().includes("bottom")||t>Math.PI&&e.toLocaleLowerCase().includes("top")?"right":"center",textBaseline:t<Math.PI&&e.includes("inside")||t>Math.PI&&!e.includes("inside")?"bottom":"top"}}const xBt=["#ffffff","#000000"];function PV(n,t,e,i,r,s){if(typeof n!="string"||typeof t!="string")return n;const a=new xn(n).toHex(),o=new xn(t).toHex();return hF(a,o,e,i,s)?a:SBt(a,o,e,i,r,s)}function SBt(n,t,e,i,r,s){const a=[];r&&(r instanceof Array?a.push(...r):a.push(r)),a.push(...xBt);for(const o of a)if(n!==o&&hF(o,t,e,i,s))return o}function hF(n,t,e,i,r){if(r==="lightness"){const s=xn.getColorBrightness(new xn(t));return xn.getColorBrightness(new xn(n))<.5?s>=.5:s<.5}return i?AE(n,t)>i:e==="largeText"?AE(n,t)>3:AE(n,t)>4.5}function AE(n,t){const e=EV(n),i=EV(t);return((e>i?e:i)+.05)/((e>i?i:e)+.05)}function EV(n){const t=Wq(n),e=t[0]/255,i=t[1]/255,r=t[2]/255;let s,a,o;return s=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),a=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4),o=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4),.2126*s+.7152*a+.0722*o}function qp(n,t,e,i){let r;switch(n){case"base":r=t;break;case"invertBase":r=e;break;case"similarBase":r=i}return r}function vQ(n,t){return[n[0]*t,n[1]*t]}function ABt(n){const[t,e]=n;return Math.sqrt(t*t+e*e)}function wBt(n){const[t,e]=n;let i=t*t+e*e;return i>0&&(i=1/Math.sqrt(i)),[n[0]*i,n[1]*i]}function CBt(n,t){const[e,i]=n,[r,s]=t,a=Math.sqrt((e*e+i*i)*(r*r+s*s)),o=a&&(e*r+i*s)/a;return Math.acos(Math.min(Math.max(o,-1),1))}function kBt(n,t){return n[0]*t[1]-t[0]*n[1]}function TBt(n,t,e){const i=CBt(n,t),r=kBt(n,t)>=0;return e?r?2*Math.PI-i:i:r?i:2*Math.PI-i}const vg=(n,t,e,i)=>new Nr(Object.assign({defaultFontParams:Object.assign({fontFamily:O0,fontSize:mBt},i),getTextBounds:e?void 0:x1,specialCharSet:`-/: .,@%'"~`+Nr.ALPHABET_CHAR_SET+Nr.ALPHABET_CHAR_SET.toUpperCase()},t??{}),n);function B2(n,t,e={}){if(!n)return{width:0,height:0};const i=x1({text:n,fontFamily:t.fontFamily||e.fontFamily||O0,fontSize:t.fontSize||e.fontSize||12,fontWeight:t.fontWeight||e.fontWeight,textAlign:t.textAlign||"center",textBaseline:t.textBaseline,ellipsis:!!t.ellipsis,maxLineWidth:t.maxLineWidth||1/0,lineHeight:t.fontSize||e.fontSize||12});return{width:i.width(),height:i.height()}}function $L(n,t="type"){return _Q(n,t)==="rich"}function _Q(n,t="type"){var e,i;return ae(n.text)&&"type"in n.text?(e=n.text.type)!==null&&e!==void 0?e:"text":t in n&&(i=n[t])!==null&&i!==void 0?i:"text"}function Jw(n){var t,e;return n.width=(t=n.width)!==null&&t!==void 0?t:0,n.height=(e=n.height)!==null&&e!==void 0?e:0,n.maxWidth=n.maxLineWidth,n.textConfig=n.text.text||n.text,n}function MBt(n){const{text:t,_originText:e}=n,{text:i}=t;return n.html=i,n.text=e,n.renderable=!1,n}function PBt(n){const{text:t,_originText:e}=n,{text:i}=t;return n.react=i,n.text=e,n.renderable=!1,n}function Qw(n,t="type"){const e=_Q(n,t);return e==="rich"?$t.richtext(Jw(n)):(e==="html"?n=MBt(n):e==="react"&&(n=PBt(n)),$t.text(n))}function OV(n,t,e,i,r){n==="right"?e==="center"?t.setAttribute("x",i-r/2):e==="right"||e==="end"?t.setAttribute("x",i):t.setAttribute("x",i-r):e==="center"?t.setAttribute("x",i+r/2):e==="right"||e==="end"?t.setAttribute("x",i+r):t.setAttribute("x",i)}const wE=(n,t)=>{const e=Math.atan2(n,t);return e<0?e+2*Math.PI:e};function F2(){rn(),Wu(),no(),Oc(),Pl()}var CE=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};F2();class ro extends Nn{getBgRect(){return this._bgRect}getTextShape(){return this._textShape}constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},ro.defaultAttributes,t)),this.name="tag"}render(){var t,e,i;const{text:r="",textStyle:s={},shape:a={},panel:o={},space:l=4,minWidth:u,maxWidth:h,padding:c=4,visible:d,state:p,type:f,textAlwaysCenter:g,containerTextAlign:_}=this.attribute,v=ds(c),y=this.createOrUpdateChild("tag-content",{x:0,y:0,zIndex:1},"group");let b,S=v[1]+v[3],A=v[0]+v[2],w=0,C=0;const{visible:k}=a,M=CE(a,["visible"]);if(Si(k)){const E=(M==null?void 0:M.size)||10,I=Mt(E)?E:Math.max(E[0],E[1]);b=y.createOrUpdateChild("tag-shape",Object.assign(Object.assign({symbolType:"circle",size:E,strokeBoundsBuffer:0},M),{visible:k,x:I/2,y:I/2}),"symbol"),Gt(p==null?void 0:p.shape)||(b.states=p.shape),k&&(C=I+l)}let P;if(S+=C,w+=C,$L({text:r})||f==="rich"){const E=Object.assign(Object.assign(Object.assign({},Jw(Object.assign({type:f,text:r},s))),s),{visible:z(r)&&d!==!1,x:w,y:0});P=y.createOrUpdateChild("tag-text",E,"richtext");const{visible:I}=o,D=CE(o,["visible"]);if(d&&Si(I)){const N=this.createOrUpdateChild("tag-panel",Object.assign(Object.assign({},D),{visible:I&&!!r,x:P.AABBBounds.x1,y:P.AABBBounds.y1,width:P.AABBBounds.width(),height:P.AABBBounds.height()}),"rect");Gt(p==null?void 0:p.panel)||(N.states=p.panel),this._bgRect=N}}else{const E=Object.assign(Object.assign({text:ae(r)&&"type"in r&&r.type==="text"?r.text:r,visible:z(r)&&d!==!1,lineHeight:s==null?void 0:s.fontSize},s),{x:w,y:0});F(E.lineHeight)&&(E.lineHeight=s.fontSize),P=y.createOrUpdateChild("tag-text",E,"text"),Gt(p==null?void 0:p.text)||(P.states=p.text);const I=B2(E.text,s,(e=(t=this.stage)===null||t===void 0?void 0:t.getTheme())===null||e===void 0?void 0:e.text),D=I.width,N=I.height;S+=D;const O=(i=a.size)!==null&&i!==void 0?i:10,L=Mt(O)?O:Math.max(O[0],O[1]);A+=Math.max(N,a.visible?L:0);const{textAlign:H,textBaseline:j}=s;(z(u)||z(h))&&(z(u)&&S<u&&(S=u),z(h)&&S>h&&(S=h,P.setAttribute("maxLineWidth",h-v[1]-v[2])));let G=0,U=0,$=0;H==="left"||H==="start"?$=1:H==="right"||H==="end"?$=-1:H==="center"&&($=0),$?$<0?(G-=S,b&&b.setAttribute("x",(b.attribute.x||0)-D),y.setAttribute("x",-v[1]-C)):$>0&&y.setAttribute("x",v[3]):(G-=S/2,b&&b.setAttribute("x",(b.attribute.x||0)-D/2),y.setAttribute("x",-C/2));const q=_==="right"||_==="end",tt=_==="left"||_==="start";if((_?_==="center":g)&&$){const K=S-v[1]-v[3],J=D+C,Q=$===1?(K-J)/2+C+D/2:v[0]+C-(S/2+J/2-C)+D/2;if(P.setAttributes({x:Q,textAlign:"center"}),b){const dt=Q-D/2-C+L/2;b.setAttributes({x:dt})}}if(tt&&$!==1){const K=S-v[1]-v[3],J=$===0?-K/2+C/2:-S+v[3]+v[1]+C,Q=J+C;if(P.setAttributes({x:Q,textAlign:"left"}),b){const dt=J+L/2;b.setAttributes({x:dt})}}if(q&&$!==-1){const K=S-v[1]-v[3],J=$===0?K/2+C/2:K;if(P.setAttributes({x:J,textAlign:"right"}),b){const Q=J-D-C+L/2;b.setAttributes({x:Q})}}j==="middle"?(U-=A/2,b&&b.setAttribute("y",0)):j==="bottom"?(U-=A,b&&b.setAttribute("y",-N/2),y.setAttribute("y",-v[2])):j==="top"&&(y.setAttribute("y",v[0]),b&&b.setAttribute("y",N/2));const{visible:it}=o,nt=CE(o,["visible"]);if(d&&Si(it)){const K=this.createOrUpdateChild("tag-panel",Object.assign(Object.assign({},nt),{visible:it&&!!r,x:G,y:U,width:S,height:A}),"rect");Gt(p==null?void 0:p.panel)||(K.states=p.panel),this._bgRect=K}}this._textShape=P}}ro.defaultAttributes={visible:!0,textStyle:{fontSize:12,fill:"#000",textAlign:"left",textBaseline:"top"},space:4,padding:4,shape:{fill:"#000"}};const yQ={visible:!0,position:"auto",titleStyle:{fontSize:16,fill:"#08979c"},contentStyle:{fontSize:12,fill:"green"},panel:{visible:!0,fill:"#e6fffb",size:12,space:0,stroke:"#87e8de",lineWidth:1,cornerRadius:4}},bQ={poptip:gt({},yQ)};function EBt(){rn(),Pl(),no(),Wu()}function OBt(n){gt(bQ.poptip,yQ,n)}var RBt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};const RV=new Ai;EBt();class _y extends Nn{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},_y.defaultAttributes,t)),this.name="poptip",this.positionList=["top","tl","tr","bottom","bl","br","left","lt","lb","right","rt","rb"]}render(){var t,e,i,r,s,a,o,l;const{titleStyle:u={},position:h,contentStyle:c={},panel:d={},space:p=4,minWidth:f=0,maxWidth:g=1/0,padding:_=4,maxWidthPercent:v,visible:y,state:b,dx:S=0,dy:A=0}=this.attribute;let{title:w="",content:C=""}=this.attribute;w=this.attribute.titleFormatMethod?this.attribute.titleFormatMethod(w):w,C=this.attribute.contentFormatMethod?this.attribute.contentFormatMethod(C):C;const k=ds(_),M=this.createOrUpdateChild("poptip-content",{x:0,y:0,zIndex:1},"group"),P=g-k[1]-k[3],E=z(w)&&y!==!1,I=Object.assign(Object.assign({text:ut(w)?w:[w],visible:E,wrap:!0},u),{x:k[3],y:k[0],maxLineWidth:P,textAlign:"left",textBaseline:"top"}),D=M.createOrUpdateChild("poptip-title",I,"text");Gt(b==null?void 0:b.title)||(D.states=b.title);const N=D.AABBBounds,O=N.height(),L=N.width();let H=O+p;E||(H=0);const j=z(C)&&y!==!1,G=Object.assign(Object.assign({text:ut(C)?C:[C],visible:j,wrap:!0},c),{x:k[3],y:k[0]+H,maxLineWidth:P,textAlign:"left",textBaseline:"top"}),U=M.createOrUpdateChild("poptip-content",G,"text");Gt(b==null?void 0:b.content)||(U.states=b.content);const $=U.AABBBounds,q=$.height(),tt=$.width();j&&(H+=q);let it=ls(L+k[1]+k[3],tt+k[1]+k[3]);it>g?it=g:it<f&&(it=f);let nt=k[0]+k[2]+H;const{visible:K}=d,J=RBt(d,["visible"]),Q=(t=J.size)!==null&&t!==void 0?t:12,dt=ut(Q)?[Q[0]+((e=J.space)!==null&&e!==void 0?e:0),Q[1]+((i=J.space)!==null&&i!==void 0?i:0)]:Q+((r=J.space)!==null&&r!==void 0?r:0),bt=(s=J.lineWidth)!==null&&s!==void 0?s:1,xt=this.stage?[(a=this.stage.viewWidth)!==null&&a!==void 0?a:this.stage.width,(o=this.stage.viewHeight)!==null&&o!==void 0?o:this.stage.height]:void 0;if(xt){const vt=this.AABBBounds,pt=(l=this.attribute.x)!==null&&l!==void 0?l:vt.x1,jt=xt[0]-vt.x1;let Lt=Math.max(pt,jt);const Yt=(ut(Q)?Q[0]:12)+3;if(Lt=Math.min(Lt-Yt,Lt*v),Lt<it){it=Lt;const Nt=k[1]+k[3];D.setAttribute("maxLineWidth",Lt-Nt),U.setAttribute("maxLineWidth",Lt-Nt),nt=k[0]+k[2],E&&(nt+=D.AABBBounds.height()+p),nt+=U.AABBBounds.height()}}const ht=h==="auto";let St,yt=-1/0;for(let vt=0;vt<this.positionList.length+1;vt++){const pt=ht?this.positionList[vt===this.positionList.length?St:vt]:h,{angle:jt,offset:Lt,rectOffset:Yt}=this.getAngleAndOffset(pt,it,nt,ut(dt)?dt:[dt,dt-bt]);if(Si(K)){const Nt=(ut(Q)?Q[0]:Q)/4,te=M.createOrUpdateChild("poptip-symbol-panel",Object.assign(Object.assign({},J),{visible:K&&(j||E),x:Nt,y:0,strokeBoundsBuffer:-1,boundsPadding:-2,anchor:[0,0],symbolType:"arrow2Left",angle:jt,dx:Lt[0],dy:Lt[1],size:Q,zIndex:-9}),"symbol");Gt(b==null?void 0:b.panel)||(te.states=b.panel);const ge=M.createOrUpdateChild("poptip-rect-panel",Object.assign(Object.assign({},J),{visible:K&&(j||E),x:0,y:0,width:it,height:nt,zIndex:-8}),"rect");Gt(b==null?void 0:b.panel)||(ge.states=b.panel)}if(M.setAttributes({x:-Lt[0]+S,y:-Lt[1]+A}),!ht||!xt)break;{RV.setValue(0,0,it,nt).transformWithMatrix(M.globalTransMatrix);const Nt=RV,te=new Fn().setValue(0,0,xt[0],xt[1]);if($Ct(Nt,te))break;{const ge=Uq(Nt,te),Pe=(ge.x2-ge.x1)*(ge.y2-ge.y1);Pe>yt&&(yt=Pe,St=vt)}}}}getAngleAndOffset(t,e,i,r){const s=r[1]/2;switch(t){case"tl":return{angle:Qe/2*3,offset:[e/4,i+s],rectOffset:[-e/4,-i-r[1]]};case"top":return{angle:Qe/2*3,offset:[e/2,i+s],rectOffset:[0,-i-r[1]]};case"tr":return{angle:Qe/2*3,offset:[e/4*3,i+s],rectOffset:[e/4*3,-i-r[1]]};case"rt":return{angle:0,offset:[-s,i/5],rectOffset:[e/4*3,-i-r[1]]};case"right":return{angle:0,offset:[-s,i/2],rectOffset:[e/4*3,-i-r[1]]};case"rb":return{angle:0,offset:[-s,i/5*4],rectOffset:[e/4*3,-i-r[1]]};case"bl":return{angle:Qe/2,offset:[e/4,-s],rectOffset:[-e/4,-i-r[1]]};case"bottom":return{angle:Qe/2,offset:[e/2,-s],rectOffset:[0,-i-r[1]]};case"br":return{angle:Qe/2,offset:[e/4*3,-s],rectOffset:[e/4*3,-i-r[1]]};case"lt":return{angle:Qe,offset:[e+s,i/5],rectOffset:[-e/4,-i-r[1]]};case"left":return{angle:Qe,offset:[e+s,i/2],rectOffset:[0,-i-r[1]]};case"lb":return{angle:Qe,offset:[e+s,i/5*4],rectOffset:[e/4*3,-i-r[1]]}}}}_y.defaultAttributes={position:"rt",visible:!0,title:null,content:null,titleStyle:{fontSize:12,fill:"#000",textAlign:"left",textBaseline:"top"},contentStyle:{fontSize:12,fill:"#000",textAlign:"left",textBaseline:"top"},maxWidthPercent:.8,space:8,padding:10};var IBt=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};function LBt(n,t){return gt(n,bQ.poptip,t),n}let R0=class{render(n,t,e,i,r,s,a,o,l,u,h,c,d){var p;if(n._showPoptip===1){const{visible:f,visibleCb:g}=n.attribute.poptip||{};if(f===!1||g&&g(n)===!1)return;const _={};gt(_,_y.defaultAttributes,n.attribute.poptip?n.attribute.poptip:{}),this.poptipComponent?this.poptipComponent.initAttributes(_):this.poptipComponent=new _y(_);let v=n.attribute.poptip||{};if(n.type==="text"&&v.title==null&&v.content==null){const S={};LBt(S,v),v=S,v.content=(p=v.content)!==null&&p!==void 0?p:n.attribute.text}const y=n.globalTransMatrix;this.poptipComponent.setAttributes(Object.assign(Object.assign({visibleAll:!0,pickable:!1,childrenPickable:!1},v),{x:y.e,y:y.f})),u.stage.tryInitInteractiveLayer();const b=u.stage.getLayer("_builtin_interactive");b&&b.add(this.poptipComponent)}else n._showPoptip===2&&(n._showPoptip=0,this.poptipComponent&&this.poptipComponent.setAttributes({visibleAll:!1}))}};R0=IBt([Vt()],R0);var xQ=function(n,t,e,i){var r,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(r=n[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let I0=class{constructor(){this.name="poptip",this.activeEvent="onRegister",this._uid=pn.GenAutoIncrementId(),this.key=this.name+this._uid,this.poptip=n=>{const t=n.target;if(t.isContainer||!t.attribute)return void this.unpoptip(n);if(t===this.activeGraphic)return;const{poptip:e}=t.attribute;e&&(t.setAttributes({}),t._showPoptip=1),this.activeGraphic&&(this.activeGraphic.setAttributes({}),this.activeGraphic._showPoptip=2),this.setActiveGraphic(t,!0)},this.unpoptip=n=>{this.activeGraphic&&(this.activeGraphic.setAttributes({}),this.activeGraphic._showPoptip=2,this.setActiveGraphic(null,!0))}}activate(n){this.pluginService=n;const{stage:t}=this.pluginService;t.addEventListener("pointerover",this.poptip)}setActiveGraphic(n,t){this.activeGraphic=n,this.pluginService.stage.renderNextFrame()}deactivate(n){const{stage:t}=this.pluginService;t.removeEventListener("pointerover",this.poptip)}};I0=xQ([Vt()],I0);let L0=class{constructor(){this.name="poptipForText",this.activeEvent="onRegister",this._uid=pn.GenAutoIncrementId(),this.key=this.name+this._uid,this.pointerlave=n=>{const{stage:t}=this.pluginService;n.target===t&&this.unpoptip(n)},this.poptip=n=>{const t=n.target;if(t.type!=="text"||!t.cliped||t.isContainer||!t.attribute||t.attribute.disableAutoClipedPoptip)return void this.unpoptip(n);if(t===this.activeGraphic)return;const{poptip:e={}}=t.attribute;e&&(t.setAttributes({}),t._showPoptip=1),this.activeGraphic&&(this.activeGraphic.setAttributes({}),this.activeGraphic._showPoptip=2),this.setActiveGraphic(t,!0)},this.unpoptip=n=>{this.activeGraphic&&(this.activeGraphic.setAttributes({}),this.activeGraphic._showPoptip=2,this.setActiveGraphic(null,!0))}}activate(n){this.pluginService=n;const{stage:t}=this.pluginService;t.addEventListener("pointerover",this.poptip),t.addEventListener("pointerleave",this.pointerlave)}setActiveGraphic(n,t){this.activeGraphic=n,this.pluginService.stage.renderNextFrame()}deactivate(n){const{stage:t}=this.pluginService;t.removeEventListener("pointerover",this.poptip),t.removeEventListener("pointerleave",this.pointerlave)}};L0=xQ([Vt()],L0);const DBt=new se((n,t,e,i)=>{e(R0)||(n(R0).toSelf().inSingletonScope(),n(tF).toService(R0)),e(I0)||(n(I0).toSelf(),n(vy).toService(I0)),e(L0)||(n(L0).toSelf(),n(vy).toService(L0))});function BBt(){re.load(DBt)}class w1 extends Nn{constructor(){super(...arguments),this.name="crosshair"}render(){this.renderCrosshair(this)}}function FBt(){rn(),Vu()}function jBt(){rn(),Bm()}function NBt(){rn(),A1()}function zBt(){rn(),Wu()}function HBt(){rn(),Bm()}FBt();class C1 extends w1{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},C1.defaultAttributes,t))}renderCrosshair(t){const{start:e,end:i,lineStyle:r}=this.attribute;return t.createOrUpdateChild("crosshair-line",Object.assign({points:[e,i]},r),"line")}setLocation(t){const{start:e,end:i}=t;this.setAttributes({start:e,end:i})}}C1.defaultAttributes={lineStyle:{stroke:"#b2bacf",lineWidth:1,lineDash:[2]}};zBt();class j2 extends w1{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},j2.defaultAttributes,t))}renderCrosshair(t){const{start:e,end:i,rectStyle:r}=this.attribute;return t.createOrUpdateChild("crosshair-rect",Object.assign({x:e.x,y:e.y,width:i.x-e.x,height:i.y-e.y},r),"rect")}setLocation(t){const{start:e,end:i}=t;this.setAttributes({start:e,end:i})}}j2.defaultAttributes={rectStyle:{fill:"#b2bacf",opacity:.2}};jBt();class N2 extends w1{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},N2.defaultAttributes,t))}renderCrosshair(t){const{center:e,radius:i,lineStyle:r}=this.attribute;return t.createOrUpdateChild("crosshair-circle",Object.assign(Object.assign(Object.assign(Object.assign({},e),{outerRadius:i}),this.attribute),r),"arc")}setLocation(t){const{center:e}=this.attribute,i=Ni.distancePP(t,e);this.setAttribute("radius",i)}}N2.defaultAttributes={lineStyle:{stroke:["#b2bacf",!1,!1,!1],lineWidth:1,lineDash:[2]}};HBt();class z2 extends w1{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},z2.defaultAttributes,t))}renderCrosshair(t){const{center:e,radius:i,innerRadius:r=0,sectorStyle:s}=this.attribute,{startAngle:a,endAngle:o}=this.attribute;return t.createOrUpdateChild("crosshair-sector",Object.assign(Object.assign(Object.assign({},e),{outerRadius:i,innerRadius:r,startAngle:a,endAngle:o}),s),"arc")}setLocation(t){const{center:e,startAngle:i=Qg,endAngle:r=tm}=this.attribute,s=r-i,a=Hg(bA(e,t));this.setAttributes({startAngle:a-s/2,endAngle:a+s/2})}}z2.defaultAttributes={sectorStyle:{fill:"#b2bacf",opacity:.2}};NBt();class H2 extends w1{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},H2.defaultAttributes,t))}renderCrosshair(t){const{center:e,radius:i,sides:r=6,lineStyle:s}=this.attribute,{startAngle:a,endAngle:o}=this.attribute,l=(o-a)%(2*Math.PI)==0,u=(o-a)/r;let h;for(let c=0;c<=r;c++){const d=un(e,i,a+u*c);c===0?h=`M${d.x},${d.y}`:h+=`L${d.x},${d.y}`,c===r&&l&&(h+="Z")}return t.createOrUpdateChild("crosshair-polygon",Object.assign({path:h},s),"path")}setLocation(t){const{center:e}=this.attribute,i=Ni.distancePP(t,e);this.setAttribute("radius",i)}}H2.defaultAttributes={lineStyle:{stroke:"#b2bacf",lineWidth:1,lineDash:[2]}};const fh=new Uint32Array(33),xo=new Uint32Array(33);xo[0]=0,fh[0]=~xo[0];for(let n=1;n<=32;++n)xo[n]=xo[n-1]<<1|1,fh[n]=~xo[n];function VBt(n,t){const e=new Uint32Array(~~((n*t+32)/32));function i(s,a){e[s]|=a}function r(s,a){e[s]&=a}return{array:e,get:(s,a)=>{const o=a*n+s;return e[o>>>5]&1<<(31&o)},set:(s,a)=>{const o=a*n+s;i(o>>>5,1<<(31&o))},clear:(s,a)=>{const o=a*n+s;r(o>>>5,~(1<<(31&o)))},getRange:({x1:s,y1:a,x2:o,y2:l})=>{if(o<0||l<0||s>n||a>t)return!0;let u,h,c,d,p=l;for(;p>=a;--p)if(u=p*n+s,h=p*n+o,c=u>>>5,d=h>>>5,c===d){if(e[c]&fh[31&u]&xo[1+(31&h)])return!0}else{if(e[c]&fh[31&u]||e[d]&xo[1+(31&h)])return!0;for(let f=c+1;f<d;++f)if(e[f])return!0}return!1},setRange:({x1:s,y1:a,x2:o,y2:l})=>{if(o<0||l<0||s>n||a>t)return;let u,h,c,d,p;for(;a<=l;++a)if(u=a*n+s,h=a*n+o,c=u>>>5,d=h>>>5,c===d)i(c,fh[31&u]&xo[1+(31&h)]);else for(i(c,fh[31&u]),i(d,xo[1+(31&h)]),p=c+1;p<d;++p)i(p,4294967295)},clearRange:({x1:s,y1:a,x2:o,y2:l})=>{let u,h,c,d,p;for(;a<=l;++a)if(u=a*n+s,h=a*n+o,c=u>>>5,d=h>>>5,c===d)r(c,xo[31&u]|fh[1+(31&h)]);else for(r(c,xo[31&u]),r(d,fh[1+(31&h)]),p=c+1;p<d;++p)r(p,0)},outOfBounds:({x1:s,y1:a,x2:o,y2:l})=>s<0||a<0||l>=t||o>=n,toImageData:s=>{const a=s.createImageData(n,t),o=a.data;for(let l=0;l<t;++l)for(let u=0;u<n;++u){const h=l*n+u,c=4*h,d=e[h>>>5]&1<<(31&h);o[c+0]=255*d,o[c+1]=255*d,o[c+2]=255*d,o[c+3]=31}return a}}}function SQ(n,t,e={top:0,left:0,right:0,bottom:0}){const{top:i=0,left:r=0,right:s=0,bottom:a=0}=e,o=Math.max(1,Math.sqrt(n*t/1e6)),l=~~((n+r+s+o)/o),u=~~((t+i+a+o)/o),h=c=>~~(c/o);return h.bitmap=()=>VBt(l,u),h.x=c=>~~((c+r)/o),h.y=c=>~~((c+i)/o),h.ratio=o,h.padding=e,h.width=n,h.height=t,h}function Ql(n,t,e=!1){if(e){const{x1:i,x2:r,y1:s,y2:a}=t,o=Zi(i,0,n.width),l=Zi(r,0,n.width),u=Zi(s,0,n.height),h=Zi(a,0,n.height);return{x1:n.x(o),x2:n.x(l),y1:n.y(u),y2:n.y(h)}}return{x1:n.x(t.x1),x2:n.x(t.x2),y1:n.y(t.y1),y2:n.y(t.y2)}}function yS(n,t,e,i=!0,r=0){let s=e;return r>0&&(s={x1:e.x1-r,x2:e.x2+r,y1:e.y1-r,y2:e.y2+r}),s=Ql(n,s),!(i&&t.outOfBounds(s))&&!t.getRange(s)}function kE(n,t,e,i=[],r=!0,s=0){const a=i.filter(o=>z(o));for(let o=0;o<a.length;o++){const l=e.clone();if(l.setAttributes(a[o]),l.update(),yS(n,t,l.AABBBounds,r,s))return t.setRange(Ql(n,l.AABBBounds,!0)),a[o]}return!1}function WBt(n,t,e,i,r,s,a){var o,l;const u=(o=i.overlap)===null||o===void 0?void 0:o.clampForce,h=(l=i.overlap)===null||l===void 0?void 0:l.overlapPadding;if(e.type==="bound"||e.type==="position"){if(ft(a)){const c=((ft(e.position)?e.position(r.attribute):e.position)||UBt(i.type)).map(d=>a(r.AABBBounds,s,d,i.offset));return kE(n,t,r,c,u,h)}return!1}if(e.type==="moveY"){const c=(e.offset?ft(e.offset)?e.offset(r.attribute):e.offset:[]).map(d=>({x:r.attribute.x,y:r.attribute.y+d}));return kE(n,t,r,c,u,h)}if(e.type==="moveX"){const c=(e.offset?ft(e.offset)?e.offset(r.attribute):e.offset:[]).map(d=>({x:r.attribute.x+d,y:r.attribute.y}));return kE(n,t,r,c,u,h)}return!1}const $Bt=["top","bottom","right","left","top-right","bottom-right","top-left","bottom-left"],GBt=["top","inside-top","inside"];function UBt(n){return n==="rect"?GBt:$Bt}function YBt(n,t,e){const{x1:i,x2:r,y1:s,y2:a}=n.AABBBounds,o=Math.min(i,r),l=Math.max(i,r),u=Math.min(s,a),h=Math.max(s,a);let c=0,d=0;return o<0&&l-o<=t?c=-o:l>t&&o-(l-t)>=0&&(c=t-l),u<0&&h-u<=e?d=-u:h>e&&u-(h-e)>=0&&(d=e-h),{dx:c,dy:d}}const XBt=(n={})=>{var t,e,i;return{from:{opacity:0,fillOpacity:0,strokeOpacity:0},to:{opacity:(t=n.opacity)!==null&&t!==void 0?t:1,fillOpacity:(e=n.fillOpacity)!==null&&e!==void 0?e:1,strokeOpacity:(i=n.strokeOpacity)!==null&&i!==void 0?i:1}}},KBt=(n={})=>{var t,e,i;return{from:{opacity:(t=n.opacity)!==null&&t!==void 0?t:1,fillOpacity:(e=n.fillOpacity)!==null&&e!==void 0?e:1,strokeOpacity:(i=n.strokeOpacity)!==null&&i!==void 0?i:1},to:{opacity:0,fillOpacity:0,strokeOpacity:0}}},IV={fadeIn:XBt,fadeOut:KBt};function LV(n,t){var e,i;return(i=(e=IV[t])===null||e===void 0?void 0:e.call(IV,n))!==null&&i!==void 0?i:{from:{},to:{}}}function qBt(n,t,e){if(!ut(e)){const{duration:i,easing:r,increaseEffect:s=!0}=e;return n.animate().to(t.attribute,i,r),void(s&&DV(n,t,i,r))}e.forEach((i,r)=>{const{duration:s,easing:a,increaseEffect:o=!0,channel:l}=i,{from:u,to:h}=ZBt(n,t,l,i.options);Gt(h)||n.animate().to(h,s,a),"text"in u&&"text"in h&&o&&DV(n,t,s,a)})}const ZBt=(n,t,e,i)=>{const r=Object.assign({},n.attribute),s=Object.assign({},t.attribute);return ot(i==null?void 0:i.excludeChannels).forEach(a=>{delete s[a]}),Object.keys(s).forEach(a=>{e&&!e.includes(a)&&delete s[a]}),{from:r,to:s}};function DV(n,t,e,i){n.attribute.text!==t.attribute.text&&st(Number(n.attribute.text)*Number(t.attribute.text))&&n.animate().play(new rMt({text:n.attribute.text},{text:t.attribute.text},e,i))}const TE={mode:"same-time",duration:300,easing:"linear"};function JBt(n){return n.radius?{x:Math.cos(n.angle)*n.radius,y:Math.sin(n.angle)*n.radius}:{x:0,y:0}}function Rx(n,t,e,i){const r=JBt({radius:e,angle:i});return{x:n+r.x,y:t+r.y}}function QBt(n){return(n=t3t(n))>0&&n<=Math.PI/2?2:n>Math.PI/2&&n<=Math.PI?3:n>Math.PI&&n<=3*Math.PI/2?4:1}function t3t(n){for(;n<0;)n+=2*Math.PI;for(;n>=2*Math.PI;)n-=2*Math.PI;return n}function Yc(n){return n===3||n===4}function e3t(n){return n===1||n===2}function i3t(n,t,e,i,r,s){if(n===0&&t===0||s<=0)return[];if(n===0){const d=-e/t,p=s**2-(d-r)**2;return p<0?[]:p===0?[{x:i,y:d}]:[{x:Math.sqrt(p)+i,y:d},{x:-Math.sqrt(p)+i,y:d}]}if(t===0){const d=-e/n,p=s**2-(d-i)**2;return p<0?[]:p===0?[{x:d,y:r}]:[{x:d,y:Math.sqrt(p)+r},{x:d,y:-Math.sqrt(p)+r}]}const a=(t/n)**2+1,o=2*((e/n+i)*(t/n)-r),l=o**2-4*a*((e/n+i)**2+r**2-s**2);if(l<0)return[];const u=(-o+Math.sqrt(l))/(2*a),h=(-o-Math.sqrt(l))/(2*a),c=-(t*u+e)/n;return l===0?[{x:c,y:u}]:[{x:c,y:u},{x:-(t*h+e)/n,y:h}]}function n3t(n,t){return t>2*n?NaN:2*Math.asin(t/2/n)}function r3t(n,t){const{x1:e,y1:i,x2:r,y2:s}=n,{x1:a,y1:o,x2:l,y2:u}=t;return!(e<=a&&r<=a||e>=l&&r>=l||i<=o&&s<=o||i>=u&&s>=u)}const AQ=(n,t,e="top",i=0)=>{if(!n)return;const{x1:r,y1:s,x2:a,y2:o}=n,l=Math.abs(a-r),u=Math.abs(o-s),h=(t.x1+t.x2)/2,c=(t.y1+t.y2)/2;let d=0,p=0,f=0,g=0;t&&(f=Math.abs(t.x1-t.x2)/2,g=Math.abs(t.y1-t.y2)/2);const _={"top-right":-235,"top-left":235,"bottom-right":45,"bottom-left":-45};switch(e){case"top":p=-1;break;case"bottom":p=1;break;case"left":d=-1;break;case"right":d=1;break;case"bottom-left":case"bottom-right":case"top-left":case"top-right":d=Math.sin(_[e]*(Math.PI/180)),p=Math.cos(_[e]*(Math.PI/180));break;case"center":d=0,p=0}return{x:h+d*(i+f)+Math.sign(d)*(l/2),y:c+p*(i+g)+Math.sign(p)*(u/2)}},s3t=n=>{if(!n||!n.attribute)return[];const{points:t,segments:e}=n.attribute;if(e&&e.length){const i=[];return e.forEach(r=>{r.points.forEach(s=>{i.push(s)})}),i}return t};function wQ(n,t,e="end",i=0){if(!n||!t)return{x:1/0,y:1/0};const{x1:r,x2:s}=n,a=Math.abs(s-r),o=t.x1;let l=o;return e==="end"?l=o+a/2+i:e==="start"&&(l=o-a/2-i),{x:l,y:t.y1}}function a3t(n,t){if(!n||!t||ty(n,t,!0))return;const e=Math.min(n.x1,n.x2),i=Math.min(n.y1,n.y2),r=Math.min(t.x1,t.x2),s=Math.min(t.y1,t.y2),a=Math.abs(n.x2-e)/2,o=Math.abs(n.y2-i)/2,l=Math.abs(t.x2-r)/2,u=Math.abs(t.y2-s)/2,h=e+a,c=i+o,d=r+l,p=s+u,f=d-h,g=p-c;return[BV(f,g,h,c,a,o),BV(-f,-g,d,p,l,u)]}function BV(n,t,e,i,r,s){return Math.abs(t/n)<s/r?{x:e+(n>0?r:-r),y:i+t*r/Math.abs(n)}:{x:e+n*s/Math.abs(t),y:i+(t>0?s:-s)}}function o3t(){rn(),Pl(),Oc(),Vu()}o3t();class El extends Nn{setBitmap(t){this._bitmap=t}setBitmapTool(t){this._bmpTool=t}constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},El.defaultAttributes,t)),this.name="label",this._onHover=i=>{const r=i.target;r===this._lastHover||Gt(r.states)||(r.addState(ln.hover,!0),Io(this,s=>{s===r||Gt(s.states)||s.addState(ln.hoverReverse,!0)}),this._lastHover=r)},this._onUnHover=i=>{this._lastHover&&(Io(this,r=>{Gt(r.states)||(r.removeState(ln.hoverReverse),r.removeState(ln.hover))}),this._lastHover=null)},this._onClick=i=>{const r=i.target;if(this._lastSelect===r&&r.hasState("selected"))return this._lastSelect=null,void Io(this,s=>{Gt(s.states)||(s.removeState(ln.selectedReverse),s.removeState(ln.selected))});Gt(r.states)||(r.addState(ln.selected,!0),Io(this,s=>{s===r||Gt(s.states)||s.addState(ln.selectedReverse,!0)}),this._lastSelect=r)},this._handleRelatedGraphicSetState=i=>{var r,s,a,o,l;if(((r=i.detail)===null||r===void 0?void 0:r.type)===ji.STATE||((s=i.detail)===null||s===void 0?void 0:s.type)===ji.ANIMATE_UPDATE&&(!((a=i.detail.animationState)===null||a===void 0)&&a.isFirstFrameOfStep)){const u=(l=(o=i.target)===null||o===void 0?void 0:o.currentStates)!==null&&l!==void 0?l:[],h=this._isCollectionBase?[...this._graphicToText.values()]:[this._graphicToText.get(i.target)];this.updateStatesOfLabels(h,u)}}}labeling(t,e,i,r){}_createLabelLine(t,e){const i=a3t(t.AABBBounds,e==null?void 0:e.AABBBounds);if(i){const r=$t.line({points:i});return e&&e.attribute.fill&&r.setAttribute("stroke",e.attribute.fill),this.attribute.line&&!Gt(this.attribute.line.style)&&r.setAttributes(this.attribute.line.style),this._setStatesOfLabelLine(r),r}}render(){if(this._prepare(),F(this._idToGraphic)||this._isCollectionBase&&F(this._idToPoint))return;const{overlap:t,smartInvert:e,dataFilter:i,customLayoutFunc:r,customOverlapFunc:s}=this.attribute;let a=this.attribute.data;ft(i)&&(a=i(a));let o=this._initText(a);o=ft(r)?r(a,o,this.getRelatedGraphic.bind(this),this._isCollectionBase?l=>this._idToPoint.get(l.id):null):this._layout(o),ft(s)?o=s(o,this.getRelatedGraphic.bind(this),this._isCollectionBase?l=>this._idToPoint.get(l.id):null):t!==!1&&(o=this._overlapping(o)),ft(this.attribute.onAfterOverlapping)&&this.attribute.onAfterOverlapping(o,this.getRelatedGraphic.bind(this),this._isCollectionBase?l=>this._idToPoint.get(l.id):null),o&&o.length&&o.forEach(l=>{this._bindEvent(l),this._setStatesOfText(l)}),e!==!1&&this._smartInvert(o),this._renderLabels(o)}_bindEvent(t){if(this.attribute.disableTriggerEvent||!t)return;const{hover:e,select:i}=this.attribute;e&&(t.addEventListener("pointermove",this._onHover),t.addEventListener("pointerout",this._onUnHover)),i&&t.addEventListener("pointerdown",this._onClick)}_setStatesOfText(t){if(!t)return;const e=this.attribute.state;e&&!Gt(e)&&(t.states=e)}_setStatesOfLabelLine(t){if(!t)return;const e=this.attribute.labelLineState;e&&!Gt(e)&&(t.states=e)}_createLabelText(t){var e,i;const r=Object.assign(Object.assign({},(i=(e=this.stage)===null||e===void 0?void 0:e.getTheme())===null||i===void 0?void 0:i.text),t);return Qw(r,"textType")}_prepare(){var t,e,i,r,s;const a=[];let o;if(o=ft(this.attribute.getBaseMarks)?this.attribute.getBaseMarks():_Bt(this.getRootNode(),this.attribute.baseMarkGroupName),o.forEach(u=>{u.releaseStatus!=="willRelease"&&a.push(u)}),(t=this._idToGraphic)===null||t===void 0||t.clear(),(e=this._idToPoint)===null||e===void 0||e.clear(),this._baseMarks=a,this._isCollectionBase=this.attribute.type==="line-data",!a||a.length===0)return;const{data:l}=this.attribute;if(l&&l.length!==0){if(this._idToGraphic||(this._idToGraphic=new Map),this._isCollectionBase){this._idToPoint||(this._idToPoint=new Map);let u=0;for(let h=0;h<a.length;h++){const c=a[h],d=s3t(c);if(d&&d.length)for(let p=0;p<d.length;p++){const f=l[u];f&&d[p]&&(z(f.id)||(f.id=`vrender-component-${this.name}-${u}`),this._idToPoint.set(f.id,d[p]),this._idToGraphic.set(f.id,c)),u++}}}else for(let u=0;u<a.length;u++){const h=l[u],c=a[u];h&&c&&(z(h.id)||(h.id=`vrender-component-${this.name}-${u}`),this._idToGraphic.set(h.id,c))}if(this.attribute.animation!==!1){const u=ae(this.attribute.animation)?this.attribute.animation:{};this._animationConfig={enter:gt({},TE,u,(i=this.attribute.animationEnter)!==null&&i!==void 0?i:{}),exit:gt({},TE,u,(r=this.attribute.animationExit)!==null&&r!==void 0?r:{}),update:ut(this.attribute.animationUpdate)?this.attribute.animationUpdate:gt({},TE,u,(s=this.attribute.animationUpdate)!==null&&s!==void 0?s:{})}}}}getRelatedGraphic(t){return this._idToGraphic.get(t.id)}_initText(t=[]){const{textStyle:e={}}=this.attribute,i=[];for(let r=0;r<t.length;r++){const s=t[r],a=this.getRelatedGraphic(s);if(!a)continue;const o=Object.assign(Object.assign({fill:this._isCollectionBase?ut(a.attribute.stroke)?a.attribute.stroke.find(u=>!!u&&u!==!0):a.attribute.stroke:a.attribute.fill},e),s),l=this._createLabelText(o);i.push(l)}return i}_layout(t){const{position:e,offset:i}=this.attribute;for(let r=0;r<t.length;r++){const s=t[r];if(!s)return;const a=s.attribute,o=this.getRelatedGraphic(a);if(!o)continue;s.attachedThemeGraphic=this;const l=this.getGraphicBounds(s);s.attachedThemeGraphic=null;const u=ft(e)?e(a):e,h=this._isCollectionBase?this.getGraphicBounds(null,this._idToPoint.get(a.id),u):this.getGraphicBounds(o,{x:a.x,y:a.y},u),c=this.labeling(l,h,u,i);c&&s.setAttributes(c)}return t}_overlapping(t){var e,i,r,s;if(t.length===0)return[];const a=ae(this.attribute.overlap)?this.attribute.overlap:{},o=[],l=this.getBaseMarkGroup(),u=(e=a.size)!==null&&e!==void 0?e:{width:(i=l==null?void 0:l.AABBBounds.width())!==null&&i!==void 0?i:0,height:(r=l==null?void 0:l.AABBBounds.height())!==null&&r!==void 0?r:0};if(u.width===0||u.height===0)return t;const{avoidBaseMark:h,strategy:c=[],hideOnHit:d=!0,clampForce:p=!0,avoidMarks:f=[],overlapPadding:g}=a,_=this._bmpTool||SQ(u.width,u.height),v=this._bitmap||_.bitmap(),y=c.some(b=>b.type==="bound");h&&((s=this._baseMarks)===null||s===void 0||s.forEach(b=>{b.AABBBounds&&v.setRange(Ql(_,b.AABBBounds,!0))})),f.length>0&&f.forEach(b=>{It(b)?yBt(this.getRootNode(),b).forEach(S=>{S.AABBBounds&&v.setRange(Ql(_,S.AABBBounds,!0))}):b.AABBBounds&&v.setRange(Ql(_,b.AABBBounds,!0))});for(let b=0;b<t.length;b++){if(t[b].visible===!1)continue;const S=t[b],A=this.getRelatedGraphic(S.attribute);if(S.update(),!ty(A.AABBBounds,{x1:0,x2:_.width,y1:0,y2:_.height},!0))continue;if(yS(_,v,S.AABBBounds,p,g)){if(!y){v.setRange(Ql(_,S.AABBBounds,!0)),o.push(S);continue}if(y&&A&&A.AABBBounds&&this._canPlaceInside(S.AABBBounds,A.AABBBounds)){v.setRange(Ql(_,S.AABBBounds,!0)),o.push(S);continue}}let w=!1;for(let C=0;C<c.length;C++)if(w=WBt(_,v,c[C],this.attribute,S,this._isCollectionBase?this.getGraphicBounds(null,this._idToPoint.get(t[b].attribute.id)):this.getGraphicBounds(A,t[b].attribute),this.labeling),w!==!1){S.setAttributes({x:w.x,y:w.y}),o.push(S);break}if(!w&&p){const{dx:C=0,dy:k=0}=YBt(S,_.width,_.height);if(C===0&&k===0){if(yS(_,v,S.AABBBounds)){v.setRange(Ql(_,S.AABBBounds,!0)),o.push(S);continue}}else if(yS(_,v,{x1:S.AABBBounds.x1+C,x2:S.AABBBounds.x2+C,y1:S.AABBBounds.y1+k,y2:S.AABBBounds.y2+k})){S.setAttributes({x:S.attribute.x+C,y:S.attribute.y+k}),v.setRange(Ql(_,S.AABBBounds,!0)),o.push(S);continue}}!w&&!d&&o.push(S)}return o}getBaseMarkGroup(){const{baseMarkGroupName:t}=this.attribute;if(t)return this.getRootNode().find(e=>e.name===t,!0)}getGraphicBounds(t,e={}){if(t){if(t.attribute.visible!==!1)return t.AABBBounds;const{x:s,y:a}=t.attribute;return{x1:s,x2:s,y1:a,y2:a}}const{x:i,y:r}=e;return{x1:i,x2:i,y1:r,y2:r}}_renderLabels(t){this._enableAnimation===!1||this.attribute.animation===!1?this._renderWithOutAnimation(t):this._renderWithAnimation(t)}_renderWithAnimation(t){var e;const{syncState:i}=this.attribute,r=new Map,s=this._graphicToText||new Map,a=[],o=[],{visible:l}=(e=this.attribute.line)!==null&&e!==void 0?e:{};t&&t.forEach((u,h)=>{var c;const d=this.getRelatedGraphic(u.attribute),p=u.attribute.id,f=this._isCollectionBase?p:d,g=s!=null&&s.get(f)?"update":"enter";let _;if(l&&(_=this._createLabelLine(u,d)),i&&this.updateStatesOfLabels([_?{text:u,labelLine:_}:{text:u}],(c=d.currentStates)!==null&&c!==void 0?c:[]),g==="enter"){if(a.push(u),r.set(f,_?{text:u,labelLine:_}:{text:u}),d){const{from:v,to:y}=LV(u.attribute,"fadeIn");this.add(u),_&&(o.push(_),this.add(_)),this._syncStateWithRelatedGraphic(d),this._animationConfig.enter.duration>0&&d.once("animate-bind",b=>{u.setAttributes(v),_&&_.setAttributes(v);const S=this._afterRelatedGraphicAttributeUpdate(u,a,_,o,h,d,y,this._animationConfig.enter);d.on("afterAttributeUpdate",S)})}}else if(g==="update"){const v=s.get(f);s.delete(f),r.set(f,v);const y=v.text,{duration:b,easing:S}=this._animationConfig.update;qBt(y,u,this._animationConfig.update),v.labelLine&&_&&v.labelLine.animate().to(_.attribute,b,S)}}),s.forEach(u=>{var h;(h=u.text)===null||h===void 0||h.animate().to(LV(u.text.attribute,"fadeOut").to,this._animationConfig.exit.duration,this._animationConfig.exit.easing).onEnd(()=>{this.removeChild(u.text),u.labelLine&&this.removeChild(u.labelLine)})}),this._graphicToText=r}_renderWithOutAnimation(t){var e;const{syncState:i}=this.attribute,r=new Map,s=this._graphicToText||new Map,{visible:a}=(e=this.attribute.line)!==null&&e!==void 0?e:{};t&&t.forEach(o=>{var l;const u=this.getRelatedGraphic(o.attribute),h=s!=null&&s.get(u)?"update":"enter",c=this._isCollectionBase?o.attribute.id:u;let d;if(a&&(d=this._createLabelLine(o,u)),i&&this.updateStatesOfLabels([d?{text:o,labelLine:d}:{text:o}],(l=u.currentStates)!==null&&l!==void 0?l:[]),h==="enter")r.set(c,d?{text:o,labelLine:d}:{text:o}),this.add(o),d&&this.add(d),this._syncStateWithRelatedGraphic(u);else if(h==="update"){const p=s.get(c);s.delete(c),r.set(c,p),p.text.setAttributes(o.attribute),p.labelLine&&d&&p.labelLine.setAttributes(d.attribute)}}),s.forEach(o=>{this.removeChild(o.text),o.labelLine&&this.removeChild(o.labelLine)}),this._graphicToText=r}updateStatesOfLabels(t,e){t.forEach(i=>{i&&(i.text&&i.text.useStates(e),i.labelLine&&i.labelLine.useStates(e))})}_syncStateWithRelatedGraphic(t){this.attribute.syncState&&t.on("afterAttributeUpdate",this._handleRelatedGraphicSetState)}_afterRelatedGraphicAttributeUpdate(t,e,i,r,s,a,o,{mode:l,duration:u,easing:h,delay:c}){const d=p=>{var f,g,_;const{detail:v}=p;if(!v)return{};const y=(f=v.animationState)===null||f===void 0?void 0:f.step;if(!(v.type===ji.ANIMATE_UPDATE&&y&&!(y.type==="wait"&&((g=y.prev)===null||g===void 0?void 0:g.type)==null)))return{};if(v.type===ji.ANIMATE_END)return t.setAttributes(o),void(i&&i.setAttributes(o));const b=()=>{a&&(a.onAnimateBind=void 0,a.removeEventListener("afterAttributeUpdate",d))};switch(l){case"after":v.animationState.end&&(t.animate({onStart:b}).wait(c).to(o,u,h),i&&i.animate().wait(c).to(o,u,h));break;case"after-all":s===e.length-1&&v.animationState.end&&(e.forEach(S=>{S.animate({onStart:b}).wait(c).to(o,u,h)}),r.forEach(S=>{S.animate().wait(c).to(o,u,h)}));break;default:if(this._isCollectionBase){const S=this._idToPoint.get(t.attribute.id);!S||t.animates&&t.animates.has("label-animate")||!a.containsPoint(S.x,S.y,ry.LOCAL,(_=this.stage)===null||_===void 0?void 0:_.pickerService)||(t.animate({onStart:b}).wait(c).to(o,u,h),i&&i.animate().wait(c).to(o,u,h))}else v.animationState.isFirstFrameOfStep&&(t.animate({onStart:b}).wait(c).to(o,u,h),i&&i.animate().wait(c).to(o,u,h))}};return d}_smartInvert(t){var e,i,r,s,a;const o=ae(this.attribute.smartInvert)?this.attribute.smartInvert:{},{textType:l,contrastRatiosThreshold:u,alternativeColors:h,mode:c}=o,d=(e=o.fillStrategy)!==null&&e!==void 0?e:"invertBase",p=(i=o.strokeStrategy)!==null&&i!==void 0?i:"base",f=(r=o.brightColor)!==null&&r!==void 0?r:"#ffffff",g=(s=o.darkColor)!==null&&s!==void 0?s:"#000000",_=(a=o.outsideEnable)!==null&&a!==void 0&&a;if(d!=="null"||p!=="null")for(let v=0;v<t.length;v++){const y=t[v];if(!y)continue;const b=this.getRelatedGraphic(y.attribute),S=b.attribute.fill,A=y.attribute.fill,w=S,C=PV(A,S,l,u,h,c),k=hF(C,f)?f:g;if(_){const M=qp(d,w,C,k);if(M&&y.setAttributes({fill:M}),y.attribute.lineWidth===0)continue;const P=qp(p,w,C,k);P&&y.setAttributes({stroke:P})}else if(this._canPlaceInside(y.AABBBounds,b.AABBBounds)){const M=qp(d,w,C,k);if(M&&y.setAttributes({fill:M}),y.attribute.lineWidth===0)continue;const P=qp(p,w,C,k);P&&y.setAttributes({stroke:P})}else{if(y.attribute.lineWidth===0)continue;if(y.attribute.stroke){y.setAttributes({fill:PV(y.attribute.fill,y.attribute.stroke,l,u,h,c)});continue}const M=qp(d,w,C,k);M&&y.setAttributes({fill:M});const P=qp(p,w,C,k);P&&y.setAttributes({stroke:P})}}}_canPlaceInside(t,e){return!(!t||!e)&&e.encloses(t)}setLocation(t){this.translateTo(t.x,t.y)}disableAnimation(){this._enableAnimation=!1}enableAnimation(){this._enableAnimation=!0}}El.defaultAttributes={textStyle:{fontSize:12,textAlign:"center",textBaseline:"middle",boundsPadding:[-2,-1,-2,-1]},offset:0,pickable:!1};class V2 extends El{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},V2.defaultAttributes,t)),this.name="symbol-label"}labeling(t,e,i="top",r=0){return AQ(t,e,i,r)}}V2.defaultAttributes={textStyle:{fill:"#000"},position:"top",offset:5};class yy extends El{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},yy.defaultAttributes,t))}labeling(t,e,i="top",r=0){if(!t||!e)return;const{x1:s,y1:a,x2:o,y2:l}=t,u=Math.abs(o-s),h=Math.abs(l-a),{x:c,y:d}=Yq(e,i);let p=0,f=0;const g=i.includes("inside");switch(i.includes("top")?f=g?1:-1:i.includes("bottom")?f=g?-1:1:i.includes("left")?p=g?1:-1:i.includes("right")&&(p=g?-1:1),i){case"top-right":case"bottom-right":p=-1;break;case"top-left":case"bottom-left":p=1}return{x:c+p*r+p*u/2,y:d+f*r+f*h/2}}}yy.tag="rect-label",yy.defaultAttributes={textStyle:{fill:"#000"},position:"top",offset:5};let CQ=class kQ extends El{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},kQ.defaultAttributes,t)),this.name="line-label"}getGraphicBounds(t,e={},i="end"){if(!t||t.type!=="line")return super.getGraphicBounds(t,e);const r=t.attribute.points||[e],s=i==="start"?0:r.length-1;return r[s]?{x1:r[s].x,x2:r[s].x,y1:r[s].y,y2:r[s].y}:void 0}labeling(t,e,i="end",r=0){return wQ(t,e,i,r)}};CQ.defaultAttributes={textStyle:{fill:"#000"},position:"end",offset:6};class l3t{constructor(t,e,i,r,s,a,o,l,u){this.refDatum=t,this.center=e,this.outerCenter=i,this.quadrant=r,this.radian=s,this.middleAngle=a,this.innerRadius=o,this.outerRadius=l,this.circleCenter=u,this.labelVisible=!0,this.labelLimit=0}getLabelBounds(){return this.labelPosition&&this.labelSize?{x1:this.labelPosition.x-this.labelSize.width/2,y1:this.labelPosition.y-this.labelSize.height/2,x2:this.labelPosition.x+this.labelSize.width/2,y2:this.labelPosition.y+this.labelSize.height/2}:{x1:0,x2:0,y1:0,y2:0}}}class W2 extends El{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},W2.defaultAttributes,t)),this.name="arc-label",this._ellipsisWidth=0,this._arcLeft=new Map,this._arcRight=new Map}_overlapping(t){return t}labeling(t,e,i="outside",r=0){if(t&&e)return{x:0,y:0}}_layout(t){if(!t||!t.length)return;const e=super._layout(t),i=e.map(l=>this.getGraphicBounds(l)),r=Object.assign(Object.assign({},this.attribute.textStyle),{text:"…"});let s=1/0;if(r.ellipsis!==!1){const l=this._createLabelText(r),u=this.getGraphicBounds(l);s=u.x2-u.x1}const a=e.map(l=>l.attribute),o=this.layoutArcLabels(this.attribute.position,this.attribute,Array.from(this._idToGraphic.values()),a,i,s);for(let l=0;l<a.length;l++){const u=a[l],h=o.find(c=>{var d;return((d=c.refDatum)===null||d===void 0?void 0:d.id)===u.id});if(h){const c={visible:h.labelVisible,x:h.labelPosition.x,y:h.labelPosition.y,angle:h.angle,maxLineWidth:h.labelLimit,points:h.pointA&&h.pointB&&h.pointC?[h.pointA,h.pointB,h.pointC]:void 0,line:h.labelLine};e[l].setAttributes(c)}}return e}layoutArcLabels(t,e,i,r,s,a){this._arcLeft.clear(),this._arcRight.clear(),this._ellipsisWidth=a;let o=0;i.forEach(c=>{c.attribute.outerRadius>o&&(o=c.attribute.outerRadius)}),r.forEach((c,d)=>{var p,f;const g=this._idToGraphic.get(c.id).attribute,_={x:(p=g==null?void 0:g.x)!==null&&p!==void 0?p:0,y:(f=g==null?void 0:g.y)!==null&&f!==void 0?f:0};if(!F(r[d])&&!F(s[d])){const v=r[d]?r[d]:null,y=s[d]?s[d]:{x1:0,x2:0,y1:0,y2:0},b=(g.startAngle+g.endAngle)/2,S=g.endAngle-g.startAngle,A=QBt(g.endAngle-S/2),w=Rx(_.x,_.y,g.outerRadius,b),C=Rx(_.x,_.y,o+e.line.line1MinLength,b),k=new l3t(v,w,C,A,S,b,g.innerRadius,g.outerRadius,_);k.pointA=Rx(_.x,_.y,this.computeDatumRadius(2*_.x,2*_.y,g.outerRadius),k.middleAngle),k.labelSize={width:y.x2-y.x1,height:y.y2-y.y1},e3t(k.quadrant)?this._arcRight.set(k.refDatum,k):Yc(k.quadrant)&&this._arcLeft.set(k.refDatum,k)}});const l=Array.from(this._arcLeft.values()),u=Array.from(this._arcRight.values()),h=[];switch(t){case"inside":case"inside-inner":case"inside-outer":h.push(...this._layoutInsideLabels(u,e,i)),h.push(...this._layoutInsideLabels(l,e,i));break;default:h.push(...this._layoutOutsideLabels(u,e,i)),h.push(...this._layoutOutsideLabels(l,e,i))}return h}_layoutInsideLabels(t,e,i){var r,s;const a=e,o=a.spaceWidth,l=(r=a.position)!==null&&r!==void 0?r:"inside",u=(s=a.offsetRadius)!==null&&s!==void 0?s:-o;return t.forEach(h=>{var c,d,p;const{labelSize:f,radian:g}=h,_=h.innerRadius,v=h.outerRadius;let y;if(g<n3t(v,f.height))y=0;else{let k;k=g>=Math.PI?_:Math.max(_,f.height/2/Math.tan(g/2)),y=v-k-o}a.rotate!==!0&&(y=v-o);const b=this._getFormatLabelText(h.refDatum,y);h.labelText=b;const S=Math.min(y,h.labelSize.width),A=this._computeAlign(h,e);let w,C=0;if(l==="inside"&&(C=A==="left"?S:A==="right"?0:S/2),w=l==="inside-inner"?_-u+C:v+u-C,h.labelPosition=Rx(h.circleCenter.x,h.circleCenter.y,w,h.middleAngle),h.labelLimit=S,sl(S,0)||(h.labelVisible=!1),a.rotate!==!1){h.angle=(d=(c=e.textStyle)===null||c===void 0?void 0:c.angle)!==null&&d!==void 0?d:h.middleAngle;let k=(p=a.offsetAngle)!==null&&p!==void 0?p:0;["inside-inner","inside-outer"].includes(l)&&(k+=Math.PI/2),h.angle+=k}}),t}_layoutOutsideLabels(t,e,i){var r,s,a;const o=(r=i[0].attribute.x)!==null&&r!==void 0?r:0,l=2*((s=i[0].attribute.y)!==null&&s!==void 0?s:0),u=e.line.line2MinLength,h=e.layout,c=e.spaceWidth;if(t.forEach(p=>{const f=Yc(p.quadrant)?-1:1;p.labelPosition={x:p.outerCenter.x+f*(p.labelSize.width/2+u+c),y:p.outerCenter.y}}),t.sort((p,f)=>p.labelPosition.y-f.labelPosition.y),e.coverEnable!==!1||h.strategy==="none"){for(const p of t){const{labelPosition:f,labelSize:g}=p;p.labelLimit=g.width,p.pointB=Yc(p.quadrant)?{x:f.x+g.width/2+u+c,y:f.y}:{x:f.x-g.width/2-u-c,y:f.y},this._computeX(p,e,i)}e.coverEnable===!1&&h.strategy==="none"&&this._coverLabels(t)}else{const p=l/(((a=e.textStyle)===null||a===void 0?void 0:a.fontSize)||16);this._adjustY(t,p,e,i);const{minY:f,maxY:g}=t.reduce((y,b)=>{const{y1:S,y2:A}=b.getLabelBounds();return y.minY=Math.max(0,Math.min(S,y.minY)),y.maxY=Math.min(l,Math.max(A,y.maxY)),y},{minY:1/0,maxY:-1/0}),_=Math.max(Math.abs(l/2-f),Math.abs(g-l/2)),v=this._computeLayoutRadius(_,e,i);for(const y of t)this._computePointB(y,v,e,i),this._computeX(y,e,i)}const d=2*o;return t.forEach(p=>{var f,g;p.labelVisible&&(vo(p.pointB.x,u+c)||sl(p.pointB.x,d-u-c))&&(p.labelVisible=!1),p.angle=(g=(f=e.textStyle)===null||f===void 0?void 0:f.angle)!==null&&g!==void 0?g:0,e.offsetAngle&&(p.angle+=e.offsetAngle),p.labelLine=Object.assign({},e.line)}),t}_computeX(t,e,i){var r;const s=t.circleCenter,a=2*s.x;s.y;let o=0;i.forEach(C=>{C.attribute.outerRadius>o&&(o=C.attribute.outerRadius)});const l=this.computeLayoutOuterRadius(o,e.width,e.height),u=e.line.line1MinLength,h=e.line.line2MinLength,c=(r=e.layout)===null||r===void 0?void 0:r.align,d=e.spaceWidth,{labelPosition:p,quadrant:f,pointB:g}=t;st(g.x*g.y)||(t.pointC={x:NaN,y:NaN},p.x=NaN,t.labelLimit=0);const _=this.computeRadius(l,e.width,e.height),v=Yc(f)?-1:1;let y=0,b=(v>0?a-g.x:g.x)-h-d;c==="labelLine"&&(y=(_+u+h)*v+s.x,b=(v>0?a-y:y)-d);const S=this._getFormatLabelText(t.refDatum,b);t.labelText=S;let A=Math.min(b,t.labelSize.width);switch(c){case"labelLine":break;case"edge":y=v>0?a-A-d:A+d;break;default:y=g.x+v*h}A=Math.max(this._ellipsisWidth,A),t.labelLimit=A,t.pointC={x:y,y:p.y};const w=.5*(t.labelLimit<t.labelSize.width?t.labelLimit:t.labelSize.width);c==="edge"?p.x=(v>0?a+0:0)-v*w:p.x=y+0+v*(d+w)}_computeAlign(t,e){var i,r,s,a,o,l;const u=e,h=(r=(i=u.textStyle)===null||i===void 0?void 0:i.textAlign)!==null&&r!==void 0?r:(s=u.textStyle)===null||s===void 0?void 0:s.align,c=(o=(a=u.layout)===null||a===void 0?void 0:a.textAlign)!==null&&o!==void 0?o:(l=u.layout)===null||l===void 0?void 0:l.align;return u.position!=="inside"?F(h)||h==="auto"?c==="edge"?Yc(t.quadrant)?"left":"right":Yc(t.quadrant)?"right":"left":h:F(h)||h==="auto"?"center":h}_getFormatLabelText(t,e){var i;return(i=t==null?void 0:t.text)!==null&&i!==void 0?i:""}_adjustY(t,e,i,r){var s;r[0].attribute.x;const a=2*((s=r[0].attribute.y)!==null&&s!==void 0?s:0),o=i.layout;if(o.strategy==="vertical"){let l,u=0;const h=t.length;if(h<=0)return;for(let d=0;d<h;d++){const{y1:p}=t[d].getLabelBounds();if(l=p-u,vo(l,0)){const g=this._shiftY(t,d,h-1,-l);this._shiftY(t,g,0,l/2)}const{y2:f}=t[d].getLabelBounds();u=f}const{y1:c}=t[0].getLabelBounds();l=c-0,vo(l,0)&&this._shiftY(t,0,h-1,-l);for(let d=t.length-1;d>=0&&t[d].getLabelBounds().y2>a;d--)t[d].labelVisible=!1}else if(o.strategy!=="none"){const l=t.map((c,d)=>({arc:c,originIndex:d,priorityIndex:0}));l.sort((c,d)=>d.arc.radian-c.arc.radian),l.forEach((c,d)=>{c.priorityIndex=d,c.arc.labelVisible=!1});let u=1/0,h=-1/0;for(let c=0;c<e&&c<t.length;c++){this._storeY(t);const d=l[c].arc;this._computeYRange(d,i,r),d.labelVisible=!0;const p=d.labelPosition.y,{lastIndex:f,nextIndex:g}=this._findNeighborIndex(t,l[c]),_=t[f],v=t[g];if(f===-1&&g!==-1){const A=v.labelPosition.y;p>A?d.labelPosition.y=A-v.labelSize.height/2-d.labelSize.height/2:this._twoWayShift(t,d,v,g)}else if(f!==-1&&g===-1){const A=_.labelPosition.y;p<A?d.labelPosition.y=A+_.labelSize.height/2+d.labelSize.height/2:this._twoWayShift(t,_,d,l[c].originIndex)}else if(f!==-1&&g!==-1){const A=_.labelPosition.y,w=v.labelPosition.y;p>w?(d.labelPosition.y=w-v.labelSize.height/2-d.labelSize.height/2,this._twoWayShift(t,_,d,l[c].originIndex)):p<A?(d.labelPosition.y=A+_.labelSize.height/2+d.labelSize.height/2,this._twoWayShift(t,d,v,g)):(this._twoWayShift(t,_,d,l[c].originIndex),this._twoWayShift(t,d,v,g))}const y=Math.min(u,l[c].originIndex),b=Math.max(h,l[c].originIndex);let S;if(S=t[b].getLabelBounds().y2-a,sl(S,0)&&this._shiftY(t,b,0,-S),S=t[y].getLabelBounds().y1-0,vo(S,0)&&this._shiftY(t,y,t.length-1,-S),S=t[b].getLabelBounds().y2-a,sl(S,0)){d.labelVisible=!1,this._restoreY(t);break}o.tangentConstraint&&!this._checkYRange(t)?(d.labelVisible=!1,this._restoreY(t)):(u=y,h=b)}}}_shiftY(t,e,i,r){const s=e<i?1:-1;let a=e;for(;a!==-1;){t[a].labelPosition.y+=r;const o=this._findNextVisibleIndex(t,a,i,s);if(o>=0&&o<t.length){const{y1:l,y2:u}=t[a].getLabelBounds(),{y1:h,y2:c}=t[o].getLabelBounds();if(s>0&&u<h||s<0&&l>c)return a}a=o}return i}_findNextVisibleIndex(t,e,i,r){const s=(i-e)*r;for(let a=1;a<=s;a++){const o=e+a*r;if(t[o].labelVisible)return o}return-1}_computePointB(t,e,i,r){const s=i;let a=0;r.forEach(u=>{u.attribute.outerRadius>a&&(a=u.attribute.outerRadius)});const o=this.computeLayoutOuterRadius(a,i.width,i.height),l=s.line.line1MinLength;if(s.layout.strategy==="none")t.pointB={x:t.outerCenter.x,y:t.outerCenter.y};else{const u=t.circleCenter,h=this.computeRadius(o,i.width,i.height),{labelPosition:c,quadrant:d}=t,p=e-Math.max(h+l,t.outerRadius),f=Math.sqrt(e**2-Math.abs(u.y-c.y)**2)-p;st(f)?t.pointB={x:u.x+f*(Yc(d)?-1:1),y:c.y}:t.pointB={x:NaN,y:NaN}}}_storeY(t){for(const e of t)e.labelVisible&&(e.lastLabelY=e.labelPosition.y)}_computeYRange(t,e,i){const r=t.circleCenter,s={width:2*r.x,height:2*r.y};let a=0;i.forEach(A=>{A.attribute.outerRadius>a&&(a=A.attribute.outerRadius)});const o=this.computeLayoutOuterRadius(a,e.width,e.height),l=e.line.line1MinLength,{width:u,height:h}=s,c=this.computeRadius(o,e.width,e.height),d=this._computeLayoutRadius(h/2,e,i),p=Math.abs(t.center.x-u/2),f=t.center.y-h/2;let g,_,v;if(Ur(u/2,p))g=0,_=1,v=-f;else if(Ur(h/2,f))g=1,_=0,v=-p;else{const A=-1/(f/p);g=A,_=-1,v=f-A*p}const y=i3t(g,_,v,l+c-d,0,d);if(y.length<2)return;let b,S;y[0].x>y[1].x&&y.reverse(),y[0].x<0?Ur(y[0].y,y[1].y)?sl(t.middleAngle,-Math.PI)&&vo(t.middleAngle,0)||sl(t.middleAngle,Math.PI)&&vo(t.middleAngle,2*Math.PI)?(b=0,S=y[1].y+h/2):(b=y[1].y+h/2,S=h):y[0].y<y[1].y?(b=0,S=y[1].y+h/2):(b=y[1].y+h/2,S=s.height):(b=Math.min(y[0].y,y[1].y)+h/2,S=Math.max(y[0].y,y[1].y)+h/2),t.labelYRange=[b,S]}_computeLayoutRadius(t,e,i){const r=e,s=r.layoutArcGap,a=r.line.line1MinLength;let o=0;i.forEach(c=>{c.attribute.outerRadius>o&&(o=c.attribute.outerRadius)});const l=this.computeLayoutOuterRadius(o,e.width,e.height),u=this.computeRadius(l,e.width,e.height)+a,h=u-s;return Math.max((h**2+t**2)/(2*h),u)}_findNeighborIndex(t,e){const i=e.originIndex;let r=-1,s=-1;for(let a=i-1;a>=0;a--)if(t[a].labelVisible){r=a;break}for(let a=i+1;a<t.length;a++)if(t[a].labelVisible){s=a;break}return{lastIndex:r,nextIndex:s}}_twoWayShift(t,e,i,r){const s=i.getLabelBounds().y1-e.getLabelBounds().y2;if(vo(s,0)){const a=this._shiftY(t,r,t.length-1,-s);this._shiftY(t,a,0,s/2)}}_restoreY(t){for(const e of t)e.labelVisible&&(e.labelPosition.y=e.lastLabelY)}_checkYRange(t){for(const e of t){const{labelYRange:i,labelPosition:r}=e;if(e.labelVisible&&i&&(vo(r.y,i[0])||sl(r.y,i[1])))return!1}return!0}_coverLabels(t){if(t.length<=1)return;let e=t[0].getLabelBounds();for(let i=1;i<t.length;i++){const r=t[i].getLabelBounds();r3t(e,r)?t[i].labelVisible=!1:e=r}}_createLabelLine(t,e){var i,r,s,a,o,l,u;const{points:h,line:c={},visible:d,fill:p}=t.attribute,f=t.attribute.points?$t.line({visible:(s=(i=c.visible&&d)!==null&&i!==void 0?i:(r=t.attribute)===null||r===void 0?void 0:r.visible)===null||s===void 0||s,stroke:(o=(a=c.style)===null||a===void 0?void 0:a.stroke)!==null&&o!==void 0?o:p,lineWidth:(u=(l=c.style)===null||l===void 0?void 0:l.lineWidth)!==null&&u!==void 0?u:1,points:h,curveType:c.smooth?"basis":null}):void 0;return f&&this._setStatesOfLabelLine(f),f}computeRadius(t,e,i,r){return this.computeLayoutRadius(e||0,i||0)*t*(F(r)?1:r)}computeLayoutRadius(t,e){return Math.min(t/2,e/2)}_canPlaceInside(t,e){return this.attribute.position==="inside"}computeLayoutOuterRadius(t,e,i){return t/(Math.min(e,i)/2)}computeDatumRadius(t,e,i){const r=this.computeLayoutOuterRadius(i,t,e);return this.computeLayoutRadius(t||0,e||0)*r}}W2.defaultAttributes={coverEnable:!1,spaceWidth:5,layoutArcGap:6,textStyle:{visible:!0,fontSize:14,fontWeight:"normal",fillOpacity:1,boundsPadding:[-1,0,-1,0]},position:"outside",line:{visible:!0,line1MinLength:20,line2MinLength:10},layout:{align:"arc",strategy:"priority",tangentConstraint:!0}};class $2 extends El{constructor(t){super(gt({},$2.defaultAttributes,t)),this.name="line-label"}getGraphicBounds(t,e={},i="end"){var r;if(t.type!=="area")return super.getGraphicBounds(t,e);const s=((r=t==null?void 0:t.attribute)===null||r===void 0?void 0:r.points)||[e],a=i==="start"?0:s.length-1;return{x1:s[a].x,x2:s[a].x,y1:s[a].y,y2:s[a].y}}labeling(t,e,i="end",r=0){return wQ(t,e,i,r)}}$2.defaultAttributes={textStyle:{fill:"#000"},position:"end",offset:6};class G2 extends El{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},G2.defaultAttributes,t)),this.name="line-data-label"}labeling(t,e,i="top",r=0){return AQ(t,e,i,r)}}G2.defaultAttributes={textStyle:{fill:"#000"},position:"top",offset:5};const u3t={rect:yy,symbol:V2,arc:W2,line:CQ,area:$2,"line-data":G2};class U2 extends Nn{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},U2.defaultAttributes,t)),this.name="data-label"}render(){var t;const{dataLabels:e,size:i}=this.attribute;if(!e||e.length===0)return;const{width:r=0,height:s=0,padding:a}=i||{};if(!r||!s||!st(s*r))return;this._componentMap||(this._componentMap=new Map);const o=SQ(r,s,a),l=o.bitmap(),u=new Map,h=this._componentMap;for(let c=0;c<e.length;c++){const d=e[c],p=u3t[d.type]||El;if(p){const{baseMarkGroupName:f,type:g}=d,_=(t=d.id)!==null&&t!==void 0?t:`${f}-${g}-${c}`;let v=this._componentMap.get(_);v?(v.setBitmapTool(o),v.setBitmap(l),v.setAttributes(d),u.set(_,v)):(v=new p(d),v.setBitmap(l),v.setBitmapTool(o),this.add(v),u.set(_,v))}}h.forEach((c,d)=>{u.get(d)||this.removeChild(c)}),this._componentMap=u}setLocation(t){this.translateTo(t.x,t.y)}disableAnimation(){this._componentMap.forEach(t=>{t.disableAnimation()})}enableAnimation(){this._componentMap.forEach(t=>{t.enableAnimation()})}}U2.defaultAttributes={pickable:!1};function cF(){rn(),Vu(),D2(),no()}function dF(){rn(),Vu(),Bm(),no()}cF();class Ou extends Nn{getStartAngle(){return fl(this._startAngle)}getEndAngle(){return fl(this._endAngle)}getMainSegmentPoints(){return this._mainSegmentPoints}constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},Ou.defaultAttributes,t)),this.name="segment",this.key="segment",this.lines=[]}render(){this.removeAllChild(!0),this._reset();const{startSymbol:t,endSymbol:e,lineStyle:i,state:r,visible:s=!0,multiSegment:a,mainSegmentIndex:o}=this.attribute;if(!s)return;this._computeLineAngle();const l=this._getMainSegmentPoints(),u=this._renderSymbol(t,l,"start"),h=this._renderSymbol(e,l,"end");if(this.startSymbol=u,this.endSymbol=h,a){const c=[...this.attribute.points];if(st(o))c[o]=this._clipPoints(c[o]);else{const d=this._clipPoints(tI(c));c[0][0]=d[0],c[c.length-1][c[c.length-1].length-1]=d[d.length-1]}c.forEach((d,p)=>{var f,g;const _=$t.line(Object.assign(Object.assign({points:d},ut(i)?(f=i[p])!==null&&f!==void 0?f:i[i.length-1]:i),{fill:!1}));_.name=`${this.name}-line`,_.id=this._getNodeId("line"+p),Gt(r==null?void 0:r.line)||(_.states=ut(r.line)?(g=r.line[p])!==null&&g!==void 0?g:r.line[r.line.length-1]:r.line),this.add(_),this.lines.push(_)})}else{let c=$t.line;ot(i)[0].cornerRadius&&(c=$t.polygon);const d=c(Object.assign(Object.assign({points:this._clipPoints(this.attribute.points)},ot(i)[0]),{fill:!1,closePath:!1}));d.name=`${this.name}-line`,d.id=this._getNodeId("line"),Gt(r==null?void 0:r.line)||(d.states=[].concat(r.line)[0]),this.add(d),this.lines.push(d)}}_computeStartRotate(t){return t+Math.PI/2}_computeEndRotate(t){return t+Math.PI/2}_renderSymbol(t,e,i){if(!e.length)return;const{autoRotate:r=!0}=t;let s;if(t&&t.visible){const a=this.getStartAngle(),o=this.getEndAngle(),{state:l}=this.attribute,u=e[0],h=e[e.length-1],{refX:c=0,refY:d=0,refAngle:p=0,style:f,symbolType:g,size:_=12}=t;let v,y;i==="start"?(v={x:u.x+(st(a)?c*Math.cos(a)+d*Math.cos(a-Math.PI/2):0),y:u.y+(st(a)?c*Math.sin(a)+d*Math.sin(a-Math.PI/2):0)},y=this._computeStartRotate(this._startAngle)):(v={x:h.x+(st(o)?c*Math.cos(o)+d*Math.cos(o-Math.PI/2):0),y:h.y+(st(o)?c*Math.sin(o)+d*Math.sin(o-Math.PI/2):0)},y=this._computeEndRotate(this._endAngle)),s=$t.symbol(Object.assign(Object.assign(Object.assign({},v),{symbolType:g,size:_,angle:r?y+p:0,strokeBoundsBuffer:0}),f)),s.name=`${this.name}-${i}-symbol`,s.id=this._getNodeId(`${i}-symbol`),Gt(l==null?void 0:l.symbol)||(s.states=l.symbol),i==="start"?Gt(l==null?void 0:l.startSymbol)||(s.states=l.startSymbol):Gt(l==null?void 0:l.endSymbol)||(s.states=l.endSymbol),this.add(s)}return s}_getMainSegmentPoints(){if(this._mainSegmentPoints)return this._mainSegmentPoints;const{points:t,multiSegment:e,mainSegmentIndex:i}=this.attribute;let r;return r=e?st(i)?t[i]:tI(t):t,this._mainSegmentPoints=r,r}_clipPoints(t){const{startSymbol:e={},endSymbol:i={}}=this.attribute;let r=t;if(e.visible){const s=e.clip?e.size||10:0;r=[{x:t[0].x-s/2*(Math.cos(this._startAngle)||0),y:t[0].y-s/2*(Math.sin(this._startAngle)||0)},...r.slice(1)]}if(i.visible){const s=i.clip?i.size||10:0,a={x:t[t.length-1].x-s/2*(Math.cos(this._endAngle)||0),y:t[t.length-1].y-s/2*(Math.sin(this._endAngle)||0)};r=[...r.slice(0,r.length-1),a]}return r}_computeLineAngle(){const t=this._getMainSegmentPoints();if(t.length<=1)return;const e=t[0],i=t[1],r=t[t.length-2],s=t[t.length-1],a=[e.x-i.x,e.y-i.y],o=Math.atan2(a[1],a[0]),l=[s.x-r.x,s.y-r.y],u=Math.atan2(l[1],l[0]);this._startAngle=o,this._endAngle=u}_reset(){this.startSymbol=null,this.endSymbol=null,this._startAngle=null,this._endAngle=null,this._mainSegmentPoints=null}}Ou.defaultAttributes={visible:!0,lineStyle:{lineWidth:1,stroke:"#000"},startSymbol:{visible:!1,autoRotate:!0,symbolType:"triangle",size:12,refX:0,refY:0,refAngle:0,style:{fill:"#000",zIndex:1}},endSymbol:{visible:!1,autoRotate:!0,symbolType:"triangle",size:12,refX:0,refY:0,refAngle:0,style:{fill:"#000",zIndex:1}}};dF();class GL extends Ou{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},Ou.defaultAttributes,t)),this.name="arc-segment",this.key="arc-segment",this.isReverseArc=!1}getStartAngle(){const t=this.isReverseArc?this._startAngle+Math.PI/2:this._startAngle-Math.PI/2;return t<0?t+2*Math.PI:t>2*Math.PI?t-2*Math.PI:t}getEndAngle(){const t=this.isReverseArc?this._endAngle-Math.PI/2:this._endAngle+Math.PI/2;return t<0?t+2*Math.PI:t>2*Math.PI?t-2*Math.PI:t}getMainSegmentPoints(){return this._mainSegmentPoints}_computeStartRotate(t){return this.isReverseArc?t+Math.PI:t}_computeEndRotate(t){return this.isReverseArc?t:t+Math.PI}render(){this.removeAllChild(!0),this._reset();const{startSymbol:t,endSymbol:e,lineStyle:i,state:r,visible:s=!0,radius:a,startAngle:o,endAngle:l,center:u}=this.attribute;if(!s)return;this._startAngle=o,this._endAngle=l,this.isReverseArc=o>l;const h={x:u.x+a*Math.cos(this._startAngle),y:u.y+a*Math.sin(this._startAngle)},c={x:u.x+a*Math.cos(this._endAngle),y:u.y+a*Math.sin(this._endAngle)};this._mainSegmentPoints=[h,c];const d=this._renderSymbol(t,this._mainSegmentPoints,"start"),p=this._renderSymbol(e,this._mainSegmentPoints,"end");this.startSymbol=d,this.endSymbol=p;const f=$t.arc(Object.assign({x:u.x,y:u.y,startAngle:o,endAngle:l,innerRadius:a,outerRadius:a},i));f.name=`${this.name}-line`,f.id=this._getNodeId("arc"),Gt(r==null?void 0:r.line)||(f.states=[].concat(r.line)[0]),this.add(f),this.line=f}}var Lr;(function(n){n.innerView="inner-view",n.axisContainer="axis-container",n.labelContainer="axis-label-container",n.tickContainer="axis-tick-container",n.tick="axis-tick",n.subTick="axis-sub-tick",n.label="axis-label",n.title="axis-title",n.gridContainer="axis-grid-container",n.grid="axis-grid",n.gridRegion="axis-grid-region",n.line="axis-line",n.background="axis-background",n.axisLabelBackground="axis-label-background"})(Lr||(Lr={}));var Yf;(function(n){n.selected="selected",n.selectedReverse="selected_reverse",n.hover="hover",n.hoverReverse="hover_reverse"})(Yf||(Yf={}));const ol={[Yf.selectedReverse]:{},[Yf.selected]:{},[Yf.hover]:{},[Yf.hoverReverse]:{}},tC={title:{space:4,padding:0,textStyle:{fontSize:12,fill:"#333333",fontWeight:"normal",fillOpacity:1}},label:{visible:!0,inside:!1,space:4,padding:0,style:{fontSize:12,fill:"#333",fontWeight:"normal",fillOpacity:1}},tick:{visible:!0,inside:!1,alignWithLabel:!0,length:4,style:{lineWidth:1,stroke:"#000",strokeOpacity:1}},subTick:{visible:!1,inside:!1,count:4,length:2,style:{lineWidth:1,stroke:"#999",strokeOpacity:1}},line:{visible:!0,style:{lineWidth:1,stroke:"#000",strokeOpacity:1}}},FV=(n=0)=>{if(n<0)for(;n<0;)n+=Bn;else if(n>0)for(;n>Bn;)n-=Bn;return n};function Ix(n,t,e){return!vo(n,t,0,1e-6)&&!sl(n,e,0,1e-6)}function TQ(n,t,e,i){const r=x1(Object.assign({text:e},i)),s=r.width(),a=r.height(),o=FV(Math.atan2(t[1],t[0]))-Math.PI,l=3*Math.PI/4,u=Math.PI/4,h=Math.PI/2,c=n.x;let d=0;d=Ix(o,-l,-u)?((o+l)/h-.5)*s:Ix(o,u,l)?(.5-(o-u)/h)*s:Math.cos(o)>=0?.5*s:.5*-s;const p=c-d,f=n.y;let g=0;return g=Ix(o,-l,-u)?.5*-a:Ix(o,u,l)?.5*a:Math.cos(o)>=0?(.5-(u-o)/h)*a:(.5-FV(o-l)/h)*a,{x:p,y:f-g}}function MQ(n){const t={};return Io(n,e=>{e.type!=="group"&&e.id&&(t[e.id]=e)}),t}function pF(n,t){return{x:n.x+t[0],y:n.y+t[1]}}function UL(n,t,e,i=!1,r=!1){const s=[t.x-e.x,t.y-e.y];return vQ(s,(i?-1:1)*(r?-1:1)*n/ABt(s))}function h3t(n){let t="center",e="middle";return t=(n=fl(n))>=Math.PI*(5/3)||n<=Math.PI*(1/3)?"left":n>=Math.PI*(2/3)&&n<=Math.PI*(4/3)?"right":"center",e=n>=Math.PI*(7/6)&&n<=Math.PI*(11/6)?"bottom":n>=Math.PI*(1/6)&&n<=Math.PI*(5/6)?"top":"middle",{align:t,baseline:e}}function c3t(n,t,e,i,r,s,a){const o=un({x:0,y:0},e,n),l=pF(o,UL(i,o,t,r));return TQ(l,UL(i||1,l,t,r),s,a)}const PQ=(n,t,e)=>{const i=n.target;return i!==e&&i.name&&!Gt(i.states)?(i.addState(ln.hover,!0),Io(t,r=>{r!==i&&r.name&&!Gt(r.states)&&r.addState(ln.hoverReverse,!0)}),i):e},EQ=(n,t,e)=>e&&(Io(t,i=>{i.name&&!Gt(i.states)&&(i.removeState(ln.hoverReverse),i.removeState(ln.hover))}),null),OQ=(n,t,e)=>{const i=n.target;return e===i&&i.hasState(ln.selected)?(Io(t,r=>{r.name&&!Gt(r.states)&&(r.removeState(ln.selectedReverse),r.removeState(ln.selected))}),null):i.name&&!Gt(i.states)?(i.addState(ln.selected,!0),Io(t,r=>{r!==i&&r.name&&!Gt(r.states)&&r.addState(ln.selectedReverse,!0)}),i):e};class RQ extends Nn{constructor(){super(...arguments),this.name="axis",this.data=[],this.tickLineItems=[],this.subTickLineItems=[],this.axisLabelLayerSize={},this.axisLabelsContainer=null,this._onHover=t=>{this._lastHover=PQ(t,this.axisContainer,this._lastHover)},this._onUnHover=t=>{this._lastHover=EQ(t,this.axisContainer,this._lastHover)},this._onClick=t=>{this._lastSelect=OQ(t,this.axisContainer,this._lastSelect)}}getInnerView(){return this._innerView}getPrevInnerView(){return this._prevInnerView}getBoundsWithoutRender(t){const e=cs(this.attribute);gt(this.attribute,t);const i=$t.group({x:this.attribute.x,y:this.attribute.y});return this.add(i),this._renderInner(i),this.removeChild(i),this.attribute=e,i.AABBBounds}render(){this._prevInnerView=this._innerView&&MQ(this._innerView),this.removeAllChild(!0),this._innerView=$t.group({x:0,y:0,pickable:!1}),this.add(this._innerView),this._renderInner(this._innerView),this._bindEvent()}_bindEvent(){if(this.attribute.disableTriggerEvent)return;const{hover:t,select:e}=this.attribute;t&&(this._innerView.addEventListener("pointermove",this._onHover),this._innerView.addEventListener("pointerout",this._onUnHover)),e&&this._innerView.addEventListener("pointerdown",this._onClick)}_renderInner(t){const{title:e,label:i,tick:r,line:s,items:a}=this.attribute,o=$t.group({x:0,y:0,zIndex:1});if(o.name=Lr.axisContainer,o.id=this._getNodeId("container"),o.setMode(this.mode),this.axisContainer=o,t.add(o),s&&s.visible&&this.renderLine(o),a&&a.length&&(this.data=this._transformItems(a[0]),r&&r.visible&&this.renderTicks(o),i&&i.visible)){const l=$t.group({x:0,y:0,pickable:!1});l.name=Lr.labelContainer,l.id=this._getNodeId("label-container"),this.axisLabelsContainer=l,o.add(l),a.forEach((u,h)=>{const c=this.renderLabels(l,u,h),d=c.getChildren();this.beforeLabelsOverlap(d,u,c,h,a.length),this.handleLabelsOverlap(d,u,c,h,a.length),this.afterLabelsOverlap(d,u,c,h,a.length);let p=0,f=0,g="center",_="middle";d.forEach(v=>{var y;const b=v.attribute,S=(y=b.angle)!==null&&y!==void 0?y:0,A=v.AABBBounds;let w=A.width(),C=A.height();S&&(w=Math.abs(w*Math.cos(S)),C=Math.abs(C*Math.sin(S))),p=Math.max(p,w),f=Math.max(f,C),g=b.textAlign,_=b.textBaseline}),this.axisLabelLayerSize[h]={width:p,height:f,textAlign:g,textBaseline:_}})}e&&e.visible&&this.renderTitle(o)}renderTicks(t){const e=this.getTickLineItems(),i=$t.group({x:0,y:0,pickable:!1});i.name=Lr.tickContainer,i.id=this._getNodeId("tick-container"),t.add(i),e.forEach((s,a)=>{var o;const l=$t.line(Object.assign({},this._getTickLineAttribute("tick",s,a,e)));if(l.name=Lr.tick,l.id=this._getNodeId(s.id),Gt((o=this.attribute.tick)===null||o===void 0?void 0:o.state))l.states=ue;else{const u=this.data[a],h=gt({},ue,this.attribute.tick.state);Object.keys(h).forEach(c=>{ft(h[c])&&(h[c]=h[c](u.rawValue,a,u,this.data))}),l.states=h}i.add(l)}),this.tickLineItems=e;const{subTick:r}=this.attribute;if(r&&r.visible){const s=this.getSubTickLineItems();s.length&&s.forEach((a,o)=>{const l=$t.line(Object.assign({},this._getTickLineAttribute("subTick",a,o,e)));if(l.name=Lr.subTick,l.id=this._getNodeId(`${o}`),Gt(r.state))l.states=ue;else{const u=gt({},ue,r.state);Object.keys(u).forEach(h=>{ft(u[h])&&(u[h]=u[h](a.value,o,a,e))}),l.states=u}i.add(l)}),this.subTickLineItems=s}}renderLabels(t,e,i){const{dataFilter:r}=this.attribute.label;r&&ft(r)&&(e=r(e,i));const s=this._transformItems(e),a=$t.group({x:0,y:0,pickable:!1});return a.name=`${Lr.labelContainer}-layer-${i}`,a.id=this._getNodeId(`label-container-layer-${i}`),t.add(a),s.forEach((o,l)=>{var u;const h=this._getLabelAttribute(o,l,s,i),c=Qw(h);if(c.name=Lr.label,c.id=this._getNodeId(`layer${i}-label-${o.id}`),Gt((u=this.attribute.label)===null||u===void 0?void 0:u.state))c.states=ue;else{const d=gt({},ue,this.attribute.label.state);Object.keys(d).forEach(p=>{ft(d[p])&&(d[p]=d[p](o,l,s,i))}),c.states=d}a.add(c)}),a}renderTitle(t){const e=this.getTitleAttribute(),i=new ro(Object.assign({},e));i.name=Lr.title,i.id=this._getNodeId("title"),t.add(i)}getVerticalCoord(t,e,i){return pF(t,this.getVerticalVector(e,i,t))}getTextAlign(t){let e="center";return Ur(t[0],0)?Ur(t[1],0)?Object.is(t[1],-0)?e="start":Object.is(t[0],-0)&&(e="end"):e="center":t[0]>0?e="start":t[0]<0&&(e="end"),e}getTickLineItems(){const{tick:t}=this.attribute,e=this.data,i=[],{alignWithLabel:r,inside:s=!1,length:a,dataFilter:o}=t;let l=1;return e.length>=2&&(l=e[1].value-e[0].value),(o&&ft(o)?o(e):e).forEach(u=>{let h=u.point,c=u.value;if(!r){const p=u.value-l/2;if(this.isInValidValue(p))return;h=this.getTickCoord(p),c=p}const d=this.getVerticalCoord(h,a,s);if(this.mode==="3d"){const p=this.getVerticalVector(a,s,h);let f=0,g=0;Ie(p[0])>Ie(p[1])?f=Qe/2*(d.x>h.x?1:-1):g=Qe/2*(d.y>h.y?-1:1),i.push({start:h,end:d,value:c,id:`tick-${u.id}`,anchor:[h.x,h.y],alpha:f,beta:g})}else i.push({start:h,end:d,value:c,id:`tick-${u.id}`})}),i}getSubTickLineItems(){const{subTick:t}=this.attribute,e=[],{count:i=4,inside:r=!1,length:s=2}=t,a=this.tickLineItems,o=a.length;if(o>=2)for(let l=0;l<o-1;l++){const u=a[l],h=a[l+1];for(let c=0;c<i;c++){const d=(c+1)/(i+1),p=(1-d)*u.value+d*h.value,f=this.getTickCoord(p),g=this.getVerticalCoord(f,s,r);e.push({start:f,end:g,value:p,id:`sub-tick-${p}`})}}return e}_getTickLineAttribute(t,e,i,r){let s=le(this.attribute,`${t}.style`);const a=this.data[i];s=ft(s)?gt({},le(tC,`${t}.style`),t==="tick"?s(a.rawValue,i,a,this.data):s(e.value,i,e,r)):s;const{start:o,end:l,anchor:u,alpha:h,beta:c}=e;return Object.assign({points:[o,l],anchor:u,alpha:h,beta:c},s)}_getLabelAttribute(t,e,i,r){var s,a;const{space:o=4,inside:l=!1,formatMethod:u,type:h="text",text:c}=this.attribute.label;let d=o,p=0;!((s=this.attribute.tick)===null||s===void 0)&&s.visible&&this.attribute.tick.inside===l&&(p=this.attribute.tick.length||4),!((a=this.attribute.subTick)===null||a===void 0)&&a.visible&&this.attribute.subTick.inside===l&&(p=Math.max(p,this.attribute.subTick.length||2)),d+=p;const f=this.getRelativeVector(t.point);r>0&&(f[1]===0?d+=(this.axisLabelLayerSize[r-1].height+le(this.attribute,"label.space",4))*r:d+=(this.axisLabelLayerSize[r-1].width+le(this.attribute,"label.space",4))*r);const g=this.getVerticalCoord(t.point,d,l),_=this.getVerticalVector(d||1,l,g),v=u?u(`${t.label}`,t,e,i,r):t.label;let{style:y}=this.attribute.label;y=ft(y)?gt({},tC.label.style,y(t,e,i,r)):y;const b=this.getLabelAlign(_,l,y.angle);return y=gt(b,y),ft(y.text)&&(y.text=y.text({label:t.label,value:t.rawValue,index:t.index,layer:r})),Object.assign(Object.assign(Object.assign({},this.getLabelPosition(g,_,v,y)),{text:c??v,_originText:t.label,lineHeight:y==null?void 0:y.fontSize,type:h}),y)}getLabelPosition(t,e,i,r){return t}_transformItems(t){const e=[];return t.forEach(i=>{var r;e.push(Object.assign(Object.assign({},i),{point:this.getTickCoord(i.value),id:(r=i.id)!==null&&r!==void 0?r:i.label}))}),e}release(){super.release(),this._prevInnerView=null,this._innerView=null}}function d3t(n,t,e,i,r){return{x:(n-i)*Math.cos(e)+(t-r)*Math.sin(e)+i,y:(n-i)*Math.sin(e)+(r-t)*Math.cos(e)+r}}function p3t(n){const t=n.AABBBounds;return{x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2,centerX:n.attribute.x,centerY:n.attribute.y,angle:n.attribute.angle}}function IQ(n){n.forEach(t=>{if(t.rotatedBounds||!t.attribute.angle)return;const e=p3t(t),i=d3t(e.centerX,e.centerY,e.angle,t.attribute.x,t.attribute.y),r=i.x-e.centerX,s=i.y-e.centerY;e.x1+=r,e.x2+=r,e.y1+=s,e.y2+=s,e.centerX+=r,e.centerY+=s,t.rotatedBounds=e})}function f3t(n,t){return ty(n.AABBBounds,t.AABBBounds,!1)&&(!n.rotatedBounds||!t.rotatedBounds||GCt(n.rotatedBounds,t.rotatedBounds,!0))}const jV={parity:function(n){return n.filter((t,e)=>e%2?t.setAttribute("opacity",0):1)},greedy:function(n,t){let e;return n.filter((i,r)=>r&&fF(e,i,t)?i.setAttribute("opacity",0):(e=i,1))}};function fF(n,t,e){const i=n.AABBBounds,r=t.AABBBounds;return e>Math.max(r.x1-i.x2,i.x1-r.x2,r.y1-i.y2,i.y1-r.y2)&&(!n.rotatedBounds||!t.rotatedBounds||e>Math.max(t.rotatedBounds.x1-n.rotatedBounds.x2,n.rotatedBounds.x1-t.rotatedBounds.x2,t.rotatedBounds.y1-n.rotatedBounds.y2,n.rotatedBounds.y1-t.rotatedBounds.y2))}function NV(n,t){for(let e,i=1,r=n.length,s=n[0];i<r;s=e,++i)if(fF(s,e=n[i],t))return!0}function g3t(n){const t=n.AABBBounds;return t.width()>1&&t.height()>1}function m3t(n){return n.forEach(t=>t.setAttribute("opacity",1)),n}function v3t(n,t){if(Gt(n))return;const e=n.filter(g3t);if(Gt(e))return;let i;i=m3t(e),IQ(i);const{method:r="parity",separation:s=0}=t,a=ft(r)?r:jV[r]||jV.parity;if(i.length>=3&&NV(i,s)){do i=a(i,s);while(i.length>=3&&NV(i,s));if(i.length<3||t.lastVisible){const o=Gh(e);if(!o.attribute.opacity){const l=i.length;if(l>1){o.setAttribute("opacity",1);for(let u=l-1;u>=0&&fF(i[u],o,s);u--)i[u].setAttribute("opacity",0)}}}}e.forEach(o=>{o.setAttribute("visible",!!o.attribute.opacity)})}function _3t(n,t){if(Gt(n))return;const{orient:e,labelRotateAngle:i=[0,45,90]}=t;if(i.length===0||n.some(a=>!!a.attribute.angle))return;let r=0,s=0;for(i&&i.length>0&&(s=i.length);r<s;){const a=i[r++];if(n.forEach(o=>{o.attribute.angle=qe(a)}),b3t(e,n),!y3t(n))break}}function y3t(n){for(let t=1;t<n.length;t++)if(f3t(n[t-1],n[t]))return!0;return!1}function b3t(n,t){n!=="bottom"&&n!=="top"||S3t(n,t),n!=="left"&&n!=="right"||x3t(n,t),IQ(t)}function Y2(n=0){if(n<0)for(;n<0;)n+=2*Math.PI;if(n>0)for(;n>=2*Math.PI;)n-=2*Math.PI;return n}function x3t(n,t){t.forEach((e,i)=>{e.attribute.angle&&e.setAttributes(Object.assign(Object.assign({},DQ(n,e.attribute.angle)),{angle:Y2(e.attribute.angle)}))})}function S3t(n,t){t.forEach(e=>{e.attribute.angle&&e.setAttributes(Object.assign(Object.assign({},LQ(n,e.attribute.angle)),{angle:Y2(e.attribute.angle)}))})}function LQ(n,t=0){let e=["center","left","left","left","center","right","right","right","left"],i=["top","top","middle","bottom","bottom","bottom","middle","top","top"];n==="top"&&(e=["center","right","right","right","center","left","left","left","right"],i=["bottom","bottom","middle","top","top","top","middle","bottom","bottom"]);const r=(t=Y2(t))/(.5*Math.PI);let s;return s=r===Math.floor(r)?2*Math.floor(r):2*Math.floor(r)+1,{textAlign:e[s],textBaseline:i[s]}}function DQ(n,t=0){let e=["right","right","center","left","center","left","center","right","right"],i=["middle","middle","top","top","middle","middle","bottom","bottom","middle"];n==="right"&&(e=["left","right","right","right","left","left","left","left","right"],i=["middle","bottom","middle","top","top","top","middle","bottom","bottom"]);const r=(t=Y2(t))/(.5*Math.PI);let s;return s=r===Math.floor(r)?2*Math.floor(r):2*Math.floor(r)+1,{textAlign:e[s],textBaseline:i[s]}}function A3t(n,t){const{limitLength:e,verticalLimitLength:i,ellipsis:r="...",orient:s,axisLength:a}=t;if(Gt(n)||!st(e))return;const o=Math.sin(Math.PI/10);n.forEach(l=>{var u;const h=l.attribute.angle,c=!F(h),d=c?Math.cos(h):1,p=c?Math.sin(h):0,f=!c||Math.abs(p)<=o,g=c&&Math.abs(d)<=o,_=s==="top"||s==="bottom";if(_&&(g&&Math.floor(l.AABBBounds.height())<=e||f&&Math.floor(l.AABBBounds.width())<=i))return;const v=l.attribute.direction;if(!_&&(v==="vertical"&&Math.floor(l.AABBBounds.height())<=i||v!=="vertical"&&(f&&Math.floor(l.AABBBounds.width())<=e||g&&Math.floor(l.AABBBounds.height())<=i)))return;let y=null;if(f||g)y=_?f?i:e:v==="vertical"||g?i:e;else if(_){const{x1:b,x2:S}=l.AABBBounds,A=p/d;y=A>0&&b<=a&&e/A+b>a?(a-b)/Math.abs(d):A<0&&S>=0&&e/A+S<0?S/Math.abs(d):Math.abs(e/p)}else y=Math.abs(e/d);st(l.attribute.maxLineWidth)&&(y=st(y)?Math.min(l.attribute.maxLineWidth,y):l.attribute.maxLineWidth),l.setAttributes({maxLineWidth:y,ellipsis:(u=l.attribute.ellipsis)!==null&&u!==void 0?u:r})})}function w3t(n,t,e,i,r){if(i==="right"||i==="left"){if(r==="left"){const s=i==="right"?0:-1;n.forEach(a=>{a.setAttributes({x:t+e*s,textAlign:"left"})})}else if(r==="right"){const s=i==="right"?1:0;n.forEach(a=>{a.setAttributes({x:t+e*s,textAlign:"right"})})}else if(r==="center"){const s=i==="right"?1:-1;n.forEach(a=>{a.setAttributes({x:t+.5*e*s,textAlign:"center"})})}}else if(i==="bottom"||i==="top"){if(r==="top"){const s=i==="bottom"?0:-1;n.forEach(a=>{a.setAttributes({y:t+e*s,textBaseline:"top"})})}else if(r==="bottom"){const s=i==="bottom"?1:0;n.forEach(a=>{a.setAttributes({y:t+e*s,textBaseline:"bottom"})})}else if(r==="middle"){const s=i==="bottom"?1:-1;n.forEach(a=>{a.setAttributes({y:t+.5*e*s,textBaseline:"middle"})})}}}class BQ{isInValidValue(t){return t<0||t>1}getTickCoord(t){const{start:e}=this.attribute,i=this.getRelativeVector();return{x:e.x+i[0]*t,y:e.y+i[1]*t}}getRelativeVector(t){const{start:e,end:i}=this.attribute;return[i.x-e.x,i.y-e.y]}getVerticalVector(t,e=!1,i){const{verticalFactor:r=1}=this.attribute,s=this.getRelativeVector(),a=wBt(s),o=[a[1],-1*a[0]];return vQ(o,t*(e?1:-1)*r)}}function FQ(){rn(),Vu(),Oc(),Pl()}function C3t(){FQ(),Wu()}function k3t(){FQ(),dBt()}function T3t(){rn(),A1()}function M3t(){rn(),A1()}var zV=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};C3t();class by extends RQ{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},by.defaultAttributes,t),e)}_renderInner(t){var e;super._renderInner(t);const{panel:i}=this.attribute;if(i&&i.visible){const r=this.axisContainer,s=r.AABBBounds,a=$t.rect(Object.assign({x:s.x1,y:s.y1,width:s.width(),height:s.height()},i.style));a.name=Lr.background,a.id=this._getNodeId("background"),a.states=gt({},ol,(e=i.state)!==null&&e!==void 0?e:{}),r.insertBefore(a,r.firstChild)}}renderLine(t){const{start:e,end:i,line:r}=this.attribute,s=r,{startSymbol:a,endSymbol:o,style:l,breakRange:u,breakShape:h,breakShapeStyle:c,state:d}=s,p=zV(s,["startSymbol","endSymbol","style","breakRange","breakShape","breakShapeStyle","state"]),f=Object.assign({points:[e,i],startSymbol:a,endSymbol:o,lineStyle:l},p);Gt(d)||(f.state={line:gt({},ol,d),symbol:gt({},ol,d)});const g=new Ou(f);g.name=Lr.line,g.id=this._getNodeId("line"),t.add(g)}getTitleAttribute(){var t,e,i;const r=this.attribute.title,{position:s="middle",space:a=4,textStyle:o={},autoRotate:l=!0,shape:u,background:h,state:c={},maxWidth:d}=r,p=zV(r,["position","space","textStyle","autoRotate","shape","background","state","maxWidth"]);let f=.5;s==="start"?f=0:s==="end"&&(f=1);const{verticalFactor:g=1}=this.attribute,_=-1*g,v=this.getTickCoord(f),y=this.getRelativeVector();let b=0;if(!((t=this.attribute.label)===null||t===void 0)&&t.visible&&this.attribute.label.inside===!1){const D=+le(this.attribute,"label.space",4);b+=D;const N=Object.keys(this.axisLabelLayerSize).length;if(y[1]===0){const O=this.axisLabelsContainer?this.axisLabelsContainer.AABBBounds.height():0;isFinite(O)?b+=O+(N-1)*D:b=0}else{if(y[0]===0){const G=this.axisLabelsContainer?this.axisLabelsContainer.AABBBounds.width():0;isFinite(G)?b+=G+(N-1)*D:b=0}else Object.keys(this.axisLabelLayerSize).forEach((G,U)=>{b+=this.axisLabelLayerSize[G].width+(U>0?D:0)});const O=this.axisLabelLayerSize[0].textAlign,L=O==="start"||O==="left",H=O==="center",j=y[1]>0;b=_===1?j?L?b:H?b/2:D:L?D:H?b/2:b:j?L?D:H?b/2:b:L?b:H?b/2:D}}let S=0;!((e=this.attribute.tick)===null||e===void 0)&&e.visible&&this.attribute.tick.inside===!1&&(S=this.attribute.tick.length||4),!((i=this.attribute.subTick)===null||i===void 0)&&i.visible&&this.attribute.subTick.inside===!1&&(S=Math.max(S,this.attribute.subTick.length||2));const A=S+b+a,w=this.getVerticalCoord(v,A,!1),C=this.getVerticalVector(A,!1,{x:0,y:0});let k,M,{angle:P}=p;if(k=s==="start"?"start":s==="end"?"end":"center",F(P)&&l){P=TBt(y,[1,0],!0);const{verticalFactor:D=1}=this.attribute;M=-1*D===1?"bottom":"top"}else k=this.getTextAlign(C),M=this.getTextBaseline(C,!1);let E=d;if(F(E)){const{verticalLimitSize:D,verticalMinSize:N,orient:O}=this.attribute,L=Math.min(D||1/0,N||1/0);if(st(L))if(O==="bottom"||O==="top")if(P!==Math.PI/2){const H=Math.abs(Math.cos(P??0));E=H<1e-6?1/0:this.attribute.end.x/H}else E=L-A;else if(P&&P!==0){const H=Math.abs(Math.sin(P));E=H<1e-6?1/0:this.attribute.end.y/H}else E=L-A}const I=Object.assign(Object.assign(Object.assign({},w),p),{maxWidth:E,textStyle:Object.assign({textAlign:k,textBaseline:M},o),state:{text:gt({},ol,c.text),shape:gt({},ol,c.shape),panel:gt({},ol,c.background)}});return I.angle=P,u&&u.visible&&(I.shape=Object.assign({visible:!0},u.style),u.space&&(I.space=u.space)),h&&h.visible&&(I.panel=Object.assign({visible:!0},h.style)),I}getTextBaseline(t,e){let i="middle";const{verticalFactor:r=1}=this.attribute,s=(e?1:-1)*r;return Ur(t[1],0)?i=!Ur(t[0],0)||Object.is(t[0],-0)||Object.is(t[1],-0)?"middle":s===1?"bottom":"top":t[1]>0?i="top":t[1]<0&&(i="bottom"),i}getLabelAlign(t,e,i){const r=this.attribute.orient;if(["top","bottom","right","left"].includes(r)||t[0]===0&&t[1]===0){if(r==="top"||r==="bottom")return LQ(e?r==="bottom"?"top":"bottom":r,i);if(r==="left"||r==="right")return DQ(e?r==="left"?"right":"left":r,i)}return{textAlign:this.getTextAlign(t),textBaseline:this.getTextBaseline(t,e)}}beforeLabelsOverlap(t,e,i,r,s){var a,o,l,u;const{flush:h=!1}=this.attribute.label||{};if(h&&t.length){const{orient:c,start:d,end:p}=this.attribute,f=c==="bottom"||c==="top",g=t[0],_=Gh(t),v=f?g.attribute.x>_.attribute.x:g.attribute.y<_.attribute.y;if(f){const y=v?_:g,b=v?g:_,S=d.x,A=p.x,w=y.AABBBounds.x1,C=b.AABBBounds.x2;w<S&&(y.attribute.angle?y.setAttributes({dx:((a=y.attribute.dx)!==null&&a!==void 0?a:0)+S-w}):y.setAttributes({x:S,textAlign:"left"})),C>A&&(b.attribute.angle?b.setAttributes({dx:((o=b.attribute.dx)!==null&&o!==void 0?o:0)+A-C}):b.setAttributes({x:A,textAlign:"right"}))}else{const y=v?_:g,b=v?g:_,S=y.AABBBounds.y2,A=b.AABBBounds.y1,w=d.y,C=p.y;A<w&&(b.attribute.angle?b.setAttributes({dy:((l=b.attribute.dy)!==null&&l!==void 0?l:0)+w-A}):b.setAttributes({y:w,textBaseline:"top"})),S>C&&(y.attribute.angle?y.setAttributes({dy:((u=y.attribute.dy)!==null&&u!==void 0?u:0)+C-S}):y.setAttributes({y:C,textBaseline:"bottom"}))}}}handleLabelsOverlap(t,e,i,r,s){if(Gt(t))return;const{verticalLimitSize:a,label:o,orient:l}=this.attribute,u=this._getAxisLabelLimitLength(a,s),{layoutFunc:h,autoRotate:c,autoRotateAngle:d,autoLimit:p,limitEllipsis:f,autoHide:g,autoHideMethod:_,autoHideSeparation:v,lastVisible:y}=o;if(ft(h))h(t,e,r,this);else{if(c&&_3t(t,{labelRotateAngle:d,orient:l}),p&&st(u)&&u>0){const b=l==="left"||l==="right",S=Math.abs(b?this.attribute.start.y-this.attribute.end.y:this.attribute.start.x-this.attribute.end.x),A=b?S/t.length:g||c?1/0:S/t.length;A3t(t,{limitLength:u,verticalLimitLength:A,ellipsis:f,orient:l,axisLength:S})}g&&v3t(t,{orient:l,method:_,separation:v,lastVisible:y})}}afterLabelsOverlap(t,e,i,r,s){const{verticalLimitSize:a,orient:o}=this.attribute,l=o==="bottom"||o==="top",u=i.AABBBounds;let h=l?u.height():u.width();const{verticalMinSize:c}=this.attribute;if(st(c)&&(!st(a)||c<=a)){const d=this._getAxisLabelLimitLength(c,s);let p,f;h=Math.max(h,d),o==="left"?(p=u.x2-h,f=u.y1):o==="right"?(p=u.x1,f=u.y1):o==="top"?(p=u.x1,f=u.y2-h):o==="bottom"&&(p=u.x1,f=u.y1);const g=$t.rect({x:p,y:f,width:l?u.width():h,height:l?h:u.height(),pickable:!1});g.name=Lr.axisLabelBackground,g.id=this._getNodeId("axis-label-background"),i.insertBefore(g,i.firstChild)}if(z(this.attribute.label.containerAlign)){let d;o==="left"?d=u.x2:o==="right"?d=u.x1:o==="top"?d=u.y2:o==="bottom"&&(d=u.y1),w3t(t,d,h,o,this.attribute.label.containerAlign)}}_getAxisLabelLimitLength(t,e){var i,r,s,a,o;const{label:l,title:u,line:h,tick:c}=this.attribute,d=(i=l.space)!==null&&i!==void 0?i:4;let p=t,f=0,g=0;const _=h&&h.visible?(r=h.style.lineWidth)!==null&&r!==void 0?r:1:0,v=c&&c.visible?(s=c.length)!==null&&s!==void 0?s:4:0;if(u&&u.visible&&typeof u.text=="string"){f=B2(u.text,u.textStyle,(o=(a=this.stage)===null||a===void 0?void 0:a.getTheme())===null||o===void 0?void 0:o.text).height;const y=ds(u.padding);g=u.space+y[0]+y[2]}return p&&(p=(p-d-g-f-_-v)/e),p}}by.defaultAttributes=tC,On(by,BQ);class jQ{isInValidValue(t){const{startAngle:e=Qg,endAngle:i=tm}=this.attribute;return Math.abs(i-e)%(2*Math.PI)==0?t>1:t<0||t>1}getTickCoord(t){const{startAngle:e=Qg,endAngle:i=tm,center:r,radius:s,inside:a=!1,innerRadius:o=0}=this.attribute;return un(r,a&&o>0?o:s,e+(i-e)*t)}getVerticalVector(t,e=!1,i){return UL(t,i,this.attribute.center,e,this.attribute.inside)}getRelativeVector(t){const{center:e}=this.attribute;return[t.y-e.y,-1*(t.x-e.x)]}}var P3t=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};k3t();class xy extends RQ{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},xy.defaultAttributes,t))}renderLine(t){const{startAngle:e=Qg,endAngle:i=tm,radius:r,center:s,innerRadius:a=0,line:o={},inside:l=!1}=this.attribute;let u=r,h=a;l&&a>0&&(u=a,h=0);const c=Object.assign(Object.assign(Object.assign({},s),{startAngle:e,endAngle:i,radius:u,innerRadius:h}),o.style),d=$t.circle(c);d.name=Lr.line,d.id=this._getNodeId("line"),Gt(o.state)||(d.states=gt({},ol,o.state)),t.add(d)}getTitleAttribute(){var t,e,i;const{center:r,radius:s,innerRadius:a=0}=this.attribute,o=this.attribute.title,{space:l=4,textStyle:u={},shape:h,background:c,state:d={}}=o,p=P3t(o,["space","textStyle","shape","background","state"]);let f=r,g=0;!((t=this.attribute.label)===null||t===void 0)&&t.visible&&this.attribute.label.inside===!1&&(g=le(this.attribute.label,"style.fontSize",12)+le(this.attribute.label,"space",4));let _=0;!((e=this.attribute.tick)===null||e===void 0)&&e.visible&&this.attribute.tick.inside===!1&&(_=this.attribute.tick.length||4),!((i=this.attribute.subTick)===null||i===void 0)&&i.visible&&this.attribute.subTick.inside===!1&&(_=Math.max(_,this.attribute.subTick.length||2));const v=s+_+g+l;let y="middle",{position:b}=this.attribute.title;F(b)&&(b=a===0?"end":"middle"),b==="start"?(y="bottom",f={x:r.x,y:r.y-v}):b==="end"&&(y="top",f={x:r.x,y:r.y+v});const S=Object.assign(Object.assign(Object.assign({},f),p),{textStyle:Object.assign({textBaseline:y,textAlign:"center"},u),state:{text:gt({},ol,d.text),shape:gt({},ol,d.shape),panel:gt({},ol,d.background)}}),{angle:A}=p;return S.angle=A,h&&h.visible&&(S.shape=Object.assign({visible:!0},h.style),h.space&&(S.space=h.space)),c&&c.visible&&(S.panel=Object.assign({visible:!0},c.style)),S}getSubTickLineItems(){var t,e;const{subTick:i}=this.attribute,r=[],{count:s=4,inside:a=!1,length:o=2}=i,l=this.tickLineItems,u=l.length;if(u>=2){const h=this.data[1].value-this.data[0].value,c=(e=(t=this.attribute)===null||t===void 0?void 0:t.tick)===null||e===void 0?void 0:e.alignWithLabel;for(let d=0;d<u;d++){const p=l[d],f=l[d+1];for(let g=0;g<s;g++){const _=(g+1)/(s+1),v=(1-_)*p.value+_*(f?f.value:c?1:p.value+h),y=this.getTickCoord(v),b=this.getVerticalCoord(y,o,a);r.push({start:y,end:b,value:v})}}}return r}getTextBaseline(t){let e="middle";return Ur(t[1],0)?e="middle":t[1]>0&&t[1]>Math.abs(t[0])?e="top":t[1]<0&&Math.abs(t[1])>Math.abs(t[0])&&(e="bottom"),e}beforeLabelsOverlap(t,e,i,r,s){}handleLabelsOverlap(t,e,i,r,s){}afterLabelsOverlap(t,e,i,r,s){}getLabelAlign(t,e,i){return{textAlign:"center",textBaseline:"middle"}}getLabelPosition(t,e,i,r){return TQ(t,e,i,r)}}xy.defaultAttributes=tC,On(xy,jQ);class E3t extends ms{constructor(){super(...arguments),this.mode=$g.NORMAL}onBind(){const t=this.target.getInnerView(),e=this.target.getPrevInnerView();e&&(this._newElementAttrMap={},Io(t,i=>{var r,s,a,o,l,u;if(i.type!=="group"&&i.id){const h=e[i.id];if(h){if(!mi(i.attribute,h.attribute)){const c=cs(i.attribute);this._newElementAttrMap[i.id]={state:"update",node:i,attrs:Object.assign(Object.assign({},c),{opacity:(r=c.opacity)!==null&&r!==void 0?r:1,fillOpacity:(s=c.fillOpacity)!==null&&s!==void 0?s:1,strokeOpacity:(a=c.strokeOpacity)!==null&&a!==void 0?a:1})},i.setAttributes(h.attribute)}}else{const c={opacity:(o=i.attribute.opacity)!==null&&o!==void 0?o:1,fillOpacity:(l=i.attribute.fillOpacity)!==null&&l!==void 0?l:1,strokeOpacity:(u=i.attribute.strokeOpacity)!==null&&u!==void 0?u:1};this._newElementAttrMap[i.id]={state:"enter",node:i,attrs:c},i.setAttributes({opacity:0,fillOpacity:0,strokeOpacity:0})}}}))}onStart(){let t=this.duration,e=this.easing;Object.keys(this._newElementAttrMap).forEach(i=>{var r;const{node:s,attrs:a,state:o}=this._newElementAttrMap[i];if(o==="enter"){const{enter:l={}}=(r=this.params)!==null&&r!==void 0?r:{};t=st(l.duration)?l.duration:t,e=l.easing?l.easing:e}s.type==="path"?s.animate({interpolate:(l,u,h,c,d)=>l==="path"&&(d.path=OCt(h,c)(u),!0)}).to(a,t,e):s.animate().to(a,t,e)})}onUpdate(t,e,i){}}class O3t extends ms{constructor(t,e,i,r){super(null,null,i,r)}getEndProps(){return{}}onBind(){this.target.setTheme({common:{opacity:0}})}onEnd(){this.target.setTheme({common:{opacity:1}})}onUpdate(t,e,i){this.target.setTheme({common:{opacity:e}})}}var tn;(function(n){n.Identity="identity",n.Linear="linear",n.Log="log",n.Pow="pow",n.Sqrt="sqrt",n.Symlog="symlog",n.Time="time",n.Quantile="quantile",n.Quantize="quantize",n.Threshold="threshold",n.Ordinal="ordinal",n.Point="point",n.Band="band"})(tn||(tn={}));const NQ={};Object.values(tn).forEach(n=>{NQ[n]=!0});function ti(n){switch(n){case tn.Linear:case tn.Log:case tn.Pow:case tn.Sqrt:case tn.Symlog:case tn.Time:return!0;default:return!1}}function YL(n){return!!NQ[n]}function qn(n){switch(n){case tn.Ordinal:case tn.Point:case tn.Band:return!0;default:return!1}}function cf(n){return n}const R3t=n=>n<0?-Math.sqrt(-n):Math.sqrt(n),I3t=n=>n<0?-n*n:n*n,L3t=n=>-Math.log(-n),D3t=n=>-Math.exp(-n),B3t=n=>isFinite(n)?Math.pow(10,n):n<0?0:n,HV=n=>n===10?B3t:n===Math.E?Math.exp:t=>Math.pow(n,t),VV=n=>n===Math.E?Math.log:n===10?Math.log10:n===2?Math.log2:(n=Math.log(n),t=>Math.log(t)/n),WV=n=>t=>Math.sign(t)*Math.log1p(Math.abs(t/n)),$V=n=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*n;function XL(n,t){if(n=Number(n),t=Number(t),t-=n)return i=>(i-n)/t;const e=Number.isNaN(t)?NaN:.5;return()=>e}function GV(n,t,e){const i=n[0],r=n[1],s=t[0],a=t[1];let o,l;return r<i?(o=XL(r,i),l=e(a,s)):(o=XL(i,r),l=e(s,a)),u=>l(o(u))}function gF(n,t,e){let i;return i=n===1?n+2*e:n-t+2*e,n?i>0?i:1:0}function KL(n,t,e,i){return e===1&&(e=0),gF(n,e,i)*(t/(1-e))}function F3t(n,t,e,i,r){const s=gF(n,e,i);let a=t/Math.max(1,s||1);r&&(a=Math.floor(a));let o=a*(1-e);return r&&(o=Math.round(o)),o}function zQ(n,t){const e=(n[1]-n[0])/(t[1]-t[0]),i=n[0]-e*t[0];return[i,e+i]}function j3t(n,t,e){const i=Math.min(n.length,t.length)-1,r=new Array(i),s=new Array(i);let a=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++a<i;)r[a]=XL(n[a],n[a+1]),s[a]=e(t[a],t[a+1]);return function(o){const l=Nq(n,o,1,i)-1;return s[l](r[l](o))}}const HQ=(n,t)=>{const e=n.slice();let i=0,r=e.length-1,s=e[i],a=e[r];return a<s&&([i,r]=[r,i],[s,a]=[a,s]),e[i]=t.floor(s),e[r]=t.ceil(a),e},VQ=(n,t=!1)=>{const e=Math.floor(Math.log10(n)),i=n/Math.pow(10,e);let r;return r=t?i<1.5?1:i<3?2:i<7?5:10:i<=1?1:i<=2?2:i<=5?5:10,r*Math.pow(10,e)},N3t=(n,t)=>{let e,i;return t[0]<t[1]?(e=t[0],i=t[1]):(e=t[1],i=t[0]),Math.min(Math.max(n,e),i)};class WQ{constructor(){this._rangeFactorStart=null,this._rangeFactorEnd=null}_calculateWholeRange(t){return this._wholeRange?this._wholeRange:z(this._rangeFactorStart)&&z(this._rangeFactorEnd)&&t.length===2?(this._wholeRange=zQ(t,[this._rangeFactorStart,this._rangeFactorEnd]),this._wholeRange):t}rangeFactor(t,e,i){return t?(t.length===2&&t.every(r=>r>=0&&r<=1)&&(this._wholeRange=null,t[0]===0&&t[1]===1?(this._rangeFactorStart=null,this._rangeFactorEnd=null):(this._rangeFactorStart=t[0],this._rangeFactorEnd=t[1])),this):i?(this._wholeRange=null,this._rangeFactorStart=null,this._rangeFactorEnd=null,this):z(this._rangeFactorStart)&&z(this._rangeFactorEnd)?[this._rangeFactorStart,this._rangeFactorEnd]:null}rangeFactorStart(t,e){var i;return F(t)?this._rangeFactorStart:(t>=0&&t<=1&&(this._wholeRange=null,t!==0||!F(this._rangeFactorEnd)&&this._rangeFactorEnd!==1?(this._rangeFactorStart=t,this._rangeFactorEnd=(i=this._rangeFactorEnd)!==null&&i!==void 0?i:1):(this._rangeFactorStart=null,this._rangeFactorEnd=null)),this)}rangeFactorEnd(t,e){var i;return F(t)?this._rangeFactorEnd:(t>=0&&t<=1&&(this._wholeRange=null,t!==0||!F(this._rangeFactorStart)&&this._rangeFactorStart!==0?(this._rangeFactorEnd=t,this._rangeFactorStart=(i=this._rangeFactorStart)!==null&&i!==void 0?i:0):(this._rangeFactorStart=null,this._rangeFactorEnd=null)),this)}generateFishEyeTransform(){var t;if(!this._fishEyeOptions)return void(this._fishEyeTransform=null);const{distortion:e=2,radiusRatio:i=.1,radius:r}=this._fishEyeOptions,s=this.range(),a=s[0],o=s[s.length-1],l=Math.min(a,o),u=Math.max(a,o),h=Zi((t=this._fishEyeOptions.focus)!==null&&t!==void 0?t:0,l,u),c=F(r)?(u-l)*i:r;let d=Math.exp(e);d=d/(d-1)*c;const p=e/c;this._fishEyeTransform=f=>{const g=Math.abs(f-h);if(g>=c)return f;if(g<=1e-6)return h;const _=d*(1-Math.exp(-g*p))/g*.75+.25;return h+(f-h)*_}}unknown(t){return arguments.length?(this._unknown=t,this):this._unknown}}const qL=Symbol("implicit");class np extends WQ{specified(t){var e;return t?(this._specified=Object.assign((e=this._specified)!==null&&e!==void 0?e:{},t),this):Object.assign({},this._specified)}_getSpecifiedValue(t){if(this._specified)return this._specified[t]}constructor(){super(),this.type=tn.Ordinal,this._index=new Map,this._domain=[],this._ordinalRange=[],this._unknown=qL}clone(){const t=new np().domain(this._domain).range(this._ordinalRange).unknown(this._unknown);return this._specified&&t.specified(this._specified),t}calculateVisibleDomain(t){return z(this._rangeFactorStart)&&z(this._rangeFactorEnd)&&t.length===2?[this.invert(t[0]),this.invert(t[1])]:this._domain}scale(t){const e=`${t}`,i=this._getSpecifiedValue(e);if(i!==void 0)return i;let r=this._index.get(e);if(!r){if(this._unknown!==qL)return this._unknown;r=this._domain.push(t),this._index.set(e,r)}const s=this._ordinalRange[(r-1)%this._ordinalRange.length];return this._fishEyeTransform?this._fishEyeTransform(s):s}invert(t){let e=0;for(;e<this._ordinalRange.length&&this._ordinalRange[e]!==t;)e++;return this._domain[(e-1)%this._domain.length]}domain(t){if(!t)return this._domain.slice();this._domain=[],this._index=new Map;for(const e of t){const i=`${e}`;this._index.has(i)||this._index.set(i,this._domain.push(e))}return this}range(t){if(!t)return this._ordinalRange.slice();const e=Array.from(t);return this._ordinalRange=e,this}index(t){var e;return this._index&&(e=this._index.get(`${t}`))!==null&&e!==void 0?e:-1}}function UV(n,t,e,i){let r;const s=[];let a;if(t=Math.floor(+t),n=Math.floor(+n),!(e=Math.floor(+e)))return[];if(n===t)return[n];if(r=t<n){const u=n;n=t,t=u}let o=o2(1,t-n+1)(e);if(a=Math.floor((t-n+1)/o),!i)for(;Math.ceil((t-n+1)/a)>e&&o>1;)o-=1,a=Math.floor((t-n)/o);let l=n;for(;l<=t;)s.push(l),l+=a;return r&&s.reverse(),s}function z3t(n,t,e){const i=[];let r;if(t=Math.floor(+t),n=Math.floor(+n),e=o2(1,t-n+1)(Math.floor(+e)),r=t<n){const a=n;n=t,t=a}let s=n;for(;s<=t;)i.push(s),s+=e;return r&&i.reverse(),i}class kp extends np{constructor(t){super(),this.type=tn.Band,this._range=[0,1],this._step=void 0,this._bandwidth=void 0,this._isFixed=!1,this._round=!1,this._paddingInner=0,this._paddingOuter=0,this._align=.5,this._unknown=void 0,delete this.unknown,this.rescale(t)}rescale(t,e){if(t)return this;this._wholeRange=null;const i=this._calculateWholeRange(this._range,e),r=super.domain().length,s=i[1]<i[0];let a=i[Number(s)-0];const o=i[1-Number(s)],l=gF(r,this._paddingInner,this._paddingOuter);return this._step=(o-a)/Math.max(1,l||1),this._round&&(this._step=Math.floor(this._step)),a+=(o-a-this._step*(r-this._paddingInner))*this._align,this.isBandwidthFixed()||(this._bandwidth=this._step*(1-this._paddingInner)),this._round&&(a=Math.round(a),this.isBandwidthFixed()||(this._bandwidth=Math.round(this._bandwidth))),this._bandRangeState={reverse:s,start:s?a+this._step*(r-1):a,count:r},this.generateFishEyeTransform(),this}scale(t){if(!this._bandRangeState)return;const e=`${t}`,i=this._getSpecifiedValue(e);if(i!==void 0)return i;let r=this._index.get(e);if(!r){if(this._unknown!==qL)return this._unknown;r=this._domain.push(t),this._index.set(e,r)}const{count:s,start:a,reverse:o}=this._bandRangeState,l=a+(o?-1:1)*((r-1)%s)*this._step;return this._fishEyeTransform?this._fishEyeTransform(l):l}_calculateWholeRange(t,e){if(this._wholeRange)return this._wholeRange;if((this._minBandwidth||this._maxBandwidth)&&!this._isBandwidthFixedByUser()){let i;if(z(this._rangeFactorStart)&&z(this._rangeFactorEnd)&&t.length===2){const s=zQ(t,[this._rangeFactorStart,this._rangeFactorEnd]);i=Math.abs(s[1]-s[0])}else i=Math.abs(t[1]-t[0]);const r=F3t(super.domain().length,i,this._paddingInner,this._paddingOuter,this._round);r<this._minBandwidth?(this._bandwidth=this._minBandwidth,this._isFixed=!0):r>this._maxBandwidth?(this._bandwidth=this._maxBandwidth,this._isFixed=!0):(this._bandwidth=r,this._isFixed=!1)}if(this.isBandwidthFixed()){const i=KL(super.domain().length,this._bandwidth,this._paddingInner,this._paddingOuter)*Math.sign(t[1]-t[0]),r=Math.min((t[1]-t[0])/i,1);if(z(this._rangeFactorStart)&&z(this._rangeFactorEnd)){if(i>0){const o=t[0]-i*this._rangeFactorStart,l=o+i;this._wholeRange=[o,l]}else{const o=t[1]+i*(1-this._rangeFactorEnd),l=o-i;this._wholeRange=[l,o]}const s=this._rangeFactorStart+r<=1,a=this._rangeFactorEnd-r>=0;e==="rangeFactorStart"&&s?this._rangeFactorEnd=this._rangeFactorStart+r:e==="rangeFactorEnd"&&a?this._rangeFactorStart=this._rangeFactorEnd-r:t[0]<=t[1]?s?this._rangeFactorEnd=this._rangeFactorStart+r:a?this._rangeFactorStart=this._rangeFactorEnd-r:(this._rangeFactorStart=0,this._rangeFactorEnd=r):a?this._rangeFactorStart=this._rangeFactorEnd-r:s?this._rangeFactorEnd=this._rangeFactorStart+r:(this._rangeFactorStart=1-r,this._rangeFactorEnd=1)}else this._rangeFactorStart=0,this._rangeFactorEnd=r,this._wholeRange=[t[0],t[0]+i];return this._wholeRange}return super._calculateWholeRange(t)}calculateWholeRangeSize(){const t=this._calculateWholeRange(this._range);return Math.abs(t[1]-t[0])}calculateVisibleDomain(t){const e=this._domain;if(z(this._rangeFactorStart)&&z(this._rangeFactorEnd)&&e.length){const i=this._getInvertIndex(t[0]),r=this._getInvertIndex(t[1]);return e.slice(Math.min(i,r),Math.max(i,r)+1)}return e}domain(t,e){return t?(super.domain(t),this.rescale(e)):super.domain()}range(t,e){return t?(this._range=[pl(t[0]),pl(t[1])],this.rescale(e)):this._range}rangeRound(t,e){return this._range=[pl(t[0]),pl(t[1])],this._round=!0,this.rescale(e)}ticks(t=10){const e=this.calculateVisibleDomain(this._range);return t===-1?e:UV(0,e.length-1,t,!1).map(i=>e[i])}tickData(t=10){return this.ticks(t).map((e,i)=>({index:i,tick:e,value:(this.scale(e)-this._range[0]+this._bandwidth/2)/(this._range[1]-this._range[0])}))}forceTicks(t=10){const e=this.calculateVisibleDomain(this._range);return UV(0,e.length-1,t,!0).filter(i=>i<e.length).map(i=>e[i])}stepTicks(t){const e=this.calculateVisibleDomain(this._range);return z3t(0,e.length-1,t).map(i=>e[i])}_getInvertIndex(t){let e=0;const i=this.step()/2,r=this.bandwidth()/2,s=this._domain.length,a=this.range(),o=a[0]>a[a.length-1];for(e=0;e<s;e++){const l=this.scale(this._domain[e])+r;if(e===0&&(!o&&!sl(t,l+i)||o&&!vo(t,l-i))||e===s-1||!vo(t,l-i)&&!sl(t,l+i))break}return e>=0&&e<=s-1?e:s-1}invert(t){return this._domain[this._getInvertIndex(t)]}padding(t,e){return t!==void 0?(this._paddingOuter=Math.max(0,Math.min(Array.isArray(t)?Math.min.apply(null,t):t)),this._paddingInner=this._paddingOuter,this.rescale(e)):this._paddingInner}paddingInner(t,e){return t!==void 0?(this._paddingInner=Math.max(0,Math.min(1,t)),this.rescale(e)):this._paddingInner}paddingOuter(t,e){return t!==void 0?(this._paddingOuter=Math.max(0,Math.min(1,t)),this.rescale(e)):this._paddingOuter}step(){return this._step}round(t,e){return t!==void 0?(this._round=t,this.rescale(e)):this._round}align(t,e){return t!==void 0?(this._align=Math.max(0,Math.min(1,t)),this.rescale(e)):this._align}rangeFactor(t,e){return t?(super.rangeFactor(t),this.rescale(e)):super.rangeFactor()}rangeFactorStart(t,e){return F(t)?super.rangeFactorStart():(super.rangeFactorStart(t),this.rescale(e,"rangeFactorStart"))}rangeFactorEnd(t,e){return F(t)?super.rangeFactorEnd():(super.rangeFactorEnd(t),this.rescale(e,"rangeFactorEnd"))}bandwidth(t,e){return t?(t==="auto"?(this._bandwidth=void 0,this._isFixed=!1):(this._bandwidth=t,this._isFixed=!0),this._userBandwidth=t,this.rescale(e)):this._bandwidth}maxBandwidth(t,e){return t?(this._maxBandwidth=t==="auto"?void 0:t,this.rescale(e)):this._maxBandwidth}minBandwidth(t,e){return t?(this._minBandwidth=t==="auto"?void 0:t,this.rescale(e)):this._minBandwidth}fishEye(t,e,i){return t||i?(this._fishEyeOptions=t,this._fishEyeTransform=null,this.rescale(e)):this._fishEyeOptions}isBandwidthFixed(){return this._isFixed&&!!this._bandwidth}_isBandwidthFixedByUser(){return this._isFixed&&this._userBandwidth&&Mt(this._userBandwidth)}clone(){var t,e,i;return new kp(!0).domain(this._domain,!0).range(this._range,!0).round(this._round,!0).paddingInner(this._paddingInner,!0).paddingOuter(this._paddingOuter,!0).align(this._align,!0).bandwidth((t=this._userBandwidth)!==null&&t!==void 0?t:"auto",!0).maxBandwidth((e=this._maxBandwidth)!==null&&e!==void 0?e:"auto",!0).minBandwidth((i=this._maxBandwidth)!==null&&i!==void 0?i:"auto")}}const{interpolateRgb:ME}=WCt;function H3t(n,t){const e=typeof t;let i;if(F(t)||e==="boolean")return()=>t;if(e==="number")return S0(n,t);if(e==="string"){if(i=xn.parseColorString(t)){const r=ME(xn.parseColorString(n),i);return s=>r(s).formatRgb()}return S0(Number(n),Number(t))}return t instanceof gr?ME(n,t):t instanceof xn?ME(n.color,t.color):t instanceof Date?MCt(n,t):S0(Number(n),Number(t))}class $Q extends WQ{constructor(t=cf,e=cf){super(),this._unknown=void 0,this.transformer=t,this.untransformer=e,this._forceAlign=!0,this._domain=[0,1],this._range=[0,1],this._clamp=cf,this._piecewise=GV,this._interpolate=H3t}calculateVisibleDomain(t){var e;return z(this._rangeFactorStart)&&z(this._rangeFactorEnd)&&t.length===2?[this.invert(t[0]),this.invert(t[1])]:(e=this._niceDomain)!==null&&e!==void 0?e:this._domain}fishEye(t,e,i){return t||i?(this._fishEyeOptions=t,this._fishEyeTransform=null,this.rescale(e)):this._fishEyeOptions}scale(t){var e;if(t=Number(t),Number.isNaN(t)||this._domainValidator&&!this._domainValidator(t))return this._unknown;this._output||(this._output=this._piecewise(((e=this._niceDomain)!==null&&e!==void 0?e:this._domain).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));const i=this._output(this.transformer(this._clamp(t)));return this._fishEyeTransform?this._fishEyeTransform(i):i}invert(t){var e;return this._input||(this._input=this._piecewise(this._calculateWholeRange(this._range),((e=this._niceDomain)!==null&&e!==void 0?e:this._domain).map(this.transformer),S0)),this._clamp(this.untransformer(this._input(t)))}domain(t,e){var i;if(!t)return((i=this._niceDomain)!==null&&i!==void 0?i:this._domain).slice();this._domainValidator=null,this._niceType=null,this._niceDomain=null;const r=Array.from(t,pl);return this._domain=r,this.rescale(e)}range(t,e){if(!t)return this._range.slice();const i=Array.from(t);return this._range=i,this.rescale(e)}rangeRound(t,e){const i=Array.from(t);return this._range=i,this._interpolate=TCt,this.rescale(e)}rescale(t){var e;if(t)return this;const i=(e=this._niceDomain)!==null&&e!==void 0?e:this._domain,r=i.length,s=this._range.length;let a=Math.min(r,s);if(r&&r<s&&this._forceAlign){const o=s-r+1,l=i[r-1],u=r>=2?(l-i[r-2])/o:0;for(let h=1;h<=o;h++)i[r-2+h]=l-u*(o-h);a=s}return this._autoClamp&&(this._clamp=o2(i[0],i[a-1])),this._piecewise=a>2?j3t:GV,this._output=this._input=null,this._wholeRange=null,this.generateFishEyeTransform(),this}clamp(t,e,i){return arguments.length?(e?(this._autoClamp=!1,this._clamp=e):(this._autoClamp=!!t,this._clamp=t?void 0:cf),this.rescale(i)):this._clamp!==cf}interpolate(t,e){return arguments.length?(this._interpolate=t,this.rescale(e)):this._interpolate}ticks(t=10){return[]}tickData(t=10){const e=this.ticks(t);return(e??[]).map((i,r)=>({index:r,tick:i,value:(this.scale(i)-this._range[0])/(this._range[1]-this._range[0])}))}rangeFactor(t,e){return t?(super.rangeFactor(t),this._output=this._input=null,this):super.rangeFactor()}rangeFactorStart(t,e){return F(t)?super.rangeFactorStart():(super.rangeFactorStart(t),this._output=this._input=null,this)}rangeFactorEnd(t,e){return F(t)?super.rangeFactorEnd():(super.rangeFactorEnd(t),this._output=this._input=null,this)}forceAlignDomainRange(t){return arguments.length?(this._forceAlign=t,this):this._forceAlign}}const V3t=Math.sqrt(50),W3t=Math.sqrt(10),$3t=Math.sqrt(2),Lx=[1,2,5,10],YV=(n,t,e)=>{let i=1,r=n;const s=Math.floor((t-1)/2),a=Math.abs(n);return n>=0&&n<=Number.MIN_VALUE?r=0:n<0&&n>=-Number.MIN_VALUE?r=-(t-1):!e&&a<1?i=GQ(a).step:(e||a>1)&&(r=Math.floor(n)-s*i),i>0?(n>0?r=Math.max(r,0):n<0&&(r=Math.min(r,-(t-1)*i)),Fq(0,t).map(o=>r+o*i)):n>0?eC(0,-(t-1)/i,i):eC((t-1)/i,0,i)},G3t=Em((n,t,e,i)=>{let r,s,a,o,l=-1;if(e=+e,(n=+n)==(t=+t))return[n];if(Math.abs(n-t)<=Number.MIN_VALUE&&e>0)return[n];if((r=t<n)&&(s=n,n=t,t=s),o=mF(n,t,e).step,!isFinite(o))return[];if(o>0){let u=Math.round(n/o),h=Math.round(t/o);for(u*o<n&&++u,h*o>t&&--h,a=new Array(s=h-u+1);++l<s;)a[l]=(u+l)*o}else if(o<0&&(i!=null&&i.noDecimals)){o=1;const u=Math.ceil(n),h=Math.floor(t);if(!(u<=h))return[];for(a=new Array(s=h-u+1);++l<s;)a[l]=u+l}else{o=-o;let u=Math.round(n*o),h=Math.round(t*o);for(u/o<n&&++u,h/o>t&&--h,a=new Array(s=h-u+1);++l<s;)a[l]=(u+l)/o}return r&&a.reverse(),a}),eC=(n,t,e)=>{let i,r,s=-1;if(e>0){let a=Math.floor(n/e),o=Math.ceil(t/e);for((a+1)*e<n&&++a,(o-1)*e>t&&--o,r=new Array(i=o-a+1);++s<i;)r[s]=(a+s)*e}else{e=-e;let a=Math.floor(n*e),o=Math.ceil(t*e);for((a+1)/e<n&&++a,(o-1)/e>t&&--o,r=new Array(i=o-a+1);++s<i;)r[s]=(a+s)/e}return r},U3t=(n,t,e)=>{let i;const r=n[0],s=n[n.length-1],a=t-n.length;if(s<=0){const u=[];for(i=a;i>=1;i--)u.push(r-i*e);return u.concat(n)}if(r>=0){for(i=1;i<=a;i++)n.push(s+i*e);return n}let o=[];const l=[];for(i=1;i<=a;i++)i%2==0?o=[r-Math.floor(i/2)*e].concat(o):l.push(s+Math.ceil(i/2)*e);return o.concat(n).concat(l)},iC=Em((n,t,e,i)=>{let r,s,a;if(e=+e,(n=+n)==(t=+t)||Math.abs(n-t)<=Number.MIN_VALUE&&e>0)return YV(n,e,i==null?void 0:i.noDecimals);(r=t<n)&&(a=n,n=t,t=a);const o=mF(n,t,e);let l=o.step;if(!isFinite(l))return[];if(l>0){let u=1;const{power:h,gap:c}=o,d=c===10?2*10**h:1*10**h;for(;u<=5&&(s=eC(n,t,l),s.length>e+1)&&e>2;)l+=d,u+=1;e>2&&s.length<e-1&&(s=U3t(s,e,l))}else i!=null&&i.noDecimals&&l<0&&(l=1),s=eC(n,t,l);return r&&s.reverse(),s}),GQ=n=>{const t=Math.floor(Math.log(n)/Math.LN10),e=n/10**t;let i=Lx[0];return e>=V3t?i=Lx[3]:e>=W3t?i=Lx[2]:e>=$3t&&(i=Lx[1]),t>=0?{step:i*10**t,gap:i,power:t}:{step:-(10**-t)/i,gap:i,power:t}};function mF(n,t,e){const i=(t-n)/Math.max(0,e);return GQ(i)}function UQ(n,t,e){let i;if(e=+e,(n=+n)==(t=+t)&&e>0)return[n];if(e<=0||(i=Y3t(n,t,e))===0||!isFinite(i))return[];const r=new Array(e);for(let s=0;s<e;s++)r[s]=n+s*i;return r}function Y3t(n,t,e){return(t-n)/Math.max(1,e-1)}function X3t(n,t,e){let i,r,s=-1;if(e=+e,(r=(t=+t)<(n=+n))&&(i=n,n=t,t=i),!isFinite(e)||t-n<=e)return[n];const a=Math.floor((t-n)/e+1),o=new Array(a);for(;++s<a;)o[s]=n+s*e;return r&&o.reverse(),o}function PE(n,t=10){let e,i,r=0,s=n.length-1,a=n[r],o=n[s],l=10;for(o<a&&(i=a,a=o,o=i,i=r,r=s,s=i);l-- >0;){if(i=mF(a,o,t).step,i===e)return n[r]=a,n[s]=o,n;if(i>0)a=Math.floor(a/i)*i,o=Math.ceil(o/i)*i;else{if(!(i<0))break;a=Math.ceil(a*i)/i,o=Math.floor(o*i)/i}e=i}}function vF(n,t){const e=Mt(t.forceMin),i=Mt(t.forceMax);let r=null;const s=[];let a=null;const o=e&&i?l=>l>=t.forceMin&&l<=t.forceMax:e?l=>l>=t.forceMin:i?l=>l<=t.forceMax:null;return e?s[0]=t.forceMin:Mt(t.min)&&t.min<=Math.min(n[0],n[n.length-1])&&(s[0]=t.min),i?s[1]=t.forceMax:Mt(t.max)&&t.max>=Math.max(n[0],n[n.length-1])&&(s[1]=t.max),Mt(s[0])&&Mt(s[1])?(a=n.slice(),a[0]=s[0],a[a.length-1]=s[1]):r=Mt(s[0])||Mt(s[1])?Mt(s[0])?"max":"min":"all",{niceType:r,niceDomain:a,niceMinMax:s,domainValidator:o}}const EE=(n,t,e)=>Math.abs(t-n)<1?+e.toFixed(1):Math.round(+e),YQ=Em((n,t,e,i,r,s,a)=>{let o=n,l=t;const u=l<o;u&&([o,l]=[l,o]);let h,c,d=r(o),p=r(l),f=[];if(!(i%1)&&p-d<e){if(d=Math.floor(d),p=Math.ceil(p),o>0){for(;d<=p;++d)for(h=1;h<i;++h)if(c=d<0?h/s(-d):h*s(d),!(c<o)){if(c>l)break;f.push(c)}}else for(;d<=p;++d)for(h=i-1;h>=1;--h)if(c=d>0?h/s(-d):h*s(d),!(c<o)){if(c>l)break;f.push(c)}2*f.length<e&&(f=iC(o,l,e))}else f=iC(d,p,Math.min(p-d,e)).map(s);return f=f.filter(g=>g!==0),a!=null&&a.noDecimals&&(f=Array.from(new Set(f.map(g=>Math.floor(g))))),u?f.reverse():f}),XQ=Em((n,t,e,i,r,s)=>{const a=[],o={},l=r(n),u=r(t);let h=[];if(Number.isInteger(i))h=iC(l,u,e);else{const c=(u-l)/(e-1);for(let d=0;d<e;d++)h.push(l+d*c)}return h.forEach(c=>{const d=s(c),p=Number.isInteger(i)?EE(n,t,d):EE(n,t,VQ(d)),f=EE(n,t,N3t(p,[n,t]));!o[f]&&!isNaN(f)&&h.length>1&&(o[f]=1,a.push(f))}),a}),nC=Em((n,t,e,i,r)=>UQ(i(n),i(t),e).map(s=>VQ(r(s))));class to extends $Q{constructor(){super(...arguments),this.type=tn.Linear}clone(){return new to().domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate)}tickFormat(){return()=>{}}d3Ticks(t=10,e){const i=this.calculateVisibleDomain(this._range);return G3t(i[0],i[i.length-1],t,e)}ticks(t=10,e){var i;if(z(this._rangeFactorStart)&&z(this._rangeFactorEnd)&&(this._rangeFactorStart>0||this._rangeFactorEnd<1)&&this._range.length===2||!this._niceType)return this.d3Ticks(t,e);const r=(i=this._niceDomain)!==null&&i!==void 0?i:this._domain,s=this._domain,a=r[0],o=r[r.length-1];let l=iC(s[0],s[s.length-1],t,e);if(!l.length)return l;if(this._domainValidator)l=l.filter(this._domainValidator);else if((l[0]!==a||l[l.length-1]!==o)&&this._niceType){const u=r.slice();if(this._niceType==="all"?(u[0]=l[0],u[u.length-1]=l[l.length-1],this._niceDomain=u,this.rescale()):this._niceType==="min"&&l[0]!==a?(u[0]=l[0],this._niceDomain=u,this.rescale()):this._niceType==="max"&&l[l.length-1]!==o&&(u[u.length-1]=l[l.length-1],this._niceDomain=u,this.rescale()),this._niceType!=="all"){const h=Math.min(u[0],u[u.length-1]),c=Math.max(u[0],u[u.length-1]);l=l.filter(d=>d>=h&&d<=c)}}return l}forceTicks(t=10){const e=this.calculateVisibleDomain(this._range);return UQ(e[0],e[e.length-1],t)}stepTicks(t){const e=this.calculateVisibleDomain(this._range);return X3t(e[0],e[e.length-1],t)}nice(t=10,e){var i,r;const s=this._domain;let a=[];if(e){const o=vF(s,e);if(a=o.niceMinMax,this._domainValidator=o.domainValidator,this._niceType=o.niceType,o.niceDomain)return this._niceDomain=o.niceDomain,this.rescale(),this}else this._niceType="all";if(this._niceType){const o=PE(s.slice(),t);this._niceType==="min"?o[o.length-1]=(i=a[1])!==null&&i!==void 0?i:o[o.length-1]:this._niceType==="max"&&(o[0]=(r=a[0])!==null&&r!==void 0?r:o[0]),this._niceDomain=o,this.rescale()}return this}niceMin(t=10){this._niceType="min";const e=this._domain[this._domain.length-1],i=PE(this.domain(),t);return i&&(i[i.length-1]=e,this._niceDomain=i,this.rescale()),this}niceMax(t=10){this._niceType="max";const e=this._domain[0],i=PE(this._domain.slice(),t);return i&&(i[0]=e,this._niceDomain=i,this.rescale()),this}}function XV(n){return t=>-n(-t)}function KV(n=Number.EPSILON){return t=>Math.max(t,n)}function K3t(n=Number.EPSILON){return t=>Math.min(t,-n)}class _F extends $Q{constructor(){super(VV(10),HV(10)),this.type=tn.Log,this._limit=KV(),this._logs=this.transformer,this._pows=this.untransformer,this._domain=[1,10],this._base=10}clone(){return new _F().domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate,!0).base(this._base)}rescale(t){var e;if(t)return this;super.rescale();const i=VV(this._base),r=HV(this._base);return((e=this._niceDomain)!==null&&e!==void 0?e:this._domain)[0]<0?(this._logs=XV(i),this._pows=XV(r),this._limit=K3t(),this.transformer=L3t,this.untransformer=D3t):(this._logs=i,this._pows=r,this._limit=KV(),this.transformer=this._logs,this.untransformer=r),this}scale(t){var e;if(t=Number(t),Number.isNaN(t)||this._domainValidator&&!this._domainValidator(t))return this._unknown;this._output||(this._output=this._piecewise(((e=this._niceDomain)!==null&&e!==void 0?e:this._domain).map(this._limit).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));const i=this._output(this.transformer(this._limit(this._clamp(t))));return this._fishEyeTransform?this._fishEyeTransform(i):i}base(t,e){return arguments.length?(this._base=t,this.rescale(e)):this._base}tickFormat(){return cf}d3Ticks(t=10,e){const i=this.domain(),r=this._limit(i[0]),s=this._limit(i[i.length-1]);return YQ(r,s,t,this._base,this.transformer,this.untransformer,e)}ticks(t=10){const e=this.calculateVisibleDomain(this._range);return XQ(this._limit(e[0]),this._limit(e[e.length-1]),t,this._base,this.transformer,this.untransformer)}forceTicks(t=10){const e=this.calculateVisibleDomain(this._range);return nC(e[0],e[e.length-1],t,this.transformer,this.untransformer)}stepTicks(t){const e=this.calculateVisibleDomain(this._range);return nC(this._limit(e[0]),this._limit(e[e.length-1]),t,this.transformer,this.untransformer)}nice(t=10,e){var i,r;const s=this._domain;let a=[],o=null;if(e){const l=vF(s,e);if(a=l.niceMinMax,this._domainValidator=l.domainValidator,o=l.niceType,l.niceDomain)return this._niceDomain=l.niceDomain,this.rescale(),this}else o="all";if(o){const l=HQ(s.slice(),{floor:u=>this._pows(Math.floor(this._logs(this._limit(u)))),ceil:u=>Math.abs(u)>=1?Math.ceil(u):this._pows(Math.ceil(this._logs(this._limit(u))))});return o==="min"?l[l.length-1]=(i=a[1])!==null&&i!==void 0?i:l[l.length-1]:o==="max"&&(l[0]=(r=a[0])!==null&&r!==void 0?r:l[0]),this._niceDomain=l,this.rescale(),this}return this}niceMin(){const t=this._domain[this._domain.length-1];this.nice();const e=this._domain.slice();return this._domain&&(e[e.length-1]=t,this._niceDomain=e,this.rescale()),this}niceMax(){const t=this._domain[0];this.nice();const e=this._domain.slice();return this._domain&&(e[0]=t,this._niceDomain=e,this.rescale()),this}}class q3t extends kp{constructor(t){super(!1),this.type=tn.Point,this._padding=0,this.paddingInner(1,t),this.padding=this.paddingOuter,this.paddingInner=void 0,this.paddingOuter=void 0}}class rC extends to{constructor(){super(R3t,I3t),this.type=tn.Sqrt}clone(){return new rC().domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate)}}class yF extends to{constructor(){super(WV(1),$V(1)),this.type=tn.Symlog,this._const=1}clone(){return new yF().domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate,!0).constant(this._const)}constant(t,e){return arguments.length?(this._const=t,this.transformer=WV(t),this.untransformer=$V(t),this.rescale(e)):this._const}d3Ticks(t=10,e){const i=this.domain(),r=i[0],s=i[i.length-1];return YQ(r,s,t,this._const,this.transformer,this.untransformer,e)}ticks(t=10){const e=this.calculateVisibleDomain(this._range);return XQ(e[0],e[e.length-1],t,this._const,this.transformer,this.untransformer)}forceTicks(t=10){const e=this.calculateVisibleDomain(this._range);return nC(e[0],e[e.length-1],t,this.transformer,this.untransformer)}stepTicks(t){const e=this.calculateVisibleDomain(this._range);return nC(e[0],e[e.length-1],t,this.transformer,this.untransformer)}nice(t=10,e){var i,r;const s=this._domain;let a=[],o=null;if(e){const l=vF(s,e);if(a=l.niceMinMax,this._domainValidator=l.domainValidator,o=l.niceType,l.niceDomain)return this._niceDomain=l.niceDomain,this.rescale(),this}else o="all";if(o){const l=HQ(s.slice(),{floor:u=>Math.floor(u),ceil:u=>Math.ceil(u)});return o==="min"?l[l.length-1]=(i=a[1])!==null&&i!==void 0?i:l[l.length-1]:o==="max"&&(l[0]=(r=a[0])!==null&&r!==void 0?r:l[0]),this._niceDomain=l,this.rescale(),this}return this}niceMin(){const t=this._domain[this._domain.length-1];this.nice();const e=this._domain.slice();return this._domain&&(e[e.length-1]=t,this._niceDomain=e,this.rescale()),this}niceMax(){const t=this._domain[0];this.nice();const e=this._domain.slice();return this._domain&&(e[0]=t,this._niceDomain=e,this.rescale()),this}}class bF{constructor(){this.type=tn.Threshold,this._range=[0,1],this._domain=[.5],this.n=1}unknown(t){return arguments.length?(this._unknown=t,this):this._unknown}scale(t){return!F(t)&&st(+t)?this._range[Nq(this._domain,t,0,this.n)]:this._unknown}invertExtent(t){const e=this._range.indexOf(t);return[this._domain[e-1],this._domain[e]]}domain(t){return t?(this._domain=Array.from(t),this.n=Math.min(this._domain.length,this._range.length-1),this):this._domain.slice()}range(t){return t?(this._range=Array.from(t),this.n=Math.min(this._domain.length,this._range.length-1),this):this._range.slice()}clone(){return new bF().domain(this._domain).range(this._range).unknown(this._unknown)}}const Al=n=>n.map((t,e)=>({index:e,value:t})),qV=(n,t,e=0)=>{const i=new Ai(n).expand(e/2),r=new Ai(t).expand(e/2);return i.intersects(r)};function KQ(n,t,e){return e>Math.max(t.x1-n.x2,n.x1-t.x2,t.y1-n.y2,n.y1-t.y2)}function Z3t(n,t){for(let e,i=1,r=n.length,s=n[0];i<r;s=e,++i)if(e=n[i],KQ(s.AABBBounds,e.AABBBounds,t))return!0;return!1}const Dx=(n,t,e,i)=>e<n?Math.max(n-t/2,e):e>n?Math.min(n-t/2,e-t):e<i?e:e-t,qQ=(n,t,e)=>{var i;const{labelStyle:r,axisOrientType:s,labelFlush:a,labelFormatter:o,startAngle:l=0}=e;let u=(i=r.angle)!==null&&i!==void 0?i:0;r.direction==="vertical"&&(u+=qe(90));const h=["bottom","top"].includes(s),c=["left","right"].includes(s);let d=1,p=0;h||(c?(d=0,p=1):l&&(d=Math.cos(l),p=-Math.sin(l)));const f=vg(r),g=n.range();return t.map((v,y)=>{var b,S;const A=o?o(v):`${v}`,{width:w,height:C}=f.quickMeasure(A),k=Math.max(w,12),M=Math.max(C,12),P=n.scale(v),E=d*P,I=p*P;let D,N,O=E,L=I;a&&h&&y===0?O=Dx(E,k,g[0],g[g.length-1]):a&&h&&y===t.length-1?O=Dx(E,k,g[g.length-1],g[0]):D=(b=r.textAlign)!==null&&b!==void 0?b:"center",D==="right"?O-=k:D==="center"&&(O-=k/2),a&&c&&y===0?L=Dx(I,M,g[0],g[g.length-1]):a&&c&&y===t.length-1?L=Dx(I,M,g[g.length-1],g[0]):N=(S=r.textBaseline)!==null&&S!==void 0?S:"middle",N==="bottom"?L-=M:N==="middle"&&(L-=M/2);const H=new Ai().set(O,L,O+k,L+M);return u&&H.rotate(u,E,I),H})},J3t=(n,t,e)=>{var i;const{labelStyle:r,getRadius:s,labelOffset:a,labelFormatter:o,inside:l}=e,u=s==null?void 0:s(),h=(i=r.angle)!==null&&i!==void 0?i:0,c=vg(r);return t.map(p=>{var f,g;const _=o?o(p):`${p}`,{width:v,height:y}=c.quickMeasure(_),b=Math.max(v,12),S=Math.max(y,12),A=n.scale(p);let w=0,C=0;const k=(f=r.textAlign)!==null&&f!==void 0?f:"center",M=(g=r.textBaseline)!==null&&g!==void 0?g:"middle",{x:P,y:E}=c3t(A,{x:0,y:0},u,a,l,_,r);return w=P+(k==="right"?-b:k==="center"?-b/2:0),C=E+(M==="bottom"?-S:M==="middle"?-S/2:0),new Ai().set(w,C,w+b,C+S).rotate(h,w+b/2,C+S/2)})},Q3t=n=>["bottom","top","z"].includes(n),tFt=(n,t)=>{if(!ti(n.type))return Al(n.domain());const e=n.range(),i=Math.abs(e[e.length-1]-e[0]);if(i<2)return Al([n.domain()[0]]);const{tickCount:r,forceTickCount:s,tickStep:a,noDecimals:o=!1,labelStyle:l}=t;let u;if(z(a))u=n.stepTicks(a);else if(z(s))u=n.forceTicks(s);else if(t.tickMode==="d3"){const h=ft(r)?r({axisLength:i,labelStyle:l}):r;u=n.d3Ticks(h??5,{noDecimals:o})}else{const h=ft(r)?r({axisLength:i,labelStyle:l}):r;u=n.ticks(h??5,{noDecimals:o})}if(t.sampling&&(t.coordinateType==="cartesian"||t.coordinateType==="polar"&&t.axisOrientType==="radius")){const{labelGap:h=4,labelFlush:c}=t;let d=qQ(n,u,t).map((f,g)=>({AABBBounds:f,value:u[g]}));for(;d.length>=3&&Z3t(d,h);)d=eFt.parity(d);const p=d.map(f=>f.value);p.length<3&&c&&(p.length>1&&p.pop(),Gh(p)!==Gh(u)&&p.push(Gh(u))),u=p}return Al(u)},eFt={parity:function(n){return n.filter((t,e)=>e%2==0)},greedy:function(n,t){let e;return n.filter((i,r)=>(!r||!KQ(e.AABBBounds,i.AABBBounds,t))&&(e=i,!0))}},ZV=(n,t,e,i)=>qQ(n,t,e).map(r=>i?[r.x1,r.x2,r.width()]:[r.y1,r.y2,r.height()]),JV=(n,t,e=0)=>Math.max(n[0],t[0])-e/2<=Math.min(n[1],t[1])+e/2,QV=(n,t)=>n[1]<t[0]?t[0]-n[1]:t[1]<n[0]?n[0]-t[1]:0,iFt=(n,t)=>{var e;const i=n.domain();if(!i.length)return[];const{tickCount:r,forceTickCount:s,tickStep:a,labelGap:o=4,axisOrientType:l,labelStyle:u}=t,h=Q3t(l),c=n.range(),d=n.calculateWholeRangeSize();if(d<2)return t.labelLastVisible?Al([i[i.length-1]]):Al([i[0]]);let p;if(z(a))p=n.stepTicks(a);else if(z(s))p=n.forceTicks(s);else if(z(r)){const f=ft(r)?r({axisLength:d,labelStyle:u}):r;p=n.ticks(f)}else if(t.sampling){const f=((e=t.labelStyle.fontSize)!==null&&e!==void 0?e:12)+2,g=dn(c),_=Vi(c);if(i.length<=d/f){const v=(_-g)/i.length,y=ZV(n,i,t,h),b=Math.min(...y.map(A=>A[2])),S=nFt(i,y,o,t.labelLastVisible,Math.floor(b/v),!1);p=n.stepTicks(S.step),t.labelLastVisible&&(S.delCount&&(p=p.slice(0,p.length-S.delCount)),p.push(i[i.length-1]))}else{const v=[i[0],i[Math.floor(i.length/2)],i[i.length-1]],y=ZV(n,v,t,h);let b=null;y.forEach(A=>{b?b[2]<A[2]&&(b=A):b=A});const S=_-g-o>0?Math.ceil(i.length*(o+b[2])/(_-g-o)):i.length-1;p=n.stepTicks(S),!t.labelLastVisible||p.length&&p[p.length-1]===i[i.length-1]||(p.length&&Math.abs(n.scale(p[p.length-1])-n.scale(i[i.length-1]))<b[2]&&(p=p.slice(0,-1)),p.push(i[i.length-1]))}}else p=n.domain();return Al(p)},nFt=(n,t,e,i,r,s)=>{let a=0,o=0,l=-1,u=Number.MAX_VALUE;const h=p=>{let f=!0,g=0;do g+p<n.length&&JV(t[g],t[g+p],e)&&(f=!1),g+=p;while(f&&g<n.length);return f},c=zq(r,n.length,p=>h(p)?1:-1);let d=c;do if(d>c&&!s&&!h(d))d++;else{if(!i){o=d;break}{const p=n.length-1;let f,g=0;f=n.length%d>0?n.length-n.length%d+d:n.length;do{if(f-=d,f!==p&&!JV(t[f],t[p],e))break;g++}while(f>0);if(f===p){o=d,a=g;break}{const _=Math.floor(n.length/d)-g+1;if(_<l)break;{l=_;const v=QV(t[f],t[p]),y=f-d>=0?QV(t[f-d],t[f]):v,b=Math.abs(v-y);if(b<u&&(u=b,o=d,a=g),v<=y)break}}}d++}while(d<=n.length);return{step:o,delCount:a}},rFt=(n,t)=>{const{tickCount:e,forceTickCount:i,tickStep:r,getRadius:s,labelOffset:a,labelGap:o=0,labelStyle:l}=t,u=s==null?void 0:s();if(!u)return Al(n.domain());let h;if(z(r))h=n.stepTicks(r);else if(z(i))h=n.forceTicks(i);else if(z(e)){const c=n.range(),d=Math.abs(c[c.length-1]-c[0]),p=ft(e)?e({axisLength:d,labelStyle:l}):e;h=n.ticks(p)}else if(t.sampling){const c=n.domain(),d=n.range(),p=J3t(n,c,t),f=dn(d),g=Vi(d),_=Math.abs(g-f)*(u+a)/c.length,{step:v,delCount:y}=sFt(c,p,o,Math.floor(p.reduce((b,S)=>Math.min(b,S.width(),S.height()),Number.MAX_VALUE)/_));h=n.stepTicks(v),h=h.slice(0,h.length-y)}else h=n.domain();return Al(h)},sFt=(n,t,e,i)=>{let r=i;do{let a=!0;r++;let o=0;do o+r<n.length&&qV(t[o],t[o+r],e)&&(a=!1),o+=r;while(a&&o<n.length);if(a)break}while(r<=n.length);let s=0;if(n.length>2){let a=n.length-n.length%r;for(a>=n.length&&(a-=r);a>0&&qV(t[0],t[a]);)s++,a-=r}return{step:r,delCount:s}},aFt=(n,t)=>{if(ti(n.type))return tFt(n,t);if(qn(n.type)){if(t.coordinateType==="cartesian")return iFt(n,t);if(t.coordinateType==="polar"&&t.axisOrientType==="angle")return rFt(n,t)}return Al(n.domain())};function Xf(n,t){let e="";return n.length===0||(n.forEach((i,r)=>{r===0?e=`M${i.x},${i.y}`:e+=`L${i.x},${i.y}`}),t&&(e+="Z")),e}function ZL(n,t,e,i){let r="";if(!n||t.length===0)return r;const s=t[0],a=Ni.distancePP(n,s),o=e?0:1;return i?r+=`M${n.x},${n.y-a}A${a},${a},0,0,${o},${n.x},${n.y+a}A${a},${a},0,0,${o},${n.x},${n.y-a}Z`:t.forEach((l,u)=>{u===0?r=`M${l.x},${l.y}`:r+=`A${a},${a},0,0,${o},${l.x},${l.y}`}),r}function oFt(n,t,e){const{type:i,closed:r}=e,s=t.slice(0).reverse();let a="",o="";if(i==="line"&&e.smoothLink&&e.center){const l=n[0],u=s[0],h=e.center;a=Xf(n,!!r),o=Xf(s,!!r);const c=Ni.distancePP(u,h),d=Ni.distancePP(l,h);a+=`A${c},${c},0,0,1,${u.x},${u.y}L${u.x},${u.y}`,o+=`A${d},${d},0,0,0,${l.x},${l.y}`}else if(i==="circle"){const{center:l}=e;a=ZL(l,n,!1,!!r),o=ZL(l,s,!0,!!r)}else i!=="line"&&i!=="polygon"||(a=Xf(n,!!r),o=Xf(s,!!r));return r?a+=o:(o="L"+o.substring(1),a+=o,a+="Z"),a}class _c extends Nn{constructor(){super(...arguments),this.name="axis-grid",this.data=[]}getInnerView(){return this._innerView}getPrevInnerView(){return this._prevInnerView}render(){this._prevInnerView=this._innerView&&MQ(this._innerView),this.removeAllChild(!0),this._innerView=$t.group({x:0,y:0,pickable:!1}),this.add(this._innerView);const{items:t,visible:e}=this.attribute;t&&t.length&&e!==!1&&(this.data=this._transformItems(t),this._renderGrid(this._innerView))}getVerticalCoord(t,e,i){return pF(t,this.getVerticalVector(e,i,t))}_transformItems(t){const e=[];return t.forEach(i=>{var r;e.push(Object.assign(Object.assign({},i),{point:this.getTickCoord(i.value),id:(r=i.id)!==null&&r!==void 0?r:i.label}))}),e}_renderGrid(t){const{visible:e}=this.attribute.subGrid||{};e&&this._renderGridByType(!0,t),this._renderGridByType(!1,t)}_renderGridByType(t,e){const i=gt({},this.attribute,this.getGridAttribute(t)),{type:r,items:s,style:a,closed:o,alternateColor:l,depth:u=0}=i,h=t?`${Lr.grid}-sub`:`${Lr.grid}`;if(s.forEach((c,d)=>{const{id:p,points:f}=c;let g="";if(r==="line"||r==="polygon")g=Xf(f,!!o);else if(r==="circle"){const{center:v}=this.attribute;g=ZL(v,f,!1,!!o)}const _=$t.path(Object.assign({path:g,z:u},ft(a)?gt({},this.skipDefault?null:_c.defaultAttributes.style,a(c,d)):a));_.name=`${h}-line`,_.id=this._getNodeId(`${h}-path-${p}`),e.add(_)}),u&&r==="line"&&s.forEach((c,d)=>{const{id:p,points:f}=c,g=[];g.push(f[0]);const _=f[1].x-f[0].x,v=f[1].y-f[0].y,y=Math.sqrt(_*_+v*v),b=u/y;g.push({x:f[0].x+_*b,y:f[0].y+v*b});const S=Xf(g,!!o),A=Ie(g[0].x-g[1].x),w=Ie(g[0].y-g[1].y),C=$t.path(Object.assign({path:S,z:0,alpha:A>w?(f[1].x-f[0].x>0?-1:1)*Qe/2:0,beta:A<w?-Qe/2:0,anchor3d:A>w?[g[0].x,0]:[0,g[0].y]},ft(a)?gt({},this.skipDefault?null:_c.defaultAttributes.style,a(c,d)):a));C.name=`${h}-line`,C.id=this._getNodeId(`${h}-path-${p}`),e.add(C)}),s.length>1&&l){const c=ut(l)?l:[l,"transparent"],d=p=>c[p%c.length];for(let p=0;p<s.length-1;p++){const[f,g]=[s[p].points,s[p+1].points],_=oFt(f,g,i),v=$t.path({path:_,fill:d(p)});v.name=`${h}-region`,v.id=this._getNodeId(`${h}-region-${p}`),e.add(v)}}}_getNodeId(t){return`${this.id}-${t}`}release(){super.release(),this._prevInnerView=null,this._innerView=null}}_c.defaultAttributes={style:{lineWidth:1,stroke:"#999",strokeOpacity:1,lineDash:[4,4]},subGrid:{visible:!1,style:{lineWidth:1,stroke:"#999",strokeOpacity:1,lineDash:[4,4]}}};function lFt(n,t,e,i,r){const s=[],a=r-i;for(let o=0;o<t;o++){const l=i+o*a/t;s.push(un(n,e,l))}return s}T3t();class ZQ extends _c{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},_c.defaultAttributes,t),e)}_getGridPoint(t,e){let i;if(t==="line"){const{length:r}=this.attribute;i=[e,this.getVerticalCoord(e,r,!0)]}else if(t==="circle"||t==="polygon"){const{center:r,sides:s=6,startAngle:a=Qg,endAngle:o=tm}=this.attribute;i=lFt(r,s,Ni.distancePP(r,e),a,o)}return i}getGridAttribute(t){const{type:e,alignWithLabel:i=!0}=this.attribute;let r=1,s;this.data.length>=2&&(r=this.data[1].value-this.data[0].value);let a=[];if(t){s=gt({},this.attribute,this.attribute.subGrid);const o=[],{count:l=4}=this.attribute.subGrid||{};if(this.data.length>=2){const u=[];this.data.forEach(h=>{let c=h.value;if(!i){const d=h.value-r/2;if(this.isInValidValue(d))return;c=d}u.push({value:c})});for(let h=0;h<u.length-1;h++){const c=u[h],d=u[h+1];o.push({id:`sub-${h}-0`,points:this._getGridPoint(e,this.getTickCoord(c.value)),datum:{}});for(let p=0;p<l;p++){const f=(p+1)/(l+1),g=(1-f)*c.value+f*d.value,_=this.getTickCoord(g);o.push({id:`sub-${h}-${p+1}`,points:this._getGridPoint(e,_),datum:{}})}h===u.length-2&&o.push({id:`sub-${h}-${l+1}`,points:this._getGridPoint(e,this.getTickCoord(d.value)),datum:{}})}a=o}}else{s=this.attribute;const o=[];this.data.forEach(l=>{let{point:u}=l;if(!i){const h=l.value-r/2;if(this.isInValidValue(h))return;u=this.getTickCoord(h)}o.push({id:l.label,datum:l,points:this._getGridPoint(e,u)})}),a=o}return Object.assign(Object.assign({},s),{items:a})}}On(ZQ,BQ);var uFt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};M3t();class JQ extends _c{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},_c.defaultAttributes,t),e)}getGridAttribute(t){let e,i=[];const r=this.attribute,{radius:s,innerRadius:a=0,startAngle:o=Qg,endAngle:l=tm,center:u,subGrid:h}=r,c=uFt(r,["radius","innerRadius","startAngle","endAngle","center","subGrid"]),{alignWithLabel:d=!0}=c||{},p=s-a;let f=1;if(this.data.length>=2&&(f=this.data[1].value-this.data[0].value),t){e=gt({},c,h);const g=[],{count:_=4}=h||{},v=this.data.length;if(v>=2){const y=[];this.data.forEach(b=>{let S=b.value;if(!d){const A=b.value-f/2;if(this.isInValidValue(A))return;S=A}y.push({value:S})});for(let b=0;b<v;b++){const S=y[b],A=y[b+1];g.push({id:`sub-${b}-0`,points:[this.getTickCoord(S.value),this.getVerticalCoord(this.getTickCoord(S.value),p,!0)],datum:{}});for(let w=0;w<_;w++){const C=(w+1)/(_+1),k=(1-C)*S.value+C*(A?A.value:d?1:S.value+f),M=this.getTickCoord(k),P=this.getVerticalCoord(M,p,!0);g.push({id:`sub-${b}-${w+1}`,points:[M,P],datum:{}})}}Math.abs(l-o)%(2*Math.PI)==0&&g.push(g[0]),i=g}}else{e=c;const g=[];let _;_=Math.abs(l-o)%(2*Math.PI)==0?[...this.data].concat(this.data[0]):this.data,_.forEach(v=>{let{point:y}=v;if(!d){const S=v.value-f/2;if(this.isInValidValue(S))return;y=this.getTickCoord(S)}const b=this.getVerticalCoord(y,p,!0);g.push({id:v.id,points:[y,b],datum:v})}),i=g}return Object.assign(Object.assign({},e),{items:i,center:u,type:"line"})}}On(JQ,jQ);const tW="M -0.0544 0.25 C -0.0742 0.25 -0.0901 0.234 -0.0901 0.2143 L -0.0901 -0.1786 C -0.0901 -0.1983 -0.0742 -0.2143 -0.0544 -0.2143 L -0.0187 -0.2143 L -0.0187 -0.5 L 0.017 -0.5 L 0.017 -0.2143 L 0.0527 -0.2143 C 0.0724 -0.2143 0.0884 -0.1983 0.0884 -0.1786 L 0.0884 0.2143 C 0.0884 0.234 0.0724 0.25 0.0527 0.25 L 0.017 0.25 L 0.017 0.5 L -0.0187 0.5 L -0.0187 0.25 L -0.0544 0.25 Z M -0.0187 -0.1429 L -0.0544 -0.1429 L -0.0544 0.1786 L -0.0187 0.1786 L -0.0187 -0.1429 Z M 0.0527 -0.1429 L 0.017 -0.1429 L 0.017 0.1786 L 0.0527 0.1786 L 0.0527 -0.1429 Z",hFt={orient:"bottom",showDetail:"auto",brushSelect:!0,zoomLock:!1,minSpan:0,maxSpan:1,delayType:"throttle",delayTime:0,realTime:!0,backgroundStyle:{fill:"white",stroke:"#D1DBEE",lineWidth:1,cornerRadius:2},dragMaskStyle:{fill:"#B0C8F9",fillOpacity:.2},backgroundChartStyle:{area:{visible:!0,stroke:"#D1DBEE",lineWidth:1,fill:"#F6F8FC"},line:{visible:!0,stroke:"#D1DBEE",lineWidth:1}},selectedBackgroundStyle:{fill:"#B0C8F9",fillOpacity:.5},selectedBackgroundChartStyle:{area:{visible:!0,stroke:"#B0C8F9",lineWidth:1,fill:"#fbb934"},line:{visible:!0,stroke:"#fbb934",lineWidth:1}},middleHandlerStyle:{visible:!0,background:{size:8,style:{fill:"white",stroke:"#B0C8F9",cornerRadius:2}},icon:{size:6,fill:"white",stroke:"#B0C8F9",symbolType:"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z",lineWidth:.5}},startHandlerStyle:{visible:!0,triggerMinSize:0,symbolType:tW,fill:"white",stroke:"#B0C8F9",lineWidth:.5},endHandlerStyle:{visible:!0,triggerMinSize:0,symbolType:tW,fill:"white",stroke:"#B0C8F9",lineWidth:.5},startTextStyle:{padding:4,textStyle:{fontSize:10,fill:"#6F6F6F"}},endTextStyle:{padding:4,textStyle:{fontSize:10,fill:"#6F6F6F"}}},oh={horizontal:{angle:0,strokeBoundsBuffer:0,boundsPadding:2,pickMode:"imprecise",cursor:"ew-resize"},vertical:{angle:Math.PI/180*90,cursor:"ns-resize",boundsPadding:2,pickMode:"imprecise",strokeBoundsBuffer:0}};var rs;(function(n){n.startHandler="startHandler",n.endHandler="endHandler",n.middleHandler="middleHandler",n.background="background"})(rs||(rs={}));function cFt(){F2(),Wu(),no(),dQ(),Vu()}var eW=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};const dFt={debounce:Ml,throttle:Pc};cFt();let QQ=class ttt extends Nn{setPropsFromAttrs(){const{start:t,end:e,orient:i,previewData:r,previewPointsX:s,previewPointsY:a,previewPointsX1:o,previewPointsY1:l}=this.attribute;t&&(this.state.start=t),e&&(this.state.end=e);const{width:u,height:h}=this.getLayoutAttrFromConfig();this._spanCache=this.state.end-this.state.start,this._isHorizontal=i==="top"||i==="bottom",this._layoutCache.max=this._isHorizontal?u:h,this._layoutCache.attPos=this._isHorizontal?"x":"y",this._layoutCache.attSize=this._isHorizontal?"width":"height",r&&(this._previewData=r),ft(s)&&(this._previewPointsX=s),ft(a)&&(this._previewPointsY=a),ft(o)&&(this._previewPointsX1=o),ft(l)&&(this._previewPointsY1=l)}constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},ttt.defaultAttributes,t)),this.name="dataZoom",this._previewData=[],this._activeState=!1,this._activeCache={startPos:{x:0,y:0},lastPos:{x:0,y:0}},this._layoutCache={attPos:"x",attSize:"width",max:0},this.state={start:0,end:1},this._statePointToData=s=>s,this._onHandlerPointerDown=(s,a)=>{s.stopPropagation(),a==="start"?(this._activeTag=rs.startHandler,this._activeItem=this._startHandlerMask):a==="end"?(this._activeTag=rs.endHandler,this._activeItem=this._endHandlerMask):a==="middleRect"?(this._activeTag=rs.middleHandler,this._activeItem=this._middleHandlerRect):a==="middleSymbol"?(this._activeTag=rs.middleHandler,this._activeItem=this._middleHandlerSymbol):a==="background"&&(this._activeTag=rs.background,this._activeItem=this._background),this._activeState=!0,this._activeCache.startPos=this.eventPosToStagePos(s),this._activeCache.lastPos=this.eventPosToStagePos(s),_e.env==="browser"&&(_e.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),_e.addEventListener("pointerup",this._onHandlerPointerUp)),this.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0})},this._pointerMove=s=>{s.stopPropagation();const{start:a,end:o,brushSelect:l,realTime:u=!0}=this.attribute,h=this.eventPosToStagePos(s),{attPos:c,max:d}=this._layoutCache,p=(h[c]-this._activeCache.lastPos[c])/d;let{start:f,end:g}=this.state;this._activeState&&(this._activeTag===rs.middleHandler?this.moveZoomWithMiddle((this.state.start+this.state.end)/2+p):this._activeTag===rs.startHandler?f+p>g?(f=g,g=f+p,this._activeTag=rs.endHandler):f+=p:this._activeTag===rs.endHandler&&(g+p<f?(g=f,f=g+p,this._activeTag=rs.startHandler):g+=p),this._activeCache.lastPos=h,l&&this.renderDragMask()),f=Math.min(Math.max(f,0),1),g=Math.min(Math.max(g,0),1),a===f&&o===g||(this.setStateAttr(f,g,!0),u&&this._dispatchEvent("change",{start:f,end:g,tag:this._activeTag}))},this._onHandlerPointerMove=this.attribute.delayTime===0?this._pointerMove:dFt[this.attribute.delayType](this._pointerMove,this.attribute.delayTime),this._onHandlerPointerUp=s=>{s.preventDefault();const{start:a,end:o,brushSelect:l,realTime:u=!0}=this.attribute;if(this._activeState&&this._activeTag===rs.background){const h=this.eventPosToStagePos(s);this.backgroundDragZoom(this._activeCache.startPos,h)}this._activeState=!1,l&&this.renderDragMask(),a===this.state.start&&o===this.state.end||(this.setStateAttr(this.state.start,this.state.end,!0),this._dispatchEvent("change",{start:this.state.start,end:this.state.end,tag:this._activeTag})),_e.env==="browser"&&(_e.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),_e.removeEventListener("pointerup",this._onHandlerPointerUp)),this.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),this.removeEventListener("pointerup",this._onHandlerPointerUp)};const{position:i,showDetail:r}=t;this._activeCache.startPos=i,this._activeCache.lastPos=i,this._showText=r!=="auto"&&r,this.setPropsFromAttrs()}setAttributes(t,e){super.setAttributes(t,e),this.setPropsFromAttrs()}bindEvents(){if(this.attribute.disableTriggerEvent)return void this.setAttribute("childrenPickable",!1);const{showDetail:t,brushSelect:e}=this.attribute;this._startHandlerMask&&this._startHandlerMask.addEventListener("pointerdown",r=>this._onHandlerPointerDown(r,"start")),this._endHandlerMask&&this._endHandlerMask.addEventListener("pointerdown",r=>this._onHandlerPointerDown(r,"end")),this._middleHandlerSymbol&&this._middleHandlerSymbol.addEventListener("pointerdown",r=>this._onHandlerPointerDown(r,"middleSymbol")),this._middleHandlerRect&&this._middleHandlerRect.addEventListener("pointerdown",r=>this._onHandlerPointerDown(r,"middleRect"));const i=e?"background":"middleRect";this._selectedBackground&&this._selectedBackground.addEventListener("pointerdown",r=>this._onHandlerPointerDown(r,i)),e&&this._background&&this._background.addEventListener("pointerdown",r=>this._onHandlerPointerDown(r,"background")),e&&this._previewGroup&&this._previewGroup.addEventListener("pointerdown",r=>this._onHandlerPointerDown(r,"background")),this._selectedPreviewGroup&&this._selectedPreviewGroup.addEventListener("pointerdown",r=>this._onHandlerPointerDown(r,i)),this.addEventListener("pointerup",this._onHandlerPointerUp),this.addEventListener("pointerupoutside",this._onHandlerPointerUp),t==="auto"&&(this.addEventListener("pointerenter",this._onHandlerPointerEnter),this.addEventListener("pointerleave",this._onHandlerPointerLeave))}dragMaskSize(){const{position:t}=this.attribute,{attPos:e,max:i}=this._layoutCache;return this._activeCache.lastPos[e]-t[e]>i?i+t[e]-this._activeCache.startPos[e]:this._activeCache.lastPos[e]-t[e]<0?t[e]-this._activeCache.startPos[e]:this._activeCache.lastPos[e]-this._activeCache.startPos[e]}setStateAttr(t,e,i){const{zoomLock:r=!1,minSpan:s=0,maxSpan:a=1}=this.attribute,o=e-t;o!==this._spanCache&&(r||o<s||o>a)||(this._spanCache=o,this.state.start=t,this.state.end=e,i&&this.setAttributes({start:t,end:e}))}eventPosToStagePos(t){return this.stage.eventPointTransform(t)}_onHandlerPointerEnter(t){t.stopPropagation(),this._showText=!0,this.renderText()}_onHandlerPointerLeave(t){t.stopPropagation(),this._showText=!1,this.renderText()}backgroundDragZoom(t,e){const{attPos:i,max:r}=this._layoutCache,{position:s}=this.attribute,a=t[i]-s[i],o=e[i]-s[i],l=Math.min(Math.max(Math.min(a,o)/r,0),1),u=Math.min(Math.max(Math.max(a,o)/r,0),1);Math.abs(l-u)<.01?this.moveZoomWithMiddle(l):this.setStateAttr(l,u,!1)}moveZoomWithMiddle(t){let e=t-(this.state.start+this.state.end)/2;e!==0&&(e>0?this.state.end+e>1&&(e=1-this.state.end):e<0&&this.state.start+e<0&&(e=-this.state.start),this.setStateAttr(this.state.start+e,this.state.end+e,!1))}renderDragMask(){const{dragMaskStyle:t}=this.attribute,{position:e,width:i,height:r}=this.getLayoutAttrFromConfig();this._isHorizontal?this._dragMask=this._container.createOrUpdateChild("dragMask",Object.assign({x:Zi(this.dragMaskSize()<0?this._activeCache.lastPos.x:this._activeCache.startPos.x,e.x,e.x+i),y:e.y,width:this._activeState&&this._activeTag===rs.background&&Math.abs(this.dragMaskSize())||0,height:r},t),"rect"):this._dragMask=this._container.createOrUpdateChild("dragMask",Object.assign({x:e.x,y:Zi(this.dragMaskSize()<0?this._activeCache.lastPos.y:this._activeCache.startPos.y,e.y,e.y+r),width:i,height:this._activeState&&this._activeTag===rs.background&&Math.abs(this.dragMaskSize())||0},t),"rect")}isTextOverflow(t,e,i){if(!e)return!1;if(this._isHorizontal){if(i==="start"){if(e.x1<t.x1)return!0}else if(e.x2>t.x2)return!0}else if(i==="start"){if(e.y1<t.y1)return!0}else if(e.y2>t.y2)return!0;return!1}setTextAttr(t,e){const{startTextStyle:i,endTextStyle:r}=this.attribute,{formatMethod:s}=i,a=eW(i,["formatMethod"]),{formatMethod:o}=r,l=eW(r,["formatMethod"]),{start:u,end:h}=this.state;this._startValue=this._statePointToData(u),this._endValue=this._statePointToData(h);const{position:c,width:d,height:p}=this.getLayoutAttrFromConfig(),f=s?s(this._startValue):this._startValue,g=o?o(this._endValue):this._endValue,_={x1:c.x,y1:c.y,x2:c.x+d,y2:c.y+p};let v,y,b,S;this._isHorizontal?(v={x:c.x+u*d,y:c.y+p/2},y={x:c.x+h*d,y:c.y+p/2},b={textAlign:this.isTextOverflow(_,t,"start")?"left":"right",textBaseline:"middle"},S={textAlign:this.isTextOverflow(_,e,"end")?"right":"left",textBaseline:"middle"}):(v={x:c.x+d/2,y:c.y+u*p},y={x:c.x+d/2,y:c.y+h*p},b={textAlign:"center",textBaseline:this.isTextOverflow(_,t,"start")?"top":"bottom"},S={textAlign:"center",textBaseline:this.isTextOverflow(_,e,"end")?"bottom":"top"}),this._startText=this.maybeAddLabel(this._container,gt({},a,{text:f,x:v.x,y:v.y,visible:this._showText,pickable:!1,childrenPickable:!1,textStyle:b}),`data-zoom-start-text-${c}`),this._endText=this.maybeAddLabel(this._container,gt({},l,{text:g,x:y.x,y:y.y,visible:this._showText,pickable:!1,childrenPickable:!1,textStyle:S}),`data-zoom-end-text-${c}`)}renderText(){let t=null,e=null;this.setTextAttr(t,e),t=this._startText.AABBBounds,e=this._endText.AABBBounds,this.setTextAttr(t,e),t=this._startText.AABBBounds,e=this._endText.AABBBounds;const{x1:i,x2:r,y1:s,y2:a}=t,{dx:o=0,dy:l=0}=this.attribute.startTextStyle;if(new Fn().set(i,s,r,a).intersects(e)){const u=this.attribute.orient==="bottom"||this.attribute.orient==="right"?-1:1;this._isHorizontal?this._startText.setAttribute("dy",l+u*Math.abs(e.y1-e.y2)):this._startText.setAttribute("dx",o+u*Math.abs(e.x1-e.x2))}else this._isHorizontal?this._startText.setAttribute("dy",l):this._startText.setAttribute("dx",o)}getLayoutAttrFromConfig(){var t,e,i,r,s,a;if(this._layoutAttrFromConfig)return this._layoutAttrFromConfig;const{position:o,size:l,orient:u,middleHandlerStyle:h={},startHandlerStyle:c={},endHandlerStyle:d={},backgroundStyle:p={}}=this.attribute,{width:f,height:g}=l,_=(e=(t=h.background)===null||t===void 0?void 0:t.size)!==null&&e!==void 0?e:10;let v,y,b;h.visible?this._isHorizontal?(v=f,y=g-_,b={x:o.x,y:o.y+_}):(v=f-_,y=g,b={x:o.x+(u==="left"?_:0),y:o.y}):(v=f,y=g,b=o);const S=(i=c.size)!==null&&i!==void 0?i:this._isHorizontal?y:v,A=(r=d.size)!==null&&r!==void 0?r:this._isHorizontal?y:v;return c.visible&&(this._isHorizontal?(v-=(S+A)/2,b={x:b.x+S/2,y:b.y}):(y-=(S+A)/2,b={x:b.x,y:b.y+S/2})),y+=(s=p.lineWidth/2)!==null&&s!==void 0?s:1,v+=(a=p.lineWidth/2)!==null&&a!==void 0?a:1,this._layoutAttrFromConfig={position:b,width:v,height:y},this._layoutAttrFromConfig}render(){var t,e,i,r,s,a,o,l,u,h,c,d,p,f,g,_,v,y,b,S,A,w,C,k,M,P,E,I,D,N,O,L,H,j;this._layoutAttrFromConfig=null;const{orient:G,backgroundStyle:U,backgroundChartStyle:$={},selectedBackgroundStyle:q={},selectedBackgroundChartStyle:tt={},middleHandlerStyle:it={},startHandlerStyle:nt={},endHandlerStyle:K={},brushSelect:J,zoomLock:Q}=this.attribute,{start:dt,end:bt}=this.state,{position:xt,width:ht,height:St}=this.getLayoutAttrFromConfig(),yt=(t=nt.triggerMinSize)!==null&&t!==void 0?t:40,vt=(e=K.triggerMinSize)!==null&&e!==void 0?e:40,pt=this.createOrUpdateChild("dataZoom-container",{},"group");if(this._container=pt,this._background=pt.createOrUpdateChild("background",Object.assign(Object.assign({x:xt.x,y:xt.y,width:ht,height:St,cursor:J?"crosshair":"auto"},U),{pickable:!Q&&((i=U.pickable)===null||i===void 0||i)}),"rect"),!((r=$.line)===null||r===void 0)&&r.visible&&this.setPreviewAttributes("line",pt),!((s=$.area)===null||s===void 0)&&s.visible&&this.setPreviewAttributes("area",pt),J&&this.renderDragMask(),this._isHorizontal?this._selectedBackground=pt.createOrUpdateChild("selectedBackground",Object.assign(Object.assign({x:xt.x+dt*ht,y:xt.y,width:(bt-dt)*ht,height:St,cursor:J?"crosshair":"move"},q),{pickable:!Q&&((a=tt.pickable)===null||a===void 0||a)}),"rect"):this._selectedBackground=pt.createOrUpdateChild("selectedBackground",Object.assign(Object.assign({x:xt.x,y:xt.y+dt*St,width:ht,height:(bt-dt)*St,cursor:J?"crosshair":"move"},q),{pickable:!Q&&((o=q.pickable)===null||o===void 0||o)}),"rect"),!((l=tt.line)===null||l===void 0)&&l.visible&&this.setSelectedPreviewAttributes("line",pt),!((u=tt.area)===null||u===void 0)&&u.visible&&this.setSelectedPreviewAttributes("area",pt),this._isHorizontal){if(it.visible){const te=((h=it.background)===null||h===void 0?void 0:h.size)||10;this._middleHandlerRect=pt.createOrUpdateChild("middleHandlerRect",Object.assign(Object.assign({x:xt.x+dt*ht,y:xt.y-te,width:(bt-dt)*ht,height:te},(c=it.background)===null||c===void 0?void 0:c.style),{pickable:!Q&&((f=(p=(d=it.background)===null||d===void 0?void 0:d.style)===null||p===void 0?void 0:p.pickable)===null||f===void 0||f)}),"rect"),this._middleHandlerSymbol=pt.createOrUpdateChild("middleHandlerSymbol",Object.assign(Object.assign({x:xt.x+(dt+bt)/2*ht,y:xt.y-te/2,strokeBoundsBuffer:0,angle:0,symbolType:(_=(g=it.icon)===null||g===void 0?void 0:g.symbolType)!==null&&_!==void 0?_:"square"},it.icon),{pickable:!Q&&((v=it.icon.pickable)===null||v===void 0||v)}),"symbol")}this._startHandler=pt.createOrUpdateChild("startHandler",Object.assign(Object.assign(Object.assign({x:xt.x+dt*ht,y:xt.y+St/2,size:St,symbolType:(y=nt.symbolType)!==null&&y!==void 0?y:"square"},oh.horizontal),nt),{pickable:!Q&&((b=nt.pickable)===null||b===void 0||b)}),"symbol"),this._endHandler=pt.createOrUpdateChild("endHandler",Object.assign(Object.assign(Object.assign({x:xt.x+bt*ht,y:xt.y+St/2,size:St,symbolType:(S=K.symbolType)!==null&&S!==void 0?S:"square"},oh.horizontal),K),{pickable:!Q&&((A=K.pickable)===null||A===void 0||A)}),"symbol");const jt=Math.max(this._startHandler.AABBBounds.width(),yt),Lt=Math.max(this._startHandler.AABBBounds.height(),yt),Yt=Math.max(this._endHandler.AABBBounds.width(),vt),Nt=Math.max(this._endHandler.AABBBounds.height(),vt);this._startHandlerMask=pt.createOrUpdateChild("startHandlerMask",Object.assign(Object.assign({x:xt.x+dt*ht-jt/2,y:xt.y+St/2-Lt/2,width:jt,height:Lt,fill:"white",fillOpacity:0,zIndex:999},oh.horizontal),{pickable:!Q}),"rect"),this._endHandlerMask=pt.createOrUpdateChild("endHandlerMask",Object.assign(Object.assign({x:xt.x+bt*ht-Yt/2,y:xt.y+St/2-Nt/2,width:Yt,height:Nt,fill:"white",fillOpacity:0,zIndex:999},oh.horizontal),{pickable:!Q}),"rect")}else{if(it.visible){const te=((w=it.background)===null||w===void 0?void 0:w.size)||10;this._middleHandlerRect=pt.createOrUpdateChild("middleHandlerRect",Object.assign(Object.assign({x:G==="left"?xt.x-te:xt.x+ht,y:xt.y+dt*St,width:te,height:(bt-dt)*St},(C=it.background)===null||C===void 0?void 0:C.style),{pickable:!Q&&((P=(M=(k=it.background)===null||k===void 0?void 0:k.style)===null||M===void 0?void 0:M.pickable)===null||P===void 0||P)}),"rect"),this._middleHandlerSymbol=pt.createOrUpdateChild("middleHandlerSymbol",Object.assign(Object.assign({x:G==="left"?xt.x-te/2:xt.x+ht+te/2,y:xt.y+(dt+bt)/2*St,angle:Math.PI/180*90,symbolType:(I=(E=it.icon)===null||E===void 0?void 0:E.symbolType)!==null&&I!==void 0?I:"square",strokeBoundsBuffer:0},it.icon),{pickable:!Q&&((N=(D=it.icon)===null||D===void 0?void 0:D.pickable)===null||N===void 0||N)}),"symbol")}this._startHandler=pt.createOrUpdateChild("startHandler",Object.assign(Object.assign(Object.assign({x:xt.x+ht/2,y:xt.y+dt*St,size:ht,symbolType:(O=nt.symbolType)!==null&&O!==void 0?O:"square"},oh.vertical),nt),{pickable:!Q&&((L=nt.pickable)===null||L===void 0||L)}),"symbol"),this._endHandler=pt.createOrUpdateChild("endHandler",Object.assign(Object.assign(Object.assign({x:xt.x+ht/2,y:xt.y+bt*St,size:ht,symbolType:(H=K.symbolType)!==null&&H!==void 0?H:"square"},oh.vertical),K),{pickable:!Q&&((j=K.pickable)===null||j===void 0||j)}),"symbol");const jt=Math.max(this._startHandler.AABBBounds.width(),yt),Lt=Math.max(this._startHandler.AABBBounds.height(),yt),Yt=Math.max(this._endHandler.AABBBounds.width(),vt),Nt=Math.max(this._endHandler.AABBBounds.height(),vt);this._startHandlerMask=pt.createOrUpdateChild("startHandlerMask",Object.assign(Object.assign({x:xt.x+ht/2+jt/2,y:xt.y+dt*St-Lt/2,width:Nt,height:Yt,fill:"white",fillOpacity:0,zIndex:999},oh.vertical),{pickable:!Q}),"rect"),this._endHandlerMask=pt.createOrUpdateChild("endHandlerMask",Object.assign(Object.assign({x:xt.x+ht/2+Yt/2,y:xt.y+bt*St-Nt/2,width:Nt,height:Yt,fill:"white",fillOpacity:0,zIndex:999},oh.vertical),{pickable:!Q}),"rect")}this._showText&&this.renderText()}computeBasePoints(){const{orient:t}=this.attribute,{position:e,width:i,height:r}=this.getLayoutAttrFromConfig();let s,a;return this._isHorizontal?(s=[{x:e.x,y:e.y+r}],a=[{x:e.x+i,y:e.y+r}]):t==="left"?(s=[{x:e.x+i,y:e.y}],a=[{x:e.x+i,y:e.y+r}]):(s=[{x:e.x,y:e.y+r}],a=[{x:e.x,y:e.y}]),{basePointStart:s,basePointEnd:a}}simplifyPoints(t){var e;if(t.length>1e4){const i=(e=this.attribute.tolerance)!==null&&e!==void 0?e:this._previewData.length/1e4;return XRt(t,i)}return t}getPreviewLinePoints(){let t=this._previewData.map(r=>({x:this._previewPointsX&&this._previewPointsX(r),y:this._previewPointsY&&this._previewPointsY(r)}));if(t.length===0)return t;t=this.simplifyPoints(t);const{basePointStart:e,basePointEnd:i}=this.computeBasePoints();return e.concat(t).concat(i)}getPreviewAreaPoints(){let t=this._previewData.map(r=>({x:this._previewPointsX&&this._previewPointsX(r),y:this._previewPointsY&&this._previewPointsY(r),x1:this._previewPointsX1&&this._previewPointsX1(r),y1:this._previewPointsY1&&this._previewPointsY1(r)}));if(t.length===0)return t;t=this.simplifyPoints(t);const{basePointStart:e,basePointEnd:i}=this.computeBasePoints();return e.concat(t).concat(i)}setPreviewAttributes(t,e){this._previewGroup||(this._previewGroup=e.createOrUpdateChild("previewGroup",{pickable:!1},"group")),t==="line"?this._previewLine=this._previewGroup.createOrUpdateChild("previewLine",{},"line"):this._previewArea=this._previewGroup.createOrUpdateChild("previewArea",{curveType:"basis"},"area");const{backgroundChartStyle:i={}}=this.attribute;t==="line"&&this._previewLine.setAttributes(Object.assign({points:this.getPreviewLinePoints(),curveType:"basis",pickable:!1},i.line)),t==="area"&&this._previewArea.setAttributes(Object.assign({points:this.getPreviewAreaPoints(),curveType:"basis",pickable:!1},i.area))}setSelectedPreviewAttributes(t,e){this._selectedPreviewGroupClip||(this._selectedPreviewGroupClip=e.createOrUpdateChild("selectedPreviewGroupClip",{pickable:!1},"group"),this._selectedPreviewGroup=this._selectedPreviewGroupClip.createOrUpdateChild("selectedPreviewGroup",{},"group")),t==="line"?this._selectedPreviewLine=this._selectedPreviewGroup.createOrUpdateChild("selectedPreviewLine",{},"line"):this._selectedPreviewArea=this._selectedPreviewGroup.createOrUpdateChild("selectedPreviewArea",{curveType:"basis"},"area");const{selectedBackgroundChartStyle:i={}}=this.attribute,{start:r,end:s}=this.state,{position:a,width:o,height:l}=this.getLayoutAttrFromConfig();this._selectedPreviewGroupClip.setAttributes({x:this._isHorizontal?a.x+r*o:a.x,y:this._isHorizontal?a.y:a.y+r*l,width:this._isHorizontal?(s-r)*o:o,height:this._isHorizontal?l:(s-r)*l,clip:!0,pickable:!1}),this._selectedPreviewGroup.setAttributes({x:-(this._isHorizontal?a.x+r*o:a.x),y:-(this._isHorizontal?a.y:a.y+r*l),width:this._isHorizontal?(s-r)*o:o,height:this._isHorizontal?l:(s-r)*l,pickable:!1}),t==="line"&&this._selectedPreviewLine.setAttributes(Object.assign({points:this.getPreviewLinePoints(),curveType:"basis",pickable:!1},i.line)),t==="area"&&this._selectedPreviewArea.setAttributes(Object.assign({points:this.getPreviewAreaPoints(),curveType:"basis",pickable:!1},i.area))}maybeAddLabel(t,e,i){let r=this.find(s=>s.name===i,!0);return r?r.setAttributes(e):(r=new ro(e),r.name=i),t.add(r),r}setStartAndEnd(t,e){const{start:i,end:r}=this.attribute;z(t)&&z(e)&&(t!==this.state.start||e!==this.state.end)&&(this.state.start=t,this.state.end=e,i===this.state.start&&r===this.state.end||(this.setStateAttr(t,e,!0),this._dispatchEvent("change",{start:t,end:e,tag:this._activeTag})))}setPreviewData(t){this._previewData=t}setText(t,e){e==="start"?this._startText.setAttribute("text",t):this._endText.setAttribute("text",t)}getStartValue(){return this._startValue}getEndTextValue(){return this._endValue}getMiddleHandlerSize(){var t,e,i,r;const{middleHandlerStyle:s={}}=this.attribute,a=(e=(t=s.background)===null||t===void 0?void 0:t.size)!==null&&e!==void 0?e:10,o=(r=(i=s.icon)===null||i===void 0?void 0:i.size)!==null&&r!==void 0?r:10;return Math.max(a,...ot(o))}setPreviewPointsX(t){ft(t)&&(this._previewPointsX=t)}setPreviewPointsY(t){ft(t)&&(this._previewPointsY=t)}setPreviewPointsX1(t){ft(t)&&(this._previewPointsX1=t)}setPreviewPointsY1(t){ft(t)&&(this._previewPointsY1=t)}setStatePointToData(t){ft(t)&&(this._statePointToData=t)}};QQ.defaultAttributes=hFt;var JL;(function(n){n.start="start",n.startTop="startTop",n.startBottom="startBottom",n.insideStart="insideStart",n.insideStartTop="insideStartTop",n.insideStartBottom="insideStartBottom",n.middle="middle",n.insideMiddleTop="insideMiddleTop",n.insideMiddleBottom="insideMiddleBottom",n.end="end",n.endTop="endTop",n.endBottom="endBottom",n.insideEnd="insideEnd",n.insideEndTop="insideEndTop",n.insideEndBottom="insideEndBottom"})(JL||(JL={}));var QL;(function(n){n.left="left",n.right="right",n.top="top",n.bottom="bottom",n.middle="middle",n.insideLeft="insideLeft",n.insideRight="insideRight",n.insideTop="insideTop",n.insideBottom="insideBottom"})(QL||(QL={}));var er;(function(n){n.arcInnerStart="arcInnerStart",n.arcInnerEnd="arcInnerEnd",n.arcInnerMiddle="arcInnerMiddle",n.arcOuterStart="arcOuterStart",n.arcOuterEnd="arcOuterEnd",n.arcOuterMiddle="arcOuterMiddle",n.center="center"})(er||(er={}));var tD;(function(n){n.top="top",n.bottom="bottom",n.middle="middle",n.insideTop="insideTop",n.insideBottom="insideBottom",n.insideMiddle="insideMiddle"})(tD||(tD={}));function k1(){rn(),F2()}function pFt(){k1(),cF()}function fFt(){k1(),dF()}function gFt(){k1(),D2()}function mFt(){k1(),Bm()}function vFt(){k1(),cF(),dF(),no(),pQ(),Vu()}function ett(n,t){const{x1:e,y1:i,x2:r,y2:s}=t,{x1:a,y1:o,x2:l,y2:u}=n.AABBBounds;let h=0,c=0;return a<e&&(h=e-a),o<i&&(c=i-o),l>r&&(h=r-l),u>s&&(c=s-u),{dx:h,dy:c}}function xF(n,t){const{dx:e,dy:i}=ett(n,t),{dx:r=0,dy:s=0}=n.attribute;e&&n.setAttribute("dx",e+r),i&&n.setAttribute("dy",i+s)}class X2 extends Nn{constructor(){super(...arguments),this.name="marker",this._onHover=t=>{this._lastHover=PQ(t,this._container,this._lastHover)},this._onUnHover=t=>{this._lastHover=EQ(t,this._container,this._lastHover)},this._onClick=t=>{this._lastSelect=OQ(t,this._container,this._lastSelect)}}transAnimationConfig(){var t,e,i;if(this.attribute.animation!==!1){const r=ae(this.attribute.animation)?this.attribute.animation:{};this._animationConfig={enter:gt({},this.defaultUpdateAnimation,r,(t=this.attribute.animationEnter)!==null&&t!==void 0?t:{}),exit:gt({},this.defaultExitAnimation,r,(e=this.attribute.animationExit)!==null&&e!==void 0?e:{}),update:gt({},this.defaultUpdateAnimation,r,(i=this.attribute.animationUpdate)!==null&&i!==void 0?i:{})}}}setAttribute(t,e,i){super.setAttribute(t,e,i),t==="visible"&&this.render()}_bindEvent(){var t,e,i;if(!this.attribute.interactive)return;const{hover:r,select:s}=this.attribute;r&&((t=this._container)===null||t===void 0||t.addEventListener("pointermove",this._onHover),(e=this._container)===null||e===void 0||e.addEventListener("pointerout",this._onUnHover)),s&&((i=this._container)===null||i===void 0||i.addEventListener("pointerdown",this._onClick))}_releaseEvent(){var t,e,i;(t=this._container)===null||t===void 0||t.removeEventListener("pointermove",this._onHover),(e=this._container)===null||e===void 0||e.removeEventListener("pointerout",this._onUnHover),(i=this._container)===null||i===void 0||i.removeEventListener("pointerdown",this._onClick)}_initContainer(){var t,e;const{limitRect:i={},clipInRange:r}=this.attribute;let s;if(r){const a=$t.group(Object.assign(Object.assign({},i),{clip:!0,pickable:!1}));s=$t.group({x:-((t=i.x)!==null&&t!==void 0?t:0),y:-((e=i.y)!==null&&e!==void 0?e:0),pickable:!1}),a.add(s),this._containerClip=a,this.add(a)}else s=$t.group({x:0,y:0,pickable:!1}),this.add(s);s.name="marker-container",this._container=s}_updateContainer(){var t,e;const{limitRect:i={},clipInRange:r}=this.attribute;this._containerClip&&this._containerClip.setAttributes(Object.assign({},i)),this._container.setAttributes({x:r?-((t=i.x)!==null&&t!==void 0?t:0):0,y:r?-((e=i.y)!==null&&e!==void 0?e:0):0})}render(){var t;this.transAnimationConfig(),this.setAttribute("pickable",!1);const e=(t=this.attribute.visible)===null||t===void 0||t;this.attribute.interactive===!1&&this.setAttribute("childrenPickable",!1),e&&this.isValidPoints()?this._container?(this._updateContainer(),this.updateMarker(),this.markerAnimate("update")):(this._initContainer(),this.initMarker(this._container),this.markerAnimate("enter")):(this.markerAnimate("exit"),this._container=null,this.removeAllChild(!0)),this._releaseEvent(),this._bindEvent()}release(){this.markerAnimate("exit"),super.release(),this._releaseEvent(),this._container=null}}function Ln(n,t,e,i){var r,s,a,o,l;if(!n)return;(r=n==null?void 0:n.animates)===null||r===void 0||r.forEach(c=>c.stop("end"));const u=(a=(s=n.attribute)===null||s===void 0?void 0:s.fillOpacity)!==null&&a!==void 0?a:1,h=(l=(o=n.attribute)===null||o===void 0?void 0:o.strokeOpacity)!==null&&l!==void 0?l:1;n.setAttributes({fillOpacity:0,strokeOpacity:0}),n.animate().wait(t).to({fillOpacity:u,strokeOpacity:h},e,i)}function itt(n,t,e,i){n&&(Ln(n.startSymbol,t,e,i),n.lines.forEach(r=>Ln(r,t,e,i)),Ln(n.line,t,e,i),Ln(n.endSymbol,t,e,i))}function K2(n,t,e,i){n&&(Ln(n.getTextShape(),t,e,i),Ln(n.getBgRect(),t,e,i))}function gl(n,t,e,i){var r,s,a,o;n&&(n.setAttributes({fillOpacity:(s=(r=n.attribute)===null||r===void 0?void 0:r.fillOpacity)!==null&&s!==void 0?s:1,strokeOpacity:(o=(a=n.attribute)===null||a===void 0?void 0:a.strokeOpacity)!==null&&o!==void 0?o:1}),n.animate().wait(t).to({fillOpacity:0,strokeOpacity:0},e,i))}function ntt(n,t,e,i){n&&(gl(n.startSymbol,t,e,i),n.lines.forEach(r=>gl(r,t,e,i)),gl(n.line,t,e,i),gl(n.endSymbol,t,e,i))}function q2(n,t,e,i){n&&(gl(n.getTextShape(),t,e,i),gl(n.getBgRect(),t,e,i))}function iW(n,t,e,i,r){const s=.1*e,a=.7*e,o=.1*e,l=.1*e;Ln(n.startSymbol,i,s,r),n.lines.forEach(u=>u.setAttribute("clipRange",0)),n.lines.forEach((u,h)=>{const c=a/n.lines.length;u.animate().wait(i+s+h*c).to({clipRange:1},c,r)}),Ln(n.endSymbol,i+s+a,o,r),Ln(t.getTextShape(),i+s+a+o,l,r),Ln(t.getBgRect(),i+s+a+o,l,r)}function nW(n,t,e,i,r){itt(n,i,e,r),K2(t,i,e,r)}function rW(n,t,e,i,r){Ln(n,i,e,r),K2(t,i,e,r)}function sW(n,t,e,i,r){Ln(n,i,e,r),K2(t,i,e,r)}function aW(n,t,e,i,r,s){var a;itt(n,r,i,s),Ln(t,r,i,s),!((a=e.getTextShape)===null||a===void 0)&&a.call(e)?K2(e,r,i,s):Ln(e,r,i,s)}function _Ft(n,t,e,i,r){ntt(n,i,e,r),q2(t,i,e,r)}function yFt(n,t,e,i,r){gl(n,i,e,r),q2(t,i,e,r)}function bFt(n,t,e,i,r){gl(n,i,e,r),q2(t,i,e,r)}function xFt(n,t,e,i,r,s){var a;ntt(n,r,i,s),gl(t,r,i,s),!((a=e.getTextShape)===null||a===void 0)&&a.call(e)?q2(e,r,i,s):gl(e,r,i,s)}function oW(n,t,e,i,r,s){var a;const o=.1*i,l=.65*i,u=.05*i,h=.1*i,c=.1*i;Ln(n.startSymbol,r,o,s),n.lines.forEach(d=>d.setAttribute("clipRange",0)),n.lines.forEach((d,p)=>{const f=l/n.lines.length;d.animate().wait(r+o+p*f).to({clipRange:1},f,s)}),Ln(t,r+o+l,u,s),Ln(n.endSymbol,r+o+l+u,h,s),!((a=e.getTextShape)===null||a===void 0)&&a.call(e)?(Ln(e.getTextShape(),r+o+l+u+h,c,s),Ln(e.getBgRect(),r+o+l+h,c,s)):Ln(e,r+o+l+h,c,s)}function rtt(n,t,e,i){const{enter:r,update:s,exit:a}=e;if(i==="enter"){const{type:o,duration:l,delay:u,easing:h}=r;o==="clipIn"?iW(n,t,l,u,h):o==="fadeIn"&&nW(n,t,l,u,h)}else if(i==="update"){const{type:o,duration:l,delay:u,easing:h}=s;o==="clipIn"?iW(n,t,l,u,h):o==="fadeIn"&&nW(n,t,l,u,h)}else if(i==="exit"){const{duration:o,delay:l,easing:u}=a;_Ft(n,t,o,l,u)}}function SFt(n,t,e,i){const{enter:r,update:s,exit:a}=e;if(i==="enter"){const{type:o,duration:l,delay:u,easing:h}=r;o==="fadeIn"&&rW(n,t,l,u,h)}else if(i==="update"){const{type:o,duration:l,delay:u,easing:h}=s;o==="fadeIn"&&rW(n,t,l,u,h)}else if(i==="exit"){const{duration:o,delay:l,easing:u}=a;yFt(n,t,o,l,u)}}function AFt(n,t,e,i){const{enter:r,update:s,exit:a}=e;if(i==="enter"){const{type:o,duration:l,delay:u,easing:h}=r;o==="fadeIn"&&sW(n,t,l,u,h)}else if(i==="update"){const{type:o,duration:l,delay:u,easing:h}=s;o==="fadeIn"&&sW(n,t,l,u,h)}else if(i==="exit"){const{duration:o,delay:l,easing:u}=a;bFt(n,t,o,l,u)}}function wFt(n,t,e,i){const[r,s]=n,{enter:a,update:o,exit:l}=e;if(i==="enter"){const{type:u,duration:h,delay:c,easing:d}=a;u==="fadeIn"?aW(r,s,t,h,c,d):u==="callIn"&&oW(r,s,t,h,c,d)}else if(i==="update"){const{type:u,duration:h,delay:c,easing:d}=o;u==="fadeIn"?aW(r,s,t,h,c,d):u==="callIn"&&oW(r,s,t,h,c,d)}else if(i==="exit"){const{duration:u,delay:h,easing:c}=l;xFt(r,s,t,u,h,c)}}const CFt={type:"clipIn",duration:500,easing:"linear",delay:0},stt={type:"fadeIn",duration:500,easing:"linear",delay:0},kFt={type:"callIn",duration:500,easing:"linear",delay:0},Z2={type:"fadeOut",duration:500,easing:"linear",delay:0};class att extends X2{constructor(){super(...arguments),this.name="markCommonLine",this.defaultUpdateAnimation=CFt,this.defaultExitAnimation=Z2}getLine(){return this._line}getLabel(){return this._label}setLabelPos(){const{label:t={},limitRect:e}=this.attribute,{position:i,confine:r,autoRotate:s}=t,a=this.getPointAttrByPosition(i),o=i.toString().toLocaleLowerCase().includes("start")?this._line.getStartAngle()||0:this._line.getEndAngle()||0;if(this._label.setAttributes(Object.assign(Object.assign({},a.position),{angle:s?this.getRotateByAngle(a.angle):0,textStyle:Object.assign(Object.assign({},this.getTextStyle(i,o,s)),t.textStyle)})),e&&r){const{x:l,y:u,width:h,height:c}=e;xF(this._label,{x1:l,y1:u,x2:l+h,y2:u+c})}}initMarker(t){const{label:e,state:i}=this.attribute,r=this.createSegment();r.name="mark-common-line-line",this._line=r,t.add(r);const s=new ro(Object.assign(Object.assign({},e),{state:{panel:gt({},ue,i==null?void 0:i.labelBackground),text:gt({},ue,i==null?void 0:i.label)}}));s.name="mark-common-line-label",this._label=s,t.add(s),this.setLabelPos()}updateMarker(){const{label:t,state:e}=this.attribute;this.setLineAttributes(),this._label&&(this._label.setAttributes(Object.assign(Object.assign({dx:0,dy:0},t),{state:{panel:gt({},ue,e==null?void 0:e.labelBackground),text:gt({},ue,e==null?void 0:e.label)}})),this.setLabelPos())}}const nl=.001,TFt={interactive:!0,startSymbol:{visible:!1,symbolType:"triangle",size:12,fill:"rgba(46, 47, 50)",lineWidth:0},endSymbol:{visible:!0,symbolType:"triangle",size:12,fill:"rgba(46, 47, 50)",lineWidth:0},label:{position:JL.end,refX:0,refY:0,refAngle:0,textStyle:{fill:"#fff",stroke:"#fff",lineWidth:0,fontSize:10,fontWeight:"normal",fontStyle:"normal"},padding:[2,2,4,4],panel:{visible:!0,cornerRadius:0,fill:"rgb(48, 115, 242)",fillOpacity:.8}},lineStyle:{stroke:"#b2bacf",lineWidth:1,lineDash:[2]}},lW={postiveXAxis:{start:{textAlign:"left",textBaseline:"middle"},startTop:{textAlign:"left",textBaseline:"bottom"},startBottom:{textAlign:"left",textBaseline:"top"},insideStart:{textAlign:"right",textBaseline:"middle"},insideStartTop:{textAlign:"right",textBaseline:"bottom"},insideStartBottom:{textAlign:"right",textBaseline:"top"},middle:{textAlign:"center",textBaseline:"middle"},insideMiddleTop:{textAlign:"center",textBaseline:"bottom"},insideMiddleBottom:{textAlign:"center",textBaseline:"top"},end:{textAlign:"left",textBaseline:"middle"},endTop:{textAlign:"left",textBaseline:"bottom"},endBottom:{textAlign:"left",textBaseline:"top"},insideEnd:{textAlign:"right",textBaseline:"middle"},insideEndTop:{textAlign:"right",textBaseline:"bottom"},insideEndBottom:{textAlign:"right",textBaseline:"top"}},negativeXAxis:{start:{textAlign:"right",textBaseline:"middle"},startTop:{textAlign:"right",textBaseline:"bottom"},startBottom:{textAlign:"right",textBaseline:"top"},insideStart:{textAlign:"left",textBaseline:"middle"},insideStartTop:{textAlign:"left",textBaseline:"bottom"},insideStartBottom:{textAlign:"left",textBaseline:"top"},middle:{textAlign:"center",textBaseline:"middle"},insideMiddleTop:{textAlign:"center",textBaseline:"bottom"},insideMiddleBottom:{textAlign:"center",textBaseline:"top"},end:{textAlign:"right",textBaseline:"middle"},endTop:{textAlign:"right",textBaseline:"bottom"},endBottom:{textAlign:"right",textBaseline:"top"},insideEnd:{textAlign:"left",textBaseline:"middle"},insideEndTop:{textAlign:"left",textBaseline:"bottom"},insideEndBottom:{textAlign:"left",textBaseline:"top"}}},MFt={interactive:!0,startSymbol:{visible:!1,symbolType:"triangle",size:12,fill:"rgba(46, 47, 50)",lineWidth:0},endSymbol:{visible:!0,symbolType:"triangle",size:12,fill:"rgba(46, 47, 50)",lineWidth:0},label:{position:er.arcOuterMiddle,refX:0,refY:0,refAngle:0,textStyle:{fill:"#fff",stroke:"#fff",lineWidth:0,fontSize:10,fontWeight:"normal",fontStyle:"normal"},padding:[2,2,4,4],panel:{visible:!0,cornerRadius:0,fill:"rgb(48, 115, 242)",fillOpacity:.8}},lineStyle:{stroke:"#b2bacf",lineWidth:1,lineDash:[2]}},PFt={interactive:!0,label:{position:QL.right,textStyle:{fill:"#fff",stroke:"#fff",lineWidth:0,fontSize:10,fontWeight:"normal",fontStyle:"normal"},padding:[2,2,4,4],panel:{visible:!0,cornerRadius:0,fill:"rgb(48, 115, 242)",fillOpacity:.8}},areaStyle:{fill:"#b2bacf",visible:!0}},EFt={interactive:!0,label:{position:er.arcOuterMiddle,textStyle:{fill:"#fff",stroke:"#fff",lineWidth:0,fontSize:10,fontWeight:"normal",fontStyle:"normal"},padding:[2,2,4,4],panel:{visible:!0,cornerRadius:0,fill:"rgb(48, 115, 242)",fillOpacity:.8}},areaStyle:{fill:"#b2bacf",visible:!0}},ott={arcInnerStart:{textAlign:"center",textBaseline:"bottom"},arcInnerEnd:{textAlign:"center",textBaseline:"bottom"},arcInnerMiddle:{textAlign:"center",textBaseline:"bottom"},arcOuterStart:{textAlign:"center",textBaseline:"top"},arcOuterEnd:{textAlign:"center",textBaseline:"top"},arcOuterMiddle:{textAlign:"center",textBaseline:"top"},center:{textAlign:"center",textBaseline:"middle"}},OFt={left:{textAlign:"right",textBaseline:"middle"},insideLeft:{textAlign:"left",textBaseline:"middle"},right:{textAlign:"left",textBaseline:"middle"},insideRight:{textAlign:"right",textBaseline:"middle"},top:{textAlign:"center",textBaseline:"bottom"},insideTop:{textAlign:"center",textBaseline:"top"},bottom:{textAlign:"center",textBaseline:"top"},insideBottom:{textAlign:"center",textBaseline:"bottom"},middle:{textAlign:"center",textBaseline:"middle"}},RFt={interactive:!0,targetSymbol:{visible:!1,offset:0,style:{symbolType:"circle",size:20,fill:!1,stroke:"rgba(46, 47, 50)"}},itemLine:{visible:!0,decorativeLine:{visible:!1,length:30},startSymbol:{visible:!0,clip:!0,symbolType:"circle",size:20,style:{fill:!1,stroke:"rgba(46, 47, 50)"}},endSymbol:{visible:!1,clip:!0,symbolType:"triangle",size:12,style:{fill:!1,stroke:"rgba(46, 47, 50)"}},lineStyle:{stroke:"#000",lineWidth:1}},itemContent:{type:"text",position:"middle",refX:10,symbolStyle:{symbolType:"star",fill:"rgb(48, 115, 242)",fillOpacity:.8,size:20},textStyle:{dx:0,dy:0},imageStyle:{width:80,height:80},richTextStyle:{width:100,height:100}}},uW={postiveXAxis:{top:{textAlign:"left",textBaseline:"bottom"},bottom:{textAlign:"left",textBaseline:"top"},middle:{textAlign:"left",textBaseline:"middle"},insideTop:{textAlign:"right",textBaseline:"bottom"},insideBottom:{textAlign:"right",textBaseline:"top"},insideMiddle:{textAlign:"right",textBaseline:"middle"}},negativeXAxis:{top:{textAlign:"right",textBaseline:"bottom"},bottom:{textAlign:"right",textBaseline:"top"},middle:{textAlign:"right",textBaseline:"middle"},insideTop:{textAlign:"left",textBaseline:"bottom"},insideBottom:{textAlign:"left",textBaseline:"top"},insideMiddle:{textAlign:"left",textBaseline:"middle"}}};pFt();function ltt(){Yh._animate=rtt}class Yh extends att{markerAnimate(t){Yh._animate&&this._animationConfig&&Yh._animate(this._line,this._label,this._animationConfig,t)}constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},Yh.defaultAttributes,t)),this.name="markLine"}getPointAttrByPosition(t){var e;const{label:i={}}=this.attribute,{refX:r=0,refY:s=0}=i,a=this._line.getMainSegmentPoints(),o=(e=this._line.getEndAngle())!==null&&e!==void 0?e:0,l=o,u=r*Math.cos(l)+s*Math.cos(l-Math.PI/2),h=r*Math.sin(l)+s*Math.sin(l-Math.PI/2);return t.includes("start")||t.includes("Start")?{position:{x:a[0].x+u,y:a[0].y+h},angle:l}:t.includes("middle")||t.includes("Middle")?{position:{x:(a[0].x+a[a.length-1].x)/2+u,y:(a[0].y+a[a.length-1].y)/2+h},angle:l}:{position:{x:a[a.length-1].x+u,y:a[a.length-1].y+h},angle:l}}getRotateByAngle(t){var e;return(Zw(t)?t:t-Math.PI)+((e=this.attribute.label.refAngle)!==null&&e!==void 0?e:0)}getTextStyle(t,e,i){return il(Math.abs(e),Math.PI/2,nl)||il(Math.abs(e),3*Math.PI/2,nl)?mQ(i,e,t):Zw(e)?lW.postiveXAxis[t]:lW.negativeXAxis[t]}createSegment(){const{points:t,startSymbol:e,endSymbol:i,lineStyle:r,mainSegmentIndex:s,multiSegment:a,state:o}=this.attribute;return new Ou({points:t,startSymbol:e,endSymbol:i,lineStyle:r,mainSegmentIndex:s,multiSegment:a,pickable:!1,state:{line:gt({},ue,o==null?void 0:o.line),startSymbol:gt({},ue,o==null?void 0:o.lineStartSymbol),endSymbol:gt({},ue,o==null?void 0:o.lineEndSymbol)}})}setLineAttributes(){const{points:t,startSymbol:e,endSymbol:i,lineStyle:r,mainSegmentIndex:s,multiSegment:a,state:o}=this.attribute;this._line&&this._line.setAttributes({points:t,startSymbol:e,endSymbol:i,lineStyle:r,mainSegmentIndex:s,multiSegment:a,state:{line:gt({},ue,o==null?void 0:o.line),startSymbol:gt({},ue,o==null?void 0:o.lineStartSymbol),endSymbol:gt({},ue,o==null?void 0:o.lineEndSymbol)}})}isValidPoints(){const{points:t}=this.attribute;if(!t||t.length<2)return!1;let e=!0;return t.forEach(i=>{if(i.length)i.forEach(r=>{st(r.x)&&st(r.y)||(e=!1)});else if(!st(i.x)||!st(i.y))return void(e=!1)}),e}}Yh.defaultAttributes=TFt;gFt();function utt(){Xh._animate=SFt}class Xh extends X2{markerAnimate(t){Xh._animate&&this._animationConfig&&Xh._animate(this._area,this._label,this._animationConfig,t)}getArea(){return this._area}getLabel(){return this._label}constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},Xh.defaultAttributes,t)),this.name="markArea",this.defaultUpdateAnimation=stt,this.defaultExitAnimation=Z2}getPointAttrByPosition(t){const{x1:e,x2:i,y1:r,y2:s}=this._area.AABBBounds;return t.includes("left")||t.includes("Left")?{x:e,y:(r+s)/2}:t.includes("right")||t.includes("Right")?{x:i,y:(r+s)/2}:t.includes("top")||t.includes("Top")?{x:(e+i)/2,y:r}:t.includes("bottom")||t.includes("Bottom")?{x:(e+i)/2,y:s}:{x:(e+i)/2,y:(r+s)/2}}setLabelPos(){var t;if(this._label&&this._area){const{label:e={}}=this.attribute,i=(t=e.position)!==null&&t!==void 0?t:"middle",r=this.getPointAttrByPosition(i);if(this._label.setAttributes(Object.assign(Object.assign({},r),{textStyle:Object.assign(Object.assign({},OFt[i]),e.textStyle)})),this.attribute.limitRect&&e.confine){const{x:s,y:a,width:o,height:l}=this.attribute.limitRect;xF(this._label,{x1:s,y1:a,x2:s+o,y2:a+l})}}}initMarker(t){const{points:e,label:i,areaStyle:r,state:s}=this.attribute,a=$t.polygon(Object.assign({points:e},r));a.states=gt({},ue,s==null?void 0:s.area),a.name="mark-area-polygon",this._area=a,t.add(a);const o=new ro(Object.assign(Object.assign({},i),{state:{panel:gt({},ue,s==null?void 0:s.labelBackground),text:gt({},ue,s==null?void 0:s.label)}}));o.name="mark-area-label",this._label=o,t.add(o),this.setLabelPos()}updateMarker(){const{points:t,label:e,areaStyle:i,state:r}=this.attribute;this._area&&(this._area.setAttributes(Object.assign({points:t},i)),this._area.states=gt({},ue,r==null?void 0:r.area)),this._label&&this._label.setAttributes(Object.assign(Object.assign({dx:0,dy:0},e),{state:{panel:gt({},ue,r==null?void 0:r.labelBackground),text:gt({},ue,r==null?void 0:r.label)}})),this.setLabelPos()}isValidPoints(){const{points:t}=this.attribute;if(!t||t.length<3)return!1;let e=!0;return t.forEach(i=>{st(i.x)&&st(i.y)||(e=!1)}),e}}Xh.defaultAttributes=PFt;fFt();function IFt(){Ld._animate=rtt}class Ld extends att{markerAnimate(t){Ld._animate&&this._animationConfig&&Ld._animate(this._line,this._label,this._animationConfig,t)}constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},Ld.defaultAttributes,t,{label:{autoRotate:!0}})),this.name="markArcLine"}getPointAttrByPosition(t){const{center:e,radius:i,startAngle:r,endAngle:s,label:a}=this.attribute,{refX:o=0,refY:l=0}=a;let u;switch(t){case er.arcInnerStart:u=r;case er.arcOuterStart:u=r;break;case er.arcInnerEnd:u=s;case er.arcOuterEnd:u=s;break;case er.center:case er.arcInnerMiddle:case er.arcOuterMiddle:default:u=(r+s)/2}return{position:{x:e.x+(i+l)*Math.cos(u)+o*Math.cos(u-Math.PI/2),y:e.y+(i+l)*Math.sin(u)+o*Math.sin(u-Math.PI/2)},angle:u}}getTextStyle(t){return ott[t]}getRotateByAngle(t){var e;return t-Math.PI/2+((e=this.attribute.label.refAngle)!==null&&e!==void 0?e:0)}createSegment(){const{center:t,radius:e,startAngle:i,endAngle:r,startSymbol:s,endSymbol:a,lineStyle:o,state:l}=this.attribute;return new GL({center:t,radius:e,startAngle:i,endAngle:r,startSymbol:s,endSymbol:a,lineStyle:o,state:{line:gt({},ue,l==null?void 0:l.line),startSymbol:gt({},ue,l==null?void 0:l.lineStartSymbol),endSymbol:gt({},ue,l==null?void 0:l.lineEndSymbol)}})}setLineAttributes(){const{center:t,radius:e,startAngle:i,endAngle:r,startSymbol:s,endSymbol:a,lineStyle:o,state:l}=this.attribute;this._line&&this._line.setAttributes({center:t,radius:e,startAngle:i,endAngle:r,startSymbol:s,endSymbol:a,lineStyle:o,state:{line:gt({},ue,l==null?void 0:l.line),startSymbol:gt({},ue,l==null?void 0:l.lineStartSymbol),endSymbol:gt({},ue,l==null?void 0:l.lineEndSymbol)}})}isValidPoints(){return!0}}Ld.defaultAttributes=MFt;mFt();function LFt(){Dd._animate=AFt}class Dd extends X2{markerAnimate(t){Dd._animate&&this._animationConfig&&Dd._animate(this._area,this._label,this._animationConfig,t)}getArea(){return this._area}getLabel(){return this._label}constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},Dd.defaultAttributes,t,{label:{autoRotate:!0}})),this.name="markArcArea",this.defaultUpdateAnimation=stt,this.defaultExitAnimation=Z2}getPointAttrByPosition(t){const{center:e,innerRadius:i,outerRadius:r,startAngle:s,endAngle:a,label:o}=this.attribute,{refX:l=0,refY:u=0}=o;let h,c;switch(t){case er.center:h=(i+r)/2,c=(s+a)/2;break;case er.arcInnerStart:h=i,c=s;break;case er.arcOuterStart:h=r,c=s;break;case er.arcInnerEnd:h=i,c=a;break;case er.arcOuterEnd:h=r,c=a;break;case er.arcInnerMiddle:h=i,c=(s+a)/2;break;case er.arcOuterMiddle:h=r,c=(s+a)/2;break;default:h=i,c=(s+a)/2}return{position:{x:e.x+(h+u)*Math.cos(c)+l*Math.cos(c-Math.PI/2),y:e.y+(h+u)*Math.sin(c)+l*Math.sin(c-Math.PI/2)},angle:c}}setLabelPos(){var t;if(this._label&&this._area){const{label:e={}}=this.attribute,{position:i="arcInnerMiddle",autoRotate:r}=e,s=this.getPointAttrByPosition(i);if(this._label.setAttributes(Object.assign(Object.assign({},s.position),{angle:r?s.angle-Math.PI/2+((t=e.refAngle)!==null&&t!==void 0?t:0):0,textStyle:Object.assign(Object.assign({},ott[i]),e.textStyle)})),this.attribute.limitRect&&e.confine){const{x:a,y:o,width:l,height:u}=this.attribute.limitRect;xF(this._label,{x1:a,y1:o,x2:a+l,y2:o+u})}}}initMarker(t){const{center:e,innerRadius:i,outerRadius:r,startAngle:s,endAngle:a,areaStyle:o,label:l,state:u}=this.attribute,h=$t.arc(Object.assign({x:e.x,y:e.y,innerRadius:i,outerRadius:r,startAngle:s,endAngle:a},o));h.states=gt({},ue,u==null?void 0:u.area),h.name="polar-mark-area-area",this._area=h,t.add(h);const c=new ro(Object.assign(Object.assign({},l),{state:{panel:gt({},ue,u==null?void 0:u.labelBackground),text:gt({},ue,u==null?void 0:u.label)}}));c.name="mark-area-label",this._label=c,t.add(c),this.setLabelPos()}updateMarker(){const{center:t,innerRadius:e,outerRadius:i,startAngle:r,endAngle:s,areaStyle:a,label:o,state:l}=this.attribute;this._area&&(this._area.setAttributes(Object.assign({x:t.x,y:t.y,innerRadius:e,outerRadius:i,startAngle:r,endAngle:s},a)),this._area.states=gt({},ue,l==null?void 0:l.area)),this._label&&(this._label.setAttributes(Object.assign(Object.assign({dx:0,dy:0},o),{state:{panel:gt({},ue,l==null?void 0:l.labelBackground),text:gt({},ue,l==null?void 0:l.label)}})),this.setLabelPos())}isValidPoints(){return!0}}Dd.defaultAttributes=EFt;vFt();function SF(){Kh._animate=wFt}class Kh extends X2{markerAnimate(t){Kh._animate&&this._animationConfig&&Kh._animate([this._line,this._decorativeLine],this._item,this._animationConfig,t)}constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},Kh.defaultAttributes,t)),this.name="markPoint",this.defaultUpdateAnimation=kFt,this.defaultExitAnimation=Z2,this._isArcLine=!1,this._isStraightLine=!1}setLabelPos(){}getTextAlignAttr(t,e,i,r,s){return il(Math.abs(r),Math.PI/2,nl)||il(Math.abs(r),3*Math.PI/2,nl)?mQ(t,r,s):Zw(r)?uW.postiveXAxis[s]:uW.negativeXAxis[s]}setItemAttributes(t,e,i,r,s){var a,o;if(!t)return;const{autoRotate:l=!0,refX:u=0,refY:h=0,refAngle:c=0,textStyle:d={},richTextStyle:p={},imageStyle:f={},position:g=tD.middle}=e,{state:_}=this.attribute,v=((a=this._line)===null||a===void 0?void 0:a.getEndAngle())||0,y=u*Math.cos(v)+h*Math.cos(v-Math.PI/2),b=u*Math.sin(v)+h*Math.sin(v-Math.PI/2);if(s==="text"){const A=r.x-i.x,w=r.y-i.y;t.setAttributes(Object.assign(Object.assign({},d),{textStyle:Object.assign(Object.assign({},this.getTextAlignAttr(l,A,w,v,(o=e.position)!==null&&o!==void 0?o:"end")),d.textStyle),state:{panel:gt({},ue,_==null?void 0:_.textBackground),text:gt({},ue,_==null?void 0:_.text)}}))}else s==="richText"?(t.setAttributes({dx:this.getItemDx(t,g,p)+(p.dx||0),dy:this.getItemDy(t,g,p)+(p.dy||0)}),t.states=gt({},ue,_==null?void 0:_.richText)):s==="image"&&(t.setAttributes({dx:this.getItemDx(t,g,f)+(f.dx||0),dy:this.getItemDy(t,g,f)+(f.dy||0)}),t.states=gt({},ue,_==null?void 0:_.image));const S=Zw(v)?v:v-Math.PI;t.setAttributes({x:r.x+(y||0),y:r.y+(b||0),angle:l&&S+c})}getItemDx(t,e,i){var r,s;const a=(s=(r=t==null?void 0:t.AABBBounds)===null||r===void 0?void 0:r.width())!==null&&s!==void 0?s:(i==null?void 0:i.width)||0;return e.includes("inside")?-a:0}getItemDy(t,e,i){var r,s;const a=(s=(r=t==null?void 0:t.AABBBounds)===null||r===void 0?void 0:r.height())!==null&&s!==void 0?s:(i==null?void 0:i.height)||0;return e.includes("top")||e.includes("Top")?-a:e.includes("middle")||e.includes("Middle")?-a/2:0}initItem(t,e,i){const{state:r}=this.attribute,{type:s="text",symbolStyle:a,richTextStyle:o,imageStyle:l,renderCustomCallback:u}=t;let h;return s==="symbol"?(h=$t.symbol(Object.assign(Object.assign({},i),a)),h.states=gt({},ue,r==null?void 0:r.symbol)):s==="text"?h=new ro(Object.assign(Object.assign({},i),{state:{panel:gt({},ue,r==null?void 0:r.textBackground),text:gt({},ue,r==null?void 0:r.text)}})):s==="richText"?(h=$t.richtext(Object.assign(Object.assign({},i),o)),h.states=gt({},ue,r==null?void 0:r.richText)):s==="image"?(h=$t.image(Object.assign(Object.assign({},i),l)),h.states=gt({},ue,r==null?void 0:r.image)):s==="custom"&&u&&(h=u(),h.states=gt({},ue,r==null?void 0:r.customMark)),h.name=`mark-point-${s}`,this.setItemAttributes(h,t,e,i,s),h}getItemLineAttr(t,e,i){let r=[],s={x:0,y:0},a=0,o=0,l=0;const{type:u="type-s",arcRatio:h=.8}=t,c=i.x-e.x,d=i.y-e.y;if(this._isStraightLine=il(c,0,nl)||il(d,0,nl),this._isArcLine){const{x:p,y:f}=e,{x:g,y:_}=i,v=(p+g)/2,y=(f+_)/2,b=f===_?0:-(p-g)/(f-_),S=v+h*(_>f?-1:1)*v,A=(w=>b*(w-v)+y)(S);o=wE(f-A,p-S),l=wE(_-A,g-S),s={x:S,y:A},h>0?l<o&&(l+=2*Math.PI):o<l&&(o+=2*Math.PI),a=Math.sqrt((S-p)*(S-p)+(A-f)*(A-f))}else r=u!=="type-do"||this._isStraightLine?u!=="type-po"||this._isStraightLine?u!=="type-op"||this._isStraightLine?[e,i]:[e,{x:e.x,y:i.y},i]:[e,{x:i.x,y:e.y},i]:[e,{x:(e.x+i.x)/2,y:i.y},i];return r=bBt(r),{points:r,center:s,radius:a,startAngle:o,endAngle:l}}reDrawLine(t,e){this._line.release();const{startSymbol:i,endSymbol:r,lineStyle:s,type:a="type-s"}=t,{state:o}=this.attribute,l=this._isArcLine?GL:Ou;this._container.removeChild(this._line),this._line=new l(Object.assign(Object.assign({},e),{pickable:!1,startSymbol:i,endSymbol:r,lineStyle:s,visible:t.visible,state:{line:gt({},ue,o==null?void 0:o.line),startSymbol:gt({},ue,o==null?void 0:o.lineStartSymbol),endSymbol:gt({},ue,o==null?void 0:o.lineEndSymbol)}})),this._container.add(this._line)}setItemLineAttr(t,e,i){if(this._line){const{startSymbol:r,endSymbol:s,lineStyle:a,type:o="type-s"}=t,{state:l}=this.attribute,u=this.getItemLineAttr(t,e,i);this._isArcLine&&this._line.key==="arc-segment"||!this._isArcLine&&this._line.key==="segment"?this._line.setAttributes(Object.assign(Object.assign({},u),{startSymbol:r,endSymbol:s,lineStyle:a,visible:t.visible,state:{line:gt({},ue,l==null?void 0:l.line),startSymbol:gt({},ue,l==null?void 0:l.lineStartSymbol),endSymbol:gt({},ue,l==null?void 0:l.lineEndSymbol)}})):this.reDrawLine(t,u)}}getDecorativeLineAttr(t){var e;const i=((e=t==null?void 0:t.decorativeLine)===null||e===void 0?void 0:e.length)||10,r=this._line.getEndAngle()||0;return{startPointOffsetX:i/2*Math.cos(r-Math.PI/2),startPointOffsetY:i/2*Math.sin(r-Math.PI/2),endPointOffsetX:-i/2*Math.cos(r-Math.PI/2),endPointOffsetY:-i/2*Math.sin(r-Math.PI/2)}}setDecorativeLineAttr(t,e,i){var r;if(this._decorativeLine){const{lineStyle:s}=t,{startPointOffsetX:a,startPointOffsetY:o,endPointOffsetX:l,endPointOffsetY:u}=this.getDecorativeLineAttr(t);this._decorativeLine.setAttributes(Object.assign(Object.assign({points:[{x:e.x+a,y:e.y+o},{x:e.x+l,y:e.y+u}]},s),{visible:i})),this._decorativeLine.states=gt({},ue,(r=this.attribute.state)===null||r===void 0?void 0:r.line)}}setTargetItemAttributes(t,e){var i,r;this._targetItem&&(this._targetItem.setAttributes(Object.assign({x:e.x,y:e.y,visible:(i=t.visible)!==null&&i!==void 0&&i},t.style)),this._targetItem.states=gt({},ue,(r=this.attribute.state)===null||r===void 0?void 0:r.targetItem))}setAllOfItemsAttr(t,e){var i;const{position:r,itemLine:s={},itemContent:a={},limitRect:o,targetSymbol:l}=this.attribute,{type:u="text",confine:h}=a;if(o&&h){const{x:c,y:d,width:p,height:f}=o,{dx:g,dy:_}=ett(this._item,{x1:c,y1:d,x2:c+p,y2:d+f});e.x=e.x+g,e.y=e.y+_}this.setTargetItemAttributes(l,r),this.setItemLineAttr(s,t,e),this.setItemAttributes(this._item,a,t,e,u),this.setDecorativeLineAttr(s,e,(i=s.decorativeLine)===null||i===void 0?void 0:i.visible)}computeNewPositionAfterTargetItem(t){var e;const{itemContent:i={},targetSymbol:r}=this.attribute,{offsetX:s=0,offsetY:a=0}=i,{offset:o=0,style:l,visible:u=!1,size:h}=r,c=u?h||((e=l.size)!==null&&e!==void 0?e:10):0,d=wE(a,s);return{newPosition:{x:t.x+(c/2+o)*Math.cos(d),y:t.y+(c/2+o)*Math.sin(d)},newItemPosition:{x:t.x+(c/2+o)*Math.cos(d)+s,y:t.y+(c/2+o)*Math.sin(d)+a}}}initMarker(t){const{position:e,itemContent:i={},itemLine:r}=this.attribute,{type:s="type-s",arcRatio:a=.8}=r,{offsetX:o=0,offsetY:l=0}=i;this._isStraightLine=il(o,0,nl)||il(l,0,nl),this._isArcLine=s==="type-arc"&&a!==0&&!this._isStraightLine;const{newPosition:u,newItemPosition:h}=this.computeNewPositionAfterTargetItem(e),c=new(this._isArcLine?GL:Ou)({points:[],pickable:!1,center:{x:0,y:0},radius:0,startAngle:0,endAngle:0});c.name="mark-point-line",this._line=c,t.add(c);const d=$t.line({points:[]});d.name="mark-point-decorativeLine",this._decorativeLine=d,t.add(d);const p=$t.symbol({});p.name="mark-point-targetItem",this._targetItem=p,t.add(this._targetItem);const f=this.initItem(i,u,h);this._item=f,t.add(f),this.setAllOfItemsAttr(u,h)}updateMarker(){const{position:t,itemContent:e={},itemLine:i}=this.attribute,{type:r="text"}=e,{type:s="type-s",arcRatio:a=.8}=i,{offsetX:o=0,offsetY:l=0}=e;this._isStraightLine=il(o,0,nl)||il(l,0,nl);const u=s==="type-arc"&&a!==0&&!this._isStraightLine,{newPosition:h,newItemPosition:c}=this.computeNewPositionAfterTargetItem(t);u!==this._isArcLine?(this._isArcLine=u,this.reDrawLine(i,{points:[{x:0,y:0}],pickable:!1,center:{x:0,y:0},radius:0,startAngle:0,endAngle:0})):this._isArcLine=u,this.setItemAttributes(this._item,e,h,c,r),this.setAllOfItemsAttr(h,c)}isValidPoints(){const{position:t}=this.attribute;return!(!st(t.x)||!st(t.y))}}Kh.defaultAttributes=RFt;function htt(){rn(),no(),Pl()}const ctt={space:8,style:{fill:"rgb(47, 69, 84)",cursor:"pointer",size:15},state:{disable:{fill:"rgb(170, 170, 170)",cursor:"not-allowed"},hover:{}}};htt();class Sy extends Nn{getCurrent(){return this._current}constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},Sy.defaultAttributes,t)),this.name="pager",this._current=1,this._onHover=i=>{const r=i.target;r.hasState("disable")||r.addState("hover")},this._onUnHover=i=>{i.target.removeState("hover")},this._onClick=i=>{const r=i.target;if(r.name==="preHandler"){if(this._current===1)return;this._current-=1,this._current===1?r.addState("disable"):r.removeState("disable"),this._dispatchEvent("toPrev",{current:this._current,total:this._total,direction:"pre",event:i})}if(r.name==="nextHandler"){if(this._current===this._total)return;this._current+=1,this._current===this._total?r.addState("disable"):r.removeState("disable"),this._dispatchEvent("toNext",{current:this._current,total:this._total,direction:"next",event:i})}this._current>1&&this.preHandler.removeState("disable"),this._current<this._total&&this.nextHandler.removeState("disable"),this.text.setAttribute("text",this._getPageText(this._current))}}render(){var t,e,i;this._reset();const{layout:r="horizontal",handler:s=ctt,total:a,defaultCurrent:o=1,textStyle:l,padding:u=0}=this.attribute;this._current=o;const h=ds(u),c=r==="horizontal",d=$t.group({x:0,y:0}),p=s.style||{},f=p.size||15,g=(t=s.space)!==null&&t!==void 0?t:8,_=s.state||{};let{preShape:v,nextShape:y}=s;v||(v=c?"triangleLeft":"triangleUp"),y||(y=c?"triangleRight":"triangleDown");const b=$t.symbol(Object.assign(Object.assign({strokeBoundsBuffer:0,pickMode:"imprecise"},p),{x:0,y:0,symbolType:v,size:f}));b.states=_,b.name="preHandler",this.preHandler=b,d.add(b);const{width:S,height:A}=B2(this._getPageText(a),Object.assign({textAlign:"center",textBaseline:"middle"},l),(i=(e=this.stage)===null||e===void 0?void 0:e.getTheme())===null||i===void 0?void 0:i.text),w=Mt(f)?f:f[0],C=Mt(f)?f:f[1],k=$t.text(Object.assign({x:c?w/2+g+S/2:0,y:c?0:C/2+g+A/2,text:this._getPageText(o),textAlign:"center",textBaseline:"middle",lineHeight:l==null?void 0:l.fontSize},l));this.text=k,d.add(k);const M=$t.symbol(Object.assign(Object.assign({strokeBoundsBuffer:0,pickMode:"imprecise"},p),{x:c?w+2*g+S:0,y:c?0:C+2*g+A,symbolType:y,size:f}));M.name="nextHandler",M.states=_,this.nextHandler=M,d.add(M),this._total===1?(b.addState("disable"),M.addState("disable")):this._current===1?b.addState("disable"):this._current===a&&M.addState("disable");const P=d.AABBBounds,E=P.width(),I=P.height();d.translateTo(0-P.x1+h[3],0-P.y1+h[0]),this.add(d),this.attribute.width=E+h[1]+h[3],this.attribute.height=I+h[0]+h[2],this._bindEvents()}_bindEvents(){this.attribute.disableTriggerEvent||(this.preHandler&&(this.preHandler.addEventListener("pointerenter",this._onHover),this.preHandler.addEventListener("pointerleave",this._onUnHover),this.preHandler.addEventListener("pointerdown",this._onClick)),this.nextHandler&&(this.nextHandler.addEventListener("pointerenter",this._onHover),this.nextHandler.addEventListener("pointerleave",this._onUnHover),this.nextHandler.addEventListener("pointerdown",this._onClick)))}_reset(){this.removeAllChild(!0),this._current=1,this._total=this.attribute.total,this.preHandler=this.nextHandler=this.text=null}_getPageText(t){const{pageFormatter:e}=this.attribute;return e?ft(e)?e(t,this._total):`${e}`.replace("{current}",`${t}`).replace("{total}",`${this._total}`):`${t}/${this._total}`}setTotal(t){t!==this.attribute.total&&(this._total=t,this._current!==1&&this._current<=t?this.setAttributes({total:t,defaultCurrent:this._current}):this.setAttribute("total",t))}}Sy.defaultAttributes={handler:ctt,textStyle:{fill:"rgb(51, 51, 51)",fontSize:12}};const sC=10,dtt=8,ptt=8,DFt=8,bS=16,xS=8,T1=12,eD=12;var Qt;(function(n){n.selected="selected",n.unSelected="unSelected",n.selectedHover="selectedHover",n.unSelectedHover="unSelectedHover",n.focus="focus"})(Qt||(Qt={}));var Br;(function(n){n.legendItemHover="legendItemHover",n.legendItemUnHover="legendItemUnHover",n.legendItemClick="legendItemClick",n.legendItemAttributeUpdate="legendItemAttributeUpdate"})(Br||(Br={}));var pr;(function(n){n.innerView="innerView",n.title="legendTitle",n.item="legendItem",n.itemShape="legendItemShape",n.itemLabel="legendItemLabel",n.itemValue="legendItemValue",n.focus="legendItemFocus"})(pr||(pr={}));class AF extends Nn{constructor(){super(...arguments),this.name="legend",this._title=null}render(){this.removeAllChild(!0);const{interactive:t=!0,title:e,padding:i=0}=this.attribute,r=ds(i),s=$t.group({x:r[3],y:r[0],pickable:t,childrenPickable:t});s.name=pr.innerView,this.add(s),this._innerView=s,e!=null&&e.visible&&this._renderTitle(e),this._renderContent(),this._adjustLayout(),t&&this._bindEvents();const a=this._innerView.AABBBounds;this.attribute.width=a.width()+r[1]+r[3],this.attribute.height=a.height()+r[0]+r[2]}_renderTitle(t){const{text:e="",textStyle:i,padding:r=0,background:s,minWidth:a,maxWidth:o,shape:l}=t,u={x:0,y:0,text:e,textStyle:i,padding:ds(r),minWidth:a,maxWidth:o};l&&l.visible&&(u.shape=Object.assign({visible:!0},l.style),z(l.space)&&(u.space=l.space)),s&&s.visible&&(u.panel=Object.assign({visible:!0},s.style));const h=new ro(u);h.name=pr.title,this._title=h,this._innerView.add(h)}_adjustLayout(){var t;if(this._title){const e=this._innerView.AABBBounds.width(),i=this._title.AABBBounds.width(),r=(t=this.attribute.title)===null||t===void 0?void 0:t.align;r==="center"?this._title.setAttribute("x",(e-i)/2):r==="end"&&this._title.setAttribute("x",e-i)}}}function J2(){rn(),Pl(),Wu(),no()}function wF(){rn(),F2()}function BFt(){wF(),htt(),fQ()}function FFt(){wF(),J2()}function jFt(){wF(),J2(),A1()}var hW=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};const NFt={[Qt.focus]:{},[Qt.selected]:{},[Qt.selectedHover]:{},[Qt.unSelected]:{},[Qt.unSelectedHover]:{}};BFt();let ftt=class gtt extends AF{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},gtt.defaultAttributes,t)),this.name="discreteLegend",this._itemsContainer=null,this._itemHeightByUser=void 0,this._itemHeight=0,this._itemMaxWidth=0,this._onHover=i=>{const r=i.target;if(r&&r.name&&r.name.startsWith(pr.item)){const s=r.delegate;if(this._lastActiveItem){if(this._lastActiveItem.id===s.id)return;this._unHover(this._lastActiveItem,i)}this._hover(s,i)}else this._lastActiveItem&&(this._unHover(this._lastActiveItem,i),this._lastActiveItem=null)},this._onUnHover=i=>{this._lastActiveItem&&(this._unHover(this._lastActiveItem,i),this._lastActiveItem=null)},this._onClick=i=>{var r,s,a,o;const l=i.target;if(l&&l.name&&l.name.startsWith(pr.item)){const u=l.delegate,{selectMode:h="multiple"}=this.attribute;if(l.name===pr.focus||h==="focus"){const c=u.hasState(Qt.focus);u.toggleState(Qt.focus),c?(r=this._itemsContainer)===null||r===void 0||r.getChildren().forEach(d=>{this._removeLegendItemState(d,[Qt.unSelected,Qt.unSelectedHover,Qt.focus],i),this._setLegendItemState(d,Qt.selected,i)}):(this._setLegendItemState(u,Qt.selected,i),this._removeLegendItemState(u,[Qt.unSelected,Qt.unSelectedHover],i),(s=this._itemsContainer)===null||s===void 0||s.getChildren().forEach(d=>{u!==d&&(this._removeLegendItemState(d,[Qt.selected,Qt.selectedHover,Qt.focus],i),this._setLegendItemState(d,Qt.unSelected,i))}))}else{(a=this._itemsContainer)===null||a===void 0||a.getChildren().forEach(f=>{f.removeState(Qt.focus)});const{allowAllCanceled:c=!0}=this.attribute,d=u.hasState(Qt.selected),p=this._getSelectedLegends();if(h==="multiple"){if(c===!1&&d&&p.length===1)return void this._dispatchLegendEvent(Br.legendItemClick,u,i);d?(this._removeLegendItemState(u,[Qt.selected,Qt.selectedHover],i),this._setLegendItemState(u,Qt.unSelected,i)):(this._setLegendItemState(u,Qt.selected,i),this._removeLegendItemState(u,[Qt.unSelected,Qt.unSelectedHover],i))}else this._setLegendItemState(u,Qt.selected,i),this._removeLegendItemState(u,[Qt.unSelected,Qt.unSelectedHover],i),(o=this._itemsContainer)===null||o===void 0||o.getChildren().forEach(f=>{u!==f&&(this._removeLegendItemState(f,[Qt.selected,Qt.selectedHover],i),this._setLegendItemState(f,Qt.unSelected,i))})}this._dispatchLegendEvent(Br.legendItemClick,u,i)}}}render(){super.render(),this._lastActiveItem=null}setSelected(t){var e;((e=this._itemsContainer)===null||e===void 0?void 0:e.getChildren()).forEach(i=>{const r=i.data;t.includes(r.label)?(this._setLegendItemState(i,Qt.selected),this._removeLegendItemState(i,[Qt.unSelected,Qt.unSelectedHover])):(this._removeLegendItemState(i,[Qt.selected,Qt.selectedHover]),this._setLegendItemState(i,Qt.unSelected))})}_renderItems(){const{item:t={},maxCol:e=1,maxRow:i=2,maxWidth:r,maxHeight:s,defaultSelected:a,lazyload:o,autoPage:l}=this.attribute,{spaceCol:u=bS,spaceRow:h=xS}=t,c=this._itemsContainer,{items:d,isHorizontal:p,startIndex:f,isScrollbar:g}=this._itemContext,_=g?1:p?i:e;let v,{doWrap:y,maxWidthInCol:b,startX:S,startY:A,pages:w}=this._itemContext;for(let C=f,k=d.length;C<k&&!(o&&w>this._itemContext.currentPage*_);C++){o&&(this._itemContext.startIndex=C+1),v=d[C],v.id||(v.id=v.label),v.index=C;let M=!0;ut(a)&&(M=a.includes(v.label));const P=this._renderEachItem(v,M,C,d),E=P.attribute.width,I=P.attribute.height;this._itemHeight=Math.max(this._itemHeight,I),b=Math.max(E,b),this._itemMaxWidth=Math.max(E,this._itemMaxWidth),p?(z(r)&&(g&&l?(w=Math.ceil((S+E)/r),y=w>1):S+E>r&&(y=!0,S>0&&(w+=1,S=0,A+=I+h))),S===0&&A===0||P.setAttributes({x:S,y:A}),S+=u+E):(z(s)&&(g&&l?(w=Math.ceil((A+I)/s),y=w>1):s<A+I&&(w+=1,y=!0,A=0,S+=b+u,b=0)),S===0&&A===0||P.setAttributes({x:S,y:A}),A+=h+I),c.add(P)}return this._itemContext.doWrap=y,this._itemContext.startX=S,this._itemContext.startY=A,this._itemContext.maxWidthInCol=b,this._itemContext.pages=w,this._itemContext.maxPages=_,g&&(this._itemContext.totalPage=w),o||(this._itemContext.startIndex=d.length),this._itemContext}_renderContent(){const{item:t={},items:e,reversed:i,maxWidth:r}=this.attribute;if(t.visible===!1||Gt(e))return;let s=e;i&&(s=e==null?void 0:e.reverse());const a=$t.group({x:0,y:0});this._itemsContainer=a;const{layout:o,autoPage:l}=this.attribute,u=o==="horizontal",{maxWidth:h,width:c,height:d}=t,p=[];z(h)&&p.push(h),z(c)&&p.push(c),p.length&&(z(r)&&p.push(r),this._itemWidthByUser=dn(p)),z(d)&&(this._itemHeightByUser=d);const f=this.attribute.pager;this._itemContext={currentPage:f&&f.defaultCurrent||1,doWrap:!1,maxWidthInCol:0,maxPages:1,pages:1,startX:0,startY:0,startIndex:0,items:s,isHorizontal:u,totalPage:1/0,isScrollbar:f&&f.type==="scrollbar"},this._itemContext=this._renderItems();let g=!1;this._itemContext.doWrap&&l&&this._itemContext.pages>this._itemContext.maxPages&&(g=this._renderPagerComponent()),g||(a.setAttribute("y",this._title?this._title.AABBBounds.height()+le(this.attribute,"title.space",8):0),this._innerView.add(a))}_bindEvents(){if(this.attribute.disableTriggerEvent||!this._itemsContainer)return;const{hover:t=!0,select:e=!0}=this.attribute;t&&(this._itemsContainer.addEventListener("pointermove",this._onHover),this._itemsContainer.addEventListener("pointerleave",this._onUnHover)),e&&this._itemsContainer.addEventListener("pointerdown",this._onClick)}_autoEllipsis(t,e,i,r){var s,a;const{label:o,value:l}=this.attribute.item,u=r.AABBBounds,h=i.AABBBounds,c=u.width(),d=h.width();let p=!1;t==="labelFirst"?d>e?p=!0:r.setAttribute("maxLineWidth",e-d):t==="valueFirst"?c>e?p=!0:i.setAttribute("maxLineWidth",e-c):c+d>e&&(p=!0),p&&(r.setAttribute("maxLineWidth",Math.max(e*((s=o.widthRatio)!==null&&s!==void 0?s:.5),e-d)),i.setAttribute("maxLineWidth",Math.max(e*((a=l.widthRatio)!==null&&a!==void 0?a:.5),e-c)))}_renderEachItem(t,e,i,r){var s,a;const{id:o,label:l,value:u,shape:h}=t,{padding:c=0,focus:d,focusIconStyle:p,align:f,autoEllipsisStrategy:g}=this.attribute.item,{shape:_,label:v,value:y,background:b}=this.attribute.item,S=this._handleStyle(_,t,e,i,r),A=this._handleStyle(v,t,e,i,r),w=this._handleStyle(y,t,e,i,r),C=this._handleStyle(b,t,e,i,r),k=ds(c);let M;b.visible===!1?(M=$t.group({x:0,y:0,cursor:(s=C.style)===null||s===void 0?void 0:s.cursor}),this._appendDataToShape(M,pr.item,t,M)):(M=$t.group(Object.assign({x:0,y:0},C.style)),this._appendDataToShape(M,pr.item,t,M,C.state)),M.id=`${o??l}-${i}`,M.addState(e?Qt.selected:Qt.unSelected);const P=$t.group({x:0,y:0,pickable:!1});M.add(P);let E,I=0,D=0,N=0;if(_&&_.visible!==!1){const nt=le(S,"style.size",sC);D=ut(nt)?nt[0]||0:nt,N=le(_,"space",dtt);const K=$t.symbol(Object.assign(Object.assign({x:0,y:0,symbolType:"circle",strokeBoundsBuffer:0},h),S.style));Object.keys(S.state||{}).forEach(J=>{const Q=S.state[J].fill||S.state[J].stroke;h.fill&&F(S.state[J].fill)&&Q&&(S.state[J].fill=Q),h.stroke&&F(S.state[J].stroke)&&Q&&(S.state[J].stroke=Q)}),this._appendDataToShape(K,pr.itemShape,t,M,S.state),K.addState(e?Qt.selected:Qt.unSelected),P.add(K)}let O=0;if(d){const nt=le(p,"size",sC);E=$t.symbol(Object.assign(Object.assign({x:0,y:-nt/2-1,strokeBoundsBuffer:0},p),{visible:!0,pickMode:"imprecise",boundsPadding:k})),this._appendDataToShape(E,pr.focus,t,M),O=nt}const L=v.formatMethod?v.formatMethod(l,t,i):l,H=Object.assign(Object.assign({x:D/2+N,y:0,textAlign:"start",textBaseline:"middle",lineHeight:(a=A.style)===null||a===void 0?void 0:a.fontSize},A.style),{text:L,_originText:v.formatMethod?l:void 0}),j=Qw(H);this._appendDataToShape(j,pr.itemLabel,t,M,A.state),j.addState(e?Qt.selected:Qt.unSelected),P.add(j);const G=le(v,"space",ptt);if(z(u)){const nt=le(y,"space",d?DFt:0),K=y.formatMethod?y.formatMethod(u,t,i):u,J=Object.assign(Object.assign({x:0,y:0,textAlign:"start",textBaseline:"middle",lineHeight:w.style.fontSize},w.style),{text:K,_originText:y.formatMethod?u:void 0}),Q=Qw(J);if(this._appendDataToShape(Q,pr.itemValue,t,M,w.state),Q.addState(e?Qt.selected:Qt.unSelected),this._itemWidthByUser){const dt=this._itemWidthByUser-k[1]-k[3]-D-N-G-O-nt;this._autoEllipsis(g,dt,j,Q),y.alignRight?Q.setAttributes({textAlign:"right",x:this._itemWidthByUser-D/2-k[1]-k[3]-O-nt}):Q.setAttribute("x",nt+(j.AABBBounds.empty()?0:j.AABBBounds.x2))}else Q.setAttribute("x",nt+(j.AABBBounds.empty()?0:j.AABBBounds.x2));I=nt+(Q.AABBBounds.empty()?0:Q.AABBBounds.x2),P.add(Q)}else this._itemWidthByUser&&j.setAttribute("maxLineWidth",this._itemWidthByUser-k[1]-k[3]-D-N-O),I=G+(j.AABBBounds.empty()?0:j.AABBBounds.x2);E&&(E.setAttribute("x",I),P.add(E));const U=P.AABBBounds,$=U.width();if(f==="right"){const nt=U.x2,K=U.x1;P.forEachChildren((J,Q)=>{J.type!=="symbol"&&J.attribute.textAlign!=="right"||J===E?J.setAttribute("x",K+nt-J.attribute.x-J.AABBBounds.width()):J.type!=="symbol"?J.setAttributes({x:K+nt-J.attribute.x,textAlign:"left"}):J.setAttribute("x",K+nt-J.attribute.x)})}const q=U.height(),tt=z(this.attribute.item.width)?this.attribute.item.width:$+k[1]+k[3],it=this._itemHeightByUser||q+k[0]+k[2];return M.attribute.width=tt,M.attribute.height=it,E&&E.setAttribute("visible",!1),P.translateTo(-U.x1+k[3],-U.y1+k[0]),M}_createPager(t){var e,i;const{disableTriggerEvent:r,maxRow:s}=this.attribute;return this._itemContext.isHorizontal?new Sy(Object.assign(Object.assign({layout:s===1?"horizontal":"vertical",total:99},gt({handler:{preShape:"triangleUp",nextShape:"triangleDown"}},t)),{defaultCurrent:(e=this.attribute.pager)===null||e===void 0?void 0:e.defaultCurrent,disableTriggerEvent:r})):new Sy(Object.assign({layout:"horizontal",total:99,disableTriggerEvent:r,defaultCurrent:(i=this.attribute.pager)===null||i===void 0?void 0:i.defaultCurrent},t))}_createScrollbar(t,e){const{disableTriggerEvent:i}=this.attribute;return this._itemContext.isHorizontal?new qw(Object.assign(Object.assign({direction:"horizontal",disableTriggerEvent:i,range:[0,.5],height:12},t),{width:e})):new qw(Object.assign(Object.assign({direction:"vertical",width:12,range:[0,.5]},t),{height:e,disableTriggerEvent:i}))}_updatePositionOfPager(t,e,i,r,s){const{maxHeight:a,pager:o}=this.attribute,{totalPage:l,isHorizontal:u}=this._itemContext,h=o&&o.position||"middle";if(this._pagerComponent.setTotal(l),u){let c;c=h==="start"?i:h==="end"?i+s-this._pagerComponent.AABBBounds.height()/2:i+s/2-this._pagerComponent.AABBBounds.height()/2,this._pagerComponent.setAttributes({x:t,y:c})}else{let c;c=h==="start"?0:h==="end"?r-this._pagerComponent.AABBBounds.width():(r-this._pagerComponent.AABBBounds.width())/2,this._pagerComponent.setAttributes({x:c,y:a-this._pagerComponent.AABBBounds.height()})}}_updatePositionOfScrollbar(t,e,i){const{currentPage:r,totalPage:s,isHorizontal:a}=this._itemContext;this._pagerComponent.setScrollRange([(r-1)/s,r/s]),a?this._pagerComponent.setAttributes({x:0,y:i+e}):this._pagerComponent.setAttributes({x:t,y:i})}_bindEventsOfPager(t,e){const i=this.attribute.pager||{},{animation:r=!0,animationDuration:s=450,animationEasing:a="quadIn"}=i,o=this._itemContext.isScrollbar?u=>{const{value:h}=u.detail;let c=h[0]*this._itemContext.totalPage;return i.scrollByPosition?c+=1:c=Math.floor(c)+1,c}:u=>u.detail.current,l=u=>{const h=o(u);if(h!==this._itemContext.currentPage){if(this._itemContext.currentPage=h,this._itemContext&&this._itemContext.startIndex<this._itemContext.items.length){this._renderItems();const c=Math.ceil(this._itemContext.pages/this._itemContext.maxPages);this._itemContext.totalPage=c,this._pagerComponent.setScrollRange([(h-1)/c,h/c])}r?this._itemsContainer.animate().to({[e]:-(h-1)*t},s,a):this._itemsContainer.setAttribute(e,-(h-1)*t)}};this._itemContext.isScrollbar?(this._pagerComponent.addEventListener("scrollDrag",l),this._pagerComponent.addEventListener("scrollUp",l)):(this._pagerComponent.addEventListener("toPrev",l),this._pagerComponent.addEventListener("toNext",l))}_renderPager(){const t=this._title?this._title.AABBBounds.height()+le(this.attribute,"title.space",8):0,{maxWidth:e,maxHeight:i,maxCol:r=1,maxRow:s=2,item:a={},pager:o={}}=this.attribute,{spaceCol:l=bS,spaceRow:u=xS}=a,h=this._itemsContainer,{space:c=eD,defaultCurrent:d=1}=o,p=hW(o,["space","defaultCurrent"]),{isHorizontal:f}=this._itemContext;let g,_=0,v=0,y=0,b=0,S=0,A=0,w=1;if(f){if(v=(s-1)*u+this._itemHeight*s,_=e,g=this._createPager(p),this._pagerComponent=g,this._innerView.add(g),y=e-g.AABBBounds.width()-c,y<=0)return this._innerView.removeChild(g),!1;h.getChildren().forEach((M,P)=>{const{width:E,height:I}=M.attribute;y<S+E&&(S=0,A+=I+u,w+=1),P>0&&M.setAttributes({x:S,y:A}),S+=l+E}),this._itemContext.startX=S,this._itemContext.startY=A,this._itemContext.pages=w;const k=Math.ceil(w/s);this._itemContext.totalPage=k,this._updatePositionOfPager(y,b,t,_,v)}else{if(_=this._itemMaxWidth*r+(r-1)*l,v=i,y=_,g=this._createPager(p),this._pagerComponent=g,this._innerView.add(g),b=i-g.AABBBounds.height()-c-t,b<=0)return this._innerView.removeChild(g),!1;h.getChildren().forEach((M,P)=>{const{height:E}=M.attribute;b<A+E&&(A=0,S+=this._itemMaxWidth+l,w+=1),P>0&&M.setAttributes({x:S,y:A}),A+=u+E});const k=Math.ceil(w/r);this._itemContext.totalPage=k,this._updatePositionOfPager(y,b,t,_,v)}d>1&&(f?h.setAttribute("y",-(d-1)*(v+u)):h.setAttribute("x",-(d-1)*(_+l)));const C=$t.group({x:0,y:t,width:f?y:_,height:f?v:b,clip:!0,pickable:!1});return C.add(h),this._innerView.add(C),this._bindEventsOfPager(f?v+u:_+l,f?"y":"x"),!0}_renderScrollbar(){const t=this._title?this._title.AABBBounds.height()+le(this.attribute,"title.space",8):0,{maxWidth:e,maxHeight:i,item:r={},pager:s={}}=this.attribute,{spaceCol:a=bS,spaceRow:o=xS}=r,l=this._itemsContainer,{space:u=eD,defaultCurrent:h=1}=s,c=hW(s,["space","defaultCurrent"]),{isHorizontal:d}=this._itemContext;let p,f=0,g=0,_=0,v=0,y=1;if(d)f=e,g=e,_=this._itemHeight,p=this._createScrollbar(c,f),this._pagerComponent=p,this._innerView.add(p),this._updatePositionOfScrollbar(g,_,t);else{if(f=i,p=this._createScrollbar(c,f),this._pagerComponent=p,this._innerView.add(p),_=i-t,g=this._itemMaxWidth,_<=0)return this._innerView.removeChild(p),!1;l.getChildren().forEach((S,A)=>{const{height:w}=S.attribute;y=Math.floor((v+w)/_)+1,v+=o+w}),this._itemContext.totalPage=y,this._itemContext.pages=y,this._updatePositionOfScrollbar(g,_,t)}h>1&&(d?l.setAttribute("x",-(h-1)*(g+a)):l.setAttribute("y",-(h-1)*(_+o)));const b=$t.group({x:0,y:t,width:g,height:_,clip:!0,pickable:!1});return b.add(l),this._innerView.add(b),this._bindEventsOfPager(d?g:_,d?"x":"y"),!0}_renderPagerComponent(){return this._itemContext.isScrollbar?this._renderScrollbar():this._renderPager(),!0}_hover(t,e){this._lastActiveItem=t,t.hasState(Qt.selected)?this._setLegendItemState(t,Qt.selectedHover,e):this._setLegendItemState(t,Qt.unSelectedHover,e);const i=t.getChildren()[0].find(r=>r.name===pr.focus,!1);i&&i.setAttribute("visible",!0),this._dispatchLegendEvent(Br.legendItemHover,t,e)}_unHover(t,e){let i=!1;(t.hasState(Qt.unSelectedHover)||t.hasState(Qt.selectedHover))&&(i=!0),t.removeState(Qt.unSelectedHover),t.removeState(Qt.selectedHover),t.getChildren()[0].getChildren().forEach(s=>{i||!s.hasState(Qt.unSelectedHover)&&!s.hasState(Qt.selectedHover)||(i=!0),s.removeState(Qt.unSelectedHover),s.removeState(Qt.selectedHover)});const r=t.getChildren()[0].find(s=>s.name===pr.focus,!1);r&&r.setAttribute("visible",!1),i&&this._dispatchLegendEvent(Br.legendItemAttributeUpdate,t,e),this._dispatchLegendEvent(Br.legendItemUnHover,t,e)}_setLegendItemState(t,e,i){let r=!1;t.hasState(e)||(r=!0),t.addState(e,!0),t.getChildren()[0].getChildren().forEach(s=>{s.name!==pr.focus&&(r||s.hasState(e)||(r=!0),s.addState(e,!0))}),r&&this._dispatchLegendEvent(Br.legendItemAttributeUpdate,t,i)}_removeLegendItemState(t,e,i){let r=!1;e.forEach(s=>{!r&&t.hasState(s)&&(r=!0),t.removeState(s)}),t.getChildren()[0].getChildren().forEach(s=>{s.name!==pr.focus&&e.forEach(a=>{!r&&s.hasState(a)&&(r=!0),s.removeState(a)})}),r&&this._dispatchLegendEvent(Br.legendItemAttributeUpdate,t,i)}_getSelectedLegends(){var t;const e=[];return(t=this._itemsContainer)===null||t===void 0||t.getChildren().forEach(i=>{i.hasState(Qt.selected)&&e.push(i.data)}),e}_appendDataToShape(t,e,i,r,s={}){t.name=e,t.data=i,t.delegate=r,t.states=gt({},NFt,s)}_dispatchLegendEvent(t,e,i){const r=this._getSelectedLegends();r.sort((a,o)=>a.index-o.index);const s=r.map(a=>a.label);this._dispatchEvent(t,{item:e,data:e.data,selected:e.hasState(Qt.selected),currentSelectedItems:r,currentSelected:s,event:i})}_handleStyle(t,e,i,r,s){const a={};return t.style&&(ft(t.style)?a.style=t.style(e,i,r,s):a.style=t.style),t.state&&(a.state={},Object.keys(t.state).forEach(o=>{t.state[o]&&(ft(t.state[o])?a.state[o]=t.state[o](e,i,r,s):a.state[o]=t.state[o])})),a}};ftt.defaultAttributes={layout:"horizontal",title:{align:"start",space:T1,textStyle:{fontSize:12,fontWeight:"bold",fill:"#2C3542"}},item:{spaceCol:bS,spaceRow:xS,shape:{space:dtt,style:{size:sC,cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{opacity:.5}}},label:{space:ptt,style:{fontSize:12,fill:"#2C3542",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8"}}},value:{alignRight:!1,style:{fontSize:12,fill:"#ccc",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8"}}},background:{style:{cursor:"pointer"}},focus:!1,focusIconStyle:{size:sC,symbolType:"M8 1C11.866 1 15 4.13401 15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1ZM8.75044 2.55077L8.75 3.75H7.25L7.25006 2.5507C4.81247 2.88304 2.88304 4.81247 2.5507 7.25006L3.75 7.25V8.75L2.55077 8.75044C2.8833 11.1878 4.81264 13.117 7.25006 13.4493L7.25 12.25H8.75L8.75044 13.4492C11.1876 13.1167 13.1167 11.1876 13.4492 8.75044L12.25 8.75V7.25L13.4493 7.25006C13.117 4.81264 11.1878 2.8833 8.75044 2.55077ZM8 5.5C9.38071 5.5 10.5 6.61929 10.5 8C10.5 9.38071 9.38071 10.5 8 10.5C6.61929 10.5 5.5 9.38071 5.5 8C5.5 6.61929 6.61929 5.5 8 5.5ZM8 7C7.44772 7 7 7.44772 7 8C7 8.55228 7.44772 9 8 9C8.55228 9 9 8.55228 9 8C9 7.44772 8.55228 7 8 7Z",fill:"#333",cursor:"pointer"}},autoPage:!0,pager:{space:eD,handler:{style:{size:10},space:4}},hover:!0,select:!0,selectMode:"multiple",allowAllCanceled:!0};var dr;(function(n){n.innerView="innerView",n.railContainer="sliderRailContainer",n.rail="sliderRail",n.startText="sliderStartText",n.endText="sliderEndText",n.startHandler="sliderStartHandler",n.startHandlerText="startHandlerText",n.endHandler="sliderEndHandler",n.endHandlerText="sliderEndHandlerText",n.track="sliderTrack",n.trackContainer="sliderTrackContainer"})(dr||(dr={}));function OE(n){return ut(n)?n:[n,n]}function Bx(n){return n?"ew-resize":"ns-resize"}J2();class Fm extends Nn{get track(){return this._track}get currentValue(){return this._currentValue}get startHandler(){return this._startHandler}get endHandler(){return this._endHandler}get tooltipShape(){return this._tooltipShape}constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},Fm.defaultAttributes,t)),this.name="slider",this._isHorizontal=!0,this._startHandler=null,this._endHandler=null,this._startHandlerText=null,this._endHandlerText=null,this._currentHandler=null,this._currentValue={},this._onTooltipShow=i=>{this._isChanging||this._tooltipState&&this._tooltipState.isActive||(this._tooltipState?this._tooltipState.isActive=!0:this._tooltipState={isActive:!0},this._onTooltipUpdate(i),this._dispatchTooltipEvent("sliderTooltipShow"))},this._onTooltipUpdate=i=>{if(this._isChanging||!this._tooltipState||!this._tooltipState.isActive)return;const r=this._isHorizontal?this._rail.globalAABBBounds.width():this._rail.globalAABBBounds.height(),s=Zi(this._isHorizontal?(i.viewX-this._rail.globalAABBBounds.x1)/r:(i.viewY-this._rail.globalAABBBounds.y1)/r,0,1);s!==this._tooltipState.pos&&(this._tooltipState.pos=s,this._tooltipState.value=this.calculateValueByPos(s*r),this._updateTooltip(),this._dispatchTooltipEvent("sliderTooltipUpdate"))},this._onTooltipHide=()=>{const{tooltip:i}=this.attribute;i&&i.alwaysShow||(this._tooltipState=null,this._tooltipShape&&this._tooltipShape.setAttribute("visible",!1),this._tooltipText&&this._tooltipText.setAttribute("visible",!1),this._dispatchTooltipEvent("sliderTooltipHide"))},this._onHandlerPointerdown=i=>{i.stopPropagation(),this._isChanging=!0;const{x:r,y:s}=this.stage.eventPointTransform(i);this._currentHandler=i.target,this._prePos=this._isHorizontal?r:s,_e.env==="browser"?(_e.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),_e.addEventListener("pointerup",this._onHandlerPointerUp)):(this.stage.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),this.stage.addEventListener("pointerup",this._onHandlerPointerUp),this.stage.addEventListener("pointerupoutside",this._onHandlerPointerUp))},this._onHandlerPointerMove=i=>{var r,s;i.stopPropagation(),this._isChanging=!0;const{railWidth:a,railHeight:o,min:l,max:u}=this.attribute;if(u===l)return;const{x:h,y:c}=this.stage.eventPointTransform(i);let d,p,f,g=0;this._isHorizontal?(d=h,g=d-this._prePos,p=(s=this._currentHandler)===null||s===void 0?void 0:s.attribute.x,f=a):(d=c,g=d-this._prePos,p=(r=this._currentHandler)===null||r===void 0?void 0:r.attribute.y,f=o);const _=Zi(p+g,0,f),v=this.calculateValueByPos(_);this._currentHandler.type==="text"?this._updateHandlerText(this._currentHandler,_,v):this._updateHandler(this._currentHandler,_,v),this._updateTrack(),this._prePos=d,this._dispatchChangeEvent()},this._onHandlerPointerUp=i=>{i.preventDefault(),this._isChanging=!1,this._currentHandler=null,_e.env==="browser"?(_e.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),_e.removeEventListener("pointerup",this._onHandlerPointerUp)):(this.stage.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),this.stage.removeEventListener("pointerup",this._onHandlerPointerUp),this.stage.removeEventListener("pointerupoutside",this._onHandlerPointerUp))},this._onTrackPointerdown=i=>{i.stopPropagation(),this._isChanging=!0;const{x:r,y:s}=this.stage.eventPointTransform(i);this._prePos=this._isHorizontal?r:s,_e.env==="browser"?(_e.addEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),_e.addEventListener("pointerup",this._onTrackPointerUp)):(this.stage.addEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),this.stage.addEventListener("pointerup",this._onTrackPointerUp),this.stage.addEventListener("pointerupoutside",this._onTrackPointerUp))},this._onTrackPointerMove=i=>{i.stopPropagation(),this._isChanging=!0;const{railWidth:r,railHeight:s,min:a,max:o,inverse:l}=this.attribute;if(o===a)return;const{startHandler:u,endHandler:h}=this._getHandlers();let c,d,p;const{x:f,y:g}=this.stage.eventPointTransform(i);this._isHorizontal?(c=f,d=this._track.attribute.width,p=r):(c=g,d=this._track.attribute.height,p=s);const _=c-this._prePos;if(u){const v=this._isHorizontal?u.attribute.x:u.attribute.y,y=l?Zi(v+_,d,p):Zi(v+_,0,p-d),b=this.calculateValueByPos(y);this._updateHandler(u,y,b)}if(h){const v=this._isHorizontal?h.attribute.x:h.attribute.y,y=l?Zi(v+_,0,p-d):Zi(v+_,d,p),b=this.calculateValueByPos(y),S=u==null?void 0:u.attribute;this._updateHandler(h,y,b),this._track.setAttributes(this._isHorizontal?{x:Math.min(S.x,h.attribute.x),width:Math.abs(S.x-h.attribute.x)}:{y:Math.min(S.y,h.attribute.y),height:Math.abs(S.y-h.attribute.y)})}this._prePos=c,this._dispatchChangeEvent()},this._onTrackPointerUp=i=>{i.preventDefault(),this._isChanging=!1,_e.env==="browser"?(_e.removeEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),_e.removeEventListener("pointerup",this._onTrackPointerUp)):(this.stage.removeEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),this.stage.removeEventListener("pointerup",this._onTrackPointerUp),this.stage.removeEventListener("pointerupoutside",this._onTrackPointerUp))},this._onRailPointerDown=i=>{i.stopPropagation(),this._isChanging=!0;const{railWidth:r,railHeight:s,min:a,max:o}=this.attribute;if(o===a)return;const l=this._startHandler,u=this._endHandler;let h,c,d;this._isHorizontal?(h=i.viewX-this._rail.globalAABBBounds.x1,c=l==null?void 0:l.attribute.x,d=u==null?void 0:u.attribute.x):(h=i.viewY-this._rail.globalAABBBounds.y1,c=l==null?void 0:l.attribute.y,d=u==null?void 0:u.attribute.y);const p=this.calculateValueByPos(h);if(z(d)){const f=Math.abs(h-c)>Math.abs(h-d)?u:l;this._updateHandler(f,h,p)}else this._updateHandler(l,h,p);this._updateTrack(),this._dispatchChangeEvent()}}calculatePosByValue(t,e){const{layout:i,railWidth:r,railHeight:s,min:a,max:o,inverse:l}=this.attribute;let u=0;return u=a===o?e==="start"?0:e==="end"?1:0:(t-a)/(o-a),(l?1-u:u)*(i==="vertical"?s:r)}calculateValueByPos(t){const{layout:e,railWidth:i,railHeight:r,min:s,max:a,inverse:o}=this.attribute,l=e==="vertical"?r:i;return s+(a-s)*(o?1-t/l:t/l)}setValue(t){const{min:e,max:i}=this.attribute;if(i===e)return;const[r,s]=ot(t),{startHandler:a,endHandler:o}=this._getHandlers();a&&this._updateHandler(a,this.calculatePosByValue(r),r),o&&this._updateHandler(o,this.calculatePosByValue(s),s),this._updateTrack()}render(){var t,e;this.removeAllChild(!0);const{layout:i="horizontal",railWidth:r,railHeight:s,startText:a,endText:o,min:l,max:u,showHandler:h=!0,showTooltip:c}=this.attribute;let{value:d}=this.attribute;F(d)&&(d=[l,u]),this._currentValue={startValue:OE(d)[0],endValue:OE(d)[1]};const p=i==="horizontal";this._isHorizontal=p;const f=$t.group({x:0,y:0});f.name=dr.innerView,this.add(f),this._innerView=f;let g,_=0;if(a&&a.visible){g=$t.text(Object.assign({x:p?0:r/2,y:p?s/2:0,textAlign:p?"start":"center",textBaseline:p?"middle":"top",text:a.text,lineHeight:(t=a.style)===null||t===void 0?void 0:t.fontSize},a.style)),g.name=dr.startText,f.add(g);const S=z(a.space)?a.space:0;_+=(p?g.AABBBounds.width():g.AABBBounds.height())+S}const v=$t.group({x:p?_:0,y:p?0:_});f.add(v);const y=$t.group({x:0,y:0});let b;if(y.name=dr.railContainer,this._railContainer=y,v.add(y),this._mainContainer=v,this._renderRail(y),_+=p?r:s,o&&o.visible){const S=z(o.space)?o.space:0;b=$t.text(Object.assign({x:p?_+S:r/2,y:p?s/2:_+S,textAlign:p?"start":"center",textBaseline:p?"middle":"top",text:o.text,lineHeight:(e=o.style)===null||e===void 0?void 0:e.fontSize},o.style)),b.name=dr.endText,f.add(b)}this._renderTrack(y),h&&(this._renderHandlers(v),this._bindEvents()),c&&(this._renderTooltip(),this._bindTooltipEvents())}_renderRail(t){const{railWidth:e,railHeight:i,railStyle:r,slidable:s}=this.attribute;let a="default";s!==!1&&(a="pointer");const o=$t.rect(Object.assign({x:0,y:0,width:e,height:i,cursor:a},r));return o.name=dr.rail,t.add(o),this._rail=o,o}_renderHandlers(t){const{range:e,min:i,max:r,handlerSize:s=14,handlerStyle:a,handlerText:o,railHeight:l,railWidth:u,slidable:h}=this.attribute;let{value:c}=this.attribute;F(c)&&(c=[i,r]);const d=o&&o.visible,p=this._isHorizontal,[f,g]=OE(c),_=this.calculatePosByValue(f,e?"start":"end"),v=this._renderHandler(Object.assign({x:p?_:u/2,y:p?l/2:_,size:s,strokeBoundsBuffer:0,cursor:h===!1?"default":Bx(p)},a));if(v.name=dr.startHandler,this._startHandler=v,t.add(v),this._currentValue.startPos=_,d){const y=this._renderHandlerText(f,e?"start":"end");y.name=dr.startHandlerText,t.add(y),this._startHandlerText=y}if(e){const y=this.calculatePosByValue(g,"end"),b=this._renderHandler(Object.assign({x:p?y:u/2,y:p?l/2:y,size:s,strokeBoundsBuffer:0,cursor:h===!1?"default":Bx(p)},a));if(b.name=dr.endHandler,this._endHandler=b,t.add(b),this._currentValue.endPos=y,d){const S=this._renderHandlerText(g,"end");S.name=dr.endHandlerText,t.add(S),this._endHandlerText=S}}}_renderTrack(t){const{range:e,min:i,max:r,railHeight:s,railWidth:a,trackStyle:o,railStyle:l,slidable:u,value:h}=this.attribute;let c,d;if(F(h))e?(c=i,d=r):c=d=i;else if(e){const S=ed(h,i,r);c=S[0],d=S[1]}else c=i,d=Zi(h,i,r);const p=this._isHorizontal;e||(c=i);const f=$t.group({x:0,y:0,width:a,height:s,cornerRadius:l==null?void 0:l.cornerRadius,clip:!0,pickable:!1});f.name=dr.trackContainer;const g=ae(e)&&e.draggableTrack===!0;let _;_=u===!1?"default":e===!1||g===!1?"pointer":Bx(p);const v=this.calculatePosByValue(c,"start"),y=this.calculatePosByValue(d,e?"end":"start"),b=$t.rect(Object.assign({x:p?Math.min(v,y):0,y:p?0:Math.min(v,y),width:p?Math.abs(y-v):a,height:p?s:Math.abs(y-v),cursor:_},o));b.name=dr.track,this._track=b,f.add(b),t.add(f)}_renderHandler(t){return $t.symbol(t)}_renderHandlerText(t,e){var i,r,s;const{align:a,handlerSize:o=14,handlerText:l={},railHeight:u,railWidth:h,slidable:c}=this.attribute,d=this._isHorizontal,p=this.calculatePosByValue(t,e),f=(i=l.space)!==null&&i!==void 0?i:4,g={text:l.formatter?l.formatter(t):t.toFixed((r=l.precision)!==null&&r!==void 0?r:0),lineHeight:(s=l.style)===null||s===void 0?void 0:s.lineHeight,cursor:c===!1?"default":Bx(d)};return d?a==="top"?(g.textBaseline="bottom",g.textAlign="center",g.x=p,g.y=(u-o)/2-f):(g.textBaseline="top",g.textAlign="center",g.x=p,g.y=(u+o)/2+f):a==="left"?(g.textBaseline="middle",g.textAlign="end",g.x=(h-o)/2-f,g.y=p):(g.textBaseline="middle",g.textAlign="start",g.x=(h+o)/2+f,g.y=p),$t.text(Object.assign(Object.assign({},g),l.style))}_renderTooltip(){var t;const{tooltip:e,railHeight:i,railWidth:r,align:s}=this.attribute;e&&e.alwaysShow?this._tooltipState={value:this._currentValue.startValue,pos:this._currentValue.startPos}:this._tooltipState=null;const a=this._isHorizontal?0:r/2,o=this._isHorizontal?i/2:0;if(e&&e.shape){const d=$t.symbol(Object.assign({pickable:!1,visible:!!this._tooltipState,x:a,y:o,symbolType:"circle"},e.shapeStyle));this._tooltipShape=d,this._mainContainer.add(d)}const l=e&&e.text||{},u=(t=l.space)!==null&&t!==void 0?t:6,h={pickable:!1,visible:!!this._tooltipState,text:""};this._isHorizontal?(h.x=a,h.y=s==="top"?o-i/2-u:o+i/2+u,h.textAlign="center",h.textBaseline=s==="top"?"bottom":"top"):(h.y=o,h.x=s==="left"?a-r/2-u:o+r/2+u,h.textAlign=s==="left"?"end":"start",h.textBaseline="middle");const c=$t.text(Object.assign(Object.assign({},h),l.style));this._mainContainer.add(c),this._tooltipText=c,this._tooltipState&&this._updateTooltip()}_updateTooltip(){var t,e;if(!this._tooltipShape&&!this._tooltipText||!this._tooltipState)return;const{railWidth:i,railHeight:r}=this.attribute,s=this._isHorizontal?i:r,a=this._tooltipState.pos*s,o=this._isHorizontal?"x":"y";this._tooltipShape&&this._tooltipShape.setAttributes({visible:!0,[o]:a});const{align:l}=this.attribute;if(this._tooltipText){const u=this.attribute.tooltip&&this.attribute.tooltip.text||{};this._tooltipText.setAttributes({visible:!0,[o]:a,text:u.formatter?u.formatter(this._tooltipState.value):this._isHorizontal||l!=="left"?`≈ ${this._tooltipState.value.toFixed((e=u.precision)!==null&&e!==void 0?e:0)}`:`${this._tooltipState.value.toFixed((t=u.precision)!==null&&t!==void 0?t:0)} ≈`})}}_bindEvents(){if(this.attribute.disableTriggerEvent)return;const{slidable:t,range:e}=this.attribute;t&&(this._startHandler&&this._startHandler.addEventListener("pointerdown",this._onHandlerPointerdown),this._startHandlerText&&this._startHandlerText.addEventListener("pointerdown",this._onHandlerPointerdown),this._endHandler&&this._endHandler.addEventListener("pointerdown",this._onHandlerPointerdown),this._endHandlerText&&this._endHandlerText.addEventListener("pointerdown",this._onHandlerPointerdown),ae(e)&&e.draggableTrack&&this._track.addEventListener("pointerdown",this._onTrackPointerdown),this._railContainer.addEventListener("pointerdown",this._onRailPointerDown))}_bindTooltipEvents(){this.attribute.disableTriggerEvent||(this._mainContainer.addEventListener("pointerenter",this._onTooltipShow),this._mainContainer.addEventListener("pointermove",this._onTooltipUpdate),this._mainContainer.addEventListener("pointerleave",this._onTooltipHide))}_updateTrack(){const{inverse:t,railWidth:e,railHeight:i}=this.attribute,r=this._startHandler,s=this._endHandler;if(this._isHorizontal){const a=r==null?void 0:r.attribute.x;if(s){const o=s==null?void 0:s.attribute.x;this._track.setAttributes({x:Math.min(a,o),width:Math.abs(a-o)})}else t?this._track.setAttributes({x:a,width:e-a}):this._track.setAttributes({width:a})}else{const a=r==null?void 0:r.attribute.y;if(s){const o=s==null?void 0:s.attribute.y;this._track.setAttributes({y:Math.min(a,o),height:Math.abs(a-o)})}else t?this._track.setAttributes({y:a,height:i-a}):this._track.setAttributes({height:a})}}_updateHandler(t,e,i){var r;const s=this._isHorizontal;t.setAttribute(s?"x":"y",e);const a=t.name===dr.startHandler?this._startHandlerText:this._endHandlerText;if(a){const{handlerText:o={}}=this.attribute;a.setAttributes({text:o.formatter?o.formatter(i):i.toFixed((r=o.precision)!==null&&r!==void 0?r:0),[s?"x":"y"]:e})}t.name===dr.startHandler?(this._currentValue.startValue=i,this._currentValue.startPos=e):(this._currentValue.endValue=i,this._currentValue.endPos=e)}_updateHandlerText(t,e,i){var r;const s=this._isHorizontal,{handlerText:a={}}=this.attribute;t.setAttributes({[s?"x":"y"]:e,text:a.formatter?a.formatter(i):i.toFixed((r=a.precision)!==null&&r!==void 0?r:0)});const o=t.name===dr.startHandlerText?this._startHandler:this._endHandler;o&&o.setAttributes({[s?"x":"y"]:e}),t.name===dr.startHandlerText?(this._currentValue.startValue=i,this._currentValue.startPos=e):(this._currentValue.endValue=i,this._currentValue.endPos=e)}_dispatchChangeEvent(){const t=!!this.attribute.range,e=this._currentValue;this._dispatchEvent("change",{value:t?[Math.min(e.endValue,e.startValue),Math.max(e.endValue,e.startValue)]:e.startValue,position:t?[Math.min(e.endPos,e.startPos),Math.max(e.endPos,e.startPos)]:e.startPos})}_dispatchTooltipEvent(t){this._dispatchEvent("sliderTooltip",{type:t,position:this._tooltipState&&this._tooltipState.pos,value:this._tooltipState&&this._tooltipState.value})}_getHandlers(){const{inverse:t}=this.attribute;let e=this._startHandler,i=this._endHandler;return i?(this._isHorizontal?(!t&&i.attribute.x<(e==null?void 0:e.attribute.x)||t&&i.attribute.x>(e==null?void 0:e.attribute.x))&&([e,i]=[i,e]):(!t&&i.attribute.y<(e==null?void 0:e.attribute.y)||t&&i.attribute.y>(e==null?void 0:e.attribute.y))&&([e,i]=[i,e]),{startHandler:e,endHandler:i}):{startHandler:e,endHandler:i}}}Fm.defaultAttributes={slidable:!0,layout:"horizontal",align:"bottom",height:8,showHandler:!0,handlerSize:14,handlerStyle:{symbolType:"circle",fill:"#fff",stroke:"#91caff",lineWidth:2},tooltip:{shapeStyle:{symbolType:"circle",fill:"#fff",stroke:"#91caff",lineWidth:2},text:{style:{fill:"#2C3542",fontSize:12}}},railStyle:{fill:"rgba(0,0,0,.04)"},trackStyle:{fill:"#91caff"},showValue:!0,valueStyle:{fill:"#2C3542",fontSize:12},startText:{style:{fill:"#2C3542",fontSize:12}},endText:{style:{fill:"#2C3542",fontSize:12}},handlerText:{visible:!0,space:4,precision:0,style:{fill:"#2C3542",fontSize:12}}};FFt();class Q2 extends AF{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},Q2.defaultAttributes,t)),this.name="colorLegend",this._onSliderToolipChange=i=>{const r=this._slider.tooltipShape;if(r&&i.detail&&!F(i.detail.value)){const s=this._colorScale.scale(i.detail.value);r.setAttribute("fill",s)}this.dispatchEvent(i)},this._onSliderChange=i=>{this._updateColor(),this.dispatchEvent(i)}}setSelected(t){this._slider&&(this._slider.setValue(t),this._updateColor())}_renderContent(){const{colors:t,slidable:e,layout:i,align:r,min:s,max:a,value:o,railWidth:l,railHeight:u,showHandler:h=!0,handlerSize:c,handlerStyle:d,railStyle:p,trackStyle:f,startText:g,endText:_,handlerText:v,showTooltip:y,tooltip:b,inverse:S,disableTriggerEvent:A}=this.attribute,w=[],C=(a-s)/(t.length-1);for(let M=0;M<t.length;M++)w.push(s+C*M);this._colorScale=new to().domain(w,!0).range(t),this._color=this._getTrackColor();const k=new Fm({x:0,y:0,range:{draggableTrack:!0},slidable:e,layout:i,align:r,min:s,max:a,value:o,railWidth:l,railHeight:u,showHandler:h,handlerSize:c,handlerStyle:d,railStyle:p,trackStyle:Object.assign({fill:this._color},f),startText:g,endText:_,handlerText:v,showTooltip:y,tooltip:b,disableTriggerEvent:A,inverse:S});this._innerView.add(k),this._slider=k,k.translateTo(0-k.AABBBounds.x1,(this._title?this._title.AABBBounds.height()+le(this.attribute,"title.space",T1):0)-k.AABBBounds.y1),this._updateColor()}_bindEvents(){this.attribute.disableTriggerEvent||this._slider&&(this._slider.addEventListener("change",this._onSliderChange),this._slider.addEventListener("sliderTooltip",this._onSliderToolipChange))}_getTrackColor(){const{colors:t,layout:e,inverse:i}=this.attribute;if(Gt(t))return;const r=t.length;if(r===1)return t[0];const s=[];for(let l=0;l<r;l++){const u=l/(r-1);s.push({offset:u,color:t[l]})}const a=e==="horizontal",o={gradient:"linear",stops:s,x0:0,y0:0,x1:a?1:0,y1:a?0:1};return i&&(a?(o.x0=1,o.x1=0):(o.y0=1,o.y1=0)),o}_updateColor(){var t;const{layout:e="horizontal",colors:i,railWidth:r,railHeight:s}=this.attribute,{startHandler:a,endHandler:o,track:l,attribute:u}=this._slider,{startValue:h,endValue:c,startPos:d,endPos:p}=this._slider.currentValue,f=(t=u.handlerStyle)===null||t===void 0?void 0:t.fill;if(a&&!f){const _=this._colorScale.scale(h);a.setAttribute("fill",_)}if(o&&!f){const _=this._colorScale.scale(c);o.setAttribute("fill",_)}const g=e==="horizontal"?r:s;if(Math.abs(d-p)!==g&&i&&i.length>1){const _=this._color.stops,v=Math.min(d,p),y=Math.max(d,p),b=v/g,S=y/g,A=S-b,w=_.filter(I=>I.offset>b&&I.offset<S),C=Math.min(h,c),k=Math.max(h,c),M=this._colorScale.scale(C),P=this._colorScale.scale(k),E=[{offset:0,color:M}];w.forEach(I=>{E.push({offset:(I.offset-b)/A,color:I.color})}),E.push({offset:1,color:P}),l.setAttribute("fill",Object.assign(Object.assign({},this._color),{stops:E}))}}}Q2.defaultAttributes={layout:"horizontal",title:{align:"start",space:T1,textStyle:{fontSize:12,fontWeight:"bold",fill:"rgba(46, 47, 50, 1)"}},handlerSize:10,handlerStyle:{fill:null,lineWidth:4,stroke:"#fff",outerBorder:{distance:2,lineWidth:1,stroke:"#ccc"}},tooltip:{shapeStyle:{lineWidth:4,stroke:"#fff"}}};function zFt(n="bottom"){let t=0;return n==="top"?`
    M${t},-6L${t-3.5},-2.5
    v5
    h7
    v-5
    Z
`:n==="left"?(t=1,`
    M${t-6},0L${t-6+2.5},-3.5
    h5
    v7
    h-5
    Z
`):n==="right"?(t=-1,`
    M${t+6},0L${t+6-2.5},-3.5
    h-5
    v7
    h5
    Z
  `):`
    M${t},6L${t-3.5},2.5
    v-5
    h7
    v5
    Z
`}jFt();class tT extends AF{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},tT.defaultAttributes,t)),this.name="sizeLegend",this._onSliderChange=i=>{this.dispatchEvent(i)},this._onSliderToolipChange=i=>{this.dispatchEvent(i)}}setSelected(t){this._slider&&this._slider.setValue(t)}_renderContent(){const{slidable:t,layout:e,align:i,min:r,max:s,value:a,railWidth:o,railHeight:l,showHandler:u=!0,handlerSize:h,handlerStyle:c,railStyle:d,trackStyle:p,startText:f,endText:g,handlerText:_,showTooltip:v,tooltip:y,sizeBackground:b,disableTriggerEvent:S,inverse:A}=this.attribute,w=$t.group({x:0,y:0});this._innerView.add(w);const C=new Fm({x:0,y:0,zIndex:1,range:{draggableTrack:!0},slidable:t,layout:e,align:i,min:r,max:s,value:a,railWidth:o,railHeight:l,showHandler:u,handlerSize:h,handlerStyle:Object.assign({symbolType:zFt(i)},c),railStyle:d,trackStyle:p,startText:f,endText:g,handlerText:_,showTooltip:v,tooltip:y,disableTriggerEvent:S,inverse:A});w.add(C);let k,M=0;e==="horizontal"?i==="top"?(k=`M0,0L${o},0L${A?0:o},12Z`,M=l):(k=`M0,12L${o},12L${A?0:o},0Z`,C.setAttribute("y",12)):i==="left"?k=`M${o},0L${o+12},${A?0:l}L${o},${l}Z`:(k=`M0,${A?0:l}L12,${l}L12,0Z`,C.setAttribute("x",12));const P=$t.path(Object.assign(Object.assign({x:0,y:M,path:k},b),{zIndex:0}));w.add(P);const E=this._title?this._title.AABBBounds.height()+le(this.attribute,"title.space",T1):0;w.translate(0-w.AABBBounds.x1,E-w.AABBBounds.y1),this._slider=C}_bindEvents(){this.attribute.disableTriggerEvent||this._slider&&(this._slider.addEventListener("change",this._onSliderChange),this._slider.addEventListener("sliderTooltip",this._onSliderToolipChange))}}tT.defaultAttributes={layout:"horizontal",title:{align:"start",space:T1,textStyle:{fontSize:12,fontWeight:"bold",fill:"rgba(46, 47, 50, 1)"}},handlerSize:10,handlerStyle:{lineWidth:1,stroke:"#ccc",fill:"#fff"},sizeBackground:{fill:"rgba(20,20,20,0.1)"}};function HFt(){rn(),Pl(),Oc()}HFt();let mtt=class vtt extends Nn{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},vtt.defaultAttributes,t)),this.name="title"}render(){var t,e,i,r,s,a,o,l,u,h,c,d,p,f,g,_,v,y,b,S,A,w,C,k,M,P,E,I,D,N,O,L,H,j,G,U,$,q,tt,it,nt,K;const{textType:J,text:Q,subtextType:dt,textStyle:bt={},subtext:xt,subtextStyle:ht={},width:St,height:yt,minWidth:vt,maxWidth:pt,minHeight:jt,maxHeight:Lt,align:Yt,verticalAlign:Nt,padding:te=0}=this.attribute,ge=ds(te),Pe=this.createOrUpdateChild("title-container",{x:ge[3],y:ge[0],zIndex:1},"group");if(this.attribute.visible!==!1&&bt.visible!==!1)if(J==="rich"||z(bt.character)){const ye=Object.assign({x:(t=bt.x)!==null&&t!==void 0?t:0,y:(e=bt.y)!==null&&e!==void 0?e:0,width:(r=(i=bt.width)!==null&&i!==void 0?i:St)!==null&&r!==void 0?r:0,height:(a=(s=bt.height)!==null&&s!==void 0?s:yt)!==null&&a!==void 0?a:0,ellipsis:(o=bt.ellipsis)===null||o===void 0||o,wordBreak:(l=bt.wordBreak)!==null&&l!==void 0?l:"break-word",maxHeight:bt.maxHeight,maxWidth:bt.maxWidth,textConfig:(u=bt.character)!==null&&u!==void 0?u:Q},bt);this._mainTitle=Pe.createOrUpdateChild("mainTitle",ye,"richtext")}else if(J==="html"){const ye=Object.assign({html:Object.assign(Object.assign({dom:Q},Kw),bt),x:(h=bt.x)!==null&&h!==void 0?h:0,y:(c=bt.y)!==null&&c!==void 0?c:0,width:(p=(d=bt.width)!==null&&d!==void 0?d:St)!==null&&p!==void 0?p:0,height:(g=(f=bt.height)!==null&&f!==void 0?f:yt)!==null&&g!==void 0?g:0,ellipsis:(_=bt.ellipsis)===null||_===void 0||_,wordBreak:(v=bt.wordBreak)!==null&&v!==void 0?v:"break-word",maxHeight:bt.maxHeight,maxWidth:bt.maxWidth,textConfig:[]},bt);this._mainTitle=Pe.createOrUpdateChild("mainTitle",ye,"richtext")}else z(Q)&&(this._mainTitle=Pe.createOrUpdateChild("mainTitle",Object.assign(Object.assign({text:ut(Q)?Q:[Q],wrap:!0},bt),{maxLineWidth:(y=bt.maxLineWidth)!==null&&y!==void 0?y:St,heightLimit:bt.heightLimit,lineClamp:bt.lineClamp,ellipsis:(b=bt.ellipsis)===null||b===void 0||b,x:0,y:0}),"text"));const we=this._mainTitle?this._mainTitle.AABBBounds.height():0,Ze=this._mainTitle?this._mainTitle.AABBBounds.width():0;if(this.attribute.visible!==!1&&ht.visible!==!1)if(dt==="rich"||z(ht.character)){const ye=Object.assign({x:(S=ht.x)!==null&&S!==void 0?S:0,y:(A=ht.y)!==null&&A!==void 0?A:0,width:(C=(w=ht.width)!==null&&w!==void 0?w:St)!==null&&C!==void 0?C:0,height:(M=(k=ht.height)!==null&&k!==void 0?k:yt)!==null&&M!==void 0?M:0,ellipsis:(P=ht.ellipsis)===null||P===void 0||P,wordBreak:(E=ht.wordBreak)!==null&&E!==void 0?E:"break-word",maxHeight:ht.maxHeight,maxWidth:ht.maxWidth,textConfig:(I=ht.character)!==null&&I!==void 0?I:xt},ht);this._subTitle=Pe.createOrUpdateChild("subTitle",ye,"richtext")}else if(dt==="html"){const ye=Object.assign({html:Object.assign(Object.assign({dom:xt},Kw),ht),x:(D=ht.x)!==null&&D!==void 0?D:0,y:(N=ht.y)!==null&&N!==void 0?N:0,width:(L=(O=ht.width)!==null&&O!==void 0?O:St)!==null&&L!==void 0?L:0,height:(j=(H=ht.height)!==null&&H!==void 0?H:yt)!==null&&j!==void 0?j:0,ellipsis:(G=ht.ellipsis)===null||G===void 0||G,wordBreak:(U=ht.wordBreak)!==null&&U!==void 0?U:"break-word",maxHeight:ht.maxHeight,maxWidth:ht.maxWidth,textConfig:[]},ht);this._subTitle=Pe.createOrUpdateChild("subTitle",ye,"richtext")}else z(xt)&&(this._subTitle=Pe.createOrUpdateChild("subTitle",Object.assign(Object.assign({text:ut(xt)?xt:[xt],wrap:!0},ht),{maxLineWidth:($=ht.maxLineWidth)!==null&&$!==void 0?$:St,heightLimit:ht.heightLimit,lineClamp:ht.lineClamp,ellipsis:(q=ht.ellipsis)===null||q===void 0||q,x:0,y:we}),"text"));const je=this._subTitle?this._subTitle.AABBBounds.height():0,oe=this._subTitle?this._subTitle.AABBBounds.width():0;let ne=Math.max(Ze,oe),De=we+((tt=ht.height)!==null&&tt!==void 0?tt:je);if(z(St)&&(ne=St,this._mainTitle&&this._mainTitle.setAttribute("maxLineWidth",St),this._subTitle&&this._subTitle.setAttribute("maxLineWidth",St)),z(yt)&&(De=yt),z(vt)&&ne<vt&&(ne=vt),z(pt)&&(this._mainTitle&&this._mainTitle.setAttribute("maxLineWidth",pt),this._subTitle&&this._subTitle.setAttribute("maxLineWidth",pt),this._mainTitle&&this._mainTitle.setAttribute("maxWidth",pt),this._subTitle&&this._subTitle.setAttribute("maxWidth",pt),ne>pt&&(ne=pt)),z(jt)&&De<jt&&(De=jt),z(Lt)&&(this._mainTitle&&this._mainTitle.setAttribute("maxHeight",Lt),this._subTitle&&this._subTitle.setAttribute("maxHeight",Lt-we),De>Lt&&(De=Lt)),Pe.attribute.width=ne,Pe.attribute.height=De,Pe.attribute.boundsPadding=ge,this._mainTitle){if(z(Yt)||z(bt.align)){const ye=bt.align?bt.align:Yt,Xe=(it=bt.width)!==null&&it!==void 0?it:Ze;ye==="left"?(this._mainTitle.setAttribute("x",0),this._mainTitle.setAttribute("textAlign","left")):ye==="center"?(this._mainTitle.setAttribute("x",Xe/2),this._mainTitle.setAttribute("textAlign","center")):ye==="right"&&(this._mainTitle.setAttribute("x",Xe),this._mainTitle.setAttribute("textAlign","right"))}if(z(Nt)||z(bt.verticalAlign)){const ye=bt.verticalAlign?bt.verticalAlign:Nt,Xe=bt.height?bt.height:De;ye==="top"?(this._mainTitle.setAttribute("y",0),this._mainTitle.setAttribute("textBaseline","top")):ye==="middle"?(this._mainTitle.setAttribute("y",Xe/2),this._mainTitle.setAttribute("textBaseline","middle")):ye==="bottom"&&(this._mainTitle.setAttribute("y",Xe),this._mainTitle.setAttribute("textBaseline","bottom"))}}if(this._subTitle){if(z(Yt)||z(ht.align)){const ye=ht.align?ht.align:Yt,Xe=(nt=ht.width)!==null&&nt!==void 0?nt:oe;ye==="left"?(this._subTitle.setAttribute("x",0),this._subTitle.setAttribute("textAlign","left")):ye==="center"?(this._subTitle.setAttribute("x",Xe/2),this._subTitle.setAttribute("textAlign","center")):ye==="right"&&(this._subTitle.setAttribute("x",Xe),this._subTitle.setAttribute("textAlign","right"))}if(z(Nt)||z(bt.verticalAlign)){const ye=ht.verticalAlign?ht.verticalAlign:Nt,Xe=we,Gi=(K=ht.height)!==null&&K!==void 0?K:0;ye==="top"?(this._subTitle.setAttribute("y",Xe),this._subTitle.setAttribute("textBaseline","top")):ye==="middle"?(this._subTitle.setAttribute("y",Xe+Gi/2),this._subTitle.setAttribute("textBaseline","middle")):ye==="bottom"&&(this._subTitle.setAttribute("y",Xe+Gi),this._subTitle.setAttribute("textBaseline","bottom"))}}}};mtt.defaultAttributes={textStyle:{ellipsis:"...",fill:"#333",fontSize:20,fontWeight:"bold",textAlign:"left",textBaseline:"top"},subtextStyle:{ellipsis:"...",fill:"#6F6F6F",fontSize:16,fontWeight:"normal",textAlign:"left",textBaseline:"top"}};const cW={title:{style:{text:"",fontSize:20,fill:"black",fontWeight:"normal",fillOpacity:1,textBaseline:"top",textAlign:"center"}},content:{style:{text:"",fontSize:16,fill:"black",fontWeight:"normal",fillOpacity:1,textBaseline:"top",textAlign:"center"}}};function VFt(){rn(),Pl(),Oc()}VFt();let WFt=class extends Nn{constructor(){super(...arguments),this.name="indicator"}render(){var t;const{visible:e,title:i={},content:r,size:s,limitRatio:a=1/0}=this.attribute,o=Math.min(s.width,s.height)*a,l=this.createOrUpdateChild("indicator-container",{x:0,y:0,zIndex:1},"group");if(e!==!0)return void(l&&l.hideAll());if(z(i))if(i.visible!==!1){const h=gt({},le(cW,"title.style"),i.style);$L(h)?this._title=l.createOrUpdateChild("indicator-title",Object.assign(Object.assign({},Jw(h)),{visible:i.visible,x:0,y:0}),"richtext"):this._title=l.createOrUpdateChild("indicator-title",Object.assign(Object.assign({},h),{lineHeight:z(h.lineHeight)?h.lineHeight:h.fontSize,visible:i.visible,x:0,y:0}),"text"),i.autoFit&&st(o)&&this._setLocalAutoFit(o,this._title,i),i.autoLimit&&st(a)&&this._title.setAttribute("maxLineWidth",o)}else{const h=l.find(c=>c.name==="indicator-title",!1);h&&l.removeChild(h),this._title=void 0}if(z(r)){const h=ot(r),c=[];h.forEach((d,p)=>{if(d.visible!==!1){const f=gt({},le(cW,"content.style"),d.style);let g;g=$L(f)?l.createOrUpdateChild("indicator-content-"+p,Object.assign(Object.assign({},Jw(f)),{visible:i.visible,x:0,y:0}),"richtext"):l.createOrUpdateChild("indicator-content-"+p,Object.assign(Object.assign({},f),{lineHeight:z(f.lineHeight)?f.lineHeight:f.fontSize,visible:d.visible,x:0,y:0}),"text"),d.autoFit&&st(o)&&this._setLocalAutoFit(o,g,d),d.autoLimit&&st(a)&&g.setAttribute("maxLineWidth",o),c.push(g)}else{const f=l.find(g=>g.name==="indicator-content-"+p,!1);f&&l.removeChild(f)}}),this._content=c}this._setGlobalAutoFit(o),this._setYPosition();const u=(t=l==null?void 0:l.AABBBounds.height())!==null&&t!==void 0?t:0;l.setAttribute("y",s.height/2-u/2),l.setAttribute("x",s.width/2)}_setLocalAutoFit(t,e,i){var r,s,a,o,l,u,h,c,d;if(((r=i.fitStrategy)!==null&&r!==void 0?r:"default")!=="default")return;const p=B2((a=(s=i.style)===null||s===void 0?void 0:s.text)!==null&&a!==void 0?a:"",(o=i.style)!==null&&o!==void 0?o:{},(u=(l=this.stage)===null||l===void 0?void 0:l.getTheme())===null||u===void 0?void 0:u.text).width;if(p>0){const f=t*((h=i.fitPercent)!==null&&h!==void 0?h:.5)/p,g=Math.floor(((d=(c=i.style)===null||c===void 0?void 0:c.fontSize)!==null&&d!==void 0?d:20)*f);e.setAttribute("fontSize",g),e.setAttribute("lineHeight",z(i.style.lineHeight)?i.style.lineHeight:g)}}_setGlobalAutoFit(t){var e,i,r,s,a,o,l;const u=t/2,h=[];let c=0;const d=(e=this.attribute.title)!==null&&e!==void 0?e:{};d.autoFit&&d.fitStrategy==="inscribed"?(this._title.setAttribute("fontSize",12),h.push({text:this._title,spec:(i=this.attribute.title)!==null&&i!==void 0?i:{}})):c+=(o=(a=(s=(r=this._title)===null||r===void 0?void 0:r.AABBBounds)===null||s===void 0?void 0:s.height)===null||a===void 0?void 0:a.call(s))!==null&&o!==void 0?o:0;const p=(l=d.space)!==null&&l!==void 0?l:0;if(c+=p,ot(this.attribute.content).filter(A=>A.visible!==!1).forEach((A,w)=>{var C,k,M,P;const E=this._content[w];A.autoFit&&A.fitStrategy==="inscribed"?(E.setAttribute("fontSize",12),h.push({text:E,spec:A})):c+=(M=(k=(C=E==null?void 0:E.AABBBounds)===null||C===void 0?void 0:C.height)===null||k===void 0?void 0:k.call(C))!==null&&M!==void 0?M:0;const I=(P=A.space)!==null&&P!==void 0?P:0;c+=I}),h.length<=0)return;const f=12/h.reduce((A,w)=>Math.max(A,w.text.AABBBounds.width()),0)*h.length,g=c/2,_=f**2+1,v=2*g*f,y=g**2-u**2,b=2*(f*((-v+Math.sqrt(v**2-4*_*y))/(2*_))+g),S=(b-c)/h.length;st(b)&&h.forEach(A=>{var w;const C=(w=A.spec.style)===null||w===void 0?void 0:w.lineHeight;A.text.setAttribute("fontSize",S),A.text.setAttribute("lineHeight",z(C)?C:S)})}_setYPosition(){var t,e,i,r,s,a;let o=0;const l=(r=(i=(e=(t=this._title)===null||t===void 0?void 0:t.AABBBounds)===null||e===void 0?void 0:e.height)===null||i===void 0?void 0:i.call(e))!==null&&r!==void 0?r:0,u=(a=(s=this.attribute.title)===null||s===void 0?void 0:s.space)!==null&&a!==void 0?a:0;ot(this.attribute.content).filter(h=>h.visible!==!1).forEach((h,c)=>{var d;const p=this._content[c];p.setAttribute("y",l+u+o);const f=(d=h.space)!==null&&d!==void 0?d:0;o+=p.AABBBounds.height()+f})}};const $Ft="M 414.5 0.0238 c 228.9128 0 414.4762 185.5634 414.4762 414.4762 s -185.5634 414.4762 -414.4762 414.4762 S 0.0238 643.4128 0.0238 414.5 S 185.5872 0.0238 414.5 0.0238 z m 0 73.1429 C 225.9865 73.1667 73.1667 225.9865 73.1667 414.5 s 152.8198 341.3333 341.3333 341.3333 s 341.3333 -152.8198 341.3333 -341.3333 S 603.0135 73.1667 414.5 73.1667 z m -73.1429 161.4994 a 48.7619 48.7619 0 0 1 25.9901 7.5093 l 201.7524 127.1223 a 48.7619 48.7619 0 0 1 0.3657 82.2613 l -201.7524 129.6335 A 48.7619 48.7619 0 0 1 292.5952 540.1838 v -256.7314 a 48.7619 48.7619 0 0 1 48.7619 -48.7619 z m 24.381 92.9402 v 167.9116 l 131.9497 -84.7726 L 365.7381 327.6063 z",GFt="M 414.5 0.0238 c 228.9128 0 414.4762 185.5634 414.4762 414.4762 s -185.5634 414.4762 -414.4762 414.4762 S 0.0238 643.4128 0.0238 414.5 S 185.5872 0.0238 414.5 0.0238 z m 0 73.1429 C 225.9865 73.1667 73.1667 225.9865 73.1667 414.5 s 152.8198 341.3333 341.3333 341.3333 s 341.3333 -152.8198 341.3333 -341.3333 S 603.0135 73.1667 414.5 73.1667 z m -48.7619 195.0476 v 316.9524 h -73.1429 V 268.2143 h 73.1429 z m 158.4762 0 v 316.9524 h -73.1429 V 268.2143 h 73.1429 z",UFt="M 521.29 734.276 L 230.929 448.019 L 521.29 161.762 c 37.685 -37.153 38.003 -97.625 0.707 -134.384 c -37.297 -36.758 -98.646 -36.435 -136.331 0.718 l -357.43 352.378 c -0.155 0.153 -0.297 0.314 -0.451 0.468 c -0.084 0.082 -0.172 0.157 -0.256 0.239 c -18.357 18.092 -27.581 41.929 -27.743 65.902 c -0.004 0.311 -0.017 0.623 -0.018 0.934 c 0.001 0.316 0.014 0.632 0.018 0.948 c 0.165 23.97 9.389 47.803 27.743 65.892 c 0.083 0.082 0.171 0.157 0.255 0.239 c 0.154 0.154 0.296 0.315 0.452 0.468 l 357.43 352.378 c 37.685 37.153 99.034 37.476 136.331 0.718 c 37.297 -36.758 36.979 -97.231 -0.707 -134.384 z",YFt="M 734.276 28.71 L 448.019 319.071 L 161.762 28.71 c -37.153 -37.685 -97.625 -38.003 -134.384 -0.707 c -36.758 37.297 -36.435 98.646 0.718 136.331 l 352.378 357.43 c 0.153 0.155 0.314 0.297 0.468 0.451 c 0.082 0.084 0.157 0.172 0.239 0.256 c 18.092 18.357 41.929 27.581 65.902 27.743 c 0.311 0.004 0.623 0.017 0.934 0.018 c 0.316 -0.001 0.632 -0.014 0.948 -0.018 c 23.97 -0.165 47.803 -9.389 65.892 -27.743 c 0.082 -0.083 0.157 -0.171 0.239 -0.255 c 0.154 -0.154 0.315 -0.296 0.468 -0.452 l 352.378 -357.43 c 37.153 -37.685 37.476 -99.034 0.718 -136.331 c -36.758 -37.297 -97.231 -36.979 -134.384 0.707 z",XFt="m 161.724 521.29 l 286.257 -290.361 l 286.257 290.361 c 37.153 37.685 97.625 38.003 134.384 0.707 c 36.758 -37.297 36.435 -98.646 -0.718 -136.331 l -352.378 -357.43 c -0.153 -0.155 -0.314 -0.297 -0.468 -0.451 c -0.082 -0.084 -0.157 -0.172 -0.239 -0.256 c -18.092 -18.357 -41.929 -27.581 -65.902 -27.743 c -0.311 -0.004 -0.623 -0.017 -0.934 -0.018 c -0.316 0.001 -0.632 0.014 -0.948 0.018 c -23.97 0.165 -47.803 9.389 -65.892 27.743 c -0.082 0.083 -0.157 0.171 -0.239 0.255 c -0.154 0.154 -0.315 0.296 -0.468 0.452 l -352.378 357.43 c -37.153 37.685 -37.476 99.034 -0.718 136.331 c 36.758 37.297 97.231 36.979 134.384 -0.707 z",KFt="M 30 163 L 320.361 449.257 L 30 735.514 c -37.685 37.153 -38.003 97.625 -0.707 134.384 c 37.297 36.758 98.646 36.435 136.331 -0.718 l 357.43 -352.378 c 0.155 -0.153 0.297 -0.314 0.451 -0.468 c 0.084 -0.082 0.172 -0.157 0.256 -0.239 c 18.357 -18.092 27.581 -41.929 27.743 -65.902 c 0.004 -0.311 0.017 -0.623 0.018 -0.934 c -0.001 -0.316 -0.014 -0.632 -0.018 -0.948 c -0.165 -23.97 -9.389 -47.803 -27.743 -65.892 c -0.083 -0.082 -0.171 -0.157 -0.255 -0.239 c -0.154 -0.154 -0.296 -0.315 -0.452 -0.468 l -357.43 -352.378 c -37.685 -37.153 -99.034 -37.476 -136.331 -0.718 c -37.297 36.758 -36.979 97.231 0.707 134.384 z";class RE extends uy{constructor(t){super(t)}}var Is;(function(n){n.OnPlay="onPlay",n.OnPause="onPause",n.OnForward="onForward",n.OnBackward="onBackward"})(Is||(Is={}));var Kf;(function(n){n.Start="start",n.Pause="pause",n.Forward="forward",n.Backward="backward"})(Kf||(Kf={}));class ou extends Nn{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},ou.defaultAttributes,t)),this._isPaused=!0,this.updateAttributes=()=>{this._startAttr={style:Object.assign(Object.assign(Object.assign({symbolType:$Ft},ou.defaultControllerAttr),{visible:this.attribute.start.visible}),this.attribute.start.style)},this._pauseAttr={style:Object.assign(Object.assign(Object.assign({symbolType:GFt},ou.defaultControllerAttr),{visible:this.attribute.pause.visible}),this.attribute.pause.style)},this._forwardAttr={style:Object.assign(Object.assign(Object.assign({},ou.defaultControllerAttr),{visible:this.attribute.forward.visible}),this.attribute.forward.style)},this._backwardAttr={style:Object.assign(Object.assign(Object.assign({},ou.defaultControllerAttr),{visible:this.attribute.backward.visible}),this.attribute.backward.style)},this.updateLayout()},this.updateLayout=()=>{var i,r,s,a;this._layout=this.attribute.layout,this._layout==="horizontal"?(this._backwardAttr.style.symbolType=(i=this._backwardAttr.style.symbolType)!==null&&i!==void 0?i:UFt,this._forwardAttr.style.symbolType=(r=this._forwardAttr.style.symbolType)!==null&&r!==void 0?r:KFt):this._layout==="vertical"&&(this._backwardAttr.style.symbolType=(s=this._backwardAttr.style.symbolType)!==null&&s!==void 0?s:XFt,this._forwardAttr.style.symbolType=(a=this._forwardAttr.style.symbolType)!==null&&a!==void 0?a:YFt)},this._initPlay=()=>{F(this._playController)&&(this._playController=new RE(Object.assign({},this._startAttr.style)),this.add(this._playController))},this._initBackward=()=>{F(this._backwardController)&&(this._backwardController=new RE(Object.assign({},this._backwardAttr.style)),this.add(this._backwardController))},this._initForward=()=>{F(this._forwardController)&&(this._forwardController=new RE(Object.assign({},this._forwardAttr.style)),this.add(this._forwardController))},this._initEvents=()=>{this.attribute.disableTriggerEvent||(this._playController.addEventListener("pointerdown",i=>{i.stopPropagation(),this._isPaused===!0?this.play():this.pause()}),this._backwardController.addEventListener("pointerdown",i=>{i.stopPropagation(),this.backward()}),this._forwardController.addEventListener("pointerdown",i=>{i.stopPropagation(),this.forward()}))},this.renderPlay=()=>{this._isPaused?this._playController.setAttributes(Object.assign({symbolType:this._playController.getComputedAttribute("symbolType")},this._startAttr.style)):this._playController.setAttributes(Object.assign({symbolType:this._playController.getComputedAttribute("symbolType")},this._pauseAttr.style))},this.renderBackward=()=>{this._backwardController.setAttributes(this._backwardAttr.style)},this.renderForward=()=>{this._forwardController.setAttributes(this._forwardAttr.style)},this.play=()=>{this._dispatchEvent(Is.OnPlay)},this.pause=()=>{this._dispatchEvent(Is.OnPause)},this.forward=()=>{this._dispatchEvent(Is.OnForward)},this.backward=()=>{this._dispatchEvent(Is.OnBackward)},this.togglePlay=()=>{this._playController.setAttributes(this._startAttr.style),this._isPaused=!0},this.togglePause=()=>{this._playController.setAttributes(this._pauseAttr.style),this._isPaused=!1},this.updateAttributes(),this._initPlay(),this._initBackward(),this._initForward(),this._initEvents()}render(){this.updateAttributes(),this.renderPlay(),this.renderBackward(),this.renderForward()}}ou.defaultControllerAttr={visible:!0,x:0,y:0,size:20,fill:"#91caff",pickMode:"imprecise",cursor:"pointer"},ou.defaultAttributes={[Kf.Start]:{},[Kf.Pause]:{},[Kf.Backward]:{},[Kf.Forward]:{}};const Fx={visible:!0,style:{x:0,y:0,dx:0,dy:0,size:20},order:0,space:10},IE=[200,10];var yc;(function(n){n.Default="default",n.Reverse="reverse"})(yc||(yc={}));var qi;(function(n){n.change="change",n.play="play",n.pause="pause",n.backward="backward",n.forward="forward",n.end="end",n.OnChange="change",n.OnPlay="play",n.OnPause="pause",n.OnBackward="backward",n.OnForward="forward",n.OnEnd="end"})(qi||(qi={}));const qFt=({direction:n,maxIndex:t,dataIndex:e})=>n===yc.Default&&e===t,ZFt=({direction:n,minIndex:t,dataIndex:e})=>n===yc.Reverse&&e===t,JFt=({direction:n,maxIndex:t,minIndex:e,dataIndex:i})=>qFt({direction:n,maxIndex:t,dataIndex:i})||ZFt({direction:n,minIndex:e,dataIndex:i}),QFt=({direction:n,minIndex:t,dataIndex:e})=>n===yc.Default&&e===t,t5t=({direction:n,maxIndex:t,dataIndex:e})=>n===yc.Reverse&&e===t,e5t=({direction:n,maxIndex:t,minIndex:e,dataIndex:i})=>QFt({direction:n,minIndex:e,dataIndex:i})||t5t({direction:n,maxIndex:t,dataIndex:i}),Qo=n=>n==="top"||n==="bottom",i5t=(n,t,e,i)=>n==="default"?Math.min(t+1,i):Math.max(t-1,e);class M1 extends Nn{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},M1.defaultAttributes,t)),this._data=[],this._dataIndex=0,this._layoutInfo={},this._updateSliderAttrs=()=>{var i,r;let s;st(this._handlerStyle.size)?s=this._handlerStyle.size:this._handlerStyle.size&&this._handlerStyle.size.length&&(s=ls(this._handlerStyle.size[0],this._handlerStyle.size[1]));const a={visible:this._sliderVisible,min:this._minIndex,max:this._maxIndex,value:this._dataIndex,railWidth:this._railStyle.width,railHeight:this._railStyle.height,railStyle:this._railStyle,trackStyle:this._trackStyle,handlerSize:st(s)?s:void 0,handlerStyle:this._handlerStyle,dy:this.attribute.slider.dy,dx:this.attribute.slider.dx,slidable:!0,range:!1,handlerText:{visible:!1},startText:{visible:!1},endText:{visible:!1},disableTriggerEvent:this.attribute.disableTriggerEvent};if(Qo(this._orient)){const o=Math.max(0,this._layoutInfo.slider.size),l=(i=this._railStyle.height)!==null&&i!==void 0?i:IE[1];a.layout="horizontal",a.railHeight=l,a.railWidth=o,a.x=this._layoutInfo.slider.x,a.y=this._layoutInfo.slider.y}else{const o=Math.max(0,this._layoutInfo.slider.size),l=(r=this._railStyle.width)!==null&&r!==void 0?r:IE[1];a.layout="vertical",a.railWidth=l,a.railHeight=o,a.x=this._layoutInfo.slider.x,a.y=this._layoutInfo.slider.y}return a},this._initSlider=()=>{const i=this._updateSliderAttrs();this._slider=new Fm(i),this._sliderVisible&&this.add(this._slider)},this._updateControllerAttrs=()=>{const i={start:this._start,pause:this._pause,forward:this._forward,backward:this._backward,disableTriggerEvent:this.attribute.disableTriggerEvent};return Qo(this._orient)?(i.layout="horizontal",i.start=Object.assign(Object.assign({},i.start),{style:Object.assign(Object.assign({},i.start.style),{x:this._layoutInfo.start.x,y:this._layoutInfo.start.y})}),i.pause=Object.assign(Object.assign({},i.pause),{style:Object.assign(Object.assign({},i.pause.style),{x:this._layoutInfo.start.x,y:this._layoutInfo.start.y})}),i.backward=Object.assign(Object.assign({},i.backward),{style:Object.assign(Object.assign({},i.backward.style),{x:this._layoutInfo.backward.x,y:this._layoutInfo.backward.y})}),i.forward=Object.assign(Object.assign({},i.forward),{style:Object.assign(Object.assign({},i.forward.style),{x:this._layoutInfo.forward.x,y:this._layoutInfo.forward.y})})):(i.layout="vertical",i.start=Object.assign(Object.assign({},i.start),{style:Object.assign(Object.assign({},i.start.style),{x:this._layoutInfo.start.x,y:this._layoutInfo.start.y})}),i.pause=Object.assign(Object.assign({},i.pause),{style:Object.assign(Object.assign({},i.pause.style),{x:this._layoutInfo.start.x,y:this._layoutInfo.start.y})}),i.backward=Object.assign(Object.assign({},i.backward),{style:Object.assign(Object.assign({},i.backward.style),{x:this._layoutInfo.backward.x,y:this._layoutInfo.backward.y})}),i.forward=Object.assign(Object.assign({},i.forward),{style:Object.assign(Object.assign({},i.forward.style),{x:this._layoutInfo.forward.x,y:this._layoutInfo.forward.y})})),i},this._initController=()=>{const i=this._updateControllerAttrs();this._controller=new ou(i),this._controllerVisible&&this.add(this._controller)},this._initAttributes(),this._initDataIndex(),this._initLayoutInfo(),this._initController(),this._initSlider()}_initAttributes(){this._size=this.attribute.size,this._orient=this.attribute.orient,this._data=this.attribute.data,this._minIndex=0,this._maxIndex=this._data.length-1;const{slider:t={},controller:e={}}=this.attribute;this._sliderVisible=t.visible,this._railStyle=Object.assign({},t.railStyle),this._trackStyle=Object.assign({},t.trackStyle),this._handlerStyle=Object.assign({},t.handlerStyle),this._controllerVisible=e.visible,this._start=Object.assign({},e.start),this._pause=Object.assign({},e.pause),this._forward=Object.assign({},e.forward),this._backward=Object.assign({},e.backward)}_initDataIndex(){var t;this._dataIndex=(t=this.attribute.dataIndex)!==null&&t!==void 0?t:0}_initLayoutInfo(){var t,e,i;const r=[this._start,this._backward,this._forward].sort((d,p)=>d.order-p.order),s=r.filter(d=>d.position!=="end"),a=r.filter(d=>d.position==="end"),o=(t=Qo(this._orient)?this._railStyle.height:this._railStyle.width)!==null&&t!==void 0?t:IE[1],l=r.reduce((d,p)=>{const f=p.style.size,g=Mt(f)?f:ls(f[0],f[1]);return d+p.space+g},0),u=this._sliderVisible?(Qo(this._orient)?(e=this._size)===null||e===void 0?void 0:e.width:(i=this._size)===null||i===void 0?void 0:i.height)-l:0,h=u-this.attribute.slider.space,c=s.reduce((d,p)=>{const{key:f,space:g,style:{size:_}}=p,v=Mt(_)?_:ls(_[0],_[1]);return this._layoutInfo[f]=Object.assign(Object.assign({},this._layoutInfo[f]),{size:v,x:Qo(this._orient)?d+g:(this._size.width-v)/2,y:Qo(this._orient)?(this._size.height-v)/2:d+g}),d+g+v},0);this._layoutInfo.slider=Object.assign(Object.assign({},this._layoutInfo.slider),{size:h,x:Qo(this._orient)?c+this.attribute.slider.space:(this._size.width-o)/2,y:Qo(this._orient)?(this._size.height-o)/2:c+this.attribute.slider.space}),a.reduce((d,p)=>{const{key:f,space:g,style:{size:_}}=p,v=Mt(_)?_:ls(_[0],_[1]);return this._layoutInfo[f]=Object.assign(Object.assign({},this._layoutInfo[f]),{size:v,x:Qo(this._orient)?d+g:(this._size.width-v)/2,y:Qo(this._orient)?(this._size.height-v)/2:d+g}),d+g+v},c+u)}render(){this._initLayoutInfo(),this.renderSlider(),this.renderController()}renderSlider(){const t=this._updateSliderAttrs();this._slider.setAttributes(t)}renderController(){const t=this._updateControllerAttrs();this._controller.setAttributes(t)}dispatchCustomEvent(t,e){this._dispatchEvent(t,{eventType:t,index:e,value:this._data[e]})}}M1.defaultAttributes={visible:!0,data:[],interval:1e3,orient:"bottom",align:"center",size:{height:20,width:300},slider:{visible:!0,space:10,dx:0,dy:0,railStyle:{cornerRadius:5},trackStyle:{},handlerStyle:{}},controller:{visible:!0,start:Object.assign(Object.assign({},Fx),{key:"start",position:"start",space:0}),pause:Object.assign(Object.assign({},Fx),{key:"pause",position:"start"}),forward:Object.assign(Object.assign({},Fx),{key:"forward",position:"end"}),backward:Object.assign(Object.assign({},Fx),{key:"backward",position:"start"})}};function _tt(){J2(),rn(),no()}function n5t(){_tt()}function r5t(){_tt()}n5t();class s5t extends M1{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},t)),this._activeIndex=-1,this._isReachEnd=!1,this._initAttributes=()=>{var i,r,s;super._initAttributes(),this._alternate=(i=this.attribute.alternate)!==null&&i!==void 0&&i,this._interval=(r=this.attribute.interval)!==null&&r!==void 0?r:1e3,this._direction=(s=this.attribute.direction)!==null&&s!==void 0?s:yc.Default},this._initDataIndex=()=>{var i;this._dataIndex=F(this.attribute.dataIndex)?this._direction==="default"?this._minIndex:this._maxIndex:(i=this.attribute.dataIndex)!==null&&i!==void 0?i:0,this._slider.setAttribute("value",this._dataIndex)},this._initEvents=()=>{this.attribute.disableTriggerEvent||(this._controller.addEventListener(Is.OnPlay,i=>{i.stopPropagation(),this.play()}),this._controller.addEventListener(Is.OnPause,i=>{i.stopPropagation(),this.pause()}),this._controller.addEventListener(Is.OnForward,i=>{i.stopPropagation(),this.forward()}),this._controller.addEventListener(Is.OnBackward,i=>{i.stopPropagation(),this.backward()}),this._slider.addEventListener("change",i=>{const r=Math.floor(i.detail.value)+.5;this._dataIndex=i.detail.value>=r?Math.ceil(i.detail.value):Math.floor(i.detail.value),this._slider.setValue(this._dataIndex),this.dispatchCustomEvent(qi.change)}))},this.play=()=>{this._isPlaying||this._data.length!==1&&(this._controller.togglePause(),this._isPlaying=!0,(JFt({dataIndex:this._dataIndex,maxIndex:this._maxIndex,minIndex:this._minIndex,direction:this._direction})||e5t({dataIndex:this._dataIndex,maxIndex:this._maxIndex,minIndex:this._minIndex,direction:this._direction}))&&(this._direction===yc.Default?this._updateDataIndex(this._minIndex):this._updateDataIndex(this._maxIndex)),this.dispatchCustomEvent(qi.play),this._isReachEnd=!1,this._tickTime=Date.now(),this._rafId=_e.getRequestAnimationFrame()(this._play.bind(this,!0)))},this._play=i=>{const r=Date.now();if(this._isReachEnd&&r-this._tickTime>=this._interval)return this._isReachEnd=!1,void this._playEnd();i&&this._activeIndex!==this._dataIndex?(this.dispatchCustomEvent(qi.change),this._activeIndex=this._dataIndex):r-this._tickTime>=this._interval&&(this._tickTime=r,this._updateDataIndex(i5t(this._direction,this._dataIndex,this._minIndex,this._maxIndex)),this._activeIndex=this._dataIndex,this.dispatchCustomEvent(qi.change)),(this._direction==="default"&&this._dataIndex>=this._maxIndex||this._direction==="reverse"&&this._dataIndex<=this._minIndex)&&(this._isReachEnd=!0),this._rafId=_e.getRequestAnimationFrame()(this._play.bind(this,!1))},this._updateDataIndex=i=>{this._dataIndex=i,this._slider.setValue(this._dataIndex)},this._playEnd=()=>{this._isPlaying=!1,this._controller.togglePlay(),_e.getCancelAnimationFrame()(this._rafId),this._activeIndex=-1,this.dispatchCustomEvent(qi.end)},this.pause=()=>{this._isPlaying&&(this._isPlaying=!1,_e.getCancelAnimationFrame()(this._rafId),this._controller.togglePlay(),this.dispatchCustomEvent(qi.pause))},this.backward=()=>{const{loop:i=!1}=this.attribute;let r;r=i?this._dataIndex-1<this._minIndex?this._maxIndex:this._dataIndex-1:Math.max(this._dataIndex-1,this._minIndex),this._updateDataIndex(r),this.dispatchCustomEvent(qi.change),this.dispatchCustomEvent(qi.backward)},this.forward=()=>{const{loop:i=!1}=this.attribute;let r;r=i?this._dataIndex+1>this._maxIndex?this._minIndex:this._dataIndex+1:Math.min(this._dataIndex+1,this._maxIndex),this._updateDataIndex(r),this.dispatchCustomEvent(qi.change),this.dispatchCustomEvent(qi.forward)},this._initAttributes(),this._initDataIndex(),this._initEvents()}setAttributes(t,e){super.setAttributes(t,e),this._initAttributes()}dispatchCustomEvent(t){super.dispatchCustomEvent(t,this._dataIndex)}}var a5t=function(n,t,e,i){return new(e||(e=Promise))(function(r,s){function a(u){try{l(i.next(u))}catch(h){s(h)}}function o(u){try{l(i.throw(u))}catch(h){s(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof e?h:new e(function(c){c(h)})).then(a,o)}l((i=i.apply(n,t||[])).next())})};r5t();class o5t extends M1{constructor(t){super(t),this._isPlaying=!1,this._startTime=Date.now(),this._initAttributes=()=>{var e;super._initAttributes(),this._maxIndex=this._data.length,this._slider.setAttribute("max",this._maxIndex),this._isPlaying=!1,this._elapsed=0,this._interval=(e=this.attribute.interval)!==null&&e!==void 0?e:1e3;const i=this._data.length;this.attribute.totalDuration&&this._data.length?(this._totalDuration=this.attribute.totalDuration,this._interval=this._totalDuration/(i??1)):(this._totalDuration=this._interval*i,this._interval=this.attribute.interval)},this._initDataIndex=()=>{var e;this._dataIndex=(e=this.attribute.dataIndex)!==null&&e!==void 0?e:this._minIndex},this._initEvents=()=>{this.attribute.disableTriggerEvent||(this._controller.addEventListener(Is.OnPlay,e=>{e.stopPropagation(),this.play()}),this._controller.addEventListener(Is.OnPause,e=>{e.stopPropagation(),this.pause()}),this._controller.addEventListener(Is.OnForward,e=>{e.stopPropagation(),this.forward()}),this._controller.addEventListener(Is.OnBackward,e=>{e.stopPropagation(),this.backward()}),this._slider.addEventListener("change",e=>{var i;e.stopPropagation();const r=(i=e.detail)===null||i===void 0?void 0:i.value,s=r/this._maxIndex;this._elapsed=s*this._totalDuration,this._startTime=Date.now()-this._elapsed,this._dispatchChange(r)}))},this._getSliderValue=()=>{const e=this._elapsed/this._totalDuration;return Math.min(e*this._maxIndex,this._maxIndex)},this._updateSlider=()=>{const e=this._getSliderValue();this._dataIndex=Math.floor(e),this._slider.setValue(Math.min(e,this._maxIndex)),this._dispatchChange(Math.floor(e))},this._dispatchChange=e=>{const i=Math.floor(e);i!==this._activeIndex&&(this._dataIndex=i,this._activeIndex=i,i!==this._maxIndex&&this.dispatchCustomEvent(qi.change))},this.play=()=>a5t(this,void 0,void 0,function*(){this._isPlaying||(this._controller.togglePause(),this._isPlaying=!0,this._elapsed>=this._totalDuration&&(this._elapsed=0),this._startTime=Date.now()-this._elapsed,this.dispatchCustomEvent(qi.play),this._rafId=_e.getRequestAnimationFrame()(this._play.bind(this)))}),this._play=()=>{this._elapsed=Date.now()-this._startTime;const e=this._getSliderValue();this._updateSlider(),e>=this._maxIndex?this._playEnd():this._rafId=_e.getRequestAnimationFrame()(this._play.bind(this))},this._playEnd=()=>{this._isPlaying=!1,_e.getCancelAnimationFrame()(this._rafId),this._controller.togglePlay(),this.dispatchCustomEvent(qi.end)},this.pause=()=>{this._isPlaying&&(this._isPlaying=!1,this._elapsed=Date.now()-this._startTime,_e.getCancelAnimationFrame()(this._rafId),this._controller.togglePlay(),this.dispatchCustomEvent(qi.pause))},this.backward=()=>{const e=Date.now(),i=1*this._interval,r=this._elapsed-i;r<=0?(this._elapsed=0,this._startTime=e):(this._elapsed=r,this._startTime=this._startTime+this._interval),this._updateSlider(),this.dispatchCustomEvent(qi.backward)},this.forward=()=>{const e=Date.now(),i=1*this._interval,r=this._elapsed+i;r>=this._totalDuration?(this._startTime=e-this._totalDuration,this._elapsed=this._totalDuration):(this._startTime=this._startTime-i,this._elapsed=r),this._updateSlider(),this.dispatchCustomEvent(qi.forward)},this._initAttributes(),this._initDataIndex(),this._initEvents()}dispatchCustomEvent(t){super.dispatchCustomEvent(t,this._dataIndex)}render(){super.render()}}var Fr;(function(n){n.drawStart="drawStart",n.drawEnd="drawEnd",n.drawing="drawing",n.moving="moving",n.moveStart="moveStart",n.moveEnd="moveEnd",n.brushClear="brushClear"})(Fr||(Fr={}));const Yl={trigger:"pointerdown",updateTrigger:"pointermove",endTrigger:"pointerup",resetTrigger:"pointerupoutside",hasMask:!0,brushMode:"single",brushType:"rect",brushStyle:{fill:"#B0C8F9",fillOpacity:.2,stroke:"#B0C8F9",strokeWidth:2},brushMoved:!0,removeOnClick:!0,delayType:"throttle",delayTime:10,interactiveRange:{y1:-1/0,y2:1/0,x1:-1/0,x2:1/0}},l5t=5;function u5t(){rn(),D2()}const h5t={debounce:Ml,throttle:Pc};u5t();let ytt=class btt extends Nn{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},btt.defaultAttributes,t)),this.name="brush",this._activeDrawState=!1,this._cacheDrawPoints=[],this._isDrawedBeforeEnd=!1,this._activeMoveState=!1,this._operatingMaskMoveDx=0,this._operatingMaskMoveDy=0,this._operatingMaskMoveRangeX=[-1/0,1/0],this._operatingMaskMoveRangeY=[-1/0,1/0],this._brushMaskAABBBoundsDict={},this._onBrushStart=i=>{var r;if(this._outOfInteractiveRange(i))return;i.stopPropagation();const s=(r=this.attribute.brushMoved)===null||r===void 0||r;this._activeMoveState=s&&this._isPosInBrushMask(i),this._activeDrawState=!this._activeMoveState,this._activeDrawState&&this._initDraw(i),this._activeMoveState&&this._initMove(i)},this._onBrushing=i=>{this._outOfInteractiveRange(i)||((this._activeDrawState||this._activeMoveState)&&i.stopPropagation(),this._activeDrawState&&this._drawing(i),this._activeMoveState&&this._moving(i))},this._onBrushingWithDelay=this.attribute.delayTime===0?this._onBrushing:h5t[this.attribute.delayType](this._onBrushing,this.attribute.delayTime),this._onBrushEnd=i=>{var r;if(!this._activeDrawState&&!this._activeMoveState)return;i.preventDefault();const{removeOnClick:s=!0}=this.attribute;this._activeDrawState&&!this._isDrawedBeforeEnd&&s?(!((r=this._operatingMask)===null||r===void 0)&&r._AABBBounds.empty()&&this._dispatchEvent(Fr.brushClear,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:i}),this._container.incrementalClearChild(),this._brushMaskAABBBoundsDict={}):(this._activeDrawState&&this._dispatchEvent(Fr.drawEnd,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:i}),this._activeMoveState&&this._dispatchEvent(Fr.moveEnd,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:i})),this._activeDrawState=!1,this._activeMoveState=!1,this._isDrawedBeforeEnd=!1,this._operatingMask&&this._operatingMask.setAttribute("pickable",!1)}}_bindBrushEvents(){if(this.attribute.disableTriggerEvent)return;const{trigger:t=Yl.trigger,updateTrigger:e=Yl.updateTrigger,endTrigger:i=Yl.endTrigger,resetTrigger:r=Yl.resetTrigger}=this.attribute;this.stage.addEventListener(t,this._onBrushStart),this.stage.addEventListener(e,this._onBrushingWithDelay),this.stage.addEventListener(i,this._onBrushEnd),this.stage.addEventListener(r,this._onBrushEnd)}_isPosInBrushMask(t){const e=this.eventPosToStagePos(t),i=this._container.getChildren();for(let r=0;r<i.length;r++){const{points:s=[],dx:a=0,dy:o=0}=i[r].attribute,l=s.map(u=>({x:u.x+a,y:u.y+o}));if(vd(l,e.x,e.y))return this._operatingMask=i[r],!0}return!1}_initDraw(t){const{brushMode:e}=this.attribute,i=this.eventPosToStagePos(t);this._cacheDrawPoints=[i],this._isDrawedBeforeEnd=!1,e==="single"&&(this._brushMaskAABBBoundsDict={},this._container.incrementalClearChild()),this._addBrushMask(),this._dispatchEvent(Fr.drawStart,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:t})}_initMove(t){var e,i;this._cacheMovePoint=this.eventPosToStagePos(t),this._operatingMaskMoveDx=(e=this._operatingMask.attribute.dx)!==null&&e!==void 0?e:0,this._operatingMaskMoveDy=(i=this._operatingMask.attribute.dy)!==null&&i!==void 0?i:0;const{interactiveRange:r}=this.attribute,{minY:s=-1/0,maxY:a=1/0,minX:o=-1/0,maxX:l=1/0}=r,{x1:u,x2:h,y1:c,y2:d}=this._operatingMask.globalAABBBounds,p=o-u,f=l-h,g=s-c,_=a-d;this._operatingMaskMoveRangeX=[p,f],this._operatingMaskMoveRangeY=[g,_],this._operatingMask.setAttribute("pickable",!0),this._dispatchEvent(Fr.moveStart,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:t})}_drawing(t){var e,i;const r=this.eventPosToStagePos(t),{sizeThreshold:s=l5t,brushType:a}=this.attribute,o=this._cacheDrawPoints.length;if(o>0){const p=(e=this._cacheDrawPoints[this._cacheDrawPoints.length-1])!==null&&e!==void 0?e:{};if(r.x===p.x&&r.y===p.y)return}a==="polygon"||o<=1?this._cacheDrawPoints.push(r):this._cacheDrawPoints[o-1]=r;const l=this._computeMaskPoints();this._operatingMask.setAttribute("points",l);const{x1:u=0,x2:h=0,y1:c=0,y2:d=0}=(i=this._operatingMask)===null||i===void 0?void 0:i._AABBBounds;this._isDrawedBeforeEnd=!this._operatingMask._AABBBounds.empty()&&(Math.abs(h-u)>s||Math.abs(c-d)>s),this._isDrawedBeforeEnd&&(this._brushMaskAABBBoundsDict[this._operatingMask.name]=this._operatingMask.AABBBounds,this._dispatchEvent(Fr.drawing,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:t}))}_moving(t){const e=this._cacheMovePoint,i=this.eventPosToStagePos(t);if(i.x===(e==null?void 0:e.x)&&i.y===(e==null?void 0:e.y))return;const r=i.x-e.x,s=i.y-e.y,a=Math.min(this._operatingMaskMoveRangeX[1],Math.max(this._operatingMaskMoveRangeX[0],r))+this._operatingMaskMoveDx,o=Math.min(this._operatingMaskMoveRangeY[1],Math.max(this._operatingMaskMoveRangeY[0],s))+this._operatingMaskMoveDy;this._operatingMask.setAttributes({dx:a,dy:o}),this._brushMaskAABBBoundsDict[this._operatingMask.name]=this._operatingMask.AABBBounds,this._dispatchEvent(Fr.moving,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:t})}_computeMaskPoints(){const{brushType:t,xRange:e=[0,0],yRange:i=[0,0]}=this.attribute;let r=[];const s=this._cacheDrawPoints[0],a=this._cacheDrawPoints[this._cacheDrawPoints.length-1];return r=t==="rect"?[s,{x:a.x,y:s.y},a,{x:s.x,y:a.y}]:t==="x"?[{x:s.x,y:i[0]},{x:a.x,y:i[0]},{x:a.x,y:i[1]},{x:s.x,y:i[1]}]:t==="y"?[{x:e[0],y:s.y},{x:e[0],y:a.y},{x:e[1],y:a.y},{x:e[1],y:s.y}]:cs(this._cacheDrawPoints),r}_addBrushMask(){var t;const{brushStyle:e,hasMask:i}=this.attribute,r=$t.polygon(Object.assign(Object.assign({points:cs(this._cacheDrawPoints),cursor:"move",pickable:!1},e),{opacity:i?(t=e.opacity)!==null&&t!==void 0?t:1:0}));r.name=`brush-${Date.now()}`,this._operatingMask=r,this._container.add(r),this._brushMaskAABBBoundsDict[r.name]=r.AABBBounds}_outOfInteractiveRange(t){const{interactiveRange:e}=this.attribute,{minY:i=-1/0,maxY:r=1/0,minX:s=-1/0,maxX:a=1/0}=e,o=this.eventPosToStagePos(t);return o.x>a||o.x<s||o.y>r||o.y<i}eventPosToStagePos(t){return this.stage.eventPointTransform(t)}render(){this._bindBrushEvents();const t=this.createOrUpdateChild("brush-container",{},"group");this._container=t}releaseBrushEvents(){const{delayType:t="throttle",delayTime:e=0,trigger:i=Yl.trigger,updateTrigger:r=Yl.updateTrigger,endTrigger:s=Yl.endTrigger,resetTrigger:a=Yl.resetTrigger}=this.attribute;this.stage.removeEventListener(i,this._onBrushStart),this.stage.removeEventListener(r,this._onBrushingWithDelay),this.stage.removeEventListener(s,this._onBrushEnd),this.stage.removeEventListener(a,this._onBrushEnd)}};ytt.defaultAttributes=Yl;const dW=(n,...t)=>{const e=[n.shape,...t.map(s=>s==null?void 0:s.shape)],i=[n.key,...t.map(s=>s==null?void 0:s.key)],r=[n.value,...t.map(s=>s==null?void 0:s.value)];return gt(n,...t,{shape:e.every(F)?void 0:gt({},...e),key:i.every(F)?void 0:gt({},...i),value:r.every(F)?void 0:gt({},...r)})},Zp=n=>{const{width:t,height:e,wordBreak:i="break-word",textAlign:r,textBaseline:s,text:a}=n;return Array.isArray(a)?{width:t,height:e,wordBreak:i,textAlign:r,textBaseline:s,singleLine:!1,textConfig:ot(a).map(o=>Object.assign(Object.assign({},n),{text:o}))}:{width:t,height:e,wordBreak:i,textAlign:r,textBaseline:s,singleLine:!1,textConfig:a==null?void 0:a.text}},c5t={panel:{visible:!0,cornerRadius:[3,3,3,3],fill:"white",shadow:!0,shadowBlur:12,shadowColor:"rgba(0, 0, 0, 0.1)",shadowOffsetX:0,shadowOffsetY:4,shadowSpread:0,stroke:"white"},titleStyle:{value:{fill:"#4E5969",fontFamily:O0,fontSize:14,lineHeight:18,textAlign:"left",textBaseline:"middle"},spaceRow:6},contentStyle:{shape:{fill:"black",size:8,symbolType:"circle",spacing:6},key:{fill:"#4E5969",fontFamily:O0,fontSize:12,lineHeight:18,textAlign:"left",textBaseline:"middle",spacing:26},value:{fill:"#4E5969",fontFamily:O0,fontSize:12,lineHeight:18,textAlign:"right",textBaseline:"middle",spacing:0},spaceRow:6},padding:10,positionX:"right",positionY:"bottom",offsetX:10,offsetY:10,parentBounds:new Ai().setValue(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),autoCalculatePosition:!0,autoMeasure:!0,pickable:!1,childrenPickable:!1,zIndex:500},d5t=["pointerX","pointerY","offsetX","offsetY","positionX","positionY","parentBounds"];function p5t(){rn(),Wu(),no(),Pl(),Oc()}p5t();let xtt=class ea extends Nn{constructor(t,e){super(e!=null&&e.skipDefault?t:gt({},ea.defaultAttributes,t),e),this.name="tooltip"}render(){var t;const{visible:e,content:i,panel:r,keyWidth:s,valueWidth:a,hasContentShape:o,autoCalculatePosition:l,autoMeasure:u,align:h}=this.attribute;if(!e)return void this.hideAll();u&&ea.measureTooltip(this.attribute),l&&ea.calculateTooltipPosition(this.attribute);const c=ds(this.attribute.padding);this._tooltipPanel=this.createOrUpdateChild("tooltip-background",Object.assign({visible:!0},r),"rect"),this._tooltipTitleContainer=this.createOrUpdateChild("tooltip-title",{visible:!0,x:c[3],y:c[0]},"group");const d=ea.getTitleAttr(this.attribute);this._tooltipTitleSymbol=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-shape",gt({symbolType:"circle"},d.shape,{visible:Xi(d)&&Xi(d.shape)}),"symbol"),typeof d.value.text!="object"||d.value.text===null||d.value.text.type!=="rich"&&d.value.text.type!=="html"?d.value.multiLine?this._tooltipTitle=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-value",Object.assign({visible:Xi(d)&&Xi(d.value)},Zp(d.value)),"richtext"):this._tooltipTitle=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-value",Object.assign({text:(t=d.value.text)!==null&&t!==void 0?t:"",visible:Xi(d)&&Xi(d.value)},d.value),"text"):d.value.text.type==="rich"?this._tooltipTitle=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-value",Object.assign({visible:Xi(d)&&Xi(d.value)},Zp(d.value)),"richtext"):d.value.text.type==="html"&&(this._tooltipTitle=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-value",Object.assign({html:Object.assign(Object.assign({dom:d.value.text.text},Kw),d.value),visible:Xi(d)&&Xi(d.value),width:d.value.width,height:d.value.height,wordBreak:d.value.wordBreak,textAlign:d.value.textAlign,textBaseline:d.value.textBaseline,singleLine:!1,textConfig:[]},d.value),"richtext"));const p=Xi(d.shape)?d.shape.size+d.shape.spacing:0,{textAlign:f,textBaseline:g}=d.value,_=r.width-c[3]-c[0]-p;f==="center"?this._tooltipTitle.setAttribute("x",p+_/2):f==="right"||f==="end"?this._tooltipTitle.setAttribute("x",p+_):this._tooltipTitle.setAttribute("x",p),g==="bottom"?this._tooltipTitle.setAttribute("y",d.height):g==="middle"?this._tooltipTitle.setAttribute("y",d.height/2):this._tooltipTitle.setAttribute("y",0);const v=Xi(d)?d.height+d.spaceRow:0;if(this._tooltipContent=this.createOrUpdateChild("tooltip-content",{visible:!0},"group"),this._tooltipContent.removeAllChild(!0),i&&i.length){this._tooltipContent.setAttribute("x",c[3]),this._tooltipContent.setAttribute("y",c[0]+v);let y=0;i.forEach((b,S)=>{const A=ea.getContentAttr(this.attribute,S);if(!Xi(A))return;const w=`tooltip-content-${S}`,C=this._tooltipContent.createOrUpdateChild(w,{visible:!0,x:0,y},"group"),k=A.shape.size+A.shape.spacing;let M=h==="right"?(o?k:0)+(Xi(A.key)?s+A.key.spacing:0)+(Xi(A.value)?a:0):0;this._createShape(h==="right"?M-A.shape.size/2:M+A.shape.size/2,A,C,w),o&&(h==="right"?M-=k:M+=k);const P=this._createKey(A,C,w);P&&(OV(h,P,A.key.textAlign,M,s),P.setAttribute("y",0),h==="right"?M-=s+A.key.spacing:M+=s+A.key.spacing);const E=this._createValue(A,C,w);if(E){let I="right";z(A.value.textAlign)?I=A.value.textAlign:Xi(A.key)||h==="right"||(I="left"),E.setAttribute("textAlign",I),OV(h,E,I,M,a),E.setAttribute("y",0)}y+=A.height+A.spaceRow})}}_createShape(t,e,i,r){var s;if(Xi(e.shape))return i.createOrUpdateChild(`${r}-shape`,Object.assign({visible:!0,x:t,y:e.shape.size/2+(((s=au(e.key.lineHeight,e.key.fontSize))!==null&&s!==void 0?s:e.key.fontSize)-e.shape.size)/2},e.shape),"symbol")}_createKey(t,e,i){var r;if(Xi(t.key)){let s;return s=t.key.multiLine?e.createOrUpdateChild(`${i}-key`,Object.assign(Object.assign({visible:!0},Zp(t.key)),{textBaseline:"top"}),"richtext"):typeof t.key.text!="object"||t.key.text===null||t.key.text.type!=="rich"&&t.key.text.type!=="html"?e.createOrUpdateChild(`${i}-key`,Object.assign(Object.assign({visible:!0,text:(r=t.key.text)!==null&&r!==void 0?r:""},t.key),{textBaseline:"top"}),"text"):t.key.text.type==="rich"?e.createOrUpdateChild(`${i}-value`,Object.assign(Object.assign({visible:!0},Zp(t.key)),{textBaseline:"top"}),"richtext"):e.createOrUpdateChild(`${i}-value`,{html:Object.assign(Object.assign({dom:t.key.text.text},Kw),t.key)},"richtext"),s}}_createValue(t,e,i){var r;if(Xi(t.value)){let s;return s=t.value.multiLine?e.createOrUpdateChild(`${i}-value`,Object.assign(Object.assign({visible:!0},Zp(t.value)),{textBaseline:"top"}),"richtext"):typeof t.value.text!="object"||t.value.text===null||t.value.text.type!=="rich"&&t.value.text.type!=="html"?e.createOrUpdateChild(`${i}-value`,Object.assign(Object.assign({visible:!0,text:(r=t.value.text)!==null&&r!==void 0?r:""},t.value),{textBaseline:"top"}),"text"):t.value.text.type==="rich"?e.createOrUpdateChild(`${i}-value`,Object.assign(Object.assign({visible:!0},Zp(t.value)),{textBaseline:"top"}),"richtext"):e.createOrUpdateChild(`${i}-value`,{html:Object.assign({dom:t.value.text.text,container:"",width:30,height:30,style:{}},t.value)},"richtext"),s}}setAttributes(t,e){const i=Object.keys(t);this.attribute.autoCalculatePosition&&i.every(r=>d5t.includes(r))?(this._mergeAttributes(t,i),F(this.attribute.panel.width)&&this.attribute.autoMeasure&&ea.measureTooltip(this.attribute),ea.calculateTooltipPosition(this.attribute),super.setAttributes({x:this.attribute.x,y:this.attribute.y},e)):super.setAttributes(t,e)}static calculateTooltipPosition(t){const{width:e=0,height:i=0}=t.panel,{offsetX:r,offsetY:s,pointerX:a,pointerY:o,positionX:l,positionY:u,parentBounds:h}=t;let c=a,d=o;return l==="left"?c-=e+r:l==="center"?c-=e/2:c+=r,u==="top"?d-=i+s:u==="middle"?d-=i/2:d+=s,c+e>h.x2&&(c-=e+r),d+i>h.y2&&(d-=i+s),c<h.x1&&(c=h.x1),d<h.y1&&(d=h.y1),t.x=c,t.y=d,t}static measureTooltip(t){const{content:e,contentStyle:i}=t,r=ds(t.padding),s=ea.getTitleAttr(t);let a=0,o=r[0]+r[2],l=0;const{value:u,shape:h}=s,{visible:c=!1,symbolType:d=""}=h??{};if(z(u)&&typeof s.value.text!="object"){const{width:p,height:f}=vg(u).quickMeasure(u.text);a=p,l=f}if(c&&WA[d]&&(a+=h.size+h.spacing,l=Math.max(h.size,l)),t.title&&(t.title.width=a,t.title.height=l),Xi(s)&&(o+=l+s.spaceRow),e&&e.length){const p=[];if(e.forEach((f,g)=>{const _=ea.getContentAttr(t,g);(f.key||f.value)&&Xi(_)&&p.push([f,_])}),p.length){let f=!1;const g=[],_=[],v=[];p.forEach(([A,w],C)=>{var k;const{key:M,value:P,shape:E,spaceRow:I}=w,D=Xi(E),N=(k=E==null?void 0:E.symbolType)!==null&&k!==void 0?k:"",O=vg(M),L=vg(P);let H=0;if(Xi(M)){const{width:j,height:G}=O.quickMeasure(M.text);_.push(j),H=Math.max(H,G)}if(Xi(P)){const{width:j,height:G}=L.quickMeasure(P.text);v.push(j),H=Math.max(H,G)}D&&WA[N]&&(f=!0,g.push(E.size),H=Math.max(E.size,H)),A.height=H,o+=H,C<p.length-1&&(o+=I??i.spaceRow)});const y=g.length?Math.max(...g):0,b=_.length?Math.max(..._):0,S=v.length?Math.max(...v):0;a=Math.max(b+S+i.key.spacing+i.value.spacing+(f?y+i.shape.spacing:0),a),e.forEach(A=>{A.width=a}),t.hasContentShape=f,t.keyWidth=b,t.valueWidth=S}}return t.panel.width=a+r[1]+r[3],t.panel.height=o,t}static getTitleAttr(t){return dW({},ea.defaultAttributes.titleStyle,ea.defaultAttributes.title,t.titleStyle,t.title)}static getContentAttr(t,e){return dW({},ea.defaultAttributes.contentStyle,t.contentStyle,t.content[e])}};xtt.defaultAttributes=c5t;const aC=Ur;function f5t(n){return(n=fl(n))>0&&n<=Math.PI/2?2:n>Math.PI/2&&n<=Math.PI?3:n>Math.PI&&n<=3*Math.PI/2?4:1}function g5t(n,t){let e=0,i=2*Math.PI;const r=z(n),s=z(t);for(r||s?s?r?(e=n,i=t):(e=t-2*Math.PI,i=t):(e=n,i=n+2*Math.PI):(e=0,i=2*Math.PI);i<=e;)i+=2*Math.PI;for(;e>2*Math.PI;)e-=2*Math.PI,i-=2*Math.PI;for(;i<0;)e+=2*Math.PI,i+=2*Math.PI;return{startAngle:e,endAngle:i}}function m5t(n,t,e){return n.x1>t||n.x2<t||n.y1>e||n.y2<e}function Stt(n,t){const e=[];return n.forEach(i=>{const r=+i[t];st(r)&&e.push(r)}),e.length===0?null:dn(e)}function CF(n,t){const e=[];return n.forEach(i=>{const r=+i[t];st(r)&&e.push(r)}),e.length===0?null:Vi(e)}function Att(n,t){return n.reduce((e,i)=>{const r=t?+i[t]:+i;return st(r)&&(e+=r),e},0)}function wtt(n,t){let e=0,i=0;return n.forEach(r=>{const s=t?+r[t]:+r;st(s)&&(e+=s,i++)}),e/i}function Ctt(n,t){const e=wtt(n,t);return n.length<=1?0:n.reduce((r,s)=>r+(t?+s[t]:+s-e)**2,0)/(n.length-1)}function v5t(n,t){return Math.sqrt(Ctt(n,t))}function _5t(n,t){return wCt(n.map(e=>e[t]))}function y5t(n,t,e){const{predict:i}=VIt(n,l=>l[t],l=>l[e]),r=Stt(n,t),s=CF(n,t),a=i(r),o=i(s);return[{[t]:r,[e]:a},{[t]:s,[e]:o}]}function b5t(n){let t="center",e="middle";return t=(n=fl(n))>=Math.PI*(7/6)&&n<=Math.PI*(11/6)?"right":n>=Math.PI*(1/6)&&n<=Math.PI*(5/6)?"left":"center",e=n>=Math.PI*(5/3)||n<=Math.PI*(1/3)?"bottom":n>=Math.PI*(2/3)&&n<=Math.PI*(4/3)?"top":"middle",{align:t,baseline:e}}function pW(n,t){const e=oC(n),i=oC(t),r=Math.asin((n.x*t.y-t.x*n.y)/e/i),s=Math.acos((n.x*t.x+n.y*t.y)/e/i);return r<0?-s:s}function oC(n,t={x:0,y:0}){return Ni.distancePP(n,t)}function x5t(n,t=2){const e=n.reduce((u,h)=>u+(isNaN(h)?0:h),0);if(e===0)return 0;const i=Math.pow(10,t),r=n.map(u=>(isNaN(u)?0:u)/e*i*100),s=100*i,a=r.map(u=>Math.floor(u));let o=a.reduce((u,h)=>u+h,0);const l=r.map((u,h)=>u-a[h]);for(;o<s;){let u=Number.NEGATIVE_INFINITY,h=null;for(let c=0;c<l.length;c++)l[c]>u&&(u=l[c],h=c);++a[h],l[h]=0,++o}return a.map(u=>u/i)}function zi(n,t,e){let i=!1;if(t&&ft(t)){for(const r of n)for(const s of r.getSeries(e))if(i=!!t.call(null,s),i)return i}return i}function ktt(n,t){const e=[];for(const i of n)for(const r of i.getSeries(t))e.push(r);return e}const rp=(n,t)=>{for(let e=0;e<n.length;e++){const i=n[e].getSeries();for(let r=0;r<i.length;r++){const s=i[r];if(t&&s&&s.coordinate===t||!t&&s)return s}}return null};function SS(n){return function(t){let e;return e=ut(n)?n.reduce((i,r)=>i==null?void 0:i[r],t):t==null?void 0:t[n],e}}var at;(function(n){n.area="area",n.line="line",n.bar="bar",n.bar3d="bar3d",n.rangeColumn="rangeColumn",n.rangeColumn3d="rangeColumn3d",n.rangeArea="rangeArea",n.dot="dot",n.geo="geo",n.link="link",n.map="map",n.pie="pie",n.pie3d="pie3d",n.radar="radar",n.rose="rose",n.scatter="scatter",n.circularProgress="circularProgress",n.wordCloud="wordCloud",n.wordCloud3d="wordCloud3d",n.funnel="funnel",n.funnel3d="funnel3d",n.linearProgress="linearProgress",n.boxPlot="boxPlot",n.sankey="sankey",n.gaugePointer="gaugePointer",n.gauge="gauge",n.treemap="treemap",n.sunburst="sunburst",n.circlePacking="circlePacking",n.waterfall="waterfall",n.heatmap="heatmap",n.correlation="correlation",n.liquid="liquid",n.venn="venn"})(at||(at={}));var fW;(function(n){n.label="label",n.point="point",n.line="line",n.area="area",n.bar="bar",n.bar3d="bar3d",n.boxPlot="boxPlot",n.outlier="outlier",n.circlePacking="circlePacking",n.group="group",n.gridBackground="gridBackground",n.grid="grid",n.dot="dot",n.title="title",n.subTitle="subTitle",n.symbol="symbol",n.funnel="funnel",n.funnel3d="funnel3d",n.transform="transform",n.transform3d="transform3d",n.transformLabel="transformLabel",n.outerLabel="outerLabel",n.outerLabelLine="outerLabelLine",n.pin="pin",n.pinBackground="pinBackground",n.pointer="pointer",n.segment="segment",n.track="track",n.cell="cell",n.cellBackground="cellBackground",n.link="link",n.arrow="arrow",n.pie="pie",n.pie3d="pie3d",n.labelLine="labelLine",n.progress="progress",n.minLabel="minLabel",n.maxLabel="maxLabel",n.rose="rose",n.node="node",n.sunburst="sunburst",n.nonLeaf="nonLeaf",n.leaf="leaf",n.nonLeafLabel="nonLeafLabel",n.leaderLine="leaderLine",n.stackLabel="stackLabel",n.word="word",n.fillingWord="fillingWord",n.nodePoint="nodePoint",n.ripplePoint="ripplePoint",n.centerPoint="centerPoint",n.centerLabel="centerLabel",n.barBackground="barBackground",n.lineLabel="lineLabel",n.areaLabel="areaLabel",n.liquid="liquid",n.liquidBackground="liquidBackground",n.liquidOutline="liquidOutline",n.circle="circle",n.overlap="overlap",n.overlapLabel="overlapLabel"})(fW||(fW={}));const Kt="__VCHART",qf=500,Zf=500,S5t=`${Kt}_LABEL_VISIBLE`,LE=`${Kt}_ARC_TRANSFORM_VALUE`,A5t=`${Kt}_ARC_RATIO`,gW=`${Kt}_ARC_START_ANGLE`,mW=`${Kt}_ARC_END_ANGLE`,w5t=`${Kt}_ARC_K`,du=`${Kt}_ARC_MIDDLE_ANGLE`,C5t=`${Kt}_ARC_QUADRANT`,k5t=`${Kt}_ARC_RADIAN`,eT=-Math.PI/2,kF=3*Math.PI/2,TF=-90,Ttt=270,Ay=.6,gh=9,Ts=0;var Mh;(function(n){n.enter="enter",n.update="update",n.exit="exit",n.group="group",n.connectNulls="connectNulls"})(Mh||(Mh={}));var Ve;(function(n){n.enter="enter",n.update="update",n.exit="exit",n.unChange="unChange"})(Ve||(Ve={}));var Rt;(function(n){n.arc="arc",n.arc3d="arc3d",n.area="area",n.image="image",n.line="line",n.path="path",n.rect="rect",n.rect3d="rect3d",n.rule="rule",n.shape="shape",n.symbol="symbol",n.text="text",n.richtext="richtext",n.polygon="polygon",n.pyramid3d="pyramid3d",n.circle="circle",n.cell="cell",n.interval="interval",n.group="group",n.glyph="glyph",n.component="component",n.largeRects="largeRects",n.largeSymbols="largeSymbols"})(Rt||(Rt={}));var yi;(function(n){n.axis="axis",n.grid="grid",n.legend="legend",n.slider="slider",n.label="label",n.datazoom="datazoom",n.player="player",n.title="title",n.scrollbar="scrollbar"})(yi||(yi={}));var vW;(function(n){n[n.player=1]="player",n[n.rollUp=2]="rollUp",n[n.drillDown=3]="drillDown",n[n.slider=4]="slider",n[n.datazoom=5]="datazoom",n[n.legend=6]="legend",n[n.scrollbar=7]="scrollbar",n[n.brush=8]="brush",n[n.normal=9]="normal"})(vW||(vW={}));var ml;(function(n){n.lineAxis="lineAxis",n.circleAxis="circleAxis"})(ml||(ml={}));var Vn;(function(n){n.lineAxisGrid="lineAxisGrid",n.circleAxisGrid="circleAxisGrid"})(Vn||(Vn={}));var _W;(function(n){n.discreteLegend="discreteLegend",n.colorLegend="colorLegend",n.sizeLegend="sizeLegend"})(_W||(_W={}));var yW;(function(n){n.lineCrosshair="lineCrosshair",n.rectCrosshair="rectCrosshair",n.sectorCrosshair="sectorCrosshair",n.circleCrosshair="circleCrosshair",n.polygonCrosshair="polygonCrosshair",n.ringCrosshair="ringCrosshair"})(yW||(yW={}));var bW;(function(n){n.symbolLabel="symbolLabel",n.rectLabel="rectLabel",n.lineLabel="lineLabel",n.dataLabel="dataLabel"})(bW||(bW={}));var xW;(function(n){n.continuousPlayer="continuousPlayer",n.discretePlayer="discretePlayer"})(xW||(xW={}));var ru;(function(n){n.before="before",n.layouting="layouting",n.reevaluate="reevaluate",n.after="after"})(ru||(ru={}));var Ht;(function(n){n.BEFORE_EVALUATE_DATA="beforeEvaluateData",n.AFTER_EVALUATE_DATA="afterEvaluateData",n.BEFORE_EVALUATE_SCALE="beforeEvaluateScale",n.AFTER_EVALUATE_SCALE="afterEvaluateScale",n.BEFORE_PARSE_VIEW="beforeParseView",n.AFTER_PARSE_VIEW="afterParseView",n.BEFORE_TRANSFORM="beforeTransform",n.AFTER_TRANSFORM="afterTransform",n.BEFORE_CREATE_VRENDER_STAGE="beforeCreateVRenderStage",n.AFTER_CREATE_VRENDER_STAGE="afterCreateVRenderStage",n.BEFORE_CREATE_VRENDER_LAYER="beforeCreateVRenderLayer",n.AFTER_CREATE_VRENDER_LAYER="afterCreateVRenderLayer",n.BEFORE_STAGE_RESIZE="beforeStageResize",n.AFTER_STAGE_RESIZE="afterStageResize",n.BEFORE_VRENDER_DRAW="beforeVRenderDraw",n.AFTER_VRENDER_DRAW="afterVRenderDraw",n.BEFORE_MARK_JOIN="beforeMarkJoin",n.AFTER_MARK_JOIN="afterMarkJoin",n.BEFORE_MARK_UPDATE="beforeMarkUpdate",n.AFTER_MARK_UPDATE="afterMarkUpdate",n.BEFORE_MARK_STATE="beforeMarkState",n.AFTER_MARK_STATE="afterMarkState",n.BEFORE_MARK_ENCODE="beforeMarkEncode",n.AFTER_MARK_ENCODE="afterMarkEncode",n.BEFORE_DO_LAYOUT="beforeDoLayout",n.AFTER_DO_LAYOUT="afterDoLayout",n.BEFORE_MARK_LAYOUT_END="beforeMarkLayoutEnd",n.AFTER_MARK_LAYOUT_END="afterMarkLayoutEnd",n.BEFORE_DO_RENDER="beforeDoRender",n.AFTER_DO_RENDER="afterDoRender",n.BEFORE_MARK_RENDER_END="beforeMarkRenderEnd",n.AFTER_MARK_RENDER_END="afterMarkRenderEnd",n.BEFORE_CREATE_VRENDER_MARK="beforeCreateVRenderMark",n.AFTER_CREATE_VRENDER_MARK="afterCreateVRenderMark",n.BEFORE_ADD_VRENDER_MARK="beforeAddVRenderMark",n.AFTER_ADD_VRENDER_MARK="afterAddVRenderMark",n.AFTER_VRENDER_NEXT_RENDER="afterVRenderNextRender",n.BEFORE_ELEMENT_UPDATE_DATA="beforeElementUpdateData",n.AFTER_ELEMENT_UPDATE_DATA="afterElementUpdateData",n.BEFORE_ELEMENT_STATE="beforeElementState",n.AFTER_ELEMENT_STATE="afterElementState",n.BEFORE_ELEMENT_ENCODE="beforeElementEncode",n.AFTER_ELEMENT_ENCODE="afterElementEncode",n.ANIMATION_START="animationStart",n.ANIMATION_END="animationEnd",n.ELEMENT_ANIMATION_START="elementAnimationStart",n.ELEMENT_ANIMATION_END="elementAnimationEnd",n.ALL_ANIMATION_START="allAnimationStart",n.ALL_ANIMATION_END="allAnimationEnd"})(Ht||(Ht={}));var iD;(function(n){n.signal="signal",n.data="data",n.scale="scale",n.coordinate="coordinate",n.mark="mark"})(iD||(iD={}));var ps;(function(n){n.active="active",n.selected="selected",n.highlight="highlight",n.blur="blur"})(ps||(ps={}));const sp="__vgrammar_scene_item__",Mtt=[Rt.line,Rt.area],T5t=[Rt.arc3d,Rt.rect3d,Rt.pyramid3d],Ms="key",AS=[{}],M5t=["key"],P5t=!0,E5t=!0,O5t=!1,R5t=null,I5t=!0,SW="VGRAMMAR_IMMEDIATE_ANIMATION",AW=0,Ptt=1e3,nD=0,wW=0,CW=!1,rD=!1,sD="quintInOut",kW={stopWhenStateChange:!1,immediatelyApply:!0},L5t="VGRAMMAR_ANIMATION_PARAMETERS";function MF(n,t){return ot(n).reduce((e,i)=>{const r=It(i)?t.getGrammarById(i):i;return r&&e.push(r),e},[])}function D5t(n){return!ft(n)&&!!(n!=null&&n.signal)}function B5t(n){return!ft(n)&&!!(n!=null&&n.callback)}function Dr(n,t){if(F(n))return[];if(D5t(n)){const e=n.signal;if(It(e))return ot(t.getGrammarById(e));if((e==null?void 0:e.grammarType)==="signal")return[e]}else if(B5t(n))return MF(n.dependency,t);return[]}function bd(n){return ft(n)||(n==null?void 0:n.signal)||!!(n!=null&&n.callback)}function en(n,t,e,i){if(F(n))return n;if(ft(n))return i?n.call(null,e,i,t):n.call(null,e,t);if(n.signal){const r=n.signal;return It(r)?t==null?void 0:t[r]:r.output()}return n.callback?i?n.callback.call(null,e,i,t):n.callback.call(null,e,t):n}function F5t(n,t){if(F(n))return n;if(ft(n))return n.call(null,t);if(n.signal){const e=n.signal;return It(e)?t==null?void 0:t[e]:e.output()}return n.callback?n.callback.call(null,t):n}function wy(n,t){return P1(n)?n.output():t[n]}function j5t(n){return n&&(n.signal||n.callback)}const P1=n=>n&&!F(n.grammarType),_g=n=>ft(n)?n:t=>t[n];function iT(n){return!!(n!=null&&n.scale)}function PF(n){return!!(n!=null&&n.field)}function Xc(n,t){if(!n)return[];let e=[];return n.scale&&(e=P1(n.scale)?[n.scale]:ot(t.getScaleById(n.scale))),e.concat(Dr(n,t))}function lC(n,t){switch(t){case"line":return n.some(e=>["x","y","defined"].includes(e));case"area":return n.some(e=>["x","y","x1","y1","defined"].includes(e));case"largeRects":return n.some(e=>["x","y","width","y1"].includes(e));case"largeSymbols":return n.some(e=>["x","y"].includes(e))}return!1}function N5t(n){const{x:t,y:e,x1:i,y1:r}=n;return st(t)&&st(e)&&st(i)&&st(r)?[{x:t,y:e},{x:i,y:r}]:[]}function z5t(n,t,e,i){return!n||!n.length||n.length===1&&!t?[]:n.some(r=>lC(Object.keys(r.nextAttrs),"line"))?n.map((r,s)=>{var a;const o=r.nextAttrs,{x:l,y:u,x1:h,y1:c,defined:d}=(a=e==null?void 0:e[s])!==null&&a!==void 0?a:{};return F(o.x)&&(o.x=l),F(o.y)&&(o.y=u),F(o.defined)&&d===!1&&(o.defined=!1),o.context=r.key,i&&(F(o.x1)&&(o.x1=h),F(o.y1)&&(o.y1=c)),o}):e??[]}function H5t(n,t,e=[]){if(!n||!n.length||n.length===1&&!t)return[];const i=new Float32Array(4*n.length);return n.forEach((r,s)=>{var a,o,l,u;const h=r.nextAttrs,c=(a=h.x)!==null&&a!==void 0?a:e[4*s],d=(o=h.y)!==null&&o!==void 0?o:e[4*s+1],p=(l=h.width)!==null&&l!==void 0?l:e[4*s+2],f=(u=h.y1)!==null&&u!==void 0?u:e[4*s+3];i[4*s]=c,i[4*s+1]=d,i[4*s+2]=p,i[4*s+3]=f-d}),i}function V5t(n,t,e=[]){if(!n||!n.length||n.length===1&&!t)return[];const i=new Float32Array(2*n.length);return n.forEach((r,s)=>{var a,o;const l=r.nextAttrs,u=(a=l.x)!==null&&a!==void 0?a:e[2*s],h=(o=l.y)!==null&&o!==void 0?o:e[2*s+1];i[2*s]=u,i[2*s+1]=h}),i}function W5t(n,t){if(["x","y","dx","dy"].includes(t))return!0;switch(n){case Rt.arc:return["innerRadius","outerRadius","startAngle","endAngle"].includes(t);case Rt.group:case Rt.rect:case Rt.image:return["width","height","y1"].includes(t);case Rt.path:case Rt.shape:return["path","customPath"].includes(t);case Rt.line:return t==="defined";case Rt.area:return["x1","y1","defined"].includes(t);case Rt.rule:return["x1","y1"].includes(t);case Rt.symbol:return t==="size";case Rt.polygon:return t==="points";case Rt.text:return t==="text"}return!1}function $5t(n){return[Rt.line,Rt.area,Rt.largeRects,Rt.largeSymbols].includes(n)}function tu(n,t,e,i,r){e&&(bd(e)?t.forEach(s=>{const a=en(e,i,s.datum,n);Object.assign(s.nextAttrs,a)}):Object.keys(e).forEach(s=>{var a,o;const l=e[s],u=r&&!W5t(n.mark.markType,s)?[t[0]]:t;if(iT(l)){const h=wy(l.scale,i),c=(a=l==null?void 0:l.offset)!==null&&a!==void 0?a:0,d=!F(l.band)&&h.bandwidth?h.bandwidth()*l.band:null,p=It(l==null?void 0:l.field),f=p?Vo(l.field):null;let g=p?null:F(l==null?void 0:l.value)?0:(o=h.scale)===null||o===void 0?void 0:o.call(h,l.value);u.forEach(_=>{var v;p&&(g=(v=h.scale)===null||v===void 0?void 0:v.call(h,f(_.datum))),_.nextAttrs[s]=Mt(g)||Mt(d)?g+c+d:g})}else if(PF(l)){const h=Vo(l.field);u.forEach(c=>{c.nextAttrs[s]=h(c.datum)})}else u.forEach(h=>{h.nextAttrs[s]=en(l,i,h.datum,n)})}))}function qh(n,t,e,i){if(!n)return null;if(bd(n))return en(n,i,t,e);const r={};return Object.keys(n).forEach(s=>{var a,o,l;const u=n[s];if(iT(u)){const h=wy(u.scale,i),c=(a=u==null?void 0:u.offset)!==null&&a!==void 0?a:0,d=!F(u.band)&&h.bandwidth?h.bandwidth()*u.band:null,p=It(u==null?void 0:u.field),f=p?Vo(u.field):null,g=p?(o=h.scale)===null||o===void 0?void 0:o.call(h,f(t)):F(u==null?void 0:u.value)?0:(l=h.scale)===null||l===void 0?void 0:l.call(h,u.value);r[s]=Mt(g)||Mt(d)?g+c+d:g}else if(PF(u)){const h=Vo(u.field);r[s]=h(t)}else r[s]=en(u,i,t,e)}),r}class G5t{constructor(t,e,i,r){this.channelEncoder={},this.marks=t,e&&this.registerChannelEncoder(e),i&&this.registerDefaultEncoder(i),this.progressiveChannels&&this.registerProgressiveChannels(r)}getMarks(){return this.marks}registerChannelEncoder(t,e){return It(t)?this.channelEncoder[t]=e:Object.assign(this.channelEncoder,t),this}registerFunctionEncoder(t){return this.functionEncoder=t,this}registerDefaultEncoder(t){return this.defaultEncoder=t,this}registerProgressiveChannels(t){return this.progressiveChannels=ot(t),this}getChannelEncoder(){return this.channelEncoder}getFunctionEncoder(){return this.functionEncoder}getDefaultEncoder(){return this.defaultEncoder}getProgressiveChannels(){return this.progressiveChannels}}let Ct=class Ki{static registerPlotMarks(t,e){Ki._plotMarks[t]=e}static createPlotMark(t,e){return Ki._plotMarks[t]?new Ki._plotMarks[t](e):null}static registerMark(t,e){Ki._marks[t]=e}static createMark(t,e,i){return Ki._marks[t]?new Ki._marks[t](e,t,i):null}static hasMark(t){return!!Ki._marks[t]}static registerComponent(t,e){Ki._components[t]=e}static createComponent(t,e,i,r){const s=Ki._components[t];return s?new s(e,i,r):null}static hasComponent(t){return!!Ki._components[t]}static registerGraphicComponent(t,e){Ki._graphicComponents[t]=e}static createGraphicComponent(t,e,i){const r=Ki._graphicComponents[t];return r?r(e,i):null}static registerTransform(t,e,i){Ki._transforms[t]=Object.assign(e,{type:t,isBuiltIn:!!i})}static getTransform(t){return Ki._transforms[t]}static unregisterRuntimeTransforms(){Object.keys(Ki._transforms).forEach(t=>{Ki._transforms[t]&&!Ki._transforms[t].isBuiltIn&&(Ki._transforms[t]=null)})}static registerGrammar(t,e,i){Ki._grammars[t]={grammarClass:e,specKey:i??t}}static createGrammar(t,e,i){var r;const s=(r=Ki._grammars[t])===null||r===void 0?void 0:r.grammarClass;return s?new s(e,i):null}static getGrammars(){return this._grammars}static getGlyph(t){return Ki._glyphs[t]}static createInteraction(t,e,i){const r=Ki._interactions[t];return r?new r(e,i):null}static hasInteraction(t){return!!Ki._interactions[t]}};Ct._plotMarks={},Ct._marks={},Ct._components={},Ct._graphicComponents={},Ct._transforms={},Ct._grammars={},Ct._glyphs={},Ct._animations={},Ct._interactions={},Ct._graphics={},Ct.registerGlyph=(n,t,e,i,r)=>(Ct._glyphs[n]=new G5t(t,e,i,r),Ct._glyphs[n]),Ct.registerAnimationType=(n,t)=>{Ct._animations[n]=t},Ct.getAnimationType=n=>Ct._animations[n],Ct.registerInteraction=(n,t)=>{Ct._interactions[n]=t},Ct.registerGraphic=(n,t)=>{Ct._graphics[n]=t},Ct.getGraphicType=n=>Ct._graphics[n],Ct.createGraphic=(n,t)=>{const e=Ct._graphics[n];return e?e(t):null};const Ett=n=>!!Rt[n];function D0(n,t,e={}){var i;const r=Ct.getGraphicType(t)?Ct.createGraphic(t,e):Ct.createGraphicComponent(t,e,{skipDefault:(i=n==null?void 0:n.spec)===null||i===void 0?void 0:i.skipTheme});return r||ri.getInstance().error(`create ${t} graphic failed!`),r}function U5t(n,t,e={}){if(!Ct.getGraphicType(Rt.glyph))return;const i=Ct.createGraphic(Rt.glyph,e),r=t.getMarks(),s=Object.keys(r).map(a=>{if(Ct.getGraphicType(r[a])){const o=Ct.createGraphic(r[a]);if(o)return o.name=a,o}});return i.setSubGraphic(s),i}const uC=n=>{n&&(n[sp]=null,n.release(),n.parent&&n.parent.removeChild(n))},TW=["fillOpacity"],MW=(n,t,e)=>{var i;return t==="fillOpacity"?(n.fillOpacity=(i=e.fillOpacity)!==null&&i!==void 0?i:1,["fillOpacity"]):[]};function Y5t(n,t,e,i,r,s){const a=r.getGraphicAttribute(n,!1,s);if(a)return t.forEach(l=>{l in i&&(a[l]=i[l])}),a;const o={};return t.forEach(l=>{o[l]=i[l]}),e[n]=o,o}const E1={rect3d:[{channels:["x","y","z","x1","y1","width","height","length"],transform:(n,t,e)=>{var i,r,s,a,o,l,u,h,c,d,p,f;st(t.width)||!st(t.x1)&&st(e.width)?(n.x=Math.min((i=e.x)!==null&&i!==void 0?i:0,(r=e.x1)!==null&&r!==void 0?r:1/0),n.width=e.width):st(t.x1)||!st(t.width)&&st(e.x1)?(n.x=Math.min(e.x,e.x1),n.width=Math.abs(e.x1-e.x)):(n.x=Math.min((s=e.x)!==null&&s!==void 0?s:0,(a=e.x1)!==null&&a!==void 0?a:1/0),n.width=e.width),st(t.height)||!st(t.y1)&&st(e.height)?(n.y=Math.min((o=e.y)!==null&&o!==void 0?o:0,(l=e.y1)!==null&&l!==void 0?l:1/0),n.height=e.height):st(t.y1)||!st(t.height)&&st(e.y1)?(n.y=Math.min(e.y,e.y1),n.height=Math.abs(e.y1-e.y)):(n.y=Math.min((u=e.y)!==null&&u!==void 0?u:0,(h=e.y1)!==null&&h!==void 0?h:1/0),n.height=e.height),st(t.length)||!st(t.z1)&&st(e.length)?(n.z=Math.min((c=e.z)!==null&&c!==void 0?c:0,(d=e.z1)!==null&&d!==void 0?d:1/0),n.length=e.length):st(t.z1)||!st(t.length)&&st(e.z1)?(n.z=Math.min(e.z,e.z1),n.length=Math.abs(e.z1-e.z)):(n.z=Math.min((p=e.z)!==null&&p!==void 0?p:0,(f=e.z1)!==null&&f!==void 0?f:1/0),n.length=e.length)},storedAttrs:"sizeAttrs"}],[Rt.text]:[{channels:["text","limit","autoLimit","maxLineWidth","textType"],transform:(n,t,e)=>{var i,r;const s=(i=e.limit)!==null&&i!==void 0?i:1/0,a=(r=e.autoLimit)!==null&&r!==void 0?r:1/0,o=Math.min(s,a),l=No(e.text)&&!F(e.text.text),u=l?e.text.text:e.text;n.maxLineWidth=o===1/0?e.maxLineWidth:o,(l||e.textType)&&(e.text.type==="rich"||e.textType==="rich")?n.textConfig=u:n.text=u},storedAttrs:"limitAttrs"}],[Rt.rule]:[{channels:["x","y","x1","y1"],transform:(n,t,e)=>{const i=N5t(e);n.points=i,n.x=0,n.y=0},storedAttrs:"pointAttrs"}],[Rt.symbol]:[{channels:["shape","symbolType"],transform:(n,t,e)=>{var i;n.symbolType=(i=t.shape)!==null&&i!==void 0?i:t.symbolType}},{channels:["image","fill","background"],transform:(n,t,e)=>{t.image?(n.background=t.image,n.fill=!1):e.image?(n.background=e.image,n.fill=!1):(n.fill=e.fill,n.background=e.background)},storedAttrs:"imageAttrs"}]};function X5t(n,t){var e;return((e=E1[n])!==null&&e!==void 0?e:[]).reduce((i,r)=>(r.channels.forEach(s=>{Co(t,s)&&(i[s]=t[s])}),i),{})}const hC=(n,t,e,i)=>{const r={},s=t?Object.keys(t):[],a=It(n)?E1[n]:n;if(a&&a.length){const o=[];s.forEach(l=>{let u=!1;a.forEach((h,c)=>{if(h.channels.includes(l)){if(!o[c])if(h.storedAttrs){const d=Y5t(h.storedAttrs,h.channels,r,t,e,i);h.transform(r,t,d)}else h.transform(r,t,null);o[c]=!0,u=!0}}),u||(TW.includes(l)?MW(r,l,t):r[l]=t[l])})}else s.forEach(o=>{TW.includes(o)?MW(r,o,t):r[o]=t[o]});return r},K5t=(n,t)=>{var e,i;if(n===t)return!0;const r=(e=n&&n.length)!==null&&e!==void 0?e:0;return r===((i=t&&t.length)!==null&&i!==void 0?i:0)&&r!==0&&n.every((s,a)=>!s&&!t[a]||s&&t[a]&&s.color===t[a].color&&s.offset===t[a].offset)},q5t=(n,t)=>{if(n===t)return!0;if(typeof n!=typeof t||It(n)||n.gradient!==t.gradient)return!1;const e=Object.keys(n),i=Object.keys(t);return e.length===i.length&&e.every(r=>r==="stops"?K5t(n[r],t[r]):n[r]===t[r])},Z5t=(n,t)=>n.length===t.length&&n.join("-")===t.join("-"),J5t=(n,t,e)=>!(!F(n)||!F(t))||!F(n)&&!F(t)&&(e==="lineDash"?Z5t(n,t):e==="stroke"||e==="fill"?q5t(n,t):n===t),Q5t=["fill","fillOpacity","background","texture","texturePadding","textureSize","textureColor"],Ott=["stroke","strokeOpacity","lineDash","lineDashOffset","lineCap","lineJoin","lineWidth","miterLimit"],t4t=Q5t.concat(Ott);function aD(n,t,e){var i;if(!n||n.length<=1)return null;const r=((i=e==null?void 0:e.mark)===null||i===void 0?void 0:i.markType)==="area"?t4t:Ott,s=[];let a=null;return n.forEach((o,l)=>{a&&r.every(u=>J5t(a[u],o[u],u))||(s.length&&(s[s.length-1].endIndex=l),a=o,s.push({attrs:a,startIndex:l}))}),s.length>=2?s.map(o=>{const l=EF(o.attrs);return l.points=t.slice(o.startIndex,F(o.endIndex)?t.length:o.endIndex),l}):null}function e4t(n,t,e){if(!n||n.length<=1)return null;const i=!!e&&e.mark.getSpec().enableSegments;let r,s,a=[],o=null;if(n.forEach((l,u)=>{o=t[u],o&&o.defined!==!1?(r||(s={items:[],points:[]},a.push(s)),s.points.push(o),s.items.push(l),r===!1&&(s.isConnect=!0,s={items:[],points:[]},a.push(s)),r=!0):r=!1}),a=a.filter(l=>l.points.length>0),a.length>=2){const l=[];return a.forEach(u=>{if(u.isConnect)return void l.push({points:u.points,isConnect:!0});if(i){const c=aD(u.items,u.points,e);if(c)return void c.forEach(d=>{l.push(d)})}const h=EF(u.items[0]);h.points=u.points,l.push(h)}),l}return i?aD(n,t,e):null}function i4t(n){return n?n.reduce((t,e)=>t.concat(e.points),[]):null}function EF(n){const t={};return n&&Object.keys(n).forEach(e=>{e!=="x"&&e!=="y"&&e!=="x1"&&e!=="y1"&&e!=="defined"&&e!=="size"&&e!=="width"&&e!=="height"&&e!=="context"&&(t[e]=n[e])}),t}let Rtt=class{constructor(t){this.data=null,this.states=[],this.diffState=Ve.enter,this.isReserved=!1,this.runtimeStatesEncoder=null,this.items=[],this.getStateAttrs=(e,i)=>{var r,s,a,o;const l=!F((r=this.runtimeStatesEncoder)===null||r===void 0?void 0:r[e]),u=l?Object.assign(Object.assign({},(s=this.mark.getSpec().encode)===null||s===void 0?void 0:s[e]),this.runtimeStatesEncoder[e]):(a=this.mark.getSpec().encode)===null||a===void 0?void 0:a[e];if(!u)return{};if(ft(u))return u(this.getDatum(),this,e,i);if(!l&&(!((o=this.graphicItem.states)===null||o===void 0)&&o[e]))return this.graphicItem.states[e];const h=this.items.map(d=>Object.assign({},d,{nextAttrs:{}}));tu(this,h,u,this.mark.parameters());const c=this.transformElementItems(h,this.mark.markType);return this.graphicItem.states?this.graphicItem.states[e]||(this.graphicItem.states[e]=c):this.graphicItem.states={[e]:c},c},this.mark=t}initGraphicItem(t={}){if(this.graphicItem)return;const e=this.mark.getAttributeTransforms();this.graphicItem=this.mark.addGraphicItem(e?hC(e,t,this):t,this.groupKey),this.graphicItem&&(this.graphicItem[sp]=this,e&&(this.graphicItem.onBeforeAttributeUpdate=i=>this.mark?hC(e,i,this):i),this.clearGraphicAttributes(),this.mark.needAnimate()&&(this.setPrevGraphicAttributes(null),this.setNextGraphicAttributes(Object.assign({},t)),this.setFinalGraphicAttributes(Object.assign({},t))))}updateGraphicItem(){if(!this.graphicItem)return;this.diffState===Ve.exit?this.graphicItem.releaseStatus="willRelease":this.graphicItem.releaseStatus=void 0;const t=this.mark.animate.getAnimationConfigs("state");t.length!==0&&(this.graphicItem.stateAnimateConfig=t[0].originConfig)}getGraphicItem(){return this.graphicItem}removeGraphicItem(){var t,e;this.graphicItem&&((e=(t=this.graphicItem.animates)===null||t===void 0?void 0:t.forEach)===null||e===void 0||e.call(t,i=>i.stop())),this.graphicItem&&(uC(this.graphicItem),this.graphicItem[sp]=null,this.graphicItem=null)}resetGraphicItem(){this.graphicItem&&(this.graphicItem=null)}getBounds(){var t;return(t=this.graphicItem)===null||t===void 0?void 0:t.AABBBounds}getStates(){return this.states}updateData(t,e,i){var r;this.mark.emit(Ht.BEFORE_ELEMENT_UPDATE_DATA,{groupKey:t,data:e,key:i},this),this.data=e;const s=_g(i);return this.items=e.map(a=>({datum:a,key:s(a),view:this.mark.view,nextAttrs:{}})),this.groupKey=t,this.key=this.mark.isCollectionMark()?t:(r=this.items)===null||r===void 0?void 0:r[0].key,this.mark.emit(Ht.AFTER_ELEMENT_UPDATE_DATA,{groupKey:t,data:e,key:i},this),this.items}state(t,e){var i;const r=this.mark.isCollectionMark(),s=this.states,a=ot(en(t,e,this.getDatum(),this)),o=(i=this.mark.getSpec())===null||i===void 0?void 0:i.stateSort;o&&a.length&&a.sort(o);const l=a.length!==s.length||a.some((u,h)=>u!==s[h]);this.states=a,!r&&l&&this.diffState===Ve.unChange&&(this.diffState=Ve.update)}encodeGraphic(t){this.coordinateTransformEncode(this.items);const e=this.transformElementItems(this.items,this.mark.markType);t&&Object.assign(e,t),this.graphicItem?(this.graphicItem.clearStates(),this.graphicItem.states={},this.graphicItem.stateProxy=null,this.applyGraphicAttributes(e)):this.initGraphicItem(e),this.diffState!==Ve.enter&&this.diffState!==Ve.update||!this.states.length||this.useStates(this.states),this.mark.markType===Rt.shape&&(this.graphicItem.datum=this.items[0].datum),this.items.forEach(i=>{i.nextAttrs={}}),this._setCustomizedShape()}_setCustomizedShape(){var t;if(!this.graphicItem)return;const e=(t=this.mark.getSpec())===null||t===void 0?void 0:t.setCustomizedShape;e&&(this.graphicItem.pathProxy=i=>e(this.data,i,new En))}encodeItems(t,e,i=!1,r){const s=this.mark.isCollectionMark(),a=e[Mh.update],o=e[Mh.enter],l=e[Mh.exit],u=this.mark.isLargeMode()||s&&!this.mark.getSpec().enableSegments;this.diffState===Ve.enter?(o&&tu(this,t,o,r,u),a&&tu(this,t,a,r,u)):this.diffState===Ve.update?((s&&o||i)&&tu(this,t,o,r,u),a&&tu(this,t,a,r,u)):this.diffState===Ve.exit&&l&&(i&&tu(this,t,o,r,u),tu(this,t,l,r,u))}coordinateTransformEncode(t){if(!this.mark.coord||this.mark.markType==="arc"||this.mark.disableCoordinateTransform===!0)return;const e=this.mark.coord.output();t.forEach(i=>{const r=i.nextAttrs,s=e.convert(r);Object.assign(r,s)})}clearStates(t){const e=Si(t)?t:this.mark.animate.getAnimationConfigs("state").length!==0;this.states=[],this.graphicItem&&this.graphicItem.clearStates(e),this.runtimeStatesEncoder&&(this.runtimeStatesEncoder={})}_updateRuntimeStates(t,e){this.runtimeStatesEncoder||(this.runtimeStatesEncoder={}),this.runtimeStatesEncoder[t]=e}hasState(t){return this.states&&t&&this.states.includes(t)}updateStates(t){if(!this.graphicItem)return!1;let e=this.states.slice();const i=this.mark.getSpec().encode;let r=!1,s=!1;return Object.keys(t).forEach(a=>{var o;if(!a)return;const l=t[a];if(ae(l)&&!mi(l,(o=this.runtimeStatesEncoder)===null||o===void 0?void 0:o[a]))e.includes(a)?r=!0:e.push(a),this._updateRuntimeStates(a,l),s=!0;else if(l)!e.includes(a)&&(i!=null&&i[a])&&(e.push(a),s=!0);else if(e.length){const u=e.filter(h=>h!==a);u.length!==e.length&&(s=!0,e=u),this.runtimeStatesEncoder&&this.runtimeStatesEncoder[a]&&(this.runtimeStatesEncoder[a]=null)}}),r&&this.graphicItem.clearStates(),!!s&&(this.useStates(e),!0)}addState(t,e){var i;if(!this.graphicItem)return!1;if(e&&It(t)&&!mi(e,(i=this.runtimeStatesEncoder)===null||i===void 0?void 0:i[t])){const a=this.states.slice();return a.includes(t)?this.graphicItem.clearStates():a.push(t),this._updateRuntimeStates(t,e),this.useStates(a),!0}const r=this.mark.getSpec().encode,s=ot(t).reduce((a,o)=>(o&&!a.includes(o)&&(r!=null&&r[o])&&a.push(o),a),this.states.slice());return s.length!==this.states.length&&(this.useStates(s),!0)}removeState(t){if(!this.graphicItem)return!1;const e=ot(t);if(!e.length)return!1;const i=this.states.filter(r=>!e.includes(r));return i.length!==this.states.length&&(this.runtimeStatesEncoder&&e.forEach(r=>{this.runtimeStatesEncoder[r]=null}),this.useStates(i),!0)}useStates(t,e){var i;if(!this.graphicItem)return!1;this.mark.emit(Ht.BEFORE_ELEMENT_STATE,{states:t},this);const r=(i=this.mark.getSpec())===null||i===void 0?void 0:i.stateSort;r&&t.sort(r),this.states=t;const s=Si(e)?e:this.mark.animate.getAnimationConfigs("state").length!==0;return this.graphicItem.stateProxy=this.getStateAttrs,this.graphicItem.useStates(this.states,s),this.mark.emit(Ht.AFTER_ELEMENT_STATE,{states:t},this),!0}diffAttributes(t){const e={},i=this.getFinalGraphicAttributes();for(const r in t)L2(r,i,t)&&Co(i,r)||(e[r]=t[r]);return e}transformElementItems(t,e,i){var r,s,a,o,l;const u=t[0];if(!u.nextAttrs||Object.keys(u.nextAttrs).length===0)return{};let h=u.nextAttrs;if($5t(e)&&t&&t.length&&F((r=u.nextAttrs)===null||r===void 0?void 0:r.points)&&(i===!0||lC(Object.keys(u.nextAttrs),this.mark.markType))){const c=this.mark.getSpec(),d=this.getGraphicAttribute("points",!1),p=this.getGraphicAttribute("segments",!1),f=c.enableSegments,g=(s=this.mark.getSpec().encode)===null||s===void 0?void 0:s[Mh.connectNulls],_=t.map(y=>y.nextAttrs),v=this.mark.isProgressive();if(h=EF(h),e===Rt.line||e===Rt.area){const y=z5t(t,!0,d,e===Rt.area);if(v)h.segments=((l=(o=(a=this.graphicItem)===null||a===void 0?void 0:a.attribute)===null||o===void 0?void 0:o.segments)!==null&&l!==void 0?l:[]).concat([{points:y}]);else if(g){if(h.segments=e4t(_,y,this),h.segments&&h.segments.some(b=>b.isConnect)){const b=qh(g,this.getDatum(),this,this.mark.parameters());b&&h.segments.forEach(S=>{S.isConnect&&Object.assign(S,b)})}h.points=y}else if(f){const b=y&&y.length!==0?y:i4t(p),S=aD(_,b,this);S?(h.segments=S,h.points=null):(h.segments=null,h.points=b)}else h.points=y,h.segments=null}else e===Rt.largeRects?h.points=H5t(t,!0,d):e===Rt.largeSymbols&&(h.points=V5t(t,!0,d))}return h}applyGraphicAttributes(t){var e,i;if(!Gt(t))if(this.mark.needAnimate()){const r=this.diffAttributes(t),s=(e=this.getPrevGraphicAttributes())!==null&&e!==void 0?e:{},a=(i=this.getFinalGraphicAttributes())!==null&&i!==void 0?i:{};Object.keys(r).forEach(u=>{s[u]=this.getGraphicAttribute(u),a[u]=r[u]}),this.setNextGraphicAttributes(r),this.setPrevGraphicAttributes(s),this.setFinalGraphicAttributes(a);const o=this.mark.animate.getElementAnimators(this).reduce((u,h)=>Object.assign(u,h.getEndAttributes()),{}),l=Object.assign({},o,a);this.graphicItem.setAttributes(l)}else this.graphicItem.setAttributes(t)}getGraphicAttribute(t,e=!1){var i;if(!this.graphicItem)return;if(e){let a;const o=this.getPrevGraphicAttributes();if(!F(a=le(o,t)))return a}const r=this.mark.getAttributeTransforms();let s=[t];if(r&&r.length){const a=r.find(o=>o.storedAttrs&&o.channels.includes(t));a&&(s=[a.storedAttrs,t])}return le((i=this.graphicItem)===null||i===void 0?void 0:i.attribute,s)}setGraphicAttribute(t,e,i=!0){if(!this.graphicItem)return;const r=this.getFinalGraphicAttributes(),s=this.getPrevGraphicAttributes();i&&r&&(r[t]=e),s&&!Co(s,t)&&(s[t]=this.graphicItem.attribute[t]),this.graphicItem.setAttribute(t,e)}setGraphicAttributes(t,e=!0){if(!this.graphicItem)return;const i=this.getFinalGraphicAttributes(),r=this.getPrevGraphicAttributes();Object.keys(t).forEach(s=>{i&&e&&(i[s]=t[s]),r&&!Co(r,s)&&(r[s]=this.graphicItem.attribute[s])}),this.graphicItem.setAttributes(t)}getFinalGraphicAttributes(){return this.graphicItem.finalAttrs}setFinalGraphicAttributes(t){this.graphicItem.finalAttrs=t}getPrevGraphicAttributes(){return this.graphicItem.prevAttrs}setPrevGraphicAttributes(t){this.graphicItem.prevAttrs=t}getNextGraphicAttributes(){return this.graphicItem.nextAttrs}getFinalAnimationAttribute(t){var e,i;return(i=(e=this.getFinalGraphicAttributes())===null||e===void 0?void 0:e[t])!==null&&i!==void 0?i:this.getGraphicAttribute(t)}getFinalAnimationAttributes(){var t;return(t=this.getFinalGraphicAttributes())!==null&&t!==void 0?t:this.graphicItem.attribute}setNextGraphicAttributes(t){this.graphicItem.nextAttrs=t}clearChangedGraphicAttributes(){this.graphicItem&&(this.setPrevGraphicAttributes(null),this.setNextGraphicAttributes(null))}clearGraphicAttributes(){this.graphicItem&&(this.graphicItem.prevAttrs&&this.setPrevGraphicAttributes(null),this.graphicItem.nextAttrs&&this.setNextGraphicAttributes(null),this.graphicItem.finalAttrs&&this.setFinalGraphicAttributes(null))}remove(){this.graphicItem&&(uC(this.graphicItem),this.graphicItem=null)}release(){this.removeGraphicItem(),this.mark=null,this.data=null,this.items=null}getItemAttribute(t){var e,i;if(!((e=this.items)===null||e===void 0)&&e.length)return this.mark.isCollectionMark()?F(t)?this.items.map(r=>r.nextAttrs):this.items.map(r=>{var s;return(s=r.nextAttrs)===null||s===void 0?void 0:s[t]}):F(t)?this.items[0].nextAttrs:(i=this.items[0].nextAttrs)===null||i===void 0?void 0:i[t]}setItemAttributes(t){var e;!((e=this.items)===null||e===void 0)&&e.length&&(this.mark.isCollectionMark()?ut(t)&&this.items.forEach((i,r)=>{Object.assign(i.nextAttrs,t[r])}):Object.assign(this.items[0].nextAttrs,t))}getItem(){var t,e;return this.mark&&this.mark.isCollectionMark()?(t=this.items)!==null&&t!==void 0?t:[]:(e=this.items)===null||e===void 0?void 0:e[0]}getDatum(){var t,e;return this.mark&&this.mark.isCollectionMark()?(t=this.data)!==null&&t!==void 0?t:[]:(e=this.data)===null||e===void 0?void 0:e[0]}};class Rc{constructor(t,e){this.references=new Map,this.view=t,this.depend(e==null?void 0:e.dependency)}getStartState(){return null}depend(t){this.references.clear(),ot(t).map(e=>It(e)?this.view.getGrammarById(e):e).filter(e=>!F(e)).forEach(e=>{var i;this.references.set(e,((i=this.references.get(e))!==null&&i!==void 0?i:0)+1)})}parameters(){const t={};return this.references.forEach((e,i)=>{z(i.id())&&(t[i.id()]=i.output())}),t}bind(){const t=this.getEvents();(t??[]).forEach(e=>{e.type&&e.handler&&(ut(e.type)?e.type.forEach(i=>{i&&i!=="none"&&this.view.addEventListener(i,e.handler)}):e.type!=="none"&&this.view.addEventListener(e.type,e.handler))})}unbind(){const t=this.getEvents();(t??[]).forEach(e=>{e.type&&e.handler&&(ut(e.type)?e.type.forEach(i=>{i&&i!=="none"&&this.view.removeEventListener(i,e.handler)}):e.type!=="none"&&this.view.removeEventListener(e.type,e.handler))})}start(t){}reset(t){}dispatchEvent(t,e){this.view.emit(`${this.type}:${t}`,e),t==="start"&&this.options.onStart?this.options.onStart(e):t==="reset"&&this.options.onReset?this.options.onReset(e):t==="update"&&this.options.onUpdate?this.options.onUpdate(e):t==="end"&&this.options.onEnd&&this.options.onEnd(e)}}class ap extends Rc{constructor(t,e){super(t,e),this.type=ap.type,this.handleStart=i=>{this.start(i.element)},this.handleReset=i=>{this.reset(i.element)},this.options=Object.assign({},ap.defaultOptions,e),this._marks=t.getMarksBySelector(this.options.selector)}getEvents(){return[{type:this.options.trigger,handler:this.handleStart},{type:this.options.triggerOff,handler:this.handleReset}]}getStartState(){return this.options.state}start(t){t&&this._marks&&this._marks.includes(t.mark)&&t.addState(this.options.state)}reset(t){t&&this._marks&&this._marks.includes(t.mark)&&t.removeState(this.options.state)}}ap.type="element-active",ap.defaultOptions={state:ps.active,trigger:"pointerover",triggerOff:"pointerout"};const OF=n=>n.filterField?t=>{var e;return(e=t.getDatum())===null||e===void 0?void 0:e[n.filterField]}:t=>t[n.filterType],Itt=(n,t)=>{if(!t||!n)return null;const e={};return n.forEach(i=>{const r=i&&i.getSpec(),s=r&&r.encode;s&&t.forEach(a=>{a&&s[a]&&(e[a]||(e[a]=[]),e[a].push(i))})}),e},n4t=n=>{const t=ot(n),e=[],i=[];return t.forEach(r=>{r==="empty"?e.push("view"):It(r)&&r!=="none"?r.includes("view:")?(i.push(r.replace("view:","")),e.push("view")):(i.push(r),e.push("self")):Mt(r)&&e.push("timeout")}),{eventNames:i,resetType:e}};class Zh extends Rc{constructor(t,e){super(t,e),this.type=Zh.type,this._resetType=[],this.clearPrevElements=()=>{const{state:i,reverseState:r}=this.options;this._statedElements&&this._statedElements.length&&(this.clearAllStates(i,r),this.dispatchEvent("reset",{elements:this._statedElements,options:this.options}),this._statedElements=[])},this.handleStart=i=>{this.start(i.element)},this.handleReset=i=>{this.reset(i.element)},this.options=Object.assign({},Zh.defaultOptions,e),this._marks=t.getMarksBySelector(this.options.selector),this._stateMarks=Itt(this._marks,[this.options.state,this.options.reverseState])}getStartState(){return this.options.state}getEvents(){const t=this.options.triggerOff,e=this.options.trigger,i=[{type:e,handler:this.handleStart}],{eventNames:r,resetType:s}=n4t(t);return r.forEach(a=>{a&&(ut(e)?!e.includes(a):a!==e)&&i.push({type:a,handler:this.handleReset})}),this._resetType=s,i}start(t){const{state:e,reverseState:i,isMultiple:r}=this.options;if(t&&this._marks&&this._marks.includes(t.mark))if(t.hasState(e)){if(this._resetType.includes("self")){const s=this._statedElements&&this._statedElements.filter(a=>a!==t);s&&s.length?this._statedElements=this.updateStates(s,this._statedElements,e,i):this.clearPrevElements()}}else this._timer&&clearTimeout(this._timer),t.addState(e),this._statedElements=this.updateStates(r&&this._statedElements?[...this._statedElements,t]:[t],this._statedElements,e,i),this.dispatchEvent("start",{elements:this._statedElements,options:this.options}),this._resetType.includes("timeout")&&(this._timer=setTimeout(()=>{this.clearPrevElements()},this.options.triggerOff));else this._resetType.includes("view")&&this._statedElements&&this._statedElements.length&&this.clearPrevElements()}reset(t){if(!this._statedElements||!this._statedElements.length)return;const e=t&&this._marks&&this._marks.includes(t.mark);(this._resetType.includes("view")&&!e||this._resetType.includes("self")&&e)&&this.clearPrevElements()}}Zh.type="element-select",Zh.defaultOptions={state:ps.selected,trigger:"click"};class Jh extends Rc{constructor(t,e){super(t,e),this.type=Jh.type,this.handleStart=i=>{this.start(i.element)},this.handleReset=i=>{this.reset(i.element)},this.options=Object.assign({},Jh.defaultOptions,e),this._marks=t.getMarksBySelector(this.options.selector),this._stateMarks=Itt(this._marks,[this.options.highlightState,this.options.blurState])}getStartState(){return this.options.highlightState}getEvents(){const t=this.options.triggerOff,e=[{type:this.options.trigger,handler:this.handleStart}];let i=t;return It(t)&&t.includes("view:")?(i=t.replace("view:",""),this._resetType="view"):this._resetType="self",e.push({type:i,handler:this.handleReset}),e}clearPrevElements(){const{highlightState:t,blurState:e}=this.options;this._lastElement&&(this.clearAllStates(t,e),this.dispatchEvent("reset",{elements:[this._lastElement],options:this.options}),this._lastElement=null,this._statedElements=null)}start(t){if(t&&this._marks&&this._marks.includes(t.mark)){const{highlightState:e,blurState:i}=this.options;if(this._lastElement===t)return;this._statedElements=this.updateStates([t],this._statedElements,e,i),this._lastElement=t,this.dispatchEvent("start",{elements:[t],options:this.options})}else this._lastElement&&this._resetType==="view"&&this.clearPrevElements()}reset(t){if(!this._statedElements||!this._statedElements.length)return;const e=t&&this._marks&&this._marks.includes(t.mark);this._resetType!=="view"||e?this._resetType==="self"&&e&&this.clearPrevElements():this.clearPrevElements()}}Jh.type="element-highlight",Jh.defaultOptions={highlightState:ps.highlight,blurState:ps.blur,trigger:"pointerover",triggerOff:"pointerout"};class op extends Rc{constructor(t,e){super(t,e),this.type=op.type,this.handleStart=i=>{this.start(i.element)},this.handleReset=i=>{i.element&&this._marks&&this._marks.includes(i.element.mark)&&this.clearPrevElements()},this.options=Object.assign({},op.defaultOptions,e),this._marks=t.getMarksBySelector(this.options.selector)}getStartState(){return this.options.highlightState}getEvents(){return[{type:this.options.trigger,handler:this.handleStart},{type:this.options.triggerOff,handler:this.handleReset}]}clearPrevElements(){const t=[this.options.highlightState,this.options.blurState];this._marks.forEach(e=>{e.elements.forEach(i=>{i.removeState(t)})})}start(t){if(t&&this._marks&&this._marks.includes(t.mark)){const e=t.key;if(F(e))return;this._marks.forEach(i=>{i.elements.forEach(r=>{r.key===e?r.updateStates({[this.options.blurState]:!1,[this.options.highlightState]:!0}):r.updateStates({[this.options.blurState]:!0,[this.options.highlightState]:!1})})})}}reset(t){if(t&&this._marks&&this._marks.includes(t.mark)){const e=t.key;if(F(e))return;this._marks.forEach(i=>{i.elements.forEach(r=>{r.key===e?r.updateStates({[this.options.blurState]:!1,[this.options.highlightState]:!0}):r.updateStates({[this.options.blurState]:!0,[this.options.highlightState]:!1})})})}}}op.type="element-highlight-by-key",op.defaultOptions={highlightState:ps.highlight,blurState:ps.blur,trigger:"pointerover",triggerOff:"pointerout"};class lp extends Rc{constructor(t,e){super(t,e),this.type=lp.type,this.handleStart=i=>{this.start(i.element)},this.handleReset=i=>{this.reset(i.element)},this.options=Object.assign({},lp.defaultOptions,e),this._marks=t.getMarksBySelector(this.options.selector)}getStartState(){return this.options.highlightState}getEvents(){return[{type:this.options.trigger,handler:this.handleStart},{type:this.options.triggerOff,handler:this.handleReset}]}clearPrevElements(){const t=[this.options.highlightState,this.options.blurState];this._marks.forEach(e=>{e.elements.forEach(i=>{i.removeState(t)})})}start(t){if(t&&this._marks&&this._marks.includes(t.mark)){const e=t.groupKey;if(F(e))return;this._marks.forEach(i=>{i.elements.forEach(r=>{r.groupKey===e?r.updateStates({[this.options.blurState]:!1,[this.options.highlightState]:!0}):r.updateStates({[this.options.blurState]:!0,[this.options.highlightState]:!1})})})}}reset(t){t&&this._marks&&this._marks.includes(t.mark)&&this.clearPrevElements()}}lp.type="element-highlight-by-group",lp.defaultOptions={highlightState:ps.highlight,blurState:ps.blur,trigger:"pointerover",triggerOff:"pointerout"};class up extends Rc{constructor(t,e){super(t,e),this.type=up.type,this.handleStart=i=>{var r,s;this.start((s=(r=i.detail)===null||r===void 0?void 0:r.data)===null||s===void 0?void 0:s.id)},this.handleReset=i=>{this.reset()},this.options=Object.assign({},up.defaultOptions,e),this._marks=t.getMarksBySelector(this.options.selector)}getEvents(){return[{type:Br.legendItemHover,handler:this.handleStart},{type:Br.legendItemUnHover,handler:this.handleReset}]}getStartState(){return this.options.state}start(t){const e=t;if(F(e))return;const i=OF(this.options);this._marks.forEach(r=>{r.elements.forEach(s=>{i(s)===e?s.addState(this.options.state):s.removeState(this.options.state)})})}reset(){this._marks.forEach(t=>{t.elements.forEach(e=>{e.removeState(this.options.state)})})}}up.type="element-active-by-legend",up.defaultOptions={state:ps.active,filterType:"groupKey"};class hp extends Rc{constructor(t,e){super(t,e),this.type=hp.type,this.handleStart=(i,r)=>{var s,a;this.start((a=(s=i.detail)===null||s===void 0?void 0:s.data)===null||a===void 0?void 0:a.id)},this.handleReset=i=>{this.reset()},this.options=Object.assign({},hp.defaultOptions,e),this._marks=t.getMarksBySelector(this.options.selector)}getStartState(){return this.options.highlightState}getEvents(){return[{type:Br.legendItemHover,handler:this.handleStart},{type:Br.legendItemUnHover,handler:this.handleReset}]}start(t){if(F(t))return;const e=OF(this.options);this._marks.forEach(i=>{i.elements.forEach(r=>{e(r)===t?r.updateStates({[this.options.blurState]:!1,[this.options.highlightState]:!0}):r.updateStates({[this.options.blurState]:!0,[this.options.highlightState]:!1})})})}reset(){const t=[this.options.blurState,this.options.highlightState];this._marks.forEach(e=>{e.elements.forEach(i=>{i.removeState(t)})})}}hp.type="element-highlight-by-legend",hp.defaultOptions={highlightState:ps.highlight,blurState:ps.blur,filterType:"groupKey"};class cp extends Rc{constructor(t,e){super(t,e),this.type=cp.type,this.handleStart=(i,r)=>{if(this.options.shouldStart?this.options.shouldStart(i):this._filterByName(i)){const s=this._parseTargetKey(i,r);this.start(s)}},this.handleReset=i=>{(this.options.shouldReset?this.options.shouldReset(i):this._filterByName(i))&&this.reset()},this.options=Object.assign({},cp.defaultOptions,e),this._marks=t.getMarksBySelector(this.options.selector)}getStartState(){return this.options.highlightState}getEvents(){return[{type:this.options.trigger,handler:this.handleStart},{type:this.options.triggerOff,handler:this.handleReset}]}_filterByName(t){var e;const i=ot(this.options.graphicName);return((e=t==null?void 0:t.target)===null||e===void 0?void 0:e.name)&&i.includes(t.target.name)}_parseTargetKey(t,e){return this.options.parseData?this.options.parseData(t):t.target.type==="text"?t.target.attribute.text:null}start(t){if(F(t))return;const e=OF(this.options);this._marks.forEach(i=>{i.elements.forEach(r=>{e(r)===t?r.updateStates({[this.options.blurState]:!1,[this.options.highlightState]:!0}):r.updateStates({[this.options.blurState]:!0,[this.options.highlightState]:!1})})})}reset(){const t=[this.options.blurState,this.options.highlightState];this._marks.forEach(e=>{e.elements.forEach(i=>{i.removeState(t)})})}}cp.type="element-highlight-by-name",cp.defaultOptions={trigger:"pointerover",triggerOff:"pointerout",highlightState:ps.highlight,blurState:ps.blur,filterType:"groupKey"};function PW(n){if(n)return n.type===tn.Band?n.bandwidth():n.type===tn.Point?n.step():void 0}class Ltt{updateStates(t,e,i,r){return t&&t.length?(i&&r?e&&e.length?(this.toggleReverseStateOfElements(t,e,r),this.toggleStateOfElements(t,e,i)):this.addBothStateOfElements(t,i,r):i&&(e&&e.length?this.toggleStateOfElements(t,e,i):this.addStateOfElements(t,i)),t):null}toggleReverseStateOfElements(t,e,i){e.forEach(r=>{i&&this._stateMarks[i]&&this._stateMarks[i].includes(r.mark)&&r.addState(i)}),t.forEach(r=>{i&&this._stateMarks[i]&&this._stateMarks[i].includes(r.mark)&&r.removeState(i)})}toggleStateOfElements(t,e,i){e.forEach(r=>{i&&this._stateMarks[i]&&this._stateMarks[i].includes(r.mark)&&r.removeState(i)}),t.forEach(r=>{i&&this._stateMarks[i]&&this._stateMarks[i].includes(r.mark)&&r.addState(i)})}addBothStateOfElements(t,e,i){this._marks.forEach(r=>{const s=i&&this._stateMarks[i]&&this._stateMarks[i].includes(r),a=e&&this._stateMarks[e]&&this._stateMarks[e].includes(r);(s||a)&&r.elements.forEach(o=>{t&&t.includes(o)?a&&o.addState(e):s&&o.addState(i)})})}addStateOfElements(t,e){this._marks.forEach(i=>{const r=e&&this._stateMarks[e]&&this._stateMarks[e].includes(i);r&&i.elements.forEach(s=>{t&&t.includes(s)&&r&&s.addState(e)})})}clearAllStates(t,e){this._statedElements&&this._statedElements.length&&this._marks.forEach(i=>{e&&this._stateMarks[e]&&this._stateMarks[e].includes(i)&&i.elements.forEach(r=>{r.removeState(e)}),t&&this._stateMarks[t]&&this._stateMarks[t].includes(i)&&i.elements.forEach(r=>{this._statedElements.includes(r)&&r.removeState(t)})})}}const r4t=()=>{Ct.registerInteraction(ap.type,ap)},s4t=()=>{On(Zh,Ltt),Ct.registerInteraction(Zh.type,Zh)},a4t=()=>{On(Jh,Ltt),Ct.registerInteraction(Jh.type,Jh)},o4t=()=>{Ct.registerInteraction(op.type,op)},l4t=()=>{Ct.registerInteraction(lp.type,lp)},u4t=()=>{Ct.registerInteraction(up.type,up)},h4t=()=>{Ct.registerInteraction(hp.type,hp)},c4t=()=>{Ct.registerInteraction(cp.type,cp)},EW=(n,t)=>P1(n)?n.output():n&&ae(n)?ft(n.callback)?e=>n.callback(e,t):ft(n.value)?n.value(t):n:n,d4t=(n,t)=>n&&(ae(n)?Object.keys(n).reduce((e,i)=>{const r=n[i];return e[i]=EW(r,t),e},{}):n.map(e=>EW(e,t)));let p4t=-1;class nT extends xp{constructor(t){super(),this.spec={},this.references=new Map,this.targets=[],this.transforms=[],this.view=t,this.uid=++p4t}parse(t){return this.id(t.id),this.name(t.name),this.depend(t.dependency),this}depend(t){var e;if(!((e=this.spec)===null||e===void 0)&&e.dependency){const r=ot(this.spec.dependency).map(s=>It(s)?this.view.getGrammarById(s):s);this.detach(r)}this.spec.dependency=t;const i=ot(t).map(r=>It(r)?this.view.getGrammarById(r):r);return this.attach(i),this.commit(),this}addEventListener(t,e,i){let r=e;return i&&i.trap===!1||(r=e,r.raw=e),i&&i.target&&(r.target=i.target),this.on(t,r),this}removeEventListener(t,e){return e?this.off(t,e):this.off(t),this}emit(t,...e){var i,r;return(r=(i=this.view)===null||i===void 0?void 0:i.emit)===null||r===void 0||r.call(i,t,...e),super.emit(t,...e)}emitGrammarEvent(t,...e){return super.emit(t,...e)}evaluateTransform(t,e,i){if(!t||!t.length)return e;let r=e,s=0;const a=t.length;for(;s<a;){const o=t[s];this.emit(Ht.BEFORE_TRANSFORM,o.type),r=o.transform(o.isRawOptions?o.options:d4t(o.options,i),r,i,this.view),s++,this.emit(Ht.AFTER_TRANSFORM,o.type)}return r}set(t){return!1}id(t){return arguments.length?(this.view.grammars.unrecord(this),this._id=t,this.view.grammars.record(this),this):this._id}name(t){return arguments.length?(this._name=t,this):this._name}attach(t,e=1){return ot(t).filter(i=>!F(i)).forEach(i=>{var r;F(t)||(i.targets.includes(this)||i.targets.push(this),this.references.set(i,((r=this.references.get(i))!==null&&r!==void 0?r:0)+e))}),this}detach(t,e=1){return ot(t).filter(i=>!F(i)).forEach(i=>{const r=this.references.get(i)-e;r>0?this.references.set(i,r-1):(this.references.delete(i),i.targets.includes(this)&&(i.targets=i.targets.filter(s=>s!==this)))}),this}detachAll(){this.references.forEach((t,e)=>{this.detach(e,t)})}link(t){this.grammarSource=t}run(){var t;const e=(t=this.grammarSource)===null||t===void 0?void 0:t.output(),i=this.parameters();return this.evaluate(e,i)}commit(){this.view.commit(this)}parameters(){const t={};return this.references.forEach((e,i)=>{z(i.id())&&(t[i.id()]=i.output())}),t}getSpec(){return this.spec}reuse(t){return this}clear(){this.spec=null,this.view=null}release(){this.clear()}setFunctionSpec(t,e){return F(this.spec[e])||this.detach(Dr(this.spec[e],this.view)),this.spec[e]=t,this.attach(Dr(t,this.view)),this.commit(),this}}const OW=(n,t,e)=>{var i;if(n==="callback"&&ft(t))return{references:[],value:{callback:t,dependency:[]}};if(!F(t.data)){const r=e.getDataById(t.data);return{references:[r],value:r}}if(!F(t.customized)){const r=e.getCustomizedById(t.customized);return{references:[r],value:r}}if(!F(t.scale)){const r=e.getScaleById(t.scale);return{references:[r],value:r}}if(j5t(t)){const r=Dr(t,e);return{references:r,value:t.callback?{value:t.callback,dependency:r}:(i=r==null?void 0:r[0])!==null&&i!==void 0?i:t}}return{value:t}},f4t=(n,t,e)=>{if(F(t))return{value:t};if(ut(t)){const i=t.map(r=>OW(n,r,e));return{references:i.reduce((r,s)=>(s.references&&r.concat(s.references),r),[]),value:i.map(r=>r.value)}}return OW(n,t,e)},g4t=(n,t)=>{const e=Ct.getTransform(n.type);if(!e)return;const i={};let r=[];return Object.keys(n).forEach(s=>{var a;if(s==="type")return;const o=n[s];if(s==="dependency")return void((o==null?void 0:o.length)&&(r=r.concat(MF(o,t))));const l=f4t(s,o,t);l&&(!((a=l.references)===null||a===void 0)&&a.length&&(r=r.concat(l.references)),i[s]=l.value)}),{markPhase:e.markPhase,transform:e.transform,canProgressive:e.canProgressive,type:e.type,options:i,references:r}},cC=(n,t)=>{if(n!=null&&n.length){const e=[];let i=[];return n.forEach(r=>{var s;const a=g4t(r,t);a&&(!((s=a.references)===null||s===void 0)&&s.length&&(i=i.concat(a.references)),e.push(a))}),{transforms:e,refs:i}}return null},m4t=(n,t={},e)=>{if(!It(n))return ot(n);try{return ot(JSON.parse(n))}catch{return[]}},RW={csv:DZ,dsv:LZ,tsv:BZ,json:m4t},v4t=(n,t)=>{if(!t||!RW[t.type])return ot(n);const e=t.type==="dsv"?{delimiter:t.delimiter}:{};return RW[t.type](n,e,new Le(new gc))};class _4t extends nT{constructor(t,e,i){super(t),this.grammarType="data",this.spec={},this._dataIDKey=`VGRAMMAR_DATA_ID_KEY_${this.uid}`,this._loadTasks=[],this._postFilters=[],this.ingest=r=>{const s=F5t(r.format,this.parameters());return this._input=v4t(r.values,s),this._input},this.load=r=>{if(r.values)return this.ingest(r)},this.relay=r=>r[0],this._loadTasks=[],F(e)||this.values(e,i)}parse(t){return super.parse(t),this._isLoaded=!1,this.source(t.source,t.format,!1),this.url(t.url,t.format,!1),this.values(t.values,t.format,!1),this.transform(t.transform),this.parseLoad(t),this.commit(),this}parseDataSource(t){const e=[],i=[],r=t.format?Dr(t.format,this.view)[0]:null;if(r&&e.push(r),t.values){const s=Dr(t.values,this.view)[0];s&&e.push(s),i.push({type:"ingest",transform:this.ingest,isRawOptions:!0,options:{values:t.values,format:t.format}})}else if(t.url){const s=Dr(t.url,this.view)[0];s&&e.push(s),i.push({type:"load",transform:this.load,options:{url:s??t.url,format:r??t.format}})}else if(t.source){const s=[];ot(t.source).forEach(a=>{const o=P1(a)?a:this.view.getDataById(a);o&&(e.push(o),s.push(o))}),s.length&&(i.push({type:"relay",transform:this.relay,options:s}),this.grammarSource=s[0])}return{transforms:i,refs:e}}evaluate(t,e){this.view.emit(Ht.BEFORE_EVALUATE_DATA);const i=this._isLoaded?this.transforms:this._loadTasks.concat(this.transforms);this.grammarSource&&(this._input=t);const r=this.evaluateTransform(i,this._input,e),s=this._evaluateFilter(r,e);return this.setValues(s),this._isLoaded=!0,this.view.emit(Ht.AFTER_EVALUATE_DATA),this}output(){return this._values}getDataIDKey(){return this._dataIDKey}values(t,e,i=!0){const r=Object.assign({},this.spec,{values:t,format:e});return F(t)||(r.url=void 0,r.source=void 0),i?this.parseLoad(r):this}url(t,e,i=!0){const r=Object.assign({},this.spec,{url:t,format:e});return F(t)||(r.values=void 0,r.source=void 0),i?this.parseLoad(r):this}source(t,e,i=!0){const r=Object.assign({},this.spec,{source:t,format:e});return F(t)||(r.values=void 0,r.url=void 0),i?this.parseLoad(r):this}parseLoad(t){this.detach(this.parseDataSource(this.spec).refs),this.spec=t;const e=this.parseDataSource(this.spec);return this.attach(e.refs),this._loadTasks=e.transforms,this._isLoaded=!1,this.commit(),this}setValues(t){this._values=ot(t).map((e,i)=>{const r=e===Object(e)?e:{data:e};return r[this._dataIDKey]=i,r})}field(t){return this._values.map(e=>e[t])}transform(t){const e=cC(this.spec.transform,this.view);e&&(this.detach(e.refs),this.transforms=[]),this.spec.transform=t;const i=cC(this.spec.transform,this.view);return i&&(this.attach(i.refs),this.transforms=i.transforms),this.commit(),this}getValue(){return this._values}getInput(){return this._input}addDataFilter(t){return this._postFilters=this._postFilters.concat(ot(t)),this._postFilters.sort((e,i)=>{var r,s;return((r=e.rank)!==null&&r!==void 0?r:0)-((s=i.rank)!==null&&s!==void 0?s:0)}),this}removeDataFilter(t){const e=ot(t);return this._postFilters=this._postFilters.filter(i=>!e.includes(i)),this}_evaluateFilter(t,e){return this._postFilters.reduce((i,r)=>r.filter(i,e),t)}reuse(t){return t.grammarType!==this.grammarType||(this._isLoaded=!1,this._values=t.output()),this}clear(){super.clear(),this._input=null,this._values=null}}const Bd="window",xd="view",y4t="browser",b4t={trap:!1},Ph="width",Eh="height",yg="viewWidth",bg="viewHeight",Ba="padding",RF="viewBox",B0="autoFit";function x4t(n){const t=Object.assign({defaults:{}},n),e=(i,r)=>{r.forEach(s=>{ut(i[s])&&(i[s]=i[s].reduce((a,o)=>(a[o]=!0,a),{}))})};return e(t.defaults,["prevent","allow"]),e(t,[xd,Bd]),t}function S4t(n,t){const e=n.defaults,i=e.prevent,r=e.allow;return i!==!1&&r!==!0&&(i===!0||r===!1||(i?i[t]:!!r&&!r[t]))}function A4t(n,t,e){const i=n==null?void 0:n[t];return!(i===!1||ae(i)&&!i[e])}function wS(n,t,e,i){let r,s;const a=n[t];for(;t>e&&(s=Math.floor((t-1)/2),r=n[s],a&&r&&i(a,r)<0);)n[t]=r,t=s;return n[t]=a}function DE(n,t,e,i){const r=t,s=n.length,a=n[t];let o,l=2*t+1;for(;l<s;)o=l+1,o<s&&i(n[l],n[o])>=0&&(l=o),n[t]=n[l],l=2*(t=l)+1;return n[t]=a,wS(n,t,r,i)}class w4t{constructor(t){this.compare=t,this.nodes=[]}size(){return this.nodes.length}last(){return this.nodes[0]}validate(){for(let t=this.nodes.length-1;t>0;t-=1){const e=Math.floor((t-1)/2);if(this.compare(this.nodes[e],this.nodes[t])>0)return!1}return!0}push(t){if(this.nodes.includes(t)){const e=this.nodes.indexOf(t);return wS(this.nodes,e,0,this.compare),DE(this.nodes,e,null,this.compare)}return this.nodes.push(t),wS(this.nodes,this.nodes.length-1,0,this.compare)}remove(t){if(this.nodes.includes(t)){const e=this.nodes.indexOf(t);this.nodes=this.nodes.slice(0,e).concat(this.nodes.slice(e+1)),wS(this.nodes,e,0,this.compare),DE(this.nodes,e,null,this.compare)}}pop(){const t=this.nodes.pop();let e;return this.nodes.length?(e=this.nodes[0],this.nodes[0]=t,DE(this.nodes,0,null,this.compare)):e=t,e}clear(){this.nodes=[]}}class IW{constructor(t){this.list=[],this.ids={},this.idFunc=t||jIt}add(t){const e=this.idFunc(t);return this.ids[e]||(this.ids[e]=1,this.list.push(t)),this}remove(t){const e=this.idFunc(t);return this.ids[e]&&(this.ids[e]=0,this.list=this.list.filter(i=>i!==t)),this}forEach(t,e){e?this.list.slice().reverse().forEach(t):this.list.forEach(t)}filter(t){return this.list.filter(t)}get length(){return this.list.length}getElementByIndex(t){return this.list[t]}}class C4t{constructor(){this.grammars=[],this.logger=ri.getInstance(),this._curRank=0,this._committed=new IW(t=>t.uid),this._heap=new w4t((t,e)=>(t==null?void 0:t.qrank)-(e==null?void 0:e.qrank)),this._beforeRunner=null,this._afterRunner=null,this._updateCounter=0,this._finishFirstRender=!1}add(t){if(t)return this._setRankOfGrammar(t),this.commit(t),!this.grammars.includes(t)&&(this.grammars.push(t),!0)}remove(t){t&&(this._committed.remove(t),this._heap.remove(t),this.grammars=this.grammars.filter(e=>e!==t))}_setRankOfGrammar(t){t&&(t.rank=++this._curRank)}_reRank(t){const e=[t];for(;e.length;){const i=e.pop();this._setRankOfGrammar(i);const r=i.targets;r&&r.forEach(s=>{e.push(s),s===t&&this.logger.error("Cycle detected in dataflow graph.")})}}_enqueue(t){t&&(t.qrank=t.rank,this._heap.push(t))}_logGrammarRunInfo(t){if(this.logger.canLogError()){const e=[{key:"id",value:t.id()},{key:"name",value:t.name()}].reduce((i,r,s)=>F(r.value)?i:`${i}${s?" , ":""}${r.key}: ${r.value}`,"");this.logger.debug("Run Operator: ",t,e)}}hasCommitted(){return!!this._committed.length}commit(t){return this._committed.add(t),this}_beforeEvaluate(){this.grammars.forEach(t=>{t.targets.some(e=>(e==null?void 0:e.rank)<(t==null?void 0:t.rank))&&this._reRank(t)}),this._committed.forEach(t=>this._enqueue(t)),this._committed=new IW(t=>t.uid)}_enqueueTargets(t){t.targets&&t.targets.length&&this._finishFirstRender&&t.targets.forEach(e=>this._enqueue(e))}evaluate(){if(this._beforeRunner&&this._beforeRunner(this),!this._committed.length)return this.logger.info("Dataflow invoked, but nothing to do."),!1;this._updateCounter+=1;let t,e,i=0;for(this.logger.canLogInfo()&&(e=Date.now(),this.logger.debug(`-- START PROPAGATION (${this._updateCounter}) -----`)),this._beforeEvaluate();this._heap.size()>0;)t=this._heap.pop(),t&&(t.rank===t.qrank?(t.run(),this._logGrammarRunInfo(t),this._enqueueTargets(t),i+=1):this._enqueue(t));return this.logger.canLogInfo()&&(e=Date.now()-e,this.logger.info(`> ${i} grammars updated; ${e} ms`)),this._afterRunner&&this._afterRunner(this),this._finishFirstRender=!0,!0}runBefore(t){this._beforeRunner=t}runAfter(t){this._afterRunner=t}release(){this._heap&&(this._heap.clear(),this._heap=null),this.logger=null,this._committed=null}}const BE=(n,t,e,i,r)=>{const s=a=>{if(r||!a||i&&!i(a)||e.call(null,a),a.markType===Rt.group){const o=a[t];o&&o.forEach(l=>{s(l)})}r&&(!a||i&&!i(a)||e.call(null,a))};s(n)};class k4t{constructor(t){this.handleAfterNextRender=()=>{this._stage&&!this._viewOptions.disableDirtyBounds&&this._stage.enableDirtyBounds(),this._view.emit(Ht.AFTER_VRENDER_DRAW),this._view.emit(Ht.AFTER_VRENDER_NEXT_RENDER)},this._view=t}initialize(t,e,i,r){return this._width=t,this._height=e,this._viewOptions=i,this._eventConfig=r,this.initStage(),this}stage(){var t;return(t=this._stage)!==null&&t!==void 0?t:null}gestureController(){var t;return(t=this._gestureController)!==null&&t!==void 0?t:null}canvas(){return this._stage?this._stage.window.getNativeHandler().nativeCanvas:null}context(){return this._stage?this._stage.window.getContext().nativeContext:null}combineIncrementalLayers(){return this._stage&&$Mt(this._stage).then(()=>{this._stage&&this._stage.defaultLayer.combineSubLayer()}),this}background(t){if(this._stage)return this._stage.background=t,this}setDpr(t,e){var i,r;return(r=(i=this._stage)===null||i===void 0?void 0:i.setDpr)===null||r===void 0||r.call(i,t),e&&this.renderNextFrame(),this}shouldResize(t,e){return t!==this._width||e!==this._height}resize(t,e){return this._view.emit(Ht.BEFORE_STAGE_RESIZE),this.shouldResize(t,e)&&(this._width=t,this._height=e,this._stage&&this._stage.resize(t,e)),this._view.emit(Ht.AFTER_STAGE_RESIZE),this}setViewBox(t,e=!0){return this._stage?(!t||this._viewBox&&t.x1===this._viewBox.x1&&t.x2===this._viewBox.x2&&t.y1===this._viewBox.y1&&t.y2===this._viewBox.y2||(this._viewBox=t,this._stage.setViewBox(t.x1,t.y1,t.x2-t.x1,t.y2-t.y1,e)),this):this}render(t=!1){return this._view.emit(Ht.BEFORE_VRENDER_DRAW),this.initStage(),this._stage.disableDirtyBounds(),this._stage.afterNextRender(this.handleAfterNextRender),t&&(this._stage.render(),this._view.emit(Ht.AFTER_VRENDER_DRAW)),this}renderNextFrame(){return this.initStage(),this._stage.renderNextFrame(),this}toCanvas(){return this._stage?this._stage.toCanvas():null}preventRender(t){this._stage&&this._stage.preventRender(t)}release(){var t;this._view.traverseMarkTree(e=>{e.release()}),this._dragController&&this._dragController.release(),this._gestureController&&this._gestureController.release(),this._stage!==((t=this._viewOptions)===null||t===void 0?void 0:t.stage)&&this._stage.release(),this._stage=null,this._layer=null,this._dragController=null,this._gestureController=null}createStage(){var t,e,i,r,s;this._view.emit(Ht.BEFORE_CREATE_VRENDER_STAGE);const a=this._viewOptions,o=(t=a.stage)!==null&&t!==void 0?t:jRt({width:this._width,height:this._height,renderStyle:a.renderStyle,viewBox:a.viewBox,dpr:a.dpr,canvas:a.renderCanvas,canvasControled:a.canvasControled,container:a.container,title:a.rendererTitle,beforeRender:a.beforeRender,afterRender:a.afterRender,disableDirtyBounds:!0,autoRender:!0,pluginList:a.pluginList,enableHtmlAttribute:a.enableHtmlAttribute,optimize:a.optimize,ticker:a.ticker,supportsTouchEvents:a.supportsTouchEvents,supportsPointerEvents:a.supportsPointerEvents,ReactDOM:a.ReactDOM});!((e=a.options3d)===null||e===void 0)&&e.enable&&o.set3dOptions(a.options3d),o.enableIncrementalAutoRender(),this._viewBox=a.viewBox,this._view.emit(Ht.AFTER_CREATE_VRENDER_STAGE),this._view.emit(Ht.BEFORE_CREATE_VRENDER_LAYER);const l=(i=a.layer)!==null&&i!==void 0?i:o.defaultLayer;if(this._view.emit(Ht.AFTER_CREATE_VRENDER_LAYER),!((r=this._eventConfig)===null||r===void 0)&&r.drag&&(this._dragController=new WIt(o)),(s=this._eventConfig)===null||s===void 0?void 0:s.gesture){const u=ae(this._eventConfig.gesture)?this._eventConfig.gesture:{};this._gestureController=new GIt(o,u)}return{stage:o,layer:l}}initStage(){if(!this._stage){const{stage:t,layer:e}=this.createStage();this._stage=t,this._layer=e;const i=this._view.background();this.background(i)}}}function T4t(n){["touches","changedTouches","targetTouches"].forEach(e=>{n[e]&&n[e].length&&Array.from(n[e]).forEach(i=>{DW(i,LW(i),!1)})});const t=LW(n);return DW(n,t)}function LW(n){return F(n.offsetX)?F(n.x)?n.changedTouches&&n.changedTouches.length?E4t(n):{canvasX:0,canvasY:0}:P4t(n):M4t(n)}function M4t(n){return{canvasX:n.offsetX,canvasY:n.offsetY}}function P4t(n){return{canvasX:n.x,canvasY:n.y}}function E4t(n){return{canvasX:n.changedTouches[0].x,canvasY:n.changedTouches[0].y}}function DW(n,t,e=!0){return st(t.canvasX)&&Object.defineProperty(n,"canvasX",{value:t.canvasX,writable:!0}),st(t.canvasY)&&Object.defineProperty(n,"canvasY",{value:t.canvasY,writable:!0}),e&&st(t.clientX)&&Object.defineProperty(n,"clientX",{value:t.clientX,writable:!0}),e&&st(t.clientY)&&Object.defineProperty(n,"clientY",{value:t.clientY,writable:!0}),[t.canvasX,t.canvasY]}function oD(n,t,e,i,r){if(r===Bd){const s=t.changedTouches?t.changedTouches[0]:t;T4t(s)}return t.element=e,t}class O4t extends nT{constructor(){super(...arguments),this.grammarType="signal",this.spec={value:null,update:null}}parse(t){return super.parse(t),this.value(t.value),this.update(t.update),this.commit(),this}evaluate(t,e){return this._signal=this.spec.update?en(this.spec.update,e,this._signal):this.spec.value,this.spec.value=this._signal,this}output(){return this._signal}getValue(){return this.output()}set(t){if(ut(t)&&ut(this.value)&&t.length===this.value.length){for(let e=0;e<t.length;e++)if(this.value[e]!==t[e])return this._signal=t,this.spec.value=t,!0;return!1}return this._signal!==t&&(this._signal=t,this.spec.value=t,!0)}update(t){return F(t)||this.value(void 0),this.setFunctionSpec(t,"update")}value(t){return F(t)||this.update(void 0),this.spec.value=t,this.commit(),this}reuse(t){return t.grammarType!==this.grammarType||(this._signal=t.output()),this}clear(){super.clear(),this._signal=null}}let R4t=-1;const BW=[Ph,Eh,Ba,yg,bg,RF,B0],I4t=(n,t,e)=>{var i,r,s,a,o;return[{id:Ph,value:(i=n[Ph])!==null&&i!==void 0?i:0},{id:Eh,value:(r=n[Eh])!==null&&r!==void 0?r:0},{id:Ba,value:Oh((a=(s=n[Ba])!==null&&s!==void 0?s:t[Ba])!==null&&a!==void 0?a:e==null?void 0:e.padding)},{id:yg,update:{callback:(l,u)=>{const h=Oh(u[Ba]);return u[Ph]-h.left-h.right},dependency:[Ph,Ba]}},{id:bg,update:{callback:(l,u)=>{const h=Oh(u[Ba]);return u[Eh]-h.top-h.bottom},dependency:[Eh,Ba]}},{id:RF,update:{callback:(l,u)=>{const h=Oh(u[Ba]);return(l||new Fn).setValue(h.left,h.top,h.left+u[yg],h.top+u[bg])},dependency:[yg,bg,Ba]}},{id:B0,value:(o=n[B0])!==null&&o!==void 0?o:t[B0]}]},Oh=n=>{var t,e,i,r;return Mt(n)?{top:n,bottom:n,left:n,right:n}:{top:(t=n==null?void 0:n.top)!==null&&t!==void 0?t:0,bottom:(e=n==null?void 0:n.bottom)!==null&&e!==void 0?e:0,left:(i=n==null?void 0:n.left)!==null&&i!==void 0?i:0,right:(r=n==null?void 0:n.right)!==null&&r!==void 0?r:0}},L4t=n=>{var t;const e=(i,r)=>{var s,a;i.group=r;const o=(s=i.id)!==null&&s!==void 0?s:"VGRAMMAR_MARK_"+ ++R4t;i.id=o,((a=i.marks)!==null&&a!==void 0?a:[]).forEach(l=>e(l,o))};return((t=n.marks)!==null&&t!==void 0?t:[]).forEach(i=>e(i,"root")),n},D4t=n=>{var t,e,i,r,s;const{reuse:a=P5t,morph:o=E5t,morphAll:l=O5t,animation:u={},enableExitAnimation:h=I5t}=n??{};return{reuse:a,morph:o,morphAll:l,animation:{easing:(t=u.easing)!==null&&t!==void 0?t:sD,delay:(e=u.delay)!==null&&e!==void 0?e:nD,duration:(i=u.duration)!==null&&i!==void 0?i:Ptt,oneByOne:(r=u.oneByOne)!==null&&r!==void 0?r:rD,splitPath:(s=u.splitPath)!==null&&s!==void 0?s:R5t},enableExitAnimation:h}},B4t=n=>F(n.markId)?t=>t&&t.mark.id()===n.markId:F(n.markName)?t=>t&&t.mark.name()===n.markName:F(n.type)?t=>t&&t.mark.markType===n.type:()=>!0,F4t=(n,t)=>t&&t.debounce?Ml(n,t.debounce):t&&t.throttle?Pc(n,t.throttle):n,j4t="@",N4t="#",z4t=(n,t=xd)=>{const e={},i=n.split(":");if(i.length===2){const[r,s]=i;r[0]==="#"?(e.markId=r.slice(1),e.source=t):r[0]==="@"?(e.markName=r.slice(1),e.source=t):Ett(r)?(e.markType=r,e.source=t):e.source=r===Bd?Bd:t,e.type=s}else i.length===1&&(e.type=n,e.source=t);return e};function H4t(n){n.mode&&_e.setEnv(n.mode,n.modeParams||{})}class V4t extends Rtt{constructor(t){super(t),this.getStateAttrs=(e,i)=>{var r,s,a,o;const l=!F((r=this.runtimeStatesEncoder)===null||r===void 0?void 0:r[e]),u=l?Object.assign(Object.assign({},(s=this.mark.getSpec().encode)===null||s===void 0?void 0:s[e]),this.runtimeStatesEncoder[e]):(a=this.mark.getSpec().encode)===null||a===void 0?void 0:a[e],h={};if(!u)return h;if(ft(u))return h.attributes=u(this.getDatum(),this,e,i),h;if(!l&&(!((o=this.graphicItem.glyphStates)===null||o===void 0)&&o[e]))return this.graphicItem.glyphStates[e];if(u){const c=this.items[0],d=[Object.assign({},c,{nextAttrs:{}})];return tu(this,d,u,this.mark.parameters()),this.coordinateTransformEncode(d),h.attributes=d[0].nextAttrs,this.graphicItem.glyphStates?this.graphicItem.glyphStates[e]||(this.graphicItem.glyphStates[e]=h):this.graphicItem.glyphStates={[e]:h},h}return h},this.glyphMeta=this.mark.getGlyphMeta()}getGlyphGraphicItems(){return this.glyphGraphicItems}initGraphicItem(t={}){if(this.graphicItem)return;this.graphicItem=this.mark.addGraphicItem(t,this.groupKey),this.graphicItem[sp]=this,this.graphicItem.onBeforeAttributeUpdate=this._onGlyphAttributeUpdate(!1);const e=this.glyphMeta.getMarks();this.glyphGraphicItems={},this.graphicItem.getSubGraphic().forEach(i=>{const r=e[i.name];this.glyphGraphicItems[i.name]=i,i.onBeforeAttributeUpdate=s=>this.mark?hC(r,s,this,i.name):s}),this.clearGraphicAttributes()}useStates(t,e){if(!this.graphicItem)return!1;this.mark.emit(Ht.BEFORE_ELEMENT_STATE,{states:t},this),this.states=t.slice();const i=Si(e)?e:this.mark.animate.getAnimationConfigs("state").length!==0;return this.graphicItem.glyphStateProxy=this.getStateAttrs,this.graphicItem.useStates(this.states,i),this.mark.emit(Ht.AFTER_ELEMENT_STATE,{states:t},this),!0}encodeGraphic(){this.coordinateTransformEncode(this.items);const t=this.transformElementItems(this.items,this.mark.markType);this.graphicItem||this.initGraphicItem(),this.diffState===Ve.enter?(this.graphicItem.onBeforeAttributeUpdate=this._onGlyphAttributeUpdate(!0),this.applyGraphicAttributes(t),this.graphicItem.onBeforeAttributeUpdate=this._onGlyphAttributeUpdate(!1)):this.applyGraphicAttributes(t),this.diffState!==Ve.enter&&this.diffState!==Ve.update||!this.states.length||(Object.values(this.glyphGraphicItems).forEach(e=>{e.states={}}),this.useStates(this.states)),this.items.map(e=>{e.nextAttrs={}})}encodeCustom(t){var e;let i={};const r=this.glyphMeta.getChannelEncoder(),s=this.glyphMeta.getFunctionEncoder();if(s&&(i=s.call(null,Object.assign({},(e=this.graphicItem)===null||e===void 0?void 0:e.attribute,t),this.getDatum(),this,this.mark.getGlyphConfig())),r){let a;Object.keys(r).forEach(o=>{var l;if(!F(t[o])){a||(a=Object.assign({},(l=this.graphicItem)===null||l===void 0?void 0:l.attribute,t));const u=r[o].call(null,o,t[o],a,this.getDatum(),this,this.mark.getGlyphConfig());Object.keys(u??{}).forEach(h=>{var c;i[h]=Object.assign((c=i[h])!==null&&c!==void 0?c:{},u[h])})}})}return i}encodeDefault(){const t={};if(this.diffState===Ve.enter&&this.glyphMeta.getDefaultEncoder()){const e=this.glyphMeta.getDefaultEncoder().call(null,this.getDatum(),this,this.mark.getGlyphConfig());Object.assign(t,e)}return t}_onGlyphAttributeUpdate(t=!1){return e=>{if(!this.mark)return e;const i=this.glyphMeta.getMarks(),r=hC(this.mark.getAttributeTransforms(),e,this),s=t?this.encodeDefault():null,a=this.encodeCustom(e);return Object.keys(i).forEach(o=>{const l=i[o],u=this.glyphGraphicItems[o],h=a==null?void 0:a[o],c=Object.assign({},h);if(t){const g=s==null?void 0:s[o];Object.keys(g??{}).forEach(_=>{Co(this.items[0].nextAttrs,_)||Co(c,_)||(c[_]=g[_])})}const d=Object.assign({},X5t(l,e),c),p=this._generateGlyphItems(l,this.items,d);this.coordinateTransformEncode(p);const f=this.transformElementItems(p,l);this.applyGlyphGraphicAttributes(f,o,u),l===Rt.shape&&(u.datum=p[0].datum)}),r}}_generateGlyphItems(t,e,i){const r=e.map(s=>Object.assign({},s,{nextAttrs:i}));return Mtt.includes(t)&&this.mark.getSpec().enableSegments&&r.forEach((s,a)=>{s.nextAttrs=Object.assign({},e[a].nextAttrs,i)}),r}getGraphicAttribute(t,e=!1,i){if(!this.graphicItem)return;const r=this.getPrevGraphicAttributes(i);return e&&Co(r,t)?r[t]:(i?this.glyphGraphicItems[i]:this.graphicItem).attribute[t]}setGraphicAttribute(t,e,i=!0,r){if(!this.graphicItem)return;const s=r?this.glyphGraphicItems[r]:this.graphicItem,a=this.getFinalGraphicAttributes(r),o=this.getPrevGraphicAttributes(r);i&&(a[t]=e),Co(o,t)||(o[t]=s.attribute[t]),s.setAttribute(t,e)}setGraphicAttributes(t,e=!0,i){if(!this.graphicItem)return;const r=i?this.glyphGraphicItems[i]:this.graphicItem,s=this.getFinalGraphicAttributes(i),a=this.getPrevGraphicAttributes(i);Object.keys(t).forEach(o=>{e&&(s[o]=t[o]),Co(a,o)||(a[o]=r.attribute[o])}),r.setAttributes(t)}diffAttributes(t,e){const i={},r=this.getFinalGraphicAttributes(e);for(const s in t)L2(s,r,t)||(i[s]=t[s]);return i}applyGlyphGraphicAttributes(t,e,i){var r,s;if(this.mark.needAnimate()){const a=this.diffAttributes(t,e),o=(r=this.getPrevGraphicAttributes(e))!==null&&r!==void 0?r:{},l=(s=this.getFinalGraphicAttributes(e))!==null&&s!==void 0?s:{};Object.keys(a).forEach(u=>{o[u]=i.attribute[u],l[u]=a[u]}),this.setNextGraphicAttributes(a,e),this.setPrevGraphicAttributes(o,e),this.setFinalGraphicAttributes(l,e),i.setAttributes(a)}else i.setAttributes(t)}getFinalGraphicAttributes(t){return(t?this.glyphGraphicItems[t]:this.graphicItem).finalAttrs}setFinalGraphicAttributes(t,e){(e?this.glyphGraphicItems[e]:this.graphicItem).finalAttrs=t}getPrevGraphicAttributes(t){return(t?this.glyphGraphicItems[t]:this.graphicItem).prevAttrs}setPrevGraphicAttributes(t,e){(e?this.glyphGraphicItems[e]:this.graphicItem).prevAttrs=t}getNextGraphicAttributes(t){return(t?this.glyphGraphicItems[t]:this.graphicItem).nextAttrs}setNextGraphicAttributes(t,e){(e?this.glyphGraphicItems[e]:this.graphicItem).nextAttrs=t}clearChangedGraphicAttributes(){this.setPrevGraphicAttributes(null),this.setNextGraphicAttributes(null),Object.keys(this.glyphGraphicItems).forEach(t=>{this.setPrevGraphicAttributes(null,t),this.setNextGraphicAttributes(null,t)})}clearGraphicAttributes(){this.setPrevGraphicAttributes(null),this.setNextGraphicAttributes(null),this.setFinalGraphicAttributes(null),Object.keys(this.glyphGraphicItems).forEach(t=>{this.setPrevGraphicAttributes(null,t),this.setNextGraphicAttributes(null,t),this.setFinalGraphicAttributes(null,t)})}remove(){this.glyphGraphicItems=null,super.remove()}release(){this.glyphGraphicItems&&(Object.values(this.glyphGraphicItems).forEach(t=>{t[sp]=null}),this.glyphGraphicItems=null),super.release()}}const CS=n=>n.markType===Rt.glyph?new V4t(n):new Rtt(n);function pu(n,t,e){const i=new Map;if(!n||n.length===0)return{keys:[],data:i};if(!t)return i.set(Ms,e?n.slice().sort(e):n.slice()),{keys:M5t,data:i};const r=_g(t);if(n.length===1){const a=r(n[0]);return i.set(a,[n[0]]),{keys:[a],data:i}}const s=new Set;return n.forEach(a=>{var o;const l=r(a),u=(o=i.get(l))!==null&&o!==void 0?o:[];u.push(a),i.set(l,u),s.add(l)}),e&&s.forEach(a=>{i.get(a).sort(e)}),{keys:Array.from(s),data:i}}class IF{constructor(t,e,i){this.prevData=t!=null&&t.length?pu(t,e??null,i):null}setCurrentData(t){this.currentData=t}getCurrentData(){return this.currentData}doDiff(){if(this.callback)if(this.currentData&&this.prevData){const t=new Map(this.prevData.data);this.currentData.keys.forEach(e=>{this.callback(e,this.currentData.data.get(e),t.get(e)),t.delete(e)}),this.prevData.keys.forEach(e=>{t.has(e)&&this.callback(e,null,t.get(e))})}else this.currentData?this.currentData.keys.forEach(t=>{this.callback(t,this.currentData.data.get(t),null)}):this.prevData&&this.prevData.keys.forEach(t=>{this.callback(t,null,this.prevData.data.get(t))})}setCallback(t){this.callback=t}updateToCurrent(){this.prevData=this.currentData,this.currentData=null}reset(){this.prevData=null}}function W4t(n,t,e){const i={enter:[],exit:[],update:[]},r=new IF(n,e);return r.setCallback((s,a,o)=>{F(a)?i.exit.push({prev:o[0]}):F(o)?i.enter.push({next:a[0]}):i.update.push({next:a[0],prev:o[0]})}),r.setCurrentData(pu(t,e)),r.doDiff(),i}function $4t(n,t,e){const i={enter:[],exit:[],update:[]},r=new IF(n,e);return r.setCallback((s,a,o)=>{F(a)?i.exit.push({prev:o}):F(o)?i.enter.push({next:a}):i.update.push({next:a,prev:o})}),r.setCurrentData(pu(t,e)),r.doDiff(),i}const Dtt=(n,t)=>{if(!n)return null;if(n.from){const e=n.from,i=Object.keys(e);i.forEach(s=>{F(e[s])&&delete e[s]});const r=lC(i,t.mark.markType)&&!z(e.segments);if(r){const s=t.items.map(a=>Object.assign({},a,{nextAttrs:Object.assign({},e)}));n.from=t.transformElementItems(s,t.mark.markType,r)}}if(n.to){const e=n.to,i=Object.keys(e);i.forEach(s=>{F(e[s])&&delete e[s]});const r=lC(i,t.mark.markType)&&!z(e.segments);if(r){const s=t.items.map(a=>Object.assign({},a,{nextAttrs:Object.assign({},e)}));n.to=t.transformElementItems(s,t.mark.markType,r)}}return n};function G4t(n,t,e,i){const r=ft(t.options)?t.options.call(null,n.getDatum(),n,i):t.options;if(!t.type||!Ct.getAnimationType(t.type))return null;const s=Ct.getAnimationType(t.type)(n,r,e);return Dtt(s,n)}const FW=(n,t,e,i,r)=>ft(e)?e(n.getDatum(),n,r):e;function U4t(n,t,e,i){const r=t.channel;let s=null;return ut(r)?s=r.reduce((a,o)=>(a.from[o]=n.getGraphicAttribute(o,!0),a.to[o]=n.getGraphicAttribute(o,!1),a),{from:{},to:{}}):ae(r)&&(s=Object.keys(r).reduce((a,o)=>{var l,u;const h=!F((l=r[o])===null||l===void 0?void 0:l.from),c=!F((u=r[o])===null||u===void 0?void 0:u.to);return(h||c)&&(a.from[o]=h?FW(n,0,r[o].from,0,i):void 0,a.to[o]=c?FW(n,0,r[o].to,0,i):n.getGraphicAttribute(o,!1)),a},{from:{},to:{}})),Dtt(s,n)}class Y4t extends ms{constructor(t,e,i,r,s){super(t,e,i,r,s),this._interpolator=s==null?void 0:s.interpolator,this._element=s==null?void 0:s.element}onBind(){var t,e;this.from=(t=this.from)!==null&&t!==void 0?t:{},this.to=(e=this.to)!==null&&e!==void 0?e:{}}getEndProps(){return this.to}onUpdate(t,e,i){this._interpolator&&this._element&&this._interpolator.call(this,e,this.from,this.to,i,this._element.getDatum(),this._element,this.params.parameters)}}class X4t extends ms{getEndProps(){return this.to}onBind(){var t;const e=(t=this.target.constructor.NOWORK_ANIMATE_ATTR)!==null&&t!==void 0?t:Ar,i=Object.keys(e).filter(o=>e[o]!==0);this.subAnimate.animate.preventAttrs(i);const r=Object.assign({},this.from),s=Object.assign({},this.to),a=[];Object.keys(s).forEach(o=>{i.includes(o)?(r[o]=s[o],this.from[o]=s[o]):F(r[o])?r[o]=this.target.getComputedAttribute(o):a.push(o)}),this.target.animates.forEach(o=>{o!==this.subAnimate.animate&&o.preventAttrs(a)}),this._fromAttribute=r,this._toAttribute=s}onStart(){if(this._fromAttribute){const t={};Object.keys(this._fromAttribute).forEach(e=>{this.subAnimate.animate.validAttr(e)&&(t[e]=this._fromAttribute[e])}),this.target.setAttributes(t,!1,{type:ji.ANIMATE_UPDATE,animationState:{ratio:0,end:!1}})}}onEnd(){if(this._toAttribute){const t={};Object.keys(this._toAttribute).forEach(e=>{this.subAnimate.animate.validAttr(e)&&(t[e]=this._toAttribute[e])}),this.target.setAttributes(t,!1,{type:ji.ANIMATE_END})}}update(t,e,i){this.updateCount===0&&this.onFirstRun(),this.updateCount+=1;const r=this.step.getLastProps();Object.keys(r).forEach(s=>{this.subAnimate.animate.validAttr(s)&&(i[s]=r[s])}),this.onUpdate(t,e,i),t&&this.onEnd()}onUpdate(t,e,i){this.target.stepInterpolate(this.subAnimate,this.subAnimate.animate,i,this.step,e,t,this._toAttribute,this._fromAttribute)}}HA.mode|=$g.SET_ATTR_IMMEDIATELY;let K4t=0;const jW=n=>!F(n)&&!F(n.prototype)&&(n.prototype instanceof ms||"onBind"in n.prototype&&"onStart"in n.prototype&&"onEnd"in n.prototype&&"onUpdate"in n.prototype);class q4t{constructor(t,e,i){this.id=K4t++,this.isAnimating=!1,this.runnings=[],this.element=t,this.animationOptions=i,this.unit=e}callback(t){return this.callbackFunction=t,this}animate(t,e){return this.isAnimating=!0,this.animateElement(t,e),this.runnings.length===0&&this.animationEnd(),this}stop(t="end",e=!0){return this.runnings.forEach(i=>i.stop(t)),this.animationEnd(e),this}pause(){return this.runnings.forEach(t=>t.pause()),this}resume(){return this.runnings.forEach(t=>t.resume()),this}startAt(t){return this.runnings.forEach(e=>{const i=this.unit.initialDelay;e.startAt(i+t)}),this}getTotalAnimationTime(){var t;const e=this.unit.initialDelay+this.unit.loopDuration*this.unit.loopCount;return(t=this.unit.totalTime)!==null&&t!==void 0?t:e}getEndAttributes(){return this.runnings.reduce((t,e)=>Object.assign(t,e.getEndProps()),{})}animationEnd(t=!0){var e;this.isAnimating=!1,this.runnings=null,t&&((e=this.callbackFunction)===null||e===void 0||e.call(null))}animateElement(t,e){const i=this.element.getGraphicItem();if(!i)return;const r=i.animate();this.runnings.push(r),r.startAt(this.unit.initialDelay),r.wait(this.unit.loopDelay),this.unit.timeSlices.forEach(s=>{this.animateTimeSlice(r,s,t,e)}),r.wait(this.unit.loopDelayAfter),r.loop(this.unit.loopCount-1),st(this.unit.totalTime)&&setTimeout(()=>{r&&r.stop("end")},this.unit.totalTime),r.onEnd(()=>{this.runnings=this.runnings.filter(s=>s!==r),this.runnings.length===0&&this.animationEnd()})}animateTimeSlice(t,e,i,r){const s=e.delay,a=e.delayAfter,o=e.duration,l=e.effects;if(s>0&&t.wait(s),l.length<0)t.wait(o);else{const u=l.map((h,c)=>{var d;const p=(d=h.type?G4t(this.element,h,i,r):h.channel?U4t(this.element,h,i,r):void 0)!==null&&d!==void 0?d:{},f=p.custom||(h==null?void 0:h.custom),g=(p==null?void 0:p.customParameters)||(h==null?void 0:h.customParameters);p.from&&Object.keys(p.from).length&&this.unit&&this.animationOptions.timeline.controlOptions.immediatelyApply&&this.element.mark.markType!=="component"&&this.element.getGraphicItem().setAttributes(p.from);const _=jW(f);return!F(f)&&!jW(f)?new Y4t(p.from,p.to,o,h.easing,{interpolator:f,element:this.element,parameters:g}):_?new f(p.from,p.to,o,h.easing,g):p.to?new X4t(p.from,p.to,o,h.easing):void 0}).filter(h=>!F(h));u.length===1?t.play(u[0]):u.length>1&&t.play(new lMt(o,u))}a>0&&t.wait(a)}}function Z4t(n){var t,e,i,r,s,a,o,l,u,h,c,d;if(F(n.timeSlices)){const f=n;return{startTime:(t=f.startTime)!==null&&t!==void 0?t:AW,totalTime:f.totalTime,oneByOne:(e=f.oneByOne)!==null&&e!==void 0?e:rD,loop:(i=f.loop)!==null&&i!==void 0?i:CW,controlOptions:gt({},kW,(r=f.controlOptions)!==null&&r!==void 0?r:{}),timeSlices:[{duration:(s=f.duration)!==null&&s!==void 0?s:Ptt,delay:(a=f.delay)!==null&&a!==void 0?a:nD,delayAfter:(o=f.delayAfter)!==null&&o!==void 0?o:wW,effects:[{type:f.type,channel:f.channel,custom:f.custom,easing:(l=f.easing)!==null&&l!==void 0?l:sD,customParameters:f.customParameters,options:f.options}]}]}}const p=ot(n.timeSlices).filter(f=>f.effects&&ot(f.effects).filter(g=>g.channel||g.type).length);if(p.length)return{startTime:(u=n.startTime)!==null&&u!==void 0?u:AW,totalTime:n.totalTime,oneByOne:(h=n.oneByOne)!==null&&h!==void 0?h:rD,loop:(c=n.loop)!==null&&c!==void 0?c:CW,controlOptions:gt({},kW,(d=n.controlOptions)!==null&&d!==void 0?d:{}),timeSlices:p.map(f=>{var g,_;return{duration:f.duration,delay:(g=f.delay)!==null&&g!==void 0?g:nD,delayAfter:(_=f.delayAfter)!==null&&_!==void 0?_:wW,effects:ot(f.effects).filter(v=>v.channel||v.type).map(v=>{var y;return{type:v.type,channel:v.channel,custom:v.custom,easing:(y=v.easing)!==null&&y!==void 0?y:sD,customParameters:v.customParameters,options:v.options}})}}),partitioner:n.partitioner,sort:n.sort}}function NW(n){let t=[];return Object.keys(n).forEach(e=>{t=t.concat(Btt(e,n[e]))}),t}function Btt(n,t,e=0){const i=[];let r=e;return ot(t).forEach(s=>{var a;const o=Z4t(s);o&&(i.push({state:n,id:(a=o.id)!==null&&a!==void 0?a:`${n}-${r}`,timeline:o,originConfig:s}),r+=1)}),i}function lh(n,t,e){return ft(n)?n.call(null,t.getDatum(),t,e):n}class zW{constructor(t){this.parallelArrangers=[this],this.totalTime=0,this.startTime=0,this.endTime=0,this.animators=t.filter(e=>!F(e)),this.totalTime=this.animators.reduce((e,i)=>Math.max(e,i.getTotalAnimationTime()),0)}parallel(t){const e=Array.from(new Set(this.parallelArrangers.concat(t.parallelArrangers)));return e.forEach(i=>{i.parallelArrangers=e}),this.arrangeTime(),this}after(t){return this.afterArranger=t,this.arrangeTime(),this}arrangeTime(){const t=this.parallelArrangers.reduce((i,r)=>Math.max(i,r.totalTime),this.totalTime),e=this.parallelArrangers.reduce((i,r)=>{var s,a;return Math.max(i,(a=(s=r.afterArranger)===null||s===void 0?void 0:s.endTime)!==null&&a!==void 0?a:0)},0);this.parallelArrangers.forEach(i=>{i.startTime=e,i.endTime=e+t,i.animators.forEach(r=>{r.startAt(e)})})}}class HW{constructor(t,e){this.state=null,this.immediateConfigs=[],this.isEnabled=!0,this.disabledStates=[],this.animators=new Map,this.elementRecorder=new WeakMap,this.timelineCount={},this.mark=t,this.configs=NW(e??{})}getAnimationConfigs(t){var e;return this.isEnabled?((e=this.configs)!==null&&e!==void 0?e:[]).filter(i=>i.state===t):[]}updateConfig(t){this.configs=NW(t??{})}updateState(t){this.state=t}animate(){if(!this.isEnabled||!this.configs||!this.configs.length)return;const t=this.mark.getAllElements(),e=this.mark.parameters();return t.forEach(i=>{var r;i.isReserved&&i.diffState!==Ve.exit&&(i.isReserved=!1);const s=(r=this.elementRecorder.get(i))===null||r===void 0?void 0:r.prevState;this.configs.some(a=>s!==i.diffState&&a.state===s&&a.timeline.controlOptions.stopWhenStateChange)&&this.clearElementAnimation(i,!1)}),this.configs.forEach(i=>{this.animateByTimeline(i,t,e)}),this.mark.cleanExitElements(),this}runAnimationByState(t){if(!this.isEnabled)return;const e=this.configs.filter(a=>a.state===t),i=this.mark.getAllElements(),r=this.mark.parameters(),s=e.reduce((a,o)=>a.concat(this.animateByTimeline(o,i,r,!0)),[]);return new zW(s)}stopAnimationByState(t){const e=this.animators.get(t);return e&&e.forEach(i=>i.stop()),this}pauseAnimationByState(t){const e=this.animators.get(t);return e&&e.forEach(i=>i.pause()),this}resumeAnimationByState(t){const e=this.animators.get(t);return e&&e.forEach(i=>i.resume()),this}run(t){if(!this.isEnabled)return;const e=Btt(SW,t,this.immediateConfigs.length);this.immediateConfigs=this.immediateConfigs.concat(e);const i=this.mark.getAllElements(),r=this.mark.parameters(),s=e.reduce((a,o)=>a.concat(this.animateByTimeline(o,i,r,!0)),[]);return new zW(s)}stop(){return this.animators.forEach(t=>{t.forEach(e=>e.stop())}),this}pause(){return this.animators.forEach(t=>t.forEach(e=>e.pause())),this}resume(){return this.animators.forEach(t=>t.forEach(e=>e.resume())),this}reverse(){return this}restart(){return this}record(){return this}recordEnd(){return this}isAnimating(){let t=!1;return this.animators.forEach(e=>{t=t||e.some(i=>i.isAnimating)}),t}isElementAnimating(t){var e;const i=(e=this.elementRecorder.get(t))===null||e===void 0?void 0:e.count;return F(i)||Object.values(i).every(r=>r===0)}getAnimatorCount(){let t=0;return this.animators.forEach(e=>t+=e.length),t}getAllAnimators(){const t=[];return this.animators.forEach(e=>{t.push(...e)}),t}getElementAnimators(t,e){var i;const r=ot(t);let s=[];return e?s=(i=this.animators.get(e))!==null&&i!==void 0?i:[]:this.animators.forEach(a=>{s=s.concat(a)}),s.filter(a=>r.includes(a.element))}enable(){return this.isEnabled=!0,this}disable(){return this.isEnabled=!1,this.stop(),this.animators.clear(),this}enableAnimationState(t){const e=ot(t);return this.disabledStates=this.disabledStates.filter(i=>!e.includes(i)),this}disableAnimationState(t){const e=ot(t);return this.disabledStates=this.disabledStates.concat(e),this}release(){this.stop(),this.animators.clear(),this.configs=null,this.animators=null,this.elementRecorder=null,this.timelineCount=null}animateByTimeline(t,e,i,r=!1){var s;const a=[],o=e.filter(l=>{const u=!(l.isReserved&&l.diffState===Ve.exit),h=this.getAnimationState(l),c=!this.disabledStates.includes(h),d=r||h===t.state,p=!t.timeline.partitioner||t.timeline.partitioner(l.getDatum(),l,i);return u&&c&&d&&p});if(o.length){F(this.timelineCount[t.id])&&(this.timelineCount[t.id]=0),t.timeline.sort&&o.sort((u,h)=>t.timeline.sort(u.getDatum(),h.getDatum(),u,h,i));const l={width:this.mark.view.width(),height:this.mark.view.height(),group:(s=this.mark.group)!==null&&s!==void 0?s:null,mark:this.mark,view:this.mark.view,elementCount:o.length,elementIndex:0};o.forEach((u,h)=>{l.elementIndex=h;const c=Object.assign({[L5t]:l},i),d=this.getAnimationUnit(t.timeline,u,h,o.length,c);a.push(this.animateElement(t,d,u,l,c))})}return a}animateElement(t,e,i,r,s){var a,o;const l=new q4t(i,e,t);if(l.animate(r,s),!l.isAnimating)return;i.diffState===Ve.exit&&(i.isReserved=!0);const u=this.timelineCount[t.id]===0;this.timelineCount[t.id]+=1;const h=(a=this.elementRecorder.get(i))!==null&&a!==void 0?a:{prevState:t.state,count:{}};h.prevState=t.state,h.count[t.state]=((o=h.count[t.state])!==null&&o!==void 0?o:0)+1,this.elementRecorder.set(i,h);const c=this.animators.get(t.state);c?c.push(l):this.animators.set(t.state,[l]),l.callback(()=>{this.handleAnimatorEnd(l)});const d={mark:this.mark,animationState:t.state,animationConfig:t.originConfig};return u&&this.mark.emit(Ht.ANIMATION_START,d),this.mark.emit(Ht.ELEMENT_ANIMATION_START,d,i),l}getAnimationState(t){const e=en(this.state,this.mark.parameters(),t.getDatum(),t);return e??t.diffState}getAnimationUnit(t,e,i,r,s){const a=[],o=lh(t.startTime,e,s),l=lh(t.totalTime,e,s),u=lh(t.oneByOne,e,s),h=lh(t.loop,e,s);let c=0;t.timeSlices.forEach(p=>{var f;const g=lh(p.delay,e,s),_=lh(p.delayAfter,e,s),v=(f=lh(p.duration,e,s))!==null&&f!==void 0?f:l/r,y=ot(p.effects).map(b=>Object.assign({},b,{customParameters:lh(b.customParameters,e,s)}));a.push({effects:y,duration:v,delay:g,delayAfter:_}),c+=g+v+_});const d=Mt(u)?u:u===!0?c:0;return{initialDelay:o,loopCount:Mt(h)?h:h===!0?1/0:1,loopDelay:d*i,loopDelayAfter:d*(r-i-1),loopAnimateDuration:c,loopDuration:c+d*(r-1),totalTime:l,timeSlices:a}}clearElementAnimation(t,e=!0){this.animators.forEach(i=>{i.forEach(r=>{r.element===t&&(r.animationOptions.state===Ve.exit?r.stop("start",!1):r.stop("end",!1),this.handleAnimatorEnd(r,e))})}),this.elementRecorder.delete(t)}clearAllElements(){const t=this.mark.getAllElements();t&&t.forEach((e,i)=>{this.clearElement(e,i===t.length-1)})}clearElement(t,e=!0){this.clearElementAnimation(t),t.getGraphicItem()&&(t.clearGraphicAttributes(),t.diffState===Ve.exit&&(t.isReserved=!1),e&&this.mark.cleanExitElements())}handleAnimatorEnd(t,e=!0){const i=t.element,r=t.animationOptions,s=r.state,a=s===SW,o=this.elementRecorder.get(i).count;o[s]-=1,this.animators.set(s,this.animators.get(s).filter(c=>c!==t)),this.animators.get(s).length===0&&this.animators.delete(s),this.timelineCount[r.id]-=1;const l=this.timelineCount[r.id]===0,u=a?this.immediateConfigs.find(c=>c.id===r.id).originConfig:this.configs.find(c=>c.id===r.id).originConfig;l&&(delete this.timelineCount[r.id],a&&(this.immediateConfigs=this.immediateConfigs.filter(c=>c.id!==r.id))),e&&(Object.keys(this.timelineCount).length===0?this.clearAllElements():s===Ve.exit&&o[Ve.exit]===0&&this.clearElement(i));const h={mark:this.mark,animationState:s,animationConfig:u};l&&this.mark.emit(Ht.ANIMATION_END,h),this.mark.emit(Ht.ELEMENT_ANIMATION_END,h,i)}}class jm extends nT{constructor(t,e,i){super(t),this.grammarType="mark",this.elements=[],this.elementMap=new Map,this.isUpdated=!0,this._isReentered=!1,this.animate=new HW(this,{}),this.differ=new IF([]),this.markType=e,this.spec.type=e,this.spec.encode={update:{}},this.spec.group=i,i&&(this.group=i,this.attach(i),i.appendChild(this))}parse(t){var e,i,r;if(super.parse(t),this.spec.group){const a=It(this.spec.group)?this.view.getMarkById(this.spec.group):this.spec.group;this.detach(a)}const s=It(t.group)?this.view.getMarkById(t.group):t.group;return this.attach(s),this.join((e=t.from)===null||e===void 0?void 0:e.data,t.key,t.sort,t.groupBy,t.groupSort),this.coordinate(t.coordinate),this.state(t.state,this.spec.stateSort),Object.keys((i=this.spec.encode)!==null&&i!==void 0?i:{}).forEach(a=>{this.encodeState(a,{},!0)}),Object.keys((r=t.encode)!==null&&r!==void 0?r:{}).forEach(a=>{this.encodeState(a,t.encode[a])}),this.animation(t.animation),this.animationState(t.animationState),this.morph(t.morph,t.morphKey,t.morphElementKey),this.layout(t.layout),this.configure(t),this.transform(t.transform),this.parseAddition(t),this.spec=t,this.markType=t.type,this.commit(),this}parameters(){var t;return(t=this._finalParameters)!==null&&t!==void 0?t:super.parameters()}parseAddition(t){return this}reuse(t){if(t.grammarType!==this.grammarType)return this;const e=t;return this.markType=e.markType,this.coord=e.coord,this.elementMap=e.elementMap,this.elements=e.elements,this.elementMap.forEach(i=>i.mark=this),this.differ=e.differ,this.animate=e.animate,this.animate.mark=this,this._context=e._context,this.graphicItem=e.graphicItem,this.graphicIndex=e.graphicIndex,this.graphicParent=e.graphicParent,this.needClear=e.needClear,this.isUpdated=e.isUpdated,this}needLayout(){return!F(this.spec.layout)}handleLayoutEnd(){}handleRenderEnd(){this.needClear&&(this.cleanExitElements(),this.elementMap.forEach(t=>{t.diffState===Ve.exit?t.clearGraphicAttributes():t.clearChangedGraphicAttributes()}),this.differ.updateToCurrent(),this.needClear=!1)}evaluateMainTasks(t,e){var i;if(this.needSkipBeforeLayout()&&this.view.getLayoutState()===ru.before)return this;const r=(i=this.view.renderer)===null||i===void 0?void 0:i.stage();this.init(r,e);const s=this.evaluateTransform(this._getTransformsBeforeJoin(),t??AS,e);let a=s!=null&&s.progressive?t:s;return this.evaluateGroup(a),this.renderContext=this.parseRenderContext(a,e),this.renderContext.progressive?(this.differ.reset(),this.elementMap.clear(),this.evaluateProgressive()):(s!=null&&s.progressive&&(this.renderContext.parameters=e,this.renderContext.beforeTransformProgressive=s.progressive,a=s.progressive.output()),this.emit(Ht.BEFORE_MARK_JOIN),this.evaluateJoin(a),this.emit(Ht.AFTER_MARK_JOIN),this.emit(Ht.BEFORE_MARK_STATE),this.evaluateState(this.elements,this.spec.state,e),this.emit(Ht.AFTER_MARK_STATE),this.emit(Ht.BEFORE_MARK_ENCODE),this.evaluateEncode(this.elements,this._getEncoders(),e),this.emit(Ht.AFTER_MARK_ENCODE)),this.emit(Ht.BEFORE_MARK_UPDATE),this.update(this.spec),this.emit(Ht.AFTER_MARK_UPDATE),this}evaluateGroup(t){if(this.markType===Rt.group)return;const e=pu(t??AS,this.spec.groupBy,this.spec.groupSort),i=e.keys;this._groupKeys=i,this._groupEncodeResult=null,this.differ.setCurrentData(e)}_getTransformsAfterEncodeItems(){return this.transforms&&this.transforms.filter(t=>t.markPhase==="afterEncodeItems")}_getTransformsAfterEncode(){return this.transforms&&this.transforms.filter(t=>F(t.markPhase)||t.markPhase==="afterEncode")}_getTransformsBeforeJoin(){return this.transforms?this.transforms.filter(t=>t.markPhase==="beforeJoin"):[]}evaluate(t,e){var i;return this.evaluateMainTasks(t,e),!((i=this.renderContext)===null||i===void 0)&&i.progressive||this.evaluateTransform(this._getTransformsAfterEncode(),this.elements,e),this}output(){return this}join(t,e,i,r,s){return this.grammarSource&&(this.detach(this.grammarSource),this.grammarSource=null),this.spec.from=null,F(t)||(It(t)?this.grammarSource=this.view.getDataById(t):this.grammarSource=t,this.spec.from={data:t},this.attach(this.grammarSource)),this.spec.key=e,this.spec.sort=i,this.spec.groupBy=r,this.spec.groupSort=s,this.commit(),this}coordinate(t){return It(t)?this.coord=this.view.getCoordinateById(t):this.coord=t,this.attach(this.coord),this.commit(),this}state(t,e){return this.spec.stateSort=e,this.setFunctionSpec(t,"state")}encode(t,e,i){return this.encodeState(Ve.update,t,e,i)}encodeState(t,e,i,r){if(t===Ve.enter&&(this._isReentered=!0),this.spec.encode[t]){const s=this.spec.encode[t];if(bd(s))this.detach(Xc(s,this.view));else{const a=It(e);a&&r||!a&&i?(Object.keys(s).forEach(o=>{this.detach(Xc(s[o],this.view))}),this.spec.encode[t]={}):a?this.detach(Xc(s[e],this.view)):Object.keys(e).forEach(o=>{this.detach(Xc(s[o],this.view))})}}return e&&(this.spec.encode[t]||(this.spec.encode[t]={}),It(e)?(this.spec.encode[t][e]=i,this.attach(Xc(i,this.view))):bd(e)?(this.spec.encode[t]=e,this.attach(Xc(e,this.view))):e&&(Object.assign(this.spec.encode[t],e),Object.values(e).forEach(s=>{this.attach(Xc(s,this.view))}))),this.commit(),this}_getEncoders(){var t;return(t=this.spec.encode)!==null&&t!==void 0?t:{}}animation(t){return this.spec.animation=t,this}animationState(t){return this.setFunctionSpec(t,"animationState")}layout(t){return this.spec.layout=t,this.commit(),this}morph(t,e,i){return this.spec.morph=t,this.spec.morphKey=e,this.spec.morphElementKey=i,this}transform(t){const e=cC(this.spec.transform,this.view);e&&(this.detach(e.refs),this.transforms=[]);const i=cC(t,this.view);return i&&(this.attach(i.refs),this.transforms=i.transforms),this.spec.transform=t,this.commit(),this}configure(t){const e=["clip","clipPath","zIndex","interactive","context","setCustomizedShape","large","largeThreshold","progressiveStep","progressiveThreshold","support3d","morph","morphKey","morphElementKey","attributeTransforms","skipTheme","enableSegments","stateSort"];return t===null?(e.forEach(i=>{F(this.spec[i])||(this.spec[i]=void 0)}),this):(e.forEach(i=>{F(t[i])||(this.spec[i]=t[i])}),this)}context(t){return this.spec.context=t,this._context=t,this}isCollectionMark(){return Mtt.includes(this.markType)}needAnimate(){var t;return!(!((t=this.renderContext)===null||t===void 0)&&t.progressive)&&!F(this.spec.animation)}getAllElements(){const t=this.elements.slice();return this.elementMap.forEach(e=>{e.diffState!==Ve.exit||t.includes(e)||t.push(e)}),this.spec.sort&&t.sort((e,i)=>this.spec.sort(e.getDatum(),i.getDatum())),t}getScales(){const t={};return this.references.forEach((e,i)=>{i.grammarType===iD.scale&&(t[i.id()]=i.output())}),t}getScalesByChannel(){const t=this.spec.encode;if(!t)return{};const e={},i=this.parameters();return Object.keys(t).forEach(r=>{const s=t[r];s&&!bd(s)&&Object.keys(s).forEach(a=>{iT(s[a])&&(e[a]=wy(s[a].scale,i))})}),e}getFieldsByChannel(){const t=this.spec.encode;if(!t)return{};const e={};return Object.keys(t).forEach(i=>{const r=t[i];bd(r)||Object.keys(r).forEach(s=>{PF(r[s])&&(e[s]=r[s].field)})}),e}init(t,e){var i,r,s,a;if(this._delegateEvent||(this._delegateEvent=(u,h)=>{var c;const d=(c=u.target)===null||c===void 0?void 0:c[sp];if((d==null?void 0:d.mark)===this){const p=oD(this.view,u,d,h,xd);this.emitGrammarEvent(h,p,d)}},this.initEvent()),this.animate||(this.animate=new HW(this,this.spec.animation),this.needAnimate()&&this.animate.updateState(this.spec.animationState)),!this.group){const u=wy(this.spec.group,e);this.group=u,u&&u.appendChild(this)}const o=this.group?this.group.getGroupGraphicItem():t.defaultLayer,l=(s=(r=(i=this.group)===null||i===void 0?void 0:i.children)===null||r===void 0?void 0:r.indexOf(this))!==null&&s!==void 0?s:0;if(this.markType!==Rt.group){if(!this.graphicItem){const u=D0(this,Rt.group,{pickable:!1,zIndex:(a=this.spec.zIndex)!==null&&a!==void 0?a:0});(this.spec.support3d||T5t.includes(this.markType))&&u.setMode("3d"),u.name=`${this.id()||this.markType}`,this.graphicItem=u}this.graphicParent=this.graphicItem,!o||this.graphicIndex===l&&this.graphicItem.parent===o||o.insertIntoKeepIdx(this.graphicItem,l)}else this.graphicParent=o;this.graphicIndex=l}update(t){if(this._context=this.spec.context,this.isUpdated=!0,this.renderContext.progressive||(this.animate.updateConfig(t.animation),this.animate.updateState(t.animationState)),this.markType!==Rt.group){if(F(t.zIndex)||this.graphicItem.setAttribute("zIndex",t.zIndex),F(t.clip)||this.graphicItem.setAttribute("clip",t.clip),!F(t.clipPath)){const e=ut(t.clipPath)?t.clipPath:t.clipPath(this.elements);e&&e.length?this.graphicItem.setAttribute("path",e):this.graphicItem.setAttributes({path:e,clip:!1})}this.elementMap.forEach(e=>{e.updateGraphicItem()})}else this.elementMap.forEach(e=>{e.updateGraphicItem()})}evaluateJoin(t){var e,i,r,s;this.needClear=!0;const a=_g((r=(e=this.spec.key)!==null&&e!==void 0?e:(i=this.grammarSource)===null||i===void 0?void 0:i.getDataIDKey())!==null&&r!==void 0?r:()=>Ms),o=_g((s=this.spec.groupBy)!==null&&s!==void 0?s:()=>Ms),l=this.spec.sort,u=this.isCollectionMark(),h=new Set(this.elements.filter(p=>p.diffState===Ve.enter)),c=[];this.differ.setCallback((p,f,g)=>{const _=p;let v;if(F(f))v=this.elementMap.get(_),v&&(v.diffState=Ve.exit);else if(F(g)){v=this.elementMap.has(_)?this.elementMap.get(_):CS(this),v.diffState===Ve.exit&&(v.diffState=Ve.enter,this.animate.getElementAnimators(v,Ve.exit).forEach(b=>b.stop("start"))),v.diffState=Ve.enter;const y=u?p:o(f[0]);v.updateData(y,f,a,this.view),this.elementMap.set(_,v),c.push(v)}else if(v=this.elementMap.get(_),v){v.diffState=Ve.update;const y=u?p:o(f[0]);v.updateData(y,f,a,this.view),c.push(v)}h.delete(v)});const d=t??AS;u||this.differ.setCurrentData(pu(d,p=>`${o(p)}-${a(p)}`,void 0)),this.differ.doDiff(),h.forEach(p=>{this.elementMap.delete(u?p.groupKey:`${p.groupKey}-${p.key}`),p.remove(),p.release()}),this.elements=c,l&&this.elements.length>=2&&this.elements.sort((p,f)=>l(p.getDatum(),f.getDatum()))}evaluateState(t,e,i){e&&t.forEach(r=>{r.state(e,i)})}evaluateGroupEncode(t,e,i){if(!this._groupKeys||!e)return;const r={};return this._groupKeys.forEach(s=>{const a=t.find(o=>o.groupKey===s);a&&(r[s]=qh(e,a.items&&a.items[0]&&a.items[0].datum,a,i))}),this._groupEncodeResult=r,r}getChannelsFromConfig(t){const e=this.spec;return F(e.interactive)?null:{pickable:e.interactive}}evaluateEncode(t,e,i,r){const s=this.getChannelsFromConfig();if(e){this.emit(Ht.BEFORE_ELEMENT_ENCODE,{encoders:e,parameters:i},this);const a=r?null:this.evaluateGroupEncode(t,e[Mh.group],i);t.forEach(o=>{this.markType===Rt.glyph&&this._groupEncodeResult?o.items.forEach(l=>{l.nextAttrs=Object.assign(l.nextAttrs,s,this._groupEncodeResult[o.groupKey])}):a!=null&&a[o.groupKey]&&!this.isCollectionMark()?o.items.forEach(l=>{l.nextAttrs=Object.assign(l.nextAttrs,s,a[o.groupKey])}):s&&o.items.forEach(l=>{l.nextAttrs=Object.assign(l.nextAttrs,s)}),o.encodeItems(o.items,e,this._isReentered,i),this.isCollectionMark()&&(a!=null&&a[o.groupKey])&&z(a[o.groupKey].defined)&&(o.items.forEach(l=>{l.nextAttrs.defined=a[o.groupKey].defined}),delete a[o.groupKey].defined)}),this._isReentered=!1,this.evaluateTransform(this._getTransformsAfterEncodeItems(),t,i),t.forEach(o=>{o.encodeGraphic(this.isCollectionMark()?a==null?void 0:a[o.groupKey]:null)}),this.emit(Ht.AFTER_ELEMENT_ENCODE,{encoders:e,parameters:i},this)}else t.forEach(a=>{a.initGraphicItem(s)})}addGraphicItem(t,e,i){var r;const s=i??D0(this,this.markType,t);if(s){if(!((r=this.renderContext)===null||r===void 0)&&r.progressive){let a;if(this._groupKeys){const o=this._groupKeys.indexOf(e);o>=0&&(a=this.graphicParent.getChildAt(o))}else a=this.graphicParent.at(0);this.isCollectionMark()?(s.incremental=1,a.appendChild(s)):a.incrementalAppendChild(s)}else this.graphicParent.appendChild(s);return s}}parseRenderContext(t,e){const i=this.markType!==Rt.group&&this.spec.progressiveStep>0&&this.spec.progressiveThreshold>0&&this.spec.progressiveStep<this.spec.progressiveThreshold,r=this.spec.large&&this.spec.largeThreshold>0&&t.length>=this.spec.largeThreshold;if(i){const s=this.differ.getCurrentData();return s&&s.keys&&s.keys.some(a=>s.data.get(a).length>this.spec.progressiveThreshold)?{large:r,parameters:e,progressive:{data:t,step:this.spec.progressiveStep,currentIndex:0,totalStep:s.keys.reduce((a,o)=>Math.max(Math.ceil(s.data.get(o).length/this.spec.progressiveStep),a),1),groupedData:s.data}}:{large:r}}return{large:r}}isProgressive(){return this.renderContext&&(!!this.renderContext.progressive||!!this.renderContext.beforeTransformProgressive)}isDoingProgressive(){return this.renderContext&&(this.renderContext.progressive&&this.renderContext.progressive.currentIndex<this.renderContext.progressive.totalStep||this.renderContext.beforeTransformProgressive&&this.renderContext.beforeTransformProgressive.unfinished())}clearProgressive(){this.renderContext&&this.renderContext.progressive&&(this.elements=[],this.graphicParent.children.forEach(t=>{t.incrementalClearChild()}),this.graphicParent.removeAllChild()),this.renderContext&&this.renderContext.beforeTransformProgressive&&this.renderContext.beforeTransformProgressive.release(),this.renderContext=null}restartProgressive(){this.renderContext&&this.renderContext.progressive&&(this.renderContext.progressive.currentIndex=0)}evaluateJoinProgressive(){var t,e,i;const r=this.renderContext.progressive.currentIndex,s=_g((i=(t=this.spec.key)!==null&&t!==void 0?t:(e=this.grammarSource)===null||e===void 0?void 0:e.getDataIDKey())!==null&&i!==void 0?i:()=>Ms),a=[];if(this.isCollectionMark())return this._groupKeys.forEach((l,u)=>{const h=this.renderContext.progressive.groupedData.get(l),c=this.renderContext.progressive.step,d=h.slice(r*c,(r+1)*c);if(r===0){const p=CS(this);p.diffState=Ve.enter,p.updateData(l,d,s,this.view),a.push(p)}else{const p=this.elements[u];p.updateData(l,d,s,this.view),a.push(p)}}),a;const o={};return this._groupKeys.forEach(l=>{const u=this.renderContext.progressive.groupedData.get(l),h=this.renderContext.progressive.step,c=u.slice(r*h,(r+1)*h),d=[];c.forEach(p=>{const f=CS(this);f.diffState=Ve.enter,f.updateData(l,[p],s,this.view),d.push(f),a.push(f)}),o[l]=d}),{groupElements:o,elements:a}}evaluateEncodeProgressive(t,e,i){const r=this.renderContext.progressive.currentIndex;if(r===0){if(this.evaluateEncode(t,e,i),r===0&&this._groupEncodeResult&&!this.isCollectionMark()&&this.markType!==Rt.glyph){const s=t[0],a=s.getGraphicItem(),o=a==null?void 0:a.parent;o&&this._groupEncodeResult[s.groupKey]&&o.setTheme({common:this._groupEncodeResult[s.groupKey]})}}else this.evaluateEncode(t,e,i,!0)}evaluateProgressive(){var t,e,i;if(!((t=this.renderContext)===null||t===void 0)&&t.beforeTransformProgressive){this.renderContext.beforeTransformProgressive.progressiveRun();const l=this.renderContext.beforeTransformProgressive.output();return this.emit(Ht.BEFORE_MARK_JOIN),this.evaluateJoin(l),this.emit(Ht.AFTER_MARK_JOIN),this.emit(Ht.BEFORE_MARK_STATE),this.evaluateState(this.elements,this.spec.state,this.renderContext.parameters),this.emit(Ht.AFTER_MARK_STATE),this.emit(Ht.BEFORE_MARK_ENCODE),this.evaluateEncode(this.elements,this._getEncoders(),this.renderContext.parameters),void this.emit(Ht.AFTER_MARK_ENCODE)}if(!(!((e=this.renderContext)===null||e===void 0)&&e.progressive))return;const r=this.renderContext.parameters;this.emit(Ht.BEFORE_MARK_JOIN);const s=this.evaluateJoinProgressive(),a=Array.isArray(s)?s:s.elements;if(this.emit(Ht.AFTER_MARK_JOIN),this.renderContext.progressive.currentIndex===0?(this.graphicParent.removeAllChild(),this._groupKeys.forEach(l=>{const u=D0(this,Rt.group,{pickable:!1,zIndex:this.spec.zIndex});u.incremental=this.renderContext.progressive.step,this.graphicParent.appendChild(u)}),this.elements=a):this.elements=this.elements.concat(a),this.emit(Ht.BEFORE_MARK_STATE),this.evaluateState(a,this.spec.state,r),this.emit(Ht.AFTER_MARK_STATE),this.emit(Ht.BEFORE_MARK_ENCODE),Array.isArray(s))this.evaluateEncodeProgressive(a,this._getEncoders(),r);else{const l=s.groupElements;Object.keys(l).forEach(u=>{this.evaluateEncodeProgressive(l[u],this._getEncoders(),r)})}this.emit(Ht.AFTER_MARK_ENCODE);const o=(i=this._getTransformsAfterEncode())===null||i===void 0?void 0:i.filter(l=>l.canProgressive===!0);o!=null&&o.length&&this.evaluateTransform(o,this.elements,r),this.renderContext.progressive.currentIndex+=1}isLargeMode(){return this.renderContext&&this.renderContext.large}cleanExitElements(){this.elementMap.forEach((t,e)=>{t.diffState!==Ve.exit||t.isReserved||(this.elementMap.delete(e),t.remove(),t.release())})}getGroupGraphicItem(){if(this.elements&&this.elements[0]&&this.elements[0].getGraphicItem)return this.elements[0].getGraphicItem()}getBounds(){var t;return this.graphicItem?this.graphicItem.AABBBounds:(t=this.getGroupGraphicItem())===null||t===void 0?void 0:t.AABBBounds}getMorphConfig(){var t;return{morph:(t=this.spec.morph)!==null&&t!==void 0&&t,morphKey:this.spec.morphKey,morphElementKey:this.spec.morphElementKey}}getAttributeTransforms(){var t;return(t=this.spec.attributeTransforms)!==null&&t!==void 0?t:E1[this.markType]}getContext(){return this._context}needSkipBeforeLayout(){var t,e;if(((t=this.spec.layout)===null||t===void 0?void 0:t.skipBeforeLayouted)===!0)return!0;let i=this.group;for(;i;){if(((e=i.getSpec().layout)===null||e===void 0?void 0:e.skipBeforeLayouted)===!0)return!0;i=i.group}return!1}initEvent(){if(this._delegateEvent){const t=this.view.renderer.stage();t&&t.on("*",this._delegateEvent)}}releaseEvent(){if(this._delegateEvent){const t=this.view.renderer.stage();t&&t.off("*",this._delegateEvent)}}clear(){var t;this.releaseEvent(),this.transforms=null,this.elementMap=null,this.elements=null,this.graphicItem=null,this.animate=null,(t=this.group)===null||t===void 0||t.removeChild(this),this.group=null,super.clear()}prepareRelease(){this.animate.stop(),this.elementMap.forEach(t=>t.diffState=Ve.exit),this._finalParameters=this.parameters()}release(){this.releaseEvent(),this.elements.forEach(t=>t.release()),this.elementMap.clear(),this._finalParameters=null,this.animate&&this.animate.release(),this.graphicItem&&uC(this.graphicItem),this.detachAll(),super.release()}}let J4t=class extends jm{constructor(t,e){super(t,Rt.group,e),this.children=[]}parseRenderContext(){return{large:!1}}appendChild(t){return this.children.push(t),this}removeChild(t){return this.children=this.children.filter(e=>e!==t),this}includesChild(t,e=!0){return!!this.children.includes(t)||!!e&&this.children.some(i=>i.markType===Rt.group&&i.includesChild(t,!0))}updateLayoutChildren(){return this.children.length?(this.layoutChildren||(this.layoutChildren=[]),this.layoutChildren=this.children.filter(t=>t.needLayout()),this):this}getAttributeTransforms(){return E1.rect}evaluateJoin(t){if(!this.elements.length){const e=CS(this);e.updateData(Ms,AS,()=>"",this.view),this.elements=[e],this.elementMap.set(Ms,e)}}getChannelsFromConfig(t){const e=this.spec,i={};if(F(e.clip)||(i.clip=e.clip),F(e.zIndex)||(i.zIndex=e.zIndex),!F(e.clipPath)){const r=ft(e.clipPath)?e.clipPath([t]):e.clipPath;r&&r.length?i.path=r:(i.path=null,i.clip=!1)}return F(e.interactive)||(i.pickable=e.interactive),i}evaluateGroupEncode(t,e,i){var r;const s=this.elements[0],a={},o=[Object.assign({},(r=s.items)===null||r===void 0?void 0:r[0],{nextAttrs:a})];return tu(s,o,e,i),this._groupEncodeResult=a,a}evaluateEncode(t,e,i,r){const s=this.getChannelsFromConfig();if(e){this.emit(Ht.BEFORE_ELEMENT_ENCODE,{encoders:e,parameters:i},this);const a=r?null:this.evaluateGroupEncode(t,e[Mh.group],i);t.forEach(o=>{o.items.forEach(l=>{l.nextAttrs=Object.assign(l.nextAttrs,s,a)}),o.encodeItems(o.items,e,this._isReentered,i)}),this._isReentered=!1,this.evaluateTransform(this._getTransformsAfterEncodeItems(),t,i),t.forEach(o=>{o.encodeGraphic()}),this.emit(Ht.AFTER_ELEMENT_ENCODE,{encoders:e,parameters:i},this)}else t.forEach(a=>{a.initGraphicItem(s)})}addGraphicItem(t,e,i){const r=i??D0(this,this.markType,t);if(r)return this.emit(Ht.BEFORE_ADD_VRENDER_MARK,{graphicItem:r}),r.name=`${this.id()||this.markType}`,this.graphicParent.insertIntoKeepIdx(r,this.graphicIndex),this.emit(Ht.AFTER_ADD_VRENDER_MARK,{graphicItem:r}),r}};function VW(n,t){if(st(n))return n;const e=n.trim();if(e==="auto")return 0;if(e.endsWith("%")){const i=parseFloat(e.substring(0,e.length-1));return st(i)?i*t:0}return 0}function Q4t(n,t,e){var i,r,s,a;const o=(i=n.gridTemplateRows)!==null&&i!==void 0?i:[e],l=(r=n.gridTemplateColumns)!==null&&r!==void 0?r:[t],u=(s=n.gridRowGap)!==null&&s!==void 0?s:0,h=(a=n.gridColumnGap)!==null&&a!==void 0?a:0,c=o.map(b=>VW(b,e)),d=l.map(b=>VW(b,t)),p=Math.max(0,c.reduce((b,S)=>b-S,e)-c.length*u)/o.filter(b=>b==="auto").length,f=Math.max(0,d.reduce((b,S)=>b-S,t)-d.length*h)/l.filter(b=>b==="auto").length;let g=0;const _=c.map((b,S)=>{const A=o[S]==="auto"?p:b,w=g;return g+=A+u,w});_.push(g);let v=0;const y=d.map((b,S)=>{const A=l[S]==="auto"?f:b,w=v;return v+=A+h,w});return y.push(v),{rows:_,columns:y,rowGap:u,columnGap:h}}function jx(n,t){return Math.min(n<0?n+t:n-1,t)}function WW(n,t,e){let i=jx(n,e),r=jx(t,e);if(st(n)||st(t)?st(n)?st(t)||(i=jx(Math.max(0,r-1),e)):r=jx(i+1,e):(i=1,r=2),i>r){const s=r;r=i,i=s}return{start:i,end:r}}function tjt(n,t,e,i,r){const s=n.rows.length,a=n.columns.length,{start:o,end:l}=WW(t,e,s),{start:u,end:h}=WW(i,r,a),c=n.columns[o],d=n.columns[l]-(h===a?0:n.columnGap),p=n.rows[u],f=n.rows[h]-(l===s?0:n.rowGap);return new Fn().set(c,p,d,f)}const ejt=(n,t,e,i)=>{const r=Q4t(n.getSpec().layout,e.width(),e.height());t&&t.forEach(s=>{const a=s.getSpec().layout;s.layoutBounds=tjt(r,a.gridRowStart,a.gridRowEnd,a.gridColumnStart,a.gridColumnEnd),s.commit()})},ijt={[yi.axis]:0,[yi.legend]:1,[yi.slider]:2,[yi.player]:3,[yi.datazoom]:4},$W=n=>{var t,e,i;return(e=(t=n.getSpec().layout)===null||t===void 0?void 0:t.order)!==null&&e!==void 0?e:n.markType==="component"&&(i=ijt[n.componentType])!==null&&i!==void 0?i:1/0},GW=(n,t,e,i)=>{const r=e.clone(),s=n.getSpec().layout,a=ca(s.maxChildWidth,r.width()),o=ca(s.maxChildHeight,r.width());let l=0,u=0,h=0,c=0;t.forEach(v=>{const y=v.getSpec().layout,b=Oh(y.padding),S=i.parseMarkBounds?i.parseMarkBounds(v.getBounds(),v):v.getBounds();if(y.position==="top"||y.position==="bottom"){const A=Math.min(S.height()+b.top+b.bottom,o);y.position==="top"?r.y1+=A:r.y2-=A,S.x1<e.x1&&(l=Math.max(l,e.x1-S.x1)),S.x2>e.x2&&(u=Math.max(u,S.x2-e.x2))}if(y.position==="left"||y.position==="right"){const A=Math.min(S.width()+b.left+b.right,a);y.position==="left"?r.x1+=A:r.x2-=A,S.y1<e.y1&&(h=Math.max(h,e.y1-S.y1)),S.y2>e.y2&&(c=Math.max(c,S.y2-e.y2))}y.position==="outside"&&(r.x1+=Math.max(e.x1-S.x1,0)+b.left,r.x2-=Math.max(S.x2-e.x2,0)+b.right,r.y1+=Math.max(e.y1-S.y1,0)+b.top,r.y2-=Math.max(S.y2-e.y2)+b.bottom)}),l>r.x1-e.x1&&l<e.width()&&(r.x1=e.x1+l),u>e.x2-r.x2&&u<e.width()&&(r.x2=e.x2-u),h>r.y1-e.y1&&h<e.height()&&(r.y1=e.y1+h),c>e.y2-r.y2&&c<e.height()&&(r.y2=e.y2-c);let d=r.y1,p=r.y2,f=r.x1,g=r.x2;const _=t.slice().sort((v,y)=>$W(v)-$W(y));for(let v=0,y=_.length;v<y;v++){const b=_[v],S=b.getSpec().layout,A=Oh(S.padding),w=i.parseMarkBounds?i.parseMarkBounds(b.getBounds(),b):b.getBounds();if(S.position==="top"||S.position==="bottom"){const C=Math.min(w.height()+A.top+A.bottom,o);if(S.position==="top"?(b.layoutBounds=new Fn().set(r.x1,d-C,r.x2,d),d-=C):(b.layoutBounds=new Fn().set(r.x1,p,r.x2,p+C),p+=C),b.relativePosition={top:b.layoutBounds.y1-r.y1,bottom:b.layoutBounds.y1-r.y2},S.align){const k=w.width()+A.left+A.right;k<r.width()&&(S.align==="center"?(b.layoutBounds.x1=(r.x1+r.x2)/2-k/2,b.layoutBounds.x2=b.layoutBounds.x1+k,b.relativePosition.left=b.relativePosition.right=(r.width()-k)/2):S.align==="right"?(b.layoutBounds.x1=r.x2-k,b.layoutBounds.x2=r.x2,b.relativePosition.right=0,b.relativePosition.left=r.width()-k):S.align==="left"&&(b.layoutBounds.x1=r.x1,b.layoutBounds.x2=r.x1+k,b.relativePosition.left=0,b.relativePosition.right=r.width()-k))}}else if(S.position==="left"||S.position==="right"){const C=Math.min(w.width()+A.left+A.right,a);if(S.position==="left"?(b.layoutBounds=new Fn().set(f-C,r.y1,f,r.y2),f-=C):(b.layoutBounds=new Fn().set(g,r.y1,g+C,r.y2),g+=C),b.relativePosition={left:b.layoutBounds.x1-r.x1,right:b.layoutBounds.x1-r.x2},S.align){const k=w.height()+A.top+A.bottom;C<r.width()&&(S.align==="middle"?(b.layoutBounds.y1=(r.y1+r.y2)/2-k/2,b.layoutBounds.y2=b.layoutBounds.y1+k,b.relativePosition.top=b.relativePosition.bottom=(r.height()-k)/2):S.align==="bottom"?(b.layoutBounds.y1=r.y2-k,b.layoutBounds.y2=r.y2,b.relativePosition.top=r.height()-k,b.relativePosition.bottom=0):S.align==="top"&&(b.layoutBounds.y1=r.y1,b.layoutBounds.y2=r.y1+k,b.relativePosition.bottom=r.height()-k,b.relativePosition.top=0))}}else S.position==="outside"?(f-=Math.max(e.x1-w.x1,0)+A.left,g-=Math.max(w.x2-e.x2,0)+A.right,d-=Math.max(e.y1-w.y1,0)+A.top,p+=Math.max(w.y2-e.y2)+A.bottom):b.layoutBounds=r}return r},Ftt=(n,t,e)=>{n==null||n.forEach(i=>{var r;if(i.markType!==Rt.group)return;const s=i.layoutChildren,a=i.getSpec().layout,o=(r=i.layoutBounds)!==null&&r!==void 0?r:i.getBounds();if(o){if(ft(a))a.call(null,i,s,o,t);else if(ft(a.callback))a.callback.call(null,i,s,o,t);else if(a.display==="relative")if(a.updateViewSignals){const l=e.getViewBox();l&&o.intersect(l);const u=GW(i,s,o,t),h=u.width(),c=u.height(),d={top:u.y1,right:e.width()-u.x2,left:u.x1,bottom:e.height()-u.y2};e.updateSignal(yg,h),e.updateSignal(bg,c),e.updateSignal(Ba,d)}else GW(i,s,o,t);else a.display==="grid"&&ejt(i,s,o);Ftt(s,t,e)}})};class njt extends jm{constructor(t,e,i){super(t,Rt.glyph,i),this.glyphType=e,this.glyphMeta=Ct.getGlyph(e)}configureGlyph(t){return this.spec.glyphConfig=t,this.commit(),this}getGlyphMeta(){return this.glyphMeta}getGlyphConfig(){return this.spec.glyphConfig}addGraphicItem(t,e){const i=U5t(this,this.glyphMeta,t);return super.addGraphicItem(t,e,i)}}const FE=Symbol.for("key");class rjt{diffGrammar(t,e){return W4t(t,e,i=>{var r;return(r=i.id())!==null&&r!==void 0?r:Symbol()})}diffMark(t,e,i){const r={enter:[],exit:[],update:[]};let s=[],a=[];t.forEach(c=>{c.markType!==Rt.group&&(i.morph&&c.getMorphConfig().morph||i.morphAll||i.reuse)?s.push(c):r.exit.push({prev:[c]})}),e.forEach(c=>{c.markType!==Rt.group&&(i.morph&&c.getMorphConfig().morph||i.morphAll||i.reuse)?a.push(c):r.enter.push({next:[c]})});const o=this.diffUpdateByGroup(s,a,c=>c.getMorphConfig().morphKey,c=>c.getMorphConfig().morphKey);s=o.prev,a=o.next,r.update=r.update.concat(o.update);const l=this.diffUpdateByGroup(s,a,c=>c.id(),c=>c.id());s=l.prev,a=l.next,r.update=r.update.concat(l.update);const u=pu(s,c=>{var d,p;return(p=(d=c.group)===null||d===void 0?void 0:d.id)===null||p===void 0?void 0:p.call(d)}),h=pu(a,c=>{var d,p;return(p=(d=c.group)===null||d===void 0?void 0:d.id)===null||p===void 0?void 0:p.call(d)});return Object.keys(h).forEach(c=>{const d=u.data.get(c),p=h.data.get(c);if(d&&p){for(let f=0;f<Math.max(d.length,p.length);f+=1){const g=d[f],_=p[f];g&&_?r.update.push({prev:[g],next:[_]}):g?r.exit.push({prev:[g]}):_&&r.enter.push({next:[_]})}s=s.filter(f=>!d.includes(f)),a=a.filter(f=>!p.includes(f))}}),s.forEach(c=>r.exit.push({prev:[c]})),a.forEach(c=>r.enter.push({next:[c]})),r}_appendMorphKeyToElements(t){const e=t.getMorphConfig();if(!F(e.morphElementKey)){const i=_g(e.morphElementKey);t.elements&&t.elements.forEach(r=>{r.morphKey=i(r.getDatum())})}}morph(t,e,i){const r=t.reduce((h,c)=>(this._appendMorphKeyToElements(c),h.concat(c.elements)),[]),s=e.reduce((h,c)=>(this._appendMorphKeyToElements(c),h.concat(c.elements)),[]),a=$4t(r,s,h=>{var c;return(c=h.morphKey)!==null&&c!==void 0?c:h.key});t.forEach(h=>{var c,d;return(d=(c=h.animate)===null||c===void 0?void 0:c.disable)===null||d===void 0?void 0:d.call(c)}),e.forEach(h=>{var c,d;return(d=(c=h.animate)===null||c===void 0?void 0:c.disable)===null||d===void 0?void 0:d.call(c)});const o=t.concat(e).reduce((h,c)=>(Object.assign(h,c.parameters()),h),{});let l=0;const u=()=>{l-=1,l===0&&e.forEach(h=>{var c,d;(d=(c=h.animate)===null||c===void 0?void 0:c.enable)===null||d===void 0||d.call(c)})};a.enter.forEach(h=>{h.next.forEach(c=>{this.doMorph([],[c],i,u,o)}),l+=1}),a.update.forEach(h=>{const c=Math.min(h.prev.length,h.next.length),d=this.divideElements(h.prev,c),p=this.divideElements(h.next,c);for(let f=0;f<c;f++)this.doMorph(d[f],p[f],i,u,o),l+=1})}diffUpdateByGroup(t,e,i,r){const s=pu(t,h=>{var c;return(c=i(h))!==null&&c!==void 0?c:FE}),a=pu(e,h=>{var c;return(c=r(h))!==null&&c!==void 0?c:FE});let o=t,l=e;const u=[];return a.keys.forEach(h=>{if(h!==FE){const c=s.data.get(h),d=a.data.get(h);c&&d&&(u.push({prev:c,next:d}),o=o.filter(p=>!c.includes(p)),l=l.filter(p=>!d.includes(p)))}}),{prev:o,next:l,update:u}}doMorph(t,e,i,r,s){var a,o;const l={prev:t.map(_=>_.getDatum()),next:e.map(_=>_.getDatum())},u={prev:t.slice(),next:e.slice()},h=i.animation.easing,c=en(i.animation.delay,s,l,u),d=en(i.animation.duration,s,l,u),p=en(i.animation.oneByOne,s,l,u),f=en(i.animation.splitPath,s,l,u),g=st(p)&&p>0?_=>Mt(p)?_*p:p===!0?_*d:0:void 0;t.length!==1&&t.length!==0||e.length!==1?t.length===1&&e.length>1?PMt(t[0].getGraphicItem(),e.map(_=>_.getGraphicItem()),{delay:c,duration:d,easing:h,onEnd:r,individualDelay:g,splitPath:f}):t.length>1&&e.length===1&&OMt(t.map(_=>_.getGraphicItem()),e[0].getGraphicItem(),{delay:c,duration:d,easing:h,onEnd:r,individualDelay:g,splitPath:f}):kJ((o=(a=t[0])===null||a===void 0?void 0:a.getGraphicItem)===null||o===void 0?void 0:o.call(a),e[0].getGraphicItem(),{delay:c,duration:d,easing:h,onEnd:r})}divideElements(t,e){const i=Math.floor(t.length/e);return new Array(e).fill(0).map((r,s)=>t.slice(i*s,s===e-1?t.length:i*(s+1)))}}class jtt{constructor(t,e){this._grammars={signal:[],data:[],scale:[],coordinate:[],mark:[],customized:[]},this._grammarMap={signal:{},data:{},scale:{},coordinate:{},mark:{},customized:{}},this._size=0,this._mapKey=It(t)?i=>i[t]:t,this._warning=e}record(t){var e,i;const r=t.grammarType,s=this._mapKey(t);return this._grammarMap[r]?(this._grammars[r].push(t),F(s)||(this._grammarMap[r][s]?(e=this._warning)===null||e===void 0||e.call(this,s,t):this._grammarMap[r][s]=t)):(this._grammars.customized.push(t),F(s)||(this._grammarMap.customized[s]?(i=this._warning)===null||i===void 0||i.call(this,s,t):this._grammarMap.customized[s]=t)),this._size+=1,this}unrecord(t){const e=t.grammarType,i=this._mapKey(t);return this._grammarMap[e]?(this._grammars[e]=this._grammars[e].filter(r=>r!==t),F(i)||this._grammarMap[e][i]!==t||delete this._grammarMap[e][i]):(this._grammars.customized=this._grammars.customized.filter(r=>r!==t),F(i)||this._grammarMap.customized[i]!==t||delete this._grammarMap.customized[i]),this._size-=1,this}size(){return this._size}getSignal(t){var e;return(e=this._grammarMap.signal[t])!==null&&e!==void 0?e:null}getData(t){var e;return(e=this._grammarMap.data[t])!==null&&e!==void 0?e:null}getScale(t){var e;return(e=this._grammarMap.scale[t])!==null&&e!==void 0?e:null}getCoordinate(t){var e;return(e=this._grammarMap.coordinate[t])!==null&&e!==void 0?e:null}getMark(t){var e;return(e=this._grammarMap.mark[t])!==null&&e!==void 0?e:null}getCustomized(t){var e;return(e=this._grammarMap.customized[t])!==null&&e!==void 0?e:null}getGrammar(t){return this._grammarMap.data[t]?this._grammarMap.data[t]:this._grammarMap.signal[t]?this._grammarMap.signal[t]:this._grammarMap.scale[t]?this._grammarMap.scale[t]:this._grammarMap.coordinate[t]?this._grammarMap.coordinate[t]:this._grammarMap.mark[t]?this._grammarMap.mark[t]:this._grammarMap.customized[t]?this._grammarMap.customized[t]:null}getAllSignals(){return this._grammars.signal}getAllData(){return this._grammars.data}getAllScales(){return this._grammars.scale}getAllCoordinates(){return this._grammars.coordinate}getAllMarks(){return this._grammars.mark}getAllCustomized(){return this._grammars.customized}traverse(t){var e;Object.values((e=this._grammars)!==null&&e!==void 0?e:{}).forEach(i=>(i??[]).forEach(r=>{t.call(null,r)}))}find(t){let e=null;return this.traverse(i=>t.call(null,i)===!0&&(e=i,!0)),e}filter(t){const e=[];return this.traverse(i=>{t.call(null,i)===!0&&e.push(i)}),e}clear(){this._size=0,this._grammars={signal:[],data:[],scale:[],coordinate:[],mark:[],customized:[]},this._grammarMap={signal:{},data:{},scale:{},coordinate:{},mark:{},customized:{}}}release(){this._size=0,this._grammars=null,this._grammarMap=null}}class sjt extends jtt{constructor(){super(...arguments),this._markNodes=[]}record(t){if(super.record(t),t.grammarType==="mark"){const e=t,i={mark:e,parent:null,children:[]};this._markNodes.forEach(r=>{const s=r.mark;s.markType===Rt.group&&s.includesChild(e,!1)?(r.children.push(i),i.parent=r):e.markType===Rt.group&&e.includesChild(s,!1)&&(i.children.push(r),r.parent=i)}),this._markNodes.push(i)}return this}unrecord(t){if(super.unrecord(t),t.grammarType==="mark"){const e=t,i=this._markNodes.find(r=>r.mark===e);this._markNodes.forEach(r=>{const s=r.mark;s.markType===Rt.group&&s.includesChild(e,!1)?(r.children=r.children.filter(a=>a!==i),i.parent=null):e.markType===Rt.group&&e.includesChild(s,!1)&&(i.children=i.children.filter(a=>a!==r),r.parent=null)}),this._markNodes=this._markNodes.filter(r=>r!==i)}return this}getAllMarkNodes(){return this._markNodes}clear(){super.clear(),this._markNodes=[]}release(){super.release(),this._markNodes=null}}class ajt{constructor(t){this._animations=[],this._additionalAnimateMarks=[],this.isEnabled=!0,this._onAnimationStart=e=>{this._additionalAnimateMarks=this._additionalAnimateMarks.filter(i=>{var r;return(r=i==null?void 0:i.animate)===null||r===void 0?void 0:r.isAnimating()}),this._animations.length===0&&this._additionalAnimateMarks.length===0&&this._view.emit(Ht.ALL_ANIMATION_START,{}),this._animations=this._animations.concat({config:e.animationConfig,mark:e.mark})},this._onAnimationEnd=e=>{this._additionalAnimateMarks=this._additionalAnimateMarks.filter(i=>{var r;return(r=i==null?void 0:i.animate)===null||r===void 0?void 0:r.isAnimating()}),this._animations=this._animations.filter(i=>i.config!==e.animationConfig||i.mark!==e.mark),this._animations.length===0&&this._additionalAnimateMarks.length===0&&this._view.emit(Ht.ALL_ANIMATION_END,{})},this._view=t,this._view.addEventListener(Ht.ANIMATION_START,this._onAnimationStart),this._view.addEventListener(Ht.ANIMATION_END,this._onAnimationEnd)}stop(){return this._view.traverseMarkTree(t=>{var e,i;t.animate&&((i=(e=t.animate).stop)===null||i===void 0||i.call(e))}),this._additionalAnimateMarks.forEach(t=>{var e,i;t.view&&t.animate&&((i=(e=t.animate).stop)===null||i===void 0||i.call(e))}),this._additionalAnimateMarks=[],this}pause(){return this._view.traverseMarkTree(t=>{var e,i;t.animate&&((i=(e=t.animate).pause)===null||i===void 0||i.call(e))}),this._additionalAnimateMarks.forEach(t=>{var e,i;t.view&&t.animate&&((i=(e=t.animate).pause)===null||i===void 0||i.call(e))}),this}resume(){return this._view.traverseMarkTree(t=>{var e,i;t.animate&&((i=(e=t.animate).resume)===null||i===void 0||i.call(e))}),this._additionalAnimateMarks.forEach(t=>{var e,i;t.view&&t.animate&&((i=(e=t.animate).resume)===null||i===void 0||i.call(e))}),this}enable(){return this.isEnabled=!0,this._view.traverseMarkTree(t=>{var e,i;t.animate&&((i=(e=t.animate).enable)===null||i===void 0||i.call(e))}),this}disable(){return this.isEnabled=!1,this._view.traverseMarkTree(t=>{var e,i;t.animate&&((i=(e=t.animate).disable)===null||i===void 0||i.call(e))}),this._additionalAnimateMarks.forEach(t=>{var e,i;t.view&&t.animate&&((i=(e=t.animate).stop)===null||i===void 0||i.call(e))}),this._additionalAnimateMarks=[],this}enableAnimationState(t){return this._view.traverseMarkTree(e=>{var i,r;e.animate&&((r=(i=e.animate).enableAnimationState)===null||r===void 0||r.call(i,t))}),this}disableAnimationState(t){return this._view.traverseMarkTree(e=>{var i,r;e.animate&&((r=(i=e.animate).disableAnimationState)===null||r===void 0||r.call(i,t))}),this}isAnimating(){return this._animations.length!==0||this._additionalAnimateMarks.some(t=>{var e;return((e=t==null?void 0:t.animate)===null||e===void 0?void 0:e.isAnimating())||!1})}animate(){return this.isEnabled?(this._view.traverseMarkTree(t=>{t.isUpdated&&t.animate&&t.animate.animate(),t.cleanExitElements(),t.isUpdated=!1},null,!0),this):this}animateAddition(t){const e=t.animate.animate();return e&&e.isAnimating()&&this._additionalAnimateMarks.push(t),this}release(){this._additionalAnimateMarks=[],this._animations=[],this._view.removeEventListener(Ht.ALL_ANIMATION_START,this._onAnimationStart),this._view.removeEventListener(Ht.ALL_ANIMATION_END,this._onAnimationEnd),this._view=null}}class Ntt extends jm{addGraphicItem(t,e){const i=t&&t.limitAttrs,r=i&&(i.textType==="rich"||i.text&&i.text.type==="rich"),s=D0(this,r?Rt.richtext:Rt.text,t);return super.addGraphicItem(t,e,s)}release(){super.release()}}Ntt.markType=Rt.text;const ojt={label:{visible:!0,inside:!1,space:4,style:{fontSize:12,fill:"#89909d",fontWeight:"normal",fillOpacity:1}},tick:{visible:!0,inside:!1,alignWithLabel:!0,length:4,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},subTick:{visible:!1,inside:!1,count:4,length:2,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},line:{visible:!0,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},items:[],start:{x:0,y:0},end:{x:100,y:0},x:0,y:0},ljt={title:{space:4,padding:[0,0,0,0],textStyle:{fontSize:12,fill:"#333333",fontWeight:"normal",fillOpacity:1},text:"theta"},label:{visible:!0,inside:!1,space:4,style:{fontSize:12,fill:"#6F6F6F",fontWeight:"normal",fillOpacity:1}},tick:{visible:!0,inside:!1,alignWithLabel:!0,length:4,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},subTick:{visible:!1,inside:!1,count:4,length:2,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},line:{visible:!0,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},items:[],startAngle:0,endAngle:2*Math.PI,radius:100,innerRadius:0,center:{x:0,y:0},x:0,y:0},ujt={style:{stroke:"#f1f2f5"}},hjt={style:{stroke:"#f1f2f5"}},cjt={layout:"vertical",title:{align:"start",space:12,textStyle:{fontSize:12,fontWeight:"bold",fill:"#2C3542"}},item:{spaceCol:10,spaceRow:10,shape:{space:4,style:{size:10,cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8",stroke:"#D8D8D8",fillOpacity:.5}}},label:{space:4,style:{fontSize:12,fill:"black",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8",fillOpacity:.5}}},value:{alignRight:!1,style:{fontSize:12,fill:"#ccc",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8"}}},background:{style:{cursor:"pointer"},state:{selectedHover:{fillOpacity:.7,fill:"gray"},unSelectedHover:{fillOpacity:.2,fill:"gray"}}},focus:!1,focusIconStyle:{size:10,fill:"#333",cursor:"pointer"},visible:!0,padding:{top:2,bottom:2,left:2,right:2}},autoPage:!0,pager:{space:12,handler:{style:{size:10},space:4}},hover:!0,select:!0,selectMode:"multiple",allowAllCanceled:!1,items:[{index:0,id:"",label:"",shape:{fill:"#6690F2",stroke:"#6690F2",symbolType:"circle"}}]},djt={title:{visible:!1,text:""},colors:[],layout:"horizontal",railWidth:200,railHeight:8,railStyle:{cornerRadius:5}},pjt={title:{visible:!1,text:""},trackStyle:{fill:"#ccc"},layout:"horizontal",align:"bottom",railWidth:200,railHeight:6,min:0,max:1,value:[0,1]},fjt={start:{x:0,y:0},end:{x:0,y:0}},gjt={start:{x:0,y:0},end:{x:0,y:0},rectStyle:{width:10,height:10}},mjt={center:{x:0,y:0},radius:100,startAngle:0,endAngle:Math.PI/6},vjt={center:{x:0,y:0},radius:100,startAngle:0,endAngle:2*Math.PI},_jt={center:{x:0,y:0},radius:100,startAngle:0,endAngle:2*Math.PI,sides:6},yjt={layout:"horizontal",railWidth:200,railHeight:10,railStyle:{cornerRadius:5},range:{draggableTrack:!0},startText:{visible:!0,text:"",space:8},endText:{visible:!0,text:"",space:8},min:0,max:1,value:[0,1]},bjt={size:{width:400,height:400},dataLabels:[]},xjt={type:"line-data",data:[{text:""}],position:"top",overlap:{avoidBaseMark:!1,clampForce:!1},smartInvert:!1},Sjt={type:"line",data:[{text:"",data:{}}],position:"start",overlap:{avoidBaseMark:!1,clampForce:!1,size:{width:1e3,height:1e3}},smartInvert:!1},Ajt={type:"area",data:[{text:"",data:{}}],position:"end",overlap:{avoidBaseMark:!1,clampForce:!1,size:{width:1e3,height:1e3}},smartInvert:!1},wjt={type:"rect",data:[{text:"",fill:"#606773",data:{}}],position:"top",overlap:{size:{width:1e3,height:1e3},strategy:[{type:"position"}]},smartInvert:!1},Cjt={type:"symbol",data:[{text:"",fill:"#606773",data:{}}],position:"top",overlap:{avoidBaseMark:!0,size:{width:1e3,height:1e3},strategy:[{type:"position"}]},smartInvert:!1},kjt={type:"arc",data:[{text:"",fill:"#606773",data:{}}],width:800,height:600,position:"outside",zIndex:302},Tjt={data:[{text:"",fill:"#606773",data:{}}],overlap:{avoidBaseMark:!1,clampForce:!1,size:{width:1e3,height:1e3}},smartInvert:!1},Mjt={orient:"bottom",showDetail:"auto",brushSelect:!0,start:0,end:1,position:{x:0,y:0},size:{width:500,height:40},previewData:[]},Pjt={},Ejt={},Ojt={},Rjt={textStyle:{fill:"#21252c"},subtextStyle:{fill:"#606773"}},Ijt={width:12,height:12,padding:[2,2],railStyle:{fill:"rgba(0, 0, 0, .1)"}},ztt={axis:ojt,circleAxis:ljt,grid:ujt,circleGrid:hjt,discreteLegend:cjt,colorLegend:djt,sizeLegend:pjt,lineCrosshair:fjt,rectCrosshair:gjt,sectorCrosshair:mjt,circleCrosshair:vjt,polygonCrosshair:_jt,slider:yjt,dataLabel:bjt,pointLabel:Tjt,lineLabel:Sjt,areaLabel:Ajt,rectLabel:wjt,symbolLabel:Cjt,arcLabel:kjt,lineDataLabel:xjt,datazoom:Mjt,continuousPlayer:Pjt,discretePlayer:Ejt,tooltip:Ojt,title:Rjt,scrollbar:Ijt},Htt=5,Vtt={symbol:{shape:"circle",size:8},text:{fontSize:14,fill:"#000000"}},cr=Object.assign({},ztt);cr.axis=Object.assign({},cr.axis,{label:{style:{fill:"#bbbdc3"}},line:{style:{stroke:"#4b4f54"}},tick:{style:{stroke:"#4b4f54"}},subTick:{style:{stroke:"#4b4f54"}}}),cr.circleAxis=Object.assign({},cr.circleAxis,{label:{style:{fill:"#bbbdc3"}},line:{style:{stroke:"#4b4f54"}},tick:{style:{stroke:"#4b4f54"}},subTick:{style:{stroke:"#4b4f54"}}}),cr.grid=Object.assign({},cr.grid,{style:{stroke:"#404349"}}),cr.circleGrid=Object.assign({},cr.circleGrid,{style:{stroke:"#404349"}}),cr.rectLabel=Object.assign({},cr.rectLabel,{data:[{text:"",fill:"#888c93",data:{}}]}),cr.lineLabel=Object.assign({},cr.lineLabel,{data:[{text:"",fill:"#888c93",data:{}}]}),cr.symbolLabel=Object.assign({},cr.symbolLabel,{data:[{text:"",fill:"#888c93",data:{}}]}),cr.title=Object.assign({},cr.title,{textStyle:{fill:"#fdfdfd"},subtextStyle:{fill:"#888c93"}});const Ljt={name:"dark",padding:Htt,background:"#202226",palette:{default:["#5383F4","#7BCF8E","#FF9D2C","#FFDB26","#7568D9","#80D8FB","#1857A3","#CAB0E8","#FF8867","#B9E493","#2CB4A8","#B9E4E3"]},marks:Vtt,components:cr},Djt={name:"default",padding:Htt,palette:{default:["#6690F2","#70D6A3","#B4E6E2","#63B5FC","#FF8F62","#FFDC83","#BCC5FD","#A29BFE","#63C4C7","#F68484"]},marks:Vtt,components:ztt};let Sd=class Qv{static registerTheme(t,e){t&&Qv._themes.set(t,e)}static unregisterTheme(t){Qv._themes.delete(t)}static getTheme(t){return Qv._themes.get(t)}static getDefaultTheme(){return Qv.getTheme("default")}};Sd._themes=new Map,Sd.registerTheme("default",Djt),Sd.registerTheme("dark",Ljt);class LF extends jm{constructor(t,e,i,r){super(t,Rt.component,i),this._componentDatum={[Ms]:0},this.componentType=e,this.spec.type="component",this.spec.componentType=e,this.mode=r,this._updateComponentEncoders()}configureComponent(t){return this.spec.componentConfig=t,this.commit(),this}addGraphicItem(t,e,i){const r=i??Ct.createGraphicComponent(this.componentType,t,{mode:this.mode,skipDefault:this.spec.skipTheme});return r&&(this.emit(Ht.BEFORE_ADD_VRENDER_MARK,{graphicItem:r}),this.graphicParent.appendChild(r),this.emit(Ht.AFTER_ADD_VRENDER_MARK,{graphicItem:r})),r}join(t){return super.join(t,Ms)}encodeState(t,e,i){return super.encodeState(t,e,i),this._updateComponentEncoders(),this}parseRenderContext(){return{large:!1}}_prepareRejoin(){this._componentDatum[Ms]+=1}evaluateJoin(t){return this.spec.key=Ms,t?(t[Ms]=this._componentDatum[Ms],this._componentDatum=t):this._componentDatum={[Ms]:this._componentDatum[Ms]},super.evaluateJoin([this._componentDatum])}_updateComponentEncoders(){this._encoders=this.spec.encode}_getEncoders(){var t;return(t=this._encoders)!==null&&t!==void 0?t:{}}}class Tp extends xp{static useRegisters(t){t.forEach(e=>{e()})}constructor(t={},e={}){super(),this._observer=null,this._onResize=Ml((...i)=>{const r=this._getContainerSize();r&&this.resize(r.width,r.height)},100),this.delegateEvent=(i,r)=>{var s;const a=(s=i.target)===null||s===void 0?void 0:s[sp],o=oD(this,i,a,r,xd);this.emit(r,o,a)},this.handleProgressiveFrame=()=>{this._progressiveMarks.length&&this._progressiveMarks.forEach(i=>{i.isDoingProgressive()&&i.evaluateProgressive()}),this.doPreProgressive()},this._config=e,this._options=Object.assign({mode:y4t},t),this.initialize()}getGrammarById(t){return this.grammars.getGrammar(t)}getSignalById(t){return this.grammars.getSignal(t)}getDataById(t){return this.grammars.getData(t)}getScaleById(t){return this.grammars.getScale(t)}getCoordinateById(t){return this.grammars.getCoordinate(t)}getMarkById(t){return this.grammars.getMark(t)}getCustomizedById(t){return this.grammars.getCustomized(t)}getGrammarsByName(t){return this.grammars.filter(e=>e.name()===t)}getGrammarsByType(t){return this.grammars.filter(e=>e.grammarType===t)}getMarksByType(t){return this.grammars.getAllMarks().filter(e=>e.markType===t)}getMarksByName(t){return this.grammars.getAllMarks().filter(e=>e.name()===t)}getMarksBySelector(t){if(!t)return null;const e=ot(t),i=[];return e.forEach(r=>{if(P1(r))return void i.push(r);if(r[0]===N4t){const a=this.getMarkById(r.slice(1));return void(a&&i.push(a))}const s=r[0]===j4t?this.getMarksByName(r.slice(1)):Ett(r)?this.getMarksByType(r):null;s&&s.length&&s.forEach(a=>{i.push(a)})}),i}updateSignal(t,e){It(t)&&(t=this.getSignalById(t)),t.set(e),this.commit(t)}signal(t,e){const i=new O4t(this);return arguments.length>=1&&i.value(t),arguments.length>=2&&i.update(e),this.grammars.record(i),this._dataflow.add(i),i}data(t){const e=new _4t(this,t);return this.grammars.record(e),this._dataflow.add(e),e}scale(t){const e=Ct.createGrammar("scale",this,t);return e&&(this.grammars.record(e),this._dataflow.add(e)),e}coordinate(t){const e=Ct.createGrammar("coordinate",this,t);return e&&(this.grammars.record(e),this._dataflow.add(e)),e}mark(t,e,i){const r=It(e)?this.getMarkById(e):e;let s;switch(t){case Rt.group:s=new J4t(this,r);break;case Rt.glyph:s=new njt(this,i==null?void 0:i.glyphType,r);break;case Rt.component:s=Ct.hasComponent(i==null?void 0:i.componentType)?Ct.createComponent(i==null?void 0:i.componentType,this,r,i==null?void 0:i.mode):new LF(this,i==null?void 0:i.componentType,r,i==null?void 0:i.mode);break;case Rt.text:s=new Ntt(this,t,r);break;default:s=Ct.hasMark(t)?Ct.createMark(t,this,r):new jm(this,t,r)}return this.grammars.record(s),this._dataflow.add(s),s}group(t){return this.mark(Rt.group,t)}glyph(t,e){return this.mark(Rt.glyph,e,{glyphType:t})}component(t,e,i="2d"){return this.mark(Rt.component,e,{componentType:t,mode:i})}axis(t,e="2d"){return this.mark(Rt.component,t,{componentType:yi.axis,mode:e})}grid(t,e="2d"){return this.mark(Rt.component,t,{componentType:yi.grid,mode:e})}legend(t){return this.mark(Rt.component,t,{componentType:yi.legend})}slider(t){return this.mark(Rt.component,t,{componentType:yi.slider})}label(t){return this.mark(Rt.component,t,{componentType:yi.label})}datazoom(t){return this.mark(Rt.component,t,{componentType:yi.datazoom})}player(t){return this.mark(Rt.component,t,{componentType:yi.player})}title(t){return this.mark(Rt.component,t,{componentType:yi.title})}scrollbar(t){return this.mark(Rt.component,t,{componentType:yi.scrollbar})}customized(t,e){const i=Ct.createGrammar(t,this,e==null?void 0:e.type);if(i)return i.parse(e),this.grammars.record(i),this._dataflow.add(i),i}addGrammar(t){return this.grammars.find(e=>e.uid===t.uid)||(this.grammars.record(t),this._dataflow.add(t),t.parse(t.getSpec()),this._needBuildLayoutTree=!0),this}removeGrammar(t){const e=It(t)?this.getGrammarById(t):t;return e&&this.grammars.find(i=>i.uid===e.uid)?(e.grammarType==="mark"&&e.prepareRelease(),this._cachedGrammars.record(e),this._dataflow.remove(e),this.grammars.unrecord(e),this._needBuildLayoutTree=!0,this):this}removeAllGrammars(){return this.grammars.traverse(t=>{t.grammarType==="signal"&&BW.includes(t.id())||t.grammarType==="mark"&&t.id()==="root"||this.removeGrammar(t)}),this}removeAllGraphicItems(){return this.traverseMarkTree(t=>{t.graphicItem&&(uC(t.graphicItem),t.elementMap.forEach(e=>{e.resetGraphicItem()}),t.graphicItem=null)}),this}parseSpec(t){var e,i,r,s,a,o;if(this.emit(Ht.BEFORE_PARSE_VIEW),this._spec=t,L4t(t),t.theme?this.theme(t.theme):this.theme(Sd.getDefaultTheme()),t.width&&this.width(t.width),t.height&&this.height(t.height),this.padding((i=(e=t.padding)!==null&&e!==void 0?e:this._options.padding)!==null&&i!==void 0?i:this._theme.padding),!this.width()||!this.height()){const u=this._getContainerSize();u&&(this.updateSignal(Ph,u.width),this.updateSignal(Eh,u.height))}!((r=t.signals)===null||r===void 0)&&r.length&&t.signals.forEach(u=>{this.signal().parse(u)}),!((s=t.data)===null||s===void 0)&&s.length&&t.data.forEach(u=>{this.data(null).parse(u)}),!((a=t.coordinates)===null||a===void 0)&&a.length&&t.coordinates.forEach(u=>{var h;(h=this.coordinate(u.type))===null||h===void 0||h.parse(u)}),!((o=t.scales)===null||o===void 0)&&o.length&&t.scales.forEach(u=>{var h;(h=this.scale(u.type))===null||h===void 0||h.parse(u)});const l=Ct.getGrammars();return Object.keys(l).forEach(u=>{const{specKey:h}=l[u];t[h]&&t[h].length&&t[h].forEach(c=>{this.customized(u,c)})}),t.marks&&t.marks.length&&t.marks.forEach(u=>{this.parseMarkSpec(u)}),t.events&&t.events.length&&t.events.forEach(u=>{this.event(u)}),t.interactions&&t.interactions.length&&t.interactions.forEach(u=>{this.interaction(u.type,u)}),t.animation===!1?this.animate.disable():this.animate.enable(),this.emit(Ht.AFTER_PARSE_VIEW),this._needBuildLayoutTree=!0,this._layoutState=ru.before,this}updateSpec(t){return this.removeAllInteractions(),this.removeAllGrammars(),this.parseSpec(t)}parseBuiltIn(){I4t(this._options,this._config,this.getCurrentTheme()).forEach(t=>{const e=this.signal().parse(t);t.value&&e.set(t.value)}),this.parseMarkSpec({id:"root",type:"group",encode:{enter:{x:0,y:0},update:{width:{signal:"width"},height:{signal:"height"}}}}),this.rootMark=this.getMarkById("root")}parseMarkSpec(t){var e;const i=t.type===Rt.glyph?{glyphType:t.glyphType}:t.type===Rt.component?{componentType:t.componentType,mode:t.mode}:null;this.mark(t.type,t.group,i).parse(t),(e=t.marks)===null||e===void 0||e.forEach(r=>{this.parseMarkSpec(r)})}theme(t){var e,i,r,s,a,o;It(t)?this._theme=(e=Sd.getTheme(t))!==null&&e!==void 0?e:Sd.getDefaultTheme():this._theme=t;const{background:l,padding:u}=(i=this._spec)!==null&&i!==void 0?i:{};return this._theme?(this.background((r=l??this._options.background)!==null&&r!==void 0?r:this._theme.background),this.padding((s=u??this._options.padding)!==null&&s!==void 0?s:this._theme.padding),(o=(a=this.renderer.stage())===null||a===void 0?void 0:a.setTheme)===null||o===void 0||o.call(a,Object.assign({},this._theme.marks))):(this.background(l??this._options.background),this.padding(u??this._options.padding)),this}getCurrentTheme(){return this._theme}setCurrentTheme(t,e=!0){return this.theme(t),this.grammars.getAllMarks().forEach(i=>{i.commit()}),e?(this.evaluate(),this.renderer.render(!0)):this._dataflow.evaluate(),this}background(t){return arguments.length?(this._background=t,this.renderer.background(t),t):this._background}width(t){const e=this.getSignalById(Ph);return arguments.length?(this._options.width=t,this.updateSignal(e,t),t):e.output()}height(t){const e=this.getSignalById(Eh);return arguments.length?(this._options.height=t,this.updateSignal(e,t),t):e.output()}viewWidth(t){const e=this.getSignalById(yg);if(arguments.length){const i=this.padding();return this.width(t+i.left+i.right),t}return e.output()}viewHeight(t){const e=this.getSignalById(bg);if(arguments.length){const i=this.padding();return this.height(t+i.top+i.bottom),t}return e.output()}padding(t){const e=this.getSignalById(Ba);if(arguments.length){const i=Oh(t);return this.updateSignal(e,i),i}return Oh(e.output())}autoFit(t){const e=this.getSignalById(B0);return arguments.length?(this.updateSignal(e,t),t):e.output()}getViewBox(){const t=this.getSignalById(RF);return t==null?void 0:t.output()}updateLayoutTag(){return this._layoutState=ru.before,this}getLayoutState(){return this._layoutState}buildLayoutTree(){const t={},e=[];this.traverseMarkTree(i=>{t[i.id()]=!0,i.group&&t[i.group.id()]||e.push(i),i.markType===Rt.group&&i.updateLayoutChildren()},i=>i.needLayout()),this._layoutMarks=e}doLayout(){var t;const e=this._options.doLayout||Ftt;e&&(!((t=this._layoutMarks)===null||t===void 0)&&t.length)&&(this.emit(Ht.BEFORE_DO_LAYOUT),e(this._layoutMarks,this._options,this),this.emit(Ht.AFTER_DO_LAYOUT))}handleLayoutEnd(){this.emit(Ht.BEFORE_MARK_LAYOUT_END),this._layoutMarks.forEach(t=>{BE(t,"layoutChildren",e=>{e.handleLayoutEnd()},e=>e!==t)}),this.emit(Ht.AFTER_MARK_LAYOUT_END)}handleRenderEnd(){this.emit(Ht.BEFORE_MARK_RENDER_END),BE(this.rootMark,"children",t=>{t.handleRenderEnd()}),this.emit(Ht.AFTER_MARK_RENDER_END)}commit(t){return this._dataflow.commit(t),this}run(t){return this.evaluate(t),this}doRender(t){this.emit(Ht.BEFORE_DO_RENDER),this.renderer&&(this._progressiveMarks||this.animate.animate(),this.renderer.render(t),this.handleRenderEnd()),this.emit(Ht.AFTER_DO_RENDER)}evaluate(t){var e,i;const r=D4t(t),s=this._cachedGrammars.size()>0;s&&(this.reuseCachedGrammars(r),this.detachCachedGrammar());const a=this._resizeRenderer(),o=this._dataflow.hasCommitted();return s||o||this._layoutState||a?(this.clearProgressive(),this._dataflow.evaluate(),this._needBuildLayoutTree&&(this.buildLayoutTree(),this._needBuildLayoutTree=!1),this._layoutState&&(this._layoutState=ru.layouting,this.doLayout(),this._dataflow.hasCommitted()&&(this._layoutState=ru.reevaluate,this._dataflow.evaluate()),this._layoutState=ru.after,!((e=this._layoutMarks)===null||e===void 0)&&e.length&&this.handleLayoutEnd()),this._layoutState=null,this.findProgressiveMarks(),this._resizeRenderer(),(i=this._willMorphMarks)===null||i===void 0||i.forEach(l=>{this._morph.morph(l.prev,l.next,r)}),this._willMorphMarks=null,this.releaseCachedGrammars(r),this.doRender(!0),this.doPreProgressive(),this):this}reuseCachedGrammars(t){if(this._willMorphMarks||(this._willMorphMarks=[]),t.reuse){const e=i=>{i.next.reuse(i.prev),i.prev.detachAll(),i.prev.clear(),this._cachedGrammars.unrecord(i.prev)};this._morph.diffGrammar(this._cachedGrammars.getAllSignals(),this.grammars.getAllSignals().filter(i=>!BW.includes(i.id()))).update.forEach(e),this._morph.diffGrammar(this._cachedGrammars.getAllData(),this.grammars.getAllData()).update.forEach(e),this._morph.diffGrammar(this._cachedGrammars.getAllScales(),this.grammars.getAllScales()).update.forEach(e),this._morph.diffGrammar(this._cachedGrammars.getAllCoordinates(),this.grammars.getAllCoordinates()).update.forEach(e)}this._morph.diffMark(this._cachedGrammars.getAllMarks(),this.grammars.getAllMarks().filter(e=>e.id()!=="root"),t).update.forEach(e=>{const i=e.prev.length===1&&e.next.length===1&&e.prev[0].markType===e.next[0].markType,r=e.prev.every(s=>s.getMorphConfig().morph)&&e.next.every(s=>s.getMorphConfig().morph);i&&t.reuse?(e.next[0].reuse(e.prev[0]),e.prev[0].detachAll(),e.prev[0].clear(),this._cachedGrammars.unrecord(e.prev[0])):(t.morph&&r||t.morphAll)&&this._willMorphMarks.push({prev:e.prev,next:e.next})})}detachCachedGrammar(){this._cachedGrammars.traverse(t=>{var e,i;if(t.detachAll(),t.grammarType==="mark"){const r=t;(i=(e=r.group)===null||e===void 0?void 0:e.removeChild)===null||i===void 0||i.call(e,r)}})}releaseCachedGrammars(t){this._cachedGrammars.traverse(r=>{r.grammarType!=="mark"&&r.release()});const e=this._cachedGrammars.getAllMarkNodes();e.forEach(r=>{r.mark.animate.stop(),t.enableExitAnimation&&this.animate.animateAddition(r.mark)});const i=r=>{if(r.mark.view&&r.mark.animate.getAnimatorCount()===0&&(!r.children||r.children.length===0)){r.mark.release();const s=r.parent;s&&(r.parent.children=r.parent.children.filter(a=>a!==r),r.parent=null,i(s))}};e.forEach(r=>{const s=r.mark;s.animate.getAnimatorCount()===0?i(r):s.addEventListener("animationEnd",()=>{s.animate.getAnimatorCount()===0&&i(r)})}),this._cachedGrammars.clear()}runAfter(t){return this._dataflow.runAfter(()=>{t.call(null,this)}),this}runBefore(t){return this._dataflow.runBefore(()=>{t.call(null,this)}),this}getImageBuffer(){var t,e;if(this._options.mode!=="node")return void this.logger.error(new TypeError("getImageBuffer() now only support node environment."));const i=(e=(t=this.renderer)===null||t===void 0?void 0:t.stage)===null||e===void 0?void 0:e.call(t);return i?(i.render(),i.window.getImageBuffer()):(this.logger.error(new ReferenceError("render is not defined")),null)}traverseMarkTree(t,e,i){return BE(this.rootMark,"children",t,e,i),this}_bindResizeEvent(){var t,e,i,r,s,a;if(this.autoFit()){const o=(s=(r=(i=(e=(t=this.renderer)===null||t===void 0?void 0:t.stage)===null||e===void 0?void 0:e.call(t))===null||i===void 0?void 0:i.window)===null||r===void 0?void 0:r.getContainer)===null||s===void 0?void 0:s.call(r);if(o){const l=window.ResizeObserver;this._observer=new l(this._onResize),(a=this._observer)===null||a===void 0||a.observe(o)}window.addEventListener("resize",this._onResize)}}_unBindResizeEvent(){this.autoFit()&&(window.removeEventListener("resize",this._onResize),this._observer&&(this._observer.disconnect(),this._observer=null))}_getContainerSize(){var t,e,i,r,s,a,o,l,u,h,c;const d=(s=(r=(i=(e=(t=this.renderer)===null||t===void 0?void 0:t.stage)===null||e===void 0?void 0:e.call(t))===null||i===void 0?void 0:i.window)===null||r===void 0?void 0:r.getContainer)===null||s===void 0?void 0:s.call(r);if(d){const{width:p,height:f}=sI(d);return{width:(l=(o=(a=this._spec)===null||a===void 0?void 0:a.width)!==null&&o!==void 0?o:this._options.width)!==null&&l!==void 0?l:p,height:(c=(h=(u=this._spec)===null||u===void 0?void 0:u.height)!==null&&h!==void 0?h:this._options.height)!==null&&c!==void 0?c:f}}return null}resize(t,e,i=!0){let r=!1;return t!==this.width()&&(r=!0,this.updateSignal(Ph,t)),e!==this.height()&&(r=!0,this.updateSignal(Eh,e)),r&&(i?this.evaluate():this._dataflow.evaluate()),this}_resizeRenderer(){const t=this.width(),e=this.height();return!!this.renderer.shouldResize(t,e)&&(this.renderer.resize(t,e),this.emit("resize",{},{width:t,height:e}),!0)}bindEvents(t){if(this._eventConfig.disable)return;const{type:e,filter:i,callback:r,throttle:s,debounce:a,consume:o,target:l,dependency:u}=t,h=z4t(e);if(!h)return;const{source:c,type:d}=h,p=B4t(h),f=(Array.isArray(l)&&l.length?l.map(v=>({signal:this.getSignalById(v.target),callback:v.callback})):[{signal:It(l)?this.getSignalById(l):null,callback:r}]).filter(v=>v.signal||v.callback),g=MF(u,this),_=F4t((v,y)=>{const b=c===xd&&S4t(this._eventConfig,d)||o&&(v.cancelable===void 0||v.cancelable);c===Bd&&(v=oD(this,v,y,d,Bd));let S=!1;if((!i||i(v))&&(!p||p(y))&&f.length){const A=g.reduce((w,C)=>(w[C.id()]=C.output(),w),{});f.forEach(w=>{w.callback&&w.signal?w.signal.set(w.callback(v,A))&&(this.commit(w.signal),S=!0):w.callback?w.callback(v,A):(this.commit(w.signal),S=!0)})}b&&v.preventDefault(),o&&v.stopPropagation(),S&&this.run()},{throttle:s,debounce:a});if(c===xd){if(A4t(this._eventConfig,xd,d))return this.addEventListener(d,_,b4t),()=>{this.removeEventListener(d,_)}}else if(c===Bd)return _e.addEventListener(d,_),this._eventListeners.push({type:d,source:_e,handler:_}),()=>{_e.removeEventListener(d,_);const v=this._eventListeners.findIndex(y=>y.type===d&&y.source===_e&&y.handler===_);v>=0&&this._eventListeners.splice(v,1)}}event(t){if("between"in t){const[e,i]=t.between,r=`${e.type}-${t.type}-${i.type}`;let s;this.bindEvents(Object.assign({},e,{callback:()=>{if(this._eventCache||(this._eventCache={}),!this._eventCache[r]){const a=this.bindEvents(t);this._eventCache[r]=a}s||(s=this.bindEvents(Object.assign({},i,{callback:()=>{this._eventCache[r]&&(this._eventCache[r](),this._eventCache[r]=null)}})))}}))}else"merge"in t?t.merge.forEach(e=>{const i=Object.assign({},t);It(e)?i.type=e:ae(e)&&Object.assign(i,e),i.debounce=50,this.bindEvents(i)}):this.bindEvents(t)}interaction(t,e){const i=Ct.createInteraction(t,this,e);return i&&(i.bind(),this._boundInteractions||(this._boundInteractions=[]),this._boundInteractions.push(i)),i}removeInteraction(t,e){if(this._boundInteractions){const i=this._boundInteractions.filter(r=>{var s;return F(e)?It(t)?r.type===t:t?r===t:void 0:((s=r.options)===null||s===void 0?void 0:s.id)===e});i.length&&i.forEach(r=>{r.unbind()})}return this}removeAllInteractions(){return this._boundInteractions&&(this._boundInteractions.forEach(t=>{t.unbind()}),this._boundInteractions=null),this}initEvent(){const t=this.renderer.stage();t&&t.on("*",this.delegateEvent)}releaseStageEvent(){const t=this.renderer.stage();t&&t.off("*",this.delegateEvent)}addEventListener(t,e,i){let r=e;return i&&i.trap===!1||(r=e,r.raw=e),i&&i.target&&(r.target=i.target),this.on(t,r),this}removeEventListener(t,e){return e?this.off(t,e):this.off(t),this}initializeRenderer(){const t=this._options.width,e=this._options.height;this.renderer=new k4t(this),this.renderer.initialize(t,e,this._options,this._eventConfig).background(this._background)}initialize(){var t;this.grammars=new jtt(e=>e.id(),(e,i)=>this.logger.warn(`Grammar id '${e}' has been occupied`,i)),this._cachedGrammars=new sjt(e=>e.id()),this._options.logger&&ri.setInstance(this._options.logger),this.logger=ri.getInstance((t=this._options.logLevel)!==null&&t!==void 0?t:0),this._dataflow=new C4t,this.animate=new ajt(this),this._morph=new rjt,this._options.hooks&&(Object.keys(this._options.hooks).forEach(e=>{this.on(e,this._options.hooks[e])}),this.hooks=this._options.hooks),this.container=null,this.renderer=null,this._eventListeners=[],this._eventConfig=x4t(this._options.eventConfig),this._theme=this._options.disableTheme?null:Sd.getDefaultTheme(),this.parseBuiltIn(),H4t(this._options),this.initializeRenderer(),this._eventConfig.disable||this.initEvent(),this._bindResizeEvent(),this._needBuildLayoutTree=!0,this._layoutState=ru.before,this.theme(this._theme)}pauseProgressive(){return!1}resumeProgressive(){return!1}restartProgressive(){return!1}findProgressiveMarks(){const t=[];return this.traverseMarkTree(e=>{t.push(e)},e=>e.markType!==Rt.group&&e.isProgressive()),t.length?(this._progressiveMarks=t,this.renderer&&this.renderer.combineIncrementalLayers(),t):(this._progressiveMarks=null,null)}doPreProgressive(){if(this._progressiveMarks&&this._progressiveMarks.some(t=>t.isDoingProgressive())){const t=_e.getRequestAnimationFrame();this._progressiveRafId=t(this.handleProgressiveFrame)}}clearProgressive(){this._progressiveRafId&&_e.getCancelAnimationFrame()(this._progressiveRafId),this._progressiveMarks&&this._progressiveMarks.length&&(this._progressiveMarks.forEach(t=>{t.clearProgressive()}),this._progressiveMarks=null)}release(){var t,e,i;this.removeAllInteractions(),this.releaseStageEvent(),this._unBindResizeEvent(),this.clearProgressive(),Ct.unregisterRuntimeTransforms(),ri.setInstance(null),this.animate.stop(),this.grammars.release(),this._cachedGrammars.release(),this._dataflow.release(),this._dataflow=null,(e=(t=this.renderer)===null||t===void 0?void 0:t.release)===null||e===void 0||e.call(t),this.renderer=null,this._boundInteractions=null,this.removeAllListeners(),(i=this._eventListeners)===null||i===void 0||i.forEach(r=>{r.source.removeEventListener(r.type,r.handler)}),this._eventListeners=null}}const Bjt=()=>{wr(),Bm(),Ct.registerGraphic(Rt.arc,rF)},Fjt=()=>{wr(),cBt(),Ct.registerGraphic(Rt.arc3d,qJ)},jjt=()=>{wr(),fBt(),Ct.registerGraphic(Rt.pyramid3d,JJ)},Njt=()=>{wr(),dQ(),Ct.registerGraphic(Rt.area,KJ)},zjt=()=>{wr(),rn(),Ct.registerGraphic(Rt.group,K3)},Hjt=()=>{wr(),pQ(),Ct.registerGraphic(Rt.image,nF)},Vjt=()=>{wr(),Vu(),Ct.registerGraphic(Rt.line,iF)},Wtt=()=>{wr(),A1(),Ct.registerGraphic(Rt.path,XJ)},DF=()=>{wr(),Wu(),Ct.registerGraphic(Rt.rect,ep)},Wjt=()=>{wr(),gBt(),Ct.registerGraphic(Rt.rect3d,GJ)},BF=()=>{wr(),Vu(),Ct.registerGraphic(Rt.rule,iF)},$tt=()=>{wr(),no(),Ct.registerGraphic(Rt.symbol,P2)},Gtt=()=>{wr(),Pl(),Oc(),Ct.registerGraphic(Rt.text,Ug)},$jt=()=>{wr(),D2(),Ct.registerGraphic(Rt.polygon,ZJ)},Gjt=()=>{wr(),Oc(),Ct.registerGraphic(Rt.richtext,YJ)},Ujt=()=>{wr(),no(),Ct.registerGraphic(Rt.cell,P2)},rT=()=>{wr(),pBt(),Ct.registerGraphic(Rt.glyph,UJ)},Utt=n=>(t,e,i)=>{var r,s,a;const o=(a=(r=t.getGraphicAttribute("direction",!1))!==null&&r!==void 0?r:(s=t.mark.getGlyphConfig())===null||s===void 0?void 0:s.direction)!==null&&a!==void 0?a:"vertical",l=n(t,o,e);if(!st(l))return{};const u=t.getGraphicAttribute("x",!1),h=t.getGraphicAttribute("y",!1),c=t.getGraphicAttribute("min",!1),d=t.getGraphicAttribute("max",!1),p=t.getGraphicAttribute("q1",!1),f=t.getGraphicAttribute("q3",!1),g=t.getGraphicAttribute("median",!1),_={from:{x:u,y:h},to:{x:u,y:h}};return st(c)&&(_.from.min=l,_.to.min=c),st(d)&&(_.from.max=l,_.to.max=d),st(p)&&(_.from.q1=l,_.to.q1=p),st(f)&&(_.from.q3=l,_.to.q3=f),st(g)&&(_.from.median=l,_.to.median=g),_},Ytt=n=>(t,e,i)=>{var r,s,a;const o=(a=(r=t.getGraphicAttribute("direction",!1))!==null&&r!==void 0?r:(s=t.mark.getGlyphConfig())===null||s===void 0?void 0:s.direction)!==null&&a!==void 0?a:"vertical",l=n(t,o,e);if(!st(l))return{};const u=t.getGraphicAttribute("x",!0),h=t.getGraphicAttribute("y",!0),c=t.getGraphicAttribute("min",!0),d=t.getGraphicAttribute("max",!0),p=t.getGraphicAttribute("q1",!0),f=t.getGraphicAttribute("q3",!0),g=t.getGraphicAttribute("median",!0),_={from:{x:u,y:h},to:{x:u,y:h}};return st(c)&&(_.to.min=l,_.from.min=c),st(d)&&(_.to.max=l,_.from.max=d),st(p)&&(_.to.q1=l,_.from.q1=p),st(f)&&(_.to.q3=l,_.from.q3=f),st(g)&&(_.to.median=l,_.from.median=g),_},Xtt=(n,t,e)=>{var i,r,s,a,o,l,u,h,c,d,p,f;if(e&&st(e.center))return e.center;let g,_,v,y,b;if(mr(t)){g=(r=(i=n.getGraphicAttribute("points",!1,"median"))===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.x,_=(a=(s=n.getGraphicAttribute("points",!1,"max"))===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.x,v=(l=(o=n.getGraphicAttribute("points",!1,"min"))===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.x;const S=n.getGraphicAttribute("width",!1,"box"),A=n.getGraphicAttribute("x",!1,"box");y=A,b=A+S}else{g=(h=(u=n.getGraphicAttribute("points",!1,"median"))===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.y,_=(d=(c=n.getGraphicAttribute("points",!1,"max"))===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.y,v=(f=(p=n.getGraphicAttribute("points",!1,"min"))===null||p===void 0?void 0:p[0])===null||f===void 0?void 0:f.y;const S=n.getGraphicAttribute("height",!1,"box"),A=n.getGraphicAttribute("y",!1,"box");y=A,b=A+S}return st(g)?g:st(y)&&st(b)?(y+b)/2:st(_)&&st(v)?(_+v)/2:st(v)?v:st(_)?_:NaN},Yjt=(n,t,e,i)=>{var r,s,a,o,l,u,h,c;const d={shaft:{},box:{},max:{},min:{},median:{}},p=(r=n.x)!==null&&r!==void 0?r:e.getGraphicAttribute("x",!1),f=(s=n.y)!==null&&s!==void 0?s:e.getGraphicAttribute("y",!1),g=(a=n.width)!==null&&a!==void 0?a:e.getGraphicAttribute("width",!1),_=(o=n.height)!==null&&o!==void 0?o:e.getGraphicAttribute("height",!1),v=(l=n.boxWidth)!==null&&l!==void 0?l:e.getGraphicAttribute("boxWidth",!1),y=(u=n.boxHeight)!==null&&u!==void 0?u:e.getGraphicAttribute("boxHeight",!1),b=(h=n.ruleWidth)!==null&&h!==void 0?h:e.getGraphicAttribute("ruleWidth",!1),S=(c=n.ruleHeight)!==null&&c!==void 0?c:e.getGraphicAttribute("ruleHeight",!1);return i&&mr(i.direction)?(st(y)?(Object.assign(d.box,{y:f-y/2,y1:f+y/2}),Object.assign(d.median,{y:f-y/2,y1:f+y/2})):(Object.assign(d.box,{y:f-_/2,y1:f+_/2}),Object.assign(d.median,{y:f-_/2,y1:f+_/2})),st(S)?(Object.assign(d.max,{y:f-S/2,y1:f+S/2}),Object.assign(d.min,{y:f-S/2,y1:f+S/2})):(Object.assign(d.max,{y:f-_/2,y1:f+_/2}),Object.assign(d.min,{y:f-_/2,y1:f+_/2}))):(st(v)?(Object.assign(d.box,{x:p-v/2,x1:p+v/2}),Object.assign(d.median,{x:p-v/2,x1:p+v/2})):(Object.assign(d.box,{x:p-g/2,x1:p+g/2}),Object.assign(d.median,{x:p-g/2,x1:p+g/2})),st(b)?(Object.assign(d.max,{x:p-b/2,x1:p+b/2}),Object.assign(d.min,{x:p-b/2,x1:p+b/2})):(Object.assign(d.max,{x:p-g/2,x1:p+g/2}),Object.assign(d.min,{x:p-g/2,x1:p+g/2}))),d},Xjt=Utt(Xtt),Kjt=Ytt(Xtt);function qjt(){Ct.registerGlyph("boxplot",{shaft:"rule",box:"rect",max:"rule",min:"rule",median:"rule"}).registerProgressiveChannels(["x","y","q1","q3","min","max","median","angle","width","height","boxWidth","boxHeight","ruleWidth","ruleHeight"]).registerFunctionEncoder(Yjt).registerChannelEncoder("x",(n,t,e,i,r,s)=>s&&mr(s.direction)?null:{shaft:{x:t,x1:t}}).registerChannelEncoder("y",(n,t,e,i,r,s)=>s&&mr(s.direction)?{shaft:{y:t,y1:t}}:null).registerChannelEncoder("q1",(n,t,e,i,r,s)=>s&&mr(s.direction)?{box:{x:t}}:{box:{y:t}}).registerChannelEncoder("q3",(n,t,e,i,r,s)=>s&&mr(s.direction)?{box:{x1:t}}:{box:{y1:t}}).registerChannelEncoder("min",(n,t,e,i,r,s)=>s&&mr(s.direction)?{shaft:{x:t},min:{x:t,x1:t,visible:!0}}:{shaft:{y:t},min:{y:t,y1:t,visible:!0}}).registerChannelEncoder("max",(n,t,e,i,r,s)=>s&&mr(s.direction)?{shaft:{x1:t},max:{x:t,x1:t,visible:!0}}:{shaft:{y1:t},max:{y:t,y1:t,visible:!0}}).registerChannelEncoder("median",(n,t,e,i,r,s)=>s&&mr(s.direction)?{median:{x:t,x1:t,visible:!0}}:{median:{y:t,y1:t,visible:!0}}).registerChannelEncoder("angle",(n,t,e,i,r,s)=>{var a;const o=s&&mr(s.direction)?[(e.min+e.max)/2,e.y]:[e.x,(e.min+e.max)/2],l=(a=e.anchor)!==null&&a!==void 0?a:o;return{shaft:{angle:t,anchor:l},box:{angle:t,anchor:l},max:{angle:t,anchor:l},min:{angle:t,anchor:l},median:{angle:t,anchor:l}}}).registerDefaultEncoder(()=>({max:{visible:!1},min:{visible:!1},median:{visible:!1}})),Ct.registerAnimationType("boxplotScaleIn",Xjt),Ct.registerAnimationType("boxplotScaleOut",Kjt),rT(),DF(),BF()}const Ktt=(n,t,e)=>{var i,r,s,a;if(st(e==null?void 0:e.center))return e.center;let o,l,u,h,c;if(mr(t)){o=(r=(i=n.getGraphicAttribute("points",!1,"median"))===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.x;const d=n.getGraphicAttribute("width",!1,"minMaxBox"),p=n.getGraphicAttribute("x",!1,"minMaxBox");u=p,l=p+d;const f=n.getGraphicAttribute("width",!1,"q1q3Box"),g=n.getGraphicAttribute("x",!1,"q1q3Box");h=g,c=g+f}else{o=(a=(s=n.getGraphicAttribute("points",!1,"median"))===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.y;const d=n.getGraphicAttribute("height",!1,"minMaxBox"),p=n.getGraphicAttribute("y",!1,"minMaxBox");u=p,l=p+d;const f=n.getGraphicAttribute("height",!1,"q1q3Box"),g=n.getGraphicAttribute("y",!1,"q1q3Box");h=g,c=g+f}return st(o)?o:st(h)&&st(c)?(h+c)/2:st(l)&&st(u)?(l+u)/2:st(u)?u:st(l)?l:NaN},Zjt=(n,t,e,i)=>{var r,s,a,o,l,u,h,c;const d={minMaxBox:{},q1q3Box:{},median:{}},p=(r=n.x)!==null&&r!==void 0?r:e.getGraphicAttribute("x",!1),f=(s=n.y)!==null&&s!==void 0?s:e.getGraphicAttribute("y",!1),g=(a=n.width)!==null&&a!==void 0?a:e.getGraphicAttribute("width",!1),_=(o=n.minMaxWidth)!==null&&o!==void 0?o:e.getGraphicAttribute("minMaxWidth",!1),v=(l=n.q1q3Width)!==null&&l!==void 0?l:e.getGraphicAttribute("q1q3Width",!1),y=(u=n.height)!==null&&u!==void 0?u:e.getGraphicAttribute("height",!1),b=(h=n.minMaxHeight)!==null&&h!==void 0?h:e.getGraphicAttribute("minMaxHeight",!1),S=(c=n.q1q3Height)!==null&&c!==void 0?c:e.getGraphicAttribute("q1q3Height",!1);return i&&mr(i.direction)?(st(b)?Object.assign(d.minMaxBox,{y:f-b/2,y1:f+b/2}):Object.assign(d.minMaxBox,{y:f-y/2,y1:f+y/2}),st(S)?(Object.assign(d.q1q3Box,{y:f-S/2,y1:f+S/2}),Object.assign(d.median,{y:f-S/2,y1:f+S/2})):(Object.assign(d.q1q3Box,{y:f-y/2,y1:f+y/2}),Object.assign(d.median,{y:f-y/2,y1:f+y/2}))):(st(_)?Object.assign(d.minMaxBox,{x:p-_/2,x1:p+_/2}):Object.assign(d.minMaxBox,{x:p-g/2,x1:p+g/2}),st(v)?(Object.assign(d.q1q3Box,{x:p-v/2,x1:p+v/2}),Object.assign(d.median,{x:p-v/2,x1:p+v/2})):(Object.assign(d.q1q3Box,{x:p-g/2,x1:p+g/2}),Object.assign(d.median,{x:p-g/2,x1:p+g/2}))),d},Jjt=Utt(Ktt),Qjt=Ytt(Ktt);function t8t(){Ct.registerGlyph("barBoxplot",{minMaxBox:"rect",q1q3Box:"rect",median:"rule"}).registerProgressiveChannels(["x","y","q1","q3","min","max","median","angle","width","height","minMaxWidth","q1q3Width","minMaxHeight","q1q3Height"]).registerFunctionEncoder(Zjt).registerChannelEncoder("q1",(n,t,e,i,r,s)=>s&&mr(s.direction)?{q1q3Box:{x:t}}:{q1q3Box:{y:t}}).registerChannelEncoder("q3",(n,t,e,i,r,s)=>s&&mr(s.direction)?{q1q3Box:{x1:t}}:{q1q3Box:{y1:t}}).registerChannelEncoder("min",(n,t,e,i,r,s)=>s&&mr(s.direction)?{minMaxBox:{x:t}}:{minMaxBox:{y:t}}).registerChannelEncoder("max",(n,t,e,i,r,s)=>s&&mr(s.direction)?{minMaxBox:{x1:t}}:{minMaxBox:{y1:t}}).registerChannelEncoder("median",(n,t,e,i,r,s)=>s&&mr(s.direction)?{median:{x:t,x1:t,visible:!0}}:{median:{y:t,y1:t,visible:!0}}).registerChannelEncoder("angle",(n,t,e,i,r,s)=>{var a;const o=(a=e.anchor)!==null&&a!==void 0?a:[e.x,(e.min+e.max)/2];return{minMaxBox:{angle:t,anchor:o},q1q3Box:{angle:t,anchor:o},median:{angle:t,anchor:o}}}).registerChannelEncoder("lineWidth",(n,t,e,i,r,s)=>({minMaxBox:{lineWidth:0},q1q3Box:{lineWidth:0}})).registerChannelEncoder("minMaxFillOpacity",(n,t,e,i,r,s)=>({minMaxBox:{fillOpacity:t}})).registerChannelEncoder("stroke",(n,t,e,i,r,s)=>({minMaxBox:{stroke:!1},q1q3Box:{stroke:!1}})).registerDefaultEncoder(()=>({minMaxBox:{lineWidth:0},q1q3Box:{lineWidth:0},median:{visible:!1}})),Ct.registerAnimationType("barBoxplotScaleIn",Jjt),Ct.registerAnimationType("barBoxplotScaleOut",Qjt),rT(),DF(),BF()}const e8t=()=>{Ct.registerGlyph("ripplePoint",{symbol:"symbol",ripple0:"symbol",ripple1:"symbol",ripple2:"symbol"}).registerFunctionEncoder((n,t,e,i)=>{var r;const s=Math.max(0,Math.min(n.ripple,1)),a=(r=n.size)!==null&&r!==void 0?r:e.getGraphicAttribute("size"),o=.5*a;return{ripple0:{size:a+o*s,fillOpacity:.75-.25*s},ripple1:{size:a+o*(1+s),fillOpacity:.5-.25*s},ripple2:{size:a+o*(2+s),fillOpacity:.25-.25*s}}}).registerDefaultEncoder(()=>({ripple0:{fillOpacity:.75},ripple1:{fillOpacity:.5},ripple2:{fillOpacity:.25}})),rT(),$tt()},i8t=(n,t)=>{var e;const i=(e=n.curvature)!==null&&e!==void 0?e:.5,r=typeof t=="number"?n.thickness*t:n.thickness;let s=n.x0,a=n.x1,o=n.y0,l=n.y1,u=s+i*(a-s),h=a+i*(s-a),c=v=>v;n.round!==!1&&(s=Math.round(s),a=Math.round(a),o=Math.round(o),l=Math.round(l),u=Math.round(u),h=Math.round(h),c=Math.round),n.pathType==="line"||n.pathType,n.align==="center"?(o=c(n.y0-r/2),l=c(n.y1-r/2)):n.align==="end"?(o=c(n.y0+n.thickness/2-r),l=c(n.y1+n.thickness/2-r)):(o=c(n.y0-n.thickness/2),l=c(n.y1-n.thickness/2));const d=c(o+r),p=c(l+r),f=Math.abs(a-s)>1e-6,g=n.endArrow&&f?`L${a},${c(l-r/2)}L${c(a+r)},${c((l+p)/2)}L${a},${c(p+r/2)}`:"",_=n.startArrow&&f?`L${s},${c(d+r/2)}L${c(s-r)},${c((o+d)/2)}L${s},${c(o-r/2)}`:"";return n.pathType==="line"?`M${s},${o}L${a},${l}${g}L${a},${p}L${s},${d}${_}Z`:n.pathType==="polyline"?`M${s},${o}L${u},${o}L${u},${l}L${a},${l}
    ${g}L${a},${p}L${u},${p}L${u},${d}L${s},${d}${_}Z`:`M${s},${o}C${u},${o},${h},${l},${a},${l}
  ${g}L${a},${p}C${h},${p},${u},${d},${s},${d}${_}Z`},n8t=(n,t)=>{var e;const i=(e=n.curvature)!==null&&e!==void 0?e:.5,r=typeof t=="number"?n.thickness*t:n.thickness;let s=n.y0,a=n.y1,o=n.x0,l=n.x1,u=s+i*(a-s),h=a+i*(s-a),c=v=>v;n.round!==!1&&(c=Math.round,s=Math.round(s),a=Math.round(a),o=Math.round(o),l=Math.round(l),u=Math.round(u),h=Math.round(h)),n.pathType==="line"||n.pathType,n.align==="center"?(o=c(n.x0-r/2),l=c(n.x1-r/2)):n.align==="end"?(o=c(n.x0+n.thickness/2-r),l=c(n.x1+n.thickness/2-r)):(o=c(n.x0-n.thickness/2),l=c(n.x1-n.thickness/2));const d=c(o+r),p=c(l+r),f=Math.abs(a-s)>1e-6,g=n.endArrow&&f?`L${c(l-r/2)},${a}L${c((l+p)/2)},${c(a+r)}L${c(p+r/2)},${a}`:"",_=n.startArrow&&f?`L${c(d+r/2)},${s}L${c((d+o)/2)},${c(s-r)}L${c(o-r/2)},${s}`:"";return n.pathType==="line"?`M${o},${s}L${l},${a}${g}L${p},${a}L${d},${s}${_}Z`:n.pathType==="polyline"?`M${o},${s}L${o},${u}L${l},${u}L${l},${a}
    ${g}L${p},${a}L${p},${u}L${d},${u}L${d},${s}${_}Z`:`M${o},${s}C${o},${u},${l},${h},${l},${a}
  ${g}L${p},${a}C${p},${h},${d},${u},${d},${s}${_}Z`},r8t=(n,t,e,i)=>{var r;const s=(r=n.direction)!==null&&r!==void 0?r:i==null?void 0:i.direction,a=["vertical","TB","BT"].includes(s)?n8t:i8t,o=typeof n.ratio=="number"&&n.ratio>=0&&n.ratio<=1,l=Object.keys(n);return["x0","y0","x1","y1"].every(u=>l.includes(u))?{back:{path:o?a(n,1):""},front:{path:a(n,o?n.ratio:1)}}:{}},s8t=(n,t,e)=>{const i={x0:n.getGraphicAttribute("x0",!1),x1:n.getGraphicAttribute("x1",!1),y0:n.getGraphicAttribute("y0",!1),y1:n.getGraphicAttribute("y1",!1),thickness:n.getGraphicAttribute("thickness",!1),round:n.getGraphicAttribute("round",!1),align:n.getGraphicAttribute("align",!1),pathType:n.getGraphicAttribute("pathType",!1),endArrow:n.getGraphicAttribute("endArrow",!1),startArrow:n.getGraphicAttribute("startArrow",!1)};return Object.keys(i).forEach(r=>{F(i[r])&&delete i[r]}),{from:Object.assign({},i,{x1:i.x0,y1:i.y0}),to:i}},a8t=(n,t,e)=>{const i={x0:n.getGraphicAttribute("x0",!0),x1:n.getGraphicAttribute("x1",!0),y0:n.getGraphicAttribute("y0",!0),y1:n.getGraphicAttribute("y1",!0),thickness:n.getGraphicAttribute("thickness",!0),round:n.getGraphicAttribute("round",!0),align:n.getGraphicAttribute("align",!0),pathType:n.getGraphicAttribute("pathType",!0),endArrow:n.getGraphicAttribute("endArrow",!0),startArrow:n.getGraphicAttribute("startArrow",!0)};return Object.keys(i).forEach(r=>{F(i[r])&&delete i[r]}),{from:i,to:Object.assign({},i,{x1:i.x0,y1:i.y0})}},o8t=(n,t,e)=>{const i={thickness:n.getGraphicAttribute("thickness",!1),round:n.getGraphicAttribute("round",!1),align:n.getGraphicAttribute("align",!1),pathType:n.getGraphicAttribute("pathType",!1),endArrow:n.getGraphicAttribute("endArrow",!1),startArrow:n.getGraphicAttribute("startArrow",!1)};return Object.keys(i).forEach(r=>{F(i[r])&&delete i[r]}),{from:Object.assign(Object.assign({x0:n.getGraphicAttribute("x0",!0),x1:n.getGraphicAttribute("x1",!0),y0:n.getGraphicAttribute("y0",!0),y1:n.getGraphicAttribute("y1",!0)},i),i),to:Object.assign({x0:n.getGraphicAttribute("x0",!1),x1:n.getGraphicAttribute("x1",!1),y0:n.getGraphicAttribute("y0",!1),y1:n.getGraphicAttribute("y1",!1)},i)}},l8t=()=>{Ct.registerGlyph("linkPath",{back:"path",front:"path"}).registerFunctionEncoder(r8t).registerChannelEncoder("backgroundStyle",(n,t)=>({back:t})).registerDefaultEncoder(()=>({back:{zIndex:0},front:{zIndex:1}})),Ct.registerAnimationType("linkPathGrowIn",s8t),Ct.registerAnimationType("linkPathGrowOut",a8t),Ct.registerAnimationType("linkPathUpdate",o8t),rT(),Wtt()};class qtt extends LF{parseAddition(t){return super.parseAddition(t),this.scale(t.scale),this}scale(t){if(this.spec.scale){const i=It(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;this.detach(i),this.spec.scale=void 0}const e=It(t)?this.view.getScaleById(t):t;return this.spec.scale=e,this.attach(e),this._updateComponentEncoders(),this.commit(),this}getScale(){return It(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale}}const u8t=(n,t,e,i)=>{var r,s,a,o;const l=(s=(r=t==null?void 0:t.components)===null||r===void 0?void 0:r.axis)!==null&&s!==void 0?s:{};if(!n)return gt({},l,e??{});const u=[((o=(a=n.tickData)===null||a===void 0?void 0:a.call(n,i))!==null&&o!==void 0?o:[]).map(h=>({id:h.index,label:h.tick,value:h.value,rawValue:h.tick}))];return gt({},l,{items:u},e??{})},h8t=(n,t,e,i)=>{var r,s,a,o;const l=(s=(r=t==null?void 0:t.components)===null||r===void 0?void 0:r.circleAxis)!==null&&s!==void 0?s:{};if(!n)return gt({},l,e??{});const u=[((o=(a=n.tickData)===null||a===void 0?void 0:a.call(n,i))!==null&&o!==void 0?o:[]).map(h=>({id:h.index,label:h.tick,value:h.value,rawValue:h.tick}))];return gt({},l,{items:u},e??{})},Ztt=(n,t,e,i,r,s)=>{var a;const o=n.getCoordinateAxisPosition();r&&r.position==="auto"&&(r.position=e?"content":o);const l=n.getCoordinateAxisPoints(i);if(l){const c={start:l[0],end:l[1],verticalFactor:(o==="top"||o==="left"?-1:1)*(e?-1:1)*(!((a=n.getSpec().range)===null||a===void 0)&&a.reversed?-1:1)};if(s&&t.type==="polar"){const d=t.angle();c.center=t.origin(),c.startAngle=d[0],c.endAngle=d[1]}return c}const u=t.radius(),h=t.angle();return{center:t.origin(),radius:u[1],innerRadius:u[0],inside:e,startAngle:h[0],endAngle:h[1]}};class Jtt extends qtt{constructor(t,e,i){super(t,yi.axis,e),this.spec.componentType=yi.axis,this.mode=i}parseAddition(t){return super.parseAddition(t),this.axisType(t.axisType),this.tickCount(t.tickCount),this.inside(t.inside),this.baseValue(t.baseValue),this}scale(t){return super.scale(t),this._axisComponentType=null,this}axisType(t){return this.spec.axisType=t,this._axisComponentType=null,this._prepareRejoin(),this.commit(),this}addGraphicItem(t,e){const i=gt({x:0,y:0,start:{x:0,y:0},end:{x:0,y:0}},t),r=Ct.createGraphicComponent(this._getAxisComponentType(),i,{mode:this.mode,skipDefault:this.spec.skipTheme});return super.addGraphicItem(i,e,r)}tickCount(t){const e=It(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;return e&&e.tickCount(t),this.setFunctionSpec(t,"tickCount")}inside(t){return this.setFunctionSpec(t,"inside")}baseValue(t){return this.setFunctionSpec(t,"baseValue")}getAxisComponentType(){return this._axisComponentType}_updateComponentEncoders(){const t=It(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale,e=Object.assign({update:{}},this.spec.encode),i=Object.keys(e).reduce((r,s)=>{const a=e[s];return a&&(r[s]={callback:(o,l,u)=>{var h,c;const d=this.spec.skipTheme?null:this.view.getCurrentTheme();let p=qh(a,o,l,u);const f=en(this.spec.inside,u,o,l),g=en(this.spec.baseValue,u,o,l),_=(h=t==null?void 0:t.getCoordinate)===null||h===void 0?void 0:h.call(t);_&&(p=Object.assign(Ztt(t,_,f,g,this.spec.layout),p));const v=(c=t==null?void 0:t.getScale)===null||c===void 0?void 0:c.call(t),y=en(this.spec.tickCount,u,o,l);switch(this._getAxisComponentType()){case ml.lineAxis:return u8t(v,d,p,y);case ml.circleAxis:return h8t(v,d,p,y)}return p}}),r},{});this._encoders=i}_getAxisComponentType(){var t;if(this._axisComponentType)return this._axisComponentType;let e=this.spec.axisType;if(F(e)){const i=It(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;e=!((t=i==null?void 0:i.getCoordinate)===null||t===void 0)&&t.call(i)?i.getCoordinateAxisPoints()?"line":"circle":"line"}return this._axisComponentType=e==="circle"?ml.circleAxis:ml.lineAxis,this._axisComponentType}}Jtt.componentType=yi.axis;const c8t=()=>{Ct.registerGraphicComponent(ml.lineAxis,(n,t)=>new by(n,t)),Ct.registerGraphicComponent(ml.circleAxis,n=>new xy(n)),Ct.registerComponent(yi.axis,Jtt)},d8t=(n,t,e,i,r,s={})=>{var a;const o=(a=s.components)===null||a===void 0?void 0:a.dataLabel,l=n.map((u,h)=>{var c,d,p,f,g;const _=Object.assign(Object.assign({},r),{labelIndex:h}),v=(c=en(i,_,u))!==null&&c!==void 0?c:{},{components:y={}}=s;let b={};switch(u.markType){case Rt.line:case Rt.area:b=v.type==="line"?y.lineLabel:v.type==="area"?y.areaLabel:y.lineDataLabel;break;case Rt.rect:case Rt.rect3d:case Rt.interval:b=y.rectLabel;break;case Rt.symbol:case Rt.circle:case Rt.cell:b=y.symbolLabel;break;case Rt.arc:case Rt.arc3d:b=y.arcLabel;break;case Rt.polygon:case Rt.path:default:b=y.pointLabel}const S=(d=v.data)!==null&&d!==void 0?d:[],A=(f=(p=b==null?void 0:b.data)===null||p===void 0?void 0:p[0])!==null&&f!==void 0?f:{};S&&S.length>0?S.forEach((C,k)=>{if(u.elements[k]){const M=qh(e,C,u.elements[k],_);gt(C,A,M)}}):u.elements.forEach(C=>{if(C.getGraphicItem().releaseStatus!=="willRelease")if(u.isCollectionMark())C.getDatum().forEach(k=>{const M=qh(e,k,C,_);S.push(gt({},A,M))});else{const k=qh(e,C.getDatum(),C,_),M=gt({},A,k);S.push(M)}});const w=(g=u.graphicItem)===null||g===void 0?void 0:g.name;return gt({},b,{data:S,baseMarkGroupName:w,getBaseMarks:()=>u.elements.map(C=>C.getGraphicItem())},v??{})}).filter(u=>!F(u));return gt({},o,{size:t,dataLabels:l})};let Qtt=class extends LF{constructor(t,e){super(t,yi.label,e),this.spec.componentType=yi.label}parseAddition(t){return super.parseAddition(t),this.labelStyle(t.labelStyle),this.size(t.size),this.target(t.target),this}labelStyle(t){return this.setFunctionSpec(t,"labelStyle")}size(t){return this.setFunctionSpec(t,"size")}target(t){if(this.spec.target){const e=ot(this.spec.target).map(i=>It(i)?this.view.getMarkById(i):i);this.detach(e)}if(this.spec.target=t,t){const e=ot(t).map(i=>It(i)?this.view.getMarkById(i):i);this.attach(e)}return this.commit(),this}_updateComponentEncoders(){const t=Object.assign({update:{}},this.spec.encode),e=Object.keys(t).reduce((i,r)=>{const s=t[r];return s&&(i[r]={callback:(a,o,l)=>{var u,h,c,d;const p=ot(this.spec.target).map(v=>It(v)?this.view.getMarkById(v):v),f=(h=(u=this.group)===null||u===void 0?void 0:u.getGroupGraphicItem)===null||h===void 0?void 0:h.call(u);let g=en(this.spec.size,l);g||(g=f?{width:(c=f.attribute.width)!==null&&c!==void 0?c:f.AABBBounds.width(),height:(d=f.attribute.height)!==null&&d!==void 0?d:f.AABBBounds.height()}:{width:1/0,height:1/0});const _=this.spec.skipTheme?null:this.view.getCurrentTheme();return d8t(p,g,s,this.spec.labelStyle,l,_)}}),i},{});this._encoders=e}};Qtt.componentType=yi.label;const tet=()=>{Ct.registerGraphicComponent(yi.label,n=>new U2(n)),Ct.registerComponent(yi.label,Qtt)},p8t=(n,t,e,i)=>{var r,s,a,o;const l=(s=(r=t==null?void 0:t.components)===null||r===void 0?void 0:r.grid)!==null&&s!==void 0?s:{};if(!n)return gt({},l,e??{});const u=((o=(a=n.tickData)===null||a===void 0?void 0:a.call(n,i))!==null&&o!==void 0?o:[]).map(h=>({id:h.index,label:h.tick,value:h.value,rawValue:h.tick}));return gt({},l,{items:u},e??{})},f8t=(n,t,e,i)=>{var r,s,a,o;const l=(s=(r=t==null?void 0:t.components)===null||r===void 0?void 0:r.circleGrid)!==null&&s!==void 0?s:{};if(!n)return gt({},l,e??{});const u=((o=(a=n.tickData)===null||a===void 0?void 0:a.call(n,i))!==null&&o!==void 0?o:[]).map(h=>({id:h.index,label:h.tick,value:h.value,rawValue:h.tick}));return gt({},l,{items:u},e??{})};class eet extends qtt{constructor(t,e,i){super(t,yi.grid,e),this.spec.componentType=yi.grid,this.mode=i}parseAddition(t){return super.parseAddition(t),this.target(t.target),this.gridType(t.gridType),this.gridShape(t.gridShape),this}scale(t){return super.scale(t),this._gridComponentType=null,this}gridType(t){return this.spec.gridType=t,this._gridComponentType=null,this._prepareRejoin(),this.commit(),this}gridShape(t){return this.spec.gridShape=t,this.commit(),this}target(t){if(this.spec.target){const i=It(this.spec.target)?this.view.getMarkById(this.spec.target):this.spec.target;this.detach(i)}this.spec.target=t;const e=It(t)?this.view.getMarkById(t):t;return this.attach(e),this._targetAxis=e,this._gridComponentType=null,this._updateComponentEncoders(),this.commit(),this}tickCount(t){const e=It(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;return e&&e.tickCount(t),this.setFunctionSpec(t,"tickCount")}inside(t){return this.setFunctionSpec(t,"inside")}baseValue(t){return this.setFunctionSpec(t,"baseValue")}addGraphicItem(t,e){const i=gt({x:0,y:0,start:{x:0,y:0},end:{x:0,y:0}},t),r=Ct.createGraphicComponent(this._getGridComponentType(),i,{mode:this.mode,skipDefault:this.spec.skipTheme});return super.addGraphicItem(i,e,r)}_updateComponentEncoders(){const t=Object.assign({update:{}},this.spec.encode),e=Object.keys(t).reduce((i,r)=>{const s=t[r];return s&&(i[r]={callback:(a,o,l)=>{var u,h,c,d;const p=this.spec.skipTheme?null:this.view.getCurrentTheme();let f,g=qh(s,a,o,l);const _=en(this.spec.baseValue,l,a,o);if(this._targetAxis){const b=(u=this._targetAxis.getSpec())===null||u===void 0?void 0:u.scale;f=It(b)?this.view.getScaleById(b):b;const S=this._targetAxis.elements[0];if(S)switch(this._getGridComponentType()){case Vn.lineAxisGrid:g=Object.assign({x:S.getGraphicAttribute("x"),y:S.getGraphicAttribute("y"),start:S.getGraphicAttribute("start"),end:S.getGraphicAttribute("end"),verticalFactor:(h=S.getGraphicAttribute("verticalFactor"))!==null&&h!==void 0?h:1},g);break;case Vn.circleAxisGrid:g=Object.assign({x:S.getGraphicAttribute("x"),y:S.getGraphicAttribute("y"),center:S.getGraphicAttribute("center"),radius:S.getGraphicAttribute("radius"),innerRadius:S.getGraphicAttribute("innerRadius"),inside:S.getGraphicAttribute("inside"),startAngle:S.getGraphicAttribute("startAngle"),endAngle:S.getGraphicAttribute("endAngle")},g)}}else{f=It(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;const b=en(this.spec.inside,l,a,o),S=(c=f==null?void 0:f.getCoordinate)===null||c===void 0?void 0:c.call(f);S&&(g=Object.assign(Ztt(f,S,b,_,this.spec.layout,!0),g))}this._getGridComponentType()===Vn.lineAxisGrid&&(g=this.spec.gridShape!=="line"&&this.spec.gridShape?Object.assign({center:g.start,closed:!0},g,{type:this.spec.gridShape}):Object.assign({},g,{type:"line"}));const v=(d=f==null?void 0:f.getScale)===null||d===void 0?void 0:d.call(f),y=en(this.spec.tickCount,l,a,o);switch(this._getGridComponentType()){case Vn.lineAxisGrid:return p8t(v,p,g,y);case Vn.circleAxisGrid:return f8t(v,p,g,y)}return g}}),i},{});this._encoders=e}_getGridComponentType(){var t;if(this._gridComponentType)return this._gridComponentType;if(this.spec.gridType)this.spec.gridType==="circle"?this._gridComponentType=Vn.circleAxisGrid:this._gridComponentType=Vn.lineAxisGrid;else if(this._targetAxis)switch(this._targetAxis.getAxisComponentType()){case ml.circleAxis:this._gridComponentType=Vn.circleAxisGrid;break;case ml.lineAxis:default:this._gridComponentType=Vn.lineAxisGrid}else if(this.spec.scale){const e=It(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;this._gridComponentType=!((t=e==null?void 0:e.getCoordinate)===null||t===void 0)&&t.call(e)?e.getCoordinateAxisPoints()?Vn.lineAxisGrid:Vn.circleAxisGrid:Vn.lineAxisGrid}else this._gridComponentType=Vn.lineAxisGrid;return this._gridComponentType}}eet.componentType=yi.grid;const g8t=()=>{Ct.registerGraphicComponent(Vn.lineAxisGrid,(n,t)=>new ZQ(n,t)),Ct.registerGraphicComponent(Vn.circleAxisGrid,(n,t)=>new JQ(n,t)),Ct.registerComponent(yi.grid,eet)},m8t=(n,t,e)=>t.filter(i=>n.callback(i,e)),v8t=(n,t,e)=>{const i=n.callback,r=n.as;if(!n.all)return t.forEach(a=>{const o=i(a,e);if(!F(r)){if(F(a))return;a[r]=o}return o}),t;const s=i(t,e);return F(r)||F(t)?s:(t[r]=s,t)};function iet(n){return n.reduce((t,e)=>t+e,0)}function _8t(n){return n.length===0?0:iet(n)/n.length}const y8t={min:dn,max:Vi,average:_8t,sum:iet};function b8t(n,t,e,i){const r=Math.floor(t.length/n),s=[],a=t.length;let o,l,u,h=0,c=0;s[c++]=h;for(let d=1;d<a-1;d+=r){const p=Math.min(d+r,a-1),f=Math.min(d+2*r,a),g=(f+p)/2;let _=0;for(let A=p;A<f;A++){const w=t[A][i];Number.isNaN(w)||(_+=w)}_/=f-p;const v=d,y=Math.min(d+r,a),b=d-1,S=t[h][i];o=-1,u=v;for(let A=v;A<y;A++){const w=t[A][i];Number.isNaN(i)||(l=Math.abs((b-g)*(w-S)-(b-A)*(_-S)),l>o&&(o=l,u=A))}s[c++]=u,h=u}return s[c-1]!==a-1&&(s[c++]=a-1),s.map(d=>e?t[d].i:d)}function sT(n,t,e,i,r){let s=Math.floor(t.length/n);const a=[],o=t.length;let l=0,u=[];a.push(l),t[l][r]=t[l][r];for(let h=1;h<o-1;h+=s){s>o-h&&(s=o-h,u.length=s),u=[];for(let d=0;d<s;d++)u.push(t[h+d][r]);const c=y8t[i](u);l=Math.min(Math.round(h+u.length/2)||0,o-1),t[l][r]=c,a.push(l)}return a.map(h=>e?t[h].i:h)}function x8t(n,t,e,i){return sT(n,t,e,"min",i)}function S8t(n,t,e,i){return sT(n,t,e,"max",i)}function A8t(n,t,e,i){return sT(n,t,e,"average",i)}function w8t(n,t,e,i){return sT(n,t,e,"sum",i)}const C8t=(n,t)=>{let e=n.size;const i=n.factor||1;if(Array.isArray(e)&&(e=Math.floor(e[1]-e[0])),e*=i,e<=0)return[];if(t.length<=e)return t;if(n.skipfirst)return t.slice(0,1);const{mode:r,yfield:s,groupBy:a}=n,o=s??"y";let l=b8t;if(r==="min"?l=x8t:r==="max"?l=S8t:r==="average"?l=A8t:r==="sum"&&(l=w8t),t.length){const u={};if(a){for(let c=0,d=t.length;c<d;c++){const p=t[c],f=p[a];u[f]?u[f].push({[o]:p[o],i:c}):(u[f]=[],u[f].push({[o]:p[o],i:c}))}let h=[];return Object.keys(u).forEach(c=>{const d=u[c];if(d.length<=e){const p=d.map(f=>f.i);h=h.concat(p)}else{const p=l(e,d,!0,o);h=h.concat(p),d.forEach(f=>t[f.i][o]=f[o])}}),h.sort((c,d)=>c-d),h.map(c=>t[c])}return l(e,t,!1,o).map(h=>t[h])}return[]},Cy="_mo_hide_";function k8t(n){return n.forEach(t=>{t.getGraphicAttribute(Cy)&&(t.setGraphicAttribute("visible",!0),t.setGraphicAttribute(Cy,!1))}),n}function T8t(n,t,e,i){if(i){let r=-1/0,s=0;const a=F(t);let o=t;n.forEach(l=>{if(l.getGraphicAttribute("visible")===!1)return;const u=l.getGraphicAttribute("size")/2,h=l.getGraphicAttribute("x");a&&(o=(u+s)*e),Math.abs(h-r)<o+s+u?l.getGraphicAttribute("forceShow")||(l.setGraphicAttribute(Cy,!0),l.setGraphicAttribute("visible",!1)):r=h,s=u})}}function M8t(n,t,e,i){if(i){let r=-1/0,s=0;const a=F(t);let o=t;n.forEach(l=>{if(l.getGraphicAttribute("visible")===!1)return;const u=l.getGraphicAttribute("size")/2,h=l.getGraphicAttribute("y");a&&(o=(u+s)*e),Math.abs(h-r)<o+s+u?l.getGraphicAttribute("forceShow")||(l.setGraphicAttribute(Cy,!0),l.setGraphicAttribute("visible",!1)):r=h,s=u})}}function P8t(n,t,e,i){if(i){let s=-1/0,a=0,o=0;const l=F(t);let u=t;n.forEach(h=>{if(h.getGraphicAttribute("visible")===!1)return;const c=h.getGraphicAttribute("size")/2,d=h.getGraphicAttribute("x"),p=h.getGraphicAttribute("y");l&&(u=(c+a)*e),o=(-1/0-d)**2+(s-p)**2,o<(u+a+c)**2?h.getGraphicAttribute("forceShow")||(h.setGraphicAttribute(Cy,!0),h.setGraphicAttribute("visible",!1)):s=p,a=c})}}const E8t=(n,t)=>{if(!t||t.length===0)return;let{radius:e}=n;F(e)&&t[0].mark.markType==="symbol"&&(e=!0);const{direction:i,delta:r,deltaMul:s=1,groupBy:a}=n,o=l=>{k8t(l);const u=n.sort?l.slice().sort((h,c)=>h.getGraphicAttribute("x")-c.getGraphicAttribute("x")):l;i===0?P8t(u,r,s,e):i===1?T8t(u,r,s,e):M8t(u,r,s,e)};if(a){const l=t.reduce((u,h)=>{const c=h.getDatum()[a];return u[c]?u[c].push(h):u[c]=[h],u},{});Object.keys(l).forEach(u=>{o(l[u])})}else o(t);return t},O8t=()=>{Ct.registerTransform("filter",{transform:m8t,markPhase:"beforeJoin"},!0)},R8t=()=>{Ct.registerTransform("map",{transform:v8t,markPhase:"beforeJoin"},!0)},FF=()=>{Ct.registerTransform("sampling",{transform:C8t,markPhase:"afterEncode"},!0)},jF=()=>{Ct.registerTransform("markoverlap",{transform:E8t,markPhase:"afterEncode"},!0)},I8t=(n,t,e)=>{var i;const r=n.getGraphicAttribute("clipRangeByDimension",!1),s=(i=n.getGraphicAttribute("clipRange",!1))!==null&&i!==void 0?i:1;return t&&t.clipDimension?{from:{clipRange:0,clipRangeByDimension:t.clipDimension},to:{clipRange:s,clipRangeByDimension:r}}:{from:{clipRange:0},to:{clipRange:s}}},L8t=(n,t,e)=>{var i;const r=n.getGraphicAttribute("clipRangeByDimension",!0),s=(i=n.getGraphicAttribute("clipRange",!0))!==null&&i!==void 0?i:1;return t&&t.clipDimension?{from:{clipRange:s,clipRangeByDimension:t.clipDimension},to:{clipRange:0,clipRangeByDimension:r}}:{from:{clipRange:s},to:{clipRange:0}}},D8t=(n,t,e)=>{var i,r,s,a;const o=(i=n.getFinalAnimationAttributes())!==null&&i!==void 0?i:{};return{from:{opacity:0,fillOpacity:0,strokeOpacity:0},to:{opacity:(r=o.opacity)!==null&&r!==void 0?r:1,fillOpacity:(s=o.fillOpacity)!==null&&s!==void 0?s:1,strokeOpacity:(a=o.strokeOpacity)!==null&&a!==void 0?a:1}}},B8t=(n,t,e)=>{var i,r,s;return{from:{opacity:(i=n.getGraphicAttribute("opacity",!0))!==null&&i!==void 0?i:1,fillOpacity:(r=n.getGraphicAttribute("fillOpacity",!0))!==null&&r!==void 0?r:1,strokeOpacity:(s=n.getGraphicAttribute("strokeOpacity",!0))!==null&&s!==void 0?s:1},to:{opacity:0,fillOpacity:0,strokeOpacity:0}}},F8t=(n,t,e)=>{switch(t==null?void 0:t.direction){case"x":{const i=n.getFinalAnimationAttribute("x"),r=n.getFinalAnimationAttribute("x1"),s=n.getFinalAnimationAttribute("width");return{from:z(s)?{x:i+s/2,x1:void 0,width:0}:{x:(i+r)/2,x1:(i+r)/2,width:void 0},to:{x:i,x1:r,width:s}}}case"y":{const i=n.getFinalAnimationAttribute("y"),r=n.getFinalAnimationAttribute("y1"),s=n.getFinalAnimationAttribute("height");return{from:z(s)?{y:i+s/2,y1:void 0,height:0}:{y:(i+r)/2,y1:(i+r)/2,height:void 0},to:{y:i,y1:r,height:s}}}default:{const i=n.getFinalAnimationAttribute("x"),r=n.getFinalAnimationAttribute("x1"),s=n.getFinalAnimationAttribute("width"),a=n.getFinalAnimationAttribute("y"),o=n.getFinalAnimationAttribute("y1"),l=n.getFinalAnimationAttribute("height"),u={};return z(s)?(u.x=i+s/2,u.width=0,u.x1=void 0):(u.x=(i+r)/2,u.x1=(i+r)/2,u.width=void 0),z(l)?(u.y=a+l/2,u.height=0,u.y1=void 0):(u.y=(a+o)/2,u.y1=(a+o)/2,u.height=void 0),{from:u,to:{x:i,y:a,x1:r,y1:o,width:s,height:l}}}}},j8t=(n,t,e)=>{switch(t==null?void 0:t.direction){case"x":{const i=n.getFinalAnimationAttribute("x"),r=n.getFinalAnimationAttribute("x1"),s=n.getFinalAnimationAttribute("width");return{to:z(s)?{x:i+s/2,x1:void 0,width:0}:{x:(i+r)/2,x1:(i+r)/2,width:void 0}}}case"y":{const i=n.getFinalAnimationAttribute("y"),r=n.getFinalAnimationAttribute("y1"),s=n.getFinalAnimationAttribute("height");return{to:z(s)?{y:i+s/2,y1:void 0,height:0}:{y:(i+r)/2,y1:(i+r)/2,height:void 0}}}default:{const i=n.getFinalAnimationAttribute("x"),r=n.getFinalAnimationAttribute("y"),s=n.getFinalAnimationAttribute("x1"),a=n.getFinalAnimationAttribute("y1"),o=n.getFinalAnimationAttribute("width"),l=n.getFinalAnimationAttribute("height"),u={};return z(o)?(u.x=i+o/2,u.width=0,u.x1=void 0):(u.x=(i+s)/2,u.x1=(i+s)/2,u.width=void 0),z(l)?(u.y=r+l/2,u.height=0,u.y1=void 0):(u.y=(r+a)/2,u.y1=(r+a)/2,u.height=void 0),{to:u}}}};function N8t(n,t,e){const i=n.getFinalAnimationAttribute("x"),r=n.getFinalAnimationAttribute("x1"),s=n.getFinalAnimationAttribute("width");if(t&&t.orient==="negative"){const o=z(s)?Math.max(i,i+s):Math.max(i,r);return{from:{x:o,x1:F(r)?void 0:o,width:F(s)?void 0:0},to:{x:i,x1:r,width:s}}}const a=z(s)?Math.min(i,i+s):Math.min(i,r);return{from:{x:a,x1:F(r)?void 0:a,width:F(s)?void 0:0},to:{x:i,x1:r,width:s}}}function z8t(n,t,e){var i;const r=n.getFinalAnimationAttribute("x"),s=n.getFinalAnimationAttribute("x1"),a=n.getFinalAnimationAttribute("width");let o;return t&&t.orient==="negative"?Mt(t.overall)?o=t.overall:e.group?(o=(i=e.groupWidth)!==null&&i!==void 0?i:e.group.getBounds().width(),e.groupWidth=o):o=e.width:o=Mt(t==null?void 0:t.overall)?t==null?void 0:t.overall:0,{from:{x:o,x1:F(s)?void 0:o,width:F(a)?void 0:0},to:{x:r,x1:s,width:a}}}const H8t=(n,t,e)=>{var i;return((i=t==null?void 0:t.overall)!==null&&i!==void 0&&i)!==!1?z8t(n,t,e):N8t(n,t)};function V8t(n,t,e){const i=n.getFinalAnimationAttribute("x"),r=n.getFinalAnimationAttribute("x1"),s=n.getFinalAnimationAttribute("width");if(t&&t.orient==="negative"){const o=z(s)?Math.max(i,i+s):Math.max(i,r);return{to:{x:o,x1:F(r)?void 0:o,width:F(s)?void 0:0}}}const a=z(s)?Math.min(i,i+s):Math.min(i,r);return{to:{x:a,x1:F(r)?void 0:a,width:F(s)?void 0:0}}}function W8t(n,t,e){var i;const r=n.getFinalAnimationAttribute("x1"),s=n.getFinalAnimationAttribute("width");let a;return t&&t.orient==="negative"?Mt(t.overall)?a=t.overall:e.group?(a=(i=e.groupWidth)!==null&&i!==void 0?i:e.group.getBounds().width(),e.groupWidth=a):a=e.width:a=Mt(t==null?void 0:t.overall)?t.overall:0,{to:{x:a,x1:F(r)?void 0:a,width:F(s)?void 0:0}}}const $8t=(n,t,e)=>{var i;return((i=t==null?void 0:t.overall)!==null&&i!==void 0&&i)!==!1?W8t(n,t,e):V8t(n,t)};function G8t(n,t,e){const i=n.getFinalAnimationAttribute("y"),r=n.getFinalAnimationAttribute("y1"),s=n.getFinalAnimationAttribute("height");if(t&&t.orient==="negative"){const o=z(s)?Math.max(i,i+s):Math.max(i,r);return{from:{y:o,y1:F(r)?void 0:o,height:F(s)?void 0:0},to:{y:i,y1:r,height:s}}}const a=z(s)?Math.min(i,i+s):Math.min(i,r);return{from:{y:a,y1:F(r)?void 0:a,height:F(s)?void 0:0},to:{y:i,y1:r,height:s}}}function U8t(n,t,e){var i;const r=n.getFinalAnimationAttribute("y"),s=n.getFinalAnimationAttribute("y1"),a=n.getFinalAnimationAttribute("height");let o;return t&&t.orient==="negative"?Mt(t.overall)?o=t.overall:e.group?(o=(i=e.groupHeight)!==null&&i!==void 0?i:e.group.getBounds().height(),e.groupHeight=o):o=e.height:o=Mt(t==null?void 0:t.overall)?t.overall:0,{from:{y:o,y1:F(s)?void 0:o,height:F(a)?void 0:0},to:{y:r,y1:s,height:a}}}const Y8t=(n,t,e)=>{var i;return((i=t==null?void 0:t.overall)!==null&&i!==void 0&&i)!==!1?U8t(n,t,e):G8t(n,t)};function X8t(n,t,e){const i=n.getFinalAnimationAttribute("y"),r=n.getFinalAnimationAttribute("y1"),s=n.getFinalAnimationAttribute("height");if(t&&t.orient==="negative"){const o=z(s)?Math.max(i,i+s):Math.max(i,r);return{to:{y:o,y1:F(r)?void 0:o,height:F(s)?void 0:0}}}const a=z(s)?Math.min(i,i+s):Math.min(i,r);return{to:{y:a,y1:F(r)?void 0:a,height:F(s)?void 0:0}}}function K8t(n,t,e){var i;const r=n.getFinalAnimationAttribute("y1"),s=n.getFinalAnimationAttribute("height");let a;return t&&t.orient==="negative"?Mt(t.overall)?a=t.overall:e.group?(a=(i=e.groupHeight)!==null&&i!==void 0?i:e.group.getBounds().height(),e.groupHeight=a):a=e.height:a=Mt(t==null?void 0:t.overall)?t.overall:0,{to:{y:a,y1:F(r)?void 0:a,height:F(s)?void 0:0}}}const q8t=(n,t,e)=>{var i;return((i=t==null?void 0:t.overall)!==null&&i!==void 0&&i)!==!1?K8t(n,t,e):X8t(n,t)},Z8t=(n,t,e)=>{const i=n.getFinalAnimationAttributes();return t&&t.orient==="anticlockwise"?{from:{startAngle:i==null?void 0:i.endAngle},to:{startAngle:i==null?void 0:i.startAngle}}:{from:{endAngle:i==null?void 0:i.startAngle},to:{endAngle:i==null?void 0:i.endAngle}}},J8t=(n,t,e)=>{const i=n.getFinalAnimationAttributes();if(t&&t.orient==="anticlockwise"){const s=Mt(t.overall)?t.overall:2*Math.PI;return{from:{startAngle:s,endAngle:s},to:{startAngle:i==null?void 0:i.startAngle,endAngle:i==null?void 0:i.endAngle}}}const r=Mt(t==null?void 0:t.overall)?t.overall:0;return{from:{startAngle:r,endAngle:r},to:{startAngle:i==null?void 0:i.startAngle,endAngle:i==null?void 0:i.endAngle}}},Q8t=(n,t,e)=>{var i;return((i=t==null?void 0:t.overall)!==null&&i!==void 0&&i)!==!1?J8t(n,t):Z8t(n,t)},tNt=(n,t,e)=>{const i=n.getFinalAnimationAttributes();return t&&t.orient==="anticlockwise"?{from:{startAngle:n.getGraphicAttribute("startAngle",!0)},to:{startAngle:i==null?void 0:i.endAngle}}:{from:{endAngle:n.getGraphicAttribute("endAngle",!0)},to:{endAngle:i==null?void 0:i.startAngle}}},eNt=(n,t,e)=>{if(t&&t.orient==="anticlockwise"){const r=Mt(t.overall)?t.overall:2*Math.PI;return{from:{startAngle:n.getGraphicAttribute("startAngle",!0),endAngle:n.getGraphicAttribute("endAngle",!0)},to:{startAngle:r,endAngle:r}}}const i=Mt(t==null?void 0:t.overall)?t.overall:0;return{from:{startAngle:n.getGraphicAttribute("startAngle",!0),endAngle:n.getGraphicAttribute("endAngle",!0)},to:{startAngle:i,endAngle:i}}},iNt=(n,t,e)=>{var i;return((i=t==null?void 0:t.overall)!==null&&i!==void 0&&i)!==!1?eNt(n,t):tNt(n,t)},nNt=(n,t,e)=>{const i=n.getFinalAnimationAttributes();return t&&t.orient==="inside"?{from:{innerRadius:i==null?void 0:i.outerRadius},to:{innerRadius:i==null?void 0:i.innerRadius}}:{from:{outerRadius:i==null?void 0:i.innerRadius},to:{outerRadius:i==null?void 0:i.outerRadius}}},rNt=(n,t,e)=>{const i=n.getFinalAnimationAttributes(),r=Mt(t==null?void 0:t.overall)?t.overall:0;return{from:{innerRadius:r,outerRadius:r},to:{innerRadius:i==null?void 0:i.innerRadius,outerRadius:i==null?void 0:i.outerRadius}}},sNt=(n,t,e)=>{var i;return((i=t==null?void 0:t.overall)!==null&&i!==void 0&&i)!==!1?rNt(n,t):nNt(n,t)},aNt=(n,t,e)=>{const i=n.getFinalAnimationAttributes();return t&&t.orient==="inside"?{from:{innerRadius:n.getGraphicAttribute("innerRadius",!0)},to:{innerRadius:i==null?void 0:i.outerRadius}}:{from:{outerRadius:n.getGraphicAttribute("outerRadius",!0)},to:{outerRadius:i==null?void 0:i.innerRadius}}},oNt=(n,t,e)=>{const i=Mt(t==null?void 0:t.overall)?t.overall:0;return{from:{innerRadius:n.getGraphicAttribute("innerRadius",!0),outerRadius:n.getGraphicAttribute("outerRadius",!0)},to:{innerRadius:i,outerRadius:i}}},lNt=(n,t,e)=>{var i;return((i=t==null?void 0:t.overall)!==null&&i!==void 0&&i)!==!1?oNt(n,t):aNt(n,t)},net=(n,t,e)=>{const i=n.getGraphicAttribute("points",!1),r={x:0,y:0};return i.forEach(s=>{r.x+=s.x,r.y+=s.y}),r.x/=i.length,r.y/=i.length,t&&t.center&&(st(t.center.x)&&(r.x=t.center.x),st(t.center.y)&&(r.y=t.center.y)),n.mark.markType==="area"&&(r.x1=r.x,r.y1=r.y),i.map(s=>Object.assign({},s,r))},uNt=(n,t,e)=>({from:{points:net(n,t)},to:{points:n.getGraphicAttribute("points",!1)}}),hNt=(n,t,e)=>({from:{points:n.getGraphicAttribute("points",!0)},to:{points:net(n,t)}}),ret=(n,t,e)=>n.getGraphicAttribute("points",!1).map(i=>{var r;if(t&&t.orient==="negative"){let s=e.width;return e.group&&(s=(r=e.groupWidth)!==null&&r!==void 0?r:e.group.getBounds().width(),e.groupWidth=s),Object.assign(Object.assign({},i),{x:s,y:i.y,x1:s,y1:i.y1,defined:i.defined!==!1})}return Object.assign(Object.assign({},i),{x:0,y:i.y,x1:0,y1:i.y1,defined:i.defined!==!1})}),cNt=(n,t,e)=>({from:{points:ret(n,t,e)},to:{points:n.getGraphicAttribute("points",!1)}}),dNt=(n,t,e)=>({from:{points:n.getGraphicAttribute("points",!0)},to:{points:ret(n,t,e)}}),set=(n,t,e)=>n.getGraphicAttribute("points",!1).map(i=>{var r;if(t&&t.orient==="negative"){let s=e.height;return e.group&&(s=(r=e.groupHeight)!==null&&r!==void 0?r:e.group.getBounds().height(),e.groupHeight=s),Object.assign(Object.assign({},i),{x:i.x,y:s,x1:i.x1,y1:s,defined:i.defined!==!1})}return Object.assign(Object.assign({},i),{x:i.x,y:0,x1:i.x1,y1:0,defined:i.defined!==!1})}),pNt=(n,t,e)=>({from:{points:set(n,t,e)},to:{points:n.getGraphicAttribute("points",!1)}}),fNt=(n,t,e)=>({from:{points:n.getGraphicAttribute("points",!0)},to:{points:set(n,t,e)}}),gNt=(n,t,e)=>{var i,r;const{offset:s=0,orient:a,direction:o,point:l,excludeChannels:u=[]}=t??{};let h=0,c=0;a==="negative"&&(e.group?(h=(i=e.groupWidth)!==null&&i!==void 0?i:e.group.getBounds().width(),c=(r=e.groupHeight)!==null&&r!==void 0?r:e.group.getBounds().height(),e.groupWidth=h,e.groupHeight=c):(h=e.width,c=e.height)),h+=s,c+=s;const d=ft(l)?l.call(null,n.getDatum(),n,e):l,p=d&&st(d.x)?d.x:h,f=d&&st(d.y)?d.y:c,g=u.includes("x")?n.getGraphicAttribute("x"):n.getFinalAnimationAttribute("x"),_=u.includes("y")?n.getGraphicAttribute("y"):n.getFinalAnimationAttribute("y");switch(o){case"x":return{from:{x:p},to:{x:g}};case"y":return{from:{y:f},to:{y:_}};default:return{from:{x:p,y:f},to:{x:g,y:_}}}},mNt=(n,t,e)=>{var i,r;const{offset:s=0,orient:a,direction:o,point:l}=t??{},u=e.group?e.group.getBounds():null,h=(i=u==null?void 0:u.width())!==null&&i!==void 0?i:e.width,c=(r=u==null?void 0:u.height())!==null&&r!==void 0?r:e.height,d=(a==="negative"?h:0)+s,p=(a==="negative"?c:0)+s,f=ft(l)?l.call(null,n.getDatum(),n,e):l,g=f&&st(f.x)?f.x:d,_=f&&st(f.y)?f.y:p;switch(o){case"x":return{from:{x:n.getGraphicAttribute("x",!0)},to:{x:g}};case"y":return{from:{y:n.getGraphicAttribute("y",!0)},to:{y:_}};default:return{from:{x:n.getGraphicAttribute("x",!0),y:n.getGraphicAttribute("y",!0)},to:{x:g,y:_}}}},vNt=(n,t,e)=>{var i,r,s,a;const o=n.getFinalAnimationAttributes();switch(t==null?void 0:t.direction){case"x":return{from:{scaleX:0},to:{scaleX:(i=o==null?void 0:o.scaleX)!==null&&i!==void 0?i:1}};case"y":return{from:{scaleY:0},to:{scaleY:(r=o==null?void 0:o.scaleY)!==null&&r!==void 0?r:1}};default:return{from:{scaleX:0,scaleY:0},to:{scaleX:(s=o==null?void 0:o.scaleX)!==null&&s!==void 0?s:1,scaleY:(a=o==null?void 0:o.scaleY)!==null&&a!==void 0?a:1}}}},_Nt=(n,t,e)=>{var i,r,s,a;switch(t==null?void 0:t.direction){case"x":return{from:{scaleX:(i=n.getGraphicAttribute("scaleX",!0))!==null&&i!==void 0?i:1},to:{scaleX:0}};case"y":return{from:{scaleY:(r=n.getGraphicAttribute("scaleY",!0))!==null&&r!==void 0?r:1},to:{scaleY:0}};default:return{from:{scaleX:(s=n.getGraphicAttribute("scaleX",!0))!==null&&s!==void 0?s:1,scaleY:(a=n.getGraphicAttribute("scaleY",!0))!==null&&a!==void 0?a:1},to:{scaleX:0,scaleY:0}}}},yNt={symbol:["_mo_hide_","visible"]},bNt=(n,t,e)=>{const i=Object.assign({},n.getPrevGraphicAttributes()),r=Object.assign({},n.getNextGraphicAttributes());let s;t&&ot(t.excludeChannels).forEach(o=>{delete i[o],delete r[o]}),n.mark&&n.mark.markType&&(s=yNt[n.mark.markType])&&s.forEach(o=>{delete i[o],delete r[o]}),Object.keys(r).forEach(o=>{L2(o,i,r)&&(delete i[o],delete r[o])});const a=n.getFinalGraphicAttributes();return Object.keys(i).forEach(o=>{F(r[o])&&(F(a[o])||mi(i[o],a[o])?delete i[o]:r[o]=a[o])}),{from:i,to:r}},xNt=(n,t,e)=>{var i;const r=(i=n.getFinalAnimationAttribute("angle"))!==null&&i!==void 0?i:0;let s=0;return s=Ur(r/(2*Math.PI),0)?Math.round(r/(2*Math.PI))*Math.PI*2:st(t==null?void 0:t.angle)?t.angle:(t==null?void 0:t.orient)==="anticlockwise"?Math.ceil(r/(2*Math.PI))*Math.PI*2:Math.floor(r/(2*Math.PI))*Math.PI*2,{from:{angle:s},to:{angle:r}}},SNt=(n,t,e)=>{var i;const r=(i=n.getGraphicAttribute("angle",!0))!==null&&i!==void 0?i:0;let s=0;return s=Ur(r/(2*Math.PI),0)?Math.round(r/(2*Math.PI))*Math.PI*2:st(t==null?void 0:t.angle)?t.angle:(t==null?void 0:t.orient)==="anticlockwise"?Math.ceil(r/(2*Math.PI))*Math.PI*2:Math.floor(r/(2*Math.PI))*Math.PI*2,{from:{angle:r},to:{angle:s}}},ANt=()=>{Ct.registerAnimationType("clipIn",I8t)},wNt=()=>{Ct.registerAnimationType("clipOut",L8t)},CNt=()=>{Ct.registerAnimationType("fadeIn",D8t)},kNt=()=>{Ct.registerAnimationType("fadeOut",B8t)},TNt=()=>{Ct.registerAnimationType("growCenterIn",F8t)},MNt=()=>{Ct.registerAnimationType("growCenterOut",j8t)},PNt=()=>{Ct.registerAnimationType("growHeightIn",Y8t)},ENt=()=>{Ct.registerAnimationType("growHeightOut",q8t)},ONt=()=>{Ct.registerAnimationType("growWidthIn",H8t)},RNt=()=>{Ct.registerAnimationType("growWidthOut",$8t)},aet=()=>{Ct.registerAnimationType("growPointsIn",uNt)},oet=()=>{Ct.registerAnimationType("growPointsOut",hNt)},INt=()=>{Ct.registerAnimationType("growPointsXIn",cNt)},LNt=()=>{Ct.registerAnimationType("growPointsXOut",dNt)},DNt=()=>{Ct.registerAnimationType("growPointsYIn",pNt)},BNt=()=>{Ct.registerAnimationType("growPointsYOut",fNt)},FNt=()=>{Ct.registerAnimationType("growAngleIn",Q8t)},jNt=()=>{Ct.registerAnimationType("growAngleOut",iNt)},NNt=()=>{Ct.registerAnimationType("growRadiusIn",sNt)},zNt=()=>{Ct.registerAnimationType("growRadiusOut",lNt)},HNt=()=>{Ct.registerAnimationType("moveIn",gNt)},VNt=()=>{Ct.registerAnimationType("moveOut",mNt)},WNt=()=>{Ct.registerAnimationType("scaleIn",vNt)},$Nt=()=>{Ct.registerAnimationType("scaleOut",_Nt)},GNt=()=>{Ct.registerAnimationType("rotateIn",xNt)},UNt=()=>{Ct.registerAnimationType("rotateOut",SNt)},YNt=()=>{Ct.registerAnimationType("update",bNt)};class uet extends jm{encodeState(t,e,i){return super.encodeState(t,e,i),this._updateComponentEncoders(t),this}_updateComponentEncoders(t){this._encoders||(this._encoders={});const e=this.spec.encode[t];if(e&&t==="update"){const i=this.parameters(),r=bd(e)?null:Object.keys(e).reduce((s,a)=>(iT(e[a])&&(s[a]=wy(e[a].scale,i)),s),{});this._encoders[t]={callback:(s,a,o)=>{const l=qh(e,s,a,o);if(F(l.size)){const u=r.x?PW(r.x):void 0,h=r.y?PW(r.y):void 0;F(u)&&F(h)?l.size=10:F(u)?l.size=h:F(h)&&(l.size=u),l.size=[u,h]}return F(l.shape)&&(l.shape="rect"),l}}}else this._encoders[t]=e}_getEncoders(){var t;return(t=this._encoders)!==null&&t!==void 0?t:{}}getAttributeTransforms(){return[{channels:["size","padding"],transform:(t,e,i)=>{if(Mt(i.padding)&&i.padding>0)t.size=ut(i.size)?i.size.map(r=>Math.max(r-i.padding,1)):Math.max(i.size-i.padding,1);else if(ut(i.padding)&&i.padding.length===2){const r=ut(i.size)?i.size:[i.size,i.size];t.size=[Math.max(r[0]-i.padding[0],1),Math.max(r[1]-i.padding[1],1)]}else t.size=i.size},storedAttrs:"paddingAttrs"}].concat(E1.symbol)}release(){super.release(),this._encoders=null}}uet.markType=Rt.cell;const XNt=()=>{Ct.registerMark(Rt.cell,uet)},KNt=["pointerdown","pointerup","pointerupoutside","pointertap","pointerover","pointermove","pointerenter","pointerleave","pointerout","mousedown","mouseup","mouseupoutside","rightdown","rightup","rightupoutside","click","dblclick","mousemove","mouseover","mouseout","mouseenter","mouseleave","wheel","touchstart","touchend","touchendoutside","touchmove","touchcancel","tap","dragstart","drag","dragenter","dragleave","dragover","dragend","drop","pan","panstart","panend","press","pressup","pressend","pinch","pinchstart","pinchend","swipe"];var Wt;(function(n){n.initialized="initialized",n.rendered="rendered",n.renderFinished="renderFinished",n.animationFinished="animationFinished",n.regionSeriesDataFilterOver="regionSeriesDataFilterOver",n.afterInitData="afterInitData",n.afterInitEvent="afterInitEvent",n.afterInitMark="afterInitMark",n.rawDataUpdate="rawDataUpdate",n.viewDataFilterOver="viewDataFilterOver",n.viewDataUpdate="viewDataUpdate",n.viewDataStatisticsUpdate="viewDataStatisticsUpdate",n.markDeltaYUpdate="markDeltaYUpdate",n.viewDataLabelUpdate="viewDataLabelUpdate",n.scaleDomainUpdate="scaleDomainUpdate",n.scaleUpdate="scaleUpdate",n.dataZoomChange="dataZoomChange",n.drill="drill",n.layoutStart="layoutStart",n.layoutEnd="layoutEnd",n.layoutRectUpdate="layoutRectUpdate",n.playerPlay="playerPlay",n.playerPause="playerPause",n.playerEnd="playerEnd",n.playerChange="playerChange",n.playerForward="playerForward",n.playerBackward="playerBackward",n.scrollBarChange="scrollBarChange",n.brushStart="brushStart",n.brushChange="brushChange",n.brushEnd="brushEnd",n.brushClear="brushClear",n.legendSelectedDataChange="legendSelectedDataChange",n.legendFilter="legendFilter",n.legendItemClick="legendItemClick",n.legendItemHover="legendItemHover",n.legendItemUnHover="legendItemUnHover",n.tooltipShow="tooltipShow",n.tooltipHide="tooltipHide",n.tooltipRelease="tooltipRelease",n.afterResize="afterResize",n.afterRender="afterRender",n.afterLayout="afterLayout"})(Wt||(Wt={}));var Re;(function(n){n.chart="chart",n.window="window",n.canvas="canvas"})(Re||(Re={}));var ci;(function(n){n.vchart="vchart",n.chart="chart",n.model="model",n.mark="mark"})(ci||(ci={}));const dC=`${Kt}_waterfall_default_seriesField`,het=`${Kt}_CORRELATION_X`,cet=`${Kt}_CORRELATION_Y`,det=`${Kt}_CORRELATION_SIZE`,$r=`${Kt}_DEFAULT_DATA_INDEX`,Ka=`${Kt}_DEFAULT_DATA_KEY`,Ls=`${Kt}_DEFAULT_DATA_SERIES_FIELD`,UW=`${Kt}_DEFAULT_SERIES_STYLE_NAME`;var kt;(function(n){n[n.Default=0]="Default",n[n.Theme=1]="Theme",n[n.Chart=2]="Chart",n[n.Base_Series=3]="Base_Series",n[n.Series=4]="Series",n[n.Mark=5]="Mark",n[n.User_Chart=6]="User_Chart",n[n.User_Series=7]="User_Series",n[n.User_Mark=8]="User_Mark",n[n.Built_In=99]="Built_In"})(kt||(kt={}));const qNt=`${Kt}_STACK_KEY`,Hs=`${Kt}_STACK_START`,yn=`${Kt}_STACK_END`,dp=`${Kt}_STACK_START_PERCENT`,bc=`${Kt}_STACK_END_PERCENT`,lD=`${Kt}_STACK_START_OffsetSilhouette`,uD=`${Kt}_STACK_END_OffsetSilhouette`,pet=`${Kt}_STACK_TOTAL`,ZNt=`${Kt}_STACK_TOTAL_PERCENT`,ky=`${Kt}_STACK_TOTAL_TOP`,kS=`${Kt}_SEGMENT_START`,jE=`${Kt}_SEGMENT_END`;var ai;(function(n){n[n.Axis_Grid=50]="Axis_Grid",n[n.CrossHair_Grid=100]="CrossHair_Grid",n[n.Region=450]="Region",n[n.Mark=300]="Mark",n[n.Node=400]="Node",n[n.Axis=100]="Axis",n[n.MarkLine=500]="MarkLine",n[n.MarkArea=100]="MarkArea",n[n.MarkPoint=500]="MarkPoint",n[n.DataZoom=500]="DataZoom",n[n.ScrollBar=500]="ScrollBar",n[n.Player=500]="Player",n[n.Legend=500]="Legend",n[n.CrossHair=500]="CrossHair",n[n.Indicator=500]="Indicator",n[n.Title=500]="Title",n[n.Label=500]="Label",n[n.Brush=500]="Brush",n[n.CustomMark=500]="CustomMark",n[n.Interaction=700]="Interaction"})(ai||(ai={}));var Wo;(function(n){n[n.Indicator=10]="Indicator",n[n.Region=20]="Region",n[n.Axis=30]="Axis",n[n.DataZoom=40]="DataZoom",n[n.Player=40]="Player",n[n.ScrollBar=40]="ScrollBar",n[n.Legend=50]="Legend",n[n.Title=70]="Title",n[n.CustomMark=70]="CustomMark"})(Wo||(Wo={}));const YW=["linear","radial","conical"],JNt={x0:0,y0:0,x1:1,y1:1},QNt={x0:0,y0:0,x1:1,y1:1,r0:0,r1:1},tzt={x:.5,y:.5,startAngle:0,endAngle:2*Math.PI},ezt={linear:JNt,radial:QNt,conical:tzt},Ci={label:{name:"label",type:"text"}},XW=`${Kt}_rect_x`,KW=`${Kt}_rect_x1`,qW=`${Kt}_rect_y`,ZW=`${Kt}_rect_y1`,izt={data:!0},JW={animation:!0,animationAppear:!0,animationEnter:!0,animationUpdate:!0,animationExit:!0,animationNormal:!0},aT=Object.assign(Object.assign({},Ci),{bar:{name:"bar",type:"rect"},barBackground:{name:"barBackground",type:"rect"}}),NF=Object.assign(Object.assign({},Ci),{bar3d:{name:"bar3d",type:"rect3d"}}),yh={point:{name:"point",type:"symbol"},line:{name:"line",type:"line"}},fet=Object.assign(Object.assign({},Ci),yh),get=Object.assign(Object.assign({},Ci),{point:{name:"point",type:"symbol"}}),zF=Object.assign(Object.assign(Object.assign({},Ci),yh),{area:{name:"area",type:"area"}}),met=Object.assign(Object.assign(Object.assign({},Ci),yh),{area:{name:"area",type:"area"}}),vet=Object.assign(Object.assign({},Ci),{pie:{name:"pie",type:"arc"},labelLine:{name:"labelLine",type:"path"}}),_et=Object.assign(Object.assign({},Ci),{pie3d:{name:"pie3d",type:"arc3d"},labelLine:{name:"labelLine",type:"path"}}),yet=Object.assign(Object.assign({},Ci),{rose:{name:"rose",type:"arc"}}),bet=Object.assign(Object.assign({},Ci),{area:{name:"area",type:"path"}}),HF=Object.assign(Object.assign({},Ci),{group:{name:"group",type:"group"}}),xet=Object.assign(Object.assign({},HF),{track:{name:"track",type:"arc"},progress:{name:"progress",type:"arc"}}),Aet=Object.assign(Object.assign({},Ci),{group:{name:"group",type:"group"},link:{name:"link",type:"rule"},arrow:{name:"arrow",type:"symbol"}}),wet=Object.assign(Object.assign({},Ci),{group:{name:"group",type:"group"},grid:{name:"grid",type:"rule"},gridBackground:{name:"gridBackground",type:"rect"},dot:{name:"dot",type:"symbol"},title:{name:"title",type:"text"},subTitle:{name:"subTitle",type:"text"},symbol:{name:"symbol",type:"symbol"}}),hD=Object.assign(Object.assign({},Ci),{word:{name:"word",type:"text"},fillingWord:{name:"fillingWord",type:"text"}}),Cet=Object.assign(Object.assign({},Ci),{funnel:{name:"funnel",type:"polygon"},transform:{name:"transform",type:"polygon"},transformLabel:{name:"transformLabel",type:"text"},outerLabel:{name:"outerLabel",type:"text"},outerLabelLine:{name:"outerLabelLine",type:"rule"}}),ket=Object.assign(Object.assign({},Ci),{funnel3d:{name:"funnel3d",type:"pyramid3d"},transform3d:{name:"transform3d",type:"pyramid3d"},transformLabel:{name:"transformLabel",type:"text"},outerLabel:{name:"outerLabel",type:"text"},outerLabelLine:{name:"outerLabelLine",type:"rule"}}),Tet=Object.assign(Object.assign({},Ci),{track:{name:"track",type:"rect"},progress:{name:"progress",type:"rect"},group:{name:"group",type:"group"}}),Met=Object.assign(Object.assign({},aT),{leaderLine:{name:"leaderLine",type:"rule"},stackLabel:{name:"stackLabel",type:"text"}}),Pet=Object.assign(Object.assign({},Ci),{boxPlot:{name:"boxPlot",type:"boxPlot"},outlier:{name:"outlier",type:"symbol"}}),Eet=Object.assign(Object.assign({},Ci),{nonLeaf:{name:"nonLeaf",type:"rect"},leaf:{name:"leaf",type:"rect"},nonLeafLabel:{name:"nonLeafLabel",type:"text"}}),Oet=Object.assign(Object.assign({},Ci),{node:{name:"node",type:"rect"},link:{name:"link",type:"linkPath"}}),Ret=Object.assign(Object.assign({},HF),{segment:{name:"segment",type:"arc"},track:{name:"track",type:"arc"}}),Iet=Object.assign(Object.assign({},Ci),{pin:{name:"pin",type:"path"},pinBackground:{name:"pinBackground",type:"path"},pointer:{name:"pointer",type:["path","rect"]}}),Let=Object.assign(Object.assign({},Ci),{sunburst:{name:"sunburst",type:"arc"}}),Det=Object.assign(Object.assign({},aT),{minLabel:{name:"minLabel",type:"text"},maxLabel:{name:"maxLabel",type:"text"}}),Bet=Object.assign(Object.assign({},NF),{minLabel:{name:"minLabel",type:"text"},maxLabel:{name:"maxLabel",type:"text"}}),Fet=Object.assign(Object.assign({},Ci),{circlePacking:{name:"circlePacking",type:"arc"}}),jet=Object.assign(Object.assign({},Ci),{cell:{name:"cell",type:"cell"},cellBackground:{name:"cellBackground",type:"cell"}}),Net=Object.assign(Object.assign({},Ci),{nodePoint:{name:"nodePoint",type:"symbol"},ripplePoint:{name:"ripplePoint",type:"ripple"},centerPoint:{name:"centerPoint",type:"symbol"},centerLabel:{name:"centerLabel",type:"text"}}),zet=Object.assign({},zF),nzt=Object.assign(Object.assign({},Ci),{liquid:{name:"liquid",type:"liquid"},liquidBackground:{name:"liquidBackground",type:"group"},liquidOutline:{name:"liquidOutline",type:"symbol"}}),rzt=Object.assign(Object.assign({},Ci),{circle:{name:"circle",type:"arc"},overlap:{name:"overlap",type:"path"},overlapLabel:{name:"overlapLabel",type:"text"}});var QW;(function(n){n.area_horizontal="area_horizontal",n.area_vertical="area_vertical",n.area_stack="area_stack",n.line_horizontal="line_horizontal",n.line_vertical="line_vertical",n.line_stack="line_stack",n.bar_horizontal="bar_horizontal",n.bar_vertical="bar_vertical",n.bar_stack="bar_stack",n.bar3d_horizontal="bar3d_horizontal",n.bar3d_vertical="bar3d_vertical",n.bar3d_stack="bar3d_stack",n.rangeColumn_horizontal="rangeColumn_horizontal",n.rangeColumn_vertical="rangeColumn_vertical",n.rangeColumn3d_horizontal="rangeColumn3d_horizontal",n.rangeColumn3d_vertical="rangeColumn3d_vertical",n.rangeArea_horizontal="rangeArea_horizontal",n.rangeArea_vertical="rangeArea_vertical",n.linearProgress_horizontal="linearProgress_horizontal",n.linearProgress_vertical="linearProgress_vertical",n.linearProgress_stack="linearProgress_stack",n.boxPlot_horizontal="boxPlot_horizontal",n.boxPlot_vertical="boxPlot_vertical",n.sankey_horizontal="sankey_horizontal",n.sankey_vertical="sankey_vertical",n.waterfall_horizontal="waterfall_horizontal",n.waterfall_vertical="waterfall_vertical",n.circularProgress_stack="circularProgress_stack",n.radar_stack="radar_stack",n.rose_stack="rose_stack"})(QW||(QW={}));const pC={[at.bar]:aT,[at.bar3d]:NF,[at.line]:fet,[at.scatter]:get,[at.area]:zF,[at.radar]:met,[at.pie]:vet,[at.pie3d]:_et,[at.rose]:yet,[at.geo]:Ci,[at.map]:bet,[at.circularProgress]:xet,[at.link]:Aet,[at.dot]:wet,[at.wordCloud]:hD,[at.wordCloud3d]:hD,[at.funnel]:Cet,[at.funnel3d]:ket,[at.linearProgress]:Tet,[at.waterfall]:Met,[at.boxPlot]:Pet,[at.treemap]:Eet,[at.sankey]:Oet,[at.gauge]:Ret,[at.gaugePointer]:Iet,[at.sunburst]:Let,[at.rangeColumn]:Det,[at.rangeColumn3d]:Bet,[at.circlePacking]:Fet,[at.heatmap]:jet,[at.correlation]:Net,[at.rangeArea]:zet,[at.liquid]:nzt,[at.venn]:rzt};function Het(n){var t,e;const{type:i}=n;return i===at.sankey?(t=n.direction)!==null&&t!==void 0?t:"horizontal":(e=n.direction)!==null&&e!==void 0?e:"vertical"}const szt={primaryFontColor:"titleFontColor",tertiaryFontColor:"labelFontColor",axisLabelFontColor:"axisFontColor",axisMarkerFontColor:"labelReverseFontColor",dataZoomHandleStrokeColor:"dataZoomHandlerStrokeColor",sliderHandleColor:"dataZoomHandlerFillColor",sliderRailColor:"dataZoomBackgroundColor",sliderTrackColor:"dataZoomSelectedColor",playerControllerColor:"dataZoomSelectedColor",popupBackgroundColor:"tooltipBackgroundColor",hoverBackgroundColor:"axisGridColor"},azt={titleFontColor:"primaryFontColor",labelFontColor:"tertiaryFontColor",axisFontColor:"axisLabelFontColor",labelReverseFontColor:"axisMarkerFontColor",dataZoomHandlerStrokeColor:"dataZoomHandleStrokeColor",dataZoomHandlerFillColor:"sliderHandleColor",dataZoomBackgroundColor:"sliderRailColor",dataZoomSelectedColor:"sliderTrackColor",tooltipBackgroundColor:"popupBackgroundColor"};function ozt(n,t){const e=szt[t];if(e&&n[e])return n[e];if(n[t])return n[t];const i=azt[t];return i?n[i]:void 0}function Ty(n,t){var e;if(!n)return[];const i=Vet(n,t);if(!i||ut(i))return(e=i)!==null&&e!==void 0?e:[];if(ae(i)){const{dataScheme:r}=i;return r?VF(r)?r.map(s=>Object.assign(Object.assign({},s),{scheme:s.scheme.map(a=>fC(a)?dD(n,a,t):a).filter(z)})):r.map(s=>fC(s)?dD(n,s,t):s).filter(z):[]}return[]}function cD(n,t){var e,i;return VF(n)?(i=(e=n.find(r=>z(r.isAvailable)?ft(r.isAvailable)?r.isAvailable(t):!!r.isAvailable:!z(r.maxDomainLength)||(t==null?void 0:t.length)<=r.maxDomainLength))===null||e===void 0?void 0:e.scheme)!==null&&i!==void 0?i:n[n.length-1].scheme:n}function dD(n,t,e){var i;const r=Vet(n,e);if(!r)return;let s;const{palette:a}=r;if(ae(a)&&(s=(i=ozt(a,t.key))!==null&&i!==void 0?i:t.default),!s)return;if(F(t.a)&&F(t.l)||!It(s))return s;let o=new xn(s);if(z(t.l)){const{r:l,g:u,b:h}=o.color,{h:c,s:d}=l2(l,u,h),p=xA(c,d,t.l),f=new xn(`rgb(${p.r}, ${p.g}, ${p.b})`);f.setOpacity(o.color.opacity),o=f}return z(t.a)&&o.setOpacity(t.a),o.toRGBA()}const lzt=(n,t,e)=>{if(t&&fC(n)){const i=dD(t,n,e);if(i)return i}return n};function fC(n){return n&&n.type==="palette"&&!!n.key}function VF(n){return!(!ut(n)||n.length===0)&&n.every(t=>z(t.scheme))}function uzt(n){return ut(n)?{dataScheme:n}:n}function Vet(n,t){var e,i;const{type:r}=t??{};let s;if(!t||F(r))s=n==null?void 0:n.default;else{const a=Het(t);s=(i=(e=n==null?void 0:n[`${r}_${a}`])!==null&&e!==void 0?e:n==null?void 0:n[r])!==null&&i!==void 0?i:n==null?void 0:n.default}return s}class O1 extends np{range(t){return t?(this._range=t,this._resetRange(),this):super.range()}domain(t){return t?(super.domain(t),this._resetRange(),this):super.domain()}_resetRange(){if(!VF(this._range))return void super.range(this._range);const t=cD(this._range,this._domain);super.range(t)}}const hzt={linear:to,band:kp,point:q3t,ordinal:np,threshold:bF,colorOrdinal:O1};function pD(n){const t=hzt[n];return t?new t:null}function czt(n,t){if("scale"in n&&n.scale)return It(n.scale)&&(t!=null&&t.globalScale)?t.globalScale.registerMarkAttributeScale(n,t.seriesId):n.scale;const e=pD(n.type);return e&&dzt(e,n),e}function dzt(n,t){n&&t&&(t.domain&&n.domain(t.domain),t.range&&n.range(t.range),t.specified&&n.specified&&n.specified(t.specified))}function Ue(n,t){if(!t)return n;const e=t.range(),i=Math.min(e[0],e[e.length-1]),r=Math.max(e[0],e[e.length-1]);return Math.min(Math.max(i,n),r)}function t$(n){return z(n==null?void 0:n.field)&&z(n==null?void 0:n.scale)}function WF(n){switch(n){case"left":case"right":case"top":case"bottom":return!0;default:return!1}}function Ds(n){return!!It(n)&&!!n.endsWith("%")&&Zg(n.substring(0,n.length-1))}function pzt(n){return!!ae(n)&&("percent"in n||"offset"in n)}function Qn(n,t,e,i=0){var r,s;return Mt(n)?n:Ds(n)?Number(n.substring(0,n.length-1))*t/100:ft(n)?n(e):ae(n)?t*((r=n.percent)!==null&&r!==void 0?r:0)+((s=n.offset)!==null&&s!==void 0?s:0):i}function Wet(n,t,e){var i,r,s,a;const o={top:0,bottom:0,left:0,right:0};return Object.values(n).every(l=>Mt(l))?(o.top=(i=n.top)!==null&&i!==void 0?i:0,o.right=(r=n.right)!==null&&r!==void 0?r:0,o.bottom=(s=n.bottom)!==null&&s!==void 0?s:0,o.left=(a=n.left)!==null&&a!==void 0?a:0,o):([{orients:["left","right"],size:t.width},{orients:["top","bottom"],size:t.height}].forEach(l=>{l.orients.forEach(u=>{o[u]=Qn(n[u],l.size,e)})}),o)}function fzt(n,t){return n?{width:Math.ceil(Math.min(n.x2-n.x1,t.width)),height:Math.ceil(Math.min(n.y2-n.y1,t.height))}:{width:0,height:0}}function Ru(n){let t={};return ut(n)?(F(n[0])||(t.top=t.left=t.bottom=t.right=n[0]),F(n[1])||(t.left=t.right=n[1]),F(n[2])||(t.bottom=n[2]),F(n[3])||(t.left=n[3]),t):Mt(n)||Ds(n)||ft(n)||pzt(n)?(t.top=t.left=t.bottom=t.right=n,t):(ae(n)&&(t=Object.assign({},n)),t)}function e$(n,t,e){return e?{x:n.x+t.x,y:n.y+t.y}:n}const Jf=(n,t)=>{const e=Number(n),i=n.toString();return isNaN(e)&&i[i.length-1]==="%"?t*(Number(i.slice(0,i.length-1))/100):e},$et=[{maxDomainLength:10,scheme:["#1664FF","#1AC6FF","#FF8A00","#3CC780","#7442D4","#FFC400","#304D77","#B48DEB","#009488","#FF7DDA"]},{scheme:["#1664FF","#B2CFFF","#1AC6FF","#94EFFF","#FF8A00","#FFCE7A","#3CC780","#B9EDCD","#7442D4","#DDC5FA","#FFC400","#FAE878","#304D77","#8B959E","#B48DEB","#EFE3FF","#009488","#59BAA8","#FF7DDA","#FFCFEE"]}],gzt={default:{dataScheme:$et,palette:{backgroundColor:"#ffffff",borderColor:"#e3e5e8",shadowColor:"rgba(33,37,44,0.1)",hoverBackgroundColor:"#f1f2f5",sliderRailColor:"#f1f3f4",sliderHandleColor:"#ffffff",sliderTrackColor:"#0040ff",popupBackgroundColor:"#ffffff",primaryFontColor:"#21252c",secondaryFontColor:"#606773",tertiaryFontColor:"#89909d",axisLabelFontColor:"#89909d",disableFontColor:"#bcc1cb",axisMarkerFontColor:"#ffffff",axisGridColor:"#f1f2f5",axisDomainColor:"#d9dde4",dataZoomHandleStrokeColor:"#aeb5be",dataZoomChartColor:"#c9ced8",playerControllerColor:"#0040ff",scrollBarSliderColor:"rgba(0,0,0,0.3)",axisMarkerBackgroundColor:"#21252c",markLabelBackgroundColor:"#f1f2f5",markLineStrokeColor:"#606773",dangerColor:"#e33232",warningColor:"#ffc528",successColor:"#07a35a",infoColor:"#3073f2",discreteLegendPagerTextColor:"rgb(51, 51, 51)",discreteLegendPagerHandlerColor:"rgb(47, 69, 84)",discreteLegendPagerHandlerDisableColor:"rgb(170, 170, 170)"}}},mzt={label:{visible:!1,offset:5,position:"top",style:{stroke:{type:"palette",key:"backgroundColor"},lineWidth:2}},point:{style:{symbolType:"circle"}},seriesMark:"area"},vzt={label:{visible:!1,position:"outside",offset:5,style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}}},_zt={bar3d:{style:{length:3}},label:{visible:!1,style:{offset:12,position:"outside"}}},yzt={outerRadius:.8,innerRadius:.6,progress:{style:{fillOpacity:1}},track:{style:{fillOpacity:.2}},tickMask:{visible:!1,angle:3,offsetAngle:0,forceAlign:!0}},bzt={dot:{style:{size:10,fillOpacity:1}},symbol:{style:{size:10}},title:{style:{textAlign:"left",textBaseline:"middle",fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}},subTitle:{style:{textAlign:"left",textBaseline:"top",fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}}},xzt={transform:{style:{fill:{type:"palette",key:"axisGridColor"}}},label:{style:{fill:"white",textBaseline:"middle",lineWidth:2}},outerLabel:{style:{fontSize:{type:"token",key:"l4FontSize"},fill:{type:"palette",key:"secondaryFontColor"}},line:{style:{stroke:{type:"palette",key:"axisDomainColor"}}}},transformLabel:{style:{fontSize:{type:"token",key:"l4FontSize"},fill:{type:"palette",key:"secondaryFontColor"},textBaseline:"middle"}}},Szt={transform3d:{style:{fill:"#f5f5f5"}},label:{style:{fill:"white",textBaseline:"middle",lineWidth:2}},outerLabel:{style:{fontSize:{type:"token",key:"l4FontSize"},fill:"#707070"},line:{style:{stroke:{type:"palette",key:"axisDomainColor"}}}},transformLabel:{style:{fontSize:{type:"token",key:"l4FontSize"},fill:"#707070",textBaseline:"middle"}}},Azt={outerRadius:.8,innerRadius:.6,padAngle:1.146,segment:{style:{fillOpacity:1}},tickMask:{visible:!1,angle:3,offsetAngle:0,forceAlign:!0}},wzt="M-0.020059 -0.978425 C-0.018029 -0.9888053 -0.013378 -1 0 -1 C0.01342 -1 0.01812 -0.989146 0.0201 -0.978425 C0.02161 -0.9702819 0.0692 -0.459505 0.09486 -0.184807 C0.10298 -0.097849 0.1089 -0.034548 0.11047 -0.018339 C0.11698 0.04908 0.07373 0.11111 0.00002 0.11111 C-0.07369 0.11111 -0.117184 0.04991 -0.110423 -0.018339 C-0.103662 -0.086591 -0.022089 -0.9680447 -0.020059 -0.978425Z",i$="M1 0 C1 0.55228 0.55228 1 0 1 C-0.552285 1 -1 0.55228 -1 0 C-1 -0.552285 -0.552285 -1 0 -1 C0.55228 -1 1 -0.552285 1 0Z",Czt={pointer:{type:"path",width:.4,height:.4,style:{path:wzt}},pin:{width:.025,height:.025,style:{path:i$,fill:"#888"}},pinBackground:{width:.06,height:.06,style:{path:i$,fill:"#ddd"}}},kzt={label:{visible:!1,position:"top",offset:5,style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}},point:{style:{symbolType:"circle"}}},Tzt={bandWidth:30,progress:{style:{fillOpacity:1}},track:{style:{fill:"#E7EBED",fillOpacity:1}}},Mzt={arrow:{style:{size:10}}},Pzt={defaultFillColor:"#f3f3f3",area:{style:{lineWidth:.5,strokeOpacity:1,stroke:"black",fillOpacity:1}},label:{interactive:!1,style:{fontSize:{type:"token",key:"l6FontSize"},lineHeight:{type:"token",key:"l6LineHeight"},textBaseline:"middle",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"},stroke:{type:"palette",key:"backgroundColor"}}}},Ezt={outerRadius:.6,pie:{style:{fillOpacity:1}},label:{visible:!1,position:"outside",style:{fontWeight:"normal",stroke:{type:"palette",key:"backgroundColor"},fillOpacity:1}},innerLabel:{style:{lineWidth:2}}},Ozt={outerRadius:.6,pie3d:{style:{height:10,fillOpacity:1}},label:{visible:!1,position:"outside"}},Rzt={label:{visible:!1,offset:5,style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}},point:{style:{symbolType:"circle"}}},Izt={point:{style:{size:8,symbolType:"circle",lineWidth:0,fillOpacity:.8}},label:{visible:!1,offset:5,position:"top",style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}}},Lzt={seriesFieldName:{total:"total",increase:"increase",decrease:"decrease"},leaderLine:{style:{stroke:"black",lineWidth:1,lineDash:[4,4]}},stackLabel:{visible:!0,offset:12,position:"withChange",style:{fill:"black",fontSize:{type:"token",key:"l4FontSize"}}},label:{visible:!1,offset:12,position:"inside",style:{lineWidth:2}}},Dzt={word:{padding:1,style:{textAlign:"center",textBaseline:"alphabetic"}}},Bzt={word:{padding:1,style:{textAlign:"center",textBaseline:"alphabetic"}}},Fzt={gapWidth:1,nodePadding:[5],nonLeaf:{visible:!1,style:{fillOpacity:.5}},label:{style:{fill:"white",textBaseline:"middle",textAlign:"center",fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}},nonLeafLabel:{padding:24,style:{fill:"black",stroke:{type:"palette",key:"backgroundColor"},lineWidth:2,fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},textBaseline:"middle",textAlign:"center"}}},jzt={innerRadius:0,outerRadius:1,startAngle:TF,endAngle:Ttt,gap:0,labelLayout:{align:"center",offset:0,rotate:"radial"},sunburst:{style:{stroke:{type:"palette",key:"backgroundColor"},fillOpacity:1,cursor:"pointer"}},label:{visible:!0,style:{cursor:"pointer",fill:{type:"palette",key:"primaryFontColor"},fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}}},Nzt={label:{visible:!1,offset:5,position:"inside",style:{lineWidth:2,fill:{type:"palette",key:"axisMarkerFontColor"}},minLabel:{position:"end"},maxLabel:{position:"start"}}},zzt={layoutPadding:5,circlePacking:{visible:!0,style:{cursor:"pointer",stroke:{type:"palette",key:"backgroundColor"}}},label:{visible:!0,style:{cursor:"pointer",fill:"black",stroke:{type:"palette",key:"backgroundColor"},lineWidth:2,fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}}},Hzt={cell:{style:{shape:"square",fillOpacity:1}},cellBackground:{visible:!1}},Vzt={link:{style:{fillOpacity:.15,round:!0}}},Wzt={rose:{style:{fillOpacity:1}},label:{style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"},textAlign:"center",textBaseline:"middle"}}},$zt={boxPlot:{style:{lineWidth:1}},label:{style:{lineWidth:2}}},Gzt={centerLabel:{visible:!0,position:"center",style:{fill:"#fff",text:""}},label:{visible:!0,position:"bottom",style:{fill:"#000"}}},Uzt={outlinePadding:10,liquidBackground:{style:{lineWidth:0,fillOpacity:.2}},liquidOutline:{style:{lineWidth:2}}},Yzt={circle:{style:{opacity:.8},state:{hover:{opacity:1}}},overlap:{style:{opacity:.8},state:{hover:{opacity:1,stroke:"white",lineWidth:2}}},label:{visible:!0,style:{fill:"white",textBaseline:"middle",textAlign:"center",fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"}}},overlapLabel:{visible:!0,style:{textBaseline:"middle",textAlign:"center",fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}}},Xzt={scatter:Izt,line:kzt,area:mzt,bar:vzt,bar3d:_zt,pie:Ezt,pie3d:Ozt,map:Pzt,radar:Rzt,dot:bzt,link:Mzt,wordCloud:Dzt,wordCloud3d:Bzt,funnel:xzt,funnel3d:Szt,linearProgress:Tzt,circularProgress:yzt,waterfall:Lzt,gauge:Azt,gaugePointer:Czt,treemap:Fzt,sunburst:jzt,rangeColumn:Nzt,circlePacking:zzt,heatmap:Hzt,sankey:Vzt,rose:Wzt,boxPlot:$zt,correlation:Gzt,liquid:Uzt,venn:Yzt},Kzt={text:{style:{fontSize:{type:"token",key:"l4FontSize"},fontWeight:"normal",fillOpacity:1}}},qzt={label:{style:{fontSize:{type:"token",key:"l4FontSize"},fontWeight:"normal",fillOpacity:1,lineJoin:"bevel"}},area:{style:{fillOpacity:.2}},line:{style:{lineWidth:2,lineCap:"round",lineJoin:"round"}},point:{style:{size:8,stroke:{type:"palette",key:"backgroundColor"},lineWidth:1,fillOpacity:1}},word:{style:{fontSize:null}},fillingWord:{style:{fontSize:null}},sunburst:{style:{lineWidth:1,stroke:{type:"palette",key:"backgroundColor"}}},circlePacking:{style:{lineWidth:1,stroke:{type:"palette",key:"backgroundColor"}}},funnel3d:{style:{stroke:!1}},barBackground:{visible:!1,style:{fill:{type:"palette",key:"primaryFontColor",a:.06},stroke:"transparent"}}},Zzt={domainLine:{visible:!0},grid:{visible:!1},subGrid:{visible:!1},tick:{visible:!0},subTick:{visible:!1}},Get={label:{space:8},title:{space:8},maxHeight:"30%",unit:{visible:!1,style:{fontSize:{type:"token",key:"l5FontSize"},fill:{type:"palette",key:"axisLabelFontColor"},fontWeight:"normal",fillOpacity:1}}},Jzt={label:{space:12,autoLimit:!0},title:{space:12,autoRotate:!0},maxWidth:"30%",unit:{visible:!1,style:{fontSize:{type:"token",key:"l5FontSize"},fill:{type:"palette",key:"axisLabelFontColor"},fontWeight:"normal",fillOpacity:1}}},Qzt=Object.assign(Object.assign({},Get),{label:{space:0}}),t7t={domainLine:{visible:!0,style:{lineWidth:1,stroke:{type:"palette",key:"axisDomainColor"},strokeOpacity:1}},grid:{visible:!0,style:{lineWidth:1,stroke:{type:"palette",key:"axisGridColor"},strokeOpacity:1,lineDash:[]}},subGrid:{visible:!1,style:{lineWidth:1,stroke:{type:"palette",key:"axisGridColor"},strokeOpacity:1,lineDash:[4,4]}},tick:{visible:!0,inside:!1,tickSize:4,alignWithLabel:!0,style:{lineWidth:1,stroke:{type:"palette",key:"axisDomainColor"},strokeOpacity:1}},subTick:{visible:!1,tickSize:2,style:{lineWidth:1,stroke:{type:"palette",key:"axisDomainColor"},strokeOpacity:1}},label:{visible:!0,inside:!1,space:10,style:{fontSize:{type:"token",key:"l5FontSize"},fill:{type:"palette",key:"axisLabelFontColor"},fontWeight:"normal",fillOpacity:1}},title:{space:10,padding:0,style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fill:{type:"palette",key:"secondaryFontColor"},fontWeight:"normal",fillOpacity:1}}},e7t={domainLine:{visible:!1},grid:{visible:!0},subGrid:{visible:!1},tick:{visible:!1},subTick:{visible:!1}},i7t={grid:{smooth:!0,visible:!0},subGrid:{smooth:!0,visible:!1}},n7t={grid:{visible:!0,style:{lineDash:[6,6]}},label:{space:5}},r7t={style:{fill:"#B0C8F9",fillOpacity:.2,stroke:"#B0C8F9",lineWidth:2},brushMode:"single",brushType:"rect",brushMoved:!0,removeOnClick:!0,delayType:"throttle",delayTime:0},s7t={trigger:"hover",bandField:{visible:!1,line:{type:"rect",visible:!0,style:{fill:{type:"palette",key:"axisGridColor"},opacity:.7,lineWidth:0,stroke:{type:"palette",key:"markLineStrokeColor"},lineDash:[2,3]}},label:{visible:!1,style:{fontWeight:"normal",fill:{type:"palette",key:"axisMarkerFontColor"},fontSize:{type:"token",key:"l5FontSize"}},labelBackground:{padding:{bottom:0,top:0,left:2,right:2},style:{fill:{type:"palette",key:"axisMarkerBackgroundColor"},cornerRadius:1}}}},linearField:{visible:!1,line:{type:"line",visible:!0,style:{stroke:{type:"palette",key:"markLineStrokeColor"},fill:"transparent",opacity:.7,lineDash:[2,3]}},label:{visible:!1,style:{fontWeight:"normal",fill:{type:"palette",key:"axisMarkerFontColor"},fontSize:{type:"token",key:"l5FontSize"}},labelBackground:{padding:{bottom:0,top:0,left:2,right:2},style:{fill:{type:"palette",key:"axisMarkerBackgroundColor"},cornerRadius:1}}}}},n$=`M-0.5-2.4h0.9c0.4,0,0.7,0.3,0.7,0.7v3.3c0,0.4-0.3,0.7-0.7,0.7h-0.9c-0.4,0-0.7-0.3-0.7-0.7v-3.3
C-1.2-2-0.9-2.4-0.5-2.4z M-0.4-1.4L-0.4-1.4c0,0,0,0.1,0,0.1v2.6c0,0.1,0,0.1,0,0.1l0,0c0,0,0-0.1,0-0.1v-2.6
C-0.4-1.4-0.4-1.4-0.4-1.4z M0.3-1.4L0.3-1.4c0,0,0,0.1,0,0.1v2.6c0,0.1,0,0.1,0,0.1l0,0c0,0,0-0.1,0-0.1v-2.6
C0.3-1.4,0.3-1.4,0.3-1.4z;`,a7t={padding:[12,0],showDetail:"auto",brushSelect:!1,middleHandler:{visible:!1,background:{size:6,style:{stroke:{type:"palette",key:"dataZoomHandleStrokeColor"},cornerRadius:2}},icon:{style:{size:4,fill:{type:"palette",key:"sliderHandleColor"},stroke:{type:"palette",key:"dataZoomHandleStrokeColor"},symbolType:"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z",lineWidth:.5}}},background:{size:20,style:{fill:{type:"palette",key:"sliderRailColor"},lineWidth:0}},selectedBackground:{style:{fill:{type:"palette",key:"sliderTrackColor"},fillOpacity:.1,outerBorder:{stroke:{type:"palette",key:"sliderTrackColor"},strokeOpacity:.2,distance:-.5,lineWidth:1}}},selectedBackgroundChart:{area:{style:{visible:!1,stroke:!1,fill:{type:"palette",key:"dataZoomChartColor"}}},line:{style:{visible:!1,stroke:{type:"palette",key:"dataZoomChartColor"},lineWidth:1}}},startHandler:{style:{symbolType:n$,fill:{type:"palette",key:"sliderHandleColor"},scaleX:1.2,scaleY:1.2,stroke:{type:"palette",key:"dataZoomHandleStrokeColor"},lineWidth:1}},endHandler:{style:{symbolType:n$,fill:{type:"palette",key:"sliderHandleColor"},scaleX:1.2,scaleY:1.2,stroke:{type:"palette",key:"dataZoomHandleStrokeColor"},lineWidth:1}},startText:{padding:8,style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}}},endText:{padding:8,style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}}},backgroundChart:{area:{style:{stroke:!1,fill:{type:"palette",key:"dataZoomChartColor"}}},line:{style:{stroke:{type:"palette",key:"dataZoomChartColor"},lineWidth:1}}}},o7t={title:{visible:!0,autoLimit:!1,autoFit:!1,style:{fontSize:{type:"token",key:"l1FontSize"},fill:{type:"palette",key:"primaryFontColor"},fontWeight:"normal",fillOpacity:1,textBaseline:"top",textAlign:"center"}},content:{visible:!0,style:{fontSize:{type:"token",key:"l2FontSize"},fill:{type:"palette",key:"tertiaryFontColor"},fontWeight:"normal",fillOpacity:1,textBaseline:"top",textAlign:"center"}}},gC={orient:"right",position:"middle",padding:[16,24],title:{visible:!1,padding:0,textStyle:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fontWeight:"normal",fill:{type:"palette",key:"primaryFontColor"}},space:12},handler:{visible:!0},startText:{style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fontWeight:"normal",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}},space:6},endText:{style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fontWeight:"normal",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}},space:6},handlerText:{style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fontWeight:"normal",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}},space:6}},r$={style:{symbolType:"circle",lineWidth:0,outerBorder:{lineWidth:2,distance:.8,stroke:"#ffffff"},shadowBlur:12,shadowOffsetX:0,shadowOffsetY:4,shadowColor:{type:"palette",key:"shadowColor"}}},l7t={horizontal:Object.assign(Object.assign({},gC),{rail:{width:200,height:8,style:{fill:{type:"palette",key:"sliderRailColor"}}},handler:r$}),vertical:Object.assign(Object.assign({},gC),{rail:{width:8,height:200,style:{fill:{type:"palette",key:"sliderRailColor"}}},handler:r$})},u7t={orient:"bottom",position:"middle",padding:[16,24],title:{visible:!1,padding:0,textStyle:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fill:{type:"palette",key:"primaryFontColor"},fontWeight:"normal"},space:12},pager:{textStyle:{fill:{type:"palette",key:"discreteLegendPagerTextColor"}},handler:{style:{fill:{type:"palette",key:"discreteLegendPagerHandlerColor"}},state:{disable:{fill:{type:"palette",key:"discreteLegendPagerHandlerDisableColor"}}}}},item:{visible:!0,spaceCol:10,spaceRow:6,padding:2,background:{state:{selectedHover:{fill:{type:"palette",key:"hoverBackgroundColor"}},unSelectedHover:{fill:{type:"palette",key:"hoverBackgroundColor"}}}},shape:{space:6,style:{lineWidth:0,fillOpacity:1,opacity:1},state:{unSelected:{fillOpacity:.2,opacity:1}}},label:{space:6,style:{fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"},fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},opacity:1},state:{unSelected:{fill:{type:"palette",key:"disableFontColor"},opacity:1}}}},allowAllCanceled:!1},s$={style:{symbolType:"circle",lineWidth:0,outerBorder:{lineWidth:2,distance:.8,stroke:{type:"palette",key:"sliderTrackColor"}},fill:{type:"palette",key:"sliderHandleColor"}}},h7t={horizontal:Object.assign(Object.assign({},gC),{sizeBackground:{fill:{type:"palette",key:"dataZoomChartColor"}},track:{style:{fill:{type:"palette",key:"sliderTrackColor",a:.8}}},rail:{width:200,height:4,style:{fill:{type:"palette",key:"sliderRailColor"}}},handler:s$}),vertical:Object.assign(Object.assign({},gC),{sizeBackground:{fill:{type:"palette",key:"dataZoomChartColor"}},track:{style:{fill:{type:"palette",key:"sliderTrackColor",a:.8}}},rail:{width:4,height:200,style:{fill:{type:"palette",key:"sliderRailColor"}}},handler:s$})},c7t={visible:!0,offset:12,position:"top",space:10,nameLabel:{visible:!0,style:{textBaseline:"middle",textAlign:"left",fill:"black",fontSize:{type:"token",key:"l6FontSize"}}},valueLabel:{visible:!0,style:{textBaseline:"middle",textAlign:"left",fill:"black",fontSize:{type:"token",key:"l6FontSize"}}},background:{visible:!0,padding:{top:4,bottom:4,left:6,right:6},style:{cornerRadius:2,lineWidth:1,fill:"white",stroke:"grey"}},leader:{visible:!1,style:{lineWidth:1,stroke:"red"}}},a$={area:{style:{fill:{type:"palette",key:"axisDomainColor",a:.25}}},label:{style:{fontSize:{type:"token",key:"l4FontSize"},fontWeight:"normal",fontStyle:"normal",fill:{type:"palette",key:"primaryFontColor"}},labelBackground:{padding:{top:2,bottom:2,right:4,left:4},style:{cornerRadius:3,fill:{type:"palette",key:"markLabelBackgroundColor"}}}}},o$={line:{style:{lineDash:[3,3],stroke:{type:"palette",key:"markLineStrokeColor"}}},startSymbol:{visible:!1,symbolType:"triangle",size:10,style:{fill:{type:"palette",key:"markLineStrokeColor"},stroke:null,lineWidth:0}},endSymbol:{visible:!0,symbolType:"triangle",size:10,style:{fill:{type:"palette",key:"markLineStrokeColor"},stroke:null,lineWidth:0}},label:{refY:5,style:{fontSize:{type:"token",key:"l4FontSize"},fontWeight:"normal",fontStyle:"normal",fill:{type:"palette",key:"primaryFontColor"}},labelBackground:{padding:{top:2,bottom:2,right:4,left:4},style:{cornerRadius:3,fill:{type:"palette",key:"markLabelBackgroundColor"}}}}},NE={itemLine:{decorativeLine:{visible:!1},startSymbol:{size:5,visible:!0,style:{fill:{type:"palette",key:"markLineStrokeColor"},stroke:null,lineWidth:0}},endSymbol:{style:{fill:{type:"palette",key:"markLineStrokeColor"},stroke:null,lineWidth:0}},line:{style:{stroke:{type:"palette",key:"markLineStrokeColor"}}}},itemContent:{offsetY:-50}},d7t={visible:!0,position:"start",padding:{top:20,bottom:20},slider:{space:10,trackStyle:{fill:{type:"palette",key:"sliderTrackColor"},fillOpacity:.8},railStyle:{fill:{type:"palette",key:"sliderRailColor"}},handlerStyle:{size:15,stroke:{type:"palette",key:"backgroundColor"},lineWidth:2,fill:{type:"palette",key:"playerControllerColor"}}},controller:{start:{order:0,space:0,style:{size:25,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}},pause:{order:0,space:0,style:{size:25,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}},backward:{order:0,space:10,position:"start",style:{size:12,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}},forward:{order:0,space:10,position:"end",style:{size:12,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}}}},p7t={padding:{top:4,bottom:20},textStyle:{fontSize:{type:"token",key:"l3FontSize"},lineHeight:{type:"token",key:"l3LineHeight"},fill:{type:"palette",key:"primaryFontColor"}},subtextStyle:{fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"},fill:{type:"palette",key:"tertiaryFontColor"}}},f7t={offset:{x:10,y:10},panel:{padding:{top:10,left:10,right:10,bottom:10},backgroundColor:{type:"palette",key:"popupBackgroundColor"},border:{color:{type:"palette",key:"popupBackgroundColor"},width:0,radius:3},shadow:{x:0,y:4,blur:12,spread:0,color:{type:"palette",key:"shadowColor"}}},spaceRow:6,titleLabel:{fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"},fontColor:{type:"palette",key:"primaryFontColor"},fontWeight:"bold",textBaseline:"middle",spacing:0},shape:{size:8,spacing:6},keyLabel:{fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"},fontColor:{type:"palette",key:"secondaryFontColor"},textBaseline:"middle",spacing:26},valueLabel:{fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"},fontColor:{type:"palette",key:"primaryFontColor"},fontWeight:"bold",textBaseline:"middle",spacing:0}},g7t={visible:!0,position:"auto",padding:8,titleStyle:{fontSize:{type:"token",key:"l5FontSize"},fontWeight:"bold",fill:{type:"palette",key:"primaryFontColor"}},contentStyle:{fontSize:{type:"token",key:"l5FontSize"},fill:{type:"palette",key:"primaryFontColor"}},panel:{visible:!0,fill:{type:"palette",key:"popupBackgroundColor"},cornerRadius:3,lineWidth:0,shadowBlur:12,shadowOffsetX:0,shadowOffsetY:4,shadowColor:{type:"palette",key:"shadowColor"},size:0,space:12}},m7t={visible:!1,offset:5,overlap:{clampForce:!0,strategy:[]},smartInvert:!1,animation:!1,style:{fontSize:{type:"token",key:"l4FontSize"},fill:{type:"palette",key:"primaryFontColor"}}},v7t={horizontal:{height:10,slider:{style:{fill:{type:"palette",key:"scrollBarSliderColor"}}}},vertical:{width:10,slider:{style:{fill:{type:"palette",key:"scrollBarSliderColor"}}}}},_7t={discreteLegend:u7t,colorLegend:l7t,sizeLegend:h7t,axis:t7t,axisBand:Zzt,axisLinear:e7t,axisX:Get,axisY:Jzt,axisZ:Qzt,axisAngle:n7t,axisRadius:i7t,markLine:o$,markArea:a$,markPoint:NE,polarMarkLine:o$,polarMarkArea:a$,polarMarkPoint:NE,geoMarkPoint:NE,tooltip:f7t,dataZoom:a7t,crosshair:s7t,player:d7t,brush:r7t,indicator:o7t,title:p7t,mapLabel:c7t,poptip:g7t,totalLabel:m7t,scrollBar:v7t};function y7t(n,t){return n&&t.key in n?n[t.key]:t.default}function b7t(n){return n&&n.type==="token"&&!!n.key}const mC={fontFamily:"PingFang SC,Helvetica Neue,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol",fontSize:14,l1FontSize:32,l1LineHeight:"150%",l2FontSize:20,l2LineHeight:"140%",l3FontSize:16,l3LineHeight:"150%",l4FontSize:14,l4LineHeight:"150%",l5FontSize:12,l5LineHeight:"130%",l6FontSize:10,l6LineHeight:"120%"},fD={name:"light",background:{type:"palette",key:"backgroundColor"},padding:20,fontFamily:{type:"token",key:"fontFamily"},colorScheme:gzt,token:mC,mark:Kzt,markByName:qzt,series:Xzt,component:_7t,animationThreshold:2e3},x7t={default:{dataScheme:$et,palette:{backgroundColor:"#202226",borderColor:"#404349",shadowColor:"rgba(0,0,0,0.1)",hoverBackgroundColor:"#404349",sliderRailColor:"#404349",sliderHandleColor:"#202226",sliderTrackColor:"#4284FF",popupBackgroundColor:"#404349",primaryFontColor:"#fdfdfd",secondaryFontColor:"#bbbdc3",tertiaryFontColor:"#888c93",axisLabelFontColor:"#888c93",disableFontColor:"#55595f",axisMarkerFontColor:"#202226",axisGridColor:"#404349",axisDomainColor:"#4b4f54",dataZoomHandleStrokeColor:"#bbbdc3",dataZoomChartColor:"#55595F",playerControllerColor:"#4284FF",scrollBarSliderColor:"rgba(255,255,255,0.3)",axisMarkerBackgroundColor:"#fdfdfd",markLabelBackgroundColor:"#404349",markLineStrokeColor:"#bbbdc3",dangerColor:"#eb4b4b",warningColor:"#f0bd30",successColor:"#14b267",infoColor:"#4284ff",discreteLegendPagerTextColor:"#BBBDC3",discreteLegendPagerHandlerColor:"#BBBDC3",discreteLegendPagerHandlerDisableColor:"#55595F"}}},l$={name:"dark",colorScheme:x7t,component:{dataZoom:{selectedBackground:{style:{fillOpacity:.4,outerBorder:{strokeOpacity:.4}}}}}},TS=(n,t,e)=>{if(F(t))return n;const i=t[0];return F(i)?n:t.length===1?(n[i]=e,n):(F(n[i])&&(typeof t[1]=="number"?n[i]=[]:n[i]={}),TS(n[i],t.slice(1),e))},S7t=(n,t,e)=>{if(!F(t))return le(n,t,e)};function Uet(n,t,e=!1){if(t){if(n===t)return;if(z(t)&&typeof t=="object"){const i=Object(t),r=[];for(const o in i)r.push(o);let{length:s}=r,a=-1;for(;s--;){const o=r[++a];z(i[o])&&typeof i[o]=="object"&&!ut(n[o])?A7t(n,t,o,e):Yet(n,o,i[o])}}}}function A7t(n,t,e,i=!1){const r=n[e],s=t[e];let a=t[e],o=!0;if(ut(s)){if(i)a=[];else if(ut(r))a=r;else if(a2(r)){a=new Array(r.length);let l=-1;const u=r.length;for(;++l<u;)a[l]=r[l]}}else No(s)?(a=r??{},typeof r!="function"&&typeof r=="object"||(a={})):o=!1;o&&Uet(a,s,i),Yet(n,e,a)}function Yet(n,t,e){(e!==void 0&&!w7t(n[t],e)||e===void 0&&!(t in n))&&(n[t]=e)}function w7t(n,t){return n===t||Number.isNaN(n)&&Number.isNaN(t)}function Ut(n,...t){let e=-1;const i=t.length;for(;++e<i;)Uet(n,t[e],!0);return n}function u$(n,t,e,i){Object.keys(n).forEach(r=>{if(ae(t))t.type===r&&(ut(n[r])?n[r].length>=t.index&&(n[r][t.index]=i?Ut({},n[r][t.index],e):e):n[r]=i?Ut({},n[r],e):e);else if(ut(n[r])){const s=n[r].findIndex(a=>a.id===t);s>=0&&(n[r][s]=i?Ut({},n[r][s],e):e)}else n.id===t&&(n[r]=i?Ut({},n[r],e):e)})}function gD(n,...t){return Ut(h$(n),...t.map(h$))}function h$(n){var t;if(!n)return n;const e=C7t(n.colorScheme),{series:i}=n,{mark:r,markByName:s}=n;let a;return(r||s)&&(a=Object.keys(pC).reduce((o,l)=>{var u;const h=(u=i==null?void 0:i[l])!==null&&u!==void 0?u:{};return o[l]=Xet(h,l,r,s),o},{})),Object.assign({},n,{colorScheme:e,token:(t=n.token)!==null&&t!==void 0?t:{},series:Object.assign({},n.series,a)})}function C7t(n){return n&&(n=Object.keys(n).reduce((t,e)=>{const i=n[e];return t[e]=uzt(i),t},{})),n}function Xet(n,t,e,i){if(!pC[t])return n;const r={};return Object.values(pC[t]).forEach(({type:s,name:a})=>{r[a]=Ut({},e==null?void 0:e[ot(s)[0]],i==null?void 0:i[a],n==null?void 0:n[a])}),Object.assign(Object.assign({},n),r)}const k7t=["animationThreshold","colorScheme","name","padding"];function oT(n,t,e,i){if(!n)return n;t||(t=n.colorScheme),e||(e=n.token);const r={};return Object.keys(n).forEach(s=>{const a=n[s];k7t.includes(s)?r[s]=a:No(a)?fC(a)?r[s]=lzt(a,t,i):b7t(a)?r[s]=y7t(e,a):r[s]=oT(a,t,e,i):r[s]=a}),r}const My={[fD.name]:fD},R1=fD.name,em=new Map(Object.keys(My).map(n=>[n,My[n]])),$F=new Map(Object.keys(My).map(n=>[n,oT(My[n])])),vC=new Map(Object.keys(My).map(n=>[n,n===R1])),GF=(n,t)=>{if(!n)return;const e=P7t(t);em.set(n,e),$F.set(n,oT(e)),vC.set(n,!0)},Ket=(n=R1,t=!1)=>(vC.has(n)&&!vC.get(n)&&GF(n,em.get(n)),t?$F.get(n):em.get(n)),T7t=n=>em.delete(n)&&$F.delete(n)&&vC.delete(n),M7t=n=>!!It(n)&&em.has(n),P7t=n=>{var t;const e=(t=n.type)!==null&&t!==void 0?t:R1,i=Ket(e);return gD({},i,n)};class Va{static registerInstance(t){Va.instances.set(t.id,t)}static unregisterInstance(t){Va.instances.delete(t.id)}static getInstance(t){return Va.instances.get(t)}static instanceExist(t){return Va.instances.has(t)}static forEach(t,e=[],i){const r=ot(e);return Va.instances.forEach((s,a,o)=>{r.includes(a)||t(s,a,o)},i)}}Va.instances=new Map;class os{static registerTheme(t,e){GF(t,e)}static getTheme(t,e=!1){return Ket(t,e)}static removeTheme(t){return T7t(t)}static themeExist(t){return M7t(t)}static getDefaultTheme(){return os.themes.get(R1)}static setCurrentTheme(t){os.themeExist(t)&&(os._currentThemeName=t,Va.forEach(e=>e==null?void 0:e.setCurrentTheme(t)))}static getCurrentTheme(t=!1){return os.getTheme(os._currentThemeName,t)}static getCurrentThemeName(){return os._currentThemeName}}os.themes=em,os._currentThemeName=R1;function uh(n,t){return It(n)?os.themeExist(n)?os.getTheme(n,t):{}:ae(n)?n:{}}function mD(n,t={data:e=>e}){if(!n)return n;if(n.constructor===Object){const e={};for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(t[i]){e[i]=t[i](n[i]);continue}e[i]=mD(n[i],t)}return e}return ut(n)?n.map(e=>mD(e,t)):n}function vD(n,t){if(!n)return n;if(No(n)){const e={};for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(It(n[i])&&t.getFunction(n[i])){e[i]=t.getFunction(n[i]);continue}e[i]=vD(n[i],t)}return e}return ut(n)?n.map(e=>vD(e,t)):n}const E7t=(n,t,e)=>vg(n,t,e,{fontFamily:mC.fontFamily,fontSize:mC.fontSize}),O7t=(n,t,e,i)=>E7t(t,e,i).measure(n);function xg(n,t){for(let e=0;e<t.length;e++){const i=t[e],r=R7t(n,i.key);r?r.operations=[...new Set(r.operations.concat(i.operations))]:n.push(i)}return n}function R7t(n,t){return n.find(e=>e.key===t)}function _C(n,t){var e;if(!n)return t??null;const i=n.getFields();return i&&i[t]?(e=i[t].alias)!==null&&e!==void 0?e:t:t??null}function qet(n,t,e){const i=n.getStackSort(),r={};let s=null;return i&&(s={},n.getSeries().forEach(a=>{const o=a.getSeriesField();if(o){const l=a.getRawDataStatisticsByField(o);l.values&&(s[o]||(s[o]={lastIndex:0,sort:{}}),l.values.forEach((u,h)=>{u in s[o].sort||(s[o].sort[u]=s[o].lastIndex,s[o].lastIndex++)}))}})),n.getSeries().forEach(a=>{var o;const l=a.getStackData(),u=a.getStackValue(),h=a.getStackValueField(),c=!e||e(a);l&&h&&c&&(r[u]=(o=r[u])!==null&&o!==void 0?o:{nodes:{}},tit(a,l,r[u],h,t,s))}),i?Zet(r):r}function Zet(n,t){var e;for(const i in n)!((e=n[i].sortDatums)===null||e===void 0)&&e.length?(n[i].sortDatums.sort((r,s)=>r.index-s.index),n[i].values=n[i].sortDatums.map(r=>r.datum)):Zet(n[i].nodes);return n}function Jet(n,t){if("values"in n&&n.values.length){const e=Att(n.values,t),i=CF(n.values,bc);n.values.forEach(s=>{s[pet]=e,s[ZNt]=i,delete s[ky]});const r=n.values.reduce((s,a)=>a[yn]>s[yn]?a:s);r[ky]=!0}else for(const e in n.nodes)Jet(n.nodes[e],t)}function I7t(n){if(!n.values.length)return;const t=n.values[n.values.length-1][yn]/2;for(let e=0;e<n.values.length;e++)n.values[e][lD]=n.values[e][Hs]-t,n.values[e][uD]=n.values[e][yn]-t}function Qet(n,t,e){if(n.values.length>0){let i=0,r=0,s=1,a=0;const o=n.values.length;for(let l=0;l<o;l++){const u=n.values[t?o-1-l:l];a=u[yn],a>=0?(u[Hs]=i,i+=u[yn],u[yn]=i):(u[Hs]=r,r+=u[yn],u[yn]=r),u[qNt]=n.key}if(e)for(let l=0;l<o;l++){const u=n.values[t?o-1-l:l];a=u[yn];const h=a>=0?i:r;s=a>=0?1:-1,u[dp]=h===0?0:Math.min(1,u[Hs]/h)*s,u[bc]=h===0?0:Math.min(1,u[yn]/h)*s}}for(const i in n.nodes)Qet(n.nodes[i],t,e)}function tit(n,t,e,i,r,s,a){if("values"in t)if(r&&t.values.forEach(o=>o[yn]=DIt(o[i])),e.series.push({s:n,values:t.values}),s){const o=n.getSeriesField();t.values.forEach(l=>{e.sortDatums.push({series:n,datum:l,index:o?s[o].sort[l[o]]:0})})}else e.values.push(...t.values);else for(const o in t.nodes){const l=a?`${a}_${o}`:o;!e.nodes[o]&&(e.nodes[o]={values:[],series:[],nodes:{},sortDatums:[],key:l}),tit(n,t.nodes[o],e.nodes[o],i,r,s,l)}}const eit=(n,t,e="key",i="children")=>{for(let r=0;r<n.length;r++){const s=n[r];if(s[e]===t)return s;if(s[i]){const a=eit(s[i],t,e,i);if(a)return a}}return null},iit=(n,t,e="key",i="children")=>{for(let r=0;r<n.length;r++){const s=n[r];if(s[i])for(let a=0;a<s[i].length;a++){const o=s[i][a];if(o[e]===t)return s;const l=iit([o],t,e,i);if(l)return l}}return null},L7t=(n,t,e="key",i="children")=>{const r=[],s=(a,o)=>{for(const l of a){if(l[e]===t)return r.push(...o,l[e].toString()),!0;if(l[i]){const u=s(l[i],[...o,l[e]]);if(u===!0)return u}}return!1};return s(n,[]),r};function D7t(n,t="value",e="children"){return!!ae(n)&&!!n.hasOwnProperty(e)&&Array.isArray(n[e])}function nit(n,t,e,i="value",r="children"){return Array.isArray(n)?n.map(s=>{const a=Object.assign({},s);return Array.isArray(a[r])&&(a[r]=nit(a[r],t,e,i,r)),a}).filter(s=>+s[i]>=t&&+s[i]<=e||s[r]&&s[r].length>0):n}function Oo(n={}){const t=Object.assign({},n);if(ft(n.style)?t.style=(e,i,r,s)=>qt(n.style(e,i,r,s)):Gt(n.style)||(t.style=qt(n.style)),!Gt(n.state)){const e={};Object.keys(n.state).forEach(i=>{ft(n.state[i])?e[i]=(r,s,a,o)=>qt(n.state[i](r,s,a,o)):Gt(n.state[i])||(e[i]=qt(n.state[i]))}),t.state=e}return t}function Jp(n){if(Gt(n))return null;const t={};return Object.keys(n).forEach(e=>{ft(n[e])?t[e]=(i,r,s,a)=>qt(n[e](i,r,s,a)):Gt(n[e])||(t[e]=qt(n[e]))}),t}function B7t(n){if(Gt(n))return null;const t={};return Object.keys(n).forEach(e=>{ft(n[e])?t[e]=(i,r,s,a)=>qt(n[e](i.rawValue,r,i,s,a)):Gt(n[e])||(t[e]=qt(n[e]))}),t}function c$(n,t){if(Gt(n))return null;const e={};return Object.keys(n).forEach(i=>{ft(n[i])?e[i]=n[i](t):e[i]=n[i]}),qt(e)}function qt(n){return n!=null&&n.angle&&(n.angle=qe(n.angle)),n}class Z{static registerChart(t,e){Z._charts[t]=e}static registerSeries(t,e){Z._series[t]=e}static registerComponent(t,e,i){Z._components[t]={cmp:e,alwaysCheck:i}}static registerMark(t,e){Z._marks[t]=e}static registerRegion(t,e){Z._regions[t]=e}static registerTransform(t,e){Z.transforms[t]=e}static registerLayout(t,e){Z._layout[t]=e}static registerAnimation(t,e){Z._animations[t]=e}static registerImplement(t,e){Z._implements[t]=e}static registerChartPlugin(t,e){Z._chartPlugin[t]=e}static registerComponentPlugin(t,e){Z._componentPlugin[t]=e}static createChart(t,e,i){return Z._charts[t]?new Z._charts[t](e,i):null}static createChartSpecTransformer(t,e){if(!Z._charts[t])return null;const i=Z._charts[t];return new i.transformerConstructor(Object.assign({seriesType:i.seriesType},e))}static createRegion(t,e,i){return Z._regions[t]?new Z._regions[t](e,i):null}static createRegionSpecTransformer(t,e){return Z._regions[t]?new Z._regions[t].transformerConstructor(e):null}static createSeries(t,e,i){return Z._series[t]?new Z._series[t](e,i):null}static createSeriesSpecTransformer(t,e){return Z._series[t]?new Z._series[t].transformerConstructor(e):null}static createMark(t,e,i){if(!Z._marks[t])return null;const r=new Z._marks[t](e,i);return r.type==="group"&&r.setInteractive(!1),r}static getComponents(){return Object.values(Z._components)}static getComponentInKey(t){return Z._components[t].cmp}static getLayout(){return Object.values(Z._layout)}static getLayoutInKey(t){return Z._layout[t]}static getSeries(){return Object.values(Z._series)}static getSeriesInType(t){return Z._series[t]}static getRegionInType(t){return Z._regions[t]}static getAnimationInKey(t){return Z._animations[t]}static getImplementInKey(t){return Z._implements[t]}static getSeriesMarkMap(t){return Z._series[t]?Z._series[t].mark:{}}static getChartPlugins(){return Object.values(Z._chartPlugin)}static getComponentPlugins(){return Object.values(Z._componentPlugin)}static getComponentPluginInType(t){return Z._componentPlugin[t]}static registerFormatter(t){this._formatter=t}static getFormatter(){return this._formatter}}Z._charts={},Z._series={},Z._components={},Z._marks={},Z._regions={},Z._animations={},Z._implements={},Z._chartPlugin={},Z._componentPlugin={},Z.transforms={fields:RZ,filter:ckt,fold:x2t},Z.dataParser={csv:DZ,dsv:LZ,tsv:BZ},Z._layout={};const F7t=(n,t,e)=>n.x>=t.x&&n.x<=e.x&&n.y>=t.y&&n.y<=e.y,j7t=(n,t,e)=>{const i=n.getRegionsInIds(ot(t.layout.layoutBindRegionID));return i==null?void 0:i.some(r=>{const s=r.getLayoutRect(),a=r.getLayoutStartPoint();return F7t(e,{x:a.x,y:a.y},{x:s.width+a.x,y:s.height+a.y})})},rit=(n,t)=>{var e,i;return n===t||!F(n)&&!F(t)&&n.value===t.value&&((e=n.axis)===null||e===void 0?void 0:e.id)===((i=t.axis)===null||i===void 0?void 0:i.id)},_D=(n,t,e,i)=>{var r;const s=t.getScale(),a=qn(s.type),o=[],l=t.getOption().getChart().getSeriesInIndex(t.getSpecInfo().seriesIndexes);for(const u of l)if(u.coordinate===e){const h=ot(i(u)),c=(r=u.getViewData())===null||r===void 0?void 0:r.latestData;if(h&&c)if(a){const d=[],p=[];c.forEach((f,g)=>{var _;((_=f[h[0]])===null||_===void 0?void 0:_.toString())===(n==null?void 0:n.toString())&&(d.push(f),p.push(g))}),o.push({series:u,datum:d,key:zE(u,p)})}else if(z(h[1])){const d=[],p=[];c.forEach((f,g)=>{var _;(((_=f[h[0]])===null||_===void 0?void 0:_.toString())===(n==null?void 0:n.toString())||z(f[h[0]])&&z(f[h[1]])&&n>=f[h[0]]&&n<f[h[1]])&&(d.push(f),p.push(g))}),o.push({series:u,datum:d,key:zE(u,p)})}else{const d=t.getSpec().tooltipFilterRange,p=st(d)?[-d,d]:d;let f=[],g=[];if(p)c.forEach((_,v)=>{if(z(_[h[0]])){const y=_[h[0]]-n;y>=p[0]&&y<=p[1]&&(f.push(_),g.push(v))}});else{let _=1/0,v=0;c.forEach((y,b)=>{if(z(y[h[0]])){const S=Math.abs(y[h[0]]-n),A=Math.sign(y[h[0]]-n);S<_?(_=S,f=[y],g=[b],v=A):S===_&&A===v&&(f.push(y),g.push(b))}})}o.push({series:u,datum:f,key:zE(u,g)})}}return o},zE=(n,t)=>`${n.id}_${t.join("_")}`,yC=(n,t,e)=>{const i=n.getAllComponents().filter(r=>r.specKey==="axes"&&t(r)&&j7t(n,r,e));return i.length?i:null},N7t=(n,t)=>{const e=2*Math.PI,i=dn(t),r=Vi(t);return n<i?n+=Math.ceil((i-n)/e)*e:n>r&&(n-=Math.ceil((n-r)/e)*e),n},sit=(n,t)=>{if(!n||!rp(n.getRegionsInIndex(),"polar"))return null;const{x:e,y:i}=t,r=yC(n,l=>l.getOrient()==="angle",t),s=yC(n,l=>l.getOrient()==="radius",t),a=[],o=l=>l.getDimensionField()[0];return r&&r.forEach(l=>{var u;const h=l.getScale();if(h&&qn(h.type)){const c=h.domain(),d=h.range(),p=l.getCenter(),f={x:e-l.getLayoutStartPoint().x-p.x,y:i-l.getLayoutStartPoint().y-p.y};let g=pW({x:1,y:0},f);g=N7t(g,d);const _=oC(f),v=(u=s[0])===null||u===void 0?void 0:u.getScale(),y=v==null?void 0:v.range();if((g-(d==null?void 0:d[0]))*(g-(d==null?void 0:d[1]))>0||(_-(y==null?void 0:y[0]))*(_-(y==null?void 0:y[1]))>0)return;const b=l.invert(g);if(F(b))return;let S=c.findIndex(w=>(w==null?void 0:w.toString())===b.toString());S<0&&(S=void 0);const A=_D(b,l,"polar",o);a.push({index:S,value:b,position:h.scale(b),axis:l,data:A})}}),s&&s.forEach(l=>{var u;const h=l.getScale(),c=h==null?void 0:h.range();if(h&&qn(h.type)){const d=l.getCenter(),p={x:e-l.getLayoutStartPoint().x-d.x,y:i-l.getLayoutStartPoint().y-d.y};let f=pW({x:1,y:0},p);f<-Math.PI/2&&(f=2*Math.PI+f);const g=oC(p),_=(u=r[0])===null||u===void 0?void 0:u.getScale(),v=_==null?void 0:_.range();if((f-(v==null?void 0:v[0]))*(f-(v==null?void 0:v[1]))>0||(g-(c==null?void 0:c[0]))*(g-(c==null?void 0:c[1]))>0)return;const y=h.invert(g);if(F(y))return;let b=h.domain().findIndex(A=>(A==null?void 0:A.toString())===y.toString());b<0&&(b=void 0);const S=_D(y,l,"polar",o);a.push({index:b,value:y,position:h.scale(y),axis:l,data:S})}}),a.length?a:null};function Ii(n){return n==="bottom"||n==="top"}function cl(n){return n==="left"||n==="right"}function hh(n){return n==="z"}function z7t(n,t){return t?Ii(n)?"linear":"band":Ii(n)?"band":"linear"}function cd(n,t){return WF(n.orient)||t&&t.includes(n.orient)?n.orient:"left"}function ait(n){return n==="top"||n==="bottom"?"horizontal":"vertical"}function H7t(n,t){let e=n.inverse;return t&&!Ii(n.orient)&&(e=!z(n.inverse)||!n.inverse),e}function d$(n,t){var e;const i=(e=n.type)!==null&&e!==void 0?e:z7t(n.orient,t);return{axisType:i,componentName:`${mt.cartesianAxis}-${i}`}}const oit=n=>n.fieldX[0],lit=n=>n.fieldY[0],V7t=n=>{var t;return[n.fieldX[0],(t=n.fieldX2)!==null&&t!==void 0?t:n.fieldX[1]]},W7t=n=>{var t;return[n.fieldY[0],(t=n.fieldY2)!==null&&t!==void 0?t:n.fieldY[1]]},p$=(n,t)=>n?t?oit:V7t:t?lit:W7t,uit=(n,t,e)=>{var i,r;if(!n||!rp(n.getRegionsInIndex(),"cartesian"))return null;const{x:s,y:a}=t,o=(i=yC(n,f=>Ii(f.getOrient()),t))!==null&&i!==void 0?i:[],l=(r=yC(n,f=>cl(f.getOrient()),t))!==null&&r!==void 0?r:[],u=new Set,h=new Set,c=new Set;[o,l].forEach(f=>f.forEach(g=>{qn(g.getScale().type)?u.add(g):h.add(g),e&&g.getSpec().hasDimensionTooltip&&c.add(g)}));const d=[],p=f=>{const g=f==="x",_=g?s:a;(g?o:l).forEach(v=>{if(c.size>0){if(c.has(v)){const y=f$(v,_,f,p$(g,qn(v.getScale().type)));y&&d.push(y)}}else{const y=u.size>0;if((y?u:h).has(v)){const b=f$(v,_,f,p$(g,y));b&&d.push(b)}}})};return n.getSpec().direction==="horizontal"?(p("y"),d.length===0&&p("x")):(p("x"),d.length===0&&p("y")),d.length?d:null},f$=(n,t,e,i)=>{const r=n.getScale(),s=t-n.getLayoutStartPoint()[e];if((s-r.range()[0])*(s-r.range()[1])>0)return null;const a=r.invert(s);return hit(n,a,i)},hit=(n,t,e)=>{const i=n.getScale();if(F(t))return null;let r=i.domain().findIndex(a=>(a==null?void 0:a.toString())===t.toString());r<0&&(r=void 0);const s=_D(t,n,"cartesian",e??(Ii(n.getOrient())?oit:lit));return{index:r,value:t,position:i.scale(t),axis:n,data:s}};class cit{constructor(t,e){this._eventDispatcher=t,this._mode=e}get chart(){var t,e;return this._chart||(this._chart=(e=(t=this._eventDispatcher.globalInstance).getChart)===null||e===void 0?void 0:e.call(t)),this._chart}register(t,e){var i,r;((r=(i=this.chart)===null||i===void 0?void 0:i.getOption().onError)!==null&&r!==void 0?r:ip)("Method not implemented.")}unregister(){var t,e;((e=(t=this.chart)===null||t===void 0?void 0:t.getOption().onError)!==null&&e!==void 0?e:ip)("Method not implemented.")}getTargetDimensionInfo(t,e){var i,r;const s=(i=uit(this.chart,{x:t,y:e}))!==null&&i!==void 0?i:[],a=(r=sit(this.chart,{x:t,y:e}))!==null&&r!==void 0?r:[],o=[].concat(s,a);return o.length===0?null:o}dispatch(t,e){var i;const r=(i=this.chart)===null||i===void 0?void 0:i.getAllComponents().filter(l=>l.specKey==="axes"&&(!(e!=null&&e.filter)||e.filter(l))),s=r.filter(l=>{const u=l.getScale();return qn(u.type)}),a=s.length?s:r.filter(l=>{const u=l.getOrient();return Ii(u)||u==="angle"}),o=[];return a.forEach(l=>{const u=hit(l,t);u&&o.push(u)}),this._callback.call(null,{action:"enter",dimensionInfo:o}),o}}class $7t extends cit{constructor(){super(...arguments),this.onClick=t=>{if(!t)return;const e=t.event.viewX,i=t.event.viewY,r=this.getTargetDimensionInfo(e,i);r&&this._callback.call(null,Object.assign(Object.assign({},t),{action:"click",dimensionInfo:r.slice()}))}}register(t,e){this._callback=e.callback,this._eventDispatcher.register("pointertap",{query:Object.assign(Object.assign({},e.query),{source:Re.chart}),callback:this.onClick})}unregister(){this._eventDispatcher.unregister("pointertap",{query:null,callback:this.onClick})}}class G7t extends cit{constructor(){super(...arguments),this._cacheDimensionInfo=null,this.onMouseMove=t=>{if(!t)return;const e=t.event.viewX,i=t.event.viewY,r=this.getTargetDimensionInfo(e,i);r===null&&this._cacheDimensionInfo!==null?(this._callback.call(null,Object.assign(Object.assign({},t),{action:"leave",dimensionInfo:this._cacheDimensionInfo.slice()})),this._cacheDimensionInfo=r):r===null||this._cacheDimensionInfo!==null&&r.length===this._cacheDimensionInfo.length&&!r.some((s,a)=>!rit(s,this._cacheDimensionInfo[a]))?r!==null&&this._callback.call(null,Object.assign(Object.assign({},t),{action:"move",dimensionInfo:r.slice()})):(this._callback.call(null,Object.assign(Object.assign({},t),{action:"enter",dimensionInfo:r.slice()})),this._cacheDimensionInfo=r)},this.onMouseOut=t=>{t&&(this._callback.call(null,Object.assign(Object.assign({},t),{action:"leave",dimensionInfo:this._cacheDimensionInfo?this._cacheDimensionInfo.slice():[]})),this._cacheDimensionInfo=null)}}register(t,e){this._callback=e.callback,this._eventDispatcher.register("pointermove",{query:Object.assign(Object.assign({},e.query),{source:Re.chart}),callback:this.onMouseMove}),this._eventDispatcher.register("pointerout",{query:Object.assign(Object.assign({},e.query),{source:Re.canvas}),callback:this.onMouseOut}),vc(this._mode)&&this._eventDispatcher.register("pointerdown",{query:Object.assign(Object.assign({},e.query),{source:Re.chart}),callback:this.onMouseMove})}unregister(){this._eventDispatcher.unregister("pointermove",{query:null,callback:this.onMouseMove}),vc(this._mode)&&this._eventDispatcher.unregister("pointerdown",{query:null,callback:this.onMouseMove})}}var Iu;(function(n){n.dimensionHover="dimensionHover",n.dimensionClick="dimensionClick"})(Iu||(Iu={}));const HE={[Iu.dimensionHover]:G7t,[Iu.dimensionClick]:$7t};let lT=class{getComposedEventMap(){return this._composedEventMap}constructor(t,e){this._composedEventMap=new Map,this._eventDispatcher=t,this._mode=e}on(t,e,i){const r=typeof e=="function"?{query:null,callback:e}:{query:e,callback:i};if(HE[t]){const s=new HE[t](this._eventDispatcher,this._mode);s.register(t,r),this._composedEventMap.set(i,{eventType:t,event:s})}else this._eventDispatcher.register(t,r);return this}off(t,e,i){var r,s;const a=i??e;if(HE[t])if(a)(r=this._composedEventMap.get(a))===null||r===void 0||r.event.unregister(),this._composedEventMap.delete(a);else for(const o of this._composedEventMap.entries())o[1].eventType===t&&((s=this._composedEventMap.get(o[0]))===null||s===void 0||s.event.unregister(),this._composedEventMap.delete(o[0]));else if(a){const o={callback:a,query:null,filter:{nodeName:null,type:t,level:null,source:e.source,markName:null,filter:null,userId:null}};this._eventDispatcher.unregister(t,o)}else this._eventDispatcher.unregister(t);return this}emit(t,e,i){return this._eventDispatcher.dispatch(t,e,i),this}release(){this._eventDispatcher.clear(),this._composedEventMap.clear()}};class U7t{constructor(){this._map=new Map,this._levelNodes=new Map,this._levelNodes.set(ci.vchart,[]),this._levelNodes.set(ci.chart,[]),this._levelNodes.set(ci.model,[]),this._levelNodes.set(ci.mark,[])}addHandler(t,e){var i;const r={level:e,handler:t};return(i=this._levelNodes.get(e))===null||i===void 0||i.push(r),this._map.set(t.callback,r),this}removeHandler(t){const e=this._map.get(t.callback);if(!e)return this;this._map.delete(t.callback);const i=this._levelNodes.get(e.level),r=i==null?void 0:i.findIndex(s=>s.handler.callback===t.callback);return r!==void 0&&r>=0&&(i==null||i.splice(r,1)),this}getHandlers(t){var e;return((e=this._levelNodes.get(t))===null||e===void 0?void 0:e.map(i=>i.handler))||[]}getCount(){return this._map.size}release(){this._map.clear(),this._levelNodes.clear()}}const g$={cartesianAxis:"axis","cartesianAxis-band":"axis","cartesianAxis-linear":"axis","cartesianAxis-time":"axis",polarAxis:"axis","polarAxis-band":"axis","polarAxis-linear":"axis",discreteLegend:"legend",continuousLegend:"legend",colorLegend:"legend",sizeLegend:"legend",label:"label",markLine:"markLine",markArea:"markArea",markPoint:"markPoint",polarMarkLine:"polarMarkLine",polarMarkArea:"polarMarkArea",polarMarkPoint:"polarMarkPoint",geoMarkPoint:"geoMarkPoint"};class Y7t{constructor(t,e){this._viewBubbles=new Map,this._windowBubbles=new Map,this._canvasBubbles=new Map,this._viewListeners=new Map,this._windowListeners=new Map,this._canvasListeners=new Map,this._onDelegate=i=>{var r;const s=this.globalInstance.getChart(),a=z(i.modelId)&&(s==null?void 0:s.getModelById(i.modelId))||void 0,o=z(i.markId)&&(s==null?void 0:s.getMarkById(i.markId))||null,l=new Map;let u=(r=i.item)===null||r===void 0?void 0:r.mark;for(u&&z(u.id())&&l.set(u.id(),i.item);u!=null&&u.elements;){const c=u.id();z(c)&&!l.has(c)&&l.set(c,u.elements[0]),u=u.group}const h={event:i.event,item:i.item,datum:i.datum,source:i.source,itemMap:l,chart:s,model:a,mark:o??void 0,node:le(i.event,"target")};this.dispatch(i.type,h)},this._onDelegateInteractionEvent=i=>{const r=this.globalInstance.getChart(),s=i.event;let a=null;s.elements&&(a=s.elements);const o={event:i.event,chart:r,items:a,datums:a&&a.map(l=>l.getDatum())};this.dispatch(i.type,o)},this.globalInstance=t,this._compiler=e}register(t,e){var i,r,s,a,o;this._parseQuery(e);const l=this.getEventBubble(((i=e.filter)===null||i===void 0?void 0:i.source)||Re.chart),u=this.getEventListeners(((r=e.filter)===null||r===void 0?void 0:r.source)||Re.chart);if(l.get(t)||l.set(t,new U7t),l.get(t).addHandler(e,(s=e.filter)===null||s===void 0?void 0:s.level),this._isValidEvent(t)&&!u.has(t)){const h=this._onDelegate.bind(this);this._compiler.addEventListener((a=e.filter)===null||a===void 0?void 0:a.source,t,h),u.set(t,h)}else if(this._isInteractionEvent(t)&&!u.has(t)){const h=this._onDelegateInteractionEvent.bind(this);this._compiler.addEventListener((o=e.filter)===null||o===void 0?void 0:o.source,t,h),u.set(t,h)}return this}unregister(t,e){var i,r,s,a;let o=!1;const l=this.getEventBubble(((i=e==null?void 0:e.filter)===null||i===void 0?void 0:i.source)||Re.chart),u=this.getEventListeners(((r=e==null?void 0:e.filter)===null||r===void 0?void 0:r.source)||Re.chart);if(e){const h=l.get(t);h==null||h.removeHandler(e),(h==null?void 0:h.getCount())===0&&(h==null||h.release(),l.delete(t),o=!0),!((s=e==null?void 0:e.wrappedCallback)===null||s===void 0)&&s.cancel&&e.wrappedCallback.cancel()}else{const h=l.get(t);h==null||h.release(),l.delete(t),o=!0}if(o&&this._isValidEvent(t)){const h=u.get(t);this._compiler.removeEventListener(((a=e==null?void 0:e.filter)===null||a===void 0?void 0:a.source)||Re.chart,t,h),u.delete(t)}return this}dispatch(t,e,i){const r=this.getEventBubble(e.source||Re.chart).get(t);if(!r)return this;let s=!1;if(i){const a=r.getHandlers(i);s=this._invoke(a,t,e)}else{const a=r.getHandlers(ci.mark);if(s=this._invoke(a,t,e),!s){const o=r.getHandlers(ci.model);s=this._invoke(o,t,e)}if(!s){const o=r.getHandlers(ci.chart);s=this._invoke(o,t,e)}if(!s){const o=r.getHandlers(ci.vchart);s=this._invoke(o,t,e)}}return this}clear(){for(const t of this._viewListeners.entries())this._compiler.removeEventListener(Re.chart,t[0],t[1]);this._viewListeners.clear();for(const t of this._windowListeners.entries())this._compiler.removeEventListener(Re.window,t[0],t[1]);this._windowListeners.clear();for(const t of this._canvasListeners.entries())this._compiler.removeEventListener(Re.canvas,t[0],t[1]);this._canvasListeners.clear();for(const t of this._viewBubbles.values())t.release();this._viewBubbles.clear();for(const t of this._windowBubbles.values())t.release();this._windowBubbles.clear();for(const t of this._canvasBubbles.values())t.release();this._canvasBubbles.clear()}release(){this.clear(),this.globalInstance=null,this._compiler=null}_filter(t,e,i){var r,s,a;if(ft(t.filter)&&!t.filter(i)||t.nodeName&&le(i,"node.name")!==t.nodeName||t.markName&&((r=i==null?void 0:i.mark)===null||r===void 0?void 0:r.name)!==t.markName)return!1;let o=(s=i.model)===null||s===void 0?void 0:s.type;return g$[o]&&(o=g$[o]),(!t.type||o===t.type)&&!(t.level==="mark"&&!t.type&&!(i!=null&&i.mark))&&!(t.level==="model"&&!t.type&&!(i!=null&&i.model))&&(!z(t.userId)||((a=i.model)===null||a===void 0?void 0:a.userId)===t.userId)}_prepareParams(t,e){if(t.markName&&e.mark&&e.itemMap){const i=e.mark.getProductId(),r=e.itemMap.get(i),s=r==null?void 0:r.getDatum();return Object.assign(Object.assign({},e),{item:r,datum:s})}return Object.assign({},e)}_invoke(t,e,i){return t.map(r=>{var s,a,o;const l=r.filter;if(!r.query||this._filter(l,e,i)){const u=(r.wrappedCallback||r.callback).call(null,this._prepareParams(l,i)),h=u??((s=r.query)===null||s===void 0?void 0:s.consume);return h&&((a=i.event)===null||a===void 0||a.stopPropagation(),(o=i.event)===null||o===void 0||o.preventDefault()),!!h}}).some(r=>r===!0)}_getQueryLevel(t){return t?t.level?t.level:z(t.id)?ci.model:ci.vchart:ci.vchart}_parseQuery(t){var e;const i=t.query;i!=null&&i.throttle?t.wrappedCallback=Pc(t.callback,i.throttle):i!=null&&i.debounce&&(t.wrappedCallback=Ml(t.callback,i.debounce));let r=this._getQueryLevel(i),s=null,a=Re.chart,o=null,l=null,u=null;return i!=null&&i.nodeName&&(o=i.nodeName),i!=null&&i.markName&&(l=i.markName),!(i!=null&&i.type)||r!==ci.model&&r!==ci.mark||(s=i.type),i!=null&&i.source&&(a=i.source),z(i==null?void 0:i.id)&&(u=i==null?void 0:i.id,r=ci.model),t.filter={level:r,markName:l,type:s,source:a,nodeName:o,userId:u,filter:(e=i==null?void 0:i.filter)!==null&&e!==void 0?e:null},t}getEventBubble(t){switch(t){case Re.chart:return this._viewBubbles;case Re.window:return this._windowBubbles;case Re.canvas:return this._canvasBubbles;default:return this._viewBubbles}}getEventListeners(t){switch(t){case Re.chart:return this._viewListeners;case Re.window:return this._windowListeners;case Re.canvas:return this._canvasListeners;default:return this._viewListeners}}_isValidEvent(t){return KNt.includes(t)||Object.values(Ht).includes(t)}_isInteractionEvent(t){let e;return t&&(e=t.split(":")[0],e)&&Ct.hasInteraction(e)}}function ie(n,t,e){n.getTransform(t)||n.registerTransform(t,e)}function vu(n,t,e){n.getParser(t)||n.registerParser(t,e)}const pp=new Map;let df;function X7t(){df||(df=new gc,vu(df,"geojson",HZ),vu(df,"topojson",j2t),ie(df,"simplify",b2t))}function K7t(n,t,e={type:"geojson",centroid:!0}){pp.has(n)&&wl(`map type of '${n}' already exists, will be overwritten.`),X7t();const i=new Le(df),r=gt({},{centroid:!0,simplify:!1},e);e.type==="topojson"?i.parse(t,{type:"topojson",options:r}):i.parse(t,{type:"geojson",options:r});const{simplify:s}=e;s===!0?i.transform({type:"simplify"}):ae(s)&&i.transform({type:"simplify",options:s}),pp.set(n,i)}function q7t(n){pp.has(n)?pp.delete(n):wl(`map type of '${n}' does not exists.`)}function Z7t(n){return pp.get(n)}function m$(n,t=!1){let e=t;return n.latestData instanceof Le&&(e=!1),e?cs(n.latestData):n.latestData.slice()}const uT=(n,t)=>n.length===0?[]:n.length===1?m$(n[0],t==null?void 0:t.deep):n.map(e=>m$(e,t==null?void 0:t.deep));function yD(n,t,e){t=t instanceof gc?t:n.dataSet,ie(t,"copyDataView",uT);const i=new Le(t,e);return i.parse([n],{type:"dataview"}),i.transform({type:"copyDataView",level:$o.copyDataView}),i}function UF(n,t,e=[],i={}){var r,s,a;if(n instanceof Le)return n;const{id:o,values:l=[],fromDataIndex:u,fromDataId:h,transforms:c=[]}=n,d=n.parser?cs(n.parser):{clone:!0},p=cs(n.fields);let f;d.clone=d.clone!==!1;const g=e.find(_=>_.name===o);if(g)f=g;else{const _={name:o};if(p&&(_.fields=p),f=new Le(t,_),typeof h=="string"){const v=e.find(y=>y.name===h);if(!v)return((r=i.onError)!==null&&r!==void 0?r:ip)(`no data matches fromDataId ${h}`),null;f.parse([v],{type:"dataview"}),f.transform({type:"copyDataView"})}else if(typeof u=="number"){const v=e[u];if(!v)return((s=i.onError)!==null&&s!==void 0?s:ip)(`no data matches fromDataIndex ${u}`),null;f.parse([v],{type:"dataview"}),f.transform({type:"copyDataView"})}else Array.isArray(l)?f.parse(l,d):!It(l)||d&&!["csv","dsv","tsv"].includes(d.type)?(f.parse([]),wl("values should be array")):f.parse(l,(a=d)!==null&&a!==void 0?a:{type:"csv"});c&&c.length&&c.forEach(v=>{t.getTransform(v.type)&&f.transform(v)})}return f}function YF(n,t,e){n&&(t.fields&&n.setFields(t.fields,e),n.parseNewData(t.values,t.parser))}var $o;(function(n){n[n.copyDataView=-10]="copyDataView",n[n.treemapFilter=-8]="treemapFilter",n[n.treemapFlatten=-7]="treemapFlatten",n[n.dotObjFlat=-7]="dotObjFlat",n[n.linkDotInfo=-7]="linkDotInfo",n[n.sankeyLayout=-7]="sankeyLayout",n[n.dataZoomFilter=-6]="dataZoomFilter",n[n.legendFilter=-5]="legendFilter"})($o||($o={}));const J7t=(n,t)=>{const e={nodes:{}},{fields:i}=t;if(!(i!=null&&i.length))return e;const r=i.length-1;let s,a,o=e;return n.forEach(l=>{l.latestData.forEach(u=>{o=e;for(let h=0;h<i.length;h++){const c=u[i[h]];if(F(c))break;o.nodes[c]||(h===r?o.nodes[c]={values:[]}:(s={nodes:{}},o.nodes[c]=s)),h===r?(a=o.nodes[c],a.values.push(u)):o=o.nodes[c]}})}),e};var bn;(function(n){n.appear="appear",n.disappear="disappear",n.enter="enter",n.update="update",n.state="state",n.exit="exit",n.normal="normal",n.none="none"})(bn||(bn={}));var Qh;(function(n){n.data="data",n.signal="signal",n.mark="mark"})(Qh||(Qh={}));function Q7t(n){switch(n){case vn["desktop-browser"]:case vn["mobile-browser"]:return"browser";case vn.node:case vn.worker:return"node";case vn.miniApp:case vn["desktop-miniApp"]:return"feishu";case vn.lynx:return"lynx";case vn.wx:return"wx";case vn.tt:return"tt";case vn.harmony:return"harmony"}return"browser"}class t6t{getVGrammarView(){return this._view}getModel(){return this._model}constructor(t,e){this._viewListeners=new Map,this._windowListeners=new Map,this._canvasListeners=new Map,this.isInited=!1,this._isRunning=!1,this._released=!1,this._model={[Qh.signal]:{},[Qh.data]:{},[Qh.mark]:{}},this._compileChart=null,this.handleStageRender=()=>{var i,r;(r=(i=this._compileChart)===null||i===void 0?void 0:i.getEvent())===null||r===void 0||r.emit(Wt.afterRender,{chart:this._compileChart})},this._container=t,this._option=e}getRenderer(){var t;return(t=this._view)===null||t===void 0?void 0:t.renderer}getCanvas(){var t;return(t=this._view)===null||t===void 0?void 0:t.renderer.canvas()}getStage(){var t;return(t=this._view)===null||t===void 0?void 0:t.renderer.stage()}initView(){var t,e,i,r;if(this._released||(this.isInited=!0,this._view))return;const s=new ri((t=this._option.logLevel)!==null&&t!==void 0?t:aa.Error);!((e=this._option)===null||e===void 0)&&e.onError&&s.addErrorHandler((...a)=>{var o,l;(l=(o=this._option)===null||o===void 0?void 0:o.onError)===null||l===void 0||l.call(o,...a)}),this._view=new Tp(Object.assign(Object.assign({width:this._width,height:this._height,container:(i=this._container.dom)!==null&&i!==void 0?i:null,renderCanvas:(r=this._container.canvas)!==null&&r!==void 0?r:null,hooks:this._option.performanceHook},this._option),{mode:Q7t(this._option.mode),autoFit:!1,eventConfig:{gesture:vc(this._option.mode),disable:this._option.interactive===!1},doLayout:()=>{var a;(a=this._compileChart)===null||a===void 0||a.onLayout(this._view)},logger:s,logLevel:s.level()})),this._setCanvasStyle(),this.getStage().hooks.afterRender.tap("chart-event",this.handleStageRender),this._option.interactive!==!1&&this._viewListeners.forEach(a=>{var o;(o=this._view)===null||o===void 0||o.addEventListener(a.type,a.callback)})}_setCanvasStyle(){if(this._view&&this._container.dom&&!It(this._container.dom)){this._container.dom.style.display="block",this._container.dom.style.position="relative";const t=this.getCanvas();t&&(t.style.display="block")}}compileInteractions(){var t;if(this._view.removeAllInteractions(),(t=this._interactions)===null||t===void 0?void 0:t.length){const e={};this._interactions.forEach(i=>{var r;if(i.regionId){const s=`${i.regionId}-${i.type}-${(r=i.id)!==null&&r!==void 0?r:""}`,a=e[s];e[s]=a?Object.assign(Object.assign(Object.assign({},a),i),{selector:[...a.selector,...i.selector]}):i}else this._view.interaction(i.type,i)}),Object.keys(e).forEach(i=>{const r=this._view.interaction(e[i].type,e[i]);if(this._compileChart){const s=this._compileChart.getRegionsInIds([e[i].regionId])[0];s&&s.interaction.addVgrammarInteraction(r.getStartState(),r)}})}}compile(t,e){if(this._released)return;const{chart:i}=t;this._compileChart=i,this.initView(),this._view&&(i.compile(),i.afterCompile(),this.updateDepend(),this.compileInteractions())}clear(t,e=!1){const{chart:i}=t;i.clear(),this.releaseGrammar(e)}renderNextTick(t){this._released||this._nextRafId||(this._nextRafId=_e.getRequestAnimationFrame()(()=>{this._nextRafId=null,this.render(t)}))}render(t){var e,i;this._released||(this._nextRafId&&(_e.getCancelAnimationFrame()(this._nextRafId),this._nextRafId=null),this._isRunning||(this.initView(),this._view&&(this._isRunning=!0,(e=this._view)===null||e===void 0||e.run(t),this._isRunning=!1,this._nextRafId&&(_e.getCancelAnimationFrame()(this._nextRafId),this._nextRafId=null,this._isRunning=!0,(i=this._view)===null||i===void 0||i.run(t),this._isRunning=!1))))}updateViewBox(t,e=!0){this._view&&this._view.renderer.setViewBox(t,e)}resize(t,e,i=!0){this._view&&(this._width=t,this._height=e,this._view.resize(t,e),i&&this.render({morph:!1}))}setBackground(t){var e;(e=this._view)===null||e===void 0||e.background(t)}setSize(t,e){this._width=t,this._height=e,this._view&&(this._view.width(t),this._view.height(e))}setViewBox(t,e=!0){this._view&&this._view.renderer.setViewBox(t,e)}addEventListener(t,e,i){var r,s;if(this._option.interactive!==!1){if(t===Re.chart){const a=(function(o,l){var u,h,c;const d=(h=(u=l==null?void 0:l.mark)===null||u===void 0?void 0:u.getContext())!==null&&h!==void 0?h:{},p=z(d.modelId)?d.modelId:null,f=z(d.markId)?d.markId:null,g=z(d.modelUserId)?d.modelUserId:null,_=z(d.markUserId)?d.markUserId:null,v={event:o,type:e,source:t,item:l,datum:((c=l==null?void 0:l.getDatum)===null||c===void 0?void 0:c.call(l))||null,markId:f,modelId:p,markUserId:_,modelUserId:g};i.call(null,v)}).bind(this);this._viewListeners.set(i,{type:e,callback:a}),(r=this._view)===null||r===void 0||r.addEventListener(e,a)}else if(t===Re.window){const a=(function(l){const u={event:l,type:e,source:t,item:null,datum:null,markId:null,modelId:null,markUserId:null,modelUserId:null};i.call(null,u)}).bind(this);this._windowListeners.set(i,{type:e,callback:a});const o=this._getGlobalThis();o==null||o.addEventListener(e,a)}else if(t===Re.canvas){const a=(function(l){const u={event:l,type:e,source:t,item:null,datum:null,markId:null,modelId:null,markUserId:null,modelUserId:null};i.call(null,u)}).bind(this);this._canvasListeners.set(i,{type:e,callback:a});const o=(s=this.getStage())===null||s===void 0?void 0:s.window;o==null||o.addEventListener(e,a)}}}removeEventListener(t,e,i){var r,s,a,o,l;if(this._option.interactive!==!1){if(t===Re.chart){const u=(r=this._viewListeners.get(i))===null||r===void 0?void 0:r.callback;u&&((s=this._view)===null||s===void 0||s.removeEventListener(e,u)),this._viewListeners.delete(i)}else if(t===Re.window){const u=this._getGlobalThis(),h=(a=this._windowListeners.get(i))===null||a===void 0?void 0:a.callback;h&&(u==null||u.removeEventListener(e,h)),this._windowListeners.delete(i)}else if(t===Re.canvas){const u=(o=this.getStage())===null||o===void 0?void 0:o.window,h=(l=this._canvasListeners.get(i))===null||l===void 0?void 0:l.callback;u&&h&&(u==null||u.removeEventListener(e,h)),this._canvasListeners.delete(i)}}}releaseEvent(){const t=this.getStage();t&&t.hooks.afterRender.unTap("chart-event",this.handleStageRender),this._viewListeners.clear(),this._windowListeners.clear(),this._canvasListeners.clear()}release(){var t;this.releaseEvent(),this._option=this._container=null,this._releaseModel(),(t=this._view)===null||t===void 0||t.release(),this._view=null,this.isInited=!1,this._compileChart=null,this._released=!0}releaseGrammar(t=!1){var e,i;this._releaseModel(),t&&((e=this._view)===null||e===void 0||e.removeAllGraphicItems()),(i=this._view)===null||i===void 0||i.removeAllGrammars()}_releaseModel(){Object.keys(this._model).forEach(t=>{Object.values(this._model[t]).forEach(e=>{Object.values(e).forEach(i=>{i.removeProduct(!0)})}),this._model[t]={}})}addGrammarItem(t){const e=t.getProduct();if(F(e))return;const i=e.id(),r=t.grammarType;F(this._model[r][i])&&(this._model[r][i]={}),this._model[r][i][t.id]=t}removeGrammarItem(t,e){var i;const r=t.getProduct();if(F(r))return;const s=r.id(),a=t.grammarType,o=this._model[a][s];z(o)&&(delete o[t.id],Object.keys(o).length===0&&delete this._model[a][s]),e||(i=this._view)===null||i===void 0||i.removeGrammar(r)}addInteraction(t){this._interactions||(this._interactions=[]),this._interactions.push(t)}removeInteraction(t){this._interactions&&(this._interactions=this._interactions.filter(e=>e.seriesId!==t))}updateDepend(t){return z(t)&&t.length>0?t.every(e=>e.updateDepend()):(Object.values(this._model).forEach(e=>{Object.values(e).forEach(i=>{const r=Object.values(i),s=r[0].getProduct(),a=r.reduce((o,l)=>l.getDepend().length>0?o.concat(l.getDepend()):o,[]).filter(o=>!!o).map(o=>o.getProduct());s.depend(a)})}),!0)}_getGlobalThis(){var t;return ga(this._option.mode)?globalThis:(t=this.getStage())===null||t===void 0?void 0:t.window}}var e6t=function(n,t,e,i){return new(e||(e=Promise))(function(r,s){function a(u){try{l(i.next(u))}catch(h){s(h)}}function o(u){try{l(i.throw(u))}catch(h){s(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof e?h:new e(function(c){c(h)})).then(a,o)}l((i=i.apply(n,t||[])).next())})};function i6t(n="vchart",t){const e=document.createElement("a");e.setAttribute("href",t),e.setAttribute("target","_blank"),e.setAttribute("download",`${n}.png`),e.dispatchEvent(new MouseEvent("click"))}function n6t(n){return new Promise(t=>{n.convertToBlob().then(e=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>{t(i.result)}})})}function r6t(n,t){var e;return e6t(this,void 0,void 0,function*(){if(!n)return"";try{if(OffscreenCanvas!==void 0&&n instanceof OffscreenCanvas)return n6t(n)}catch(i){((e=t==null?void 0:t.onError)!==null&&e!==void 0?e:ip)(`getCanvasDataURL error : ${i.toString()}`)}return n.toDataURL()})}function Ic(n){n.crosshair=ot(n.crosshair||{}).map(t=>Ut({[n.direction==="horizontal"?"yField":"xField"]:{visible:!0,line:{visible:!0,type:"rect"}}},t))}function dit(n,t,e){var i;const{width:r,height:s}=n;if(z(r)&&z(s))return{width:r,height:s};let a=e.width,o=e.height;const l=t.container,u=t.canvas;if(l){const{width:h,height:c}=sI(l,e.width,e.height);a=h,o=c}else if(u&&ga(t.mode)){let h;h=It(u)?document==null?void 0:document.getElementById(u):u;const{width:c,height:d}=sI(h,e.width,e.height);a=c,o=d}else if(Ec(t.mode)&&(!((i=t.modeParams)===null||i===void 0)&&i.domref)){const h=t.modeParams.domref;a=h.width,o=h.height}return a=r??a,o=s??o,{width:a,height:o}}function pf(n,...t){const e=i=>t.reduce((r,s)=>r||(s==null?void 0:s[i]),n[i]);return Object.assign(n,{change:e("change"),reCompile:e("reCompile"),reMake:e("reMake"),reRender:e("reRender"),reSize:e("reSize"),reTransformSpec:e("reTransformSpec")}),n}function pit(n,t){return n==="line"||n==="area"||n==="common"&&t.series.every(e=>e.type==="area"||e.type==="line")?{paddingInner:1,paddingOuter:0}:{paddingOuter:0}}var Bt;(function(n){n.STATE_NORMAL="normal",n.STATE_HOVER="hover",n.STATE_HOVER_REVERSE="hover_reverse",n.STATE_DIMENSION_HOVER="dimension_hover",n.STATE_DIMENSION_HOVER_REVERSE="dimension_hover_reverse",n.STATE_SELECTED="selected",n.STATE_SELECTED_REVERSE="selected_reverse",n.STATE_SANKEY_EMPHASIS="selected",n.STATE_SANKEY_EMPHASIS_REVERSE="blur"})(Bt||(Bt={}));var F0;(function(n){n.STATE_HOVER_REVERSE="hover_reverse",n.STATE_DIMENSION_HOVER_REVERSE="dimension_hover_reverse",n.STATE_SELECTED_REVERSE="selected_reverse"})(F0||(F0={}));class im{constructor(){this._children=[],this._markNameMap={},this._infoMap=new Map}getMarkNameMap(){return this._markNameMap}addMark(t,e){F(t)||(this._children.push(t),this._markNameMap[t.name]=t,this._infoMap.set(t,gt({},im.defaultMarkInfo,e)))}removeMark(t){const e=this._children.findIndex(i=>i.name===t);e>=0&&(this._infoMap.delete(this._children[e]),delete this._markNameMap[t],this._children.splice(e,1))}clear(){this._children=[],this._markNameMap={},this._infoMap.clear()}forEach(t){this._children.forEach(t)}includes(t,e){return this._children.includes(t,e)}get(t){return isNaN(Number(t))?this._markNameMap[t]:this._children[t]}getMarks(){return this._children.slice()}getMarksInType(t){const e=ot(t);return this._children.filter(i=>e.includes(i.type))}getMarkInId(t){return this._children.find(e=>e.id===t)}getMarkWithInfo(t){return this._children.find(e=>Object.keys(t).every(i=>t[i]===this._infoMap.get(e)[i]))}}im.defaultMarkInfo={};class s6t{get hover(){return this._hover}get select(){return this._select}constructor(t){this._marks=new im,this._markReverse=new im,this.onHover=e=>{switch(e.action){case"enter":this.interaction.getEventElement(Bt.STATE_DIMENSION_HOVER).forEach(i=>this.interaction.addEventElement(Bt.STATE_DIMENSION_HOVER_REVERSE,i)),this.interaction.clearEventElement(Bt.STATE_DIMENSION_HOVER,!1),this.getEventElement(e).forEach(i=>this.interaction.addEventElement(Bt.STATE_DIMENSION_HOVER,i)),this.interaction.reverseEventElement(Bt.STATE_DIMENSION_HOVER);break;case"leave":this.interaction.clearEventElement(Bt.STATE_DIMENSION_HOVER,!0),e=null}},this._option=t,this.event=this._option.model.getOption().getChart().getEvent(),this.interaction=t.interaction,this.initConfig(t.mode)}setStateKeys(t){}registerMark(t){Gt(t.stateStyle[Bt.STATE_DIMENSION_HOVER])||this._marks.addMark(t),Gt(t.stateStyle[Bt.STATE_DIMENSION_HOVER_REVERSE])||this._markReverse.addMark(t)}init(){this.initEvent()}release(){this.releaseEvent()}initEvent(){this.event.on(Iu.dimensionHover,this.onHover)}releaseEvent(){this.event.release()}initConfig(t){}getEventElement(t,e=!1){const i=[];return t.dimensionInfo.forEach(r=>{r.data.forEach(s=>{(e?this._markReverse:this._marks).getMarks().filter(a=>a.model===s.series&&a.getVisible()).forEach(a=>{const o=a.getProduct();if(!o||!o.elements)return;const l=o.elements.filter(u=>{const h=u.getDatum();let c;return c=ut(h)?h.every((d,p)=>d===s.datum[p]):s.datum.some(d=>d===h),e?!c:c});i.push(...l)})})}),i}}function a6t(n,t,e){var i;const r=(i=t[n])===null||i===void 0?void 0:i.style;return o6t(n,r)||ft(r)?!0:!(!(r!=null&&r.scale)||r.field===e)}function o6t(n,t){return(n==="fill"||n==="stroke")&&(t==null?void 0:t.gradient)&&(t==null?void 0:t.stops)}const fit={};Object.values(Bt).forEach(n=>{fit[n]=!0});function l6t(n){return!!fit[n]}const u6t={[Bt.STATE_HOVER]:Bt.STATE_HOVER_REVERSE,[Bt.STATE_SELECTED]:Bt.STATE_SELECTED_REVERSE,[Bt.STATE_DIMENSION_HOVER]:Bt.STATE_DIMENSION_HOVER_REVERSE};function Nx(n){return u6t[n]}class h6t{constructor(){this._stateMarks=new Map,this._stateElements=new Map,this._vgrammarInteractions=new Map,this._disableTriggerEvent=!1}addVgrammarInteraction(t,e){t&&(this._vgrammarInteractions.get(t)?this._vgrammarInteractions.get(t).push(e):this._vgrammarInteractions.set(t,[e]))}static markStateEnable(t,e){return!Gt(t.stateStyle[e])}setDisableActiveEffect(t){this._disableTriggerEvent=t}registerMark(t,e){var i;this._stateMarks.has(t)||this._stateMarks.set(t,[]),(i=this._stateMarks.get(t))===null||i===void 0||i.push(e)}getStateMark(t){return this._stateMarks.get(t)}filterEventMark(t,e){var i;return!(!t.mark||!(!((i=this._stateMarks.get(e))===null||i===void 0)&&i.includes(t.mark)))}getEventElement(t){var e;return(e=this._stateElements.get(t))!==null&&e!==void 0?e:[]}getEventElementData(t){return this.getEventElement(t).map(e=>e.getDatum())}exchangeEventElement(t,e){var i;if(this._disableTriggerEvent)return;const r=Nx(t);(i=this._stateElements.get(t))===null||i===void 0||i.forEach(s=>{s.removeState(t),r&&this.addEventElement(r,s)}),e.getStates().includes(t)||(e.addState(t),r&&e.removeState(r)),this._stateElements.set(t,[e])}removeEventElement(t,e){var i,r;if(this._disableTriggerEvent)return;e.removeState(t);const s=(r=(i=this._stateElements.get(t))===null||i===void 0?void 0:i.filter(o=>o!==e))!==null&&r!==void 0?r:[];this._stateElements.set(t,s);const a=Nx(t);a&&(s.length===0?this.clearEventElement(a,!1):this.addEventElement(a,e))}addEventElement(t,e){var i;if(this._disableTriggerEvent)return;e.getStates().includes(t)||e.addState(t);const r=(i=this._stateElements.get(t))!==null&&i!==void 0?i:[];r.push(e),this._stateElements.set(t,r)}clearEventElement(t,e){var i;if(!this._disableTriggerEvent&&((i=this._stateElements.get(t))===null||i===void 0||i.forEach(r=>{r.removeState(t)}),this._stateElements.set(t,[]),e)){const r=Nx(t);r&&this.clearEventElement(r,!1)}}reverseEventElement(t){if(this._disableTriggerEvent)return;const e=Nx(t);if(!e)return;const i=this.getStateMark(e);if(!i)return;const r=this.getEventElement(t);r.length&&(this.getEventElement(e).length||(r.length===1?i.forEach(s=>{s.getProduct().elements.filter(a=>a!==r[0]).forEach(a=>{this.addEventElement(e,a)})}):i.forEach(s=>{s.getProduct().elements.filter(a=>!r.includes(a)).forEach(a=>{this.addEventElement(e,a)})})))}startInteraction(t,e){const i=this._vgrammarInteractions.get(t);i&&i.forEach(r=>{r.start(e)})}resetInteraction(t,e){const i=this._vgrammarInteractions.get(t);i&&i.forEach(r=>{r.reset(e)})}}class hT{getOption(){return this._option}constructor(t){this._option=t,this.getCompiler=this._option.getCompiler}getVGrammarView(){var t;return(t=this.getCompiler())===null||t===void 0?void 0:t.getVGrammarView()}release(){this._option=null,this.getCompiler=null}}class XF extends hT{constructor(){super(...arguments),this.id=wp(),this._compiledProductId=null,this._depend=[]}getProduct(){if(z(this._product))return this._product;const t=this.getVGrammarView(),e=this.getProductId();return z(e)&&z(t)&&(this._product=this._lookupGrammar(e)),this._product}getProductId(){var t;return(t=this._compiledProductId)!==null&&t!==void 0?t:this.generateProductId()}getDepend(){return this._depend}setDepend(...t){this._depend=t}compile(t){this._compileProduct(t),this._afterCompile(t)}_afterCompile(t){var e;z(this._product)&&((e=this.getCompiler())===null||e===void 0||e.addGrammarItem(this))}updateDepend(){if(z(this._product)){const t=this.getDepend().map(e=>e.getProduct()).filter(z);return this._product.depend(t),t.length===this.getDepend().length}return!1}release(){this.removeProduct(),super.release(),this._depend=[]}removeProduct(t){this.getCompiler().removeGrammarItem(this,t),this._product=null,this._compiledProductId=null}}class c6t extends XF{getValue(){return this._value}getUpdateFunc(){return this._updateFunc}constructor(t,e,i,r){super(t),this.grammarType=Qh.signal,this.name=e,this._value=i,this._updateFunc=r}updateSignal(t,e){this._value=t,this._updateFunc=e,this.compile()}_compileProduct(){const t=this.getVGrammarView();if(t){if(!this.getProduct()){const e=this.getProductId();this._product=t.signal().id(e),this._compiledProductId=e}z(this._value)&&this._product.value(this._value),z(this._updateFunc)&&this._product.update(this._updateFunc)}}generateProductId(){return this.name}_lookupGrammar(t){var e;return(e=this.getCompiler().getVGrammarView())===null||e===void 0?void 0:e.getSignalById(t)}}class d6t extends hT{constructor(){super(...arguments),this._signalMap={}}getSignalMap(){return this._signalMap}getSignal(t){return this._signalMap[t]}updateSignal(t,e,i){this._signalMap[t]?this._signalMap[t].updateSignal(e,i):(this._signalMap[t]=new c6t(this._option,t,e,i),this._signalMap[t].compile())}compile(){Object.values(this._signalMap).forEach(t=>{t.compile()})}release(){super.release(),Object.values(this._signalMap).forEach(t=>{t.release()}),this._signalMap={}}}class git extends d6t{getStateMap(){return this._stateMap}_getDefaultStateMap(){return{}}constructor(t){super(t),t.stateKeyToSignalName?this.stateKeyToSignalName=t.stateKeyToSignalName:this.stateKeyToSignalName=()=>"state_signal",this.initStateMap()}initStateMap(t){this._stateMap=t??this._getDefaultStateMap()}compile(t){const e=t??this._stateMap;Object.keys(e).forEach(i=>{const r=this.stateKeyToSignalName(i),s=e[i];this.updateSignal(r,s)})}updateState(t,e){if(t&&(gt(this._stateMap,t),this.compile(t),!e))return this.getCompiler().renderNextTick()}}class mit extends git{constructor(){super(...arguments),this.id=wp(),this.stateKeyToSignalName=t=>`${Kt}_animate_${this.id}_${t}`}getAnimationStateSignalName(){return this.stateKeyToSignalName("animationState")}updateAnimateState(t,e){t===bn.update?this.updateState({animationState:{callback:(i,r)=>r.diffState}},e):t===bn.appear?this.updateState({animationState:{callback:(i,r)=>r.diffState==="exit"?bn.none:bn.appear}},e):this.updateState({animationState:{callback:(i,r)=>t}},e)}_getDefaultStateMap(){return{animationState:{callback:(t,e)=>e.diffState==="exit"?bn.exit:e.diffState==="update"?bn.update:bn.appear}}}}class cT{constructor(t){this._option=t,this.type=t.type}_initTheme(t,e){return this._theme=this.getTheme(t,e),this._mergeThemeToSpec(t,e)}getTheme(t,e){}transformSpec(t,e,i){this._transformSpecBeforeMergingTheme(t,e,i);const r=this._initTheme(t,e);return this._transformSpecAfterMergingTheme(r.spec,e,i),r}_transformSpecBeforeMergingTheme(t,e,i){}_transformSpecAfterMergingTheme(t,e,i){}_mergeThemeToSpec(t,e){const i=this._theme;if(this._shouldMergeThemeToSpec()){const r=this._getDefaultSpecFromChart(e),s=a=>Ut({},i,r,a);return ut(t)?{spec:t.map(a=>s(a)),theme:i}:{spec:s(t),theme:i}}return{spec:t,theme:i}}_shouldMergeThemeToSpec(){return!0}_getDefaultSpecFromChart(t){}}class KF extends hT{getSpec(){return this._spec||{}}getSpecPath(){var t;return(t=this._option)===null||t===void 0?void 0:t.specPath}getSpecInfoPath(){var t,e,i;return(e=(t=this._option)===null||t===void 0?void 0:t.specInfoPath)!==null&&e!==void 0?e:(i=this._option)===null||i===void 0?void 0:i.specPath}getData(){return this._data}get layout(){return this._layout}getOption(){return this._option}getMarks(){var t,e;return(e=(t=this._marks)===null||t===void 0?void 0:t.getMarks())!==null&&e!==void 0?e:[]}getMarkNameMap(){var t;return(t=this._marks)===null||t===void 0?void 0:t.getMarkNameMap()}getMarkSet(){return this._marks}getMarkInfoList(){return this.getMarks().map(t=>({type:t.type,name:t.name}))}getChart(){return this._option.getChart()}get _theme(){var t;return(t=this.getSpecInfo())===null||t===void 0?void 0:t.theme}constructor(t,e){var i;super(e),this.transformerConstructor=cT,this.type="null",this.modelType="null",this.userId=void 0,this._data=null,this._layout=null,this.specKey="",this._marks=new im,this._lastLayoutRect=null,this.id=wp(),this.userId=t.id,this._spec=t,this.effect={},this.event=new lT(e.eventDispatcher,e.mode),(i=e.map)===null||i===void 0||i.set(this.id,this)}_releaseEvent(){this.event.release()}created(){this.setAttrFromSpec()}init(t){}afterInit(){}getVisible(){var t;return((t=this._spec)===null||t===void 0?void 0:t.visible)!==!1}onLayoutStart(t,e,i){var r;(r=this._layout)===null||r===void 0||r.onLayoutStart(t,e,i)}onLayoutEnd(t){var e;(e=this._layout)===null||e===void 0||e.onLayoutEnd(t),this.getMarks().forEach(i=>i.updateLayoutState(!0,!0))}onEvaluateEnd(t){}onDataUpdate(){}beforeRelease(){}release(){var t;this._releaseEvent(),this._spec=void 0,this.getMarks().forEach(e=>e.release()),(t=this._data)===null||t===void 0||t.release(),this._data=null,this._marks.clear(),super.release()}updateSpec(t){const e=this._compareSpec(t,this._spec);return this._spec=t,e}_compareSpec(t,e){return{change:!1,reMake:!1,reRender:!1,reSize:!1,reCompile:!1}}reInit(t){t&&(this._spec=t),this.setAttrFromSpec()}updateLayoutAttribute(){}setAttrFromSpec(){var t;(t=this._layout)===null||t===void 0||t.setAttrFromSpec(this._spec,this._option.getChartViewRect())}_convertMarkStyle(t){return Object.assign({},t)}setMarkStyle(t,e,i,r){z(t)&&z(e)&&t.setStyle(this._convertMarkStyle(e),i,r)}initMarkStyleWithSpec(t,e,i){if(!z(t)||!z(e))return;const{style:r,state:s}=e,a=Object.assign({},e);r&&(a.style=this._convertMarkStyle(r)),s&&(a.state={},Object.keys(s).forEach(o=>{a.state[o]=this._convertMarkStyle(s[o])})),t.initStyleWithSpec(a,i)}stateKeyToSignalName(t,e){let i=`${Kt}_${this.modelType}_${this.type}_${this.id}_${t}`;return e&&(i+=`_${e}`),i}compileData(){var t;(t=this._data)===null||t===void 0||t.compile()}compileMarks(t){this.getMarks().forEach(e=>{e.compile({group:t})})}_createMark(t,e={}){const{type:i,name:r}=t,s=Z.createMark(i,r,Object.assign({model:this,map:this._option.map,getCompiler:this.getCompiler,globalScale:this._option.globalScale},e));return s==null||s.created(),s}_getDataIdKey(){}getColorScheme(){var t,e;return(e=(t=this._option).getTheme)===null||e===void 0?void 0:e.call(t).colorScheme}getSpecInfo(){var t,e,i;const r=(i=(e=(t=this._option).getSpecInfo)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:{};return S7t(r,this.getSpecInfoPath())}getSpecIndex(){const t=this.getSpecPath();if(!(t!=null&&t.length))return 0;const e=Number(t[t.length-1]);return isNaN(e)?0:e}}class p6t{getSpec(){return this._spec||{}}getLayoutStartPoint(){return this._layoutStartPoint}get layoutRectLevelMap(){return this._layoutRectLevelMap}get minWidth(){return this._minWidth}set minWidth(t){this._minWidth=t}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth=t}get minHeight(){return this._minHeight}set minHeight(t){this._minHeight=t}get maxHeight(){return this._maxHeight}set maxHeight(t){this._maxHeight=t}getLastComputeOutBounds(){return this._lastComputeOutBounds}get layoutOrient(){return this._layoutOrient}set layoutOrient(t){this._layoutOrient=t}get model(){return this._model}get type(){return this._model.type}constructor(t,e){var i;this.layoutClip=!1,this.autoIndent=!1,this._layoutStartPoint={x:0,y:0},this._layoutRect={width:0,height:0},this._layoutRectLevelMap={width:Ts,height:Ts},this._minWidth=null,this._maxWidth=null,this._minHeight=null,this._maxHeight=null,this._lastComputeRect=null,this._lastComputeOutBounds={x1:0,x2:0,y1:0,y2:0},this.getLayoutRect=()=>this._layoutRect,this.layoutType="normal",this._layoutOrient="left",this.layoutPaddingLeft=0,this.layoutPaddingTop=0,this.layoutPaddingRight=0,this.layoutPaddingBottom=0,this.layoutOffsetX=0,this.layoutOffsetY=0,this.layoutLevel=Wo.Region,this._model=t,this._option=e,this.layoutLevel=e.layoutLevel,this.layoutType=e.layoutType,e.layoutOrient&&(this.layoutOrient=e.layoutOrient),this._spec=(i=t==null?void 0:t.getSpec)===null||i===void 0?void 0:i.call(t)}_setLayoutAttributeFromSpec(t,e){var i,r,s,a;if(this._spec&&this._spec.visible!==!1){const o=Ru(t.padding),l=Wet(o,e,e);this.layoutPaddingLeft=l.left,this.layoutPaddingRight=l.right,this.layoutPaddingTop=l.top,this.layoutPaddingBottom=l.bottom,this._minHeight=F(t.minHeight)?(i=this._minHeight)!==null&&i!==void 0?i:null:Qn(t.minHeight,e.height,e),this._maxHeight=F(t.maxHeight)?(r=this._maxHeight)!==null&&r!==void 0?r:null:Qn(t.maxHeight,e.height,e),this._minWidth=F(t.minWidth)?(s=this._minWidth)!==null&&s!==void 0?s:null:Qn(t.minWidth,e.width,e),this._maxWidth=F(t.maxWidth)?(a=this._maxWidth)!==null&&a!==void 0?a:null:Qn(t.maxWidth,e.width,e),t.width&&this.setLayoutRect({width:Qn(t.width,e.width,e)},{width:gh}),t.height&&this.setLayoutRect({height:Qn(t.height,e.height,e)},{height:gh}),F(t.offsetX)||(this.layoutOffsetX=Qn(t.offsetX,e.width,e)),F(t.offsetY)||(this.layoutOffsetY=Qn(t.offsetY,e.height,e)),t.alignSelf&&(this.alignSelf=t.alignSelf)}}setAttrFromSpec(t,e){var i,r,s,a;this._spec=t,this.layoutType=(i=t.layoutType)!==null&&i!==void 0?i:this.layoutType,this.layoutLevel=(r=t.layoutLevel)!==null&&r!==void 0?r:this.layoutLevel,this.layoutOrient=(s=t.orient)!==null&&s!==void 0?s:this.layoutOrient,this._setLayoutAttributeFromSpec(t,e),this.layoutClip=(a=t.clip)!==null&&a!==void 0?a:this.layoutClip}onLayoutStart(t,e,i){this._setLayoutAttributeFromSpec(this._spec,e)}onLayoutEnd(t){}_getAbsoluteSpecValue(t){const e={top:null,bottom:null,left:null,right:null};return["top","bottom","left","right"].forEach(i=>{F(this._spec[i])||(e[i]=Qn(this._spec[i],i==="top"||i==="bottom"?t.height:t.width,t))}),e}absoluteLayoutInRect(t){const{top:e,bottom:i,left:r,right:s}=this._getAbsoluteSpecValue(t),a={width:t.width-this.layoutPaddingLeft-this.layoutPaddingRight,height:t.height-this.layoutPaddingTop-this.layoutPaddingBottom};F(r)||(a.width-=r),F(s)||(a.width-=s),F(e)||(a.height-=e),F(i)||(a.height-=i),this.setLayoutRect(a);const{width:o,height:l}=this.computeBoundsInRect(this.getLayoutRect());this.setLayoutRect({width:o,height:l});const u={x:t.x,y:t.y};this._spec.center===!0?(u.x=t.x+.5*t.width-.5*o,u.y=t.y+.5*t.height-.5*l):(F(r)?F(s)||(u.x=t.x+t.width-this.layoutPaddingRight-s-o):u.x=t.x+r+this.layoutPaddingLeft,F(e)?F(i)||(u.y=t.y+t.height-this.layoutPaddingBottom-i-l):u.y=t.y+e+this.layoutPaddingTop),this.setLayoutStartPosition(u)}setLayoutStartPosition(t){var e,i;this._option.transformLayoutPosition&&(t=this._option.transformLayoutPosition(t)),st(t.x)&&(this._layoutStartPoint.x=t.x),st(t.y)&&(this._layoutStartPoint.y=t.y),(i=(e=this._model).afterSetLayoutStartPoint)===null||i===void 0||i.call(e,this._layoutStartPoint)}setLayoutRect({width:t,height:e},i){var r,s,a,o;st(t)&&((r=i==null?void 0:i.width)!==null&&r!==void 0?r:Ts)>=this._layoutRectLevelMap.width&&(this._layoutRect.width=t,this._layoutRectLevelMap.width=(s=i==null?void 0:i.width)!==null&&s!==void 0?s:Ts),st(e)&&((a=i==null?void 0:i.height)!==null&&a!==void 0?a:Ts)>=this._layoutRectLevelMap.height&&(this._layoutRect.height=e,this._layoutRectLevelMap.height=(o=i==null?void 0:i.height)!==null&&o!==void 0?o:Ts),this.setRectInSpec(this._layoutRect)}getLayout(){return{x:this._layoutStartPoint.x,y:this._layoutStartPoint.y,width:this._layoutRect.width,height:this._layoutRect.height}}mergeLayoutRect({width:t,height:e}){const i={width:t,height:e};return this._layoutRectLevelMap.width>Ts&&(i.width=this._layoutRect.width),this._layoutRectLevelMap.height>Ts&&(i.height=this._layoutRect.height),i}getOrientPosAttribute(){return this._layoutOrient==="bottom"||this._layoutOrient==="top"?"x":"y"}getOrientSizeAttribute(){return this._layoutOrient==="bottom"||this._layoutOrient==="top"?"width":"height"}changeBoundsBySetting(t){return this._layoutRectLevelMap.width>Ts&&(t.x2=t.x1+this._layoutRect.width),this._layoutRectLevelMap.height>Ts&&(t.y2=t.y1+this._layoutRect.height),t.x1-=this._layoutStartPoint.x,t.x2-=this._layoutStartPoint.x,t.y1-=this._layoutStartPoint.y,t.y2-=this._layoutStartPoint.y,t}setRectInSpec(t){const e=Object.assign({},t);return this._layoutRectLevelMap.width<gh?(F(this._minWidth)||(e.width=Math.max(e.width,this._minWidth)),F(this._maxWidth)||(e.width=Math.min(e.width,this._maxWidth))):e.width=this._layoutRect.width,this._layoutRectLevelMap.height<gh?(F(this._minHeight)||(e.height=Math.max(e.height,this._minHeight)),F(this._maxHeight)||(e.height=Math.min(e.height,this._maxHeight))):e.height=this._layoutRect.height,e}computeBoundsInRect(t){if(this._lastComputeRect=t,!(this.layoutType!=="region-relative"&&this.layoutType!=="region-relative-overlap"||(this._layoutRectLevelMap.width!==gh||this.layoutOrient!=="left"&&this.layoutOrient!=="right")&&(this._layoutRectLevelMap.height!==gh||this.layoutOrient!=="bottom"&&this.layoutOrient!=="top")))return this._layoutRect;const e=Object.assign({},this._model.getBoundsInRect(this.setRectInSpec(t),t));this.changeBoundsBySetting(e),this.autoIndent&&e.x2-e.x1>0&&e.y2-e.y1>0&&(this._lastComputeOutBounds.x1=Math.ceil(-e.x1),this._lastComputeOutBounds.x2=Math.ceil(e.x2-t.width),this._lastComputeOutBounds.y1=Math.ceil(-e.y1),this._lastComputeOutBounds.y2=Math.ceil(e.y2-t.height));let i=this.setRectInSpec(fzt(e,t));return this._option.transformLayoutRect&&(i=this._option.transformLayoutRect(i)),i}getModelId(){return this._model.id}getModelVisible(){return this._model.getVisible()}}class vit extends KF{constructor(){super(...arguments),this.layoutType="normal",this.layoutLevel=0,this.layoutZIndex=0,this._forceLayoutTag=!1,this._layout=null,this._orient=null,this._layoutRect={width:0,height:0},this._layoutStartPos={x:0,y:0},this._isLayout=!0,this.getGraphicBounds=()=>this._layout?{x1:this._layout.getLayoutStartPoint().x,y1:this._layout.getLayoutStartPoint().y,x2:this._layout.getLayoutStartPoint().x+this._layout.getLayoutRect().width,y2:this._layout.getLayoutStartPoint().y+this._layout.getLayoutRect().height}:{x1:0,x2:0,y1:0,y2:0},this._transformLayoutRect=null,this._transformLayoutPosition=null}get layoutOrient(){return this._orient}set layoutOrient(t){this._orient=t,this._layout&&(this._layout.layoutOrient=t)}initLayout(){this.layoutType!=="none"&&(this._layout=new p6t(this,{layoutType:this.layoutType,layoutLevel:this.layoutLevel,layoutOrient:this._orient,transformLayoutRect:this._transformLayoutRect,transformLayoutPosition:this._transformLayoutPosition}),this._orient&&this._orient!=="radius"&&this._orient!=="angle"&&this._layout&&(this._layout.layoutOrient=this._orient))}onLayoutStart(t,e,i){this._isLayout=!0,super.onLayoutStart(t,e,i)}onLayoutEnd(t){super.onLayoutEnd(t),this.updateLayoutAttribute();const e=this.getLayoutRect();!this._forceLayoutTag&&mi(this._lastLayoutRect,e)||(this._lastLayoutRect=Object.assign({},e)),this._forceLayoutTag=!1,this._isLayout=!1}afterSetLayoutStartPoint(t){}_forceLayout(){var t;this._isLayout||(this._forceLayoutTag=!0,(t=this._option.globalInstance.getChart())===null||t===void 0||t.setLayoutTag(!0))}getLayoutStartPoint(){return this._layout?this._layout.getLayoutStartPoint():this._layoutStartPos}setLayoutStartPosition(t){return this._layout?this._layout.setLayoutStartPosition(t):this._layoutStartPos=gt(this._layoutStartPos,t)}getLayoutRect(){return this._layout?this._layout.getLayoutRect():this._layoutRect}setLayoutRect(t,e){return this._layout?this._layout.setLayoutRect(t):this._lastLayoutRect=gt(this._layoutRect,t)}getLastComputeOutBounds(){var t;return(t=this._layout)===null||t===void 0?void 0:t.getLastComputeOutBounds()}setAttrFromSpec(){var t,e,i,r,s;super.setAttrFromSpec(),this.layoutClip=(t=this._spec.clip)!==null&&t!==void 0?t:this.layoutClip,this.layoutZIndex=(e=this._spec.zIndex)!==null&&e!==void 0?e:this.layoutZIndex,this.layoutType=(i=this._spec.layoutType)!==null&&i!==void 0?i:this.layoutType,this._orient=(r=this._spec.orient)!==null&&r!==void 0?r:this._orient,this.layoutLevel=(s=this._spec.layoutLevel)!==null&&s!==void 0?s:this.layoutLevel}}class _it extends cT{_initTheme(t,e){return{spec:t,theme:this._theme}}}class Sg extends vit{getMaxWidth(){return this._layout.maxWidth}setMaxWidth(t){this._layout.maxWidth=t}getMaxHeight(){return this._layout.maxHeight}setMaxHeight(t){this._layout.maxHeight=t}getGroupMark(){return this._groupMark}getInteractionMark(){return this._interactionMark}getStackInverse(){return this._spec.stackInverse===!0}getStackSort(){return this._spec.stackSort===!0}constructor(t,e){var i;super(t,e),this.transformerConstructor=_it,this.modelType="region",this.specKey="region",this.type=Sg.type,this._series=[],this.layoutType="region",this.layoutZIndex=ai.Region,this.interaction=new h6t,this.seriesDataFilterOver=()=>{this.event.emit(Wt.regionSeriesDataFilterOver,{model:this,chart:this.getChart()}),this._series.forEach(r=>{r.getViewDataFilter()&&r.reTransformViewData()})},this.getBoundsInRect=()=>({x1:this._layout.getLayoutStartPoint().x,y1:this._layout.getLayoutStartPoint().y,x2:this._layout.getLayoutStartPoint().x+this._layout.getLayoutRect().width,y2:this._layout.getLayoutStartPoint().y+this._layout.getLayoutRect().height}),this.userId=t.id,this.coordinate=(i=t.coordinate)!==null&&i!==void 0?i:"cartesian",this._option.animation&&(this.animate=new mit({getCompiler:e.getCompiler})),this.interaction.setDisableActiveEffect(this._option.disableTriggerEvent)}_getClipDefaultValue(){var t,e,i,r;const s=this._option.getChart().getSpec(),a=(e=(t=s.dataZoom)===null||t===void 0?void 0:t.some)===null||e===void 0?void 0:e.call(t,l=>{var u;return((u=l.filterMode)!==null&&u!==void 0?u:"filter")==="axis"}),o=(r=(i=s.scrollBar)===null||i===void 0?void 0:i.some)===null||r===void 0?void 0:r.call(i,l=>{var u;return((u=l.filterMode)!==null&&u!==void 0?u:"axis")==="axis"});return!(!a&&!o)||this._layout.layoutClip}created(){var t;this.initLayout(),super.created();const e=(t=this._spec.clip)!==null&&t!==void 0?t:this._getClipDefaultValue();this._groupMark=this._createGroupMark("regionGroup",this.userId,this.layoutZIndex),this._interactionMark=this._createGroupMark("regionInteractionGroup",this.userId+"_interaction",ai.Interaction),Gt(this._spec.style)||(this._backgroundMark=this._createMark({type:"rect",name:"regionBackground"}),e&&(this._foregroundMark=this._createMark({type:"rect",name:"regionForeground"})),[this._backgroundMark,this._foregroundMark].forEach(i=>{i&&(i.created(),this.setMarkStyle(i,{width:()=>this.getLayoutRect().width,height:()=>this.getLayoutRect().height},"normal",kt.Built_In),this._groupMark.addMark(i))}),this._backgroundMark&&this._backgroundMark.setZIndex(0),this._foregroundMark&&this._foregroundMark.setZIndex(ai.Mark+1)),this.createTrigger()}_createGroupMark(t,e,i){var r,s;const a=this._createMark({type:"group",name:t});a.setUserId(e),a.setZIndex(i);const o=(r=this._spec.clip)!==null&&r!==void 0?r:this._getClipDefaultValue();return this.setMarkStyle(a,{x:()=>this.getLayoutStartPoint().x,y:()=>this.getLayoutStartPoint().y,width:()=>this.getLayoutRect().width,height:()=>this.getLayoutRect().height,clip:o},"normal",kt.Built_In),this.setMarkStyle(a,{cornerRadius:(s=this._spec.style)===null||s===void 0?void 0:s.cornerRadius},"normal",kt.User_Mark),this._marks.addMark(a),a}init(t){super.init(t),this.initMark(),this.initSeriesDataflow(),this.initInteraction(),this.initTrigger()}initMark(){this._initBackgroundMarkStyle(),this._initForegroundMarkStyle()}_initBackgroundMarkStyle(){var t,e;this._backgroundMark&&(this.setMarkStyle(this._backgroundMark,Object.assign({fillOpacity:!((t=this._spec.style)===null||t===void 0)&&t.fill?1:0},this._spec.style),"normal",kt.User_Mark),((e=this._spec.clip)!==null&&e!==void 0?e:this._getClipDefaultValue())&&this.setMarkStyle(this._backgroundMark,{strokeOpacity:0},"normal",kt.Built_In))}_initForegroundMarkStyle(){this._foregroundMark&&this.setMarkStyle(this._foregroundMark,Object.assign(Object.assign({},this._spec.style),{fillOpacity:0}),"normal",kt.User_Mark)}_compareSpec(t,e){const i=super._compareSpec(t,e);return mi(e==null?void 0:e.style,t==null?void 0:t.style)||(i.reMake=!0),i}reInit(t){super.reInit(t),this._initBackgroundMarkStyle(),this._initForegroundMarkStyle()}addSeries(t){t&&(this._series.includes(t)||this._series.push(t))}removeSeries(t){if(!t)return;const e=this._series.findIndex(i=>i===t);e>=0&&this._series.splice(e,1)}getSeries(t={}){return this._series.filter(e=>{var i,r;return(!t.name||(e==null?void 0:e.name)===t.name)&&(!t.userId||ot(t.userId).includes(e.userId))&&(!z(t.specIndex)||ot(t.specIndex).includes(e.getSpecIndex()))&&(!t.id||e.id===t.id)&&(!t.type||e.type===t.type)&&(!t.coordinateType||e.coordinate===t.coordinateType)&&(!t.dataName||((r=(i=e.getRawData)===null||i===void 0?void 0:i.call(e))===null||r===void 0?void 0:r.name)===t.dataName)})}getSeriesInName(t){return this.getSeries({name:t})[0]}getSeriesInUserId(t){return this.getSeries({userId:t})[0]}getSeriesInId(t){return this.getSeries({id:t})[0]}getSeriesInType(t){return this.getSeries({type:t})}getSeriesInCoordinateType(t){return this.getSeries({coordinateType:t})}getSeriesInDataName(t){return this.getSeries({dataName:t})}onRender(t){}initSeriesDataflow(){const t=this._series.map(e=>{var i;return(i=e.getViewDataFilter())!==null&&i!==void 0?i:e.getViewData()}).filter(e=>!!e);this._option.dataSet.multipleDataViewAddListener(t,"change",this.seriesDataFilterOver)}release(){super.release(),this._series=[]}createTrigger(){const t=Object.assign(Object.assign({},this._option),{model:this,interaction:this.interaction});this._trigger=new s6t(t)}initTrigger(){this._series.forEach(t=>{t.getMarksWithoutRoot().forEach(e=>{this._trigger.registerMark(e)})}),this._trigger.init()}initInteraction(){this._option.disableTriggerEvent||this._series.forEach(t=>{t.getMarksWithoutRoot().forEach(e=>{for(const i in F0)Gt(e.stateStyle[F0[i]])||this.interaction.registerMark(F0[i],e)})})}compileMarks(t){this.getMarks().forEach(e=>{var i;e.compile({group:t}),(i=e.getProduct())===null||i===void 0||i.configure({context:{model:this}}).layout((r,s,a,o)=>{})})}compile(){var t;(t=this.animate)===null||t===void 0||t.compile(),this.compileMarks()}onLayoutEnd(t){this._series.forEach(e=>e.onLayoutEnd(t)),super.onLayoutEnd(t)}}Sg.type="region",Sg.transformerConstructor=_it,Sg.specKey="region";function dT(n){const t=[],e=[],i=[];return n.forEach(r=>{F(r.getSpec().position)||r.getSpec().position==="start"?t.push(r):r.getSpec().position==="middle"?e.push(r):r.getSpec().position==="end"&&i.push(r)}),{startItems:t,endItems:i,middleItems:e}}function yit(n,t,e){t?n.forEach(i=>{const r=Gh(i),s=r.getLayoutStartPoint().y+r.getLayoutRect().height-i[0].getLayoutStartPoint().y,a=(e-s)/2;i.forEach(o=>{o.setLayoutStartPosition({x:o.getLayoutStartPoint().x,y:o.getLayoutStartPoint().y+a})})}):n.forEach(i=>{const r=Gh(i),s=r.getLayoutStartPoint().x+r.getLayoutRect().width-i[0].getLayoutStartPoint().x,a=(e-s)/2;i.forEach(o=>{o.setLayoutStartPosition({x:o.getLayoutStartPoint().x+a,y:o.getLayoutStartPoint().y})})})}function pT(n,t,e,i){let r;n.forEach((s,a)=>{s.length>1&&(r=e[a],s.forEach(o=>{if(!o.alignSelf||o.alignSelf==="start")return;const l=o.getLayoutStartPoint(),u=o.alignSelf==="middle"?.5:1,h=t?r-(o.getLayoutRect().width+o.layoutPaddingLeft+o.layoutPaddingRight):r-(o.getLayoutRect().height+o.layoutPaddingTop+o.layoutPaddingBottom);t?o.setLayoutStartPosition({x:l.x+i*h*u,y:l.y}):o.setLayoutStartPosition({x:l.x,y:l.y+i*h*u})}))})}function bC(n,t,e,i,r){if(n.length){let s=0;const a=r==="right",o=a?-1:1;let l=a?t.rightCurrent:t.leftCurrent,u=t.topCurrent;const h=[];let c=[];const d=[];n.forEach(p=>{const f=t.getItemComputeLayoutRect(p),g=p.computeBoundsInRect(f);p.setLayoutRect(g);const _=g.height+p.layoutPaddingTop+p.layoutPaddingBottom,v=g.width+p.layoutPaddingLeft+p.layoutPaddingRight,y=a?-g.width-p.layoutPaddingRight:p.layoutPaddingLeft;p.setLayoutStartPosition({x:l+p.layoutOffsetX+y,y:u+p.layoutOffsetY+p.layoutPaddingTop}),u+=_,u>e&&c.length?(d.push(s),l+=o*s,s=v,u=t.topCurrent+_,p.setLayoutStartPosition({x:l+p.layoutOffsetX+y,y:t.topCurrent+p.layoutOffsetY+p.layoutPaddingTop}),h.push(c),c=[p]):(s=Math.max(s,v),c.push(p))}),d.push(s),h.push(c),pT(h,!0,d,o),i&&yit(h,!0,e),a?t.rightCurrent=l+o*s:t.leftCurrent=l+o*s}}function bit(n,t,e,i){if(n.length){let r=0;const s=i==="right",a=s?-1:1;let o=s?t.rightCurrent:t.leftCurrent,l=t.bottomCurrent;const u=[];let h=[];const c=[];n.forEach(d=>{const p=t.getItemComputeLayoutRect(d),f=d.computeBoundsInRect(p);d.setLayoutRect(f);const g=f.height+d.layoutPaddingTop+d.layoutPaddingBottom,_=f.width+d.layoutPaddingLeft+d.layoutPaddingRight,v=s?-f.width-d.layoutPaddingRight:d.layoutPaddingLeft;l<g&&h.length?(c.push(r),o+=a*r,r=_,l=t.bottomCurrent,d.setLayoutStartPosition({x:o+d.layoutOffsetX+v,y:l+d.layoutOffsetY-f.height-d.layoutPaddingBottom}),u.push(h),h=[d]):(d.setLayoutStartPosition({x:o+d.layoutOffsetX+v,y:l+d.layoutOffsetY-f.height-d.layoutPaddingBottom}),r=Math.max(r,_),l-=g,h.push(d))}),c.push(r),u.push(h),pT(u,!0,c,a),s?t.rightCurrent=o+a*r:t.leftCurrent=o+a*r}}function xC(n,t,e,i,r){if(n.length){const s=r==="top",a=s?1:-1;let o=0,l=t.leftCurrent,u=s?t.topCurrent:t.bottomCurrent;const h=[];let c=[];const d=[];n.forEach(p=>{const f=t.getItemComputeLayoutRect(p),g=p.computeBoundsInRect(f);p.setLayoutRect(g);const _=g.height+p.layoutPaddingTop+p.layoutPaddingBottom,v=g.width+p.layoutPaddingLeft+p.layoutPaddingRight,y=s?p.layoutPaddingTop:-g.height-p.layoutPaddingBottom;p.setLayoutStartPosition({x:l+p.layoutOffsetX+p.layoutPaddingLeft,y:u+p.layoutOffsetY+y}),l+=v,l>e&&c.length?(d.push(o),l=t.leftCurrent+v,u+=a*o,o=_,p.setLayoutStartPosition({x:t.leftCurrent+p.layoutOffsetX+p.layoutPaddingLeft,y:u+p.layoutOffsetY+y}),h.push(c),c=[p]):(o=Math.max(o,_),c.push(p))}),d.push(o),h.push(c),pT(h,!1,d,a),i&&yit(h,!1,e),s?t.topCurrent=u+a*o:t.bottomCurrent=u+a*o}}function xit(n,t,e,i){if(n.length){const r=i==="top",s=r?1:-1;let a=0,o=t.rightCurrent,l=r?t.topCurrent:t.bottomCurrent;const u=[];let h=[];const c=[];n.forEach(d=>{const p=t.getItemComputeLayoutRect(d),f=d.computeBoundsInRect(p);d.setLayoutRect(f);const g=f.height+d.layoutPaddingTop+d.layoutPaddingBottom,_=f.width+d.layoutPaddingLeft+d.layoutPaddingRight,v=r?d.layoutPaddingTop:-f.height-d.layoutPaddingBottom;o<_&&h.length?(o=t.rightCurrent,l+=s*a,a=g,d.setLayoutStartPosition({x:t.rightCurrent+d.layoutOffsetX-f.width-d.layoutPaddingRight,y:l+d.layoutOffsetY+v}),u.push(h),h=[d]):(h.push(d),d.setLayoutStartPosition({x:o+d.layoutOffsetX-f.width-d.layoutPaddingRight,y:l+d.layoutOffsetY+v}),a=Math.max(a,g),o-=_)}),c.push(a),u.push(h),pT(u,!1,c,s),r?t.topCurrent=l+s*a:t.bottomCurrent=l+s*a}}function f6t(n,t,e){const{startItems:i,middleItems:r,endItems:s}=dT(n);i.length&&bC(i,t,e,!1,"left"),r.length&&bC(r,t,e,!0,"left"),s.length&&bit(s,t,e,"left")}function g6t(n,t,e){const{startItems:i,middleItems:r,endItems:s}=dT(n);i.length&&bC(i,t,e,!1,"right"),r.length&&bC(r,t,e,!0,"right"),s.length&&bit(s,t,e,"right")}function m6t(n,t,e){const{startItems:i,middleItems:r,endItems:s}=dT(n);i.length&&xC(i,t,e,!1,"top"),r.length&&xC(r,t,e,!0,"top"),s.length&&xit(s,t,e,"top")}function v6t(n,t,e){const{startItems:i,middleItems:r,endItems:s}=dT(n);i.length&&xC(i,t,e,!1,"bottom"),r.length&&xC(r,t,e,!0,"bottom"),s.length&&xit(s,t,e,"bottom")}let qF=class{constructor(t,e){this.leftCurrent=0,this.topCurrent=0,this.rightCurrent=0,this.bottomCurrent=0,this._onError=e==null?void 0:e.onError}_layoutInit(t,e,i,r){this._chartLayoutRect=i,this._chartViewBox=r,this.leftCurrent=i.x,this.topCurrent=i.y,this.rightCurrent=i.x+i.width,this.bottomCurrent=i.height+i.y,e.sort((s,a)=>a.layoutLevel-s.layoutLevel)}_layoutNormalItems(t){this.layoutNormalInlineItems(t.filter(e=>e.layoutType==="normal-inline")),this.layoutNormalItems(t.filter(e=>e.layoutType==="normal"))}_groupItems(t){const e=t.filter(o=>o.layoutType==="region"),i=t.filter(o=>o.layoutType==="region-relative"),r=t.filter(o=>o.layoutType==="region-relative-overlap"),s=i.concat(r),a={left:{items:[],rect:{width:0,height:0}},right:{items:[],rect:{width:0,height:0}},top:{items:[],rect:{width:0,height:0}},bottom:{items:[],rect:{width:0,height:0}},z:{items:[],rect:{width:0,height:0}}};return r.forEach(o=>{a[o.layoutOrient].items.push(o)}),{regionItems:e,relativeItems:i,relativeOverlapItems:r,allRelatives:s,overlapItems:a}}layoutItems(t,e,i,r){this._layoutInit(t,e,i,r),this._layoutNormalItems(e);const s={left:this.leftCurrent,top:this.topCurrent,right:this.rightCurrent,bottom:this.bottomCurrent},{regionItems:a,relativeItems:o,relativeOverlapItems:l,allRelatives:u,overlapItems:h}=this._groupItems(e);this.layoutRegionItems(a,o,l,h),this._processAutoIndent(a,o,l,h,u,s),this.layoutAbsoluteItems(e.filter(c=>c.layoutType==="absolute"))}_processAutoIndent(t,e,i,r={left:{items:[],rect:{width:0,height:0}},right:{items:[],rect:{width:0,height:0}},top:{items:[],rect:{width:0,height:0}},bottom:{items:[],rect:{width:0,height:0}},z:{items:[],rect:{width:0,height:0}}},s,a){if(s.some(o=>o.autoIndent)){const{top:o,bottom:l,left:u,right:h}=this._checkAutoIndent(s,a);(o||l||u||h)&&(this.topCurrent=a.top+o,this.bottomCurrent=a.bottom-l,this.leftCurrent=a.left+u,this.rightCurrent=a.right-h,this.layoutRegionItems(t,e,i,r))}}layoutNormalItems(t){t.forEach(e=>{const i=this.getItemComputeLayoutRect(e),r=e.computeBoundsInRect(i);e.setLayoutRect(r),e.layoutOrient==="left"?(e.setLayoutStartPosition({x:this.leftCurrent+e.layoutOffsetX+e.layoutPaddingLeft,y:this.topCurrent+e.layoutOffsetY+e.layoutPaddingTop}),this.leftCurrent+=r.width+e.layoutPaddingLeft+e.layoutPaddingRight):e.layoutOrient==="top"?(e.setLayoutStartPosition({x:this.leftCurrent+e.layoutOffsetX+e.layoutPaddingLeft,y:this.topCurrent+e.layoutOffsetY+e.layoutPaddingTop}),this.topCurrent+=r.height+e.layoutPaddingTop+e.layoutPaddingBottom):e.layoutOrient==="right"?(e.setLayoutStartPosition({x:this.rightCurrent+e.layoutOffsetX-r.width-e.layoutPaddingRight,y:this.topCurrent+e.layoutOffsetY+e.layoutPaddingTop}),this.rightCurrent-=r.width+e.layoutPaddingLeft+e.layoutPaddingRight):e.layoutOrient==="bottom"&&(e.setLayoutStartPosition({x:this.leftCurrent+e.layoutOffsetX+e.layoutPaddingRight,y:this.bottomCurrent+e.layoutOffsetY-r.height-e.layoutPaddingBottom}),this.bottomCurrent-=r.height+e.layoutPaddingTop+e.layoutPaddingBottom)})}layoutNormalInlineItems(t){const e=t.filter(l=>l.layoutOrient==="left"),i=t.filter(l=>l.layoutOrient==="right"),r=t.filter(l=>l.layoutOrient==="top"),s=t.filter(l=>l.layoutOrient==="bottom"),a=this._chartLayoutRect.width+this._chartLayoutRect.x,o=this._chartLayoutRect.height+this._chartLayoutRect.y;e.length&&f6t(e,this,o),r.length&&m6t(r,this,a),i.length&&g6t(i,this,o),s.length&&v6t(s,this,a)}_layoutRelativeOverlap(t,e){e.items.forEach(i=>{const r=this.getItemComputeLayoutRect(i),s=i.computeBoundsInRect(r);e.rect.width=Math.max(s.width+i.layoutPaddingLeft+i.layoutPaddingRight,e.rect.width),e.rect.height=Math.max(s.height+i.layoutPaddingTop+i.layoutPaddingBottom,e.rect.height)}),e.items.forEach(i=>{i.setLayoutRect(e.rect),t==="left"?i.setLayoutStartPosition({x:this.leftCurrent+i.layoutOffsetX}):t==="right"?i.setLayoutStartPosition({x:this.rightCurrent-e.rect.width+i.layoutOffsetX}):t==="top"?i.setLayoutStartPosition({x:this.topCurrent+i.layoutOffsetY}):i.setLayoutStartPosition({x:this.bottomCurrent-e.rect.height+i.layoutOffsetY})}),t==="left"?this.leftCurrent+=e.rect.width:t==="right"?this.rightCurrent-=e.rect.width:t==="top"?this.topCurrent+=e.rect.height:this.bottomCurrent-=e.rect.height}_layoutRelativeItem(t,e){const i=t.computeBoundsInRect(e);t.layoutOrient==="left"||t.layoutOrient==="right"?t.setLayoutRect({width:i.width}):t.setLayoutRect({height:i.height}),t.layoutOrient==="left"?(t.setLayoutStartPosition({x:this.leftCurrent+t.layoutOffsetX+t.layoutPaddingLeft}),this.leftCurrent+=i.width+t.layoutPaddingLeft+t.layoutPaddingRight):t.layoutOrient==="right"?(this.rightCurrent-=i.width+t.layoutPaddingLeft+t.layoutPaddingRight,t.setLayoutStartPosition({x:this.rightCurrent+t.layoutOffsetX+t.layoutPaddingLeft})):t.layoutOrient==="top"?(t.setLayoutStartPosition({y:this.topCurrent+t.layoutOffsetY+t.layoutPaddingTop}),this.topCurrent+=i.height+t.layoutPaddingTop+t.layoutPaddingBottom):t.layoutOrient==="bottom"&&(this.bottomCurrent-=i.height+t.layoutPaddingTop+t.layoutPaddingBottom,t.setLayoutStartPosition({y:this.bottomCurrent+t.layoutOffsetY+t.layoutPaddingTop}))}_layoutRegionItem(t,e,i){const r=Math.max(Math.min(e,...t.map(a=>{var o;return(o=a.maxWidth)!==null&&o!==void 0?o:Number.MAX_VALUE})),0),s=Math.max(Math.min(i,...t.map(a=>{var o;return(o=a.maxHeight)!==null&&o!==void 0?o:Number.MAX_VALUE})),0);return t.forEach(a=>{a.setLayoutRect({width:r,height:s}),a.setLayoutStartPosition({x:this.leftCurrent+a.layoutOffsetX+a.layoutPaddingLeft,y:this.topCurrent+a.layoutOffsetY+a.layoutPaddingTop})}),{regionHeight:s,regionWidth:r}}layoutRegionItems(t,e,i,r={left:{items:[],rect:{width:0,height:0}},right:{items:[],rect:{width:0,height:0}},top:{items:[],rect:{width:0,height:0}},bottom:{items:[],rect:{width:0,height:0}},z:{items:[],rect:{width:0,height:0}}}){let s=this.rightCurrent-this.leftCurrent,a=this.bottomCurrent-this.topCurrent;e.filter(u=>u.layoutOrient==="left"||u.layoutOrient==="right").forEach(u=>{this._layoutRelativeItem(u,this.getItemComputeLayoutRect(u))}),this._layoutRelativeOverlap("left",r.left),this._layoutRelativeOverlap("right",r.right),s=this.rightCurrent-this.leftCurrent,e.filter(u=>u.layoutOrient==="top"||u.layoutOrient==="bottom").forEach(u=>{this._layoutRelativeItem(u,this.getItemComputeLayoutRect(u))}),this._layoutRelativeOverlap("top",r.top),this._layoutRelativeOverlap("bottom",r.bottom),a=this.bottomCurrent-this.topCurrent;const{regionWidth:o,regionHeight:l}=this._layoutRegionItem(t,s,a);e.concat(i).forEach(u=>{if(["left","right"].includes(u.layoutOrient)){const h=this.filterRegionsWithID(t,u.layoutBindRegionID[0]);u.setLayoutRect({height:h.getLayoutRect().height}),u.setLayoutStartPosition({y:h.getLayoutStartPoint().y+u.layoutOffsetY+u.layoutPaddingTop}),u.layoutOrient==="right"&&u.setLayoutStartPosition({x:u.getLayoutStartPoint().x+o-s})}else if(["top","bottom"].includes(u.layoutOrient)){const h=this.filterRegionsWithID(t,u.layoutBindRegionID[0]);u.setLayoutRect({width:h.getLayoutRect().width}),u.setLayoutStartPosition({x:h.getLayoutStartPoint().x+u.layoutOffsetX+u.layoutPaddingLeft}),u.layoutOrient==="bottom"&&u.setLayoutStartPosition({y:u.getLayoutStartPoint().y+l-a})}})}layoutAbsoluteItems(t){t.forEach(e=>{e.absoluteLayoutInRect(this._chartLayoutRect)})}filterRegionsWithID(t,e){var i;const r=t.find(s=>s.getModelId()===e);return r||((i=this._onError)!==null&&i!==void 0?i:ip)("can not find target region item, invalid id"),r}getItemComputeLayoutRect(t){return{width:this.rightCurrent-this.leftCurrent-t.layoutPaddingLeft-t.layoutPaddingRight,height:this.bottomCurrent-this.topCurrent-t.layoutPaddingTop-t.layoutPaddingBottom}}_checkAutoIndent(t,e){const i={top:0,left:0,bottom:0,right:0};return t.forEach(r=>{if(!r.getModelVisible()||!r.autoIndent)return;const s=r.layoutOrient==="left"||r.layoutOrient==="right",a=r.getLastComputeOutBounds(),o=this._getOutInLayout(a,r,e);s?(i.top=Math.max(i.top,o.top),i.bottom=Math.max(i.bottom,o.bottom)):(i.left=Math.max(i.left,o.left),i.right=Math.max(i.right,o.right))}),i}_getOutInLayout(t,e,i){const{x:r,y:s}=e.getLayoutStartPoint(),{width:a,height:o}=e.getLayoutRect();return{left:i.left-(r-t.x1),right:r+a+t.x2-i.right,top:i.top-(s-t.y1),bottom:s+o+t.y2-i.bottom}}};qF.type="base";const _6t=["line","area","trail"];function VE(n){return _6t.includes(n)}class y6t extends git{getStateInfoList(){return this._stateInfoList}constructor(t,e){super(t),this._stateInfoList=[],this._mark=e}_getDefaultStateMap(){return{markUpdateRank:1}}getStateInfo(t){return this._stateInfoList.find(e=>e.stateValue===t)}addStateInfo(t){if(this.getStateInfo(t.stateValue))return;t.level=t.level||0;let e=!0;for(let i=0;i<this._stateInfoList.length;i++){const r=this._stateInfoList[i].level;if(r&&r>t.level){this._stateInfoList.splice(i,0,t),e=!1;break}}e&&this._stateInfoList.push(t)}_clearStateBeforeSet(t){t.datums=null,t.items=null,t.fields=null,t.filter=null}changeStateInfo(t){const e=this.getStateInfo(t.stateValue);if(e){if(t.datums!==void 0&&(this._clearStateBeforeSet(e),e.datums=t.datums,e.datumKeys=t.datumKeys),t.items!==void 0&&(this._clearStateBeforeSet(e),e.items=t.items),t.fields!==void 0)if(this._clearStateBeforeSet(e),t.fields===null)e.fields=t.fields;else{e.fields=e.fields||{};for(const i in t.fields){const r=t.fields[i];e.fields[i]=e.fields[i]||{};const s=e.fields[i];z(r.domain)&&(s.domain=r.domain),z(r.type)&&(s.type=r.type)}}t.filter&&(this._clearStateBeforeSet(e),e.filter=t.filter)}else this.addStateInfo(t)}clearStateInfo(t){t.forEach(e=>{this.getStateInfo(e)&&this.changeStateInfo({stateValue:e,datumKeys:null,datums:null,fields:null,items:null,filter:null,cache:{}})})}checkOneState(t,e,i,r){var s;r=Si(VE)?r:!t.mark||VE(t.mark.markType);let a=!1,o=!1;if(z(i.datums)&&i.datums.length>0)a=this.checkDatumState(i,e,r),o=!0;else if(i.items)a=(s=this.checkItemsState(i,t))!==null&&s!==void 0&&s,o=!0;else if(i.fields)a=this.checkFieldsState(i,e,t,r),o=!0;else if(!a&&i.filter){const l={mark:this._mark,renderNode:t,type:t.mark.markType};a=i.filter(e,l),o=!0}return o?a?"in":"out":"skip"}checkState(t,e){const i=t.getStates().filter(s=>l6t(s)).map(s=>[s,10]),r=!t.mark||VE(t.mark.markType);for(let s=0;s<this._stateInfoList.length;s++){const a=this._stateInfoList[s],o=this.checkOneState(t,e,a,r);o!=="skip"&&o==="in"&&i.push([a.stateValue,a.level])}return i.map(s=>s[0])}checkDatumState(t,e,i){let r=!1;const s=i?e[0]:e;if(ut(t.datums)){const a=t.datumKeys||Object.keys(t.datums[0]).filter(o=>!o.startsWith(Kt));r=t.datums.some(o=>i&&ut(o==null?void 0:o.items)?a.every(l=>{var u,h;return((h=(u=o==null?void 0:o.items)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h[l])===(s==null?void 0:s[l])}):a.every(l=>(o==null?void 0:o[l])===(s==null?void 0:s[l])))}else ae(t.datums)?r=(t.datumKeys||Object.keys(t.datums).filter(a=>!a.startsWith(Kt))).every(a=>{var o,l;return i?((o=t.datums.items)===null||o===void 0?void 0:o[0][a])===s[a]:((l=t.datums)===null||l===void 0?void 0:l[a])===s[a]}):r=e===t.datums;return r}checkItemsState(t,e){var i;return(i=t.items)===null||i===void 0?void 0:i.includes(e)}checkFieldsState(t,e,i,r){var s;let a=!0;for(const o in t.fields){const l=t.fields[o],u=l.type,h=l.domain,c=r?(s=e[0])===null||s===void 0?void 0:s[o]:e[o];if(ti(u)&&h.length>1){if(this.checkLinearFieldState(h,o,e,i,r)){a=!1;break}a=!0}else{if(!h.some(d=>d===c)){a=!1;break}a=!0}}return a}checkLinearFieldState(t,e,i,r,s){var a;const o=s?(a=i[0])===null||a===void 0?void 0:a[e]:i[e];return o<t[0]||o>t[t.length-1]}updateLayoutState(t){return this._stateMap.markUpdateRank++,this.updateState({markUpdateRank:this._stateMap.markUpdateRank},t)}compileState(t,e){t.state({callback:(i,r)=>this.checkState(r,i)},e)}}class Cl extends XF{getDataView(){return this._data}setDataView(t){this._data=t}getLatestData(){var t;return(t=this._data)===null||t===void 0?void 0:t.latestData}constructor(t,e){super(t),this.grammarType=Qh.data,this._data=null,this._data=e}release(){super.release(),this._data=null}updateData(t){const e=this.getProduct(),i=this.getLatestData();if(e&&i&&(e.values(i),!t))return this.getCompiler().renderNextTick()}_compileProduct(){const t=this.getLatestData();F(t)||(F(this.getProduct())?this._initProduct(t):this._product.values(t))}_initProduct(t){var e,i;const r=this.getVGrammarView();if(!r||!t)return;const s=this.getProductId();this._product=(i=(e=r==null?void 0:r.data)===null||e===void 0?void 0:e.call(r,t))===null||i===void 0?void 0:i.id(s),this._compiledProductId=s}generateProductId(){var t;return`${(t=this.getDataView())===null||t===void 0?void 0:t.name}`}_lookupGrammar(t){var e,i;return(i=(e=this.getCompiler().getVGrammarView())===null||e===void 0?void 0:e.getDataById)===null||i===void 0?void 0:i.call(e,t)}}class b6t extends Cl{constructor(t){super(t),this._mark=t.mark}setCompiledProductId(t){this._compiledProductId=t}generateProductId(){const t=super.generateProductId();return z(t)?t:`${Kt}_markData_${this._mark.id}`}_compileProduct(){var t;const e=(t=this._data)===null||t===void 0?void 0:t.latestData;F(e)||z(this.getProduct())||this._initProduct(e)}}var v$=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};class x6t extends XF{getSkipTheme(){return this._skipTheme}setSkipTheme(t){this._skipTheme=t}getSupport3d(){return this._support3d}setSupport3d(t){this._support3d=t}getFacet(){return this._facet}setFacet(t){this._facet=t}getInteractive(){return this._interactive}setInteractive(t){this._interactive=t}getZIndex(){return this._zIndex}setZIndex(t){this._zIndex=t}getVisible(){return this._visible}setVisible(t){this._visible=t}getUserId(){return this._userId}setUserId(t){z(t)&&(this._userId=t)}getDataView(){var t;return(t=this._data)===null||t===void 0?void 0:t.getDataView()}setDataView(t,e){F(this._data)&&this.initMarkData(Object.assign(Object.assign({},this._option),{mark:this})),z(e)&&this._data.setCompiledProductId(e),this._data.setDataView(t)}getData(){return this._data}setData(t){this._data=t}hasState(t){return t in this.state.getStateMap()}getState(t){return this.state.getStateMap()[t]}getAnimationConfig(){return this._animationConfig}setAnimationConfig(t){this._animationConfig=t}setSkipBeforeLayouted(t){this._skipBeforeLayouted=t}getSkipBeforeLayouted(){return this._skipBeforeLayouted}getMorph(){return this._morph}setMorph(t){this._morph=t}getMorphKey(){return this._morphKey}setMorphKey(t){this._morphKey=t}getMorphElementKey(){return this._morphElementKey}setMorphElementKey(t){this._morphElementKey=t}getGroupKey(){return this._groupKey}setGroupKey(t){this._groupKey=t}getProgressiveConfig(){return this._progressiveConfig}setProgressiveConfig(t){this._progressiveConfig=t}setCustomizedShapeCallback(t){this._setCustomizedShape=t}setEnableSegments(t){this._enableSegments=t}getClip(){return this._clip}setClip(t){this._clip=t}setStateSortCallback(t){this._stateSort=t}constructor(t,e,i){super(t),this.grammarType=Qh.mark,this.type=void 0,this.name="mark",this._interactive=!0,this._zIndex=ai.Mark,this._visible=!0,this.stateStyle={},this._unCompileChannel={},this._skipBeforeLayouted=!1,this._morph=!1,this.name=e,this.model=i,this.key=t.key,this.state=new y6t(Object.assign(Object.assign({},t),{stateKeyToSignalName:this.stateKeyToSignalName.bind(this)}),this),this._option.support3d&&this.setSupport3d(!0),this._option.skipTheme&&this.setSkipTheme(!0),this._event=new lT(i.getOption().eventDispatcher,i.getOption().mode)}setTransform(t){this._transform=t}initMarkData(t){this._data=new b6t(t)}stateKeyToSignalName(t){return`${Kt}_${this.type}_${this.id}_${t}`}getAttribute(t,e,i,r){}_compileProduct(t){const e=this.getProduct();if(!this.getVisible())return void(z(e)&&this.removeProduct());z(e)||this.getCompiler().isInited&&(this._initProduct(t==null?void 0:t.group),F(this._product)||(this.compileSignal(),this.compileData(),this.compileState(),this.compileEncode(),this.compileAnimation(),this.compileContext(),this.compileTransform()))}_initProduct(t){const e=this.getVGrammarView(),i=this.getProductId();this._product=e.mark(this.type,t??e.rootMark).id(i),this._compiledProductId=i}generateProductId(){return this._userId?`${this._userId}`:`${this.name}_${this.id}`}compileData(){var t;if(F(this._data))return;this._data.compile();const e=this._data.getProduct();z(this._product)&&z(e)&&this._product.join(e,this.key,void 0,(t=this._groupKey)!==null&&t!==void 0?t:this._facet)}updateStaticEncode(){if(!this._product)return;const{enterStyles:t,updateStyles:e}=this._separateStyle();this._product.encodeState("group",t,!0),this._product.encode(e,!0)}_separateStyle(){const t=this.stateStyle,e=Bt.STATE_NORMAL,i=t[e],r=(v$(t,[typeof e=="symbol"?e:e+""]),this._option.noSeparateStyle?null:{}),s={};return Object.keys(i).forEach(a=>{this._unCompileChannel[a]||(this._option.noSeparateStyle||a6t(a,i,this.getFacet())?s[a]={callback:this.compileCommonAttributeCallback(a,"normal"),dependency:[this.stateKeyToSignalName("markUpdateRank")]}:r[a]=this.compileCommonAttributeCallback(a,"normal"))}),{enterStyles:r,updateStyles:s}}compileEncode(){const t=this.stateStyle,e=Bt.STATE_NORMAL,i=(t[e],v$(t,[typeof e=="symbol"?e:e+""])),{enterStyles:r,updateStyles:s}=this._separateStyle();this._product.encode(s,!0),this._product.encodeState("group",r,!0),Object.keys(i).forEach(a=>{const o={};Object.keys(i[a]).forEach(l=>{this._unCompileChannel[l]||(o[l]={callback:this.compileCommonAttributeCallback(l,a),dependency:[this.stateKeyToSignalName("markUpdateRank")]})}),this._product.encodeState(a,o,!0)}),this._skipBeforeLayouted&&this._product.layout({skipBeforeLayouted:this._skipBeforeLayouted})}compileState(){this.state.compileState(this._product,this._stateSort)}compileAnimation(){var t,e,i,r;if(this._animationConfig){let s;if(this.type==="component")s=(t=this.model.animate)===null||t===void 0?void 0:t.getAnimationStateSignalName();else{const a=(i=(e=this.model).getRegion)===null||i===void 0?void 0:i.call(e);s=(r=a==null?void 0:a.animate)===null||r===void 0?void 0:r.getAnimationStateSignalName()}this._product.animation(this._animationConfig),this._product.animationState({callback:(a,o,l)=>{var u;return(u=l[s])===null||u===void 0?void 0:u.callback(a,o)},dependency:s}),this._animationConfig.normal&&(this._animationConfig.appear?this._event.on(Ht.ANIMATION_END,({event:a})=>{a.mark===this.getProduct()&&a.animationState===bn.appear&&this.runAnimationByState(bn.normal)}):this._event.on(Ht.AFTER_DO_RENDER,()=>{this.runAnimationByState(bn.normal)}))}}compileContext(){const t={interactive:this.getInteractive(),zIndex:this.getZIndex(),context:{markId:this.id,modelId:this.model.id,markUserId:this._userId,modelUserId:this.model.userId},skipTheme:this.getSkipTheme(),support3d:this.getSupport3d(),enableSegments:!!this._enableSegments,clip:!!this._clip||this._clip!==!1&&void 0,clipPath:this._clip||void 0};this._progressiveConfig&&(t.progressiveStep=this._progressiveConfig.progressiveStep,t.progressiveThreshold=this._progressiveConfig.progressiveThreshold,t.large=this._progressiveConfig.large,t.largeThreshold=this._progressiveConfig.largeThreshold),t.morph=this._morph,t.morphKey=this._morphKey,t.morphElementKey=this._morphElementKey,this._setCustomizedShape&&(t.setCustomizedShape=this._setCustomizedShape),this._product.configure(t)}compileSignal(){this.state.compile()}_computeAttribute(t,e){return(i,r)=>{}}compileCommonAttributeCallback(t,e){const i=this._computeAttribute(t,e),r={mark:null,parent:null,element:null};return(s,a)=>(r.mark=a.mark,r.parent=a.mark.group,r.element=a,i(s,r))}compileTransform(){var t;!((t=this._transform)===null||t===void 0)&&t.length&&this.getProduct().transform(this._transform)}_lookupGrammar(t){var e;return(e=this.getCompiler().getVGrammarView())===null||e===void 0?void 0:e.getMarkById(t)}updateState(t,e){return this.state.updateState(t,e)}updateLayoutState(t,e){return e&&this.getMarks().length>0&&this.getMarks().forEach(i=>i.state.updateLayoutState(!0)),this.state.updateLayoutState(t)}updateMarkState(t){if(!this._product)return;const e=this.state.getStateInfo(t);this._product.elements.forEach(i=>{this.state.checkOneState(i,i.getDatum(),e)==="in"?i.addState(t):i.removeState(t)})}getMarks(){return[]}runAnimationByState(t){var e,i;return(i=(e=this.getProduct())===null||e===void 0?void 0:e.animate)===null||i===void 0?void 0:i.runAnimationByState(t)}stopAnimationByState(t){var e,i;return(i=(e=this.getProduct())===null||e===void 0?void 0:e.animate)===null||i===void 0?void 0:i.stopAnimationByState(t)}pauseAnimationByState(t){var e,i;return(i=(e=this.getProduct())===null||e===void 0?void 0:e.animate)===null||i===void 0?void 0:i.pauseAnimationByState(t)}resumeAnimationByState(t){var e,i;return(i=(e=this.getProduct())===null||e===void 0?void 0:e.animate)===null||i===void 0?void 0:i.resumeAnimationByState(t)}getProductElements(){const t=this.getProduct();if(t)return t.elements}release(){super.release(),this.state.release()}}var _$=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};class Sr extends x6t{constructor(t,e){var i;super(e,t,e.model),this._extensionChannel={},this._computeExChannel={},this._attributeContext=e.attributeContext,(i=e.map)===null||i===void 0||i.set(this.id,this)}created(){this._initStyle()}initStyleWithSpec(t,e){t&&(z(t.id)&&(this._userId=t.id),Si(t.interactive)&&(this._interactive=t.interactive),z(t.zIndex)&&this.setZIndex(t.zIndex),Si(t.visible)&&this.setVisible(t.visible),this._initSpecStyle(t,this.stateStyle,e))}_transformStyleValue(t,e){if(t.scale){const i=t.scale,r=i.range();return i.range(r.map(e)),t}return typeof t=="function"?(...i)=>e(t(...i)):e(t)}convertAngleToRadian(t){return this._transformStyleValue(t,qe)}isUserLevel(t){return[kt.User_Mark,kt.User_Series,kt.User_Chart].includes(t)}setStyle(t,e="normal",i=0,r=this.stateStyle){if(F(t))return;r[e]===void 0&&(r[e]={});const s=this.isUserLevel(i);Object.keys(t).forEach(a=>{let o=t[a];F(o)||(o=this._filterAttribute(a,o,e,i,s,r),this.setAttribute(a,o,e,i,r))})}getStyle(t,e="normal"){var i;return(i=this.stateStyle[e][t])===null||i===void 0?void 0:i.style}_filterAttribute(t,e,i,r,s,a=this.stateStyle){let o=this._styleConvert(e);if(s)switch(t){case"angle":o=this.convertAngleToRadian(o);break;case"innerPadding":case"outerPadding":o=this._transformStyleValue(o,l=>-l)}return o}setReferer(t,e,i,r=this.stateStyle){var s;if(t)if(e&&i){const a=(s=r[i])!==null&&s!==void 0?s:{[e]:{}};r[i][e]=Object.assign(Object.assign({},a[e]),{referer:t})}else Object.entries(r).forEach(([a,o])=>{Object.entries(o).forEach(([l,u])=>{r[a][l].referer=t})})}setPostProcess(t,e,i="normal"){var r;!((r=this.stateStyle[i])===null||r===void 0)&&r[t]&&(this.stateStyle[i][t].postProcess=e)}getAttribute(t,e,i="normal",r){return this._computeAttribute(t,i)(e,r)}setAttribute(t,e,i="normal",r=0,s=this.stateStyle){var a;s[i]===void 0&&(s[i]={}),s[i][t]===void 0&&(s[i][t]={level:r,style:e,referer:void 0});const o=(a=s[i][t])===null||a===void 0?void 0:a.level;z(o)&&o<=r&&Ut(s[i][t],{style:e,level:r}),i!=="normal"&&t in this._extensionChannel&&this._extensionChannel[t].forEach(l=>{s[i][l]===void 0&&(s[i][l]=s.normal[l])})}_getDefaultStyle(){return{visible:!0,x:0,y:0}}_styleConvert(t){if(!t)return t;if(YL(t.type)||t.scale){const e=czt(t,{globalScale:this._option.globalScale,seriesId:this._option.seriesId});if(e)return{scale:e,field:t.field,changeDomain:t.changeDomain}}return t}_computeAttribute(t,e){var i;let r=(i=this.stateStyle[e])===null||i===void 0?void 0:i[t];r||(r=this.stateStyle.normal[t]);const s=this._computeStateAttribute(r,t,e),a=ft(r==null?void 0:r.postProcess),o=t in this._computeExChannel;if(a&&o){const l=this._computeExChannel[t];return(u,h)=>{let c=s(u,h);return c=r.postProcess(c,u,this._attributeContext,h,this.getDataView()),l(t,u,e,h,c)}}if(a)return(l,u)=>r.postProcess(s(l,u),l,this._attributeContext,u,this.getDataView());if(o){const l=this._computeExChannel[t];return(u,h)=>l(t,u,e,h,s(u,h))}return s}_computeStateAttribute(t,e,i){var r;return t?t.referer?t.referer._computeAttribute(e,i):t.style?typeof t.style=="function"?(s,a)=>t.style(s,this._attributeContext,a,this.getDataView()):YW.includes(t.style.gradient)?this._computeGradientAttr(t.style):["outerBorder","innerBorder"].includes(e)?this._computeBorderAttr(t.style):YL((r=t.style.scale)===null||r===void 0?void 0:r.type)?(s,a)=>t.style.scale.scale(s[t.style.field]):(s,a)=>t.style:(s,a)=>t.style:(s,a)=>{}}_initStyle(){const t=this._getDefaultStyle();this.setStyle(t,"normal",0)}_initSpecStyle(t,e,i){t.style&&this.setStyle(t.style,"normal",kt.User_Mark,e);const r=t.state;r&&Object.keys(r).forEach(s=>{const a=r[s];if("style"in a){const o=a.style;let l={stateValue:s};"level"in a&&(l.level=a.level),"filter"in a&&(l=ft(a.filter)?Object.assign({filter:a.filter},l):Object.assign(Object.assign({},a.filter),l)),this.state.addStateInfo(l),this.setStyle(o,s,kt.User_Mark,e)}else this.setStyle(a,s,kt.User_Mark,e)})}_computeGradientAttr(t){var e,i;const{gradient:r,scale:s,field:a}=t,o=_$(t,["gradient","scale","field"]);let l=s,u=a;if(!(s&&a||this.model.modelType!=="series")){const{scale:d,field:p}=this.model.getColorAttribute();s||(l=d),u||(u=p)}const h=cD(Ty(this.model.getColorScheme(),this.model.modelType==="series"?(i=(e=this.model).getSpec)===null||i===void 0?void 0:i.call(e):void 0),this.model.getDefaultColorDomain()),c=Object.assign(Object.assign({},ezt[r]),o);return(d,p)=>{const f={},g=this.getDataView();return Object.keys(c).forEach(_=>{const v=c[_];_==="stops"?f.stops=v.map(y=>{const{opacity:b,color:S,offset:A}=y;let w=S??(l==null?void 0:l.scale(d[u]));return ft(S)&&(w=S(d,this._attributeContext,p,g)),z(b)&&(w=xn.SetOpacity(w,b)),{offset:ft(A)?A(d,this._attributeContext,p,g):A,color:w||h[0]}}):ft(v)?f[_]=v(d,this._attributeContext,p,g):f[_]=v}),f.gradient=r,f}}_computeBorderAttr(t){const{scale:e,field:i}=t,r=_$(t,["scale","field"]);return(s,a)=>{var o,l,u;const h={};if(Object.keys(r).forEach(c=>{const d=r[c];ft(d)?h[c]=d(s,this._attributeContext,a,this.getDataView()):h[c]=d}),"stroke"in h)YW.includes((u=r.stroke)===null||u===void 0?void 0:u.gradient)&&(h.stroke=this._computeGradientAttr(r.stroke)(s,a));else{const c=cD(Ty(this.model.getColorScheme(),this.model.modelType==="series"?(l=(o=this.model).getSpec)===null||l===void 0?void 0:l.call(o):void 0),this.model.getDefaultColorDomain());let d=e,p=i;if(!(e&&i||this.model.modelType!=="series")){const{scale:f,field:g}=this.model.getColorAttribute();e||(d=f),p||(p=g),h.stroke=(d==null?void 0:d.scale(s[p]))||c[0]}}return h}}}class Py extends Sr{constructor(){super(...arguments),this.type=Py.type,this._marks=[]}getMarks(){return this._marks}_getDefaultStyle(){return Object.assign({},super._getDefaultStyle())}isMarkExist(t){return this._marks.find(e=>e.id===t.id||e.name===t.name)!==void 0}addMark(t){return this.isMarkExist(t)?(wl("Mark already exists, add mark failed."),!1):(this._marks.push(t),!0)}removeMark(t){const e=this._marks.findIndex(i=>i.id===t.id||i.name===t.name);return e===-1?(wl("Mark does not exists, removeMark failed."),!1):(this._marks.splice(e,1),!0)}getMarkInType(t){return this._marks.filter(e=>e.type===t)}getMarkInId(t){return this._marks.find(e=>e.id===t)}getMarkInName(t){return this._marks.find(e=>e.name===t)}_compileProduct(t){super._compileProduct(t),this._product.configure({zIndex:this.getZIndex()}),t!=null&&t.ignoreChildren||this.getMarks().forEach(e=>{e.getProduct()&&e.removeProduct(),e.compile({group:this._product})})}}Py.type="group";const Sit=()=>{zjt(),Z.registerMark(Py.type,Py)},S6t=n=>({type:"clipIn",options:{clipDimension:n.direction==="horizontal"?"y":"x"}}),A6t={type:"fadeIn"},w6t=n=>({type:n.direction==="horizontal"?"growPointsXIn":"growPointsYIn",options:{orient:n.direction==="horizontal"?"positive":"negative"}});function C6t(n,t){switch(t){case"grow":return w6t(n);case"fadeIn":return A6t;default:return S6t(n)}}const Rh={appear:{duration:1e3,easing:"cubicOut"},update:{type:"update",duration:300,easing:"linear"},enter:{duration:300,easing:"linear"},exit:{duration:300,easing:"linear"},disappear:{duration:500,easing:"cubicIn"}},ZF={appear:{type:"scaleIn"},enter:{type:"scaleIn"},exit:{type:"scaleOut"},disappear:{type:"scaleOut"}},fT={appear:{type:"fadeIn"},enter:{type:"fadeIn"},exit:{type:"fadeOut"},disappear:{type:"fadeOut"}},gT=()=>{Z.registerAnimation("scaleInOut",()=>ZF)},$u=()=>{Z.registerAnimation("fadeInOut",()=>fT)},k6t=()=>{Z.registerAnimation("cartesianGroupClip",n=>({appear:{custom:$6,customParameters:(t,e)=>({animationType:"in",group:e.getGraphicItem(),direction:n.direction(),width:n.width(),height:n.height(),orient:n.orient()})},disappear:{custom:$6,customParameters:(t,e)=>({animationType:"out",group:e.getGraphicItem(),direction:n.direction(),width:n.width(),height:n.height(),orient:n.orient()})}}))},Ait=(n,t)=>({appear:C6t(n,t),enter:{type:"fadeIn"},exit:{type:"fadeOut"},update:[{type:"update",options:{excludeChannels:["points","defined"]}},{channel:["points"],custom:_J,duration:Rh.update.duration,easing:Rh.update.easing,customParameters:{clipRangeByDimension:n.direction==="horizontal"?"y":"x"}}],disappear:{type:"clipOut"}}),wit=()=>{Z.registerAnimation("line",Ait)},T6t=()=>{Z.registerAnimation("area",Ait)},M6t=()=>{Tp.useRegisters([WNt,$Nt,CNt,kNt,HNt,VNt,GNt,UNt,YNt])},Cit=()=>{Tp.useRegisters([PNt,ENt,ONt,RNt,TNt,MNt])},kit=()=>{Tp.useRegisters([NNt,zNt,FNt,jNt])},Tit=()=>{Tp.useRegisters([aet,oet,INt,LNt,DNt,BNt,ANt,wNt])},Mit=()=>{Tp.useRegisters([aet,oet])},P6t={measureText:O7t};class ua{static instance(){return ua.instance_||(ua.instance_=new ua),ua.instance_}constructor(){this.functions={}}registerFunction(t,e){t&&e&&(this.functions[t]=e)}unregisterFunction(t){t&&delete this.functions[t]}getFunction(t){return this.functions[t]||null}getFunctionNameList(){return Object.keys(this.functions)}}const E6t=()=>{Tw(re)},O6t=()=>{Ow(re)};class Pit{constructor(){this.id=wp(),this._plugins=[]}add(t){if(!t||t.length===0)return null;const e=[];return t.forEach(i=>{this._plugins.find(r=>r.id===i.id)?wl("不要重复添加相同的plugin"):(this._plugins.push(i),e.push(i),i.onAdd&&i.onAdd(this))}),e}load(t){const e=this.add(t);e&&e.length&&this.activate(t)}activate(t){t.length&&t.forEach(e=>{e.init&&e.init()})}get(t){return this._plugins.find(e=>e.id===t)}getAll(){return this._plugins.slice()}release(t){const e=this.get(t);e&&(e.release(this),this._plugins=this._plugins.filter(i=>i!==e))}releaseAll(){this._plugins.forEach(t=>{t.release(this)}),this._plugins=[]}clear(t){const e=this.get(t);e&&e.clear(this)}clearAll(){this._plugins.forEach(t=>{var e;(e=t.clear)===null||e===void 0||e.call(t,this)})}}class R6t extends Pit{constructor(t){super(),this.globalInstance=t}onInit(t){this._plugins.forEach(e=>{e.onInit&&e.onInit(this,t)})}onBeforeResize(t,e){this._plugins.forEach(i=>{i.onBeforeResize&&i.onBeforeResize(this,t,e)})}onAfterChartSpecTransform(t,e){this._plugins.forEach(i=>{i.onAfterChartSpecTransform&&i.onAfterChartSpecTransform(this,t,e)})}onBeforeInitChart(t,e){this._plugins.forEach(i=>{i.onBeforeInitChart&&i.onBeforeInitChart(this,t,e)})}releaseAll(){super.releaseAll(),this.globalInstance=null}}var fo=function(n,t,e,i){return new(e||(e=Promise))(function(r,s){function a(u){try{l(i.next(u))}catch(h){s(h)}}function o(u){try{l(i.throw(u))}catch(h){s(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof e?h:new e(function(c){c(h)})).then(a,o)}l((i=i.apply(n,t||[])).next())})},I6t=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};class ar{static useRegisters(t){t.forEach(e=>{typeof e=="function"?e():console.error("Invalid function:",e)})}static useChart(t){t.forEach(e=>Z.registerChart(e.type,e))}static useSeries(t){t.forEach(e=>Z.registerSeries(e.type,e))}static useComponent(t){t.forEach(e=>Z.registerComponent(e.type,e))}static useMark(t){t.forEach(e=>{var i;return Z.registerMark((i=e.constructorType)!==null&&i!==void 0?i:e.type,e)})}static useLayout(t){t.forEach(e=>Z.registerLayout(e.type,e))}static registerDataSetTransform(t,e){Z.registerTransform(t,e)}static registerFunction(t,e){t&&e&&ua.instance().registerFunction(t,e)}static unregisterFunction(t){t&&ua.instance().unregisterFunction(t)}static getFunction(t){return t?ua.instance().getFunction(t):null}static getFunctionList(){return ua.instance().getFunctionNameList()}static registerMap(t,e,i){const r=Z.getImplementInKey("registerMap");r&&r(t,e,i)}static unregisterMap(t){const e=Z.getImplementInKey("unregisterMap");e&&e(t)}static getMap(t){return Z7t(t)}static hideTooltip(t=[]){Va.forEach(e=>{var i;return(i=e==null?void 0:e.hideTooltip)===null||i===void 0?void 0:i.call(e)},t)}static getLogger(){return ri.getInstance()}getSpec(){return this._spec}getSpecInfo(){return this._specInfo}getDataSet(){return this._dataSet}constructor(t,e){var i,r,s,a,o,l,u;this.id=wp(),this._userEvents=[],this._autoSize=!0,this._option={mode:vn["desktop-browser"],onError:y=>{throw new Error(y)},optimize:{disableCheckGraphicWidthOutRange:!0}},this._observer=null,this._context={},this._onResize=Ml((...y)=>{this._doResize()},100),this._option=gt(this._option,{animation:t.animation!==!1},e),this._onError=(i=this._option)===null||i===void 0?void 0:i.onError;const h=this._option,{dom:c,renderCanvas:d,mode:p,stage:f,poptip:g}=h,_=I6t(h,["dom","renderCanvas","mode","stage","poptip"]),v=ga(p);v&&c&&(this._container=It(c)?document==null?void 0:document.getElementById(c):c),d&&(this._canvas=d),f&&(this._stage=f),p==="node"||this._container||this._canvas||this._stage?(v?E6t():p==="node"&&O6t(),this._viewBox=this._option.viewBox,this._currentThemeName=os.getCurrentThemeName(),this._setNewSpec(t),this._updateCurrentTheme(),this._currentSize=this.getCurrentSize(),this._compiler=new t6t({dom:(s=this._container)!==null&&s!==void 0?s:"none",canvas:d},Object.assign(Object.assign({mode:this._option.mode,stage:f,pluginList:g!==!1?["poptipForText"]:[]},_),{background:this._getBackground(),onError:this._onError})),this._compiler.setSize(this._currentSize.width,this._currentSize.height),this._eventDispatcher=new Y7t(this,this._compiler),this._event=new lT(this._eventDispatcher,p),this._compiler.initView(),(a=this.getStage())===null||a===void 0||a.setTheme({text:{fontFamily:(o=this._currentTheme)===null||o===void 0?void 0:o.fontFamily}}),this._initDataSet(this._option.dataSet),this._autoSize=!!v&&((u=(l=t.autoFit)!==null&&l!==void 0?l:this._option.autoFit)===null||u===void 0||u),this._bindResizeEvent(),this._bindVGrammarViewEvent(),this._initChartPlugin(),Va.registerInstance(this)):(r=this._option)===null||r===void 0||r.onError("please specify container or renderCanvas!")}_setNewSpec(t,e){return!!t&&(It(t)&&(t=JSON.parse(t)),e&&this._originalSpec&&(t=Ut({},this._originalSpec,t)),this._originalSpec=t,this._spec=this._getSpecFromOriginalSpec(),!0)}_getSpecFromOriginalSpec(){var t;const e=mD(this._originalSpec);return e.data=(t=e.data)!==null&&t!==void 0?t:[],e}_initChartSpec(t,e){var i,r;ar.getFunctionList()&&ar.getFunctionList().length&&(t=vD(t,ar)),this._spec=t,this._chartSpecTransformer||(this._chartSpecTransformer=Z.createChartSpecTransformer(this._spec.type,this._getChartOption(this._spec.type))),(i=this._chartSpecTransformer)===null||i===void 0||i.transformSpec(this._spec),this._chartPluginApply("onAfterChartSpecTransform",this._spec,e),this._specInfo=(r=this._chartSpecTransformer)===null||r===void 0?void 0:r.transformModelSpec(this._spec),this._chartPluginApply("onAfterModelSpecTransform",this._spec,this._specInfo,e)}_updateSpecInfo(){var t;this._chartSpecTransformer||(this._chartSpecTransformer=Z.createChartSpecTransformer(this._spec.type,this._getChartOption(this._spec.type))),this._specInfo=(t=this._chartSpecTransformer)===null||t===void 0?void 0:t.createSpecInfo(this._spec)}_initChart(t){var e,i,r;if(!this._compiler)return void((e=this._option)===null||e===void 0||e.onError("compiler is not initialized"));if(this._chart)return void((i=this._option)===null||i===void 0||i.onError("chart is already initialized"));const s=Z.createChart(t.type,t,this._getChartOption(t.type));s?(this._chart=s,this._chart.setCanvasRect(this._currentSize.width,this._currentSize.height),this._chart.created(),this._chart.init(),this._event.emit(Wt.initialized,{chart:s,vchart:this})):(r=this._option)===null||r===void 0||r.onError("init chart fail")}_releaseData(){this._dataSet&&(this._dataSet.dataViewMap={},this._dataSet=null)}_bindVGrammarViewEvent(){this._compiler&&(this._compiler.getVGrammarView().addEventListener(Ht.ALL_ANIMATION_END,()=>{this._event.emit(Wt.animationFinished,{chart:this._chart,vchart:this})}),this._compiler.getVGrammarView().addEventListener(Ht.AFTER_VRENDER_NEXT_RENDER,()=>{this._event.emit(Wt.renderFinished,{chart:this._chart,vchart:this})}))}_bindResizeEvent(){var t;if(this._autoSize){if(this._container){const e=window.ResizeObserver;e&&(this._observer=new e(this._onResize),(t=this._observer)===null||t===void 0||t.observe(this._container))}window.addEventListener("resize",this._onResize)}}_unBindResizeEvent(){this._autoSize&&(window.removeEventListener("resize",this._onResize),this._observer&&(this._observer.disconnect(),this._observer=null))}getCurrentSize(){var t,e,i,r;return dit(this._spec,{container:this._container,canvas:this._canvas,mode:this._getMode(),modeParams:this._option.modeParams},{width:(e=(t=this._currentSize)===null||t===void 0?void 0:t.width)!==null&&e!==void 0?e:qf,height:(r=(i=this._currentSize)===null||i===void 0?void 0:i.height)!==null&&r!==void 0?r:Zf})}_doResize(){const{width:t,height:e}=this.getCurrentSize();this._currentSize.width===t&&this._currentSize.height===e||(this._currentSize={width:t,height:e},this.resizeSync(t,e))}_initDataSet(t){this._dataSet=t instanceof gc?t:new gc,vu(this._dataSet,"dataview",f2),vu(this._dataSet,"array",Eq),ie(this._dataSet,"stackSplit",J7t),ie(this._dataSet,"copyDataView",uT);for(const e in Z.transforms)ie(this._dataSet,e,Z.transforms[e]);for(const e in Z.dataParser)vu(this._dataSet,e,Z.dataParser[e])}updateCustomConfigAndRerender(t,e,i={}){if(!this._isReleased&&t)return ft(t)&&(t=t()),t.reAnimate&&(this.stopAnimation(),this._updateAnimateState(!0)),this._reCompile(t),e?this._renderSync(i):this._renderAsync(i)}_updateCustomConfigAndRecompile(t,e={}){return!!t&&(this._reCompile(t),this._beforeRender(e))}_reCompile(t,e){var i,r,s,a,o,l;if(t.reMake)this._releaseData(),this._initDataSet(),this._chartSpecTransformer=null,(i=this._chart)===null||i===void 0||i.release(),this._chart=null,(r=this._compiler)===null||r===void 0||r.releaseGrammar(((s=this._option)===null||s===void 0?void 0:s.animation)===!1||((a=this._spec)===null||a===void 0?void 0:a.animation)===!1),this._userEvents.forEach(u=>{var h;return(h=this._event)===null||h===void 0?void 0:h.on(u.eType,u.query,u.handler)}),t.reSize&&this._doResize();else if(t.reCompile&&((o=this._compiler)===null||o===void 0||o.clear({chart:this._chart,vChart:this},!this._option.animation||!this._spec.animation),(l=this._compiler)===null||l===void 0||l.compile({chart:this._chart,vChart:this},{})),t.reSize){const{width:u,height:h}=this.getCurrentSize();this._chart.onResize(u,h,!1),this._compiler.resize(u,h,!1)}}_beforeRender(t={}){var e,i,r,s,a,o,l,u;if(this._isReleased)return!1;if(this._chart)return!0;const{transformSpec:h,actionSource:c}=t;return h&&this._initChartSpec(this._spec,"render"),this._chartPluginApply("onBeforeInitChart",this._spec,c),(i=(e=this._option.performanceHook)===null||e===void 0?void 0:e.beforeInitializeChart)===null||i===void 0||i.call(e),this._initChart(this._spec),(s=(r=this._option.performanceHook)===null||r===void 0?void 0:r.afterInitializeChart)===null||s===void 0||s.call(r),!(!this._chart||!this._compiler)&&((o=(a=this._option.performanceHook)===null||a===void 0?void 0:a.beforeCompileToVGrammar)===null||o===void 0||o.call(a),this._compiler.compile({chart:this._chart,vChart:this},{performanceHook:this._option.performanceHook}),(u=(l=this._option.performanceHook)===null||l===void 0?void 0:l.afterCompileToVGrammar)===null||u===void 0||u.call(l),!0)}_afterRender(){return!this._isReleased&&(this._updateAnimateState(),this._event.emit(Wt.rendered,{chart:this._chart,vchart:this}),!0)}renderSync(t){return this._renderSync({morphConfig:t,transformSpec:!0,actionSource:"render"})}renderAsync(t){return fo(this,void 0,void 0,function*(){return this._renderAsync({morphConfig:t,transformSpec:!0,actionSource:"render"})})}_renderSync(t={}){var e;const i=this;return this._beforeRender(t)&&((e=this._compiler)===null||e===void 0||e.render(t.morphConfig),this._afterRender()),i}_renderAsync(t={}){return fo(this,void 0,void 0,function*(){return this._renderSync(t)})}_updateAnimateState(t){var e,i;if(this._option.animation){const r=t?bn.appear:bn.update;(e=this._chart)===null||e===void 0||e.getAllRegions().forEach(s=>{var a;(a=s.animate)===null||a===void 0||a.updateAnimateState(r,!0)}),(i=this._chart)===null||i===void 0||i.getAllComponents().forEach(s=>{var a;(a=s.animate)===null||a===void 0||a.updateAnimateState(r,!0)})}}release(){var t,e,i,r;!((t=this._onResize)===null||t===void 0)&&t.cancel&&this._onResize.cancel(),this._chartPluginApply("releaseAll"),this._chartPlugin=null,this._chartSpecTransformer=null,(e=this._chart)===null||e===void 0||e.release(),(i=this._eventDispatcher)===null||i===void 0||i.release(),(r=this._compiler)===null||r===void 0||r.release(),this._unBindResizeEvent(),this._releaseData(),this._onError=null,this._onResize=null,this._container=null,this._currentTheme=null,this._option=null,this._chart=null,this._compiler=null,this._spec=null,this._specInfo=null,this._originalSpec=null,this._userEvents=null,this._event=null,this._eventDispatcher=null,this._isReleased=!0,Va.unregisterInstance(this)}updateData(t,e,i,r){return fo(this,void 0,void 0,function*(){return this.updateDataSync(t,e,i,r)})}_updateDataById(t,e,i){const r=this._spec.data.find(s=>s.name===t||s.id===t);r?r.id===t?r.values=e:r.name===t&&r.parse(e,i):ut(e)?this._spec.data.push({id:t,values:e}):this._spec.data.push(e)}updateDataInBatches(t){return fo(this,void 0,void 0,function*(){return this._chart?(this._chart.updateFullData(t.map(({id:e,data:i,options:r})=>({id:e,values:i,parser:r}))),this._chart.updateGlobalScaleDomain(),this._compiler.render(),this):(this._spec.data=ot(this._spec.data),t.forEach(({id:e,data:i,options:r})=>{this._updateDataById(e,i,r)}),this)})}updateDataSync(t,e,i,r){return F(this._dataSet)?this:this._chart?(r!=null&&r.reAnimate&&(this.stopAnimation(),this._updateAnimateState(!0)),this._chart.updateData(t,e,!0,i),this._compiler.render(),this):(this._spec.data=ot(this._spec.data),this._updateDataById(t,e,i),this)}updateFullDataSync(t,e=!0,i){if(this._chart)return i!=null&&i.reAnimate&&(this.stopAnimation(),this._updateAnimateState(!0)),this._chart.updateFullData(t),e&&this._compiler.render(),this;const r=ot(this._spec.data);return ot(t).forEach(s=>{var a;const{id:o,values:l,parser:u,fields:h}=s,c=r.find(d=>d.name===o);if(c)c instanceof Le?(c.setFields(cs(h)),c.parse(l,cs(u))):(c.values=l,z(u)&&(c.parser=u),z(h)&&(c.fields=h));else{const d=UF(s,this._dataSet,r,{onError:(a=this._option)===null||a===void 0?void 0:a.onError});ut(this._spec.data)&&this._spec.data.push(d)}}),this}updateFullData(t,e=!0){return fo(this,void 0,void 0,function*(){return this.updateFullDataSync(t,e)})}updateSpec(t,e=!1,i,r){return fo(this,void 0,void 0,function*(){const s=this._updateSpec(t,e,r);return s?(yield this.updateCustomConfigAndRerender(s,!1,{morphConfig:i,transformSpec:s.reTransformSpec,actionSource:"updateSpec"}),this):this})}updateSpecSync(t,e=!1,i,r){const s=this._updateSpec(t,e,r);return s?(this.updateCustomConfigAndRerender(s,!0,{morphConfig:i,transformSpec:s.reTransformSpec,actionSource:"updateSpec"}),this):this}updateSpecAndRecompile(t,e=!1,i={}){const r=this._updateSpec(t,e);return this._updateCustomConfigAndRecompile(r,Object.assign({actionSource:"updateSpecAndRecompile"},i))}_updateSpec(t,e=!1,i){var r,s;const a=this._spec;if(!this._setNewSpec(t,e))return;mi(a.theme,this._spec.theme)||this._setCurrentTheme();const o=this._shouldChartResize(a);if((s=(r=this._compiler)===null||r===void 0?void 0:r.getVGrammarView())===null||s===void 0||s.updateLayoutTag(),this._spec.type!==a.type)return{reTransformSpec:!0,change:!0,reMake:!0,reCompile:!1,reSize:o};this._initChartSpec(this._spec,"render");const l=pf(this._chart.updateSpec(this._spec),{reTransformSpec:!1,change:o,reMake:!1,reCompile:!1,reSize:o});return i?Object.assign(Object.assign({},l),i):l}updateModelSpec(t,e,i=!1,r){return fo(this,void 0,void 0,function*(){if(!e||!this._spec)return this;if(It(e)&&(e=JSON.parse(e)),ft(t)||u$(this._spec,t,e,i),this._chart){const s=this._chart.getModelInFilter(t);if(s)return this._updateModelSpec(s,e,!1,i,r)}return this})}updateModelSpecSync(t,e,i=!1,r){if(!e||!this._spec)return this;if(It(e)&&(e=JSON.parse(e)),ft(t)||u$(this._spec,t,e,i),this._chart){const s=this._chart.getModelInFilter(t);if(s)return this._updateModelSpec(s,e,!0,i,r)}return this}_updateModelSpec(t,e,i=!1,r=!1,s){r&&(e=Ut({},t.getSpec(),e));const a=t.updateSpec(e);return t.reInit(e),(a.change||a.reCompile||a.reMake||a.reSize||a.reRender)&&this._chart.reDataFlow(),this.updateCustomConfigAndRerender(a,i,{morphConfig:s,transformSpec:!1,actionSource:"updateModelSpec"})}resize(t,e){return fo(this,void 0,void 0,function*(){return this.resizeSync(t,e)})}resizeSync(t,e){var i,r;return this._beforeResize(t,e)?((r=(i=this._compiler).resize)===null||r===void 0||r.call(i,t,e),this._afterResize()):this}_beforeResize(t,e){var i,r,s,a;if(!this._chart||!this._compiler)return!1;const o=this._chart.getCanvasRect();return(!o||o.width!==t||o.height!==e)&&(this._chartPluginApply("onBeforeResize",t,e),(r=(i=this._option.performanceHook)===null||i===void 0?void 0:i.beforeResizeWithUpdate)===null||r===void 0||r.call(i),this._chart.onResize(t,e,!1),(a=(s=this._option.performanceHook)===null||s===void 0?void 0:s.afterResizeWithUpdate)===null||a===void 0||a.call(s),!0)}_afterResize(){return this._isReleased||this._event.emit(Wt.afterResize,{chart:this._chart}),this}updateViewBox(t,e=!0,i=!0){return this._chart&&this._compiler?(this._viewBox=t,this._chart.updateViewBox(t,i),i&&(this._compiler.render(),this._chart.onEvaluateEnd()),this._compiler.updateViewBox(t,e),this):this}on(t,e,i){var r;this._userEvents&&(this._userEvents.push({eType:t,query:typeof e=="function"?null:e,handler:typeof e=="function"?e:i}),(r=this._event)===null||r===void 0||r.on(t,e,i))}off(t,e){var i;if(this._userEvents&&this._userEvents.length!==0)if(e){const r=this._userEvents.findIndex(s=>s.eType===t&&s.handler===e);r>=0&&(this._userEvents.splice(r,1),(i=this._event)===null||i===void 0||i.off(t,e))}else this._userEvents.forEach(r=>{var s;r.eType===t&&((s=this._event)===null||s===void 0||s.off(t,r.handler))}),this._userEvents=this._userEvents.filter(r=>r.eType!==t)}updateState(t,e){this._chart&&this._chart.updateState(t,e)}setSelected(t,e,i){this._chart&&this._chart.setSelected(t,e,i)}setHovered(t,e,i){this._chart&&this._chart.setHovered(t,e,i)}clearState(t){this._chart&&this._chart.clearState(t)}clearSelected(){this._chart&&this._chart.clearSelected()}clearHovered(){this._chart&&this._chart.clearHovered()}_updateCurrentTheme(t){var e,i;const r=this._option.theme,s=(e=this._spec)===null||e===void 0?void 0:e.theme;if(t&&(this._currentThemeName=t),Gt(r)&&Gt(s))this._currentTheme=uh(this._currentThemeName,!0);else if(It(r)&&(!s||It(s))||It(s)&&(!r||It(r))){const a=gD({},uh(this._currentThemeName,!0),uh(r,!0),uh(s,!0));this._currentTheme=a}else{const a=gD({},uh(this._currentThemeName),uh(r),uh(s));this._currentTheme=oT(a)}OBt(le(this._currentTheme,"component.poptip")),(i=this._compiler)===null||i===void 0||i.setBackground(this._getBackground())}_shouldChartResize(t){var e,i;let r=!1;F(this._spec.width)?!F(t.width)&&(this._spec.width=t.width):this._spec.width!==t.width&&(r=!0),F(this._spec.height)?!F(t.height)&&(this._spec.height=t.height):this._spec.height!==t.height&&(r=!0);const s=this._autoSize;return this._autoSize=!!ga(this._option.mode)&&((i=(e=this._spec.autoFit)!==null&&e!==void 0?e:this._option.autoFit)===null||i===void 0||i),this._autoSize!==s&&(r=!0),r}_getBackground(){return(typeof this._spec.background=="string"||ae(this._spec.background)&&this._spec.background.gradient?this._spec.background:null)||this._currentTheme.background||this._option.background}getCurrentTheme(){return uh(this._currentThemeName)}getCurrentThemeName(){return this._currentThemeName}setCurrentTheme(t){return fo(this,void 0,void 0,function*(){if(!os.themeExist(t))return this;const e=this._setCurrentTheme(t);return yield this.updateCustomConfigAndRerender(e,!1,{transformSpec:!1,actionSource:"setCurrentTheme"}),this})}setCurrentThemeSync(t){if(!os.themeExist(t))return this;const e=this._setCurrentTheme(t);return this.updateCustomConfigAndRerender(e,!0,{transformSpec:!1,actionSource:"setCurrentTheme"}),this}_setCurrentTheme(t){var e;return this._updateCurrentTheme(t),this._initChartSpec(this._getSpecFromOriginalSpec(),"setCurrentTheme"),(e=this._chart)===null||e===void 0||e.setCurrentTheme(),{change:!0,reMake:!1}}_getTooltipComponent(){var t;return(t=this._chart)===null||t===void 0?void 0:t.getComponentsByType(mt.tooltip)[0]}setTooltipHandler(t){var e,i;this._context.tooltipHandler=t;const r=this._getTooltipComponent();r&&((i=(e=r.tooltipHandler)===null||e===void 0?void 0:e.release)===null||i===void 0||i.call(e),r.tooltipHandler=t)}getTooltipHandlerByUser(){var t;return(t=this._context)===null||t===void 0?void 0:t.tooltipHandler}getTooltipHandler(){const t=this._getTooltipComponent();return t?t.tooltipHandler:this._context.tooltipHandler}showTooltip(t,e){var i;const r=this._getTooltipComponent();return(i=z(t)&&(r==null?void 0:r.showTooltip(t,e))!=="none")!==null&&i!==void 0&&i}hideTooltip(){var t;const e=this._getTooltipComponent();return(t=e==null?void 0:e.hideTooltip())!==null&&t!==void 0&&t}getLegendDataById(t){var e;const i=(e=this._chart)===null||e===void 0?void 0:e.getComponentByUserId(t);return i?i.getLegendData():[]}getLegendDataByIndex(t=0){var e;const i=(e=this._chart)===null||e===void 0?void 0:e.getComponentsByType(mt.discreteLegend);return i&&i[t]?i[t].getLegendData():[]}getLegendSelectedDataById(t){var e;const i=(e=this._chart)===null||e===void 0?void 0:e.getComponentByUserId(t);return i?i.getSelectedData():[]}getLegendSelectedDataByIndex(t=0){var e;const i=(e=this._chart)===null||e===void 0?void 0:e.getComponentsByType(mt.discreteLegend);return i&&i[t]?i[t].getSelectedData():[]}setLegendSelectedDataById(t,e){var i;const r=(i=this._chart)===null||i===void 0?void 0:i.getComponentByUserId(t);r&&r.setSelectedData(e)}setLegendSelectedDataByIndex(t=0,e){var i;const r=(i=this._chart)===null||i===void 0?void 0:i.getComponentsByType(mt.discreteLegend);r&&r[t]&&r[t].setSelectedData(e)}getDataURL(){var t;return fo(this,void 0,void 0,function*(){const e=this.getStage();if(this._chart&&e){e.render();const i=this._chart.getCanvas();return yield r6t(i,{onError:this._onError})}return(t=this._option)===null||t===void 0||t.onError(new ReferenceError("render is not defined")),null})}exportImg(t){var e,i;return fo(this,void 0,void 0,function*(){if(!ga(this._option.mode))return void((e=this._option)===null||e===void 0||e.onError(new TypeError("non-browser environment can not export img")));const r=yield this.getDataURL();r?i6t(t,r):(i=this._option)===null||i===void 0||i.onError(new ReferenceError("render is not defined"))})}exportCanvas(){var t;const e=this.getStage();if(this._chart&&e)return e.toCanvas();(t=this._option)===null||t===void 0||t.onError(new ReferenceError("render is not defined"))}getImageBuffer(){var t,e;if(this._option.mode!=="node")return void((t=this._option)===null||t===void 0||t.onError(new TypeError("getImageBuffer() now only support node environment.")));const i=this.getStage();return i?(i.render(),i.window.getImageBuffer()):((e=this._option)===null||e===void 0||e.onError(new ReferenceError("render is not defined")),null)}setLayout(t){var e;this._option.layout=t,(e=this._chart)===null||e===void 0||e.setLayout(t)}reLayout(){var t;(t=this._chart)===null||t===void 0||t.setLayoutTag(!0)}getCompiler(){return this._compiler}getChart(){return this._chart}getStage(){return this._compiler.getStage()}getCanvas(){var t;return(t=this._compiler)===null||t===void 0?void 0:t.getCanvas()}getContainer(){var t;if(z(this._container))return this._container;let e;return e=It(this._canvas)?document==null?void 0:document.getElementById(this._canvas):this._canvas,z(e)?e.parentElement:(t=this.getCanvas())===null||t===void 0?void 0:t.parentElement}getComponents(){return this._chart.getAllComponents()}getScale(t){var e;const i=(e=this._chart)===null||e===void 0?void 0:e.getGlobalScale();return i==null?void 0:i.getScale(t)}setDimensionIndex(t,e={}){var i;return(i=this._chart)===null||i===void 0?void 0:i.setDimensionIndex(t,e)}stopAnimation(){var t,e,i;(i=(e=(t=this._compiler)===null||t===void 0?void 0:t.getVGrammarView())===null||e===void 0?void 0:e.animate)===null||i===void 0||i.stop()}pauseAnimation(){var t,e,i;(i=(e=(t=this._compiler)===null||t===void 0?void 0:t.getVGrammarView())===null||e===void 0?void 0:e.animate)===null||i===void 0||i.pause()}resumeAnimation(){var t,e,i;(i=(e=(t=this._compiler)===null||t===void 0?void 0:t.getVGrammarView())===null||e===void 0?void 0:e.animate)===null||i===void 0||i.resume()}convertDatumToPosition(t,e={},i=!1,r){var s;if(!this._chart||Gt(t))return null;const{seriesId:a,seriesIndex:o=0}=e;let l;if(z(a)?l=this._chart.getSeriesInUserId(a):z(o)&&(l=(s=this._chart.getSeriesInIndex([o]))===null||s===void 0?void 0:s[0]),l){const u=Object.keys(t),h=l.getViewData().latestData.find(p=>u.every(f=>p[f]==t[f])),c=l.getRegion().getLayoutStartPoint();let d;return d=h?l.dataToPosition(h,r):l.dataToPosition(t,r),d?e$(d,c,i):null}return null}convertValueToPosition(t,e,i=!1){var r,s;if(!this._chart||F(t)||Gt(e))return null;if(!ut(t)){const{axisId:u,axisIndex:h}=e;let c;if(z(u)?c=this._chart.getComponentsByKey("axes").find(p=>p.userId===u):z(h)&&(c=(r=this._chart.getComponentsByKey("axes"))===null||r===void 0?void 0:r[h]),!c)return wl("Please check whether the `axisId` or `axisIndex` is set!"),null;const d=c==null?void 0:c.valueToPosition(t);if(i){const p=c.getLayoutStartPoint(),f=c.getOrient();return d+(f==="bottom"||f==="top"?p.x:p.y)}return d}const{seriesId:a,seriesIndex:o}=e;let l;return z(a)?l=this._chart.getSeriesInUserId(a):z(o)&&(l=(s=this._chart.getSeriesInIndex([o]))===null||s===void 0?void 0:s[0]),l?e$(l.valueToPosition(t[0],t[1]),l.getRegion().getLayoutStartPoint(),i):(wl("Please check whether the `seriesId` or `seriesIndex` is set!"),null)}getFunction(t){return ua.instance().getFunction(t)}registerFunction(t,e){t&&e&&ua.instance().registerFunction(t,e)}unregisterFunction(t){t&&ua.instance().unregisterFunction(t)}getFunctionList(){return ua.instance().getFunctionNameList()}setRuntimeSpec(t){this._spec=t,this._updateSpecInfo()}updateIndicatorDataById(t,e){var i;const r=(i=this._chart)===null||i===void 0?void 0:i.getComponentByUserId(t);r&&r.updateDatum(e)}updateIndicatorDataByIndex(t=0,e){var i;const r=(i=this._chart)===null||i===void 0?void 0:i.getComponentsByType(mt.indicator);r&&r[t]&&r[t].updateDatum(e)}_initChartPlugin(){const t=Z.getChartPlugins();t.length>0&&(this._chartPlugin=new R6t(this),this._chartPlugin.load(t.map(e=>new e)),this._chartPluginApply("onInit",this._spec))}_chartPluginApply(t,...e){this._chartPlugin&&this._chartPlugin[t]&&this._chartPlugin[t].apply(this._chartPlugin,e)}_getMode(){return this._option.mode||vn["desktop-browser"]}_getChartOption(t){return{type:t,globalInstance:this,eventDispatcher:this._eventDispatcher,dataSet:this._dataSet,container:this._container,canvas:this._canvas,map:new Map,mode:this._getMode(),modeParams:this._option.modeParams,getCompiler:()=>this._compiler,performanceHook:this._option.performanceHook,viewBox:this._viewBox,animation:this._option.animation,getTheme:()=>{var e;return(e=this._currentTheme)!==null&&e!==void 0?e:{}},getSpecInfo:()=>{var e;return(e=this._specInfo)!==null&&e!==void 0?e:{}},layout:this._option.layout,onError:this._onError,disableTriggerEvent:this._option.disableTriggerEvent===!0}}}ar.InstanceManager=Va,ar.ThemeManager=os,ar.globalConfig={uniqueTooltip:!0},ar.Utils=P6t,ar.vglobal=_e;Z.registerRegion("region",Sg),Z.registerLayout("base",qF),Sit(),Tp.useRegisters([O8t,R8t]),M6t(),a4t(),s4t(),GF(l$.name,l$),ri.getInstance(aa.Error);class JF{constructor(t){this.id=wp(),this.name=`${t}_${this.id}`}onAdd(t){this.service=t}release(){this.service=null}}const L6t=n=>{Z.registerChartPlugin(n.type,n)},D6t=/\{([^}]+)\}/,B6t=/\{([^}]+)\}/g,F6t=/:/;class Fd extends JF{constructor(){super(Fd.type),this.type="formatterPlugin",this._timeModeFormat={utc:Ro.getInstance().timeUTCFormat,local:Ro.getInstance().timeFormat},this._formatter=this._format,this._timeFormatter=this._timeModeFormat.local,this._numericFormatter=_d.getInstance().format,this._numericSpecifier=_d.getInstance().formatter,this._numericFormatterCache=new Map,this._isNumericFormatterCache=new Map}onInit(t,e){var i;const{globalInstance:r}=t;if(!r)return;this._spec=(i=e==null?void 0:e[Fd.specKey])!==null&&i!==void 0?i:{};const{timeMode:s,customFormatter:a,numericFormatter:o,timeFormatter:l}=this._spec;ft(a)?this._formatter=a:(this._formatter=this._format.bind(this),ft(l)?this._timeFormatter=l:s&&this._timeModeFormat[s]&&(this._timeFormatter=this._timeModeFormat[s]),o&&(this._numericFormatter=o,this._numericSpecifier=null,this._numericFormatterCache=null)),Z.registerFormatter(this._formatter)}_format(t,e,i){return ut(t)?t.map((r,s)=>{const a=ut(i)?i[s]:i;return a?this._formatSingleLine(r,e,a):r}):ut(i)?i.map(r=>this._formatSingleLine(t,e,r)):this._formatSingleLine(t,e,i)}_formatSingleLine(t,e,i){let r;return this._isNumericFormatterCache&&(this._isNumericFormatterCache.get(i)?r=this._isNumericFormatterCache.get(i):(r=D6t.test(i),this._isNumericFormatterCache.set(i,r))),r?i.replace(B6t,(s,a)=>{if(!F6t.test(a)){const h=e[a.trim()];return h!==void 0?h:s}const o=a.split(":"),l=e[o.shift()],u=o.join(":");return this._formatSingleText(l,u)}):this._formatSingleText(t,i)}_formatSingleText(t,e){if(Zq.test(e)&&this._numericFormatter){let i;return this._numericFormatterCache&&this._numericSpecifier?(this._numericFormatterCache.get(e)?i=this._numericFormatterCache.get(e):(i=this._numericSpecifier(e),this._numericFormatterCache.set(e,i)),i(Number(t))):this._numericFormatter(e,Number(t))}return e.includes("%")&&this._timeFormatter?this._timeFormatter(e,t):t}release(){super.release(),this._format=null,this._timeFormatter=null,this._numericFormatter=null,this._numericSpecifier=null,this._numericFormatterCache=null,this._isNumericFormatterCache=null}}Fd.pluginType="chart",Fd.specKey="formatter",Fd.type="formatterPlugin";const j6t=()=>{L6t(Fd)};function y$(n){return n.length===2&&st(n[0])&&st(n[1])&&n[1]>=n[0]}function b$(n,t){const e=t[1]-t[0],i=t[1]*t[0]<0;let r=t[0]<=0?0-t[0]:0,s=t[1]>0?t[1]-0:0;e===0?t[0]<0?(r=1,s=0):t[0]>0&&(r=0,s=1):(r/=e,s/=e);const a=n.getDomainSpec();return{total:e,negative:r,positive:s,includeZero:i,domain:t,extendable_min:!st(a.min),extendable_max:!st(a.max)}}function x$(n,t){const{positive:e,negative:i,extendable_min:r,extendable_max:s,domain:a}=n,{positive:o,negative:l,extendable_min:u,extendable_max:h,domain:c}=t;if(o>0){if(!u)return!1;let d=i/e;s&&(d=i/Math.max(e,o),a[1]=-a[0]/d),c[0]=-c[1]*d}else if(l>0){if(!h)return!1;let d=e/i;r&&(d=e/Math.max(i,i),a[0]=-a[1]/d),c[1]=-c[0]*d}return!0}function S$(n,t){const{extendable_min:e,extendable_max:i,domain:r}=n,{positive:s,negative:a,domain:o}=t;return(s!==0||a!==0)&&!(s>0&&!i)&&!(a>0&&!e)&&(r[0]=o[0],r[1]=o[1],!0)}function A$(n,t){const{positive:e,negative:i,extendable_max:r,domain:s}=n,{positive:a,negative:o,extendable_min:l,domain:u}=t;if(r&&l){const h=Math.max(i,o)/Math.max(e,a);s[1]=-s[0]/h,u[0]=-u[1]*h}else if(l){const h=i/e;u[0]=-u[1]*h}else{if(!r)return!1;{const h=o/a;s[1]=-s[0]/h}}return!0}function w$(n,t){const{extendable_min:e,domain:i}=n,{extendable_max:r,domain:s}=t;return!(!e||!r)&&(i[0]=-i[1],s[1]=-s[0],!0)}const N6t=(n,t)=>{var e,i,r,s,a,o;const l=n.getScale(),u=t.getScale();if(!l||!u)return;const h=(r=(i=(e=n).getDomainAfterSpec)===null||i===void 0?void 0:i.call(e))!==null&&r!==void 0?r:[0,1],c=(o=(a=(s=t).getDomainAfterSpec)===null||a===void 0?void 0:a.call(s))!==null&&o!==void 0?o:[0,1];if(!(h&&c&&y$(h)&&y$(c)))return;const d=b$(n,h),p=b$(t,c),{positive:f,negative:g,extendable_min:_,extendable_max:v,includeZero:y}=d,{positive:b,negative:S,extendable_min:A,extendable_max:w,includeZero:C}=p;if(f===0&&g===0){if(!S$(d,p))return}else if(b===0&&S===0){if(!S$(p,d))return}else if(y||C)if(y&&!C){if(!x$(d,p))return}else if(C&&!y){if(!x$(p,d))return}else{if(g===S)return;if(g>S){if(!A$(d,p))return}else if(!A$(p,d))return}else{if(g===0&&b===0){if(!w$(d,p))return}else if(S===0&&f===0&&!w$(p,d))return;if(g===0&&S===0)if(h[0]===0&&c[0]>0){if(!A)return;c[0]=0}else{if(!(c[0]===0&&h[0]>0)||!_)return;h[0]=0}if(f===0&&b===0)if(h[1]===0&&c[1]>0){if(!w)return;c[1]=0}else{if(!(c[1]===0&&h[1]>0)||!v)return;h[1]=0}}l.domain(h),u.domain(c)},z6t=(n,t)=>{var e,i,r,s,a;if(!n)return n;const o=(e=t==null?void 0:t.targetAxis)===null||e===void 0?void 0:e.call(t);if(!o)return n;const l=(i=t==null?void 0:t.currentAxis)===null||i===void 0?void 0:i.call(t);if(!l)return n;const u=(r=l.getTickData())===null||r===void 0?void 0:r.getDataView();if(!u||!u.transformsArr.find(y=>y.type==="ticks"))return n;const h=l.getScale();if(!h)return n;const c=(a=(s=o.getTickData())===null||s===void 0?void 0:s.getDataView())===null||a===void 0?void 0:a.latestData;if(!(c!=null&&c.length))return n;const d=o.getScale();if(!d)return n;const p=d.domain(),f=p[1]-p[0];if(f===0)return n;const g=h.domain(),_=g[1]-g[0];if(f===0)return n;const v=c.map(y=>{const b=(y.value-p[0])/f;return _*b+g[0]});return Al(v)};class Ey extends JF{constructor(){super(Ey.type),this.type="AxisSyncPlugin"}_checkEnableSync(t){if(!ti(t.getScale().type))return!1;const e=t.getSpec().sync;return!!(e!=null&&e.axisId)&&e}_getTargetAxis(t,e){const i=t.getOption().getChart().getComponentByUserId(e.axisId);return i!=null&&i.type.startsWith("cartesianAxis")?i:null}onInit(t,e){const i=this._checkEnableSync(e);if(!i||!i.zeroAlign)return;const r=this._getTargetAxis(e,i);r&&e.event.on(Wt.scaleDomainUpdate,{filter:({model:s})=>s.id===e.id||s.id===r.id},()=>{N6t(r,e)})}onDidCompile(t,e){const i=this._checkEnableSync(e);if(!i)return;const r=this._getTargetAxis(e,i);if(r&&i.tickAlign){ie(e.getOption().dataSet,"tickAlign",z6t);const s={targetAxis:()=>r,currentAxis:()=>e};e.addTransformToTickData({type:"tickAlign",options:s,level:Number.MAX_SAFE_INTEGER},!1)}}}Ey.pluginType="component",Ey.type="AxisSyncPlugin";function H6t(n){return String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\(/g,"&#40;").replace(/  /g," &nbsp;")}const zx=(n,t)=>n?(t||(t=n.getBoundingClientRect()),n.offsetWidth>0?t.width/n.offsetWidth:t.height/n.offsetHeight):1,WE=(n,t)=>{var e;let i,r;(n==null?void 0:n.type)!=="rich"&&(n==null?void 0:n.type)!=="html"?(n=(n??"").toString(),t.multiLine?(i=n.split(`
`),i=i.map((a,o)=>o<i.length-1?a+`
`:a)):i=[n],r=i.map(a=>Object.assign(Object.assign({},t),{text:a}))):(r=n.text,i=n);const s=OEt({wordBreak:(e=t.wordBreak)!==null&&e!==void 0?e:"break-word",maxWidth:t.maxWidth?t.maxWidth:void 0,width:0,height:0,textConfig:r});return{width:s.width(),height:s.height(),text:i}},C$="vchart-tooltip-container",k$="",$E={offsetX:10,offsetY:10,sanitize:H6t};function Es(n,t){return le(t,`component.${n}`)}function Lu(n,t,e,i){if(n)return{formatFunc:n,args:[e,i]};const r=Z.getFormatter();return t&&r?{formatFunc:r,args:[e,i,t]}:{}}const V6t={left:{textAlign:"center",textBaseline:"bottom"},right:{textAlign:"center",textBaseline:"bottom"},radius:{},angle:{}};function W6t(n){return(n=Oo(n)).startSymbol=Oo(n.startSymbol),n.endSymbol=Oo(n.endSymbol),n}function Oy(n){let t=0;return le(n,"tick.visible")&&(t+=le(n,"tick.tickSize")),le(n,"label.visible")&&(t+=le(n,"label.space")),t}function Ry(n,t){var e,i,r,s,a,o;return{min:(r=(e=n.min)!==null&&e!==void 0?e:(i=n.range)===null||i===void 0?void 0:i.min)!==null&&r!==void 0?r:t==null?void 0:t.min,max:(o=(s=n.max)!==null&&s!==void 0?s:(a=n.range)===null||a===void 0?void 0:a.max)!==null&&o!==void 0?o:t==null?void 0:t.max}}function T$(n){const t=n==null?void 0:n.orient;return t==="top"||t==="bottom"||t==="left"||t==="right"||t==="z"}function M$(n){const t=n==null?void 0:n.orient;return t==="angle"||t==="radius"}const Tv=(n,t,e)=>{var i;const r=(i=t==="band"?Es("axisBand",e):["linear","log","symlog"].includes(t)?Es("axisLinear",e):{})!==null&&i!==void 0?i:{},s=Ii(n)?Es("axisX",e):cl(n)?Es("axisY",e):Es("axisZ",e);return Ut({},Es("axis",e),r,s)},GE=(n,t,e)=>{var i;const r=(i=t==="band"?Es("axisBand",e):t==="linear"?Es("axisLinear",e):{})!==null&&i!==void 0?i:{},s=Es(n==="angle"?"axisAngle":"axisRadius",e);return Ut({},Es("axis",e),r,s)},Eit=n=>n==="band"||n==="ordinal"||n==="point";function nm(n,t){return{id:n,label:n,value:t,rawValue:n}}function Oit(n,t){const{x1:e,y1:i,x2:r,y2:s}=t,{x1:a,y1:o,x2:l,y2:u}=n.AABBBounds,{dx:h=0,dy:c=0}=n.attribute;let d=0,p=0;a<e&&(d=e-a),o<i&&(p=i-o),l>r&&(d=r-l),u>s&&(p=s-u),d&&n.setAttribute("dx",d+h),p&&n.setAttribute("dy",p+c)}function P$(n,t,e,i){let r=0,s=n.length-1;for(;r<=s;){const a=Math.floor((r+s)/2),o=n[a];if(o[e]<=t&&o[i||e]>=t)return o;o[e]>t?s=a-1:r=a+1}return null}const $6t=(n,t)=>{var e,i;const r=ot((e=t.axes)!==null&&e!==void 0?e:[]),{bandField:s,linearField:a,xField:o,yField:l}=(i=Es(mt.crosshair,n))!==null&&i!==void 0?i:{},u=r.find(p=>Ii(p.orient));let h;h=z(u)?Ut({},Eit(u.type)?s:a,o):o;const c=r.find(p=>cl(p.orient));let d;return d=z(c)?Ut({},qn(c.type)?s:a,l):l,{xField:h,yField:d}},G6t=(n,t)=>{var e,i;const r=ot((e=t.axes)!==null&&e!==void 0?e:[]),{bandField:s,linearField:a,categoryField:o,valueField:l}=(i=Es(mt.crosshair,n))!==null&&i!==void 0?i:{},u=r.find(p=>p.orient==="angle");let h;h=z(u)?Ut({},Eit(u.type)?s:a,o):o;const c=r.find(p=>p.orient==="radius");let d;return d=z(c)?Ut({},qn(c.type)?s:a,l):l,{categoryField:h,valueField:d}},Rit=(n=3,t,e,i,r,s,a,o=!1,l,u)=>{const h=1&n,c=2&n;e||(e={x:0,y:0});let d=null,p=null,f=0,g=0;if(i.size){const P=Array.from(i.values())[0];f=P.axis.getScale().scale(P.value)+P.axis.getLayoutStartPoint().x-e.x,d=P.axis}if(r.size){const P=Array.from(r.values())[0];g=P.axis.getScale().scale(P.value)+P.axis.getLayoutStartPoint().y-e.y,p=P.axis}const _=!!i.size&&Number.isFinite(f),v=!!r.size&&Number.isFinite(g),y=o&&!_&&z(l),b=o&&!v&&z(u);let S,A,w;h&&(S=y?l:{height:0,leftPos:0,rightPos:0,topPos:0,x:0,bottom:{visible:!1,text:"",dx:0,dy:0},top:{visible:!1,text:"",dx:0,dy:0},visible:_,axis:d}),c&&(A=b?u:{width:0,leftPos:0,topPos:0,bottomPos:0,y:0,left:{visible:!1,text:"",dx:0,dy:0},right:{visible:!1,text:"",dx:0,dy:0},visible:v,axis:p});let C,k=0,M=0;if(s&&i.forEach(({axis:P,value:E})=>{var I;E=E??"";let D=null;const N=P.getScale();if(qn(N.type))w=N.bandwidth(),w===0&&N.step&&(k=N.step());else if(ti(N.type)){const O=t.fieldX[0],L=t.fieldX2,H=P$(t.getViewData().latestData,+E,O,L);if(H){const j=t.dataToPositionX(H);L?(w=Math.abs(j-t.dataToPositionX1(H)),E=`${H[O]} ~ ${H[L]}`):w=1,f=j}D=P.niceLabelFormatter}if(S&&(!((I=s.label)===null||I===void 0)&&I.visible)&&!y){const O=Oy(P.getSpec());P.getOrient()==="bottom"?(S.bottom.visible=!0,S.bottom.defaultFormatter=D,S.bottom.text=E,S.bottom.dx=0,S.bottom.dy=O):P.getOrient()==="top"&&(S.top.visible=!0,S.top.defaultFormatter=D,S.top.text=E,S.top.dx=0,S.top.dy=-O)}}),a&&r.forEach(({axis:P,value:E})=>{var I;E=E??"";let D=null;const N=P.getScale();if(qn(N.type))C=N.bandwidth(),C===0&&N.step&&(M=N.step());else if(ti(N.type)){const O=t.fieldY[0],L=t.fieldY2,H=P$(t.getViewData().latestData,+E,O,L);if(H){const j=t.dataToPositionY(H);L?(C=Math.abs(j-t.dataToPositionY1(H)),E=`${H[O]} ~ ${H[L]}`):C=1,g=j}D=P.niceLabelFormatter}if(A&&(!((I=a.label)===null||I===void 0)&&I.visible)&&!b){const O=Oy(P.getSpec());P.getOrient()==="left"?(A.left.visible=!0,A.left.defaultFormatter=D,A.left.text=E,A.left.dx=-O,A.left.dy=0):P.getOrient()==="right"&&(A.right.visible=!0,A.right.defaultFormatter=D,A.right.text=E,A.right.dx=O,A.right.dy=0)}}),S&&!y){const P={x1:1/0,y1:1/0,x2:-1/0,y2:-1/0};if(E$(P,i),S.leftPos=P.x1,S.rightPos=P.x2,S.topPos=P.y1,S.height=P.y2-P.y1,S.x=f+e.x,s&&s.label){const{top:E,bottom:I}=S;E.visible&&Hx(E,"top",s.label),I.visible&&Hx(I,"bottom",s.label)}}if(A&&!b){const P={x1:1/0,y1:1/0,x2:-1/0,y2:-1/0};if(E$(P,r),A.leftPos=P.x1,A.topPos=P.y1,A.bottomPos=P.y2,A.width=P.x2-P.x1,A.y=g+e.y,a&&a.label){const{left:E,right:I}=A;E.visible&&Hx(E,"left",a.label),I.visible&&Hx(I,"right",a.label)}}return{x:h&&S?S:void 0,y:c&&A?A:void 0,offsetWidth:k,offsetHeight:M,bandWidth:w??0,bandHeight:C??0}},Hx=(n,t,e)=>{const{formatMethod:i,formatter:r}=e,{formatFunc:s,args:a}=Lu(i,r,n.text,{label:n.text,position:t});s?n.text=s(...a):n.defaultFormatter&&(n.text=n.defaultFormatter(n.text))},E$=(n,t)=>{t.forEach(({axis:e})=>{e.getRegions().forEach(i=>{n.x1=Math.min(n.x1,i.getLayoutStartPoint().x),n.y1=Math.min(n.y1,i.getLayoutStartPoint().y),n.x2=Math.max(n.x2,i.getLayoutStartPoint().x+i.getLayoutRect().width),n.y2=Math.max(n.y2,i.getLayoutStartPoint().y+i.getLayoutRect().height)})})},Iit=(n,t,e,i)=>{const{x:r,topPos:s,height:a}=t,o=n.type;let l;if(o==="line")l={visible:!0,start:{x:r+e/2,y:s},end:{x:r+e/2,y:s+a}};else if(o==="rect"){const u=Dit(n,e,t.axis),{leftPos:h,rightPos:c}=t;l={visible:!0,start:{x:Math.max(r-u/2-i/2,h),y:s},end:{x:Math.min(r+e+u/2+i/2,c),y:s+a}}}return l},Lit=(n,t,e,i)=>{const{leftPos:r,width:s,y:a}=t,o=n.type;let l;if(o==="line")l={visible:!0,start:{x:r,y:a+e/2},end:{x:r+s,y:a+e/2}};else if(o==="rect"){const u=Dit(n,e,t.axis),{topPos:h,bottomPos:c}=t;l={visible:!0,start:{x:r,y:Math.max(a-u/2-i/2,h)},end:{x:r+s,y:Math.min(a+e+u/2+i/2,c)}}}return l},Dit=(n,t,e)=>{var i,r,s;let a=0;if(!((i=n.style)===null||i===void 0)&&i.sizePercent)a=(n.style.sizePercent-1)*t;else if(typeof((r=n.style)===null||r===void 0?void 0:r.size)=="number")a=n.style.size-t;else if(typeof((s=n.style)===null||s===void 0?void 0:s.size)=="function"){const o=e.getLayoutRect();a=n.style.size(o,e)-t}return a},Qp=(n,t)=>{let e;if(z(n)){if(Mt(n))e=n;else if(ft(n)){const i=n(t);Mt(i)&&(e=i)}}return e},Bit={left:["left","center"],right:["right","center"],top:["center","top"],lt:["left","top"],tl:["left","top"],rt:["right","top"],tr:["right","top"],bottom:["center","bottom"],bl:["left","bottom"],lb:["left","bottom"],br:["right","bottom"],rb:["right","bottom"],inside:["center","center"],center:["center","center"],centerBottom:["center","centerBottom"],centerTop:["center","centerTop"],centerLeft:["centerLeft","center"],centerRight:["centerRight","center"]},Mv=(n,t)=>{var e,i;return(i=(e=Bit[n])===null||e===void 0?void 0:e[0])!==null&&i!==void 0?i:t},Pv=(n,t)=>{var e,i;return(i=(e=Bit[n])===null||e===void 0?void 0:e[1])!==null&&i!==void 0?i:t},O$=(n,t,e)=>{const i=new Map,r=new Map;n.forEach(({axis:p,value:f})=>{["top","bottom"].includes(p.getOrient())?i.set(p.getSpecIndex(),{value:f,axis:p}):r.set(p.getSpecIndex(),{value:f,axis:p})});const s={visible:!!i.size,type:"rect"},a={visible:!!r.size,type:"rect"},{x:o,y:l,offsetWidth:u,offsetHeight:h,bandWidth:c,bandHeight:d}=Rit(3,t,e,i,r,s,a);return o?Iit(s,o,c,u):l?Lit(a,l,d,h):void 0},U6t=n=>ae(n)&&(z(n.left)||z(n.right)||z(n.top)||z(n.bottom)),Y6t=n=>ae(n)&&(z(n.x)||z(n.y)),X6t={fontFamily:mC.fontFamily,spacing:10,wordBreak:"break-word"};function tf(n={},t,e){var i,r;return Object.assign(Object.assign({},e??X6t),{fill:(i=n.fill)!==null&&i!==void 0?i:n.fontColor,textAlign:n.textAlign,textBaseline:n.textBaseline,fontFamily:(r=n.fontFamily)!==null&&r!==void 0?r:t==null?void 0:t.fontFamily,fontSize:n.fontSize,fontWeight:n.fontWeight,lineHeight:n.lineHeight,spacing:n.spacing,multiLine:n.multiLine,maxWidth:n.maxWidth,wordBreak:n.wordBreak,autoWidth:n.autoWidth})}const K6t=n=>{var t;const{backgroundColor:e,border:i,shadow:r}=n,s={lineWidth:(t=i==null?void 0:i.width)!==null&&t!==void 0?t:0,shadow:!!r};i!=null&&i.color&&(s.stroke=i.color),e&&(s.fill=e),r&&(s.shadowColor=r.color,s.shadowBlur=r.blur,s.shadowOffsetX=r.x,s.shadowOffsetY=r.y,s.shadowSpread=r.spread);const{radius:a}=i??{};return z(a)&&(s.cornerRadius=[a,a,a,a]),s},q6t=(n,t,e)=>{var i,r,s,a,o;const{style:l={},enterable:u,transitionDuration:h}=t,{panel:c={},titleLabel:d,shape:p,keyLabel:f,valueLabel:g,spaceRow:_,maxContentHeight:v,align:y}=l,b=ds(c.padding),S=Ru(c.padding),A=tf(Object.assign({textAlign:y==="right"?"right":"left"},d),e),w=tf(Object.assign({textAlign:y==="right"?"right":"left"},f),e),C=tf(g,e),k={fill:!0,size:(i=p==null?void 0:p.size)!==null&&i!==void 0?i:8,spacing:(r=p==null?void 0:p.spacing)!==null&&r!==void 0?r:6},M={panel:K6t(c),padding:b,title:{},content:[],titleStyle:{value:A,spaceRow:_},contentStyle:{shape:k,key:w,value:C,spaceRow:_},hasContentShape:!1,keyWidth:0,valueWidth:0,maxContentHeight:v,enterable:u,transitionDuration:h,align:y},{title:P={},content:E=[]}=n;let I=S.left+S.right,D=S.top+S.bottom,N=S.top+S.bottom,O=0;const L=E.filter(xt=>(xt.key||xt.value)&&xt.visible!==!1),H=!!L.length;let j=0,G=0,U=0,$=0;if(H){const xt=[],ht=[],St=[],yt=[];let vt=0;M.content=L.map((pt,jt)=>{let Lt=0;const{hasShape:Yt,key:Nt,shapeType:te="",shapeFill:ge,shapeStroke:Pe,shapeLineWidth:we,shapeSize:Ze,value:je,isKeyAdaptive:oe,spaceRow:ne,keyStyle:De,valueStyle:ye,shapeHollow:Xe,shapeColor:Gi}=pt,wn={height:0,spaceRow:ne??_};if(z(Nt)){const Mi=Ut({},w,tf(De,void 0,{})),{width:di,height:Ui,text:oo}=WE(Nt,Mi);wn.key=Object.assign(Object.assign({width:di,height:Ui},Mi),{text:oo}),oe?ht.push(di):xt.push(di),Lt=Math.max(Lt,Ui)}if(z(je)){const Mi=Ut({},C,tf(ye,void 0,{})),{width:di,height:Ui,text:oo}=WE(je,Mi);wn.value=Object.assign(Object.assign({width:di,height:Ui},Mi),{text:oo}),St.push(di),Lt=Math.max(Lt,Ui)}if(Yt){const Mi={visible:!0,symbolType:te},di=ge??Gi;Xe?Mi.stroke=di:Mi.fill=di,Mi.stroke=Pe??di,Mi.lineWidth=we,wn.shape=Mi;const Ui=Ze??k.size;Lt=Math.max(Ui,Lt),yt.push(Ui)}else wn.shape={visible:!1};return wn.height=Lt,vt+=Lt,jt<L.length-1&&(vt+=wn.spaceRow),wn}),D+=vt,N+=Math.min(vt,v??1/0),j=xt.length?Vi(xt):0,G=ht.length?Vi(ht):0,U=St.length?Vi(St):0,$=yt.length?Vi(yt)+k.spacing:0,O=Math.max($+j+w.spacing+U+C.spacing,$+G,O),M.hasContentShape=!!yt.length,M.keyWidth=j,M.valueWidth=U}let q=0,tt=0,it=0;const{visible:nt=!0,value:K="",valueStyle:J,spaceRow:Q}=P;M.title.visible=nt,M.title.spaceRow=Q??_;let dt={};const bt=()=>dt.autoWidth&&dt.multiLine!==!1;if(nt){dt=Ut({},A,tf(J,void 0,{})),bt()&&(dt.multiLine=(s=dt.multiLine)===null||s===void 0||s,dt.maxWidth=(a=dt.maxWidth)!==null&&a!==void 0?a:H?Math.ceil(O):void 0);const{text:xt,width:ht,height:St}=WE(K,dt);M.title.value=Object.assign(Object.assign({width:bt()?Math.min(ht,(o=dt.maxWidth)!==null&&o!==void 0?o:Number.MAX_VALUE):ht,height:St},dt),{text:xt}),q=M.title.value.width,tt=M.title.value.height,it=tt+(H?M.title.spaceRow:0)}return D+=it,N+=it,M.title.width=q,M.title.height=tt,bt()?I+=O||q:I+=Math.max(q,O),H&&M.content.forEach(xt=>{var ht;const St=xt.value;St&&((ht=St.autoWidth)===null||ht===void 0||ht)&&(St.width=I-S.left-S.right-$-j-w.spacing-C.spacing,St.maxWidth||(St.maxWidth=Math.ceil(St.width)),M.valueWidth=Math.max(M.valueWidth,St.width))}),M.panel.width=I,M.panel.height=D,M.panelDomHeight=N,M},ef=(n,t)=>z(t)?n.map(e=>t[e]):void 0,Ad=(n,t)=>e=>n.every((i,r)=>e[i]===(t==null?void 0:t[r])),Ev=n=>!F(n)&&(ut(n)?n.length>0&&n.every(z):Object.keys(n).length>0);function Z6t(n,t,e){var i,r,s;const a=Object.assign({regionIndex:0},t),o=e.getOption(),l=o.getRegionsInUserIdOrIndex(z(a.regionId)?[a.regionId]:void 0,z(a.regionIndex)?[a.regionIndex]:void 0)[0];if(!l)return"none";const u=J6t(n,l),h=(i=a.activeType)!==null&&i!==void 0?i:u.length>1?"dimension":"mark",c=l.getLayoutStartPoint(),d=l.getLayoutRect(),p=o.globalInstance.getContainer(),f=Object.assign({x:0,y:0},p?qCt(p):{}),g=v=>{var y;const{dimensionFields:b,dimensionData:S,measureFields:A,measureData:w,groupField:C,groupData:k}=v.data;return(y=v.series.getViewData())===null||y===void 0?void 0:y.latestData.find(P=>Ad(b,S)(P)&&Ad(A,w)(P)&&(F(C)||Ad([C],[k])(P)))},_=v=>{var y,b;const S=(C=>({x:Math.min(Math.max(C.x,0),d.width),y:Math.min(Math.max(C.y,0),d.height)}))(v),A=(y=a.x)!==null&&y!==void 0?y:c.x+S.x,w=(b=a.y)!==null&&b!==void 0?b:c.y+S.y;return{canvasX:A,canvasY:w,clientX:f.x+A,clientY:f.y+w}};if(h==="dimension"){const v=u[0];if(!v)return"none";const y=new Map;u.forEach(w=>{var C;y.has(w.series)||y.set(w.series,[]),(C=y.get(w.series))===null||C===void 0||C.push(w)});const b=[{value:n[v.data.dimensionFields[0]],data:[...y.keys()].map(w=>{var C,k;return{series:w,datum:(k=(C=y.get(w))===null||C===void 0?void 0:C.map(M=>g(M)))!==null&&k!==void 0?k:[]}})}];z(v.dimType)&&(b[0].position=v.pos[v.dimType],b[0].dimType=v.dimType);const S={changePositionOnly:!1,action:"enter",tooltip:null,dimensionInfo:b,chart:(r=o.globalInstance.getChart())!==null&&r!==void 0?r:void 0,datum:void 0,model:void 0,source:Re.chart,event:_({x:u.reduce((w,C)=>w+C.pos.x,0)/u.length,y:u.reduce((w,C)=>w+C.pos.y,0)/u.length}),item:void 0,itemMap:new Map};e.processor.dimension.showTooltip(b,S,!1);const A=o.globalInstance;return ar.globalConfig.uniqueTooltip&&ar.hideTooltip(A.id),h}if(h==="mark"){const v=u[0];if(!v)return"none";const y=Object.assign(Object.assign({},g(v)),n),b=[{datum:[y],series:v.series}],S=[{value:y[v.data.dimensionFields[0]],data:b}],A={changePositionOnly:!1,tooltip:null,dimensionInfo:S,chart:(s=o.globalInstance.getChart())!==null&&s!==void 0?s:void 0,datum:y,model:v.series,source:Re.chart,event:_(v.pos),item:void 0,itemMap:new Map};e.processor.mark.showTooltip({datum:y,mark:null,series:v.series,dimensionInfo:S},A,!1);const w=o.globalInstance;return ar.globalConfig.uniqueTooltip&&ar.hideTooltip(w.id),h}return"none"}const J6t=(n,t)=>{const e=t.getSeries(),i=[];return e.forEach(r=>{var s,a,o,l,u,h,c;const d=r.getDimensionField(),p=r.getMeasureField(),f=r.getSeriesField(),g=z(f)?n[f]:void 0,_=z(f)&&(l=(o=(a=(s=r.getViewDataStatistics)===null||s===void 0?void 0:s.call(r))===null||a===void 0?void 0:a.latestData[f])===null||o===void 0?void 0:o.values)!==null&&l!==void 0?l:[],v=ef(d,n);let y=ef(p,n);const b=Ev(y),S=!b&&z(f)&&F(g)&&_.length>0,A=()=>{var w;const C=(w=r.getViewData())===null||w===void 0?void 0:w.latestData.find(Ad(d,v));if(!b&&(y=ef(p,C),!Ev(y)))return;const k=r.type===at.pie?r.dataToCentralPosition(C):r.dataToPosition(C);F(k)||isNaN(k.x)||isNaN(k.y)||i.push({pos:k,data:{dimensionFields:d,dimensionData:v,measureFields:p,measureData:y,hasMeasureData:b,groupField:f,groupData:g},series:r})};if(r.coordinate==="cartesian"){const w=r,C=qn((h=(u=r.getYAxisHelper())===null||u===void 0?void 0:u.getScale(0))===null||h===void 0?void 0:h.type)?"y":"x",k=d.map((P,E)=>[P,E]).filter(([,P])=>F(v==null?void 0:v[P]));let M=[v??[]];k.length>0&&k.forEach(([P,E])=>{var I,D,N,O;const L=(O=(N=(D=(I=r.getViewDataStatistics)===null||I===void 0?void 0:I.call(r))===null||D===void 0?void 0:D.latestData[P])===null||N===void 0?void 0:N.values)!==null&&O!==void 0?O:[],H=[];M.forEach(j=>{L.forEach(G=>{var U;const $=(U=j==null?void 0:j.slice())!==null&&U!==void 0?U:[];$[E]=G,H.push($)})}),M=H}),M.forEach(P=>{var E,I;if(S){const D=(E=w.getViewData())===null||E===void 0?void 0:E.latestData.filter(Ad(d,P));_.forEach(N=>{const O=D.find(H=>H[f]===N);if(y=ef(p,O),!Ev(y))return;const L=w.dataToPosition(O);F(L)||isNaN(L.x)||isNaN(L.y)||i.push({pos:L,data:{dimensionFields:d,dimensionData:P,measureFields:p,measureData:y,hasMeasureData:b,groupField:f,groupData:N},series:r,dimType:C})})}else{const D=(I=w.getViewData())===null||I===void 0?void 0:I.latestData.find(Ad(d,P));if(!b&&(y=ef(p,D),!Ev(y)))return;const N=w.dataToPosition(D);if(F(N)||isNaN(N.x)||isNaN(N.y))return;i.push({pos:N,data:{dimensionFields:d,dimensionData:P,measureFields:p,measureData:y,hasMeasureData:b,groupField:f,groupData:g},dimType:C,series:r})}})}else if(r.coordinate==="polar")if(r.type===at.pie)A();else{const w=r;if(S){const C=((c=w.getViewData())===null||c===void 0?void 0:c.latestData.filter(Ad(d,v))).find(k=>k[f]===g);_.forEach(k=>{if(y=ef(p,C),!Ev(y))return;const M=w.dataToPosition(C);F(M)||isNaN(M.x)||isNaN(M.y)||i.push({pos:M,data:{dimensionFields:d,dimensionData:v,measureFields:p,measureData:y,hasMeasureData:b,groupField:f,groupData:k},series:r})})}else A()}else r.coordinate==="geo"&&A()}),i},Ih=n=>{var t,e,i;if((n==null?void 0:n.visible)===!1)return[];const r={mark:((t=n==null?void 0:n.mark)===null||t===void 0?void 0:t.visible)!==!1,dimension:((e=n==null?void 0:n.dimension)===null||e===void 0?void 0:e.visible)!==!1,group:((i=n==null?void 0:n.group)===null||i===void 0?void 0:i.visible)!==!1};return z(n==null?void 0:n.activeType)&&Object.keys(r).forEach(s=>{var a;r[s]=(a=n==null?void 0:n.activeType)===null||a===void 0?void 0:a.includes(s)}),Object.keys(r).filter(s=>r[s])};function Q6t(n){return F(n.mark)&&F(n.model)&&F(n.datum)}const R$=(n,t,e)=>{var i,r;return(r=(i=n.tooltipHelper)===null||i===void 0?void 0:i.getDefaultTooltipPattern(t,e))!==null&&r!==void 0?r:null};class tHt{constructor(){this.activeTriggerSet={mark:new Set,dimension:new Set,group:new Set},this.ignoreTriggerSet={mark:new Set,dimension:new Set,group:new Set}}}class _s extends tHt{constructor(t){super(),this._getSeriesCacheInfo=()=>{var e,i,r;const{series:s}=this,a=s.getSeriesField();return{seriesFields:z(a)?ot(a):(e=s.getSeriesKeys())!==null&&e!==void 0?e:[],dimensionFields:(i=s.getDimensionField())!==null&&i!==void 0?i:[],measureFields:(r=s.getMeasureField())!==null&&r!==void 0?r:[],type:s.type}},this._getDimensionData=e=>{const{dimensionFields:i}=this._seriesCacheInfo;return i[0]&&(e==null?void 0:e[i[0]])},this._getMeasureData=e=>{const{measureFields:i}=this._seriesCacheInfo;return i[0]&&(e==null?void 0:e[i[0]])},this._getSeriesFieldData=e=>{const{dimensionFields:i,seriesFields:r}=this._seriesCacheInfo;if(z(r[0])&&(e!=null&&e[r[0]]))return e==null?void 0:e[r[0]];const s=i[i.length-1];return i.length>1&&(r.length===0||this.series.getSeriesKeys().length),e==null?void 0:e[s]},this._getSeriesStyle=(e,i,r)=>{var s;for(const a of ot(i)){const o=(s=this.series.getSeriesStyle(e))===null||s===void 0?void 0:s(a);if(z(o))return o}return r},this.markTooltipKeyCallback=(e,i)=>this._getSeriesFieldData(e),this.markTooltipValueCallback=(e,i)=>this._getMeasureData(e),this.shapeTypeCallback=(e,i)=>{var r;return(r=this._getSeriesStyle(e,"shape",null))!==null&&r!==void 0?r:this._getSeriesStyle(e,"symbolType",this.series.getDefaultShapeType())},this.shapeColorCallback=(e,i)=>this._getSeriesStyle(e,["fill","stroke"]),this.shapeStrokeCallback=(e,i)=>this._getSeriesStyle(e,["stroke","fill"]),this.dimensionTooltipTitleCallback=(e,i)=>this._getDimensionData(e),this.groupTooltipTitleCallback=(e,i)=>this._getSeriesFieldData(e),this.groupTooltipKeyCallback=(e,i)=>{const{seriesFields:r}=this._seriesCacheInfo;let s=this._seriesCacheInfo.dimensionFields;return r[0]&&(s=s.filter(a=>a!==r[0])),s.map(a=>e==null?void 0:e[a]).join("-")},this.series=t,this.updateTooltipSpec()}updateTooltipSpec(){var t,e,i,r;const s=(e=(t=this.series.getSpec())===null||t===void 0?void 0:t.tooltip)!==null&&e!==void 0?e:{},a=(r=(i=this.series.getChart().getSpec())===null||i===void 0?void 0:i.tooltip)!==null&&r!==void 0?r:{},o=Object.assign(Object.assign({},a),s);["mark","dimension","group"].forEach(l=>{const u=o[l];z(u)&&(o[l]=Object.assign(Object.assign({},u),{title:bD(u.title,{seriesId:this.series.id},!0),content:xD(u.content,{seriesId:this.series.id},!0)}))}),this.spec=o,this.activeType=Ih(o),this._seriesCacheInfo=this._getSeriesCacheInfo()}getDefaultTooltipPattern(t,e){switch(t){case"mark":return{visible:!0,activeType:t,title:{key:void 0,value:this.dimensionTooltipTitleCallback,hasShape:!1},content:[{seriesId:this.series.id,key:this.markTooltipKeyCallback,value:this.markTooltipValueCallback,hasShape:!0,shapeType:this.shapeTypeCallback,shapeColor:this.shapeColorCallback,shapeStroke:this.shapeStrokeCallback,shapeHollow:!1}]};case"group":return{visible:!0,activeType:t,title:{key:void 0,value:this.groupTooltipTitleCallback,hasShape:!1},content:[{seriesId:this.series.id,key:this.groupTooltipKeyCallback,value:this.markTooltipValueCallback,hasShape:!0,shapeType:this.shapeTypeCallback,shapeColor:this.shapeColorCallback,shapeStroke:this.shapeStrokeCallback,shapeHollow:!1}]};case"dimension":if(e){const i={key:void 0,value:this.dimensionTooltipTitleCallback,hasShape:!1},r=[];return e.forEach(({data:s})=>s.forEach(({series:a})=>{r.push({seriesId:a.id,key:this.markTooltipKeyCallback,value:this.markTooltipValueCallback,hasShape:!0,shapeType:this.shapeTypeCallback,shapeColor:this.shapeColorCallback,shapeStroke:this.shapeStrokeCallback,shapeHollow:!1})})),{visible:!0,activeType:t,title:i,content:r}}}return null}}const SC=(n,t,e)=>{const i=ft(t)?t(n):t;return e?Object.assign(Object.assign({},n),i):Object.assign(Object.assign({},i),n)},bD=(n,t,e)=>z(n)?ft(n)?(...i)=>SC(n(...i),t,e):SC(n,t,e):void 0,xD=(n,t,e)=>z(n)?ot(n).map(i=>ft(i)?(...r)=>ot(i(...r)).map(s=>SC(s,t,e)):SC(i,t,e)):void 0,eHt=(n,t,e,i)=>{var r,s,a,o,l,u,h;const c=Object.assign(Object.assign({},t),{activeType:n}),{style:d={}}=t;switch(n){case"mark":case"group":if(e){const b=(s=(r=e.tooltipHelper)===null||r===void 0?void 0:r.spec)!==null&&s!==void 0?s:{};if(z(b.visible)||z(b.activeType)?c.visible=Ih(b).includes(n):z(t.visible)||z(t.activeType)?c.visible=Ih(t).includes(n):c.visible=!0,c.handler=(o=(a=b.handler)!==null&&a!==void 0?a:t.handler)!==null&&o!==void 0?o:void 0,(l=c.handler)===null||l===void 0?void 0:l.showTooltip)return c}break;case"dimension":if(i!=null&&i.length&&(Fit(i).every(b=>{var S;return!Ih((S=b.tooltipHelper)===null||S===void 0?void 0:S.spec).includes("dimension")})?c.visible=!1:z(t.visible)||z(t.activeType)?c.visible=Ih(t).includes("dimension"):c.visible=!0,c.handler=(u=t.handler)!==null&&u!==void 0?u:void 0,(h=c.handler)===null||h===void 0?void 0:h.showTooltip))return c}const p=iHt(n,e,i),f=nHt(n,e,i),g=Ut({},cs(t[n]),f),_=p.title,v=UE(void 0,g,d.shape,void 0,_);z(g.title)?g.title=bD(g.title,Object.assign(Object.assign({},_),v)):g.title=bD(_,v,!0);const y=ot(p.content);if(z(g.content)){const b=rHt(y);g.content=xD(g.content,S=>UE(S,g,d.shape,b))}else g.content=xD(y,b=>UE(void 0,g,d.shape,void 0,b),!0);return c[n]=Object.assign(Object.assign(Object.assign({},p),g),{activeType:n}),c},iHt=(n,t,e)=>{var i;let r={};switch(n){case"mark":case"group":t&&(r=(i=R$(t,n))!==null&&i!==void 0?i:{});break;case"dimension":if(e!=null&&e.length){const s=[];e.forEach(({data:o})=>o.forEach(l=>{const{series:u}=l,h=[Object.assign(Object.assign({},e[0]),{data:[l]})],c=R$(u,"dimension",h);c&&s.push(c)}));const a=[];s.forEach(({content:o})=>{ft(o)?a.push(o):a.push(...ot(o))}),r=Object.assign(Object.assign({},s[0]),{content:a})}}return r},nHt=(n,t,e)=>{var i,r;let s={};switch(n){case"mark":case"group":if(t){const a=(r=(i=t.tooltipHelper)===null||i===void 0?void 0:i.spec)!==null&&r!==void 0?r:{};s=a[n]?cs(a[n]):{}}break;case"dimension":if(e!=null&&e.length){const a=Fit(e).filter(o=>{var l;const u=(l=o.tooltipHelper)===null||l===void 0?void 0:l.spec;return z(u==null?void 0:u.dimension)&&Ih(u).includes("dimension")}).map(o=>o.tooltipHelper.spec.dimension);if(a.length){let o=[];a.every(({content:l})=>F(l))?o=void 0:a.forEach(({content:l})=>{F(l)||(ft(l)?o==null||o.push(l):o==null||o.push(...ot(l)))}),s=Object.assign(Object.assign({},a[0]),{content:o})}}}return s},Fit=Em(n=>n.reduce((t,e)=>t.concat(e.data.map(i=>i.series).filter(z)),[])),rHt=n=>{const t={};return n.forEach(e=>{var i;const r=(i=e.seriesId)!==null&&i!==void 0?i:0;t[r]||(t[r]=e)}),t},UE=(n,t,e,i,r)=>{var s,a,o;e&&(e.shapeSize=(s=e.shapeSize)!==null&&s!==void 0?s:e.size);const l=[n,t,e,(o=i==null?void 0:i[(a=n==null?void 0:n.seriesId)!==null&&a!==void 0?a:0])!==null&&o!==void 0?o:i==null?void 0:i[0],r].filter(z),u=new Set(l.reduce((c,d)=>c.concat(Object.keys(d)),[]).filter(c=>c.toLowerCase().includes("shape"))),h={};return u.forEach(c=>{let d,p=0;do d=l[p++][c];while(p<l.length&&F(d));d!==void 0&&(h[c]=d)}),h},Er=(n,t,e,i)=>{let r;if(r=ft(n)?n(t,e):n,i){const{formatFunc:s,args:a}=Lu(void 0,i,n,t);s&&a&&(r=s(...a))}return r},AC=(n,t,e)=>F(n)?n:ft(n)?n(t,e):n,sHt=(n,t,e)=>{if(F(n))return n;let i=[];return ot(n).forEach(r=>{ft(r)?i=i.concat(ot(r(t,e))):i.push(r)}),i};function aHt(n){var t;const e=!((t=n[0])===null||t===void 0)&&t.series?[{data:n,value:""}]:n;for(const{data:i}of e)for(const{datum:r}of i)for(const s of r??[])if(s)return s}class xc{}xc.dom=`${Kt}_TOOLTIP_HANDLER_DOM`,xc.canvas=`${Kt}_TOOLTIP_HANDLER_CANVAS`;const oHt="vchart-tooltip-element",lHt=20,I$={key:"其他",value:"..."},SD=(n,t,e)=>{if(!t&&!e)return typeof n!="object"?n==null?void 0:n.toString():n;const i=Ro.getInstance();return t=t||"%Y%m%d",((e=e||"local")==="local"?i.timeFormat:i.timeUTCFormat)(t,n)},uHt=(n,t,e)=>{var i,r,s,a;if(!t||((i=e==null?void 0:e.event)===null||i===void 0?void 0:i.type)==="mouseout")return null;const o={title:{},content:[]},l=AC(n.title,t,e),{visible:u,value:h,valueTimeFormat:c,valueTimeFormatMode:d,valueStyle:p,hasShape:f,valueFormatter:g}=l??{},_=Er(u,t,e)!==!1;if(l&&_){const A=aHt(t);o.title={value:SD(Er(h,A,e,g),c,d),valueStyle:Er(p,A,e),hasShape:f}}else o.title={hasShape:!1,visible:!1};const v=sHt(n.content,t,e),{maxLineCount:y=lHt}=n,b=n.othersLine?Object.assign(Object.assign({},I$),n.othersLine):I$,S=A=>{if(A!=null&&A.length)for(const w of A)for(const C of v??[]){const k=L$(w,C,e);if(k.visible!==!1){if(o.content.length===y-1){o.content.push(Object.assign(Object.assign({},k),b));break}if(!(o.content.length<y))break;o.content.push(k)}}};switch(n.activeType){case"mark":S((r=t[0])===null||r===void 0?void 0:r.datum);break;case"group":S(e.groupDatum);break;case"dimension":for(const{data:A}of t){for(const{datum:w,series:C}of A){if(!Ih((s=C.tooltipHelper)===null||s===void 0?void 0:s.spec).includes("dimension"))continue;const k=(a=v==null?void 0:v.filter(M=>F(M.seriesId)||M.seriesId===C.id))!==null&&a!==void 0?a:[];for(const M of w){for(const P of k){const E=L$(M,P,e);if(E.visible!==!1){if(o.content.length===y-1){o.content.push(Object.assign(Object.assign({},E),b));break}if(!(o.content.length<y))break;o.content.push(E)}}if(o.content.length>=y)break}if(o.content.length>=y)break}if(o.content.length>=y)break}}return o.title&&(o.content.length>0&&o.content[0].shapeType?(F(o.title.shapeType)&&(o.title.shapeType=o.content[0].shapeType),F(o.title.shapeColor)&&(o.title.shapeColor=o.content[0].shapeColor)):o.title.hasShape=!1),o},L$=(n,t,e)=>{const i=SD(Er(t.key,n,e,t.keyFormatter),t.keyTimeFormat,t.keyTimeFormatMode),r=SD(Er(t.value,n,e,t.valueFormatter),t.valueTimeFormat,t.valueTimeFormatMode),s=Er(t.visible,n,e)!==!1&&(z(i)||z(r)),a=Er(t.isKeyAdaptive,n,e),o=Er(t.spaceRow,n,e),l=Er(t.shapeType,n,e),u=Er(t.shapeColor,n,e),h=Er(t.shapeFill,n,e),c=Er(t.shapeStroke,n,e),d=Er(t.shapeLineWidth,n,e),p=Er(t.shapeHollow,n,e),f=Er(t.keyStyle,n,e),g=Er(t.valueStyle,n,e);return{key:i,value:r,visible:s,isKeyAdaptive:a,hasShape:t.hasShape,shapeType:l,shapeFill:h,shapeStroke:c,shapeLineWidth:d,shapeHollow:p,shapeColor:u,keyStyle:f,valueStyle:g,spaceRow:o,datum:n}};class QF extends JF{constructor(){super(...arguments),this._visible=!0,this._attributes=null,this._isReleased=!1,this.showTooltip=(t,e,i)=>{const{changePositionOnly:r}=i;return r?this.changeTooltipPosition(i,e):this.changeTooltip(!0,i,e)},this._changeTooltip=(t,e,i)=>this._isReleased?1:t?this._changeTooltipPosition(e,i):(this._clearAllCache(),this._updateTooltip(!1,e),0),this._changeTooltipPosition=(t,e)=>{var i,r,s;if(this._isReleased)return 1;const a=t.event,{tooltipSpec:o,tooltipActual:l,changePositionOnly:u}=t;if(o.enterable){if(!this._isPointerEscaped&&this._isPointerMovingToTooltip(t))return this._isTooltipPaused||(this._isTooltipPaused=!0,this._cachePointerTimer=setTimeout(()=>{this._isPointerEscaped=!0},300)),0;this._isTooltipPaused=!1,this._isPointerEscaped=!1,clearTimeout(this._cachePointerTimer),this._cachePointerPosition=this._getPointerPositionRelativeToTooltipParent(t)}const h=l.activeType;if(o.handler)return(s=(r=(i=o.handler).showTooltip)===null||r===void 0?void 0:r.call(i,h,e,t))!==null&&s!==void 0?s:0;const c=o[h];if(!c)return 1;const d=this._getActualTooltipPosition(l,t,this._getTooltipBoxSize(l,u));l.position=d,c.updatePosition&&(l.position=c.updatePosition(l.position,e,t));let p=(c==null?void 0:c.visible)!==!1;return e&&a.type!=="pointerout"&&l.visible&&(l.title||l.content)||(p=!1),this._updateTooltip(p,Object.assign(Object.assign({},t),{changePositionOnly:u})),0},this._getActualTooltipPosition=(t,e,i)=>{var r,s,a,o,l,u,h;const c=e.event,{tooltipSpec:d}=e,p=(r=e.dimensionInfo)===null||r===void 0?void 0:r[0],f={x:1/0,y:1/0};let{offsetX:g,offsetY:_}=this._option;if(!d)return this._cacheTooltipPosition=void 0,f;const{activeType:v,data:y}=t,b=d[v],S=AC(b.position,y,e),A=(s=AC(b.positionMode,y,e))!==null&&s!==void 0?s:v==="mark"?"mark":"pointer",w=this._getParentElement(d),{width:C=0,height:k=0}=i??{},M=d.renderMode==="canvas",P=(a=e==null?void 0:e.chart)===null||a===void 0?void 0:a.getCanvasRect(),E=(o=P==null?void 0:P.width)!==null&&o!==void 0?o:qf,I=(l=P==null?void 0:P.height)!==null&&l!==void 0?l:Zf;let D=!1;const N={width:0,height:0};let O={x:0,y:0},L={x:0,y:0},H=1,j=1;if(ga(this._env)&&!d.confine){if(N.width=window.innerWidth,N.height=window.innerHeight,!M){L=(u=w==null?void 0:w.getBoundingClientRect())!==null&&u!==void 0?u:f;const oe=(h=this._compiler.getCanvas())!==null&&h!==void 0?h:this._chartContainer,ne=oe==null?void 0:oe.getBoundingClientRect();O={x:ne.x-L.x,y:ne.y-L.y},H=zx(oe,ne),j=zx(w,L)}}else N.width=E,N.height=I;const G=j/H;let U,$,q,tt,it=S,nt=S;const K=({orient:oe,mode:ne,offset:De})=>{var ye;let Xe,Gi;const wn=e.model,Mi=wn==null?void 0:wn.getLayoutStartPoint();if(g=De??g,ne==="mark"){D=!0;const di=e.item,Ui=di==null?void 0:di.getBounds();Ui&&Mi&&(Xe=Ui.x1+Mi.x,Gi=Ui.x2+Mi.x)}else if(ne==="crosshair"&&((ye=p==null?void 0:p.axis)===null||ye===void 0?void 0:ye.getCoordinateType())==="cartesian"){D=!0;const di=O$(e.dimensionInfo,rp(this._component.getRegions(),"cartesian"),Mi);di&&(Xe=di.start.x,Gi=di.end.x)}else it=oe;if(D)switch(Mv(oe)){case"left":U=Xe-C*G-g;break;case"right":U=Gi+g;break;case"center":U=(Xe+Gi)/2-C*G/2;break;case"centerLeft":U=(Xe+Gi)/2-C*G-g;break;case"centerRight":U=(Xe+Gi)/2+g}},J=({orient:oe,mode:ne,offset:De})=>{var ye;let Xe,Gi;const wn=e.model,Mi=wn==null?void 0:wn.getLayoutStartPoint();if(_=De??_,ne==="mark"){D=!0;const di=e.item,Ui=di==null?void 0:di.getBounds();Ui&&Mi&&(Xe=Ui.y1+Mi.y,Gi=Ui.y2+Mi.y)}else if(ne==="crosshair"&&((ye=p==null?void 0:p.axis)===null||ye===void 0?void 0:ye.getCoordinateType())==="cartesian"){D=!0;const di=O$(e.dimensionInfo,rp(this._component.getRegions(),"cartesian"),Mi);di&&(Xe=di.start.y,Gi=di.end.y)}else nt=oe;if(D)switch(Pv(oe)){case"top":$=Xe-k*G-_;break;case"bottom":$=Gi+_;break;case"center":$=(Xe+Gi)/2-k*G/2;break;case"centerTop":$=(Xe+Gi)/2-k*G-_;break;case"centerBottom":$=(Xe+Gi)/2+_}};if(ae(S)){if(U6t(S)){const{left:oe,right:ne,top:De,bottom:ye}=S;U=Qp(oe,c),$=Qp(De,c),q=Qp(ne,c),tt=Qp(ye,c)}else if(Y6t(S)){const{x:oe,y:ne}=S;Mt(oe)||ft(oe)?U=Qp(oe,c):K(oe),Mt(ne)||ft(ne)?$=Qp(ne,c):J(ne)}}else z(S)&&(K({orient:S,mode:A}),J({orient:S,mode:A}));let Q,dt;const{canvasX:bt,canvasY:xt}=c;if(st(U))Q=U;else if(st(q))Q=E-C*G-q;else{const oe=bt;switch(Mv(it,"right")){case"center":Q=oe-C*G/2;break;case"left":case"centerLeft":Q=oe-C*G-g;break;case"right":case"centerRight":Q=oe+g}}if(st($))dt=$;else if(st(tt))dt=I-k*G-tt;else{const oe=xt;switch(Pv(nt,"bottom")){case"center":dt=oe-k*G/2;break;case"top":case"centerTop":dt=oe-k*G-_;break;case"bottom":case"centerBottom":dt=oe+_}}Q*=H,dt*=H,ga(this._env)&&(Q+=O.x,dt+=O.y),Q/=j,dt/=j;const{width:ht,height:St}=N,yt=()=>Q*j+L.x<0,vt=()=>(Q+C)*j+L.x>ht,pt=()=>dt*j+L.y<0,jt=()=>(dt+k)*j+L.y>St,Lt=()=>{yt()&&(D?Q=-L.x/j:Mv(S,"right")==="center"?Q+=g+C/2:Q+=2*g+C)},Yt=()=>{yt()&&(Q=-L.x/j)},Nt=()=>{vt()&&(D?Q=(ht-L.x)/j-C:Mv(S,"right")==="center"?Q-=g+C/2:Q-=2*g+C)},te=()=>{vt()&&(Q=(ht-L.x)/j-C)},ge=()=>{pt()&&(D?dt=-L.y/j:Pv(S,"bottom")==="center"?dt+=_+k/2:dt+=2*_+k)},Pe=()=>{pt()&&(dt=0-L.y/j)},we=()=>{jt()&&(D?dt=(St-L.y)/j-k:Pv(S,"bottom")==="center"?dt-=_+k/2:dt-=2*_+k)},Ze=()=>{jt()&&(dt=(St-L.y)/j-k)};switch(Mv(S,"right")){case"center":case"centerLeft":case"centerRight":yt()?(Lt(),te()):(Nt(),Yt());break;case"left":Lt(),te();break;case"right":Nt(),Yt()}switch(Pv(S,"bottom")){case"center":case"centerTop":case"centerBottom":pt()?(ge(),Ze()):(we(),Pe());break;case"top":ge(),Ze();break;case"bottom":we(),Pe()}const je={x:Q,y:dt};return this._cacheTooltipPosition=je,this._cacheTooltipSize={width:C,height:k},je}}get env(){return this._env}onAdd(t){super.onAdd(t);const e=t.component;this._component=e,this._chartOption=e.getOption(),this._env=this._chartOption.mode,this._chartContainer=this._chartOption.globalInstance.getContainer(),this._compiler=e.getCompiler(),this._initFromSpec()}hideTooltip(t){return this.changeTooltip(!1,t)}release(){var t,e,i;this._clearAllCache();const r=(t=this._component.getSpec())!==null&&t!==void 0?t:{};r.handler?(i=(e=r.handler).release)===null||i===void 0||i.call(e):(this._removeTooltip(),this._isReleased=!0)}_clearAllCache(){this._isTooltipPaused=!1,this._isPointerEscaped=!1,clearTimeout(this._cachePointerTimer),this._cachePointerTimer=-1,this._cachePointerPosition=void 0,this._cacheTooltipPosition=void 0,this._cacheTooltipSize=void 0}_throttle(t){const e=this._component.getSpec();let i;return i=Mt(e.throttleInterval)?e.throttleInterval:e.renderMode==="html"&&e.transitionDuration?50:10,Pc(t,i)}_getDefaultOption(){var t,e;const{offset:i}=this._component.getSpec();return Object.assign(Object.assign({},$E),{offsetX:(t=i==null?void 0:i.x)!==null&&t!==void 0?t:$E.offsetX,offsetY:(e=i==null?void 0:i.y)!==null&&e!==void 0?e:$E.offsetY})}_getTooltipBoxSize(t,e){var i,r,s;if(!e||F(this._attributes)){const u=(r=(i=this._chartOption)===null||i===void 0?void 0:i.getTheme())!==null&&r!==void 0?r:{};this._attributes=q6t(t,this._component.getSpec(),u)}const{panel:a,panelDomHeight:o}=(s=this._attributes)!==null&&s!==void 0?s:{},l=this._component.getSpec().renderMode==="canvas";return{width:(a==null?void 0:a.width)+(l?a.lineWidth:0),height:(o??(a==null?void 0:a.height))+(l?a.lineWidth:0)}}_getPointerPositionRelativeToTooltipParent(t){var e,i;let{canvasX:r,canvasY:s}=t.event;const{tooltipSpec:a}=t,o={x:1/0,y:1/0},l=a.renderMode==="canvas",u=this._getParentElement(a);let h={x:0,y:0},c={x:0,y:0},d=1,p=1;if(ga(this._env)&&!a.confine&&!l){c=(e=u==null?void 0:u.getBoundingClientRect())!==null&&e!==void 0?e:o;const f=(i=this._compiler.getCanvas())!==null&&i!==void 0?i:this._chartContainer,g=f==null?void 0:f.getBoundingClientRect();h={x:g.x-c.x,y:g.y-c.y},d=zx(f,g),p=zx(u,c)}return r*=d,s*=d,ga(this._env)&&(r+=h.x,s+=h.y),r/=p,s/=p,{x:r,y:s}}_isPointerMovingToTooltip(t){if(!this._cacheTooltipPosition||!this._cacheTooltipSize||!this._cachePointerPosition)return!1;const{width:e,height:i}=this._cacheTooltipSize,{x:r=0,y:s}=this._cacheTooltipPosition,a=this._getPointerPositionRelativeToTooltipParent(t);if(A0(a,{x1:r,y1:s,x2:r+e,y2:s+i},!1))return!0;const o={x:r,y:s},l={x:o.x+e,y:o.y},u={x:o.x,y:o.y+i},h={x:l.x,y:u.y},c=this._cachePointerPosition;return vd([c,o,l],a.x,a.y)||vd([c,u,h],a.x,a.y)||vd([c,o,h],a.x,a.y)||vd([c,l,u],a.x,a.y)}_getParentElement(t){return t.parentElement}getTooltipContainer(){return this._container}_initFromSpec(){this._option=this._getDefaultOption(),this.changeTooltip=this._throttle(this._changeTooltip),this.changeTooltipPosition=this._throttle(this._changeTooltipPosition)}reInit(){this._initFromSpec()}}QF.specKey="tooltip";const ki=(n,t)=>z(n)?ut(n)?n.map(e=>`${e}px`).join(" "):`${n}px`:t??"initial",jit=n=>{const t=n.split(" ").map(e=>Number.isNaN(e)?Number.parseFloat(e.substring(0,e.length-2)):Number.parseFloat(e));return t.length===1?t[0]:t};let YE;const hHt=(n=document.body)=>{if(F(YE)){const t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",n.appendChild(t);const e=document.createElement("div");t.appendChild(e),YE=t.offsetWidth-e.offsetWidth,t.parentNode.removeChild(t)}return YE};function cHt(n){var t,e,i;const{panel:r={},title:s,content:a,titleStyle:o={},contentStyle:l={},padding:u,keyWidth:h,valueWidth:c,enterable:d,transitionDuration:p,panelDomHeight:f=0,align:g="left"}=n??{},{fill:_,shadow:v,shadowBlur:y,shadowColor:b,shadowOffsetX:S,shadowOffsetY:A,shadowSpread:w,cornerRadius:C,stroke:k,lineWidth:M=0,width:P=0}=r,{value:E={}}=o,{shape:I={},key:D={},value:N={}}=l,O=dHt(I),L=Ov(D),H=Ov(N),{bottom:j,left:G,right:U,top:$}=Ru(u),q=g==="right"?"marginLeft":"marginRight";return{align:g,panel:{width:ki(P+2*M),minHeight:ki(f+2*M),paddingBottom:ki(j),paddingLeft:ki(G),paddingRight:ki(U),paddingTop:ki($),borderColor:k,borderWidth:ki(M),borderRadius:ki(C),backgroundColor:_?`${_}`:"transparent",boxShadow:v?`${S}px ${A}px ${y}px ${w}px ${b}`:"initial",pointerEvents:d?"auto":"none",transitionDuration:p?`${p}ms`:"initial",transitionProperty:p?"transform":"initial",transitionTimingFunction:p?"ease-out":"initial"},title:Object.assign({marginTop:"0px",marginBottom:a!=null&&a.length?ki(s==null?void 0:s.spaceRow):"0px"},Ov(Ut({},E,s==null?void 0:s.value))),content:{},shapeColumn:{common:O,items:a==null?void 0:a.map(({spaceRow:tt},it)=>({marginTop:"0px",marginBottom:it<a.length-1?ki(tt):"0px"})),width:ki(I.size),[q]:ki((t=I.spacing)!==null&&t!==void 0?t:8)},keyColumn:{common:L,items:a==null?void 0:a.map(({key:tt,spaceRow:it},nt)=>Object.assign(Object.assign(Object.assign({marginTop:"0px",marginBottom:nt<a.length-1?ki(it):"0px"},L),Ov(tt)),tt!=null&&tt.multiLine?{width:ki(Math.ceil(tt.width))}:void 0)),width:ki(h),[q]:ki((e=D.spacing)!==null&&e!==void 0?e:26)},valueColumn:{common:H,items:a==null?void 0:a.map(({value:tt,spaceRow:it},nt)=>Object.assign(Object.assign(Object.assign({marginTop:"0px",marginBottom:nt<a.length-1?ki(it):"0px"},H),Ov(tt)),tt!=null&&tt.multiLine?{width:ki(Math.ceil(tt.width))}:void 0)),width:ki(c),[q]:ki((i=N.spacing)!==null&&i!==void 0?i:0)}}}function Ov(n,t){if(!n)return;const{fontFamily:e,fontSize:i,fill:r,textAlign:s,lineHeight:a,fontWeight:o,multiLine:l,wordBreak:u,maxWidth:h}=Ut({},t,n),c={};return c.fontFamily=e,c.fontSize=ki(i),c.color=r,c.textAlign=s,c.lineHeight=ki(au(a,i)),c.fontWeight=o,c.whiteSpace=l?"initial":"nowrap",c.wordBreak=l?u??"break-word":"normal",c.maxWidth=ki(h),c}function dHt(n,t){if(!n)return;const{size:e}=Ut({},t,n),i={};return i.width=ki(e),i}class Ya{static isInstance(t){return!!t&&t.type===Ya.type}setOption(t){this._option=t,Object.values(this.children).forEach(e=>e.setOption(t))}getParentEl(){return Ya.isInstance(this.parent)?this.parent.product:this.parent}constructor(t,e,i){this.type=Ya.type,this._renderContentCache=null,this.children={},this.parent=t,this._option=e,this.childIndex=i??0}init(t,e){}initAll(){this.init(),Object.values(this.children).forEach(t=>t.initAll())}setStyle(t){this.product&&t&&Object.keys(t).forEach(e=>{this.product.style[e]!==t[e]&&(this.product.style[e]=t[e])})}setContent(t){}setVisibility(t){if(!this.product)return;const{style:e}=this.product;e.visibility=t?"visible":"hidden",Object.values(this.children).forEach(i=>i.setVisibility(t))}getVisibility(){var t,e;return!!(!((e=(t=this.product)===null||t===void 0?void 0:t.style)===null||e===void 0)&&e.visibility)&&this.product.style.visibility!=="hidden"}release(){var t;if(Object.values(this.children).forEach(e=>e.release()),this.children={},this.product){try{(t=this.getParentEl())===null||t===void 0||t.removeChild(this.product)}catch{}this.product=null}}createElement(t,e,i,r){const s=Th==null?void 0:Th.createElement(t),a=this.getParentEl();if(!s||!a)return;e&&s.classList.add(...e),i&&Object.keys(i).forEach(l=>{s.style[l]=i[l]}),r&&(s.id=r);let o=this.childIndex;if(Ya.isInstance(this.parent)){let l=Number.MAX_VALUE;for(let u=0;u<a.children.length;u++){const h=Object.values(this.parent.children).find(c=>c.product===a.children[u]);h.childIndex>this.childIndex&&h.childIndex<l&&(l=h.childIndex,o=u)}}return o>=a.children.length?a.appendChild(s):a.insertBefore(s,a.children[o]),s}}Ya.type="tooltipModel";const pHt={fontSize:"13px",marginBottom:"0px",fontWeight:"normal"},fHt={boxSizing:"border-box"},gHt={display:"inline-block",verticalAlign:"top"},mHt={paddingTop:"0px",paddingBottom:"0px",textAlign:"left",fontWeight:"normal"},vHt={paddingTop:"0px",paddingBottom:"0px",textAlign:"left",fontWeight:"normal"},_Ht={paddingTop:"0px",paddingBottom:"0px",textAlign:"right",fontWeight:"normal"},yHt={lineHeight:"normal",boxSizing:"border-box"};class Nit extends Ya{init(t,e,i){if(!this.product){const r=this.createElement(i??"div",[...t??[],"shape"],void 0,e);this.product=r}}setStyle(t,e){super.setStyle(t),this.setSvg(e)}setContent(t){this.setSvg(t)}setSvg(t){const e=bHt(t,this._option.valueToHtml);this.product&&e!==this._svgHtmlCache&&(this._svgHtmlCache=e,this.product.innerHTML=e)}release(){super.release(),this._svgHtmlCache=""}}function bHt(n,t){var e,i,r,s,a,o;if(!(n!=null&&n.hasShape)||!n.symbolType)return"";const{symbolType:l,fill:u,stroke:h,hollow:c=!1}=n,d=n.size?t(n.size):"8px",p=n.lineWidth?t(n.lineWidth)+"px":"0px";let f="currentColor";const g=()=>h?t(h):f,_=jit(d),v=k=>new uy({symbolType:k,size:_,fill:!0});let y=v(l);const b=y.getParsedPath();b.path||(y=v(b.pathStr));const S=y.getParsedPath().path,A=S.toString(),w=S.bounds;let C=`${w.x1} ${w.y1} ${w.width()} ${w.height()}`;if(p!=="0px"){const[k,M,P,E]=C.split(" ").map(D=>Number(D)),I=Number(p.slice(0,-2));C=`${k-I/2} ${M-I/2} ${P+I} ${E+I}`}if(!u||It(u)||c)return f=c?"none":u?t(u):"currentColor",`
    <svg width="${d}" height="${d}" viewBox="${C}"
      style="display: block;">
      <path
        d="${A}"
        style="fill: ${f}; stroke: ${g()}; stroke-width: ${p}"
      >
      </path>
    </svg>`;if(ae(u)){f=(e="gradientColor"+n.index)!==null&&e!==void 0?e:"";let k="";const M=((i=u.stops)!==null&&i!==void 0?i:[]).map(P=>`<stop offset="${t(P.offset.toString())}" stop-color="${t(P.color)}"/>`).join("");return u.gradient==="radial"?k=`<radialGradient id="${f}" cx="50%" cy="50%" r="50%" fx="0%" fy="0%">
      ${M}
      </radialGradient>`:u.gradient==="linear"&&(k=`<linearGradient id="${f}" x1="${100*((r=u.x0)!==null&&r!==void 0?r:0)}%" y1="${100*((s=u.y0)!==null&&s!==void 0?s:0)}%" x2="${100*((a=u.x1)!==null&&a!==void 0?a:0)}%" y2="${100*((o=u.y1)!==null&&o!==void 0?o:0)}%">
      ${M}
      </linearGradient>`),`
    <svg width="${d}" height="${d}" viewBox="-0.5 -0.5 1 1"
      style="display: block;">
      ${k}
      <path
        d="${A}"
        style="fill: url(#${f}); stroke: ${g()}; stroke-width: ${p}"
      >
      </path>
    </svg>`}return""}class zit extends Ya{init(t,e,i){this.product||(this.product=this.createElement(i??"span",t,void 0,e))}setContent(t,e){if(!this.product)return;let i=this._option.valueToHtml(t);e&&(i=i.replaceAll(`
`,"<br>")),i!==this.product.innerHTML&&(this.product.innerHTML=i)}}const D$={overflowWrap:"normal",wordWrap:"normal"};class xHt extends Ya{constructor(t,e,i,r){super(t,e,r),this.className=i}init(){var t,e;this.product||(this.product=this.createElement("div",[this.className]));const i=(e=(t=this._option.getTooltipActual())===null||t===void 0?void 0:t.content)!==null&&e!==void 0?e:[];if(this.className!=="shape-box"||i.some(r=>r.hasShape&&r.shapeType)){Object.keys(this.children).forEach(r=>{const s=pl(r);s>=i.length&&(this.children[s].release(),delete this.children[s])});for(let r=0;r<i.length;r++)if(!this.children[r]){if(this.className==="key-box"||this.className==="value-box"){const s=new zit(this.product,this._option,r);s.init([this.className.substring(0,this.className.indexOf("-"))],void 0,"div"),this.children[r]=s}else if(this.className==="shape-box"){const s=new Nit(this.product,this._option,r);s.init(["shape"],void 0,"div"),this.children[r]=s}}}else Object.keys(this.children).forEach(r=>{const s=pl(r);this.children[s].release(),delete this.children[s]})}setStyle(){var t,e,i,r;const s=this._option.getTooltipStyle();super.setStyle(Ut({},gHt,s.content,this._getContentColumnStyle()));const a=(e=(t=this._option.getTooltipActual())===null||t===void 0?void 0:t.content)!==null&&e!==void 0?e:[],o=(r=(i=this._option.getTooltipAttributes())===null||i===void 0?void 0:i.content)!==null&&r!==void 0?r:[],l=(u,h)=>{var c,d;const{key:p,isKeyAdaptive:f}=u,{height:g}=o[h],{keyColumn:_}=s,v=Ut({},f?vHt:mHt,Object.assign(Object.assign(Object.assign({height:ki(g)},D$),_.common),(c=_.items)===null||c===void 0?void 0:c[h]));return It(p)&&((d=p==null?void 0:p.trim)===null||d===void 0?void 0:d.call(p))!==""||Mt(p)||v.visibility?v.visibility="visible":v.visibility="hidden",v};a.forEach((u,h)=>{var c;this.className==="key-box"?this.children[h].setStyle(l(u,h)):this.className==="value-box"?this.children[h].setStyle(((d,p)=>{var f;const{height:g}=o[p],{valueColumn:_}=s;return Ut({},_Ht,Object.assign(Object.assign(Object.assign({height:ki(g)},D$),_.common),(f=_.items)===null||f===void 0?void 0:f[p]))})(0,h)):this.className==="shape-box"&&((c=this.children[h])===null||c===void 0||c.setStyle(((d,p)=>{var f,g,_,v;const{height:y}=o[p],{shapeColumn:b}=s,S=l(d,p),A=`calc((${(g=(f=S.lineHeight)!==null&&f!==void 0?f:S.fontSize)!==null&&g!==void 0?g:"18px"} - ${(_=b.width)!==null&&_!==void 0?_:"8px"}) / 2)`;return Ut({},yHt,Object.assign(Object.assign({height:ki(y),paddingTop:A},b.common),(v=b.items)===null||v===void 0?void 0:v[p]))})(u,h),this._getShapeSvgOption(u,h)))})}setContent(){var t,e,i,r;const s=(e=(t=this._option.getTooltipActual())===null||t===void 0?void 0:t.content)!==null&&e!==void 0?e:[],a=(r=(i=this._option.getTooltipAttributes())===null||i===void 0?void 0:i.content)!==null&&r!==void 0?r:[];s.forEach((o,l)=>{var u,h,c,d,p,f,g;let _;if(this.className==="key-box"){const v=o.key;_=It(v)&&((u=v==null?void 0:v.trim)===null||u===void 0?void 0:u.call(v))!==""||Mt(v)?v:k$,(h=this.children[l])===null||h===void 0||h.setContent(_,(c=a[l].key)===null||c===void 0?void 0:c.multiLine)}else if(this.className==="value-box"){const v=o.value;_=It(v)&&((d=v==null?void 0:v.trim)===null||d===void 0?void 0:d.call(v))!==""||Mt(v)?v:k$,(p=this.children[l])===null||p===void 0||p.setContent(_,(f=a[l].value)===null||f===void 0?void 0:f.multiLine)}else this.className==="shape-box"&&(_=this._getShapeSvgOption(o,l),(g=this.children[l])===null||g===void 0||g.setContent(_))})}_getContentColumnStyle(){var t,e;const i=this._option.getTooltipStyle();switch(this.className){case"shape-box":const r=(e=(t=this._option.getTooltipActual())===null||t===void 0?void 0:t.content)!==null&&e!==void 0?e:[];return Object.assign(Object.assign({},i.shapeColumn),this.className!=="shape-box"||r.some(s=>s.hasShape&&s.shapeType)?{}:{display:"none"});case"key-box":return i.keyColumn;case"value-box":return i.valueColumn}}_getShapeSvgOption(t,e){var i,r;const s=this._option.getTooltipStyle(),a=Object.assign(Object.assign({},s.shapeColumn),(i=s.shapeColumn.items)===null||i===void 0?void 0:i[e]);return{hasShape:t.hasShape,symbolType:t.shapeType,size:a.width,fill:(r=t.shapeFill)!==null&&r!==void 0?r:t.shapeColor,stroke:t.shapeStroke,lineWidth:t.shapeLineWidth,hollow:t.shapeHollow,index:e}}}class SHt extends Ya{init(){this.product||(this.product=this.createElement("div",["container-box"]));const{align:t}=this._option.getTooltipAttributes();t==="right"?(this.valueBox||(this.valueBox=this._initBox("value-box",0)),this.keyBox||(this.keyBox=this._initBox("key-box",1)),this.shapeBox||(this.shapeBox=this._initBox("shape-box",2))):(this.shapeBox||(this.shapeBox=this._initBox("shape-box",0)),this.keyBox||(this.keyBox=this._initBox("key-box",1)),this.valueBox||(this.valueBox=this._initBox("value-box",2)))}_initBox(t,e){const i=new xHt(this.product,this._option,t,e);return i.init(),this.children[i.childIndex]=i,i}setStyle(t){super.setStyle(Ut(this._getContentContainerStyle(),t)),Object.values(this.children).forEach(e=>{e.setStyle()})}setContent(){Object.values(this.children).forEach(t=>{t.setContent()})}_getContentContainerStyle(){const t={whiteSpace:"nowrap",lineHeight:"0px"},{panelDomHeight:e,panel:i,maxContentHeight:r}=this._option.getTooltipAttributes();if(z(r)&&e<i.height){const{shapeColumn:s={},keyColumn:a={},valueColumn:o={},panel:l={}}=this._option.getTooltipStyle(),u=[s.width,s.marginRight,a.width,a.marginRight,o.width,o.marginRight,l.paddingRight].reduce((h,c)=>h+jit(c),0);return Object.assign(Object.assign({},t),{width:`${u+hHt(this._option.getContainer())}px`,maxHeight:ki(r),overflow:"auto"})}return t}release(){super.release(),this.shapeBox=null,this.keyBox=null,this.valueBox=null}}class AHt extends Ya{init(){const t=this._option.getTooltipActual();this.product||(this.product=this.createElement("h2"));const{align:e}=this._option.getTooltipAttributes();e!=="right"||this.textSpan||this._initTextSpan(0);const{title:i}=t;i!=null&&i.hasShape&&(i!=null&&i.shapeType)?this.shape||this._initShape(e==="right"?1:0):this.shape&&this._releaseShape(),e==="right"||this.textSpan||this._initTextSpan(1)}_initShape(t=0){const e=new Nit(this.product,this._option,t);e.init(),this.shape=e,this.children[e.childIndex]=e}_releaseShape(){this.shape&&(this.shape.release(),delete this.children[this.shape.childIndex],this.shape=null)}_initTextSpan(t=1){const e=new zit(this.product,this._option,t);e.init(),this.textSpan=e,this.children[e.childIndex]=e}setStyle(t){var e,i,r,s;const a=this._option.getTooltipStyle(),o=this._option.getTooltipActual(),{title:l}=o;super.setStyle(Ut({},pHt,a.title,t)),(e=this.shape)===null||e===void 0||e.setStyle({paddingRight:(i=a.shapeColumn.common)===null||i===void 0?void 0:i.marginRight},{hasShape:l==null?void 0:l.hasShape,symbolType:l==null?void 0:l.shapeType,size:(r=a.shapeColumn.common)===null||r===void 0?void 0:r.width,fill:l==null?void 0:l.shapeColor,hollow:l==null?void 0:l.shapeHollow}),(s=this.textSpan)===null||s===void 0||s.setStyle({color:"inherit"})}setContent(){var t,e,i,r,s,a;const o=this._option.getTooltipStyle(),l=this._option.getTooltipActual(),u=this._option.getTooltipAttributes(),{title:h}=l;this.init(),(t=this.shape)===null||t===void 0||t.setStyle(void 0,{hasShape:h==null?void 0:h.hasShape,symbolType:h==null?void 0:h.shapeType,size:(e=o.shapeColumn.common)===null||e===void 0?void 0:e.width,fill:h==null?void 0:h.shapeColor,hollow:h==null?void 0:h.shapeHollow}),(i=this.textSpan)===null||i===void 0||i.setStyle({color:"inherit"}),(r=this.textSpan)===null||r===void 0||r.setContent(h==null?void 0:h.value,(a=(s=u.title)===null||s===void 0?void 0:s.value)===null||a===void 0?void 0:a.multiLine)}release(){super.release(),this.shape=null,this.textSpan=null}}const Hit="99999999999999";class wHt extends Ya{constructor(t,e,i){super(t.getContainer(),t,0),this.title=null,this.content=null,this._classList=e,this._id=i}setVisibility(t){if(super.setVisibility(t),!this.product)return;const{classList:e}=this.product;t?e.add("visible"):e.remove("visible")}init(){var t;const e=this._option.getTooltipActual();this.product||this._initPanel(this._classList,this._id);const{title:i}=e;(i==null?void 0:i.visible)!==!1&&z(i==null?void 0:i.value)?this.title||this._initTitle():this.title&&this._releaseTitle(),((t=e.content)!==null&&t!==void 0?t:[]).length>0?this.content||this._initContent():this.content&&this._releaseContent()}_initPanel(t,e){const i=this.createElement("div",t,{left:"0",top:"0",pointerEvents:"none",padding:"12px",position:"absolute",zIndex:Hit,fontFamily:"sans-serif",fontSize:"11px",borderRadius:"3px",borderStyle:"solid",lineHeight:"initial",background:"#fff",boxShadow:"2px 2px 4px rgba(0, 0, 0, 0.1)",maxWidth:"100wh",maxHeight:"100vh"},e);this.product=i}_initTitle(){const t=new AHt(this.product,this._option,0);t.init(),this.title=t,this.children[t.childIndex]=t}_releaseTitle(){this.title&&(this.title.release(),delete this.children[this.title.childIndex],this.title=null)}_initContent(){const t=new SHt(this.product,this._option,1);t.init(),this.content=t,this.children[t.childIndex]=t}_releaseContent(){this.content&&(this.content.release(),delete this.children[this.content.childIndex],this.content=null)}setStyle(){const t=this._option.getTooltipStyle();super.setStyle(Ut({},fHt,t.panel)),Object.values(this.children).forEach(e=>e.setStyle())}setContent(){Object.values(this.children).forEach(t=>{t.setContent()})}release(){super.release(),this.title=null,this.content=null}}const Vit=n=>{Z.registerComponentPlugin(n.type,n)};class mT extends QF{getVisibility(){var t;return!!(!((t=this.model)===null||t===void 0)&&t.getVisibility())}setVisibility(t){var e;t!==this.getVisibility()&&((e=this.model)===null||e===void 0||e.setVisibility(t))}constructor(){super(mT.type),this.type=xc.dom,this._tooltipContainer=Th==null?void 0:Th.body}onAdd(t){super.onAdd(t),this._initStyle(),this.initEl()}initEl(){const t=this._component.getSpec(),e=t.parentElement;if(Th&&e){for(let i=0;i<e.children.length;i++)if(e.children[i].classList.contains(C$)){this._container=e.children[i];break}this._container||(this._container=Th.createElement("div"),this._container.style.position="relative",this._container.style.zIndex=Hit,this._container.classList.add(C$),e.appendChild(this._container)),this.model=new wHt({valueToHtml:this._option.sanitize,getTooltipStyle:()=>this._domStyle,getTooltipActual:()=>this._tooltipActual,getTooltipAttributes:()=>this._attributes,getContainer:()=>this._container},[t.className],this.name)}}_removeTooltip(){var t;(t=this.model)===null||t===void 0||t.release(),this._container=null}_updateTooltip(t,e){var i,r;const{tooltipActual:s,tooltipSpec:a}=e;if(t&&this.model){if(!e.changePositionOnly){this._tooltipActual=s,this._initStyle();const l=!this.model.product;this.model.initAll(),l&&this._initEvent(this.model.product),this.model.setStyle(),this.model.setContent()}this.setVisibility(t);const o=this.model.product;if(o){const{x:l=0,y:u=0}=(i=s.position)!==null&&i!==void 0?i:{};if(a.updateElement){this._updatePosition((r=this._cacheCustomTooltipPosition)!==null&&r!==void 0?r:{x:l,y:u}),a.updateElement(o,s,e);const h=this._getActualTooltipPosition(s,e,{width:o.offsetWidth,height:o.offsetHeight});this._updatePosition(h),this._cacheCustomTooltipPosition=h}else this._updatePosition({x:l,y:u})}}else this.setVisibility(t),this._cacheCustomTooltipPosition=void 0}_initStyle(){this._domStyle=cHt(this._attributes)}_getParentElement(t){var e;return(e=this._container)!==null&&e!==void 0?e:super._getParentElement(t)}isTooltipShown(){return this.getVisibility()}reInit(){super.reInit(),this._initStyle()}_updatePosition({x:t,y:e}){const i=this.model.product;i&&(i.style.transform=`translate3d(${t}px, ${e}px, 0)`)}_initEvent(t){t.addEventListener("pointerleave",e=>{const{renderMode:i,enterable:r}=this._component.getSpec(),s=e.relatedTarget;i==="html"&&r&&(F(s)||s!==this._compiler.getCanvas()&&!Xq(s,this.getTooltipContainer()))&&this._component.hideTooltip()})}}mT.type=xc.dom;const CHt=()=>{Vit(mT)};class vT extends QF{constructor(){super(vT.type),this.type=xc.canvas}onAdd(t){var e;super.onAdd(t),this._tooltipCanvasId=(e=this._chartOption.modeParams)===null||e===void 0?void 0:e.tooltipCanvasId}_initTooltipComponent(t){const e=this._getLayer(t);this._tooltipComponent=new xtt({autoCalculatePosition:!1,autoMeasure:!1}),e.add(this._tooltipComponent)}_getLayer(t){if(this._layer)return this._layer;this._layer=t.createLayer(this._tooltipCanvasId);const e=this._layer.layerHandler.canvas.nativeCanvas;return e&&e.style&&(e.style.touchAction="none",e.style.pointerEvents="none"),this._layer}_removeTooltip(){this._layer&&this._layer.removeAllChild(),this._attributes=null}_updateTooltip(t,e){this._visible=t;const i=this._compiler.getStage();if(!i)return;if(!t)return void(this._tooltipComponent&&this._tooltipComponent.attribute.visible&&(this._tooltipComponent.hideAll(),this._tooltipComponent.setAttributes({visibleAll:!1})));this._tooltipComponent||this._initTooltipComponent(i);const{tooltipActual:r}=e,s=r.position;e.changePositionOnly?z(s)&&this._tooltipComponent.setAttributes(s):this._tooltipComponent.setAttributes(Object.assign(Object.assign({},this._attributes),s)),this._tooltipComponent.attribute.visible||(this._tooltipComponent.showAll(),this._tooltipComponent.setAttributes({visibleAll:!0}))}isTooltipShown(){var t;return(t=this._tooltipComponent)===null||t===void 0?void 0:t.attribute.visibleAll}release(){var t;super.release(),(t=this._layer)===null||t===void 0||t.release()}}vT.type=xc.canvas;const kHt=()=>{Vit(vT)},Nm=(n,t)=>{const e=t.beforeCall();return n.forEach((i,r)=>t.call(i,r,e)),e.keyMap&&(e.keyMap.clear(),e.keyMap=null),n},THt={min:n=>n.length?dn(n.map(t=>1*t)):0,max:n=>n.length?Vi(n.map(t=>1*t)):0,"array-min":n=>n.length?dn(n.map(t=>1*t)):0,"array-max":n=>n.length?Vi(n.map(t=>1*t)):0,values:n=>{const t={},e=[];for(const i of n)t[i]||(e.push(i),t[i]=1);return e}},AD=(n,t)=>{var e,i;let r=t.fields;if(ft(r)&&(r=r()),!(r!=null&&r.length)||!(n!=null&&n.length))return{};r=xg([],r);const s=t.target==="parser"?"parserData":"latestData",a=n[0][s]?n[0][s]:n||[],o=(i=(e=n[0]).getFields)===null||i===void 0?void 0:i.call(e);return Wit(a,r,o)},Wit=(n,t,e)=>{const i={};let r=[],s=[];return t.forEach(a=>{const o=a.key;i[o]={};const l=e==null?void 0:e[o],u=a.operations,h=u.some(p=>p==="min"||p==="max"||p==="allValid");let c=!0;r.length=0,n.forEach(p=>{p&&r.push(p[o])});const d=r.length;if(h){s.length=0,r.forEach((f,g)=>{Zg(f)&&s.push(f)});const p=r;r=s,s=p,c=r.length===d}else r=u.some(p=>p==="array-min"||p==="array-max")?r.reduce((p,f)=>(f&&f.forEach(g=>{Zg(g)&&p.push(g)}),p),[]):r.filter(p=>p!==void 0);a.filter&&(r=r.filter(a.filter)),u.forEach(p=>{if(a.customize)i[o][p]=a.customize;else{if(l&&l.lockStatisticsByDomain&&!F(l.domain)){if(p==="values")return void(i[o][p]=l.domain.slice())}else if(p==="allValid")return;i[o][p]=THt[p](r),p==="array-max"&&(i[o].max=i[o][p]),p==="array-min"&&(i[o].min=i[o][p])}}),h&&(i[o].allValid=c)}),i},MHt=(n,t)=>{const{config:e}=t;if(!e)return n;const{invalidType:i,checkField:r}=e();return i!=="zero"||r&&r.length&&n.forEach(s=>{r.forEach(a=>{Zg(s[a])||(s[a]=0)})}),n};class kl extends Cl{_compileProduct(){var t;const e=(t=this._data)===null||t===void 0?void 0:t.latestData;F(e)||z(this.getProduct())||this._initProduct([])}generateProductId(){var t;return(t=this._data)===null||t===void 0?void 0:t.name}}const Iy=`${Kt}_HIERARCHY_DEPTH`,_u=`${Kt}_HIERARCHY_ROOT`,PHt=`${Kt}_HIERARCHY_ROOT_INDEX`;function rm(){return{keyMap:new Map,needDefaultSeriesField:!this._seriesField,defaultSeriesField:this._seriesField?null:this.getSeriesKeys()[0],getKey:this.generateDefaultDataKey(this._spec.dataKey)}}function fp(n,t,e){n&&(e.needDefaultSeriesField&&(n[Ls]=e.defaultSeriesField),n[$r]=t,n[Ka]=e.getKey(n,t,e))}function t5(){return{keyMap:new Map,needDefaultSeriesField:!0,defaultSeriesField:this.getSeriesKeys()[0],getKey:this.generateDefaultDataKey(this._spec.dataKey),categoryField:this.getCategoryField()}}function _T(n,t,e,i=0,r,s){s===void 0&&(s=t),fp(n,t,e),n[Iy]=i,n[_u]=r||n[e.categoryField],n[PHt]=s,n.children&&n.children.length&&n.children.forEach((a,o)=>_T(a,o,e,n[Iy]+1,n[_u],s))}const B$=["appear","enter","update","exit","disappear","normal"];function Ae(n={},t,e){const i={};for(let r=0;r<B$.length;r++){const s=B$[r],a=t?t[s]:void 0;if(a===!1)continue;if(s==="normal"){a&&(i.normal=a);continue}if(s!=="update"&&!a&&!n[s])continue;let o,l;o=ut(n[s])?n[s]:[Object.assign(Object.assign({},Rh[s]),n[s])],s==="exit"&&o.forEach(u=>{u.controlOptions={stopWhenStateChange:!0}}),a?(l=ut(a)?a.map((u,h)=>{var c;let d=u;return N$(d)&&delete d.type,d.oneByOne&&(d=F$(d,(c=e==null?void 0:e.dataIndex)!==null&&c!==void 0?c:j$,e==null?void 0:e.dataCount)),d}):o.map((u,h)=>{var c;let d=Ut({},o[h],a);return N$(d)&&delete d.type,d.oneByOne&&(d=F$(d,(c=e==null?void 0:e.dataIndex)!==null&&c!==void 0?c:j$,e==null?void 0:e.dataCount)),d}),i[s]=l):i[s]=o}return i.state=i.update,i}function Ee(n,t,e){var i,r,s,a,o;const l={};return z(t.animationAppear)&&(l.appear=(i=t.animationAppear[n])!==null&&i!==void 0?i:t.animationAppear),z(t.animationDisappear)&&(l.disappear=(r=t.animationDisappear[n])!==null&&r!==void 0?r:t.animationDisappear),z(t.animationEnter)&&(l.enter=(s=t.animationEnter[n])!==null&&s!==void 0?s:t.animationEnter),z(t.animationExit)&&(l.exit=(a=t.animationExit[n])!==null&&a!==void 0?a:t.animationExit),z(t.animationUpdate)&&(l.update=(o=t.animationUpdate[n])!==null&&o!==void 0?o:t.animationUpdate),t.animationNormal&&t.animationNormal[n]&&(l.normal=t.animationNormal[n]),OHt(l,e)}function F$(n,t,e){const{oneByOne:i,duration:r,delay:s,delayAfter:a}=n;return n.delay=(o,l,u)=>{const h=t(o,u),c=ft(r)?r(o,l,u):st(r)?r:0,d=ft(s)?s(o,l,u):st(s)?s:0;let p=ft(i)?i(o,l,u):i;return p===!1?d:(p=p===!0?0:p,d+h*(c+p))},n.delayAfter=(o,l,u)=>{const h=t(o,u),c=ft(r)?r(o,l,u):st(r)?r:0,d=ft(a)?a(o,l,u):st(a)?a:0;let p=ft(i)?i(o,l,u):i;return p===!1?d:(p=p===!0?0:p,d+((e?e():l.mark.elements.length)-h)*(c+p))},delete n.oneByOne,n}function j$(n,t){var e,i;return(e=n==null?void 0:n[$r])!==null&&e!==void 0?e:(i=t==null?void 0:t.VGRAMMAR_ANIMATION_PARAMETERS)===null||i===void 0?void 0:i.elementIndex}function Gu(n,t){var e,i,r,s,a;if(n.animation===!1||((e=n.morph)===null||e===void 0?void 0:e.enable)===!1)return!1;const o=((r=(i=n.animationAppear)===null||i===void 0?void 0:i[t])!==null&&r!==void 0?r:n.animationAppear)!==!1,l=((a=(s=n.animationUpdate)===null||s===void 0?void 0:s[t])!==null&&a!==void 0?a:n.animationUpdate)!==!1;return!(!o||!l)}function EHt(n){return z(n.timeSlices)}function N$(n){return!EHt(n)&&z(n.channel)}function OHt(n,t){return n&&(wD(n=cs(n),e=>{var i;return ft(e)&&((i=e.prototype)===null||i===void 0?void 0:i.constructor)!==e?(...r)=>e(...r,t):e}),n)}function wD(n,t){if(ut(n))n.forEach((e,i)=>{n[i]=t(n[i],i),wD(n[i],t)});else if(ae(n))for(const e in n)n[e]=t(n[e],e),wD(n[e],t)}function z$(n){var t,e,i,r;const s=n.getSpec();if(s.animation===!1||!z(n.getRegion().animate))return!1;let a=(t=s.animationThreshold)!==null&&t!==void 0?t:Number.MAX_SAFE_INTEGER;return(e=n.getMarks())===null||e===void 0||e.forEach(o=>{const l=o.getProgressiveConfig();l&&(l.large&&l.largeThreshold&&(a=Math.min(a,l.largeThreshold)),l.progressiveThreshold&&(a=Math.min(a,l.progressiveThreshold)))}),!(((r=(i=n.getRawData())===null||i===void 0?void 0:i.latestData)===null||r===void 0?void 0:r.length)>=a)}class ys extends cT{constructor(){super(...arguments),this.markLabelSpec={}}getLabelSpec(t){return this.markLabelSpec[t]}setLabelSpec(t,e){this.markLabelSpec[t]=ot(e)}addLabelSpec(t,e,i=!1){this.markLabelSpec[t]||(this.markLabelSpec[t]=[]),i?this.markLabelSpec[t].unshift(e):this.markLabelSpec[t].push(e)}getTheme(t,e){var i,r,s;const a=Het(t),o=(i=this._option)===null||i===void 0?void 0:i.getTheme(),{markByName:l,mark:u}=o,h=this._option.type,c=Xet(le(o,`series.${h}`),h,u,l),d=le(o,`series.${h}_${a}`),p=((s=(r=this.stack)!==null&&r!==void 0?r:d==null?void 0:d.stack)!==null&&s!==void 0?s:c!=null&&c.stack)?le(o,`series.${h}_stack`):void 0;return Ut({},c,d,p)}transformSpec(t,e,i){this._transformStack(t);const r=super.transformSpec(t,e,i);return this._transformLabelSpec(r.spec),Object.assign(Object.assign({},r),{markLabelSpec:this.markLabelSpec,stack:this.stack})}_transformLabelSpec(t){}_transformStack(t){Si(t.stack)&&(this.stack=t.stack),Si(t.percent)&&(this.stack=t.percent||this.stack),Si(t.stackOffsetSilhouette)&&(this.stack=t.stackOffsetSilhouette||this.stack),z(t.stackValue)&&(this.stack=!0),F(this.stack)&&this._supportStack&&t.seriesField&&(this.stack=!0)}_addMarkLabelSpec(t,e,i="label",r="initLabelMarkStyle",s,a){t&&ot(t[i]).forEach(o=>{o&&o.visible&&this.addLabelSpec(e,Object.assign(Object.assign({animation:s??t.animation},o),{getStyleHandler:l=>{var u;return(u=l[r])===null||u===void 0?void 0:u.bind(l)}}),a)})}_getDefaultSpecFromChart(t){var e;const i=(e=super._getDefaultSpecFromChart(t))!==null&&e!==void 0?e:{},{outerRadius:r,innerRadius:s,direction:a}=t;return z(r)&&(i.outerRadius=r),z(s)&&(i.innerRadius=s),z(a)&&(i.direction=a),Object.keys(i).length>0?i:void 0}_mergeThemeToSpec(t,e){const i=this._theme;if(this._shouldMergeThemeToSpec()){const r=this._getDefaultSpecFromChart(e),s=a=>{const o=Ut({},i,r,a),l=i.label;return l&&ae(l)&&ut(o.label)&&(o.label=o.label.map(u=>Ut({},l,u))),o};return ut(t)?{spec:t.map(a=>s(a)),theme:i}:{spec:s(t),theme:i}}return{spec:t,theme:i}}}function RHt(n){return n===vn["desktop-browser"]||n===vn["desktop-miniApp"]?{hover:{enable:!0,trigger:"pointermove",triggerOff:"view:pointerleave"},select:{enable:!0,trigger:"pointertap"}}:vc(n)||Ec(n)?{hover:{enable:!0,trigger:["pointerdown","pointermove"],triggerOff:"view:pointerleave"},select:{enable:!0,trigger:"tap"}}:null}class gp extends KF{getRegion(){return this._region}getLayoutStartPoint(){return this._region.getLayoutStartPoint()}getRootMark(){return this._rootMark}getSeriesMark(){return this._seriesMark}getRawData(){return this._rawData}getViewDataFilter(){return this._viewDataFilter}getViewData(){var t;return(t=this._data)===null||t===void 0?void 0:t.getDataView()}getViewDataProductId(){var t;return(t=this._data)===null||t===void 0?void 0:t.getProductId()}getViewDataStatistics(){return this._viewDataStatistics}getViewStackData(){return this._viewStackData}getSeriesField(){return this._seriesField}setSeriesField(t){z(t)&&(this._seriesField=t,this.getMarks().filter(e=>e.getDataView()===this.getViewData()).forEach(e=>{e.setFacet(this._seriesField)}))}getGroups(){return this._groups}getStack(){var t;return(t=this.getSpecInfo())===null||t===void 0?void 0:t.stack}getStackValue(){var t;return(t=this._spec.stackValue)!==null&&t!==void 0?t:`${Kt}_series_${this.type}`}getPercent(){return this._spec.percent}getStackOffsetSilhouette(){return this._spec.stackOffsetSilhouette}get tooltipHelper(){return this._tooltipHelper||this.initTooltip(),this._tooltipHelper}getInvalidType(){return this._invalidType}setInvalidType(t){var e;this._invalidType=t,(e=this.getViewData())===null||e===void 0||e.reRunAllTransform()}getMarkAttributeContext(){return this._markAttributeContext}constructor(t,e){var i;super(t,e),this.specKey="series",this.type="series",this.layoutType="absolute",this.modelType="series",this.name=void 0,this.transformerConstructor=ys,this.coordinate="none",this._region=null,this._layoutStartPoint={x:0,y:0},this._layoutRect={width:null,height:null},this.getLayoutRect=()=>{var r,s;return{width:(r=this._layoutRect.width)!==null&&r!==void 0?r:this._region.getLayoutRect().width,height:(s=this._layoutRect.height)!==null&&s!==void 0?s:this._region.getLayoutRect().height}},this._rootMark=null,this._seriesMark=null,this._viewDataMap=new Map,this._viewDataFilter=null,this._data=null,this.layoutZIndex=0,this._invalidType="break",this._region=e.region,this._dataSet=e.dataSet,!((i=this._spec)===null||i===void 0)&&i.name&&(this.name=this._spec.name)}created(){super.created(),this._buildMarkAttributeContext(),this.initData(),this.initGroups(),this.initStatisticalData(),this.event.emit(Wt.afterInitData,{model:this}),this.initRootMark(),this.initMark();const t=z$(this);this._initExtensionMark({hasAnimation:t}),this.initMarkStyle(),this.initMarkState(),t&&this.initAnimation(),this._option.disableTriggerEvent||this.initInteraction(),this.afterInitMark(),this.initEvent(),this.event.emit(Wt.afterInitEvent,{model:this})}_buildMarkAttributeContext(){this._markAttributeContext={vchart:this._option.globalInstance,globalScale:(t,e)=>{var i;return(i=this._option.globalScale.getScale(t))===null||i===void 0?void 0:i.scale(e)},seriesColor:t=>{var e;return F(t)&&(t=this.getSeriesKeys()[0]),(e=this._option.globalScale.getScale("color"))===null||e===void 0?void 0:e.scale(t)},getRegion:()=>this._region}}setAttrFromSpec(){super.setAttrFromSpec(),this.setSeriesField(this._spec.seriesField),z(this._spec.invalidType)&&(this._invalidType=this._spec.invalidType)}getInvalidCheckFields(){return[this.getStackValueField()]}initInvalidDataTransform(){var t,e;this._invalidType==="zero"&&(!((t=this._rawData)===null||t===void 0)&&t.dataSet)&&(ie(this._rawData.dataSet,"invalidTravel",MHt),(e=this._rawData)===null||e===void 0||e.transform({type:"invalidTravel",options:{config:()=>({invalidType:this._invalidType,checkField:this.getInvalidCheckFields()})}},!1))}initData(){var t,e,i,r;const s=(t=this._spec.data)!==null&&t!==void 0?t:this._option.getSeriesData(this._spec.dataId,this._spec.dataIndex);if(s&&(this._rawData=UF(s,this._dataSet,this._option.sourceDataList,{onError:(e=this._option)===null||e===void 0?void 0:e.onError})),(r=(i=this._rawData)===null||i===void 0?void 0:i.target)===null||r===void 0||r.addListener("change",this.rawDataUpdate.bind(this)),this._addDataIndexAndKey(),this._rawData){this.getStack()&&(this._viewDataFilter=yD(this._rawData,this._dataSet,{name:`${this.type}_${this.id}_viewDataFilter`}));const a=yD(this.getStack()?this._viewDataFilter:this._rawData,this._dataSet,{name:`${this.type}_${this.id}_viewData`});this._data=new kl(this._option,a),this.getStack()&&this._viewDataFilter.target.removeListener("change",a.reRunAllTransform)}this.initInvalidDataTransform()}initGroups(){const t=this.getGroupFields();t&&t.length&&(this._groups={fields:t})}initStatisticalData(){this._data&&this._statisticViewData()}getRawDataStatisticsByField(t,e){var i,r;if(this._rawStatisticsCache||(this._rawStatisticsCache={}),!this._rawStatisticsCache[t]){if(this._viewDataStatistics&&(!this._viewDataFilter||this._viewDataFilter.transformsArr.length<=1)&&this.getViewData().transformsArr.length<=1&&(!((i=this._viewDataStatistics.latestData)===null||i===void 0)&&i[t]))this._rawStatisticsCache[t]=this._viewDataStatistics.latestData[t];else if(this._rawData){const s=(r=this._rawData.getFields())===null||r===void 0?void 0:r[t];s&&s.lockStatisticsByDomain&&s.domain?(this._rawStatisticsCache[t]={},e?(this._rawStatisticsCache[t].min=dn(s.domain),this._rawStatisticsCache[t].max=Vi(s.domain)):this._rawStatisticsCache[t].values=s.domain):this._rawStatisticsCache[t]=Wit(this._rawData.latestData,[{key:t,operations:e?["min","max"]:["values"]}])[t]}}return e&&(F(this._rawStatisticsCache[t].min)||F(this._rawStatisticsCache[t].max))&&(this._rawStatisticsCache[t].min=dn(this._rawStatisticsCache[t].values),this._rawStatisticsCache[t].max=Vi(this._rawStatisticsCache[t].values)),this._rawStatisticsCache[t]}_statisticViewData(){ie(this._dataSet,"dimensionStatistics",AD);const t=`${this.type}_${this.id}_viewDataStatic`;this._viewDataStatistics=new Le(this._dataSet,{name:t}),this._viewDataStatistics.parse([this._data.getDataView()],{type:"dataview"}),this._viewDataStatistics.transform({type:"dimensionStatistics",options:{fields:()=>{const e=this.getStatisticFields();return this._seriesField&&xg(e,[{key:this._seriesField,operations:["values"]}]),e},target:"latest"}},!1),this._data.getDataView().target.removeListener("change",this._viewDataStatistics.reRunAllTransform),this.getStack()&&this.createdStackData()}createStatisticalData(t,e,i){ie(this._dataSet,"dimensionStatistics",AD);const r=new Le(this._dataSet,{name:t});return r.parse([e],{type:"dataview"}),r.transform({type:"dimensionStatistics",options:{operations:["max","min","values"],fields:()=>{var s;const a=xg(this.getStatisticFields(),(s=i==null?void 0:i(e.name))!==null&&s!==void 0?s:[]);return this._seriesField&&xg(a,[{key:this._seriesField,operations:["values"]}]),a},target:"latest"}},!1),r}createdStackData(){const t=`${this.type}_${this.id}_viewStackData`;this._viewStackData=new Le(this._dataSet,{name:t}),this._viewStackData.parse([this._viewDataFilter],{type:"dataview"}),this._viewStackData.transform({type:"stackSplit",options:{fields:this.getStackGroupFields()}},!1)}_noAnimationDataKey(t,e){return e}generateDefaultDataKey(t){var e;return F(t)?(i,r,s)=>{if(this._spec.animation===!1){const l=this._noAnimationDataKey(i,r);if(l!==void 0)return l}const{keyMap:a}=s,o=this._getSeriesDataKey(i);return a.get(o)===void 0?(a.set(o,0),o):(a.set(o,a.get(o)+1),`${o}_${a.get(o)}`)}:It(t)?i=>i[t]:ut(t)&&t.every(i=>It(i))?i=>t.map(r=>i[r]).join("-"):ft(t)?(i,r)=>t(i,r):((e=this._option)===null||e===void 0||e.onError(`invalid dataKey: ${t}`),(i,r)=>{})}_addDataIndexAndKey(){var t;!((t=this._rawData)===null||t===void 0)&&t.dataSet&&(ie(this._rawData.dataSet,"addVChartProperty",Nm),this._rawData.transform({type:"addVChartProperty",options:{beforeCall:rm.bind(this),call:fp}},!1))}updateRawData(t){this._rawData&&this._rawData.updateRawData(t)}rawDataUpdate(t){var e;(e=this._rawDataStatistics)===null||e===void 0||e.reRunAllTransform(),this._rawStatisticsCache=null,this.event.emit(Wt.rawDataUpdate,{model:this})}viewDataFilterOver(t){this.event.emit(Wt.viewDataFilterOver,{model:this})}viewDataUpdate(t){var e;this.event.emit(Wt.viewDataUpdate,{model:this}),(e=this._data)===null||e===void 0||e.updateData(),this._viewDataStatistics&&this._viewDataStatistics.reRunAllTransform()}viewDataStatisticsUpdate(t){this.event.emit(Wt.viewDataStatisticsUpdate,{model:this})}getDatumPositionValue(t,e){return!t||F(e)?null:t[e]}getDatumPositionValues(t,e){return!t||F(e)?[]:It(e)?[t[e]]:e.map(i=>t[i])}setValueFieldToStack(){}setValueFieldToPercent(){}setValueFieldToStackOffsetSilhouette(){}initRootMark(){var t,e;this._rootMark=this._createMark({type:"group",name:`seriesGroup_${this.type}_${this.id}`},{parent:(e=(t=this._region).getGroupMark)===null||e===void 0?void 0:e.call(t),dataView:!1}),this._rootMark.setZIndex(this.layoutZIndex)}_getExtensionMarkNamePrefix(){return`${this.type}_${this.id}_extensionMark`}_initExtensionMark(t){var e;if(!this._spec.extensionMark)return;const i=this.getMarksWithoutRoot();t.depend=i,(e=this._spec.extensionMark)===null||e===void 0||e.forEach((r,s)=>{this._createExtensionMark(r,null,this._getExtensionMarkNamePrefix(),s,t)})}_createExtensionMark(t,e,i,r,s){var a;const o=this._createMark({type:t.type,name:`${i}_${r}`},{skipBeforeLayouted:!0,markSpec:t,parent:e,dataView:!1,customShape:t==null?void 0:t.customShape,componentType:t.componentType,depend:s.depend,key:t.dataKey});if(o){if(s.hasAnimation){const l=Ae({},Ee(t.type,t,this._markAttributeContext));o.setAnimationConfig(l)}if(t.type==="group")i=`${i}_${r}`,(a=t.children)===null||a===void 0||a.forEach((l,u)=>{this._createExtensionMark(l,o,i,u,s)});else if(!(e||F(t.dataId)&&F(t.dataIndex))){const l=this._option.getSeriesData(t.dataId,t.dataIndex);l===this._rawData?o.setDataView(this.getViewData(),this.getViewDataProductId()):(o.setDataView(l),l.target.addListener("change",()=>{o.getData().updateData()}))}}}_updateExtensionMarkSpec(){var t;(t=this._spec.extensionMark)===null||t===void 0||t.forEach((e,i)=>{const r=this._marks.getMarkWithInfo({name:`${this._getExtensionMarkNamePrefix()}_${i}`});r&&(this.initMarkStyleWithSpec(r,e),r.updateStaticEncode(),r.updateLayoutState())})}getStackData(){var t;return(t=this._viewStackData)===null||t===void 0?void 0:t.latestData}_parseSelectorOfInteraction(t,e){if(!e||!e.length)return[];const i=[];return t.markIds?e.filter(r=>{t.markIds.includes(r.getProductId())&&i.push(`#${r.getProductId()}`)}):t.markNames?e.forEach(r=>{t.markNames.includes(r.name)&&i.push(`#${r.getProductId()}`)}):e.forEach(r=>{i.push(`#${r.getProductId()}`)}),i}_parseDefaultInteractionConfig(t){if(!(t!=null&&t.length))return[];const e=RHt(this._option.mode);let i=Object.assign({},e==null?void 0:e.hover),r=Object.assign({},e==null?void 0:e.select);const s=this._spec.hover;Si(s)?i.enable=s:ae(s)&&(i.enable=!0,i=Ut(i,s));const a=this._spec.select;Si(a)?r.enable=a:ae(a)&&(r.enable=!0,r=Ut(r,a));const o=[];if(i.enable){const l=this._parseSelectorOfInteraction(i,t);l.length&&o.push({seriesId:this.id,regionId:this._region.id,selector:l,type:"element-highlight",trigger:i.trigger,triggerOff:i.triggerOff,blurState:Bt.STATE_HOVER_REVERSE,highlightState:Bt.STATE_HOVER})}if(r.enable){const l=this._parseSelectorOfInteraction(r,t),u=r.mode==="multiple",h=z(r.triggerOff)?r.triggerOff:u?["empty"]:["empty",r.trigger];l.length&&o.push({type:"element-select",seriesId:this.id,regionId:this._region.id,selector:l,trigger:r.trigger,triggerOff:h,reverseState:Bt.STATE_SELECTED_REVERSE,state:Bt.STATE_SELECTED,isMultiple:u})}return o}_parseInteractionConfig(t){const e=this.getCompiler();if(!e)return;const{interactions:i}=this._spec,r=this._parseDefaultInteractionConfig(t);r&&r.length&&r.forEach(s=>{e.addInteraction(s)}),i&&i.length&&i.forEach(s=>{const a=this._parseSelectorOfInteraction(s,this.getMarks());a.length&&e.addInteraction(Object.assign(Object.assign({},s),{selector:a,seriesId:this.id,regionId:this._region.id}))})}initInteraction(){const t=this.getMarksWithoutRoot();this._parseInteractionConfig(t)}initAnimation(){}initMarkState(){this.initSeriesStyleState()}initSeriesStyleState(){var t;const e=this._spec.seriesStyle;if(!e||!e.length)return;const i=(t=this._seriesField)!==null&&t!==void 0?t:Ls;this.getMarksWithoutRoot().forEach(r=>{const s={},a={},o={};e.forEach(u=>{var h;const c=(h=u[r.name])===null||h===void 0?void 0:h.style;c&&(s[u.name]=!0,o[u.name]=o[u.name]||{},Object.keys(c).forEach(d=>{a[d]=!0,o[u.name][d]=c[d]}))}),r.state.addStateInfo({stateValue:UW,level:-1,filter:u=>Array.isArray(u)?u.length!==0&&s[u[0][i]]===!0:s[u[i]]===!0});const l={};Object.keys(a).forEach(u=>{l[u]=h=>{var c,d;let p;if(Array.isArray(h)){if(h.length===0)return;p=(c=o[h[0][i]])===null||c===void 0?void 0:c[u]}return p=(d=o[h[i]])===null||d===void 0?void 0:d[u],p||r.getAttribute(u,h)}}),this.setMarkStyle(r,l,UW)})}afterInitMark(){this.event.emit(Wt.afterInitMark,{model:this}),this.setSeriesField(this._spec.seriesField),this.getMarks().forEach(t=>{var e,i;!((i=(e=t.stateStyle)===null||e===void 0?void 0:e.normal)===null||i===void 0)&&i.lineWidth&&t.setAttribute("stroke",this.getColorAttribute(),"normal",kt.Base_Series)})}getMarksWithoutRoot(){return this.getMarks().filter(t=>!t.name.includes("seriesGroup"))}getMarksInType(t){return this._marks.getMarksInType(t)}getMarkInName(t){return this._marks.get(t)}getMarkInId(t){return this.getMarks().find(e=>e.id===t)}initEvent(){var t,e,i;(e=(t=this._data)===null||t===void 0?void 0:t.getDataView())===null||e===void 0||e.target.addListener("change",this.viewDataUpdate.bind(this)),(i=this._viewDataStatistics)===null||i===void 0||i.target.addListener("change",this.viewDataStatisticsUpdate.bind(this))}_releaseEvent(){super._releaseEvent(),this.getCompiler().removeInteraction(this.id)}initTooltip(){this._tooltipHelper=new _s(this)}_compareSpec(t,e,i){var r,s;const a=super._compareSpec(t,e),o=Object.keys(e||{}).sort(),l=Object.keys(t||{}).sort();return mi(o,l)?((i=Object.assign(Object.assign(Object.assign({},izt),JW),i)).invalidType=!0,t.invalidType!==e.invalidType&&(a.reCompile=!0),i.extensionMark=!0,(ot(t.extensionMark).length!==ot(e.extensionMark).length||!((r=e.extensionMark)===null||r===void 0)&&r.some((u,h)=>u.type!==t.extensionMark[h].type||u.id!==t.extensionMark[h].id))&&(a.reMake=!0),a.reMake?a:(!((s=e.extensionMark)===null||s===void 0)&&s.some((u,h)=>u.visible!==t.extensionMark[h].visible)&&(a.reCompile=!0),this._marks.getMarks().some(u=>{var h,c;return i[u.name]=!0,((h=e[u.name])===null||h===void 0?void 0:h.visible)!==((c=t[u.name])===null||c===void 0?void 0:c.visible)})&&(a.reCompile=!0),o.some(u=>JW[u]&&!mi(t[u],e[u]))&&(a.reCompile=!0),o.some(u=>!i[u]&&!mi(t[u],e[u]))&&(a.reMake=!0),a)):(a.reMake=!0,a)}_updateSpecData(){!this._rawData||!this._spec.data||this._spec.data instanceof Le||YF(this._rawData,this._spec.data,!0)}reInit(t){super.reInit(t);const e=this.getMarksWithoutRoot();e.forEach(i=>{this._spec[i.name]&&this.initMarkStyleWithSpec(i,this._spec[i.name])}),this.initMarkStyle(),e.forEach(i=>{i.updateStaticEncode(),i.updateLayoutState(!0)}),this._updateExtensionMarkSpec(),this._updateSpecData(),this._tooltipHelper&&this._tooltipHelper.updateTooltipSpec(),z$(this)&&this.initAnimation()}onEvaluateEnd(t){this._data.updateData()}onRender(t){}release(){var t,e,i;super.release(),this._viewDataMap.clear();const r=(e=(t=this._rawData)===null||t===void 0?void 0:t.transformsArr)===null||e===void 0?void 0:e.findIndex(s=>s.type==="addVChartProperty");r>=0&&this._rawData.transformsArr.splice(r,1),(i=this._data)===null||i===void 0||i.release(),this._dataSet=this._data=this._rawData=this._rawDataStatistics=this._spec=this._region=this._viewDataStatistics=this._viewStackData=null}setLayoutStartPosition(t){st(t.x)&&(this._layoutStartPoint.x=t.x),st(t.y)&&(this._layoutStartPoint.y=t.y)}setLayoutRect({width:t,height:e},i){st(t)&&(this._layoutRect.width=t),st(e)&&(this._layoutRect.height=e)}getSeriesKeys(){var t,e;return this._seriesField?(e=(t=this.getRawDataStatisticsByField(this._seriesField))===null||t===void 0?void 0:t.values)!==null&&e!==void 0?e:[]:this.name?[this.name]:this.userId?[`${this.userId}`]:[`${this.type}_${this.id}`]}getSeriesStyle(t){return e=>{var i,r;return(r=(i=this._seriesMark)===null||i===void 0?void 0:i.getAttribute(e,t))!==null&&r!==void 0?r:void 0}}_getSeriesInfo(t,e){const i=this.getDefaultShapeType();return e.map(r=>({key:r,originalKey:r,style:this.getSeriesStyle({[t]:r}),shapeType:i}))}getSeriesInfoInField(t){var e,i;return this._getSeriesInfo(t,(i=(e=this.getRawDataStatisticsByField(t))===null||e===void 0?void 0:e.values)!==null&&i!==void 0?i:[])}getSeriesInfoList(){var t;return this._getSeriesInfo((t=this._seriesField)!==null&&t!==void 0?t:Ls,this.getSeriesKeys())}_getDefaultColorScale(){var t,e;const i=this.getDefaultColorDomain(),r=this._getDataScheme();return(e=(t=new O1().domain(i)).range)===null||e===void 0?void 0:e.call(t,r)}_getDataScheme(){return Ty(this.getColorScheme(),this.type)}getDefaultColorDomain(){var t,e;return this._seriesField?(e=(t=this.getViewDataStatistics())===null||t===void 0?void 0:t.latestData[this._seriesField])===null||e===void 0?void 0:e.values:[]}getColorAttribute(){var t,e;return{scale:(t=this._option.globalScale.getScale("color"))!==null&&t!==void 0?t:this._getDefaultColorScale(),field:(e=this._seriesField)!==null&&e!==void 0?e:Ls}}getDimensionField(){return[]}getMeasureField(){return[]}onMarkPositionUpdate(){this.onMarkTreePositionUpdate(this.getMarksWithoutRoot())}onMarkTreePositionUpdate(t){}_createMark(t,e={}){var i,r,s,a;const{key:o,groupKey:l,skipBeforeLayouted:u,themeSpec:h={},markSpec:c,dataView:d,dataProductId:p,parent:f,isSeriesMark:g,depend:_,progressive:v,support3d:y=this._spec.support3d||!!this._spec.zField,morph:b=!1,clip:S,customShape:A,stateSort:w,noSeparateStyle:C=!1}=e,k=super._createMark(t,{key:o??this._getDataIdKey(),support3d:y,seriesId:this.id,attributeContext:this._markAttributeContext,componentType:e.componentType,noSeparateStyle:C});if(z(k)){this._marks.addMark(k,{name:t.name}),g&&(this._seriesMark=k),F(f)?(i=this._rootMark)===null||i===void 0||i.addMark(k):f!==!1&&f.addMark(k),F(d)?(k.setDataView(this.getViewData(),this.getViewDataProductId()),k.setSkipBeforeLayouted(!0)):d!==!1&&k.setDataView(d,p),Si(u)&&k.setSkipBeforeLayouted(u),z(_)&&k.setDepend(...ot(_));const M=this.getSpec()||{};k.setMorph(b),k.setMorphKey(((r=M.morph)===null||r===void 0?void 0:r.morphKey)||`${this.getSpecIndex()}_${this.getMarks().length}`),k.setMorphElementKey((a=(s=M.morph)===null||s===void 0?void 0:s.morphElementKey)!==null&&a!==void 0?a:e.defaultMorphElementKey),F(v)||k.setProgressiveConfig(v),F(l)||k.setGroupKey(l),A&&k.setCustomizedShapeCallback(A),w&&k.setStateSortCallback(w),S&&k.setClip(S),this.initMarkStyleWithSpec(k,Ut({},h,c||M[k.name]))}return k}_getDataIdKey(){var t;return(t=super._getDataIdKey())!==null&&t!==void 0?t:Ka}_getSeriesDataKey(t){let e="";if(!t)return e;const i=this.getDimensionField();e=i.map(s=>t[s]).join("_");const r=this.getSeriesField();return r&&!i.includes(r)&&(e+=`_${t[r]}`),e}addViewDataFilter(t){var e,i;(i=(e=this._viewDataFilter)!==null&&e!==void 0?e:this.getViewData())===null||i===void 0||i.transform(t,!1)}reFilterViewData(){var t,e;(e=(t=this._viewDataFilter)!==null&&t!==void 0?t:this.getViewData())===null||e===void 0||e.reRunAllTransform()}reTransformViewData(){var t,e;(e=(t=this._data)===null||t===void 0?void 0:t.getDataView())===null||e===void 0||e.reRunAllTransform()}fillData(){var t;(t=this.getRawData())===null||t===void 0||t.reRunAllTransform()}compile(){this.compileData()}getDefaultShapeType(){return"circle"}getFieldAlias(t){var e;return t!==yn&&t!==bc&&t!==Hs&&t!==dp||(t=this.getStackValueField()),(e=_C(this.getRawData(),t))!==null&&e!==void 0?e:t}getMarkInfoList(){var t;const e=super.getMarkInfoList();return e.length?e:Object.values((t=pC[this.type])!==null&&t!==void 0?t:{})}_getInvalidConnectType(){return this._invalidType==="zero"?"zero":this._invalidType==="link"?"connect":"none"}_getInvalidDefined(t){const e=this.getInvalidCheckFields();return!e.length||e.every(i=>Zg(t[i]))}_getRelatedComponentSpecInfo(t){var e;const i=this.getSpecIndex(),r=(e=this._option.getSpecInfo().component[t])===null||e===void 0?void 0:e.filter(s=>s.seriesIndexes.includes(i));return r??[]}_forEachStackGroup(t,e){var i,r;(e=e??((i=this._viewStackData)===null||i===void 0?void 0:i.latestData))&&(!((r=e.values)===null||r===void 0)&&r.length?t(e):e.nodes&&Object.values(e.nodes).forEach(s=>{this._forEachStackGroup(t,s)}))}isDatumInViewData(t){if(!t)return!1;const e=this.getViewData().latestData;return!!e&&(!!e.includes(t)||e.some(i=>Object.keys(t).every(r=>t[r]===i[r])))}getSeriesFieldValue(t,e){var i;return t[(i=e??this.getSeriesField())!==null&&i!==void 0?i:Ls]}}gp.mark=Ci,gp.transformerConstructor=ys;function IHt(n){return[at.rose,at.radar,at.circularProgress].includes(n)}function $it(n,t,e){const i=n.getScale(0),r="isInverse"in n&&n.isInverse();ti(i.type)?e.sort((s,a)=>(s[t]-a[t])*(r?-1:1)):e.sort((s,a)=>(i.index(s[t])-i.index(a[t]))*(r?-1:1))}function Lc(n){return{dataIndex:t=>{var e,i;const r=n.direction==="horizontal"?n.fieldY[0]:n.fieldX[0],s=t==null?void 0:t[r],a=n.direction==="horizontal"?n.scaleY:n.scaleX;return((i=(e=a==null?void 0:a.domain)===null||e===void 0?void 0:e.call(a))!==null&&i!==void 0?i:[]).indexOf(s)||0},dataCount:()=>{var t,e,i;const r=n.direction==="horizontal"?n.scaleY:n.scaleX;return(i=((e=(t=r==null?void 0:r.domain)===null||t===void 0?void 0:t.call(r))!==null&&e!==void 0?e:[]).length)!==null&&i!==void 0?i:0}}}class so extends gp{constructor(){super(...arguments),this.coordinate="cartesian",this._bandPosition=.5,this._scaleConfig={bandPosition:this._bandPosition},this._direction="vertical",this._sortDataByAxis=!1,this._getPositionXEncoder=()=>{var t;return(t=this._positionXEncoder)===null||t===void 0?void 0:t.bind(this)},this._setPositionXEncoder=t=>{this._positionXEncoder=t.bind(this)},this._getPositionYEncoder=()=>{var t;return(t=this._positionYEncoder)===null||t===void 0?void 0:t.bind(this)},this._setPositionYEncoder=t=>{this._positionYEncoder=t.bind(this)}}_buildScaleConfig(){this._scaleConfig={bandPosition:this._bandPosition}}get fieldX(){return this._fieldX}setFieldX(t){this._fieldX=ot(t)}get fieldY(){return this._fieldY}setFieldY(t){this._fieldY=ot(t)}get fieldZ(){return this._fieldZ}setFieldZ(t){this._fieldZ=t&&ot(t)}get fieldX2(){return this._fieldX2}setFieldX2(t){this._fieldX2=t}get fieldY2(){return this._fieldY2}setFieldY2(t){this._fieldY2=t}get direction(){return this._direction}get scaleX(){return this._scaleX}setScaleX(t){this._scaleX=t}get scaleY(){return this._scaleY}setScaleY(t){this._scaleY=t}get scaleZ(){return this._scaleZ}setScaleZ(t){this._scaleZ=t}getXAxisHelper(){return this._xAxisHelper}setXAxisHelper(t){this._xAxisHelper=t,this.onXAxisHelperUpdate()}getYAxisHelper(){return this._yAxisHelper}setYAxisHelper(t){this._yAxisHelper=t,this.onYAxisHelperUpdate()}getZAxisHelper(){return this._zAxisHelper}setZAxisHelper(t){this._zAxisHelper=t,this.onYAxisHelperUpdate()}get sortDataByAxis(){return this._sortDataByAxis}getStatisticFields(){const t=[];return[{axisHelper:this.getXAxisHelper(),fields:this._fieldX2?[...this._fieldX,this._fieldX2]:this._fieldX},{axisHelper:this.getYAxisHelper(),fields:this._fieldY2?[...this._fieldY,this._fieldY2]:this._fieldY},{axisHelper:this.getZAxisHelper(),fields:this._fieldZ}].forEach(e=>{e.axisHelper&&e.axisHelper.getScale&&e.fields&&e.fields.forEach(i=>{const r={key:i,operations:[]},s=e.axisHelper.getScale(0);ti(s.type)?(r.operations=["max","min"],s.type==="log"&&(r.filter=a=>a>0)):r.operations=["values"],t.push(r)})}),this.getStack()&&t.push({key:this.getStackValueField(),operations:["allValid"]}),t}getGroupFields(){return this.direction==="vertical"?this._fieldX:this._fieldY}getStackGroupFields(){return this.getGroupFields()}getStackValue(){var t,e;const i=(t=this.direction==="horizontal"?this.getXAxisHelper():this.getYAxisHelper())===null||t===void 0?void 0:t.getAxisId();return(e=this._spec.stackValue)!==null&&e!==void 0?e:`${Kt}_series_${this.type}_${i}`}getStackValueField(){return this.direction==="horizontal"?ot(this._spec.xField)[0]:ot(this._spec.yField)[0]}setValueFieldToStack(){this.direction==="horizontal"?(this.setFieldX(yn),this.setFieldX2(Hs)):(this.setFieldY(yn),this.setFieldY2(Hs))}setValueFieldToPercent(){this.direction==="horizontal"?(this.setFieldX(bc),this.setFieldX2(dp)):(this.setFieldY(bc),this.setFieldY2(dp))}setValueFieldToStackOffsetSilhouette(){this.direction==="horizontal"?(this.setFieldX(uD),this.setFieldX2(lD)):(this.setFieldY(uD),this.setFieldY2(lD))}onXAxisHelperUpdate(){this.onMarkPositionUpdate()}onYAxisHelperUpdate(){this.onMarkPositionUpdate()}onZAxisHelperUpdate(){this.onMarkPositionUpdate()}setAttrFromSpec(){var t,e;super.setAttrFromSpec(),this.setFieldX(this._spec.xField),this.setFieldY(this._spec.yField),this.setFieldZ(this._spec.zField),this._specXField=ot(this._spec.xField),this._specYField=ot(this._spec.yField),z(this._spec.direction)&&(this._direction=this._spec.direction),this.setFieldX2((t=this._spec)===null||t===void 0?void 0:t.x2Field),this.setFieldY2((e=this._spec)===null||e===void 0?void 0:e.y2Field),this.getStack()&&this.setValueFieldToStack(),this.getPercent()&&this.setValueFieldToPercent(),this.getStackOffsetSilhouette()&&this.setValueFieldToStackOffsetSilhouette(),z(this._spec.sortDataByAxis)&&(this._sortDataByAxis=this._spec.sortDataByAxis===!0)}dataToPosition(t,e){return t?e&&!this.isDatumInViewData(t)?null:{x:this.dataToPositionX(t),y:this.dataToPositionY(t)}:null}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToX=this.valueToPositionX.bind(this),this._markAttributeContext.valueToY=this.valueToPositionY.bind(this),this._markAttributeContext.xBandwidth=(t=0)=>{var e,i,r;return(r=(i=(e=this.getXAxisHelper()).getBandwidth)===null||i===void 0?void 0:i.call(e,t))!==null&&r!==void 0?r:0},this._markAttributeContext.yBandwidth=(t=0)=>{var e,i,r;return(r=(i=(e=this.getYAxisHelper()).getBandwidth)===null||i===void 0?void 0:i.call(e,t))!==null&&r!==void 0?r:0},this._markAttributeContext.valueToPosition=this.valueToPosition.bind(this)}valueToPosition(t,e){return{x:this.valueToPositionX(t),y:this.valueToPositionY(e)}}_axisPosition(t,e,i){return this._scaleConfig.datum=i,t.isContinuous?t.valueToPosition(e,this._scaleConfig):t.dataToPosition(ot(e),this._scaleConfig)}valueToPositionX(t,e){return this._axisPosition(this._xAxisHelper,t,e)}valueToPositionY(t,e){return this._axisPosition(this._yAxisHelper,t,e)}_dataToPosition(t,e,i,r,s,a){const o=s();if(o)return o(t);if(!e)return a(u=>Number.NaN),Number.NaN;const l=(e.getFields?e.getFields():i).slice(0,r);return l&&l.length!==0?(e.isContinuous?a(u=>(this._scaleConfig.datum=u,e.valueToPosition(this.getDatumPositionValue(u,l[0]),this._scaleConfig))):a(u=>(this._scaleConfig.datum=u,e.dataToPosition(ot(this.getDatumPositionValues(u,l)),this._scaleConfig))),s()(t)):(a(u=>null),null)}dataToPositionX(t){return this._dataToPosition(t,this._xAxisHelper,this.fieldX,void 0,this._getPositionXEncoder,this._setPositionXEncoder)}dataToPositionY(t){return this._dataToPosition(t,this._yAxisHelper,this.fieldY,void 0,this._getPositionYEncoder,this._setPositionYEncoder)}dataToPositionZ(t){if(!this._zAxisHelper)return Number.NaN;const{dataToPosition:e}=this._zAxisHelper;return e(this.getDatumPositionValues(t,this._fieldZ),{bandPosition:this._bandPosition})}dataToPositionX1(t){return this._xAxisHelper?this._fieldX2&&this._fieldX2 in t?this.valueToPositionX(this.getDatumPositionValues(t,this._fieldX2)):this.valueToPositionX(0):Number.NaN}dataToPositionY1(t){return this._yAxisHelper?this._fieldY2&&this._fieldY2 in t?this.valueToPositionY(this.getDatumPositionValues(t,this._fieldY2)):this.valueToPositionY(0):Number.NaN}positionToData(t){return t?{x:this.positionToDataX(t.x),y:this.positionToDataY(t.y)}:null}positionToDataX(t){return this._scaleX?this._scaleX.invert(t):null}positionToDataY(t){return this._scaleY?this._scaleY.invert(t):null}getRegionRectLeft(){if(!this._xAxisHelper)return Number.NaN;const{getScale:t}=this._xAxisHelper;return t(0).range()[0]}getRegionRectRight(){if(!this._xAxisHelper)return Number.NaN;const{getScale:t}=this._xAxisHelper;return t(0).range()[1]}afterInitMark(){super.afterInitMark(),this.setFieldX(this._fieldX),this.setFieldY(this._fieldY),this._buildScaleConfig()}getDimensionField(){return this._direction==="horizontal"?this._specYField:this._specXField}getDimensionContinuousField(){return this._direction==="horizontal"?[this.fieldY[0],this.fieldY2]:[this.fieldX[0],this.fieldX2]}getMeasureField(){return this._direction==="horizontal"?this._specXField:this._specYField}initEvent(){super.initEvent(),this.sortDataByAxis&&this.event.on(Wt.scaleDomainUpdate,{filter:t=>{var e;return t.model.id===((e=this._direction==="horizontal"?this._yAxisHelper:this._xAxisHelper)===null||e===void 0?void 0:e.getAxisId())}},()=>{this._sortDataInAxisDomain()})}_sortDataInAxisDomain(){var t,e,i;!((e=(t=this.getViewData())===null||t===void 0?void 0:t.latestData)===null||e===void 0)&&e.length&&($it(this._direction==="horizontal"?this._yAxisHelper:this._xAxisHelper,this._direction==="horizontal"?this._fieldY[0]:this._fieldX[0],this.getViewData().latestData),(i=this._data)===null||i===void 0||i.updateData(!0))}getInvalidCheckFields(){const t=[];return this._xAxisHelper&&this._xAxisHelper.isContinuous&&this._xAxisHelper.getAxisType()!==mt.geoCoordinate&&(this._xAxisHelper.getFields?this._xAxisHelper.getFields():this._specXField).forEach(e=>{t.push(e)}),this._yAxisHelper&&this._yAxisHelper.isContinuous&&this._yAxisHelper.getAxisType()!==mt.geoCoordinate&&(this._yAxisHelper.getFields?this._yAxisHelper.getFields():this._specYField).forEach(e=>{t.push(e)}),t}reInit(t){this._positionXEncoder&&(this._positionXEncoder=null),this._positionYEncoder&&(this._positionYEncoder=null),super.reInit(t)}}const Git="monotone",Uit="linear",LHt="bevel";class e5{addSamplingCompile(){if(this._spec.sampling){const{width:t,height:e}=this._region.getLayoutRect(),i=[],r=this._fieldY,s=this._fieldX;i.push({type:"sampling",size:this._direction==="horizontal"?e:t,factor:this._spec.samplingFactor,yfield:this._direction==="horizontal"?s[0]:r[0],groupBy:this._seriesField,mode:this._spec.sampling}),this._data.getProduct().transform(i)}}addOverlapCompile(){var t;if(this._spec.markOverlap){const e=[];e.push({type:"markoverlap",direction:this._direction==="horizontal"&&this.coordinate==="cartesian"?2:1,delta:this._spec.pointDis,deltaMul:this._spec.pointDisMul,groupBy:this._seriesField}),(t=this._symbolMark)===null||t===void 0||t.getProduct().transform(e)}}reCompileSampling(){this._spec.sampling&&this.compile()}initLineMark(t,e){var i,r;return this._lineMark=this._createMark(yh.line,{defaultMorphElementKey:this.getDimensionField()[0],groupKey:this._seriesField,isSeriesMark:e==null||e,progressive:t,customShape:(i=this._spec.line)===null||i===void 0?void 0:i.customShape,stateSort:(r=this._spec.line)===null||r===void 0?void 0:r.stateSort}),this._lineMark}initLineMarkStyle(t,e){var i,r;const s=this._lineMark;if(s){if(this.setMarkStyle(s,{stroke:this.getColorAttribute()},"normal",kt.Series),this._invalidType!=="zero"&&this.setMarkStyle(s,{defined:this._getInvalidDefined.bind(this),connectedType:this._getInvalidConnectType()},"normal",kt.Series),this.event.on(Wt.viewDataStatisticsUpdate,{filter:a=>a.model===this},()=>{this.encodeDefined(s,"defined")}),this.coordinate==="polar")this.setMarkStyle(s,{lineJoin:LHt,curveType:Uit,closePath:!0},"normal",kt.Series);else{const a=e??((r=(i=this.getSpec().line)===null||i===void 0?void 0:i.style)===null||r===void 0?void 0:r.curveType),o=a===Git?t==="horizontal"?"monotoneY":"monotoneX":a;this.setMarkStyle(s,{curveType:o},"normal",kt.Built_In)}this.setMarkStyle(s,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",kt.Series)}return s}_getEventElement(t,e=!1){let i=[];return t.dimensionInfo.some(r=>(r.data.some(s=>s.series===this&&(i=s.datum,!0)),!i.length)),i}_dimensionTrigger(t){const e=this._getEventElement(t);switch(t.action){case"enter":this._symbolActiveMark.getDataView().parse(e),this._symbolActiveMark.getData().updateData(!1);break;case"leave":this._symbolActiveMark.getDataView().parse([]),this._symbolActiveMark.getData().updateData(!1)}}initSymbolMark(t,e){const i=this._spec.point||{};if(i.visible!==!1&&(this._symbolMark=this._createMark(yh.point,{morph:Gu(this._spec,yh.point.name),defaultMorphElementKey:this.getDimensionField()[0],groupKey:this._seriesField,progressive:t,isSeriesMark:!!e,customShape:i.customShape,stateSort:i.stateSort})),this._spec.activePoint===!0){const r=new Le(this._option.dataSet,{name:`${Kt}_series_${this.id}_active_point`});r.parse([]),this._symbolActiveMark=this._createMark({name:`active_point_${this.id}`,type:"symbol"},{morph:!1,groupKey:this._seriesField,isSeriesMark:!1,dataView:r,parent:this._region.getInteractionMark(),customShape:i.customShape,stateSort:i.stateSort}),this._symbolActiveMark.setVisible(!1)}return this._symbolMark}initSymbolMarkStyle(){const t=this._symbolMark;if(!t)return this._initSymbolActiveMarkAlone(),t;if(this._initSymbolMark(t),this._symbolActiveMark&&this._symbolMark.stateStyle.dimension_hover){this._symbolActiveMark.setVisible(!0),this.event.on(Iu.dimensionHover,this._dimensionTrigger.bind(this));for(const e in this._symbolMark.stateStyle){this._symbolActiveMark.stateStyle[e]={};for(const i in this._symbolMark.stateStyle[e])this._symbolActiveMark.stateStyle[e][i]={style:null,level:kt.Series,referer:t}}this._symbolActiveMark.state.changeStateInfo({stateValue:Bt.STATE_DIMENSION_HOVER,filter:()=>!0})}return t}_initSymbolMark(t){t&&(this.setMarkStyle(t,{fill:this.getColorAttribute()},"normal",kt.Series),this._invalidType!=="zero"&&this.setMarkStyle(t,{visible:this._getInvalidDefined.bind(this)},"normal",kt.Series),this.event.on(Wt.viewDataStatisticsUpdate,{filter:e=>e.model===this},()=>{this.encodeDefined(t,"visible")}),this.setMarkStyle(t,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",kt.Series))}_initSymbolActiveMarkAlone(){var t,e;const i=this._symbolActiveMark;i&&(this._initSymbolMark(i),i&&(!((e=(t=this._spec[yh.point.name])===null||t===void 0?void 0:t.state)===null||e===void 0)&&e.dimension_hover)&&(i.setVisible(!0),this.event.on(Iu.dimensionHover,this._dimensionTrigger.bind(this)),this.initMarkStyleWithSpec(i,Ut({},this._spec[yh.point.name],{visible:!0})),this._symbolActiveMark.state.changeStateInfo({stateValue:Bt.STATE_DIMENSION_HOVER,filter:()=>!0})))}initLabelMarkStyle(t){var e;t&&(((e=t.getTarget())===null||e===void 0?void 0:e.type)!=="symbol"&&t.setRule("line-data"),this.setMarkStyle(t,{fill:this.getColorAttribute(),text:i=>i[this.getStackValueField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null}),this._invalidType!=="zero"&&this.setMarkStyle(t,{visible:this._getInvalidDefined.bind(this)},"normal",kt.Series),this.event.on(Wt.viewDataStatisticsUpdate,{filter:i=>i.model===this},()=>{this.encodeDefined(t,"visible")}))}initLineLabelMarkStyle(t){t&&this.setMarkStyle(t,{fill:this.getColorAttribute(),text:e=>e[this.getSeriesField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null})}encodeDefined(t,e){var i,r,s,a;if(!t)return;const o=this._isFieldAllValid();if(this._invalidType==="zero"||o){if(((r=(i=t.stateStyle.normal)===null||i===void 0?void 0:i[e])===null||r===void 0?void 0:r.style)===!0)return;this.setMarkStyle(t,{[e]:!0},"normal",kt.Series)}else{if(((a=(s=t.stateStyle.normal)===null||s===void 0?void 0:s[e])===null||a===void 0?void 0:a.style)!==!0)return;this.setMarkStyle(t,{[e]:this._getInvalidDefined.bind(this)},"normal",kt.Series)}t.getProduct()&&t.compileEncode()}_isFieldAllValid(){const t=this.getViewDataStatistics(),e=this.getStackValueField();return!!(t&&t.latestData&&e)&&t.latestData[e]&&t.latestData[e].allValid}}class Yit extends Sr{setStyle(t,e="normal",i=0,r=this.stateStyle){if(F(t))return;r[e]===void 0&&(r[e]={});const s=this._getIgnoreAttributes(),a=["strokeWidth","lineWidth","lineDash","strokeDash","lineJoin","stroke","strokeOpacity","opacity","fill","fillOpacity","texture","texturePadding","textureSize","textureColor"],o=this.isUserLevel(i);let l=!1;Object.keys(t).forEach(u=>{const h=t[u];if(F(h)||s.includes(u))return;o&&a.includes(u)&&(YL(h==null?void 0:h.type)||h!=null&&h.scale||ft(h))&&(l=!0);let c=this._styleConvert(h);o&&u==="angle"&&(c=this.convertAngleToRadian(c)),this.setAttribute(u,c,e,i,r)}),l&&this.setEnableSegments(l)}}class Ly extends Yit{constructor(){super(...arguments),this.type=Ly.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:1})}_getIgnoreAttributes(){var t,e;return((t=this.model)===null||t===void 0?void 0:t.type)===at.radar&&((e=this.model)===null||e===void 0?void 0:e.coordinate)==="polar"?[]:["fill","fillOpacity"]}}Ly.type="line";const yT=()=>{Z.registerMark(Ly.type,Ly),Vjt(),Tit()};class Xit extends Sr{_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{size:1,symbolType:"circle",fill:void 0,lineWidth:0})}}class Dy extends Xit{constructor(){super(...arguments),this.type=Dy.type}}Dy.type="symbol";const Uu=()=>{Z.registerMark(Dy.type,Dy),$tt()};class I1 extends ys{_transformLabelSpec(t){var e,i,r;((e=t.point)===null||e===void 0?void 0:e.visible)!==!1&&((r=(i=t.point)===null||i===void 0?void 0:i.style)===null||r===void 0?void 0:r.visible)!==!1?this._addMarkLabelSpec(t,"point"):this._addMarkLabelSpec(t,"line"),this._addMarkLabelSpec(t,"line","lineLabel","initLineLabelMarkStyle",void 0,!0)}}class DHt extends Pit{constructor(t){super(),this.component=t}releaseAll(){super.releaseAll(),this.component=null}}function BHt(n,t,e,i){switch(n){case mt.cartesianBandAxis:return Tv(cd(e,["z"]),"band",t);case mt.cartesianLinearAxis:return Tv(cd(e,["z"]),"linear",t);case mt.cartesianLogAxis:return Tv(cd(e,["z"]),"log",t);case mt.cartesianSymlogAxis:return Tv(cd(e,["z"]),"symlog",t);case mt.cartesianAxis:case mt.cartesianTimeAxis:return Tv(cd(e),void 0,t);case mt.polarBandAxis:return GE(e.orient,"band",t);case mt.polarLinearAxis:return GE(e.orient,"linear",t);case mt.polarAxis:return GE(e.orient,void 0,t);case mt.cartesianCrosshair:return $6t(t,i);case mt.polarCrosshair:return G6t(t,i);case mt.colorLegend:case mt.sizeLegend:case mt.discreteLegend:case mt.dataZoom:case mt.scrollBar:return FHt(e,Es(n,t));default:return Es(n,t)}}const FHt=(n,t)=>{var e;const i=(e=n.orient)!==null&&e!==void 0?e:t.orient,r=t[ait(i)],s=Ut({},t,r);return delete s.horizontal,delete s.vertical,s};class L1 extends cT{getTheme(t,e){return BHt(this.type,this._option.getTheme(),t,e)}_mergeThemeToSpec(t,e){const{spec:i,theme:r}=super._mergeThemeToSpec(t,e);return this._adjustPadding(i),{spec:i,theme:r}}_adjustPadding(t){const{padding:e,noOuterPadding:i=!0,orient:r}=t;i&&e&&r&&(t.padding=Object.assign(Object.assign({},Ru(e)),{[r]:0}))}}var jHt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};class bs extends vit{static createComponent(t,e){const{spec:i}=t,r=jHt(t,["spec"]);return new this(i,Object.assign(Object.assign({},e),r))}getRegions(){return this._regions}created(){super.created(),this.initLayout(),this.pluginService=new DHt(this)}constructor(t,e){super(t,e),this.name="component",this.modelType="component",this.transformerConstructor=L1,this._delegateEvent=(i,r,s,a=null,o=null)=>{var l,u;r instanceof v2||this.event.emit(s,{model:this,node:i,event:r,item:a,datum:o,source:Re.chart,chart:(u=(l=this._option)===null||l===void 0?void 0:l.globalInstance)===null||u===void 0?void 0:u.getChart()},"model")},this._option.animation&&(this.animate=new mit({getCompiler:e.getCompiler}))}initLayout(){var t;super.initLayout(),this._regions=(t=this._regions)!==null&&t!==void 0?t:this._option.getRegionsInIndex(),this._layout&&(this._layout.layoutBindRegionID=this._regions.map(e=>e==null?void 0:e.id))}changeRegions(t){throw new Error("Method not implemented.")}_getNeedClearVRenderComponents(){throw new Error("Method not implemented.")}onRender(t){throw new Error("Method not implemented.")}getVRenderComponents(){return this._getNeedClearVRenderComponents()}callPlugin(t){this.pluginService&&this.pluginService.getAll().forEach(e=>t(e))}getContainer(){var t;return this._container||(this._container=(t=this._option)===null||t===void 0?void 0:t.globalInstance.getStage().find(e=>e.name==="root",!0)),this._container}_compareSpec(t,e){const i=super._compareSpec(t,e);return i.reMake||(i.reMake=["seriesId","seriesIndex","regionId","regionIndex"].some(r=>!mi(e==null?void 0:e[r],t[r]))),(e==null?void 0:e.visible)!==t.visible&&(i.reCompile=!0),i}release(){var t;super.release(),this.clear(),(t=this.pluginService)===null||t===void 0||t.releaseAll(),this.pluginService=null}clear(){var t;const e=this._getNeedClearVRenderComponents();e&&e.length&&e.forEach(i=>{var r;i&&((r=this.getContainer())===null||r===void 0||r.removeChild(i),i=null)}),this._container=null,(t=this.pluginService)===null||t===void 0||t.clearAll()}compile(){this.compileMarks(),this.reAppendComponents()}compileMarks(t){this.getMarks().forEach(e=>{var i;e.compile({group:t}),(i=e.getProduct())===null||i===void 0||i.configure({context:{model:this}})})}reAppendComponents(){const t=this._getNeedClearVRenderComponents();t&&t.length&&t.forEach(e=>{var i;e&&!e.stage&&((i=this.getContainer())===null||i===void 0||i.appendChild(e))})}getBoundsInRect(t,e){return{x1:0,x2:0,y1:0,y2:0}}}bs.transformerConstructor=L1;class CD extends Sr{constructor(t,e){super(t,e),this.type="component",this._componentType=e.componentType,this._mode=e.mode}_initProduct(t){const e=this.getVGrammarView(),i=this.getProductId();this._product=e.mark(Rt.component,t??e.rootMark,{componentType:this._componentType,mode:this._mode}).id(i),this._compiledProductId=i}}CD.type="component";const bT=()=>{Z.registerMark(CD.type,CD)},NHt=n=>n;var zHt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};class i5 extends bs{getOrient(){return this._orient}getScale(){return this._scale}getScales(){return this._scales}getTickData(t=0){return this._tickData[t]}get visible(){return this._visible}getInverse(){return this._inverse}getCoordinateType(){return this._coordinateType}constructor(t,e){var i;super(t,e),this.specKey="axes",this._scales=[],this._tickData=[],this._visible=!0,this._tick=void 0,this._visible=(i=t.visible)===null||i===void 0||i,this._coordinateType="none"}_getNeedClearVRenderComponents(){return[]}getVRenderComponents(){var t,e;return ot((e=(t=this._axisMark)===null||t===void 0?void 0:t.getProduct())===null||e===void 0?void 0:e.getGroupGraphicItem())}created(){var t,e,i,r,s,a,o,l,u,h,c,d,p,f,g,_,v;if(super.created(),this.setSeriesAndRegionsFromSpec(),this.initEvent(),this.initScales(),this.updateSeriesScale(),this._shouldComputeTickData()&&this._initData(),this._visible){const y=this._createMark({type:"component",name:`axis-${this.getOrient()}`},{componentType:this.getOrient()==="angle"?"circleAxis":"axis",mode:this._spec.mode,noSeparateStyle:!0,skipTheme:!0});if(this._axisMark=y,y.setZIndex(this.layoutZIndex),z(this._spec.id)&&y.setUserId(this._spec.id),this._marks.addMark(y),(t=this._spec.grid)===null||t===void 0?void 0:t.visible){const b=this._createMark({type:"component",name:`axis-${this.getOrient()}-grid`},{componentType:this.getOrient()==="angle"?Vn.circleAxisGrid:Vn.lineAxisGrid,mode:this._spec.mode,noSeparateStyle:!0,skipTheme:!0});b.setZIndex((a=(r=(i=(e=this._spec.grid)===null||e===void 0?void 0:e.style)===null||i===void 0?void 0:i.zIndex)!==null&&r!==void 0?r:(s=this._spec.grid)===null||s===void 0?void 0:s.zIndex)!==null&&a!==void 0?a:ai.Axis_Grid),b.setInteractive(!1),this._marks.addMark(b),this._gridMark=b}if(Si(this._spec.interactive)&&this._marks.forEach(b=>b.setInteractive(this._spec.interactive)),this._option.animation!==!1&&le(this._option.getChart().getSpec(),"animation")!==!1&&this._spec.animation===!0){const b=Ae((o=Z.getAnimationInKey("axis"))===null||o===void 0?void 0:o(),{appear:(u=(l=this._spec.animationAppear)!==null&&l!==void 0?l:le(this._option.getChart().getSpec(),"animationAppear.axis"))!==null&&u!==void 0?u:le(this._option.getChart().getSpec(),"animationAppear"),disappear:(c=(h=this._spec.animationDisappear)!==null&&h!==void 0?h:le(this._option.getChart().getSpec(),"animationDisappear.axis"))!==null&&c!==void 0?c:le(this._option.getChart().getSpec(),"animationDisappear"),enter:(p=(d=this._spec.animationEnter)!==null&&d!==void 0?d:le(this._option.getChart().getSpec(),"animationEnter.axis"))!==null&&p!==void 0?p:le(this._option.getChart().getSpec(),"animationEnter"),exit:(g=(f=this._spec.animationExit)!==null&&f!==void 0?f:le(this._option.getChart().getSpec(),"animationExit.axis"))!==null&&g!==void 0?g:le(this._option.getChart().getSpec(),"animationExit"),update:(v=(_=this._spec.animationUpdate)!==null&&_!==void 0?_:le(this._option.getChart().getSpec(),"animationUpdate.axis"))!==null&&v!==void 0?v:le(this._option.getChart().getSpec(),"animationUpdate")});b.enter&&(b.update[0].customParameters={enter:b.enter[0]}),this._marks.forEach(S=>S.setAnimationConfig(b))}}}_shouldComputeTickData(){return this.getVisible()||this._spec.forceInitTick}_initData(){const t=this._initTickDataSet(this._tickTransformOption());t.target.addListener("change",this._forceLayout.bind(this)),this._tickData=[new Cl(this._option,t)]}collectData(t,e){const i=[];return zi(this._regions,r=>{var s;let a=this.collectSeriesField(t,r);if(a=ut(a)?ti(this._scale.type)?a:[a[0]]:[a],t||(this._dataFieldText=r.getFieldAlias(a[0])),a){const o=r.getViewData();if(e)a.forEach(l=>{i.push(r.getRawDataStatisticsByField(l,!1))});else if(o&&o.latestData&&o.latestData.length){const l=(s=r.getViewDataStatistics)===null||s===void 0?void 0:s.call(r);a.forEach(u=>{var h;!((h=l==null?void 0:l.latestData)===null||h===void 0)&&h[u]&&i.push(l.latestData[u])})}}},{userId:this._seriesUserId,specIndex:this._seriesIndex}),i}isSeriesDataEnable(){let t=!0;return zi(this._regions,e=>{var i;ut((i=e.getViewDataStatistics())===null||i===void 0?void 0:i.latestData)&&(t=!1)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),t}setSeriesAndRegionsFromSpec(){const{seriesId:t,seriesIndex:e,regionId:i,regionIndex:r}=this._spec;z(t)&&(this._seriesUserId=ot(t)),z(i)&&(this._regionUserId=ot(i)),z(e)&&(this._seriesIndex=ot(e)),z(r)&&(this._regionIndex=ot(r)),this._regions=this._option.getRegionsInUserIdOrIndex(this._regionUserId,this._regionIndex),this.layout.layoutBindRegionID=this._regions.map(s=>s.id)}getBindSeriesFilter(){return{userId:this._seriesUserId,specIndex:this._seriesIndex}}initEvent(){this.event.on(Wt.scaleUpdate,{filter:({model:e})=>(e==null?void 0:e.id)===this.id},this.effect.scaleUpdate.bind(this));const t=ktt(this._regions,{userId:this._seriesUserId,specIndex:this._seriesIndex}).map(e=>e.getViewDataStatistics()).filter(e=>!!e);t.length>1?this._option.dataSet.multipleDataViewAddListener(t,"change",()=>{this.updateScaleDomain()}):t.length===1&&t[0].target.addListener("change",()=>{this.updateScaleDomain()}),zi(this._regions,e=>{e.event.on(Wt.rawDataUpdate,{filter:({model:i})=>(i==null?void 0:i.id)===e.id},()=>{this._clearRawDomain()})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}updateScaleDomain(){}_clearRawDomain(){}onLayoutEnd(t){this.updateScaleRange(),this.event.emit(Wt.scaleUpdate,{model:this,value:"range"}),super.onLayoutEnd(t)}computeData(t){!this._tickData||!this._tickData.length||t!=="force"&&mi(this._scale.range(),[0,1])||this._tickData.forEach(e=>{e.getDataView().reRunAllTransform(),e.updateData()})}initScales(){this._scales=[this._scale];const t=[];if(zi(this._regions,e=>{const i=e.getGroups();i&&t.push(i)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),t.length!==0){const e=Vi(t.map(i=>i.fields.length));for(let i=1;i<e;i++){const r=this._scale.clone();this._scales.push(r)}}}_compareSpec(t,e){const i=super._compareSpec(t,e);return i.reRender=!0,(e==null?void 0:e.type)!==(t==null?void 0:t.type)&&(i.reMake=!0),i}_delegateAxisContainerEvent(t){t.listenerCount("*")===0&&t.addEventListener("*",(e,i)=>this._delegateEvent(t,e,i))}_getAxisAttributes(){const t=this._spec,e={orient:this.getOrient(),select:this._option.disableTriggerEvent!==!0&&t.select,hover:this._option.disableTriggerEvent!==!0&&t.hover};if(t.domainLine&&t.domainLine.visible?e.line=W6t(t.domainLine):e.line={visible:!1},t.label&&t.label.visible){const i=fc(t.label,["style","formatMethod","state"]);e.label=i,t.label.style&&(e.label.style=ft(t.label.style)?(r,s,a,o)=>{var l;const u=t.label.style(r.rawValue,s,r,a,o);return qt(Ut({},(l=this._theme.label)===null||l===void 0?void 0:l.style,u))}:qt(t.label.style)),(t.label.formatMethod||t.label.formatter)&&(e.label.formatMethod=this._getLabelFormatMethod()),t.label.state&&(e.label.state=B7t(t.label.state))}else e.label={visible:!1};if(t.tick&&t.tick.visible?(e.tick={visible:t.tick.visible,length:t.tick.tickSize,inside:t.tick.inside,alignWithLabel:t.tick.alignWithLabel,dataFilter:t.tick.dataFilter},t.tick.style&&(e.tick.style=ft(t.tick.style)?(i,r,s,a)=>{var o;const l=t.tick.style(i,r,s,a);return qt(Ut({},(o=this._theme.tick)===null||o===void 0?void 0:o.style,l))}:qt(t.tick.style)),t.tick.state&&(e.tick.state=Jp(t.tick.state))):e.tick={visible:!1},t.subTick&&t.subTick.visible?(e.subTick={visible:t.subTick.visible,length:t.subTick.tickSize,inside:t.subTick.inside,count:t.subTick.tickCount},t.subTick.style&&(e.subTick.style=ft(t.subTick.style)?(i,r,s,a)=>{var o;const l=t.subTick.style(i,r,s,a);return qt(Ut({},(o=this._theme.subTick)===null||o===void 0?void 0:o.style,l))}:qt(t.subTick.style)),t.subTick.state&&(e.subTick.state=Jp(t.subTick.state))):e.subTick={visible:!1},t.title&&t.title.visible){const i=t.title,{autoRotate:r,angle:s,style:a={},background:o,state:l,shape:u}=i,h=zHt(i,["autoRotate","angle","style","background","state","shape"]);let c,d=s;t.orient!=="left"&&t.orient!=="right"||r&&F(d)&&(d=t.orient==="left"?-90:90,c=V6t[t.orient]),e.title=Object.assign(Object.assign({},h),{autoRotate:!1,angle:d?qe(d):null,textStyle:Ut({},c,qt(a)),pickable:a.pickable!==!1,childrenPickable:a.pickable!==!1,state:{}}),u&&u.visible?(e.title.shape=Object.assign(Object.assign({},u),{style:qt(u.style)}),u.state&&(e.title.state.shape=Jp(u.state))):e.title.shape={visible:!1},o&&o.visible?(e.title.background=Object.assign(Object.assign({},o),{style:qt(o.style)}),o.state&&(e.title.state.background=Jp(o.state))):e.title.background={visible:!1},l&&(e.title.state.text=Jp(l))}else e.title={visible:!1};return t.background&&t.background.visible?(e.panel={visible:!0},t.background.style&&(e.panel.style=qt(t.background.style)),t.background.state&&(e.panel.state=Jp(t.background.state))):e.panel={visible:!1},e}_getGridAttributes(){const t=this._spec;return{alternateColor:t.grid.alternateColor,alignWithLabel:t.grid.alignWithLabel,style:ft(t.grid.style)?()=>(e,i)=>{var r,s;const a=t.grid.style((r=e.datum)===null||r===void 0?void 0:r.rawValue,i,e.datum);return qt(Ut({},(s=this._theme.grid)===null||s===void 0?void 0:s.style,a))}:qt(t.grid.style),subGrid:t.subGrid.visible===!1?{visible:!1}:{type:"line",visible:t.subGrid.visible,alternateColor:t.subGrid.alternateColor,style:qt(t.subGrid.style)}}}_getLabelFormatMethod(){const{formatMethod:t,formatter:e}=this._spec.label,{formatFunc:i}=Lu(t,e);return i?(r,s,a)=>i(s.rawValue,s,e):null}_initTickDataSet(t,e=0){return vu(this._option.dataSet,"scale",NHt),ie(this._option.dataSet,"ticks",aFt),new Le(this._option.dataSet,{name:`${this.type}_${this.id}_ticks_${e}`}).parse(this._scales[e],{type:"scale"}).transform({type:"ticks",options:t},!1)}_tickTransformOption(){const t=this._tick||{},e=this._spec.label||{},{tickCount:i,forceTickCount:r,tickStep:s,tickMode:a}=t,{style:o,formatMethod:l,minGap:u}=e;return{sampling:this._spec.sampling!==!1,tickCount:i,forceTickCount:r,tickStep:s,tickMode:a,axisOrientType:this._orient,coordinateType:this._coordinateType,labelStyle:o,labelFormatter:l,labelGap:u}}addTransformToTickData(t,e){this._tickData.forEach(i=>{var r;(r=i==null?void 0:i.getDataView())===null||r===void 0||r.transform(t,e)})}dataToPosition(t){return this._scale.scale(t)}}i5.specKey="axes";const Mp=()=>{c8t(),g8t(),bT(),Z.registerAnimation("axis",()=>({appear:{custom:O3t},update:{custom:E3t},exit:{custom:oMt}}))};var H$=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};const HHt=[Ey];class wC extends i5{getOrient(){return this._orient}set autoIndentOnce(t){this._autoIndentOnce=t}getScales(){return this._scales}constructor(t,e){super(t,e),this.type=mt.cartesianAxis,this.name=mt.cartesianAxis,this._defaultBandPosition=.5,this._defaultBandInnerPadding=.1,this._defaultBandOuterPadding=.3,this.layoutType="region-relative",this.layoutZIndex=ai.Axis,this.layoutLevel=Wo.Axis,this._orient="left",this._autoIndentOnce=!1,this._hasAutoIndent=!1,this._scales=[],this._tick=void 0,this._layoutCache={width:0,height:0,_lastComputeOutBounds:{x1:0,x2:0,y1:0,y2:0}},this._innerOffset={top:0,bottom:0,left:0,right:0},this.effect={scaleUpdate:i=>{this.computeData(i==null?void 0:i.value),zi(this._regions,r=>{const s=this.getOrient();Ii(s)?r.setXAxisHelper(this.axisHelper()):cl(s)?r.setYAxisHelper(this.axisHelper()):hh(s)&&r.setZAxisHelper(this.axisHelper())},{userId:this._seriesUserId,specIndex:this._seriesIndex})}},this._transformLayoutPosition=i=>{let{x:r,y:s}=i;return st(r)&&(r+=+(this._orient==="left")*this.getLayoutRect().width),st(s)&&(s+=+(this._orient==="top")*this.getLayoutRect().height),{x:r,y:s}},this._transformLayoutRect=i=>{if(!this._visible)return i;const r=this._latestBounds.clone().translate(-this.getLayoutStartPoint().x,-this.getLayoutStartPoint().y);switch(this._layout.layoutOrient){case"left":this._layout.layoutRectLevelMap.width===Ts&&(i.width=r.x1<0?-r.x1:0);break;case"right":this._layout.layoutRectLevelMap.width===Ts&&(i.width=r.x2>0?r.x2:0);break;case"top":this._layout.layoutRectLevelMap.height===Ts&&(i.height=r.y1<0?-r.y1:0);break;case"bottom":this._layout.layoutRectLevelMap.height===Ts&&(i.height=r.y2>0?r.y2:0)}return i.width=Math.ceil(i.width),i.height=Math.ceil(i.height),this._layout.setRectInSpec(this._layoutCacheProcessing(i))},this._updateAxisLayout=()=>{const i=this.getLayoutStartPoint(),r=this._getUpdateAttribute(!1),{grid:s}=r,a=H$(r,["grid"]),o=this._axisMark.getProduct(),l=Ut({x:i.x,y:i.y},this._axisStyle,a);o.encode(l),this._gridMark&&this._gridMark.getProduct().encode(Ut({x:i.x,y:i.y},this._getGridAttributes(),s))},this._fixAxisOnZero=()=>{const{onZero:i,visible:r}=this._spec.domainLine;if(this.visible&&i&&r!==!1){const{onZeroAxisId:s,onZeroAxisIndex:a}=this._spec.domainLine,o=this._option.getComponentsByKey("axes"),l=Ii(this.getOrient()),u=c=>{var d;return(l?!Ii(c.getOrient()):Ii(c.getOrient()))&&ti(c.getScale().type)&&(c.getTickData()?(d=c.getTickData().getLatestData())===null||d===void 0?void 0:d.find(p=>p.value===0):c.getScale().domain()[0]<=0&&c.getScale().domain()[1]>=0)},h=o.filter(c=>u(c));if(h.length){let c;if(z(s))c=h.find(d=>d.id===s);else if(z(a)){const d=o[a];u(d)&&(c=d)}else c=h[0];if(c){const d=this._axisMark.getProduct(),p=c.valueToPosition(0);l?d.encode({line:Object.assign(Object.assign({},this._axisStyle.line),{dy:this._orient==="bottom"?-(c.getScale().range()[0]-p):p})}):d.encode({line:Object.assign(Object.assign({},this._axisStyle.line),{dx:this._orient==="left"?p:-(c.getScale().range()[1]-p)})})}}}},this._orient=cd(t,["z"]),hh(this._orient)&&(this.layoutType="absolute"),this._dataSet=e.dataSet,this._coordinateType="cartesian"}static getSpecInfo(t){const e=t[this.specKey];if(!e)return null;const i=t.direction==="horizontal";if(!ut(e)){if(!T$(e))return null;const{axisType:o,componentName:l}=d$(e,i);return e.type=o,[{spec:e,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:l}]}let r=!0;if(e.filter(o=>o.orient==="z")[0]){const o=e.filter(u=>u.orient==="bottom")[0],l=e.filter(u=>cl(u.orient))[0];r=e.length===3&&o&&l}let s=e.map((o,l)=>({spec:o,index:l}));r||(s=s.filter(({spec:o})=>o.orient!=="z"));const a=[];return s.forEach(({spec:o,index:l})=>{if(!T$(o))return;const{axisType:u,componentName:h}=d$(o,i);o.type=u,a.push({spec:o,specPath:[this.specKey,l],specInfoPath:["component",this.specKey,l],type:h})}),a}static createComponent(t,e){const{spec:i}=t,r=H$(t,["spec"]),s=Z.getComponentInKey(r.type);return s?new s(i,Object.assign(Object.assign({},e),r)):(e.onError(`Component ${r.type} not found`),null)}initLayout(){super.initLayout(),this._layout.autoIndent=this._spec.autoIndent!==!1,this._layout.layoutOrient=this._orient}setLayout3dBox(t){this.layout3dBox=t}updateScaleRange(){let t=!1;const{width:e,height:i}=this.getLayoutRect(),{left:r,right:s,top:a,bottom:o}=this._innerOffset;let l=[];Ii(this.getOrient())?st(e)&&(l=this._inverse?[e-s,r]:[r,e-s]):hh(this.getOrient())?st(e)&&(l=this._inverse?[e-s,r]:[r,e-s],this._scale.range(l)):st(i)&&(l=this._inverse?[a,i-o]:[i-o,a]);const[u,h]=this._scale.range();return l[0]===u&&l[1]===h||(t=!0,this._scale.range(l)),t}init(t){var e;super.init(t),(e=this.pluginService)===null||e===void 0||e.load(HHt.map(i=>new i)),this.callPlugin(i=>{this.pluginService&&i.onInit&&i.onInit(this.pluginService,this)})}setAttrFromSpec(){var t;if(super.setAttrFromSpec(),this.visible){Ii(this.getOrient())?Ri(this._spec.maxHeight)&&(this._spec.maxHeight="30%"):Ri(this._spec.maxWidth)&&(this._spec.maxWidth="30%");const i=this._getAxisAttributes();i.label.formatMethod=this._getLabelFormatMethod(),i.verticalFactor=this.getOrient()==="top"||this.getOrient()==="right"?-1:1,this._axisStyle=i}this._tick=this._spec.tick;const e=(t=this._option.getChart())===null||t===void 0?void 0:t.getSpec();this._inverse=H7t(this._spec,(e==null?void 0:e.direction)==="horizontal")}onLayoutStart(t,e,i){if(super.onLayoutStart(t,e,i),!hh(this.getOrient())&&this._spec.innerOffset){const r=this._spec;cl(this.getOrient())?["top","bottom"].forEach(s=>{this._innerOffset[s]=Qn(r.innerOffset[s],e.height,e)}):["left","right"].forEach(s=>{this._innerOffset[s]=Qn(r.innerOffset[s],e.width,e)})}}getSeriesStatisticsField(t){let e;return e=Ii(this.getOrient())?t.fieldX:hh(this.getOrient())?t.fieldZ:t.fieldY,ti(this._scale.type)?e:[e[0]]}_tickTransformOption(){var t,e,i;return Object.assign(Object.assign({},super._tickTransformOption()),{noDecimals:(t=this._tick)===null||t===void 0?void 0:t.noDecimals,labelLastVisible:(e=this._spec.label)===null||e===void 0?void 0:e.lastVisible,labelFlush:(i=this._spec.label)===null||i===void 0?void 0:i.flush})}axisHelper(){return{isContinuous:ti(this._scale.type),dataToPosition:this.dataToPosition.bind(this),getScale:(t=0)=>this._scales[t],getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>this._inverse===!0,getSpec:()=>this._spec}}afterCompile(){var t;const e=(t=this._axisMark)===null||t===void 0?void 0:t.getProduct();e&&e.addEventListener(Ht.AFTER_ELEMENT_ENCODE,()=>{if(this._isLayout===!1&&(Ii(this.getOrient())?this.callPlugin(i=>{this.pluginService&&i.onDidLayoutHorizontal&&i.onDidLayoutHorizontal(this.pluginService,this)}):this.callPlugin(i=>{this.pluginService&&i.onDidLayoutVertical&&i.onDidLayoutVertical(this.pluginService,this)}),this._delegateAxisContainerEvent(e.getGroupGraphicItem()),this._unitText)){const{x:i,y:r}=this.getLayoutStartPoint(),s=Ii(this._orient)?{x:Vi(this._scale.range())+i,y:r}:{x:i,y:dn(this._scale.range())+r};this._unitText.setAttributes(s)}}),this.callPlugin(i=>{this.pluginService&&i.onDidCompile&&i.onDidCompile(this.pluginService,this)})}onRender(t){}changeRegions(t){}update(t){}resize(t){}collectScale(){const t=[];return zi(this._regions,e=>{t.push(this.getOrient()==="left"||this.getOrient()==="right"?e.scaleY:e.scaleX)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),t}collectSeriesField(t,e){var i,r;let s;return s=t>0?(r=(i=e.getGroups())===null||i===void 0?void 0:i.fields)===null||r===void 0?void 0:r[t]:Ii(this.getOrient())?e.getSpec().x2Field?[...e.fieldX,e.fieldX2]:e.fieldX:hh(this.getOrient())?e.fieldZ:e.getSpec().y2Field?[...e.fieldY,e.fieldY2]:e.fieldY,s}updateSeriesScale(){const t=this.getOrient();zi(this._regions,e=>{Ii(t)?(e.setScaleX(this._scale),e.setXAxisHelper(this.axisHelper())):cl(t)?(e.setScaleY(this._scale),e.setYAxisHelper(this.axisHelper())):hh(t)&&(e.setScaleZ(this._scale),e.setZAxisHelper(this.axisHelper()))},{userId:this._seriesUserId,specIndex:this._seriesIndex})}getBoundsInRect(t){var e;let i={x1:0,y1:0,x2:0,y2:0};if(!this._visible)return i;this._verticalLimitSize=Ii(this.getOrient())?t.height:t.width,this.setLayoutRect(t),!this.updateScaleRange()&&ut((e=this.getTickData())===null||e===void 0?void 0:e.getLatestData())||this.computeData("range");const r={skipLayout:!1},s=Ii(this.getOrient());this.pluginService&&(s?this.callPlugin(l=>{l.onWillLayoutHorizontal&&l.onWillLayoutHorizontal(this.pluginService,r,this)}):this.callPlugin(l=>{l.onWillLayoutVertical&&l.onWillLayoutVertical(this.pluginService,r,this)}));const a=this._axisMark.getProduct();let o=!1;if(!r.skipLayout){const l=this._getUpdateAttribute(!0),u=a.getGroupGraphicItem(),h=Ut(Object.assign({},this.getLayoutStartPoint()),this._axisStyle,l,{line:{visible:!1}}),c=u.getBoundsWithoutRender(h);o=!0,this._latestBounds=c,isFinite(c.width())&&(i=this._appendAxisUnit(c,s))}return o||(this._latestBounds=a.getBounds()),i}_getTitleLimit(t){var e,i,r,s,a;if(this._spec.title.visible&&F((e=this._spec.title.style)===null||e===void 0?void 0:e.maxLineWidth)){const o=(a=(r=(i=this._axisStyle.title)===null||i===void 0?void 0:i.angle)!==null&&r!==void 0?r:(s=this._spec.title.style)===null||s===void 0?void 0:s.angle)!==null&&a!==void 0?a:0;if(t){const h=this.getLayoutRect().width,c=Math.abs(Math.cos(o));return c<1e-6?1/0:h/c}const l=this.getLayoutRect().height,u=Math.abs(Math.sin(o));return u<1e-6?1/0:l/u}return null}_getUpdateAttribute(t){var e;let i=0,r=0;if(!t){const v=this.getRegions();let{x:y,y:b}=v[0].getLayoutStartPoint(),S=y+v[0].getLayoutRect().width,A=b+v[0].getLayoutRect().height;for(let w=1;w<v.length;w++){const C=v[w],{x:k,y:M}=C.getLayoutStartPoint(),{width:P,height:E}=C.getLayoutRect();y=Math.min(y,k),S=Math.max(S,P+k),b=Math.min(b,M),A=Math.max(A,E+M)}i=Math.abs(A-b),r=Math.abs(S-y)}const{width:s,height:a}=this.getLayoutRect(),o=Ii(this._orient),l=cl(this._orient),u=hh(this._orient);let h={x:0,y:0},c=0,d=0;const p=this.layout3dBox?this.layout3dBox.length:0;if(o?(h={x:s,y:0},c=i,d=s):l&&(h={x:0,y:a},c=r,d=a),u){const v=(e=this.directionStr)!==null&&e!==void 0?e:"r2l",y=this.layout3dBox?this.layout3dBox.width:0;let b=[0,0],S=-Math.PI/2,A=0;v==="l2r"&&(A=this.layout3dBox.length,b=[0,0,0],S=Math.PI/2);const w=this.getLabelItems(s),C={start:{x:0,y:0},end:{x:p,y:0},z:A,alpha:S,anchor3d:b,title:{text:this._spec.title.text||this._dataFieldText,maxWidth:this._getTitleLimit(o)},items:w};return t||(C.grid={type:"line",start:{x:0,y:0},end:{x:p,y:0},items:w[0],verticalFactor:this._axisStyle.verticalFactor,depth:y,length:i,z:A,alpha:S,anchor3d:b}),C}let f=o?this.layout.minHeight:this.layout.minWidth;(o&&this._layout.layoutRectLevelMap.height===gh||l&&this._layout.layoutRectLevelMap.width===gh)&&(f=this._verticalLimitSize);const g=this.getLabelItems(d),_={start:{x:0,y:0},end:h,title:{text:this._spec.title.text||this._dataFieldText,maxWidth:this._getTitleLimit(o)},items:g,verticalLimitSize:this._verticalLimitSize,verticalMinSize:f};return t||(_.grid={type:"line",start:{x:0,y:0},end:h,items:g[0],verticalFactor:this._axisStyle.verticalFactor,depth:p,length:c}),_}getLabelItems(t){var e;const i=(e=this.getTickData())===null||e===void 0?void 0:e.getLatestData();return i&&i.length?[i.map(r=>{const s=this._getNormalizedValue([r.value],t);return nm(r.value,s)}).filter(r=>r.value>=0&&r.value<=1)]:[]}initEvent(){super.initEvent(),this.visible&&(this.event.on(Wt.layoutEnd,this._updateAxisLayout),this.event.on(Wt.layoutEnd,this._fixAxisOnZero),this.event.on(Wt.layoutRectUpdate,()=>{this._clearLayoutCache()}))}_getNormalizedValue(t,e){return e===0?0:this.dataToPosition(t)/e}_layoutCacheProcessing(t){return["width","height"].forEach(e=>{t[e]<this._layoutCache[e]?t[e]=this._layoutCache[e]:this._layoutCache[e]=t[e]}),this._autoIndentOnce&&this._hasAutoIndent?["x1","x2","y1","y2"].forEach(e=>{this.layout.getLastComputeOutBounds()[e]=this._layoutCache._lastComputeOutBounds[e]}):(this._hasAutoIndent=!0,["x1","x2","y1","y2"].forEach(e=>{this.layout.getLastComputeOutBounds()[e]<this._layoutCache._lastComputeOutBounds[e]?this.layout.getLastComputeOutBounds()[e]=this._layoutCache._lastComputeOutBounds[e]:this._layoutCache._lastComputeOutBounds[e]=this.layout.getLastComputeOutBounds()[e]})),t}_clearLayoutCache(){this._hasAutoIndent=!1,this._layoutCache.width=0,this._layoutCache.height=0,this._layoutCache._lastComputeOutBounds={x1:0,x2:0,y1:0,y2:0}}onDataUpdate(){this._clearLayoutCache()}_appendAxisUnit(t,e){var i;if(this._spec.unit&&this._spec.unit.visible){const{text:r,style:s}=this._spec.unit;let a,o;const{x:l,y:u}=this.getLayoutStartPoint();e?(a={x:Vi(this._scale.range())+l,y:u},o={textAlign:"left",textBaseline:"middle"}):(a={x:l,y:dn(this._scale.range())+u},o={textAlign:this._orient==="left"?"left":"right",textBaseline:"bottom"}),o=Object.assign(Object.assign(Object.assign({},o),s),{x:a.x,y:a.y,text:r}),this._unitText?this._unitText.setAttributes(o):(this._unitText=Ug(o),this._unitText.name="axis-unit",(i=this.getContainer())===null||i===void 0||i.add(this._unitText));const h=this._unitText.AABBBounds;e?(t.x2+=h.x2>t.x2?h.x2-t.x2:0,t.y2+=h.y2>t.y2?h.y2-t.y2:0):(t.x1+=h.x1<t.x1?h.x1-t.x1:0,t.y1+=h.y1<t.y1?h.y1-t.y1:0)}return t}_getNeedClearVRenderComponents(){return this._unitText?[this._unitText]:[]}}wC.type=mt.cartesianAxis,wC.specKey="axes";const VHt=Math.sqrt(50),WHt=Math.sqrt(10),$Ht=Math.sqrt(2);class xT{constructor(){this._extend={},this.niceLabelFormatter=null}setExtraAttrFromSpec(){z(this._spec.nice)&&(this._nice=this._spec.nice),z(this._spec.zero)&&(this._zero=this._spec.zero),this._expand=this._spec.expand,this._domain=Ry(this._spec)}transformScaleDomain(){this.setScaleNice()}setLinearScaleNice(){var t;if(!this._nice)return!1;let e=5;const i=this._spec.tick||{};if(st(i.forceTickCount))e=i.forceTickCount;else if(ft(i.tickCount)){const a=this._scale.range();let o=Math.abs(a[a.length-1]-a[0]);o===1&&this._option&&(o=Ii(this._orient)?this._option.getChartViewRect().width:this._option.getChartViewRect().height),e=i.tickCount({rangeSize:o,labelStyle:this._spec.label&&this._spec.label.style})}else e=st(i.tickCount)?i.tickCount:5;this._spec.niceType==="accurateFirst"&&(e=Math.max(5,e));const{min:r,max:s}=(t=this._domain)!==null&&t!==void 0?t:{};return F(r)&&F(s)&&F(this._softMaxValue)&&F(this._softMinValue)?this._scale.nice(e):(z(r)||z(this._softMinValue))&&F(s)&&F(this._softMaxValue)?this._scale.niceMax(e):!(!F(r)||!F(this._softMinValue)||!z(s)&&!z(this._softMaxValue))&&this._scale.niceMin(e)}setLogScaleNice(){var t;if(!this._nice)return!1;const{min:e,max:i}=(t=this._domain)!==null&&t!==void 0?t:{};return F(e)&&F(i)&&F(this._softMaxValue)&&F(this._softMinValue)?this._scale.nice():(z(e)||z(this._softMinValue))&&F(i)&&F(this._softMaxValue)?this._scale.niceMax():!(!F(e)||!F(this._softMinValue)||!z(i)&&!z(this._softMaxValue))&&this._scale.niceMin()}setScaleNice(){return this._spec.type==="log"?this.setLogScaleNice():this.setLinearScaleNice()}dataToPosition(t,e){return this.valueToPosition(t[0])}valueToPosition(t){return this._scale.scale(t)}computeLinearDomain(t){const e=[];return t.length?t.forEach(i=>{const{min:r,max:s}=i;e[0]=e[0]===void 0?r:Math.min(e[0],r),e[1]=e[1]===void 0?s:Math.max(e[1],s)}):(e[0]=0,e[1]=0),this.setSoftDomainMinMax(e),this.expandDomain(e),this.includeZero(e),this.setDomainMinMax(e),e}expandDomain(t){if(!this._expand)return;let e=t[0],i=t[t.length-1];e===i&&(i===0?i=1:i>0?e=0:i<0&&(i=0)),z(this._expand.min)&&(t[0]=e-(i-e)*this._expand.min),z(this._expand.max)&&(t[t.length-1]=i+(i-e)*this._expand.max)}niceDomain(t){const{min:e,max:i}=Ry(this._spec);if(z(e)||z(i)||this._spec.type!=="linear")return t;if(Math.abs(dn(t)-Vi(t))<=1e-12){let r=t[0];const s=r>=0?1:-1;if(r=Math.abs(r),r<1)t[0]=0,t[1]=1;else{let a=r/5;const o=Math.floor(Math.log(a)/Math.LN10),l=a/Math.pow(10,o);a=(l>=VHt?10:l>=WHt?5:l>=$Ht?2:1)*Math.pow(10,o),t[0]=0,t[1]=10*a}s<0&&(t.reverse(),t[0]*=-1,t[1]*=-1)}return t}includeZero(t){this._zero&&(t[0]=Math.min(t[0],0),t[t.length-1]=Math.max(t[t.length-1],0))}setExtendDomain(t,e){if(e===void 0)return void delete this._extend[t];this._extend[t]=e;const i=this._scale.domain();this.extendDomain(i),this.includeZero(i),this.setDomainMinMax(i),this.niceDomain(i),this._scale.domain(i,this._nice),this._nice&&!this.setScaleNice()&&this._scale.rescale(),this.event.emit(Wt.scaleUpdate,{model:this,value:"domain"})}extendDomain(t){let e;const i=t.length-1,r=t[0]-t[i]>0,s=r?i:0,a=r?0:i;for(const o in this._extend)e=this._extend[o],e>t[a]&&(t[a]=e),e<t[s]&&(t[s]=e)}getDomainSpec(){return this._domain}setDomainMinMax(t){if(!this._domain)return;const{min:e,max:i}=this._domain;z(e)&&(t[0]=e),z(i)&&(t[1]=i)}setSoftDomainMinMax(t){const{softMin:e,softMax:i}=this._spec;if(z(e)){let r=ft(e)?e(t):e;F(r)&&(r=t[0]),r<=t[0]&&(t[0]=r,this._softMinValue=r)}if(z(i)){let r=ft(i)?i(t):i;F(r)&&(r=t[1]),r>=t[1]&&(t[1]=r),this._softMaxValue=r}}setZero(t){this._zero!==t&&(this._zero=t,this.updateScaleDomain())}updateScaleDomain(){if(!this.isSeriesDataEnable())return;const t=this.collectData(),e=this.computeLinearDomain(t);this.updateScaleDomainByModel(e)}updateScaleDomainByModel(t){t=t??this._scale.domain(),this.extendDomain(t),this.includeZero(t),this.setDomainMinMax(t),this.niceDomain(t),this._scale.domain(t,this._nice),this._nice&&!this.setScaleNice()&&this._scale.rescale(),this._updateNiceLabelFormatter(t),this._domainAfterSpec=this._scale.domain(),this.event.emit(Wt.scaleDomainUpdate,{model:this}),this.event.emit(Wt.scaleUpdate,{model:this,value:"domain"})}getDomainAfterSpec(){return this._domainAfterSpec}_updateNiceLabelFormatter(t){const e=Math.abs(t[1]-t[0]),i=Math.max(-Math.floor(Math.log10(e)),0)+2,r=Math.pow(10,i);this.niceLabelFormatter=s=>st(+s)?Math.round(+s*r)/r:s}}class tc extends wC{constructor(){super(...arguments),this.type=mt.cartesianLinearAxis,this._zero=!0,this._nice=!0,this._extend={},this._scale=new to}setAttrFromSpec(){super.setAttrFromSpec(),this.setExtraAttrFromSpec()}initScales(){var t,e;super.initScales();const i=[0,1];z((t=this._domain)===null||t===void 0?void 0:t.min)&&(i[0]=this._domain.min),z((e=this._domain)===null||e===void 0?void 0:e.max)&&(i[1]=this._domain.max),this._scale.domain(i)}computeDomain(t){return this.computeLinearDomain(t)}axisHelper(){const t=super.axisHelper();return t.setExtendDomain=this.setExtendDomain.bind(this),t.valueToPosition=this.valueToPosition.bind(this),t}}tc.type=mt.cartesianLinearAxis,tc.specKey="axes",On(tc,xT);const Ws=()=>{Mp(),Z.registerComponent(tc.type,tc)};class Kit{constructor(){this._rawDomainIndex=[]}_initData(){var t;if(this._spec.showAllGroupLayers&&this._scales.length>1)for(let e=0;e<this._scales.length;e++){const i=((t=this._spec.layers)!==null&&t!==void 0?t:[])[this._scales.length-1-e]||{};if(i.visible!==!1&&i.tickCount!==0&&i.forceTickCount!==0){const r=this._initTickDataSet(Object.assign(Object.assign({},this._tickTransformOption()),i),e);r.target.addListener("change",this._forceLayout.bind(this));const s=new Cl(this._option,r);this._tickData.push(s),this._tickDataMap||(this._tickDataMap={}),this._tickDataMap[e]=s}}else{const e=this._initTickDataSet(this._tickTransformOption());e.target.addListener("change",this._forceLayout.bind(this));const i=new Cl(this._option,e);this._tickData=[i],this._tickDataMap={0:i}}}dataToPosition(t,e={}){var i,r;if(t.length===0||this._scales.length===0)return 0;const{position:s,bandScale:a}=this.getPosition(t);return s+a.bandwidth()*((r=(i=e.bandPosition)!==null&&i!==void 0?i:this._spec.bandPosition)!==null&&r!==void 0?r:this._defaultBandPosition)}valueToPosition(t){return this._scale.scale(t)}updateGroupScaleRange(){let t=this._scale;this._scales.forEach((e,i)=>{i>0&&(e.range([0,t.bandwidth()]),t=e)})}getPosition(t){let e=0,i=this._scale;if(this._scales.length===1||t.length===1)e=this.valueToPosition(t[0]);else{const r=Math.min(t.length,this._scales.length);for(let s=0;s<r;s++)e+=this._scales[s].scale(t[s]);i=this._scales[r-1]}return{position:e,bandScale:i}}calcScales(t,e){var i,r;const{bandPadding:s,paddingInner:a,paddingOuter:o}=this._spec,l=ut(s),u=ut(a),h=ut(o);for(let c=0;c<this._scales.length;c++){const d=l?s[c]:s,p=u?a[c]:a,f=h?o[c]:o;this._scales[c].paddingInner((i=p??d)!==null&&i!==void 0?i:t,!0).paddingOuter((r=f??d)!==null&&r!==void 0?r:e,!0)}}computeBandDomain(t){if(!t.length)return[];if(t.length===1)return t[0].values;const e=new Set;for(let i=0;i<t.length;i++)for(let r=0;r<t[i].values.length;r++)e.add(t[i].values[r]);return Array.from(e)}updateScaleDomain(){var t;if(!this.isSeriesDataEnable())return;!(!((t=this._rawDomainIndex)===null||t===void 0)&&t.length)&&this._scales.length&&this._updateRawDomain();const e=this._spec.domain;for(let i=0;i<this._scales.length;i++)if(e&&e.length&&i===0)this._scales[i].domain(e);else{const r=this.collectData(i),s=this.computeBandDomain(r);this._scales[i].domain(s.sort((a,o)=>this._rawDomainIndex[i][a]-this._rawDomainIndex[i][o]))}this.transformScaleDomain(),this.event.emit(Wt.scaleDomainUpdate,{model:this}),this.event.emit(Wt.scaleUpdate,{model:this,value:"domain"})}getLabelItems(t){const e=[];let i=[];return this._scales.forEach((r,s)=>{var a;const o=this._tickDataMap[s],l=(a=o==null?void 0:o.getLatestData())===null||a===void 0?void 0:a.length,u=l?o.getLatestData().map(h=>h.value):r.domain();if(u&&u.length)if(i&&i.length){const h=[],c=[];i.forEach(d=>{u.forEach(p=>{const f=ot(d).concat(p);if(c.push(f),l){const g=nm(p,this._getNormalizedValue(f,t));h.push(g)}})}),l&&e.push(h.filter(d=>d.value>=0&&d.value<=1)),i=c}else u.forEach(h=>{i.push(h)}),l&&e.push(o.getLatestData().map(h=>nm(h.value,this._getNormalizedValue([h.value],t))).filter(h=>h.value>=0&&h.value<=1))}),e.reverse()}_updateRawDomain(){this._rawDomainIndex=[];const t=this._spec.domain;for(let e=0;e<this._scales.length;e++)if(t&&t.length&&e===0)this._scales[e].domain(t);else{const i=this.collectData(e,!0),r=this.computeBandDomain(i);this._rawDomainIndex[e]={},r.forEach((s,a)=>this._rawDomainIndex[e][s]=a)}}_clearRawDomain(){this._rawDomainIndex=[]}}class j0 extends wC{constructor(){super(...arguments),this.type=mt.cartesianBandAxis,this._scale=new kp}computeDomain(t){return this.computeBandDomain(t)}updateScaleRange(){const t=super.updateScaleRange();return this.updateGroupScaleRange(),t}initScales(){super.initScales(),this.calcScales(this._defaultBandInnerPadding,this._defaultBandOuterPadding)}axisHelper(){const t=(e=0)=>this._scales[e];return{isContinuous:!1,dataToPosition:this.dataToPosition.bind(this),getScale:t,getBandwidth:(e=0)=>t(e).bandwidth(),getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>this._inverse,getSpec:()=>this._spec}}transformScaleDomain(){this.updateFixedWholeLength()}updateFixedWholeLength(){if(this._scale){const{bandSize:t,maxBandSize:e,minBandSize:i}=this._getOuterBandSizeFromSpec();if(t&&this._scale.bandwidth(t),e&&this._scale.maxBandwidth(e),i&&this._scale.minBandwidth(i),this._scale.isBandwidthFixed()&&this._spec.autoRegionSize&&(t||e)){const r=KL(this._scale.domain().length,t??e,this._scale.paddingInner(),this._scale.paddingOuter());["bottom","top"].includes(this._orient)?this._regions.forEach(s=>s.setMaxWidth(r)):["left","right"].includes(this._orient)&&this._regions.forEach(s=>s.setMaxHeight(r))}}}_getOuterBandSizeFromSpec(){var t;let{bandSize:e,maxBandSize:i,minBandSize:r,bandSizeLevel:s=0}=this._spec;const{gap:a,extend:o=0}=(t=this._spec.bandSizeExtend)!==null&&t!==void 0?t:{};s=Math.min(s,this._scales.length-1);for(let l=s;l>0;l--){const u=this._scales[l],h=u.domain(),c=u.paddingInner(),d=u.paddingOuter(),p=f=>{const g=l===s?o:0;return F(a)||l<s?KL(h.length,f,c,d)+g:(f+(It(a)?f*(Number(a.substring(0,a.length-1))/100):a))*h.length/(this._scales[l-1].paddingInner()+1)+g};z(e)&&(e=p(e)),z(i)&&(i=p(i)),z(r)&&(r=p(r))}return{bandSize:e,maxBandSize:i,minBandSize:r}}}j0.type=mt.cartesianBandAxis,j0.specKey="axes",On(j0,Kit);const $s=()=>{Mp(),Z.registerComponent(j0.type,j0)};class CC extends tc{constructor(){super(...arguments),this.type=mt.cartesianTimeAxis,this._zero=!1,this.effect={scaleUpdate:t=>{this.computeData(t==null?void 0:t.value),zi(this._regions,e=>{Ii(this.getOrient())?e.setXAxisHelper(this.axisHelper()):e.setYAxisHelper(this.axisHelper())},{userId:this._seriesUserId,specIndex:this._seriesIndex})}}}setAttrFromSpec(){var t;super.setAttrFromSpec(),this._tick=Ut({},this._spec.tick,(t=this._spec.layers)===null||t===void 0?void 0:t[0])}_initData(){var t;if(super._initData(),(t=this._spec.layers)===null||t===void 0?void 0:t[1]){const e=new Le(this._option.dataSet,{name:`${this.type}_${this.id}_layer_1_ticks`}).parse(this._scale,{type:"scale"}).transform({type:"ticks",options:Object.assign(Object.assign({},this._tickTransformOption()),{tickCount:this._spec.layers[1].tickCount,forceTickCount:this._spec.layers[1].forceTickCount,tickStep:this._spec.layers[1].tickStep})},!1);this._layerTickData=new Cl(this._option,e)}}computeData(t){super.computeData(t),this._layerTickData&&(this._layerTickData.getDataView().reRunAllTransform(),this._layerTickData.updateData())}_getLabelFormatMethod(){var t,e,i,r,s,a,o,l;const u=Ro.getInstance(),h=((e=(t=this._spec.layers)===null||t===void 0?void 0:t[1])===null||e===void 0?void 0:e.timeFormat)||"%Y%m%d",c=(((r=(i=this._spec.layers)===null||i===void 0?void 0:i[1])===null||r===void 0?void 0:r.timeFormatMode)||"local")==="local"?u.timeFormat:u.timeUTCFormat,d=((a=(s=this._spec.layers)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.timeFormat)||"%Y%m%d",p=(((l=(o=this._spec.layers)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.timeFormatMode)||"local")==="local"?u.timeFormat:u.timeUTCFormat;return(f,g,_,v,y)=>{var b;let S;return S=y===0?p(d,f):c(h,f),!((b=this._spec.label)===null||b===void 0)&&b.formatMethod?this._spec.label.formatMethod(S,g):S}}getLabelItems(t){var e,i;const r=[],s=(e=this.getTickData())===null||e===void 0?void 0:e.getLatestData();s&&s.length&&r.push(s.map(o=>nm(o.value,this._getNormalizedValue([o.value],t))));const a=(i=this._layerTickData)===null||i===void 0?void 0:i.getLatestData();return a&&a.length&&r.push(a.map(o=>nm(o.value,this._getNormalizedValue([o.value],t)))),r}transformScaleDomain(){}}CC.type=mt.cartesianTimeAxis,CC.specKey="axes";const GHt=()=>{Mp(),Z.registerComponent(CC.type,CC)};class N0 extends tc{constructor(){super(...arguments),this.type=mt.cartesianLogAxis,this._zero=!1,this._scale=new _F}initScales(){var t;super.initScales(),this._scale.base((t=this._spec.base)!==null&&t!==void 0?t:10),this._scale.clamp(!0,null,!1)}transformScaleDomain(){}}N0.type=mt.cartesianLogAxis,N0.specKey="axes",On(N0,xT);const UHt=()=>{Mp(),Z.registerComponent(N0.type,N0)};class z0 extends tc{constructor(){super(...arguments),this.type=mt.cartesianSymlogAxis,this._zero=!1,this._scale=new yF}initScales(){var t;super.initScales(),this._scale.constant((t=this._spec.constant)!==null&&t!==void 0?t:10)}transformScaleDomain(){}}z0.type=mt.cartesianSymlogAxis,z0.specKey="axes",On(z0,xT);const YHt=()=>{Mp(),Z.registerComponent(z0.type,z0)};class Qf extends so{constructor(){super(...arguments),this.type=at.line,this.transformerConstructor=I1,this._sortDataByAxis=!1}compile(){super.compile(),this.addSamplingCompile(),this.addOverlapCompile()}initMark(){var t;const e={progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold},i=(t=this._spec.seriesMark)!==null&&t!==void 0?t:"line";this.initLineMark(e,i==="line"),this.initSymbolMark(e,i==="point")}initTooltip(){super.initTooltip();const{dimension:t,group:e,mark:i}=this._tooltipHelper.activeTriggerSet;this._lineMark&&(t.add(this._lineMark),e.add(this._lineMark)),this._symbolMark&&(i.add(this._symbolMark),e.add(this._symbolMark))}initMarkStyle(){this.initLineMarkStyle(this._direction),this.initSymbolMarkStyle()}initAnimation(){var t,e,i,r;const s={direction:this.direction},a=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset;if(this._lineMark.setAnimationConfig(Ae((i=Z.getAnimationInKey("line"))===null||i===void 0?void 0:i(s,a),Ee("line",this._spec,this._markAttributeContext))),this._symbolMark){const o=Lc(this);this._symbolMark.setAnimationConfig(Ae((r=Z.getAnimationInKey("scaleInOut"))===null||r===void 0?void 0:r(),Ee("point",this._spec,this._markAttributeContext),o))}}onLayoutEnd(t){super.onLayoutEnd(t),this.reCompileSampling()}getSeriesStyle(t){var e;const i=((e=this._spec)===null||e===void 0?void 0:e.seriesMark)!=="point";return r=>{var s,a;return i&&r==="fill"&&(r="stroke"),(a=(s=this._seriesMark)===null||s===void 0?void 0:s.getAttribute(r,t))!==null&&a!==void 0?a:void 0}}getDefaultShapeType(){return"circle"}getActiveMarks(){return[this._lineMark,this._symbolMark]}}Qf.type=at.line,Qf.mark=fet,Qf.transformerConstructor=I1,On(Qf,e5);const XHt=()=>{FF(),jF(),yT(),Uu(),wit(),gT(),$s(),Ws(),Z.registerSeries(Qf.type,Qf)};class KHt{get dataList(){return this._dataArr}constructor(t,e){this._dataArr=[],this._onError=e,this._dataSet=t}parseData(t){this._dataArr=[];const e=ot(t);for(let i=0;i<e.length;i++)this._dataArr.push(UF(e[i],this._dataSet,this._dataArr,{onError:this._onError}))}updateData(t,e=!1,i=!0){const r=ot(t);return(!e||r.length===this._dataArr.length)&&(this._dataValueForEach(r,(s,a)=>{a.markRunning()}),this._dataValueForEach(r,(s,a)=>{YF(a,s,i)}),!0)}_dataValueForEach(t,e){t.forEach((i,r)=>{if(i instanceof Le)return;const s=this.getSeriesData(i.id,r);s&&e(i,s,r)})}getSeriesData(t,e){var i,r;if(!this._dataArr.length)return null;if(typeof t=="string"){const s=this._dataArr.filter(a=>a.name===t);return s[0]?s[0]:((i=this._onError)===null||i===void 0||i.call(this,`no data matches dataId ${t}!`),null)}return typeof e=="number"?this._dataArr[e]?this._dataArr[e]:((r=this._onError)===null||r===void 0||r.call(this,`no data matches dataIndex ${e}!`),null):this._dataArr[0]}}class qHt{constructor(t,e){this._scaleSpecMap=new Map,this._scaleMap=new Map,this._modelScaleSpecMap=new Map,this._markAttributeScaleMap=new Map,this._spec=null,this._chart=null,this.getStatisticalFields=i=>{const r=[];return this._scaleSpecMap.forEach((s,a)=>{Gf(s.domain)&&s.domain.forEach(o=>{o.dataId===i&&o.fields.forEach(l=>{xg(r,[{key:l,operations:ti(s.type)?["max","min"]:["values"]}])})})}),this._markAttributeScaleMap.forEach((s,a)=>{const o=this.getScale(a);s.forEach(l=>{this._getSeriesBySeriesId(l.seriesId).getRawData().name===i&&l.field&&xg(r,[{key:l.field,operations:ti(o.type)?["max","min"]:["values"]}])})}),r},this._spec=t,this._chart=e,this._setAttrFromSpec()}_createFromSpec(t){if(!t.id)return null;let e=this._scaleMap.get(t.id);return e||(e=t.type==="ordinal"&&t.id==="color"?pD("colorOrdinal"):pD(t.type)),e?(ut(t.range)&&e.range(t.range),ut(t.domain)&&(Gf(t.domain)||e.domain(t.domain)),t.specified&&e.specified&&e.specified(t.specified),e):null}_setAttrFromSpec(){var t;if(!(!((t=this._spec)===null||t===void 0)&&t.length))return;const e=new Map,i=new Map;this._spec.forEach(r=>{const s=this._createFromSpec(r);s&&(e.set(r.id,s),i.set(r.id,r))}),this._modelScaleSpecMap.forEach(r=>{const s=this._createFromSpec(r);s&&(e.set(r.id,s),i.set(r.id,r))}),this._scaleSpecMap=i,this._scaleMap=e}updateSpec(t){const e={change:!1,reMake:!1,reRender:!1,reSize:!1,reCompile:!1};if(mi(t,this._spec))return e;e.change=!0;for(let i=0;i<t.length;i++){const r=t[i],s=this._scaleMap.get(r.id);if(!s)return e.reMake=!0,e;const a=this._spec.find(o=>o.id===r.id);if(!a.id||a.type!==r.type)return e.reMake=!0,e;r.range&&!mi(r.range,s.range())&&(s.range(r.range),e.reRender=!0),Gf(r.domain)?e.reRender=!0:mi(r.domain,s.domain())||(s.domain(r.domain),e.reRender=!0),this._scaleSpecMap.set(r.id,r)}return this._spec=t,e}registerModelScale(t){const e=this._createFromSpec(t);e&&(this._modelScaleSpecMap.set(t.id,t),this._scaleSpecMap.set(t.id,t),this._scaleMap.set(t.id,e))}removeModelScale(t){this._modelScaleSpecMap.forEach(e=>{t(e)&&(this._modelScaleSpecMap.delete(e.id),this._scaleSpecMap.delete(e.id),this._scaleMap.delete(e.id))})}getScale(t){return this._scaleMap.get(t)}getScaleSpec(t){return this._scaleSpecMap.get(t)}_getSeriesByRawDataId(t){const e=this._chart.getAllSeries();for(let i=0;i<e.length;i++){const r=e[i];if(r.getRawData().name===t)return r}return null}_getSeriesBySeriesId(t){const e=this._chart.getAllSeries();for(let i=0;i<e.length;i++){const r=e[i];if(r.id===t)return r}return null}updateScaleDomain(t){this._scaleSpecMap.forEach((e,i)=>{const r=this._scaleMap.get(i);if(!r)return;if(!Gf(e.domain))return e.domain&&e.domain.length!==0||r.domain(t),void this._updateMarkScale(i,r,r.domain().slice());let s;s=ti(e.type)?[null,null]:new Set,e.domain.forEach(o=>{const l=this._getSeriesByRawDataId(o.dataId);if(!l)return;const u=ti(e.type);o.fields.forEach(h=>{const c=l.getRawDataStatisticsByField(h,u);c&&(u?(F(s[0])?s[0]=c.min:s[0]=Math.min(c.min,s[0]),F(s[1])?s[1]=c.max:s[1]=Math.max(c.max,s[1])):c.values.forEach(d=>{s.add(d)}))})});const a=s;ti(e.type)||(s=Array.from(s)),r.domain(s),this._updateMarkScale(i,r,a)})}_updateMarkScale(t,e,i){const r=this._markAttributeScaleMap.get(t);r&&r.length!==0&&r.forEach(s=>{if(!s.field||!s.markScale||s.markScale===e)return;if(F(s.changeDomain)||s.changeDomain==="none"||F(s.seriesId))return void(ti(e.type)?s.markScale.domain(i):e.domain(Array.from(i)));const a=this._getSeriesBySeriesId(s.seriesId),o=ti(e.type),l=a.getRawDataStatisticsByField(s.field,o);if(!Gt(l))return s.changeDomain==="expand"?(o?(i[0]=Math.min(i[0],l.min),i[1]=Math.max(i[1],l.max)):(l.values.forEach(u=>{i.add(u)}),i=Array.from(i)),void s.markScale.domain(i)):void(s.changeDomain!=="replace"||(o?s.markScale.domain([l.min,l.max]):s.markScale.domain(l.values)));ti(e.type)?s.markScale.domain(i):e.domain(Array.from(i))})}registerMarkAttributeScale(t,e){const i=this._scaleMap.get(t.scale);let r=this._markAttributeScaleMap.get(t.scale);r||(r=[],this._markAttributeScaleMap.set(t.scale,r));let s=i;return(F(t.field)||!F(t.changeDomain)&&t.changeDomain!=="none"&&!F(e))&&(s=i.clone()),r.push(Object.assign(Object.assign({},t),{seriesId:e,markScale:s})),s}}class ZHt{constructor(t){this.stackRegion=({model:e})=>{const i=e.getSeries();if(!i.some(l=>l.getStack()))return;const r=i.some(l=>{var u,h;return(h=(u=l.getSpec())===null||u===void 0?void 0:u.totalLabel)===null||h===void 0?void 0:h.visible}),s=r||i.some(l=>l.getPercent()),a=i.some(l=>l.getStackOffsetSilhouette()),o=qet(e,!0);for(const l in o)for(const u in o[l].nodes)Qet(o[l].nodes[u],e.getStackInverse(),s);if(a)for(const l in o)for(const u in o[l].nodes)I7t(o[l].nodes[u]);r&&e.getSeries().forEach(l=>{const u=l.getStackData(),h=l.getStackValue(),c=l.getStackValueField();u&&c&&Jet(o[h],c)})},this._chart=t}init(){this._chart.getAllRegions().forEach(t=>{t.event.on(Wt.regionSeriesDataFilterOver,{filter:({model:e})=>(e==null?void 0:e.id)===t.id},this.stackRegion)})}stackAll(){this._chart.getAllRegions().forEach(t=>{this.stackRegion({model:t})})}}var V$=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};class Ei extends hT{getSpec(){return this._spec}setSpec(t){this._spec=t}getOption(){return this._option}getLayoutRect(){return this._layoutRect}getViewRect(){return this._viewRect}getLayoutTag(){return this._layoutTag}setLayoutTag(t,e,i=!0){var r;return this._layoutTag=t,!((r=this.getCompiler())===null||r===void 0)&&r.getVGrammarView()&&(this.getCompiler().getVGrammarView().updateLayoutTag(),t&&i&&this.getCompiler().renderNextTick(e)),this._layoutTag}getGlobalScale(){return this._globalScale}getEvent(){return this._event}get chartData(){return this._chartData}constructor(t,e){var i,r,s,a;super(e),this.type="chart",this.id=wp(),this._regions=[],this._series=[],this._components=[],this._layoutRect={x:0,y:0,width:qf,height:Zf},this._viewRect={width:qf,height:Zf},this._viewBox={x1:0,y1:0,x2:qf,y2:Zf},this._layoutTag=!0,this._idMap=new Map,this.state={layoutUpdateRank:1},this.padding={top:0,left:0,right:0,bottom:0},this.getAllSeries=()=>{var o;return(o=this._series)!==null&&o!==void 0?o:[]},this.getRegionsInIndex=o=>o&&o.length!==0?this._regions.filter((l,u)=>o.includes(u)):[this._regions[0]],this.getAllRegions=()=>this._regions,this.getRegionsInIds=o=>o?this._regions.filter(l=>o.includes(l.id)):[],this.getRegionsInQuerier=o=>o?this._regions.filter((l,u)=>ot(o).some(h=>z(h.regionId)&&h.regionId===l.userId||h.regionIndex===u)):this._regions,this.getRegionsInUserId=o=>{if(o)return this._regions.find(l=>l.userId===o)},this.getRegionsInUserIdOrIndex=(o,l)=>this.getAllRegions().filter(u=>o!=null&&o.length?u.userId&&o.includes(u.userId):!(l!=null&&l.length)||l.includes(u.getSpecIndex())),this.getComponents=()=>this._components,this.getSeriesInIndex=o=>o&&o.length!==0?this._series.filter((l,u)=>o.includes(u)):[this._series[0]],this.getSeriesInIds=o=>o?this._series.filter(l=>o.includes(l.id)):[],this.getSeriesInUserId=o=>{if(o)return this._series.find(l=>l.userId===o)},this.getSeriesInUserIdOrIndex=(o,l)=>this.getAllSeries().filter(u=>o!=null&&o.length?u.userId&&o.includes(u.userId):!(l!=null&&l.length)||l.includes(u.getSpecIndex())),this.getComponentByIndex=(o,l)=>{const u=this._components.filter(h=>(h.specKey||h.type)===o);if(u&&u.length!==0)return u[l]},this.getComponentsByKey=o=>this._components.filter(l=>(l.specKey||l.type)===o),this.getComponentByUserId=o=>{const l=this._components.find(u=>u.userId===o);if(l)return l},this.getComponentsByType=o=>this._components.filter(l=>l.type===o),this._paddingSpec=Ru((i=t.padding)!==null&&i!==void 0?i:e.getTheme().padding),this._event=new lT(e.eventDispatcher,e.mode),this._dataSet=e.dataSet,this._chartData=new KHt(this._dataSet,(r=this._option)===null||r===void 0?void 0:r.onError),this._modelOption=Object.assign(Object.assign({},e),{mode:this._option.mode,map:this._idMap,getChartLayoutRect:()=>this._layoutRect,getChartViewRect:()=>this._viewRect,getChart:()=>this,globalScale:this._globalScale,onError:(s=this._option)===null||s===void 0?void 0:s.onError,disableTriggerEvent:((a=this._option)===null||a===void 0?void 0:a.disableTriggerEvent)===!0,getSeriesData:this._chartData.getSeriesData.bind(this._chartData)}),this._spec=t}created(){this._transformer=new this.transformerConstructor(Object.assign(Object.assign({},this._option),{type:this.type,seriesType:this.seriesType})),this._chartData.parseData(this._spec.data),this._createGlobalScale(),this._createBackground(),this._createLayout(),this._transformer.forEachRegionInSpec(this._spec,this._createRegion.bind(this)),this._transformer.forEachSeriesInSpec(this._spec,this._createSeries.bind(this)),this._transformer.forEachComponentInSpec(this._spec,this._createComponent.bind(this),this._option.getSpecInfo())}init(){this._regions.forEach(t=>t.init({})),this._series.forEach(t=>t.init({})),this._components.forEach(t=>t.init({dataSet:this._dataSet})),this._initEvent(),this._canStack&&(this._stack=new ZHt(this),this._stack.init()),this.reDataFlow()}reDataFlow(){this._series.forEach(t=>{var e;return(e=t.getRawData())===null||e===void 0?void 0:e.markRunning()}),this._series.forEach(t=>t.fillData()),this.updateGlobalScaleDomain()}onResize(t,e,i=!0){const r={width:t,height:e};this._canvasRect=r,this._updateLayoutRect(this._option.viewBox),this.setLayoutTag(!0,null,i)}updateViewBox(t,e){this._option.viewBox=t,this._updateLayoutRect(t),this.setLayoutTag(!0,null,e)}_createBackground(){const t=this._spec.background;if(!t||typeof t!="object"||z(t.gradient))return;const e=fc(t,["x","y","width","height","x1","y1","image"]);e.background=t.image,this._backgroundMark=Z.createMark("group","chart-background",{model:this,map:this._option.map,getCompiler:this.getCompiler,globalScale:this._globalScale}),this._backgroundMark.created(),this._backgroundMark.setStyle(Object.assign(Object.assign({},e),{x:()=>this._viewBox.x1,y:()=>this._viewBox.y1,width:()=>this._viewBox.x2-this._viewBox.x1,height:()=>this._viewBox.y2-this._viewBox.y1}))}_createRegion(t,e){if(!t)return;const{spec:i}=e,r=V$(e,["spec"]),s=new t(i,Object.assign(Object.assign({},this._modelOption),r));s&&(s.created(),this._regions.push(s))}_createSeries(t,e){if(!t)return;const{spec:i}=e,r=V$(e,["spec"]);let s;if(z(i.regionId)?s=this.getRegionsInUserId(i.regionId):z(i.regionIndex)&&(s=this.getRegionsInIndex([i.regionIndex])[0]),!s&&!(s=this._regions[0]))return;const a=new t(i,Object.assign(Object.assign(Object.assign({},this._modelOption),r),{type:i.type,region:s,globalScale:this._globalScale,sourceDataList:this._chartData.dataList}));a&&(a.created(),this._series.push(a),s.addSeries(a))}getSeriesById(t){return this._series.find(e=>e.id===t)}_createComponent(t,e){const i=t.createComponent(e,Object.assign(Object.assign({},this._modelOption),{type:t.type,getAllRegions:this.getAllRegions,getRegionsInIndex:this.getRegionsInIndex,getRegionsInIds:this.getRegionsInIds,getRegionsInUserIdOrIndex:this.getRegionsInUserIdOrIndex,getAllSeries:this.getAllSeries,getSeriesInIndex:this.getSeriesInIndex,getSeriesInIds:this.getSeriesInIds,getSeriesInUserIdOrIndex:this.getSeriesInUserIdOrIndex,getAllComponents:this.getComponents,getComponentByIndex:this.getComponentByIndex,getComponentByUserId:this.getComponentByUserId,getComponentsByKey:this.getComponentsByKey,getComponentsByType:this.getComponentsByType}));i&&(i.created(),this._components.push(i))}getAllComponents(){return this._components}getAllModels(){return[].concat(this.getAllSeries(),this.getAllComponents(),this.getAllRegions())}getModelInFilter(t){if(It(t))return this.getAllModels().find(i=>i.userId===t);if(ft(t))return this.getAllModels().find(i=>t(i));let e=0;return this.getAllModels().find(i=>{var r;if(((r=i.specKey)!==null&&r!==void 0?r:i.type)===t.type){if(e===t.index)return!0;e++}return!1})}_createLayout(){this._updateLayoutRect(this._option.viewBox),this._initLayoutFunc()}setLayout(t){this._option.layout=t,this._initLayoutFunc()}_initLayoutFunc(){var t,e,i;if(this._layoutFunc=this._option.layout,!this._layoutFunc){let r=!1;(this._spec.zField||this._spec.series&&this._spec.series.some(a=>a.zField))&&(r=!0);const s=Z.getLayoutInKey((e=(t=this._spec.layout)===null||t===void 0?void 0:t.type)!==null&&e!==void 0?e:r?"layout3d":"base");if(s){const a=new s(this._spec.layout,{onError:(i=this._option)===null||i===void 0?void 0:i.onError});this._layoutFunc=a.layoutItems.bind(a)}}}layout(t){var e,i,r,s;if((i=(e=this._option.performanceHook)===null||e===void 0?void 0:e.beforeLayoutWithSceneGraph)===null||i===void 0||i.call(e),this.getLayoutTag()){this._event.emit(Wt.layoutStart,{chart:this,vchart:this._option.globalInstance}),this.onLayoutStart(t);const a=this.getLayoutElements();this._layoutFunc(this,a,this._layoutRect,this._viewBox),this._event.emit(Wt.afterLayout,{elements:a,chart:this}),this.setLayoutTag(!1),this.onLayoutEnd(t),this._event.emit(Wt.layoutEnd,{chart:this,vchart:this._option.globalInstance})}(s=(r=this._option.performanceHook)===null||r===void 0?void 0:r.afterLayoutWithSceneGraph)===null||s===void 0||s.call(r)}onLayoutStart(t){this.getAllModels().forEach(e=>e.onLayoutStart(this._layoutRect,this._viewRect,t))}onLayoutEnd(t){this.getAllModels().forEach(e=>{e.modelType!=="series"&&e.onLayoutEnd(t)})}onEvaluateEnd(t){[...this._components,...this._regions,...this._series].forEach(e=>e.onEvaluateEnd(t))}getLayoutElements(){return this.getAllModels().map(t=>t.layout).filter(t=>!!t)}getModelById(t){const e=this._idMap.get(t);if(e&&e instanceof KF)return e}getModelByUserId(t){const e=this.getSeriesInUserId(t);if(e)return e;const i=this.getRegionsInUserId(t);return i||this.getComponentByUserId(t)||void 0}getAllMarks(){return Array.from(this._idMap.values()).filter(t=>t&&t instanceof Sr)}getMarkById(t){const e=this._idMap.get(t);if(e&&e instanceof Sr)return e}updateData(t,e,i=!0,r){const s=this._dataSet.getDataView(t);s&&(s.markRunning(),s.parseNewData(e,r)),i&&this.updateGlobalScaleDomain(),this.getAllModels().forEach(a=>a.onDataUpdate())}updateFullData(t,e=!0){ot(t).forEach(i=>{const r=this._dataSet.getDataView(i.id);r&&r.markRunning()}),ot(t).forEach(i=>{const r=this._dataSet.getDataView(i.id);r&&YF(r,i,!0)}),e&&this.updateGlobalScaleDomain(),this.getAllModels().forEach(i=>i.onDataUpdate())}onRender(t){}setCanvasRect(t,e){this._canvasRect={width:t,height:e}}getCanvasRect(){return this._canvasRect||(this._canvasRect=dit(this._spec,this._option,{width:qf,height:Zf})),this._canvasRect}getSeriesData(t,e){return this._chartData.getSeriesData(t,e)}_transformSpecScale(){var t;const e=this._spec.scales?[...this._spec.scales]:[];let i=e.find(s=>s.id==="color");const r=this.getColorScheme();if(!i&&(i={type:"ordinal",id:"color",domain:null,range:null},e.push(i),this._spec.color)){const s=this._spec.color;if(ut(s))i.range=s;else{const a=s;Object.prototype.hasOwnProperty.call(a,"type")&&(i.type=a.type),Object.prototype.hasOwnProperty.call(a,"domain")&&(i.domain=a.domain),Object.prototype.hasOwnProperty.call(a,"range")&&(i.range=a.range),Object.prototype.hasOwnProperty.call(a,"specified")&&(i.specified=a.specified)}}return!((t=i.range)===null||t===void 0)&&t.length||(i.range=Ty(r),i.rangeTheme=!0),e}_createGlobalScale(){this._globalScale=new qHt(this._transformSpecScale(),this),this._modelOption.globalScale=this._globalScale}updateGlobalScaleDomain(){const t=new Set;this._series.forEach(i=>{const r=i.getSeriesKeys();r&&r.forEach(s=>t.add(s))});const e=Array.from(t);this._globalScale.updateScaleDomain(e)}updateGlobalScale(t){pf(t,this._globalScale.updateSpec(this._transformSpecScale()))}updateGlobalScaleTheme(){const t=this._globalScale.getScaleSpec("color"),e=this.getColorScheme();t.rangeTheme&&(t.range=Ty(e),this._globalScale.getScale("color").range(t.range))}updateSpec(t){const e={change:!1,reMake:!1,reRender:!1,reSize:!1,reCompile:!1};if(this.setLayoutTag(!0,null,!1),t.type!==this.type)return e.reMake=!0,e;const i=Object.keys(this._spec).sort(),r=Object.keys(t).sort();if(JSON.stringify(i)!==JSON.stringify(r))return e.reMake=!0,e;for(let a=0;a<i.length;a++){const o=i[a];if(ut(this._spec[o])&&this._spec[o].length!==t[o].length)return e.reMake=!0,e}const s=this._spec;return this._spec=t,this.updateChartConfig(e,s),e.reMake?e:(this.updateGlobalScale(e),e.reMake?e:(this.updateRegionSpec(e),e.reMake?e:(this.updateComponentSpec(e),e.reMake||(this.updateSeriesSpec(e),e.reMake||(this.reInit(),this.updateDataSpec(),this.updateGlobalScaleDomain())),e)))}updateChartConfig(t,e){var i,r;this._paddingSpec=Ru((i=this._spec.padding)!==null&&i!==void 0?i:(r=this._option)===null||r===void 0?void 0:r.getTheme().padding),this._updateLayoutRect(this._viewBox),mi(this._spec.background,e.background)||(t.reMake=!0)}updateDataSpec(){this._spec.data&&this._chartData.updateData(this._spec.data,!1,!0)}updateRegionSpec(t){var e;!((e=this._spec)===null||e===void 0)&&e.region&&(this._spec.region.length===this._regions.length?this._regions.forEach(i=>{pf(t,i.updateSpec(this._spec.region[i.getSpecIndex()]))}):t.reMake=!0)}updateComponentSpec(t){const e={};this._components.forEach(i=>{var r,s;const a=i.specKey||i.type,o=(r=this._spec[a])!==null&&r!==void 0?r:{};ut(o)?(e[a]=e[a]||{specCount:o.length,componentCount:0},e[a].componentCount++,pf(t,i.updateSpec((s=o[i.getSpecIndex()])!==null&&s!==void 0?s:{},o))):pf(t,i.updateSpec(o))});for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const r=e[i];r.componentCount!==r.specCount&&(t.reMake=!0)}}updateSeriesSpec(t){this._spec.series.length===this._series.length?this._series.forEach(e=>{const i=this._spec.series[e.getSpecIndex()];pf(t,e.updateSpec(i))}):t.reMake=!0}getCanvas(){var t,e;return(e=(t=this.getCompiler())===null||t===void 0?void 0:t.getCanvas())!==null&&e!==void 0?e:null}_updateLayoutRect(t){let e=this.getCanvasRect();if(t){this._viewBox=t;const{x1:i=0,y1:r=0,x2:s,y2:a}=t;e={width:s-i,height:a-r}}else this._viewBox={x1:0,y1:0,x2:e.width,y2:e.height};this._viewRect=e,this.padding=Wet(this._paddingSpec,e,e),this._layoutRect.width=e.width-this.padding.left-this.padding.right,this._layoutRect.height=e.height-this.padding.top-this.padding.bottom,this._layoutRect.x=this.padding.left,this._layoutRect.y=this.padding.top,this._event.emit(Wt.layoutRectUpdate,{chart:this})}setCurrentTheme(){this.updateChartConfig({change:!0,reMake:!1},this._spec),this.setLayoutTag(!0,null,!1),this.updateGlobalScaleTheme(),this.reInit()}reInit(){[...this._regions,...this._series,...this._components].forEach(t=>{const e=t.getSpecInfo();e&&e.spec&&t.reInit(e.spec)})}clear(){this.getAllModels().forEach(t=>{var e;return(e=t.clear)===null||e===void 0?void 0:e.call(t)})}compile(){this.compileBackground(),this.compileLayout(),this.compileRegions(),this.compileSeries(),this.compileComponents()}afterCompile(){this.getAllRegions().forEach(t=>{var e;(e=t.afterCompile)===null||e===void 0||e.call(t)}),this.getAllSeries().forEach(t=>{var e;(e=t.afterCompile)===null||e===void 0||e.call(t)}),this.getAllComponents().forEach(t=>{var e;(e=t.afterCompile)===null||e===void 0||e.call(t)})}compileLayout(){const{width:t,height:e}=this.getCanvasRect();this.getCompiler().setSize(t,e)}compileBackground(){var t;this._backgroundMark&&(this._backgroundMark.compile(),(t=this._backgroundMark.getProduct())===null||t===void 0||t.configure({context:{model:this}}).layout(()=>{}))}compileRegions(){var t,e,i,r;(e=(t=this._option.performanceHook)===null||t===void 0?void 0:t.beforeRegionCompile)===null||e===void 0||e.call(t),this.getAllRegions().forEach(s=>{s.compile()}),(r=(i=this._option.performanceHook)===null||i===void 0?void 0:i.afterRegionCompile)===null||r===void 0||r.call(i)}compileSeries(){var t,e,i,r;(e=(t=this._option.performanceHook)===null||t===void 0?void 0:t.beforeSeriesCompile)===null||e===void 0||e.call(t),this.getAllSeries().forEach(s=>{s.compile()}),(r=(i=this._option.performanceHook)===null||i===void 0?void 0:i.afterSeriesCompile)===null||r===void 0||r.call(i)}compileComponents(){var t,e,i,r;(e=(t=this._option.performanceHook)===null||t===void 0?void 0:t.beforeComponentCompile)===null||e===void 0||e.call(t),this.getAllComponents().forEach(s=>{s.compile()}),(r=(i=this._option.performanceHook)===null||i===void 0?void 0:i.afterComponentCompile)===null||r===void 0||r.call(i)}release(){[...this._components,...this._regions,...this._series].forEach(t=>{t.beforeRelease()}),super.release(),this.clear(),[...this._components,...this._regions,...this._series].forEach(t=>{t.release()}),this._components=this._regions=this._series=[],this._spec={},this._dataSet=this._globalScale=this._layoutFunc=null,this._layoutTag=!1,this._idMap.clear()}onLayout(t){const e=t.rootMark;this.layout({group:e,srView:t})}updateState(t,e){const i=this.getAllSeries();for(const r in t){if(Gt(t[r]))continue;const s=t[r];let a={stateValue:r};a=ft(s.filter)?Object.assign({filter:s.filter},a):Object.assign(Object.assign({},s.filter),a),s.level&&(a.level=s.level),i.forEach(o=>{o.getMarks().forEach(l=>{l.stateStyle[r]&&(e&&!e(o,l,r)||(l.state.changeStateInfo(a),l.updateMarkState(r)))})})}}setSelected(t,e,i){this._setStateInDatum(Bt.STATE_SELECTED,!0,t,e,i)}setHovered(t,e,i){this._setStateInDatum(Bt.STATE_HOVER,!0,t,e,i)}clearState(t){this.getAllRegions().forEach(e=>{e.interaction.clearEventElement(t,!0),e.interaction.resetInteraction(t,null)})}clearSelected(){this.clearState(Bt.STATE_SELECTED)}clearHovered(){this.clearState(Bt.STATE_HOVER)}_initEvent(){[Wt.dataZoomChange,Wt.scrollBarChange].forEach(t=>{this._event.on(t,({value:e})=>{this._disableMarkAnimation(["exit","update"]);const i=()=>{this._enableMarkAnimation(["exit","update"]),this._event.off(Ht.AFTER_MARK_RENDER_END,i)};this._event.on(Ht.AFTER_MARK_RENDER_END,i)})})}_enableMarkAnimation(t){this.getAllMarks().forEach(e=>{const i=e.getProduct();i&&i.animate&&i.animate.enableAnimationState(t)})}_disableMarkAnimation(t){this.getAllMarks().forEach(e=>{const i=e.getProduct();i&&i.animate&&i.animate.disableAnimationState(t)})}_setStateInDatum(t,e,i,r,s){const a=(i=i?ot(i):null)?Object.keys(i[0]):null;this.getRegionsInQuerier(s).forEach(o=>{i?(o.getSeries().forEach(l=>{l.getMarks().forEach(u=>{if(u.getProduct()&&(!r||ft(r)&&r(l,u))){const h=u.getProduct().isCollectionMark(),c=u.getProduct().elements;let d=c;if(h)d=c.filter(p=>{const f=p.getDatum();i.every((g,_)=>a.every(v=>g[v]==f[_][v]))});else if(i.length>1){const p=i.slice();d=c.filter(f=>{if(p.length===0)return!1;const g=f.getDatum(),_=p.findIndex(v=>a.every(y=>v[y]==g[y]));return _>=0&&(p.splice(_,1),!0)})}else{const p=c.find(f=>a.every(g=>i[0][g]==f.getDatum()[g]));p&&(d=[p])}d.forEach(p=>{o.interaction.startInteraction(t,p)})}})}),e&&o.interaction.reverseEventElement(t)):o.interaction.clearEventElement(t,!0)})}setDimensionIndex(t,e){var i,r,s,a;let o=null;Array.from(this._event.getComposedEventMap().values()).forEach(u=>{const{eventType:h,event:c}=u;if(h===Iu.dimensionHover||h===Iu.dimensionClick){const d=c.dispatch(t,e);d!=null&&d.length&&(o=d)}});const l=F(t)||!o||o.every(u=>qn(u.axis.getScale().type)&&F(u.index));if(e.tooltip!==!1){const u=this.getComponentsByType(mt.tooltip)[0];if(u!=null&&u.getVisible())if(l)(r=(i=u).hideTooltip)===null||r===void 0||r.call(i);else{const h={};o.forEach(c=>{const{axis:d,value:p,data:f}=c,g=d.getOrient()==="left"||d.getOrient()==="right";f.forEach(_=>{g?h[_.series.fieldY[0]]=p:h[_.series.fieldX[0]]=p})}),u.showTooltip(h,e.showTooltipOption)}}if(e.crosshair!==!1){const u=this.getComponentsByType(mt.cartesianCrosshair)[0];u&&u.clearAxisValue&&u.setAxisValue&&(l?((s=u.clearAxisValue)===null||s===void 0||s.call(u),(a=u.hide)===null||a===void 0||a.call(u)):o.forEach(h=>{const{axis:c,value:d}=h;u.clearAxisValue(),u.setAxisValue(d,c),u.layoutByValue()}))}}getColorScheme(){var t,e;return(e=(t=this._option).getTheme)===null||e===void 0?void 0:e.call(t).colorScheme}}const W$=(n,t)=>{var e;const i=n.spec,{regionId:r,regionIndex:s}=i;if(z(r)){const a=ot(r);return(e=t.region)===null||e===void 0?void 0:e.filter(({spec:o})=>a.includes(o.id))}if(z(s))return ot(s).map(a=>{var o;return(o=t.region)===null||o===void 0?void 0:o[a]}).filter(z)},JHt=(n,t)=>{var e;const i=n.spec,{seriesId:r,seriesIndex:s}=i;if(z(r)){const a=ot(r);return(e=t.series)===null||e===void 0?void 0:e.filter(({spec:o})=>a.includes(o.id))}if(z(s))return ot(s).map(a=>{var o;return(o=t.series)===null||o===void 0?void 0:o[a]}).filter(z)};class ao{constructor(t){this._option=t,this.type=t.type,this.seriesType=t.seriesType}initChartSpec(t){return this.transformSpec(t),this.transformModelSpec(t)}transformSpec(t){t.region&&t.region.length!==0||(t.region=[{}]),t.tooltip===void 0&&(t.tooltip={}),z(t.stackInverse)&&t.region.forEach(e=>{!z(e.stackInverse)&&(e.stackInverse=t.stackInverse)}),z(t.stackSort)&&t.region.forEach(e=>{!z(e.stackSort)&&(e.stackSort=t.stackSort)})}transformModelSpec(t){return this.createSpecInfo(t,(e,i,r)=>{const{spec:s,specPath:a,specInfoPath:o,type:l}=i,u=new e.transformerConstructor(Object.assign(Object.assign({},this._option),{type:l})).transformSpec(s,t,r);TS(t,a,u.spec),TS(r,o??a,Object.assign(Object.assign({},i),u))})}createSpecInfo(t,e){var i,r;e||(e=(a,o,l)=>{const{spec:u,specPath:h,specInfoPath:c,type:d}=o,p=new a.transformerConstructor(Object.assign(Object.assign({},this._option),{type:d}));TS(l,c??h,Object.assign(Object.assign({},o),{theme:p.getTheme(u,t)}))});const s={};return this.forEachRegionInSpec(t,e,s),this.forEachSeriesInSpec(t,e,s),(i=s.series)===null||i===void 0||i.forEach((a,o)=>{var l,u;const h=((u=(l=W$(a,s))!==null&&l!==void 0?l:s.region)!==null&&u!==void 0?u:[])[0];h&&(h.seriesIndexes||(h.seriesIndexes=[]),h.seriesIndexes.push(o),a.regionIndexes=h.regionIndexes.slice())}),this.forEachComponentInSpec(t,e,s),Object.values((r=s.component)!==null&&r!==void 0?r:{}).forEach(a=>a.forEach((o,l)=>{var u,h,c;if(o){if(!o.regionIndexes){const d=(h=(u=W$(o,s))!==null&&u!==void 0?u:s.region)!==null&&h!==void 0?h:[];o.regionIndexes=d.map(p=>p.regionIndexes[0])}if(!o.seriesIndexes){const d=JHt(o,s);if(d)o.seriesIndexes=d.map(({seriesIndexes:p})=>p[0]);else{const p=new Set;((c=o.regionIndexes)!==null&&c!==void 0?c:[]).forEach(f=>{var g,_;const v=(g=s.region)===null||g===void 0?void 0:g[f];(_=v==null?void 0:v.seriesIndexes)===null||_===void 0||_.forEach(y=>p.add(y))}),o.seriesIndexes=Array.from(p)}}}})),s}_isValidSeries(t){return!0}_getDefaultSeriesSpec(t){var e,i,r,s;return{dataKey:t.dataKey,hover:t.hover,select:t.select,label:t.label,seriesStyle:t.seriesStyle,animation:(e=t.animation)!==null&&e!==void 0?e:this._option.animation,animationThreshold:(i=t.animationThreshold)!==null&&i!==void 0?i:(s=(r=this._option).getTheme)===null||s===void 0?void 0:s.call(r).animationThreshold,animationAppear:t.animationAppear,animationDisappear:t.animationDisappear,animationEnter:t.animationEnter,animationUpdate:t.animationUpdate,animationExit:t.animationExit,animationNormal:t.animationNormal,extensionMark:t.extensionMark,large:t.large,largeThreshold:t.largeThreshold,progressiveStep:t.progressiveStep,progressiveThreshold:t.progressiveThreshold,background:t.seriesBackground,invalidType:t.invalidType,seriesField:t.seriesField,morph:t.morph,interactions:t.interactions}}forEachRegionInSpec(t,e,i){var r;return((r=t.region)!==null&&r!==void 0?r:[]).map((s,a)=>e(Z.getRegionInType("region"),{spec:s,specPath:["region",a],type:"region",regionIndexes:[a]},i))}forEachSeriesInSpec(t,e,i){var r;return((r=t.series)!==null&&r!==void 0?r:[]).map((s,a)=>e(Z.getSeriesInType(s.type),{spec:s,specPath:["series",a],type:s.type,seriesIndexes:[a]},i))}forEachComponentInSpec(t,e,i){var r,s,a;const o=[],l=Z.getComponents();let u,h,c,d;const p=[];for(let g=0;g<l.length;g++){const{cmp:_,alwaysCheck:v}=l[g];_.type.startsWith(mt.cartesianAxis)?u=_:_.type.startsWith(mt.polarAxis)?h=_:_.type===mt.geoCoordinate?c=_:(v||t[(r=_.specKey)!==null&&r!==void 0?r:_.type])&&(_.type===mt.tooltip?d=_:p.push(_))}let f=!1;if(u){const g=u.getSpecInfo(t,i);(g==null?void 0:g.length)>0&&(f=!0,g.forEach(_=>{const v=Z.getComponentInKey(_.type);o.push(e(v,_,i))}))}if(h&&!f){const g=h.getSpecInfo(t,i);(g==null?void 0:g.length)>0&&(f=!0,g.forEach(_=>{const v=Z.getComponentInKey(_.type);o.push(e(v,_,i))}))}return c&&!f&&((s=c.getSpecInfo(t,i))===null||s===void 0||s.forEach(g=>{o.push(e(c,g,i))})),p.forEach(g=>{var _;(_=g.getSpecInfo(t,i))===null||_===void 0||_.forEach(v=>{o.push(e(g,v,i))})}),(a=d==null?void 0:d.getSpecInfo(t,i))===null||a===void 0||a.forEach(g=>{o.push(e(d,g,i))}),o}transformSeriesSpec(t){const e=this._getDefaultSeriesSpec(t);t.series&&t.series.length!==0?t.series.forEach(i=>{this._isValidSeries(i.type)&&Object.keys(e).forEach(r=>{r in i||(i[r]=e[r])})}):t.series=[e]}_findBandAxisBySeries(t,e,i){const r=(t==null?void 0:t.direction)==="horizontal"?["left","right"]:["top","bottom"];return i.find(s=>{if(!r.includes(s.orient))return!1;if(z(s.seriesId)){if(ot(s.seriesId).includes(t==null?void 0:t.id))return!0}else if(z(s.seriesIndex)){if(ot(s.seriesIndex).includes(e))return!0}else if(s.type==="band")return!0;return!0})}_applyAxisBandSize(t,e,i){const{barMaxWidth:r,barMinWidth:s,barWidth:a,barGapInGroup:o}=i;let l=!1;Mt(s)?(t.minBandSize=s,l=!0):Mt(a)?(t.minBandSize=a,l=!0):Mt(r)&&(t.minBandSize=r,l=!0),l&&(t.bandSizeLevel=Number.MAX_VALUE,t.bandSizeExtend={extend:e,gap:ut(o)?o[o.length-1]:o})}}class Uo extends ao{needAxes(){return!0}_isValidSeries(t){return!this.seriesType||t===this.seriesType}_getDefaultSeriesSpec(t){const e=Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{xField:t.xField,yField:t.yField,zField:t.zField,seriesField:t.seriesField,seriesStyle:t.seriesStyle,direction:t.direction,stack:t.stack,percent:t.percent,stackOffsetSilhouette:t.stackOffsetSilhouette,totalLabel:t.totalLabel,sortDataByAxis:t.sortDataByAxis}),i=this.seriesType;return i&&(e.type=i,e[i]=t[i]),e}transformSpec(t){super.transformSpec(t);const e=this._getDefaultSeriesSpec(t);t.series&&t.series.length!==0?t.series.forEach(i=>{this._isValidSeries(i.type)&&Object.keys(e).forEach(r=>{r in i||(i[r]=e[r])})}):t.series=[e],this._transformAxisSpec(t)}_transformAxisSpec(t){if(this.needAxes()){t.axes||(t.axes=[]);const e={x:!1,y:!1,z:!1};t.axes.forEach(i=>{const{orient:r}=i;r!=="top"&&r!=="bottom"||(e.x=!0),r!=="left"&&r!=="right"||(e.y=!0),r==="z"&&(e.z=!0),le(i,"trimPadding")&&Ut(i,pit(this.type,t))}),e.x||t.axes.push({orient:"bottom"}),e.y||t.axes.push({orient:"left"}),t.zField&&!e.z&&t.axes.push({orient:"z"})}}}class qit extends Uo{_getDefaultSeriesSpec(t){var e;return Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{point:t.point,line:t.line,seriesMark:(e=t.seriesMark)!==null&&e!==void 0?e:"line",activePoint:t.activePoint,sampling:t.sampling,samplingFactor:t.samplingFactor,pointDis:t.pointDis,pointDisMul:t.pointDisMul,markOverlap:t.markOverlap,lineLabel:t.lineLabel})}transformSpec(t){super.transformSpec(t),Ic(t)}}class H0 extends Ei{constructor(){super(...arguments),this.transformerConstructor=qit,this.type="line",this.seriesType=at.line,this._canStack=!0}}H0.type="line",H0.seriesType=at.line,H0.transformerConstructor=qit;const QHt=()=>{XHt(),Z.registerChart(H0.type,H0)};class By extends Yit{constructor(){super(...arguments),this.type=By.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:0})}_getIgnoreAttributes(){return[]}}By.type="area";const ST=()=>{Z.registerMark(By.type,By),Njt(),Tit()};class t9t extends _s{constructor(){super(...arguments),this._getSeriesStyle=(t,e,i)=>{var r,s,a,o;for(const l of ot(e)){let u=(r=this.series.getSeriesStyle(t))===null||r===void 0?void 0:r(l);if(u!==!1||l!=="fill"&&l!=="stroke"||(u=l==="fill"?(a=(s=this.series.getSeriesStyle(t))===null||s===void 0?void 0:s("stroke"))===null||a===void 0?void 0:a[0]:(o=this.series.getSeriesStyle(t))===null||o===void 0?void 0:o("fill")),z(u))return u}return i}}}const e9t=()=>{T6t(),wit(),gT()};class Zit extends I1{constructor(){super(...arguments),this._supportStack=!0}_transformLabelSpec(t){var e,i,r;super._transformLabelSpec(t),this._addMarkLabelSpec(t,"area","areaLabel","initLineLabelMarkStyle",void 0,!0),((e=t.point)===null||e===void 0?void 0:e.visible)!==!1&&((r=(i=t.point)===null||i===void 0?void 0:i.style)===null||r===void 0?void 0:r.visible)!==!1||this._addMarkLabelSpec(t,"area")}_transformSpecAfterMergingTheme(t,e,i){var r,s,a,o,l;super._transformSpecAfterMergingTheme(t,e,i);const{area:u={},line:h={},seriesMark:c}=t,d=u.visible!==!1&&((r=u.style)===null||r===void 0?void 0:r.visible)!==!1,p=h.visible!==!1&&((s=h.style)===null||s===void 0?void 0:s.visible)!==!1;u.support3d=!(!u.support3d&&!h.support3d),u.zIndex=z(u.zIndex)||z(h.zIndex)?Math.max((a=u.zIndex)!==null&&a!==void 0?a:0,(o=h.zIndex)!==null&&o!==void 0?o:0):void 0,u.style&&delete u.style.stroke,u.state&&Object.keys(u.state).forEach(_=>{"style"in u.state[_]?delete u.state[_].style.stroke:delete u.state[_].stroke});let f=u,g=h;(c==="line"||p&&!d)&&(f=h,g=u),u.style=Ut({},g.style,f.style),u.state=Ut({},g.state,f.state),d||(u.style.fill=!1),p||(u.style.stroke=!1),u.interactive===!1&&(u.style.fillPickable=!1),h.interactive===!1&&(h.style.strokePickable=!1),u.interactive=!(!u.interactive&&(l=h.interactive)!==null&&l!==void 0&&!l),u.visible=!(!d&&!p),t.area=u,t.line=h}}class fu extends so{constructor(){super(...arguments),this.type=at.area,this.transformerConstructor=Zit,this._sortDataByAxis=!1}initMark(){var t,e;const i={progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold},r=this._spec.area||{},s=r.visible!==!1&&((t=r.style)===null||t===void 0?void 0:t.visible)!==!1,a=(e=this._spec.seriesMark)!==null&&e!==void 0?e:"area";this._areaMark=this._createMark(fu.mark.area,{groupKey:this._seriesField,defaultMorphElementKey:this.getDimensionField()[0],progressive:i,isSeriesMark:s&&a!=="point",customShape:r.customShape,stateSort:r.stateSort}),this.initSymbolMark(i,a==="point")}initMarkStyle(){this.initAreaMarkStyle(),this.initSymbolMarkStyle()}initAreaMarkStyle(){var t,e,i,r,s;const a=(i=(e=(t=this.getSpec().area)===null||t===void 0?void 0:t.style)===null||e===void 0?void 0:e.curveType)!==null&&i!==void 0?i:(s=(r=this.getSpec().line)===null||r===void 0?void 0:r.style)===null||s===void 0?void 0:s.curveType,o=a===Git?this._direction==="horizontal"?"monotoneY":"monotoneX":a,l=this._areaMark;l&&(this._direction==="horizontal"?this.setMarkStyle(this._areaMark,{x:this.dataToPositionX.bind(this),x1:u=>{var h,c;return Ue(this.dataToPositionX1(u),(c=(h=this._xAxisHelper)===null||h===void 0?void 0:h.getScale)===null||c===void 0?void 0:c.call(h,0))},y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null,orient:this._direction},"normal",kt.Series):this.setMarkStyle(this._areaMark,{x:this.dataToPositionX.bind(this),y1:u=>{var h,c;return Ue(this.dataToPositionY1(u),(c=(h=this._yAxisHelper)===null||h===void 0?void 0:h.getScale)===null||c===void 0?void 0:c.call(h,0))},y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",kt.Series),this.setMarkStyle(l,{fill:this.getColorAttribute(),stroke:this.getColorAttribute()},"normal",kt.Series),this._invalidType!=="zero"&&this.setMarkStyle(l,{defined:this._getInvalidDefined.bind(this),connectedType:this._getInvalidConnectType()},"normal",kt.Series),this.setMarkStyle(l,{curveType:o},"normal",kt.Built_In),Object.keys(l.stateStyle).forEach(u=>{l.stateStyle[u].stroke&&l.setPostProcess("stroke",h=>[h,!1,!1,!1],u)}))}initAnimation(){var t,e,i,r;const s={direction:this.direction},a=(t=this._spec.animationAppear)===null||t===void 0?void 0:t.preset;if(this._lineMark&&this._lineMark.setAnimationConfig(Ae((e=Z.getAnimationInKey("line"))===null||e===void 0?void 0:e(s,a),Ee("line",this._spec,this._markAttributeContext))),this._areaMark&&this._areaMark.setAnimationConfig(Ae((i=Z.getAnimationInKey("area"))===null||i===void 0?void 0:i(s,a),Ee("area",this._spec,this._markAttributeContext))),this._symbolMark){const o=Lc(this);this._symbolMark.setAnimationConfig(Ae((r=Z.getAnimationInKey("scaleInOut"))===null||r===void 0?void 0:r(),Ee("point",this._spec,this._markAttributeContext),o))}}initTooltip(){this._tooltipHelper=new t9t(this);const{dimension:t,group:e,mark:i}=this._tooltipHelper.activeTriggerSet;this._areaMark&&(t.add(this._areaMark),e.add(this._areaMark)),this._lineMark&&(t.add(this._lineMark),e.add(this._lineMark)),this._symbolMark&&(i.add(this._symbolMark),e.add(this._symbolMark))}viewDataStatisticsUpdate(t){super.viewDataStatisticsUpdate(t),this.encodeDefined(this._areaMark,"defined")}compile(){super.compile(),this.addSamplingCompile(),this.addOverlapCompile()}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._areaMark,this._symbolMark,this._lineMark]}onLayoutEnd(t){super.onLayoutEnd(t),this.reCompileSampling()}getSeriesStyle(t){return e=>{var i,r,s,a,o;const l=(i=this._spec.seriesMark)!==null&&i!==void 0?i:"area";let u=(s=(r=this._seriesMark)===null||r===void 0?void 0:r.getAttribute(e,t))!==null&&s!==void 0?s:void 0;return e!=="fill"||u&&l!=="line"||(e="stroke",u=(o=(a=this._seriesMark)===null||a===void 0?void 0:a.getAttribute(e,t))!==null&&o!==void 0?o:void 0),e==="stroke"&&ut(u)?u[0]:u}}}fu.type=at.area,fu.mark=zF,fu.transformerConstructor=Zit,On(fu,e5);const i9t=()=>{FF(),jF(),yT(),ST(),Uu(),e9t(),$s(),Ws(),Z.registerSeries(fu.type,fu)};class Jit extends Uo{_getDefaultSeriesSpec(t){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{point:t.point,line:t.line,area:t.area,seriesMark:t.seriesMark,activePoint:t.activePoint,sampling:t.sampling,samplingFactor:t.samplingFactor,pointDis:t.pointDis,pointDisMul:t.pointDisMul,markOverlap:t.markOverlap,areaLabel:t.areaLabel})}transformSpec(t){super.transformSpec(t),Ic(t)}}class V0 extends Ei{constructor(){super(...arguments),this.transformerConstructor=Jit,this.type="area",this.seriesType=at.area,this._canStack=!0}}V0.type="area",V0.seriesType=at.area,V0.transformerConstructor=Jit;const n9t=()=>{i9t(),Z.registerChart(V0.type,V0)};function Qit(n,t=!0){return(e,i,r)=>{const s=n.direction==="vertical"?n.yField:n.xField,a=e==null?void 0:e[s];return n.direction==="vertical"?{overall:t&&n.growFrom(),orient:a>0?"negative":"positive"}:{overall:!!t&&n.growFrom(),orient:a>0?"positive":"negative"}}}const D1=(n,t=!0)=>({type:n.direction==="horizontal"?"growWidthIn":"growHeightIn",options:Qit(n,t)}),sm=(n,t=!0)=>({type:n.direction==="horizontal"?"growWidthOut":"growHeightOut",options:Qit(n,t)}),r9t={type:"fadeIn"},s9t={type:"growCenterIn"};function tnt(n,t){if(t===!1)return{};switch(t){case"fadeIn":return r9t;case"scaleIn":return s9t;default:return D1(n)}}const a9t=()=>{Z.registerAnimation("bar",(n,t)=>({appear:tnt(n,t),enter:D1(n,!1),exit:sm(n,!1),disappear:sm(n)}))},o9t=()=>{Z.registerAnimation("bar3d",(n,t)=>({appear:tnt(n,t),enter:D1(n,!1),exit:sm(n,!1),disappear:sm(n)}))};class Fy extends Sr{constructor(){super(...arguments),this.type=Fy.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{width:void 0,height:void 0,lineWidth:0})}}Fy.type="rect";const Yu=()=>{Z.registerMark(Fy.type,Fy),DF(),Cit()};function ent(n,t,e){var i,r;if(n.values.length>0){let s;if(n.sortDatums.length){let a=n.sortDatums;t&&(a=n.sortDatums.slice().reverse());for(let o=0;o<a.length;o++)s=$$(a[o].datum,s,a[o].series,e,(r=(i=a[o].series[e.axisHelper]).getScale)===null||r===void 0?void 0:r.call(i,0),o===0)}else{let a=n.series;t&&(a=a.slice().reverse()),a.forEach(({s:o,values:l},u)=>{var h,c;const d=(c=(h=o[e.axisHelper]).getScale)===null||c===void 0?void 0:c.call(h,0);for(let p=0;p<l.length;p++){const f=l[t?l.length-1-p:p];s=$$(f,s,o,e,d,p===0&&u===0)}})}}for(const s in n.nodes)ent(n.nodes[s],t,e)}function $$(n,t,e,i,r,s){const a=e.getSpec().barMinHeight,o=e[i.axisHelper].isInverse(),l=Ue(e[i.startMethod](n),r);let u=Ue(e[i.endMethod](n),r);s&&(t=l);let h=Math.abs(l-u);h<a&&(h=a);let c=1;return u<l?c=-1:u===l&&(c=i.isVertical?o?1:-1:o?-1:1),u=t+c*h,n[i.start]=t,n[i.end]=u,u}class AT extends ys{constructor(){super(...arguments),this._supportStack=!0}_transformLabelSpec(t){this._addMarkLabelSpec(t,"bar")}}class zo extends so{constructor(){super(...arguments),this.type=at.bar,this._barMarkName="bar",this._barMarkType="rect",this.transformerConstructor=AT,this._bandPosition=0,this._getBarXStart=(t,e)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!1),t[XW]):this._spec.barMinHeight?this._calculateRectPosition(t,!1):Ue(this._dataToPosX(t),e),this._getBarXEnd=(t,e)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!1),t[KW]):Ue(this._dataToPosX1(t),e),this._getBarYStart=(t,e)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!0),t[qW]):this._spec.barMinHeight?this._calculateRectPosition(t,!0):Ue(this._dataToPosY(t),e),this._getBarYEnd=(t,e)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!0),t[ZW]):Ue(this._dataToPosY1(t),e),this._getBarBackgroundXStart=t=>{const e=t.range();return Math.min(e[0],e[e.length-1])},this._getBarBackgroundXEnd=t=>{const e=t.range();return Math.max(e[0],e[e.length-1])},this._getBarBackgroundYStart=t=>{const e=t.range();return Math.min(e[0],e[e.length-1])},this._getBarBackgroundYEnd=t=>{const e=t.range();return Math.max(e[0],e[e.length-1])},this._getBarBackgroundPositionXEncoder=()=>{var t;return(t=this._barBackgroundPositionXEncoder)===null||t===void 0?void 0:t.bind(this)},this._setBarBackgroundPositionXEncoder=t=>{this._barBackgroundPositionXEncoder=t.bind(this)},this._getBarBackgroundPositionYEncoder=()=>{var t;return(t=this._barBackgroundPositionYEncoder)===null||t===void 0?void 0:t.bind(this)},this._setBarBackgroundPositionYEncoder=t=>{this._barBackgroundPositionYEncoder=t.bind(this)}}initMark(){var t,e;const i={progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold};this._initBarBackgroundMark(i),this._barMark=this._createMark(Object.assign(Object.assign({},zo.mark.bar),{name:this._barMarkName,type:this._barMarkType}),{morph:Gu(this._spec,this._barMarkName),defaultMorphElementKey:this.getDimensionField()[0],groupKey:this._seriesField,isSeriesMark:!0,progressive:i,customShape:(t=this._spec.bar)===null||t===void 0?void 0:t.customShape,stateSort:(e=this._spec.bar)===null||e===void 0?void 0:e.stateSort})}_initBarBackgroundMark(t){this._spec.barBackground&&this._spec.barBackground.visible&&(this._barBackgroundMark=this._createMark(zo.mark.barBackground,{dataView:this._barBackgroundViewData.getDataView(),dataProductId:this._barBackgroundViewData.getProductId(),progressive:t,customShape:this._spec.barBackground.customShape,stateSort:this._spec.barBackground.stateSort}))}initMarkStyle(){this._barMark&&this.setMarkStyle(this._barMark,{fill:this.getColorAttribute()},"normal",kt.Series)}initLabelMarkStyle(t){t&&this.setMarkStyle(t,{fill:this.getColorAttribute(),text:e=>e[this.getStackValueField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null})}initTooltip(){super.initTooltip();const{mark:t,group:e}=this._tooltipHelper.activeTriggerSet;this._barMark&&(t.add(this._barMark),e.add(this._barMark))}_statisticViewData(){var t,e;super._statisticViewData();const i=(t=this._spec.barBackground)!==null&&t!==void 0?t:{};if(!i.visible)return;const r=this._getRelatedComponentSpecInfo("axes").some(a=>a.type===mt.cartesianBandAxis);let s;if(ie(this._option.dataSet,"addVChartProperty",Nm),r){const a=([o],{scaleDepth:l})=>{var u,h;let c=[{}];const d=this.getDimensionField(),p=F(l)?d.length:Math.min(d.length,l);for(let f=0;f<p;f++){const g=d[f],_=(u=o.latestData[g])===null||u===void 0?void 0:u.values;if(!(_!=null&&_.length))continue;const v=[],y=(h=this._spec.dataKey)!==null&&h!==void 0?h:Ka;for(let b=0;b<_.length;b++)for(let S=0;S<c.length;S++)v.push(Object.assign(Object.assign({},c[S]),{[g]:_[b],[y]:_[b]}));c=v}return c};ie(this._option.dataSet,"dimensionItems",a),s=new Le(this._option.dataSet).parse([this._viewDataStatistics],{type:"dataview"}).transform({type:"dimensionItems",options:{scaleDepth:F(i.fieldLevel)?void 0:i.fieldLevel+1}},!1).transform({type:"addVChartProperty",options:{beforeCall:rm.bind(this),call:fp}},!1),(e=this._viewDataStatistics)===null||e===void 0||e.target.addListener("change",s.reRunAllTransform)}else{const a=([l])=>{const u=[],[h,c]=this.getDimensionContinuousField(),d={};return o.latestData.forEach(p=>{const f=`${p[h]}-${p[c]}`;d[f]||(d[f]={[h]:p[h],[c]:p[c]},u.push(d[f]))}),u};ie(this._option.dataSet,"dimensionItems",a);const o=this.getViewData();s=new Le(this._option.dataSet).parse([o],{type:"dataview"}).transform({type:"dimensionItems"},!1).transform({type:"addVChartProperty",options:{beforeCall:rm.bind(this),call:fp}},!1),o==null||o.target.addListener("change",s.reRunAllTransform)}this._barBackgroundViewData=new kl(this._option,s)}init(t){var e,i;super.init(t),this.direction==="vertical"?((e=this._xAxisHelper)===null||e===void 0?void 0:e.getScale(0).type)==="band"?this.initBandRectMarkStyle():this.initLinearRectMarkStyle():((i=this._yAxisHelper)===null||i===void 0?void 0:i.getScale(0).type)==="band"?this.initBandRectMarkStyle():this.initLinearRectMarkStyle()}_shouldDoPreCalculate(){const t=this.getRegion();return this.getStack()&&t.getSeries().filter(e=>e.type===this.type&&e.getSpec().barMinHeight).length}_calculateStackRectPosition(t){const e=this.getRegion();if(e._bar_series_position_calculated)return;let i,r,s,a,o;e._bar_series_position_calculated=!0,t?(i=ZW,r=qW,s="_dataToPosY1",a="_dataToPosY",o="_yAxisHelper"):(i=KW,r=XW,s="_dataToPosX1",a="_dataToPosX",o="_xAxisHelper");const l=qet(e,!1,u=>u.type===this.type);for(const u in l)for(const h in l[u].nodes)ent(l[u].nodes[h],e.getStackInverse(),{isVertical:t,start:i,end:r,startMethod:s,endMethod:a,axisHelper:o})}_calculateRectPosition(t,e){var i,r;let s,a,o;e?(s="_dataToPosY1",a="_dataToPosY",o="_yAxisHelper"):(s="_dataToPosX1",a="_dataToPosX",o="_xAxisHelper");const l=(r=(i=this[o]).getScale)===null||r===void 0?void 0:r.call(i,0),u=this[o].isInverse(),h=this._spec.barMinHeight,c=Ue(this[s](t),l),d=Ue(this[a](t),l);let p=Math.abs(c-d);p<h&&(p=h);let f=1;return d<c?f=-1:d===c&&(f=e?u?1:-1:u?-1:1),c+f*p}_dataToPosX(t){return this.dataToPositionX(t)}_dataToPosX1(t){return this.dataToPositionX1(t)}_dataToPosY(t){return this.dataToPositionY(t)}_dataToPosY1(t){return this.dataToPositionY1(t)}initBandRectMarkStyle(){var t,e,i,r;const s=(e=(t=this._xAxisHelper)===null||t===void 0?void 0:t.getScale)===null||e===void 0?void 0:e.call(t,0),a=(r=(i=this._yAxisHelper)===null||i===void 0?void 0:i.getScale)===null||r===void 0?void 0:r.call(i,0);this.direction==="horizontal"?this.setMarkStyle(this._barMark,{x:o=>this._getBarXStart(o,s),x1:o=>this._getBarXEnd(o,s),y:o=>this._getPosition(this.direction,o),height:()=>this._getBarWidth(this._yAxisHelper),width:()=>{},y1:()=>{}},"normal",kt.Series):this.setMarkStyle(this._barMark,{y:o=>this._getBarYStart(o,a),y1:o=>this._getBarYEnd(o,a),x:o=>this._getPosition(this.direction,o),width:()=>this._getBarWidth(this._xAxisHelper),x1:()=>{},height:()=>{}},"normal",kt.Series),this._initStackBarMarkStyle(),this._initBandBarBackgroundMarkStyle()}_initStackBarMarkStyle(){var t,e,i,r;if(!this._spec.stackCornerRadius)return;const s=(e=(t=this._xAxisHelper)===null||t===void 0?void 0:t.getScale)===null||e===void 0?void 0:e.call(t,0),a=(r=(i=this._yAxisHelper)===null||i===void 0?void 0:i.getScale)===null||r===void 0?void 0:r.call(i,0);this._barMark.setClip(()=>{const o=[];return this._forEachStackGroup(l=>{let u=1/0,h=-1/0,c=!1,d=1/0,p=-1/0;l.values.forEach(g=>{const _=g[Hs],v=g[yn],y=g[dp],b=g[bc];u=Math.min(u,_,v),h=Math.max(h,_,v),z(y)&&z(b)&&(c=!0,d=Math.min(d,y,b),p=Math.max(p,y,b))});const f=Object.assign(Object.assign(Object.assign({},l.values[0]),{[Hs]:u,[yn]:h}),c?{[dp]:d,[bc]:p}:void 0);o.push(ep(Object.assign(Object.assign({},this.direction==="horizontal"?{x:this._getBarXStart(f,s),x1:this._getBarXEnd(f,s),y:this._getPosition(this.direction,f),height:this._getBarWidth(this._yAxisHelper)}:{y:this._getBarYStart(f,a),y1:this._getBarYEnd(f,a),x:this._getPosition(this.direction,f),width:this._getBarWidth(this._xAxisHelper)}),{cornerRadius:this._spec.stackCornerRadius,fill:!0})))}),o})}initLinearRectMarkStyle(){var t,e,i,r;const s=(e=(t=this._xAxisHelper)===null||t===void 0?void 0:t.getScale)===null||e===void 0?void 0:e.call(t,0),a=(r=(i=this._yAxisHelper)===null||i===void 0?void 0:i.getScale)===null||r===void 0?void 0:r.call(i,0);if(this.direction==="horizontal"){const o=z(this._fieldY2)?{y:l=>Ue(this._dataToPosY(l),a),y1:l=>Ue(this._dataToPosY1(l),a)}:{y:l=>Ue(this._dataToPosY(l)-this._getBarWidth(this._yAxisHelper)/2,a),height:l=>this._getBarWidth(this._yAxisHelper)};this.setMarkStyle(this._barMark,Object.assign({x:l=>this._getBarXStart(l,s),x1:l=>this._getBarXEnd(l,s)},o),"normal",kt.Series),this.setMarkStyle(this._barBackgroundMark,Object.assign({x:()=>this._getBarBackgroundXStart(s),x1:()=>this._getBarBackgroundXEnd(s)},o),"normal",kt.Series)}else{const o=z(this._fieldX2)?{x:l=>Ue(this._dataToPosX(l),s),x1:l=>Ue(this._dataToPosX1(l),s)}:{x:l=>Ue(this._dataToPosX(l)-this._getBarWidth(this._xAxisHelper)/2,s),width:l=>this._getBarWidth(this._xAxisHelper)};this.setMarkStyle(this._barMark,Object.assign(Object.assign({},o),{y:l=>this._getBarYStart(l,a),y1:l=>this._getBarYEnd(l,a)}),"normal",kt.Series),this.setMarkStyle(this._barBackgroundMark,Object.assign(Object.assign({},o),{y:()=>this._getBarBackgroundYStart(a),y1:()=>this._getBarBackgroundYEnd(a)}),"normal",kt.Series)}}_initBandBarBackgroundMarkStyle(){var t,e,i,r,s;if(!this._barBackgroundMark)return;const a=(e=(t=this._xAxisHelper)===null||t===void 0?void 0:t.getScale)===null||e===void 0?void 0:e.call(t,0),o=(r=(i=this._yAxisHelper)===null||i===void 0?void 0:i.getScale)===null||r===void 0?void 0:r.call(i,0),l=(s=this._spec.barBackground)!==null&&s!==void 0?s:{},u=F(l.fieldLevel)?void 0:l.fieldLevel+1;this.direction==="horizontal"?this.setMarkStyle(this._barBackgroundMark,{x:()=>this._getBarBackgroundXStart(a),x1:()=>this._getBarBackgroundXEnd(a),y:h=>this._getPosition(this.direction,h,u,"barBackground"),height:()=>this._getBarWidth(this._yAxisHelper,u),width:()=>{},y1:()=>{}},"normal",kt.Series):this.setMarkStyle(this._barBackgroundMark,{x:h=>this._getPosition(this.direction,h,u,"barBackground"),y:()=>this._getBarBackgroundYStart(o),y1:()=>this._getBarBackgroundYEnd(o),width:()=>this._getBarWidth(this._xAxisHelper,u),x1:()=>{},height:()=>{}},"normal",kt.Series)}initAnimation(){var t,e;const i={yField:this._fieldY[0],xField:this._fieldX[0],direction:this.direction,growFrom:()=>{var a,o;return this.direction==="horizontal"?(a=this._xAxisHelper)===null||a===void 0?void 0:a.getScale(0).scale(0):(o=this._yAxisHelper)===null||o===void 0?void 0:o.getScale(0).scale(0)}},r=(t=this._spec.animationAppear)===null||t===void 0?void 0:t.preset,s=Lc(this);this._barMark.setAnimationConfig(Ae((e=Z.getAnimationInKey("bar"))===null||e===void 0?void 0:e(i,r),Ee(this._barMarkName,this._spec,this._markAttributeContext),s))}_getBarWidth(t,e){var i,r;const s=this._groups?this._groups.fields.length:1,a=F(e)?s:Math.min(s,e),o=(r=(i=t.getBandwidth)===null||i===void 0?void 0:i.call(t,a-1))!==null&&r!==void 0?r:6,l=this._spec.barWidth!==void 0&&a===s,u=this._spec.barMinWidth!==void 0,h=this._spec.barMaxWidth!==void 0;let c=o;return l&&(c=Jf(this._spec.barWidth,o)),u&&(c=Math.max(c,Jf(this._spec.barMinWidth,o))),h&&(c=Math.min(c,Jf(this._spec.barMaxWidth,o))),c}_getPosition(t,e,i,r){var s,a,o,l,u;let h,c,d;t==="horizontal"?(h=this.getYAxisHelper(),c="height",d=r==="barBackground"?this.dataToBarBackgroundPositionY.bind(this):this.dataToPositionY.bind(this)):(h=this.getXAxisHelper(),c="width",d=r==="barBackground"?this.dataToBarBackgroundPositionX.bind(this):this.dataToPositionX.bind(this));const p=h.getScale(0),f=this._groups?this._groups.fields.length:1,g=F(i)?f:Math.min(f,i),_=(a=(s=h.getBandwidth)===null||s===void 0?void 0:s.call(h,g-1))!==null&&a!==void 0?a:6,v=g===f?this._barMark.getAttribute(c,e):_;if(g>1&&z(this._spec.barGapInGroup)){const b=this._groups.fields,S=ot(this._spec.barGapInGroup);let A=0,w=0;for(let C=b.length-1;C>=1;C--){const k=b[C],M=(l=(o=h.getScale(C))===null||o===void 0?void 0:o.domain())!==null&&l!==void 0?l:[],P=M.length,E=Jf((u=S[C-1])!==null&&u!==void 0?u:Gh(S),_),I=M.indexOf(e[k]);C===b.length-1?(A+=P*v+(P-1)*E,w+=I*(v+E)):(w+=I*(A+E),A+=A+(P-1)*E)}return p.scale(e[b[0]])+h.getBandwidth(0)/2-A/2+w}const y=ti(p.type||"band");return d(e,g)+.5*(_-v)+(y?-_/2:0)}dataToBarBackgroundPositionX(t,e){return this._dataToPosition(t,this._xAxisHelper,this.fieldX,e,this._getBarBackgroundPositionXEncoder,this._setBarBackgroundPositionXEncoder)}dataToBarBackgroundPositionY(t,e){return this._dataToPosition(t,this._yAxisHelper,this.fieldY,e,this._getBarBackgroundPositionYEncoder,this._setBarBackgroundPositionYEncoder)}onLayoutEnd(t){super.onLayoutEnd(t),this.getRegion()._bar_series_position_calculated=!1,this._spec.sampling&&this.compile()}compile(){if(super.compile(),this._spec.sampling){const{width:t,height:e}=this._region.getLayoutRect(),i=[],r=this._fieldY,s=this._fieldX;i.push({type:"sampling",size:this._direction==="horizontal"?e:t,factor:this._spec.samplingFactor,yfield:this._direction==="horizontal"?s[0]:r[0],groupBy:this._seriesField,mode:this._spec.sampling}),this._data.getProduct().transform(i)}}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._barMark]}compileData(){var t;super.compileData(),(t=this._barBackgroundViewData)===null||t===void 0||t.compile()}fillData(){var t,e;super.fillData(),(e=(t=this._barBackgroundViewData)===null||t===void 0?void 0:t.getDataView())===null||e===void 0||e.reRunAllTransform()}viewDataUpdate(t){var e,i,r;super.viewDataUpdate(t),(i=(e=this._barBackgroundViewData)===null||e===void 0?void 0:e.getDataView())===null||i===void 0||i.reRunAllTransform(),(r=this._barBackgroundViewData)===null||r===void 0||r.updateData()}release(){var t;super.release(),(t=this._barBackgroundViewData)===null||t===void 0||t.release(),this._barBackgroundViewData=null}}zo.type=at.bar,zo.mark=aT,zo.transformerConstructor=AT;const int=()=>{FF(),Yu(),a9t(),$s(),Ws(),Z.registerSeries(zo.type,zo)};class wT extends Uo{_getDefaultSeriesSpec(t){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{barWidth:t.barWidth,barMaxWidth:t.barMaxWidth,barMinWidth:t.barMinWidth,barGapInGroup:t.barGapInGroup,barMinHeight:t.barMinHeight,sampling:t.sampling,samplingFactor:t.samplingFactor,barBackground:t.barBackground,stackCornerRadius:t.stackCornerRadius})}transformSpec(t){super.transformSpec(t),Ic(t)}_transformAxisSpec(t){var e,i;if(super._transformAxisSpec(t),!t.axes)return;const r=t.series.some(a=>a.direction==="horizontal"),s=(e=t.axes.find(a=>a.type==="band"))!==null&&e!==void 0?e:t.axes.find(a=>(r?["left","right"]:["top","bottom"]).includes(a.orient));if(s&&!s.bandSize&&!s.maxBandSize&&!s.minBandSize&&t.autoBandSize){const a=ae(t.autoBandSize)&&(i=t.autoBandSize.extend)!==null&&i!==void 0?i:0,{barMaxWidth:o,barMinWidth:l,barWidth:u,barGapInGroup:h}=t.series.find(c=>c.type==="bar");this._applyAxisBandSize(s,a,{barMaxWidth:o,barMinWidth:l,barWidth:u,barGapInGroup:h})}}}class jd extends Ei{constructor(){super(...arguments),this.transformerConstructor=wT,this.type="bar",this.seriesType=at.bar,this._canStack=!0}}jd.type="bar",jd.seriesType=at.bar,jd.transformerConstructor=wT;const l9t=()=>{int(),Z.registerChart(jd.type,jd)};class jy extends Sr{constructor(){super(...arguments),this.type=jy.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{width:void 0,height:void 0,length:3})}}jy.type="rect3d";const n5=()=>{Z.registerMark(jy.type,jy),Wjt(),Cit()};class kC extends zo{constructor(){super(...arguments),this.type=at.bar3d,this._barMarkName="bar3d",this._barMarkType="rect3d"}}kC.type=at.bar3d,kC.mark=NF;const nnt=()=>{o9t(),n5(),$s(),Ws(),Z.registerSeries(kC.type,kC)};class rnt extends wT{_getDefaultSeriesSpec(t){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{barWidth:t.barWidth,barMaxWidth:t.barMaxWidth,barMinWidth:t.barMinWidth,barGapInGroup:t.barGapInGroup})}}class W0 extends jd{constructor(){super(...arguments),this.transformerConstructor=rnt,this.type="bar3d",this.seriesType=at.bar3d}}W0.type="bar3d",W0.seriesType=at.bar3d,W0.transformerConstructor=rnt;const u9t=()=>{nnt(),Z.registerChart(W0.type,W0)},G$=10,h9t=[10,20],c9t=tn.Linear,U$="circle",d9t=tn.Ordinal,p9t=["circle","square","triangle","diamond","star"],f9t=(n,t)=>t==="fadeIn"?{type:"fadeIn"}:{type:"scaleIn"},g9t=()=>{Z.registerAnimation("scatter",(n,t)=>Object.assign({appear:f9t(0,t)},ZF))};class snt extends ys{_transformLabelSpec(t){this._addMarkLabelSpec(t,"point")}}class ec extends so{constructor(){super(...arguments),this.type=at.scatter,this.transformerConstructor=snt,this._invalidType="zero"}setAttrFromSpec(){super.setAttrFromSpec(),this._size=this._spec.size,this._sizeField=this._spec.sizeField,this._shape=this._spec.shape,this._shapeField=this._spec.shapeField}_getSeriesAttribute(t,e,{defaultScaleType:i,defaultRange:r},s){var a,o,l,u;if(ft(e))return e;if(ut(e)){if(F(t))return(a=this._option)===null||a===void 0||a.onError(`${s}Field is required.`),e;if(i!=="ordinal"&&e.length>2)return(o=this._option)===null||o===void 0||o.onError(`${s} length is invalid, specify up to 2 ${s}s.`),e;const h=`${Kt}_series_scatter_${this.id}_scale_${s}`;return this._option.globalScale.registerModelScale({id:h,type:i,domain:[{dataId:this._rawData.name,fields:[t]}],range:e}),{scale:h,field:t}}if(ae(e)){if(F(t))return(l=this._option)===null||l===void 0||l.onError(`${s}Field is required.`),e;const h=`${Kt}_series_scatter_${this.id}_scale_${s}`,c=Object.assign({id:h,type:i,domain:[{dataId:this._rawData.name,fields:[t]}],range:r},e);return this._option.globalScale.registerModelScale(c),{scale:c.id,field:t}}return(u=this._option)===null||u===void 0||u.onError(`${s} attribute is invalid.`),e}getSizeAttribute(t,e){return F(e)?G$:Mt(e)?e:It(e)&&cCt(e)?parseFloat(e):this._getSeriesAttribute(t,e,{defaultScaleType:c9t,defaultRange:h9t},"size")}getShapeAttribute(t,e){return F(e)?U$:It(e)?e:this._getSeriesAttribute(t,e,{defaultScaleType:d9t,defaultRange:p9t},"shape")}initMark(){var t,e;const i={progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold};this._symbolMark=this._createMark(ec.mark.point,{morph:Gu(this._spec,ec.mark.point.name),defaultMorphElementKey:this.getDimensionField()[0],groupKey:this._seriesField,progressive:i,isSeriesMark:!0,customShape:(t=this._spec.point)===null||t===void 0?void 0:t.customShape,stateSort:(e=this._spec.point)===null||e===void 0?void 0:e.stateSort})}initMarkStyle(){this.initSymbolMarkStyle()}initAnimation(){var t,e,i;const r=Lc(this),s=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset;this._symbolMark.setAnimationConfig(Ae((i=Z.getAnimationInKey("scatter"))===null||i===void 0?void 0:i({},s),Ee("point",this._spec,this._markAttributeContext),r))}initSymbolMarkStyle(){const t=this._symbolMark;t&&(this._invalidType!=="zero"&&this.setMarkStyle(t,{visible:this._getInvalidDefined.bind(this)}),this.setMarkStyle(t,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null,fill:this.getColorAttribute(),size:Mt(this._size)||ft(this._size)?this._size:G$,symbolType:It(this._shape)||ft(this._shape)?this._shape:U$},Bt.STATE_NORMAL,kt.Series),(z(this._sizeField)||z(this._size))&&this.setMarkStyle(t,{size:this.getSizeAttribute(this._sizeField,this._size)},Bt.STATE_NORMAL,kt.User_Mark),(z(this._shapeField)||z(this._shape))&&this.setMarkStyle(t,{symbolType:this.getShapeAttribute(this._shapeField,this._shape)},Bt.STATE_NORMAL,kt.User_Mark))}initTooltip(){super.initTooltip(),this._symbolMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._symbolMark)}viewDataStatisticsUpdate(t){super.viewDataStatisticsUpdate(t);const e=[this.getDimensionField()[0],this.getStackValueField()].every(i=>{var r,s,a;return i&&((a=(s=(r=this.getViewDataStatistics())===null||r===void 0?void 0:r.latestData)===null||s===void 0?void 0:s[i])===null||a===void 0?void 0:a.allValid)});this._invalidType==="zero"||e?this.setMarkStyle(this._symbolMark,{visible:!0},"normal",kt.Series):this.setMarkStyle(this._symbolMark,{visible:this._getInvalidDefined.bind(this)},"normal",kt.Series),this._symbolMark.getProduct()&&this._symbolMark.compileEncode()}initLabelMarkStyle(t){t&&(this._labelMark=t,this.setMarkStyle(t,{fill:this.getColorAttribute(),text:e=>e[this.getStackValueField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null},Bt.STATE_NORMAL,kt.Series),this._invalidType!=="zero"&&this.setMarkStyle(t,{visible:this._getInvalidDefined.bind(this)},Bt.STATE_NORMAL,kt.Series))}handleZoom(t){var e,i;this.getMarksWithoutRoot().forEach(s=>{const a=s.getProduct();!a||!a.elements||!a.elements.length||a.elements.forEach((o,l)=>{const u=o.getGraphicItem(),h=o.getDatum(),c=this.dataToPosition(h);c&&u&&u.translateTo(c.x,c.y)})});const r=(i=(e=this._labelMark)===null||e===void 0?void 0:e.getComponent())===null||i===void 0?void 0:i.getProduct();r&&r.evaluate(null,null)}handlePan(t){var e,i;this.getMarksWithoutRoot().forEach(s=>{const a=s.getProduct();!a||!a.elements||!a.elements.length||a.elements.forEach((o,l)=>{const u=o.getGraphicItem(),h=o.getDatum(),c=this.dataToPosition(h);c&&u&&u.translateTo(c.x,c.y)})});const r=(i=(e=this._labelMark)===null||e===void 0?void 0:e.getComponent())===null||i===void 0?void 0:i.getProduct();r&&r.evaluate(null,null)}getDefaultShapeType(){return"circle"}getActiveMarks(){return[this._symbolMark]}}ec.type=at.scatter,ec.mark=get,ec.transformerConstructor=snt;const m9t=()=>{Uu(),g9t(),$s(),Ws(),Z.registerSeries(ec.type,ec)};class ant extends Uo{_getDefaultSeriesSpec(t){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{point:t.point,size:t.size,sizeField:t.sizeField,shape:t.shape,shapeField:t.shapeField})}}class $0 extends Ei{constructor(){super(...arguments),this.transformerConstructor=ant,this.type="scatter",this.seriesType=at.scatter,this._canStack=!0}}$0.type="scatter",$0.seriesType=at.scatter,$0.transformerConstructor=ant;const v9t=()=>{m9t(),Z.registerChart($0.type,$0)};k3();const Y$={},r5=["clipAngle","clipExtent","scale","translate","center","rotate","precision","reflectX","reflectY","parallels","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function _9t(n,t){return function e(){const i=t();return i.type=n,i.path=k3().projection(i),i.copy=i.copy||function(){const r=e();return r5.forEach(s=>{i[s]&&r[s](i[s]())}),r.path.pointRadius(i.path.pointRadius()),r},i}}function bh(n,t){n&&It(n)||Id("Projection type must be a name string.");const e=n.toLowerCase();return arguments.length>1&&(Y$[e]=_9t(e,t)),Y$[e]||null}const X$={albers:yZ,albersusa:$kt,azimuthalequalarea:Gkt,azimuthalequidistant:Ukt,conicconformal:Kkt,conicequalarea:RA,conicequidistant:Jkt,equalEarth:t2t,equirectangular:qkt,gnomonic:e2t,identity:i2t,mercator:Ykt,naturalEarth1:n2t,orthographic:r2t,stereographic:s2t,transversemercator:a2t};Object.keys(X$).forEach(n=>{bh(n,X$[n])});const K$="Feature",ont="FeatureCollection";function y9t(n){return n.type===ont?n.features:ot(n).filter(t=>!F(t)).map(t=>t.type===K$?t:{type:K$,geometry:t})}function b9t(n){const t=ot(n);return t.length===1?t[0]:{type:ont,features:t.reduce((e,i)=>e.concat(y9t(i)),[])}}function x9t(n){const t=bh((n||"mercator").toLowerCase());return t||Id("Unrecognized projection type: "+n),t()}function S9t(n,t,e){ft(n[t])&&n[t](e)}const A9t=r5.concat(["pointRadius","fit","extent","size"]);function q$(n,t){let e=[];return n&&Object.keys(n).forEach(i=>{A9t.includes(i)&&(e=e.concat(Dr(n[i],t)))}),e}let w9t=class extends nT{constructor(t){super(t),this.grammarType="projection"}parse(t){return super.parse(t),this.pointRadius(t.pointRadius),this.size(t.size),this.extent(t.extent),this.fit(t.fit),this.configure(t),this.commit(),this}pointRadius(t){return F(this.spec.pointRadius)||this.detach(Dr(this.spec.pointRadius,this.view)),this.spec.pointRadius=t,this.attach(Dr(t,this.view)),this.commit(),this}size(t){return F(this.spec.size)||this.detach(Dr(this.spec.size,this.view)),this.spec.size=t,this.attach(Dr(t,this.view)),this.commit(),this}extent(t){return F(this.spec.extent)||this.detach(Dr(this.spec.extent,this.view)),this.spec.extent=t,this.attach(Dr(t,this.view)),this.commit(),this}fit(t){return F(this.spec.fit)||this.detach(Dr(this.spec.fit,this.view)),this.spec.fit=t,this.attach(Dr(t,this.view)),this.commit(),this}configure(t){return this.detach(q$(this.spec,this.view)),F(t)?this.spec={type:this.spec.type,fit:this.spec.fit,extent:this.spec.extent,size:this.spec.size,pointRadius:this.spec.pointRadius}:(Object.assign(this.spec,t),this.attach(q$(this.spec,this.view))),this.commit(),this}evaluate(t,e){if(this.projection&&this.projection.type===this.spec.type||(this.projection=x9t(this.spec.type),this.projection.type=this.spec.type),r5.forEach(i=>{F(this.spec[i])||S9t(this.projection,i,en(this.spec[i],e,bh))}),F(this.spec.pointRadius)||this.projection.path.pointRadius(en(this.spec.pointRadius,e,bh)),!(F(this.spec.fit)||F(this.spec.extent)&&F(this.spec.size))){const i=b9t(en(this.spec.fit,e,bh));this.spec.extent?this.projection.fitExtent(en(this.spec.extent,e,bh),i):this.spec.size&&this.projection.fitSize(en(this.spec.size,e,bh),i)}return this.projection}output(){return this.projection}};const C9t=()=>{Ct.registerGrammar("projection",w9t,"projections")},k9t=(n,t)=>{if(!t.from||!t.from())return n;const e=t.fields,i=t.key,r=t.values,s=t.default,a=t.as||[e],o=t.from().reduce(function(u,h){return h[e]&&u.set(h[e],h),u},new Map);let l;if(ft(t.set))l=function(u){const h=o.get(u[i]);t.set(u,h)};else if(r){const u=r.length;l=function(h){const c=o.get(h[i]);if(F(c))for(let d=0;d<u;++d)h[a[d]]=s;else for(let d=0;d<u;++d)h[a[d]]=c[r[d]]}}else l=function(u){const h=o.get(u[i]);u[a[0]]=z(h)?h:s};return n.length===0?[]:n.map(u=>(l(u),u))};class T9t extends gp{constructor(){super(...arguments),this.type=at.geo,this.coordinate="geo",this._nameProperty="name"}getMapViewData(){var t;return(t=this._mapViewData)===null||t===void 0?void 0:t.getDataView()}get nameField(){return this._nameField}set nameField(t){this._nameField=t}get valueField(){return this._valueField}set valueField(t){this._valueField=t}getNameProperty(){return this._nameProperty}getCentroidProperty(){return this._centroidProperty}getCoordinateHelper(){return this._coordinateHelper}setCoordinateHelper(t){this._coordinateHelper=t}getStatisticFields(){const t=[];return t.push({key:this._nameField,operations:["values"]}),t.push({key:this._valueField,operations:["max","min"]}),t}getGroupFields(){return null}dataToPosition(t,e){var i;let r=null;if(!t||e&&!this.isDatumInViewData(t))return r;const{dataToPosition:s,latitudeField:a,longitudeField:o}=this._coordinateHelper;if(r=this.nameToPosition(t),r===null){const l=o?t==null?void 0:t[o]:Number.NaN,u=a?t==null?void 0:t[a]:Number.NaN;r=(i=s==null?void 0:s([l,u]))!==null&&i!==void 0?i:null}return r}nameToPosition(t){const e=this.getDatumName(t);return F(e)?null:this.nameValueToPosition(e)}nameValueToPosition(t){var e,i;const r=(i=(e=this.getMapViewData())===null||e===void 0?void 0:e.latestData)===null||i===void 0?void 0:i.filter(l=>this.getDatumName(l)===t)[0];if(F(r))return null;const{dataToPosition:s}=this._coordinateHelper,a=this.getDatumCenter(r),o=s==null?void 0:s(a);return F(o)||isNaN(o.x)||isNaN(o.y)?null:o}dataToLatitude(t){if(!this._coordinateHelper)return Number.NaN;const{dataToLatitude:e}=this._coordinateHelper;return e(t)}dataToLongitude(t){if(!this._coordinateHelper)return Number.NaN;const{dataToLatitude:e}=this._coordinateHelper;return e(t)}valueToPosition(t,e){return{x:this.dataToLongitude(t),y:this.dataToLatitude(e)}}positionToData(t){}latitudeToData(t){}longitudeToData(t){}dataToPositionX(t){var e;return(e=this._option)===null||e===void 0||e.onError("Method not implemented."),0}dataToPositionY(t){var e;return(e=this._option)===null||e===void 0||e.onError("Method not implemented."),0}dataToPositionZ(t){var e;return(e=this._option)===null||e===void 0||e.onError("Method not implemented."),0}release(){super.release(),this._mapViewData.release(),this._mapViewData=this._mapViewDataStatistics=null}getStackGroupFields(){return[this._nameField]}getStackValueField(){return this._spec.valueField}compileData(){var t;(t=this._mapViewData)===null||t===void 0||t.compile()}initStatisticalData(){if(super.initStatisticalData(),this._mapViewData){const t=`${Kt}_series_${this.id}_mapViewDataStatic`;this._mapViewDataStatistics=this.createStatisticalData(t,this._mapViewData.getDataView()),this._mapViewData.getDataView().target.removeListener("change",this._mapViewDataStatistics.reRunAllTransform)}}getSeriesKeys(){var t,e,i,r,s;return this._seriesField?(s=(e=(t=this.getRawDataStatisticsByField(this._seriesField))===null||t===void 0?void 0:t.values)!==null&&e!==void 0?e:(r=(i=this._mapViewDataStatistics)===null||i===void 0?void 0:i.latestData[this._seriesField])===null||r===void 0?void 0:r.values)!==null&&s!==void 0?s:[]:this.name?[this.name]:this.userId?[`${this.userId}`]:[`${this.type}_${this.id}`]}fillData(){var t,e;super.fillData(),(t=this._mapViewData.getDataView())===null||t===void 0||t.reRunAllTransform(),(e=this._mapViewDataStatistics)===null||e===void 0||e.reRunAllTransform()}getActiveMarks(){return[]}}const TC=`${Kt}_MAP_LOOK_UP_KEY`,M9t=(n,t)=>(n.features&&n.features.forEach((e,i)=>{var r;e[$r]=i;const s=(r=e.properties)===null||r===void 0?void 0:r[t.nameProperty];t.nameMap&&t.nameMap[s]?e[TC]=t.nameMap[s]:e[TC]=s}),n.features);class P9t extends _s{constructor(){super(...arguments),this.dimensionTooltipTitleCallback=t=>{var e;const i=this.series;return(e=this._getDimensionData(t))!==null&&e!==void 0?e:i.getDatumName(t)}}}class Ny extends Sr{constructor(){super(...arguments),this.type=Ny.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:0,path:""})}}Ny.type="path";const s5=()=>{Z.registerMark(Ny.type,Ny),Wtt()};class E9t{constructor(t){this.projection=bh(t.type)()}fit(t,e,i){const r={type:"FeatureCollection",features:i};this.projection.fitExtent([t,e],r)}center(t){var e,i;(i=(e=this.projection)===null||e===void 0?void 0:e.center)===null||i===void 0||i.call(e,t)}project(t){var e;return(e=this.projection)===null||e===void 0?void 0:e.call(this,t)}shape(t){var e,i;return(i=(e=this.projection)===null||e===void 0?void 0:e.path)===null||i===void 0?void 0:i.call(e,t)}invert(t){var e,i;return(i=(e=this.projection)===null||e===void 0?void 0:e.invert)===null||i===void 0?void 0:i.call(e,t)}scale(t){var e;if(!((e=this.projection)===null||e===void 0)&&e.scale){if(t===void 0)return this.projection.scale();this.projection.scale(t)}}translate(t){var e;if(!((e=this.projection)===null||e===void 0)&&e.scale){if(t===void 0)return this.projection.translate();this.projection.translate(t)}}evaluate(t,e,i){const r=this.projection.copy();return r==null?void 0:r.fitExtent([t,e],{type:"FeatureCollection",features:i})}}class O9t{parserScrollEvent(t){return t&&!(t.ctrlKey||t.deltaY===0&&t.deltaX===0)&&(t.scrollX=t.deltaX,t.scrollY=t.deltaY,t)}parserZoomEvent(t){if(!t)return t;const e=Math.pow(1.0005,-t.deltaY*Math.pow(16,t.deltaMode));return t.zoomDelta=e,t.zoomX=t.canvasX,t.zoomY=t.canvasY,t}clearZoom(){}clearScroll(){}clearDrag(){}parserDragEvent(){return!0}}class R9t{constructor(){this._lastScale=0}clearZoom(){this._lastScale=0,this.pointerId=null}parserDragEvent(t){return!0}parserZoomEvent(t){const e=t.scale;if(this._lastScale===0)return this._lastScale=e,t;t.zoomDelta=e/this._lastScale;const i=t.center;return t.zoomX=i.x,t.zoomY=i.y,this._lastScale=e,t}parserScrollEvent(t){return t}clearScroll(){}clearDrag(){}}function Xl(n){return n===vn["desktop-browser"]||n===vn["desktop-miniApp"]?{start:"pointerdown",move:"pointermove",end:"pointerup",zoom:"wheel",zoomEnd:"pointerup",scroll:"wheel",trigger:O9t}:vc(n)||Ec(n)?{start:"pointerdown",move:"pointermove",end:"pointerup",zoom:"pinch",zoomEnd:"pinchend",scroll:"pan",scrollEnd:"panend",trigger:R9t}:null}const nf={debounce:Ml,throttle:Pc};class a5{constructor(){this._isGestureListener=!1}initZoomable(t,e=vn["desktop-browser"]){this._eventObj=t,this._renderMode=e,this._gestureController=this._option.getChart().getVGrammarView().renderer._gestureController,this._isGestureListener=vc(this._renderMode)||Ec(this._renderMode),Xl(this._renderMode)&&(this._clickEnable=!0,this._zoomableTrigger=new(this._getZoomTriggerEvent("trigger")))}_getZoomTriggerEvent(t){return Xl(this._renderMode)[t]}_zoomEventDispatch(t,e,i){if(!this._isGestureListener&&!t.event)return;const r=this._isGestureListener?t:t.event.clone();this._zoomableTrigger.parserZoomEvent(r);const{zoomDelta:s,zoomX:a,zoomY:o}=r;F(s)||A0({x:a,y:o},this._getRegionOrSeriesLayout(e),!1)&&(i&&i({zoomDelta:s,zoomX:a,zoomY:o},r),this._eventObj.emit("zoom",{scale:r.zoomDelta,scaleCenter:{x:r.zoomX,y:r.zoomY},model:this}))}_getRegionOrSeriesLayout(t){t.type!=="region"&&(t=t.getRegion());const{x:e,y:i,width:r,height:s}=t.layout.getLayout();return{x1:e,y1:i,x2:e+r,y2:i+s}}_bindZoomEventAsRegion(t,e,i,r){var s,a;const o=(s=r==null?void 0:r.delayType)!==null&&s!==void 0?s:"throttle",l=(a=r==null?void 0:r.delayTime)!==null&&a!==void 0?a:0,u=this._isGestureListener?this._gestureController:t,h=this._isGestureListener?[this._getZoomTriggerEvent("zoom")]:[this._getZoomTriggerEvent("zoom"),{level:ci.chart,consume:!0}],c=this._isGestureListener?[this._getZoomTriggerEvent("zoomEnd")]:[this._getZoomTriggerEvent("zoomEnd"),{level:ci.chart,consume:!1}];u.on(...c,nf[o](d=>{this._zoomableTrigger.clearZoom()},l)),u.on(...h,nf[o](d=>{this._zoomEventDispatch(d,e,i)},l))}initZoomEventOfSeries(t,e,i){this._option.disableTriggerEvent||Xl(this._renderMode)&&this._bindZoomEventAsRegion(t.event,t,e,i)}initZoomEventOfRegions(t,e,i,r){this._option.disableTriggerEvent||Xl(this._renderMode)&&t.forEach(s=>{e?s.getSeries().forEach(a=>{e(a)&&this._bindZoomEventAsRegion(a.event,a,i,r)}):this._bindZoomEventAsRegion(this._eventObj,s,i,r)})}_scrollEventDispatch(t,e,i){let r=!1;if(!this._isGestureListener&&(!t.event||this._option.disableTriggerEvent))return r;const s=this._isGestureListener?t:t.event;this._zoomableTrigger.parserScrollEvent(s);const{scrollX:a,scrollY:o,canvasX:l,canvasY:u}=s;return F(a)&&F(o)||A0({x:l,y:u},this._getRegionOrSeriesLayout(e),!1)&&(i&&(r=i({scrollX:a,scrollY:o},s)),this._eventObj.emit("scroll",{scrollX:a,scrollY:o,model:this})),r}_bindScrollEventAsRegion(t,e,i,r){var s,a;const o=(s=r==null?void 0:r.delayType)!==null&&s!==void 0?s:"throttle",l=(a=r==null?void 0:r.delayTime)!==null&&a!==void 0?a:0,u=this._isGestureListener?this._gestureController:t,h=this._isGestureListener?[this._getZoomTriggerEvent("scroll")]:[this._getZoomTriggerEvent("scroll"),{level:ci.chart,consume:!0}],c=this._isGestureListener?[this._getZoomTriggerEvent("scrollEnd")]:[this._getZoomTriggerEvent("scrollEnd"),{level:ci.chart,consume:!1}];u.on(...c,nf[o](d=>{this._zoomableTrigger.clearScroll()},l)),u.on(...h,nf[o](d=>this._scrollEventDispatch(d,e,i),l))}initScrollEventOfSeries(t,e,i){Xl(this._renderMode)&&this._bindScrollEventAsRegion(t.event,t,e,i)}initScrollEventOfRegions(t,e,i,r){this._option.disableTriggerEvent||Xl(this._renderMode)&&t.forEach(s=>{e?s.getSeries().forEach(a=>{e(a)&&this._bindScrollEventAsRegion(a.event,a,i,r)}):this._bindScrollEventAsRegion(this._eventObj,s,i,r)})}_bindDragEventAsRegion(t,e,i,r){t.on(this._getZoomTriggerEvent("start"),{level:ci.chart},s=>{if(!s.event)return;const{event:a}=s;A0({x:a.canvasX,y:a.canvasY},this._getRegionOrSeriesLayout(e),!1)&&this._handleDrag(s,i,r)}),t.on("click",{level:ci.chart},()=>!this._clickEnable)}initDragEventOfSeries(t,e,i){this._option.disableTriggerEvent||Xl(this._renderMode)&&t.event.on(this._getZoomTriggerEvent("start"),{level:ci.model,filter:({model:r})=>(r==null?void 0:r.id)===t.id},r=>{this._handleDrag(r,e,i)})}initDragEventOfRegions(t,e,i,r){this._option.disableTriggerEvent||Xl(this._renderMode)&&t.forEach(s=>{e?s.getSeries().forEach(a=>{e(a)&&(a.event.on(this._getZoomTriggerEvent("start"),{level:ci.model,filter:({model:o})=>(o==null?void 0:o.id)===a.id},o=>{this._handleDrag(o,i)}),a.event.on("click",{level:ci.model,filter:({model:o})=>(o==null?void 0:o.id)===a.id},()=>!this._clickEnable))}):this._bindDragEventAsRegion(this._eventObj,s,i,r)})}_handleDrag(t,e,i){var r,s,a;if(this._option.disableTriggerEvent||(this._clickEnable=!1,!this._zoomableTrigger.parserDragEvent(t.event)))return;const o=(r=i==null?void 0:i.delayType)!==null&&r!==void 0?r:"throttle",l=(s=i==null?void 0:i.delayTime)!==null&&s!==void 0?s:0,u=(a=i==null?void 0:i.realTime)===null||a===void 0||a,h=this._getZoomTriggerEvent("move"),c=this._getZoomTriggerEvent("end"),d=t.event;let p=d.canvasX,f=d.canvasY,g=d.canvasX,_=d.canvasY;const v=nf[o](b=>{this._clickEnable=!0;const S=b.event,A=[S.canvasX-g,S.canvasY-_];g=S.canvasX,_=S.canvasY,!u&&e&&e(A,b.event),this._eventObj.emit("panend",{delta:A,model:this}),this._zoomableTrigger.pointerId=null,this._eventObj.off(h,{level:ci.chart,source:Re.chart},y),this._eventObj.off(c,{level:ci.chart,source:Re.window},v)},l),y=nf[o](b=>{if(!this._zoomableTrigger.parserDragEvent(b.event))return;this._clickEnable=!1;const S=b.event,A=[S.canvasX-p,S.canvasY-f];p=S.canvasX,f=S.canvasY,u&&e&&e(A,b.event),this._eventObj.emit("panmove",{delta:A,model:this})},l);this._eventObj.on(h,{level:ci.chart,source:Re.chart},y),this._eventObj.on(c,{level:ci.chart,source:Re.chart},v)}}function I9t(n,t){return`${Kt}_${t}_${n}`}class MC extends bs{constructor(){super(...arguments),this.type=mt.geoCoordinate,this.name=mt.geoCoordinate,this.layoutType="none",this.layoutZIndex=ai.Mark,this._projectionSpec={name:I9t(this.type,this.id),type:"mercator"},this._actualScale=1,this._initialScale=1,this.effect={scaleUpdate:()=>{this.coordinateHelper()}},this._handleChartZoom=(t,e)=>{var i,r,s,a,o,l;let u=t.zoomDelta;const h=this._actualScale;return this._actualScale*=u,this._actualScale<((i=this._spec.zoomLimit)===null||i===void 0?void 0:i.min)?(this._actualScale=(r=this._spec.zoomLimit)===null||r===void 0?void 0:r.min,u=((s=this._spec.zoomLimit)===null||s===void 0?void 0:s.min)/h):this._actualScale>((a=this._spec.zoomLimit)===null||a===void 0?void 0:a.max)&&(this._actualScale=(o=this._spec.zoomLimit)===null||o===void 0?void 0:o.max,u=((l=this._spec.zoomLimit)===null||l===void 0?void 0:l.max)/h),e&&(e.zoomDelta=u),this.zoom(u,[t.zoomX,t.zoomY]),u},this.pan=(t=[0,0])=>{var e,i,r;const s=(i=(e=this._projection)===null||e===void 0?void 0:e.translate())!==null&&i!==void 0?i:[0,0];let a=s[0],o=s[1];a+=t[0],o+=t[1],(r=this._projection)===null||r===void 0||r.translate([a,o])}}get longitudeField(){return this._longitudeField}get latitudeField(){return this._latitudeField}get projectionSpec(){return this._projectionSpec}setProjection(t){this._projectionSpec=Object.assign(Object.assign({},t),{name:this._projectionSpec.name})}getZoom(){return this._actualScale}static getSpecInfo(t){if(F(t))return null;const e=[];return t.region.forEach((i,r)=>{if(i.coordinate==="geo"){const s=Object.assign(Object.assign({},i),{padding:0});e.push({spec:s,regionIndex:r,type:mt.geoCoordinate,specInfoPath:["component","geoCoordinate",r]})}}),e}setAttrFromSpec(){var t,e,i;super.setAttrFromSpec(),this._spec.roam&&this.initZoomable(this.event,this._option.mode),this._projectionSpec=Ut(this._projectionSpec,this._spec.projection),this._projectionSpec.zoom>((t=this._spec.zoomLimit)===null||t===void 0?void 0:t.max)&&(this._projectionSpec.zoom=this._spec.zoomLimit.max),this._projectionSpec.zoom<((e=this._spec.zoomLimit)===null||e===void 0?void 0:e.min)&&(this._projectionSpec.zoom=this._spec.zoomLimit.min),this._actualScale=(i=this._projectionSpec.zoom)!==null&&i!==void 0?i:1,this._initialScale=this._actualScale,this._longitudeField=this._spec.longitudeField,this._latitudeField=this._spec.latitudeField}created(){super.created(),this._regions=this._option.getRegionsInIndex([this._option.regionIndex]),this.initProjection(),this.coordinateHelper(),this.initEvent(),this._initCenterCache()}dispatchZoom(t,e){const i=e||{x:this.getLayoutStartPoint().x+this.getLayoutRect().width/2,y:this.getLayoutStartPoint().y+this.getLayoutRect().height/2},r=this._handleChartZoom({zoomDelta:t,zoomX:i.x,zoomY:i.y});r!==1&&this.event.emit("zoom",{scale:r,scaleCenter:i,model:this})}initEvent(){this.event.on(Wt.scaleUpdate,{filter:({model:t})=>(t==null?void 0:t.id)===this.id},this.effect.scaleUpdate.bind(this)),this._spec.roam&&(this.initZoomEventOfRegions(this._regions,null,this._handleChartZoom),this.initDragEventOfRegions(this._regions,()=>!0,this.pan),this._regions.forEach(t=>{t.getSeries().forEach(e=>{e.event.on("zoom",i=>(e.handleZoom(i),!0)),e.event.on("panmove",i=>(e.handlePan(i),!0))})}))}initProjection(){var t;this._projection=new E9t(this._projectionSpec),this._projection.projection!==null||(t=this._option)===null||t===void 0||t.onError("unsupported projection type!")}coordinateHelper(){const t={longitudeField:this._longitudeField,latitudeField:this._latitudeField,dataToPosition:this.dataToPosition.bind(this),dataToLongitude:this.dataToLongitude.bind(this),dataToLatitude:this.dataToLatitude.bind(this),shape:this.shape.bind(this),getCoordinateId:()=>this.id};this._regions.forEach(e=>{e.getSeries().forEach(i=>{i.type===at.map?i.setCoordinateHelper(t):(i.setXAxisHelper(Object.assign(Object.assign({},t),{isContinuous:!0,dataToPosition:(r,s)=>{var a;let o=r[0];if(F(o)&&(s!=null&&s.datum)){const l=s.datum[i.getDimensionField()[0]];o=(a=this._centerCache.get(l))===null||a===void 0?void 0:a.x}return this.dataToLongitude(o)},valueToPosition:(r,s)=>{var a;if(F(r)&&(s!=null&&s.datum)){const o=s.datum[i.getDimensionField()[0]];r=(a=this._centerCache.get(o))===null||a===void 0?void 0:a.x}return this.dataToLongitude(r)},getFields:()=>[this._longitudeField],getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>!1})),i.setYAxisHelper(Object.assign(Object.assign({},t),{isContinuous:!0,dataToPosition:(r,s)=>{var a;let o=r[0];if(F(o)&&(s!=null&&s.datum)){const l=s.datum[i.getDimensionField()[0]];o=(a=this._centerCache.get(l))===null||a===void 0?void 0:a.y}return this.dataToLatitude(o)},valueToPosition:(r,s)=>{var a;if(F(r)&&(s!=null&&s.datum)){const o=s.datum[i.getDimensionField()[0]];r=(a=this._centerCache.get(o))===null||a===void 0?void 0:a.y}return this.dataToLatitude(r)},getFields:()=>[this._latitudeField],getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>!1})))})})}onLayoutEnd(t){this.setLayoutRect(this._regions[0].getLayoutRect()),this.setLayoutStartPosition(this._regions[0].getLayoutStartPoint());const{width:e,height:i}=this.getLayoutRect(),{translate:r,scale:s,center:a}=this.evaluateProjection([0,0],[e,i]);r&&this._projection.translate(r),s&&this._projection.scale(s),a&&this._projection.center(a),zi(this._regions,o=>{var l;if(o.type===at.map){o.areaPath.clear();const u=(l=o.getRootMark().getProduct())===null||l===void 0?void 0:l.getGroupGraphicItem();u&&u.attribute.postMatrix&&u.setAttributes({postMatrix:new Wi})}}),this._actualScale=this._initialScale,super.onLayoutEnd(t)}onRender(t){}changeRegions(t){}_getNeedClearVRenderComponents(){return[]}collectFeatures(){const t=[];return this._regions.forEach(e=>{e.getSeries().forEach(i=>{var r,s;i.type===at.map&&t.push(...(s=(r=i.getMapViewData())===null||r===void 0?void 0:r.latestData)!==null&&s!==void 0?s:[])})}),t}dataToPosition(t=[]){var e;const i=(e=this._projection)===null||e===void 0?void 0:e.project([t[0],t[1]]);return{x:i==null?void 0:i[0],y:i==null?void 0:i[1]}}dataToLatitude(t){var e;const i=(e=this._projection)===null||e===void 0?void 0:e.project([0,t]);return i==null?void 0:i[1]}dataToLongitude(t){var e;const i=(e=this._projection)===null||e===void 0?void 0:e.project([t,0]);return i==null?void 0:i[0]}zoom(t,e=[0,0]){var i,r,s,a,o,l;let u=(r=(i=this._projection)===null||i===void 0?void 0:i.scale())!==null&&r!==void 0?r:0;const h=(a=(s=this._projection)===null||s===void 0?void 0:s.translate())!==null&&a!==void 0?a:[0,0];let c=h[0],d=h[1];u*=t,c-=(e[0]-c)*(t-1),d-=(e[1]-d)*(t-1),(o=this._projection)===null||o===void 0||o.scale(u),(l=this._projection)===null||l===void 0||l.translate([c,d])}shape(t){return this._projection.shape(t)}invert(t){return this._projection.invert(t)}evaluateProjection(t,e){var i;const r=this._projection.evaluate(t,e,this.collectFeatures());let s=r.translate();const a=r.scale()*this._initialScale,o=(i=this._projectionSpec.center)!==null&&i!==void 0?i:r.invert([e[0]/2,e[1]/2]);return o&&(s=[e[0]/2,e[1]/2]),{translate:s,scale:a,center:o}}_initCenterCache(){this._centerCache||(this._centerCache=new Map),this._regions.forEach(t=>{t.getSeries().forEach(e=>{var i,r;e.type==="map"&&((r=(i=e.getMapViewData())===null||i===void 0?void 0:i.latestData)!==null&&r!==void 0?r:[]).forEach((s={})=>{const a=s[e.getDimensionField()[0]]||s[TC],o=e.getDatumCenter(s);a&&z(o)&&this._centerCache.set(a,{x:o[0],y:o[1]})})})})}release(){super.release(),this._centerCache&&this._centerCache.clear(),this._centerCache=null}}MC.type=mt.geoCoordinate,On(MC,a5);const lnt=()=>{Z.registerComponent(MC.type,MC)};class unt extends ys{_transformLabelSpec(t){this._addMarkLabelSpec(t,"area",void 0,void 0,!1)}}class ic extends T9t{constructor(){super(...arguments),this.type=at.map,this.transformerConstructor=unt,this._areaCache=new Map}getNameMap(){return this._nameMap}get areaPath(){return this._areaCache}setAttrFromSpec(){var t,e;super.setAttrFromSpec(),this.map=this._spec.map,this._nameMap=this._spec.nameMap,this._nameField=this._spec.nameField,this._valueField=this._spec.valueField,this._spec.nameProperty&&(this._nameProperty=this._spec.nameProperty),this._spec.centroidProperty&&(this._centroidProperty=this._spec.centroidProperty),this.map||(t=this._option)===null||t===void 0||t.onError(`map type '${this.map}' is not specified !`),pp.get(this.map)||(e=this._option)===null||e===void 0||e.onError(`'${this.map}' data is not registered !`)}initData(){var t,e;super.initData(),ie(this._dataSet,"copyDataView",uT),ie(this._dataSet,"map",M9t),ie(this._dataSet,"lookup",k9t);const i=pp.get(this.map);i||(t=this._option)===null||t===void 0||t.onError("no valid map data found!");const r=new Le(this._dataSet,{name:`map_${this.id}_data`});r.parse([i],{type:"dataview"}).transform({type:"copyDataView",options:{deep:!0},level:$o.copyDataView}).transform({type:"map",options:{nameMap:this._nameMap,nameProperty:this._nameProperty}}).transform({type:"lookup",options:{from:()=>{var s;return(s=this._data)===null||s===void 0?void 0:s.getLatestData()},key:TC,fields:this._nameField,set:(s,a)=>{a&&Object.keys(a).forEach(o=>{o in s||(s[o]=a[o])})}}}),(e=this._data)===null||e===void 0||e.getDataView().target.addListener("change",r.reRunAllTransform),this._mapViewData=new kl(this._option,r)}initMark(){this._pathMark=this._createMark(ic.mark.area,{morph:Gu(this._spec,ic.mark.area.name),defaultMorphElementKey:this.getDimensionField()[0],groupKey:this.getDimensionField()[0],isSeriesMark:!0,skipBeforeLayouted:!0,dataView:this._mapViewData.getDataView(),dataProductId:this._mapViewData.getProductId()})}initMarkStyle(){const t=this._pathMark;t&&(this.setMarkStyle(t,{fill:e=>{var i,r,s,a;return z(e[(i=this._seriesField)!==null&&i!==void 0?i:Ls])?((r=this._option.globalScale.getScale("color"))!==null&&r!==void 0?r:this._getDefaultColorScale()).scale(e[(s=this._seriesField)!==null&&s!==void 0?s:Ls]):(a=this._spec)===null||a===void 0?void 0:a.defaultFillColor},path:this.getPath.bind(this)},"normal",kt.Series),t.setPostProcess("fill",e=>z(e)?e:this._spec.defaultFillColor),this.setMarkStyle(t,{smoothScale:!0},"normal",kt.Built_In))}initLabelMarkStyle(t){t&&(this._labelMark=t,this.setMarkStyle(t,{text:e=>this.getDatumName(e),x:e=>{var i;return(i=this.dataToPosition(e))===null||i===void 0?void 0:i.x},y:e=>{var i;return(i=this.dataToPosition(e))===null||i===void 0?void 0:i.y}}))}initAnimation(){var t;this._pathMark.setAnimationConfig(Ae((t=Z.getAnimationInKey("fadeInOut"))===null||t===void 0?void 0:t(),Ee("area",this._spec,this._markAttributeContext)))}initTooltip(){this._tooltipHelper=new P9t(this),this._pathMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._pathMark)}getPath(t){var e;const i=this._areaCache.get(t[$r]);if(i)return i.shape;const r=(e=this._coordinateHelper)===null||e===void 0?void 0:e.shape(t);return this._areaCache.set(t[$r],{shape:r}),r}onEvaluateEnd(){this._mapViewData.updateData()}getDimensionField(){return[this.nameField]}getMeasureField(){return[this.valueField]}release(){super.release(),this._areaCache.clear(),this._nameMap={},this._mapViewData=null}handleZoom(t){var e,i,r;const{scale:s,scaleCenter:a}=t;if(s===1)return;const o=(e=this.getRootMark().getProduct())===null||e===void 0?void 0:e.getGroupGraphicItem();o&&(o.attribute.postMatrix||o.setAttributes({postMatrix:new Wi}),o.scale(s,s,a));const l=(r=(i=this._labelMark)===null||i===void 0?void 0:i.getComponent())===null||r===void 0?void 0:r.getProduct();l&&l.evaluate(null,null)}handlePan(t){var e,i,r;const{delta:s}=t;if(s[0]===0&&s[1]===0)return;const a=(e=this.getRootMark().getProduct())===null||e===void 0?void 0:e.getGroupGraphicItem();a&&(a.attribute.postMatrix||a.setAttributes({postMatrix:new Wi}),a.translate(s[0],s[1]));const o=(r=(i=this._labelMark)===null||i===void 0?void 0:i.getComponent())===null||r===void 0?void 0:r.getProduct();o&&o.evaluate(null,null)}getDatumCenter(t){var e,i,r,s;return this._centroidProperty&&(!((e=t.properties)===null||e===void 0)&&e[this._centroidProperty])?(i=t.properties)===null||i===void 0?void 0:i[this._centroidProperty]:st(t.centroidX*t.centroidY)?[t.centroidX,t.centroidY]:!((r=t.properties)===null||r===void 0)&&r.center?t.properties.center:!((s=t.properties)===null||s===void 0)&&s.centroid?t.properties.centroid:[Number.NaN,Number.NaN]}getDatumName(t){var e;if(t[this.nameField])return t[this.nameField];const i=(e=t.properties)===null||e===void 0?void 0:e[this._nameProperty];if(i){if(this._spec.nameMap&&this._spec.nameMap[i])return this._spec.nameMap[i];if(this._spec.showDefaultName||!this._spec.nameMap)return i}return""}dataToPositionX(t){var e;return(e=this._option)===null||e===void 0||e.onError("Method not implemented."),0}dataToPositionY(t){var e;return(e=this._option)===null||e===void 0||e.onError("Method not implemented."),0}viewDataUpdate(t){var e,i,r;super.viewDataUpdate(t),(i=(e=this._mapViewData)===null||e===void 0?void 0:e.getDataView())===null||i===void 0||i.reRunAllTransform(),(r=this._mapViewData)===null||r===void 0||r.updateData()}_getDataIdKey(){return $r}getActiveMarks(){return[this._pathMark]}}ic.type=at.map,ic.mark=bet,ic.transformerConstructor=unt;const L9t=()=>{C9t(),lnt(),s5(),Z.registerSeries(ic.type,ic),Z.registerImplement("registerMap",K7t),Z.registerImplement("unregisterMap",q7t),$u()},D9t=(n,t)=>{if(!n||n.length===0)return n;const{indexField:e,total:i,groupData:r}=t,s=[],{dimensionValues:a,dimensionData:o}=r().latestData,l=Array.from(a[e]);let u={start:0,end:0,positive:0,negative:0,lastIndex:null};return l.forEach((h,c)=>{const d={start:u.end,end:u.end,lastIndex:u.lastIndex,lastEnd:u.end,index:h,isTotal:!1,positive:u.end,negative:u.end},p=o[h];if(p==null||p.forEach((f,g)=>{g===p.length-1?f[ky]=!0:delete f[ky]}),p.length>1){const f=g=>{if(i&&i.type!=="end"){if(i.type==="field"||i.type==="custom")return!!g[i.tagField]}else if(c===l.length-1)return!0;return!1};if(p.some(g=>f(g)))return u=B9t(p,h,d,s,u,l,c,t,f),void s.push(d)}u=hnt(p,h,d,s,u,l,c,t),s.push(d)}),s};function B9t(n,t,e,i,r,s,a,o,l){e.isTotal=!0;const{valueField:u,startAs:h,endAs:c,total:d}=o,p=[],f=[];if(n.forEach(A=>{l(A)?f.push(A):p.push(A)}),f.length===n.length){const A=hnt([n[0]],t,e,i,r,s,a,o);return f.forEach(w=>{w[h]=n[0][h],w[c]=n[0][c],w[u]=n[0][u]}),A}const g=f[0];let{start:_,end:v}=cnt(g,e,i,r,d);e.start=_,e.end=v;let y=_,b=_,S=v-_;return p.forEach(A=>{const w=+A[u];w>=0?(A[h]=+y,y=ko(y,w)):(A[h]=+b,b=ko(b,w)),A[c]=ko(A[h],w),_=ko(_,w),S=iI(S,w)}),f.forEach(A=>{A[h]=+_,A[c]=ko(A[h],S),A[u]=S}),Object.assign(Object.assign({},e),{lastIndex:t})}function hnt(n,t,e,i,r,s,a,o){const{valueField:l,startAs:u,endAs:h,total:c,seriesField:d,seriesFieldName:p}=o;return n.forEach(f=>{let g=!1;if(c&&c.type!=="end"){if((c.type==="field"||c.type==="custom")&&f[c.tagField]){g=!0;const{start:_,end:v}=cnt(f,e,i,r,c);f[u]=_,f[h]=v,f[l]=v-_,e.start=_,e.end=v}}else a===s.length-1&&(e.start=0,f[u]=e.start,f[h]=e.end,g=!0);if(!g){const _=+f[l];_>=0?(f[u]=+e.positive,e.positive=ko(e.positive,_)):(f[u]=+e.negative,e.negative=ko(e.negative,_)),f[h]=ko(f[u],_),e.end=ko(e.end,_)}e.isTotal=g,(F(d)||d===dC)&&(f[dC]=g?p.total:+f[l]>=0?p.increase:p.decrease)}),Object.assign(Object.assign({},e),{lastIndex:t})}function cnt(n,t,e,i,r){return r&&r.type!=="end"?r.type==="field"||r.type==="custom"?r.type==="custom"?j9t(n,i,r):r.collectCountField&&!F(n[r.collectCountField])?N9t(n,e,t,r):z9t(n,t,r):{start:0,end:0}:F9t(t)}function F9t(n){return{start:0,end:n.end}}function j9t(n,t,e){return e.product(n,t)}function N9t(n,t,e,i){let r=0,s=e.end;const a=t.length-+n[i.collectCountField],o=t.length-1;return a<0?wl("total.collectCountField error"):r=t[a].start,o<0?wl("total.collectCountField error"):s=t[o].end,{start:r,end:s}}function z9t(n,t,e){let i=0,r=t.end;return e.startField&&!F(n[e.startField])&&(i=+n[e.startField]),e.valueField&&!F(n[e.valueField])&&(r=ko(i,+n[e.valueField])),{start:i,end:r}}const H9t=(n,t)=>{if(!n)return n;const{indexField:e,valueField:i,total:r,seriesField:s}=t,a={[e]:(r==null?void 0:r.text)||"total",[i]:n.reduce((o,l)=>ko(o,+l[i]),0)};return s&&(a[s]="total"),n.push(a),n},V9t={type:"fadeIn"},W9t={type:"growCenterIn"};function $9t(n,t){switch(t){case"fadeIn":return V9t;case"scaleIn":return W9t;default:return D1(n,!1)}}const G9t=()=>{Z.registerAnimation("waterfall",(n,t)=>({appear:$9t(n,t),enter:D1(n,!1),exit:sm(n,!1),disappear:sm(n,!1)}))};class zy extends Sr{constructor(){super(...arguments),this.type=zy.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{x1:0,y1:0})}}zy.type="rule";const zm=()=>{Z.registerMark(zy.type,zy),BF()},U9t=(n,t)=>{if(!t.fields)return n;const e={};return{dimensionValues:e,dimensionData:dnt(n.map(i=>i.latestData).flat(),t.fields,e)}};function dnt(n,t,e){if(t.length===0)return n;const i=t[0],r=t.slice(1);e[i]=new Set;const s=Y9t(n,i,e[i]);return r.length?X9t(s,(a,o)=>dnt(a,r,e)):s}function Y9t(n,t,e){const i={};return n.forEach(r=>{const s=r[t];i[s]||(i[s]=[],e.add(s)),i[s].push(r)}),i}function X9t(n,t){return Object.keys(n).reduce((e,i)=>(e[i]=t(n[i],i),e),{})}class K9t{get fields(){return this._fields}get groupData(){return this._groupData}constructor(t){this._fields=[],this._fields=t}initData(t,e){const i=t.name,r=new Le(e instanceof gc?e:t.dataSet);r.name=i,r.parse([t],{type:"dataview"}),ie(e,"dimensionTree",U9t),r.transform({type:"dimensionTree",options:{fields:this._fields}},!1),r.target.addListener("change",this.groupDataUpdate.bind(this)),this._groupData=r}groupDataUpdate(){}getGroupValueInField(t){var e,i,r;const s=(r=(i=(e=this.groupData)===null||e===void 0?void 0:e.latestData)===null||i===void 0?void 0:i.dimensionValues)===null||r===void 0?void 0:r[t];return s?Array.from(s):[]}}class pnt extends AT{constructor(){super(...arguments),this._supportStack=!1}_transformLabelSpec(t){this._addMarkLabelSpec(t,"bar"),this._addMarkLabelSpec(t,"bar","stackLabel")}}const Z$={rect:J$,symbol:fnt,arc:Q$,point:tVt,"line-data":Z9t,stackLabel:gnt,line:tG,area:tG,rect3d:J$,arc3d:Q$,treemap:nVt,venn:rVt};function q9t(n,t){var e;const{labelSpec:i}=t;return i.overlap&&!ae(i.overlap)&&(i.overlap={}),((e=Z$[n])!==null&&e!==void 0?e:Z$.point)(t)}function o5(n,t,e,i){var r;const{labelMark:s,series:a}=n,o={text:t[a.getMeasureField()[0]],data:t,textType:(r=n.labelSpec.textType)!==null&&r!==void 0?r:"text"},l=Object.keys(s.stateStyle.normal);for(const c of l){const d=s.getAttribute(c,t);o[c]=d}const{formatFunc:u,args:h}=Lu(e,i,o.text,t);return u&&(o.text=u(...h,{series:a})),o}function l5(n){return ft(n)?t=>n(t.data):n}function fnt(n){var t,e,i;const{series:r,labelSpec:s}=n,a=r.direction==="horizontal"?"right":"top",o=(t=l5(s.position))!==null&&t!==void 0?t:a;let l;return l=s.overlap!==!1&&{strategy:(i=(e=s.overlap)===null||e===void 0?void 0:e.strategy)!==null&&i!==void 0?i:J9t(),avoidBaseMark:o!=="center"},{position:o,overlap:l}}function Z9t(n){const t=fnt(n);return Si(t.overlap)||(t.overlap.avoidBaseMark=!1),t}function J9t(){return[{type:"position",position:["top","bottom","right","left","top-right","top-left","bottom-left","bottom-right"]}]}function J$(n){var t,e,i,r,s,a;const{series:o,labelSpec:l={}}=n,u=(t=l5(l.position))!==null&&t!==void 0?t:"outside",h=(e=o.direction)!==null&&e!==void 0?e:"vertical",c=o.direction==="horizontal"?(i=o.getXAxisHelper())===null||i===void 0?void 0:i.isInverse():(r=o.getYAxisHelper())===null||r===void 0?void 0:r.isInverse();let d,p=u;It(u)&&u==="outside"&&(p=g=>{const{data:_}=g,v=o.getMeasureField()[0],y=(_==null?void 0:_[v])>=0&&c||(_==null?void 0:_[v])<0&&!c?1:0;return{vertical:["top","bottom"],horizontal:["right","left"]}[h][y]}),d=l.overlap!==!1&&{strategy:(a=(s=l.overlap)===null||s===void 0?void 0:s.strategy)!==null&&a!==void 0?a:Q9t(o)};let f=!1;return It(u)&&u.includes("inside")&&(f=!0),{position:p,overlap:d,smartInvert:f}}function Q9t(n){return[{type:"position",position:t=>{var e,i;const{data:r}=t,s=n.getMeasureField()[0];return(n.direction==="horizontal"?!((e=n.getXAxisHelper())===null||e===void 0)&&e.isInverse():!((i=n.getYAxisHelper())===null||i===void 0)&&i.isInverse())?(r==null?void 0:r[s])>=0?n.direction==="horizontal"?["left","inside-left"]:["bottom","inside-bottom"]:n.direction==="horizontal"?["right","inside-right"]:["top","inside-top"]:(r==null?void 0:r[s])>=0?n.direction==="horizontal"?["right","inside-right"]:["top","inside-top"]:n.direction==="horizontal"?["left","inside-left"]:["bottom","inside-bottom"]}}]}function tVt(n){const{labelSpec:t}=n;let e;return e=t.overlap!==!1&&{avoidBaseMark:!1},{position:"center",overlap:e}}function Q$(n){var t;const{labelSpec:e}=n,i=(t=l5(e.position))!==null&&t!==void 0?t:"outside",r=i;let s;return s=e.smartInvert?e.smartInvert:It(i)&&i.includes("inside"),{position:r,smartInvert:s}}function eVt(n,t,e,i){return t.direction==="horizontal"?e==="middle"?.5*(t.totalPositionX(n,"end")+t.totalPositionY(n,"start")):e==="max"?t.totalPositionX(n,n.end>=n.start?"end":"start")+i:e==="min"?t.totalPositionX(n,n.end>=n.start?"start":"end")-i:t.totalPositionX(n,"end")+(n.end>=n.start?i:-i):t.totalPositionX(n,"index",.5)}function iVt(n,t,e,i){return t.direction==="horizontal"?t.totalPositionY(n,"index",.5):e==="middle"?.5*(t.totalPositionY(n,"end")+t.totalPositionY(n,"start")):e==="max"?t.totalPositionY(n,n.end>=n.start?"end":"start")-i:e==="min"?t.totalPositionY(n,n.end>=n.start?"start":"end")+i:t.totalPositionY(n,"end")+(n.end>=n.start?-i:i)}function gnt(n,t,e){const i=n.series,r=n.labelSpec||{},s=i.getTotalData();return{customLayoutFunc:a=>a.map(o=>{const l=r.position||"withChange",u=r.offset||0,h=t?t(o.data):o.data,c=o5(n,h,r.formatMethod);return c.x=eVt(h,i,l,u),c.y=iVt(h,i,l,u),i.direction==="horizontal"?c.textAlign=l==="middle"?"center":l==="withChange"&&h.end-h.start>=0||l==="max"?"left":"right":c.textBaseline=l==="middle"?l:l==="withChange"&&h.end-h.start>=0||l==="max"?"bottom":"top",e==null||e(o,h,c),Ug(Object.assign(Object.assign({},c),{id:o.id}))}),dataFilter:a=>{const o=[];return s.forEach(l=>{const u=a.find(h=>{var c;return l.index===((c=h.data)===null||c===void 0?void 0:c[i.getDimensionField()[0]])});u&&(u.data=l,o.push(u))}),o},overlap:{strategy:[]}}}function nVt(n){return{customLayoutFunc:(t,e)=>e,overlap:!1}}function rVt(n){return{customLayoutFunc:(t,e)=>e,smartInvert:!0}}function tG(n){var t,e,i,r;const{labelSpec:s,series:a}=n,o=(i=(e=(t=a.getViewDataStatistics)===null||t===void 0?void 0:t.call(a).latestData)===null||e===void 0?void 0:e[a.getSeriesField()])===null||i===void 0?void 0:i.values,l=o?o.map((u,h)=>({[a.getSeriesField()]:u,index:h})):[];return{position:(r=s.position)!==null&&r!==void 0?r:"end",data:l}}class Nd extends zo{constructor(){super(...arguments),this.type=at.waterfall,this.transformerConstructor=pnt,this._leaderLineMark=null,this._stackLabelMark=null,this._labelMark=null}getTotalData(){var t;return(t=this._totalData)===null||t===void 0?void 0:t.getLatestData()}initGroups(){const t=this.getGroupFields();t&&t.length&&(this._groups=new K9t(t),this._data&&this._groups.initData(this._data.getDataView(),this._dataSet))}setAttrFromSpec(){super.setAttrFromSpec(),this.setValueFieldToStack(),this._fieldX=[this._fieldX[0]],this._fieldY=[this._fieldY[0]],F(this._seriesField)&&(this._seriesField=dC)}getSeriesKeys(){return this._seriesField===dC?[this._theme.seriesFieldName.increase,this._theme.seriesFieldName.decrease,this._theme.seriesFieldName.total]:super.getSeriesKeys()}initData(){var t;super.initData(),ie(this._dataSet,"waterfallFillTotal",H9t),ie(this._dataSet,"waterfall",D9t),(F(this._spec.total)||this._spec.total.type==="end")&&((t=this._rawData)===null||t===void 0||t.transform({type:"waterfallFillTotal",options:{indexField:this.getGroupFields()[0],valueField:this.getStackValueField(),seriesField:this.getSeriesField(),seriesFieldName:this._theme.seriesFieldName,total:this._spec.total}},!1));const e=yD(this.getViewData(),this._dataSet,{name:`${Kt}_series_${this.id}_totalData`});this.getViewData().target.removeListener("change",e.reRunAllTransform),this._totalData=new kl(this._option,e),e.transform({type:"waterfall",options:{indexField:this.getGroupFields()[0],valueField:this.getStackValueField(),seriesField:this.getSeriesField(),seriesFieldName:this._theme.seriesFieldName,startAs:Hs,endAs:yn,total:this._spec.total,groupData:()=>this.getGroups().groupData}},!1)}initAnimation(){var t,e,i,r;const s={yField:this.direction==="horizontal"?this._fieldY[0]:this.getStackValueField(),xField:this.direction==="horizontal"?this.getStackValueField():this._fieldX[0],direction:this.direction,growFrom:()=>{var l,u;return this.direction==="horizontal"?(l=this._xAxisHelper)===null||l===void 0?void 0:l.getScale(0).scale(0):(u=this._yAxisHelper)===null||u===void 0?void 0:u.getScale(0).scale(0)}},a=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset,o=Lc(this);this._barMark.setAnimationConfig(Ae((i=Z.getAnimationInKey("waterfall"))===null||i===void 0?void 0:i(s,a),Ee("bar",this._spec,this._markAttributeContext),o)),this._leaderLineMark&&this._leaderLineMark.setAnimationConfig(Ae((r=Z.getAnimationInKey("fadeInOut"))===null||r===void 0?void 0:r(),Ee("leaderLine",this._spec,this._markAttributeContext)))}viewDataUpdate(t){this._totalData.getDataView().reRunAllTransform(),this._totalData.updateData(),super.viewDataUpdate(t)}addViewDataFilter(t){}reFilterViewData(){}onEvaluateEnd(t){super.onEvaluateEnd(t),this._totalData.updateData()}initMark(){var t,e;super.initMark();const i=this._createMark(Nd.mark.leaderLine,{key:"index",customShape:(t=this._spec.leaderLine)===null||t===void 0?void 0:t.customShape,stateSort:(e=this._spec.leaderLine)===null||e===void 0?void 0:e.stateSort});i&&(this._leaderLineMark=i,i.setDataView(this._totalData.getDataView(),this._totalData.getProductId()))}initLabelMarkStyle(t){var e;if(t){if(!this._labelMark&&(!((e=this._spec.label)===null||e===void 0)&&e.visible))return super.initLabelMarkStyle(t),void(this._labelMark=t);this._stackLabelMark=t,t.skipEncode=!0,t.setRule("stackLabel"),t.setDataView(this._totalData.getDataView(),this._totalData.getProductId()),this.setMarkStyle(t,{text:i=>{var r;return((r=this._spec.stackLabel)===null||r===void 0?void 0:r.valueType)==="absolute"?i.end:iI(i.end,i.start)}})}}initTotalLabelMarkStyle(t){this.setMarkStyle(t,{text:e=>{var i;return"end"in e?((i=this._spec.totalLabel)===null||i===void 0?void 0:i.valueType)==="absolute"?e.end:iI(e.end,e.start):this.direction==="horizontal"?e[this._fieldX[0]]:e[this._fieldY[0]]}})}getTotalLabelComponentStyle(t){return gnt(Object.assign(Object.assign({},t),{series:this,labelSpec:this._spec.totalLabel}),e=>{const i=this.direction==="vertical"?e[this._fieldX[0]]:e[this._fieldY[0]];return this._totalData.getLatestData().find(r=>r.index===i)})}totalPositionX(t,e,i=.5){const{dataToPosition:r,getBandwidth:s}=this._xAxisHelper;return this._direction==="horizontal"?Ue(r([t[e]],{bandPosition:this._bandPosition})):r([t[e]],{bandPosition:this._bandPosition})+.5*s(0)-this._barMark.getAttribute("width",t)*(.5-i)}totalPositionY(t,e,i=.5){const{dataToPosition:r,getBandwidth:s}=this._yAxisHelper;return this._direction==="horizontal"?r([t[e]],{bandPosition:this._bandPosition})+.5*s(0)-this._barMark.getAttribute("height",t)*(.5-i):Ue(r([t[e]],{bandPosition:this._bandPosition}))}initMarkStyle(){super.initMarkStyle(),this._leaderLineMark&&(this._direction==="horizontal"?this.setMarkStyle(this._leaderLineMark,{visible:t=>!F(t.lastIndex),x:t=>this.totalPositionX(t,"lastEnd",0),x1:t=>this.totalPositionX(t,t.isTotal?"end":"start",0),y:t=>t.lastIndex?this.totalPositionY(t,"lastIndex",1):0,y1:t=>this.totalPositionY(t,"index",0)},"normal",kt.Series):this.setMarkStyle(this._leaderLineMark,{visible:t=>!F(t.lastIndex),x:t=>t.lastIndex?this.totalPositionX(t,"lastIndex",1):0,x1:t=>this.totalPositionX(t,"index",0),y:t=>this.totalPositionY(t,"lastEnd",0),y1:t=>this.totalPositionY(t,t.isTotal?"end":"start",0)},"normal",kt.Series))}}Nd.type=at.waterfall,Nd.mark=Met,Nd.transformerConstructor=pnt;const sVt=()=>{zm(),Yu(),G9t(),$u(),$s(),Ws(),Z.registerSeries(Nd.type,Nd)},Hy=`${Kt}_BOX_PLOT_OUTLIER_VALUE`;var oi;(function(n){n.OUTLIER="outlier",n.MAX="max",n.MIN="min",n.MEDIAN="median",n.Q1="q1",n.Q3="q3",n.SERIES_FIELD="seriesField"})(oi||(oi={}));const aVt=(n,t)=>{const e=[],{outliersField:i,dimensionField:r}=t;return(n[0].latestData||[]).forEach(s=>{let a=s[i];ut(a)||(a=[a]),e.push(...a.map(o=>{const l={[Hy]:o};return r.forEach(u=>{l[u]=s[u]}),l}))}),e};class oVt extends _s{constructor(){super(...arguments),this.getContentKey=t=>e=>{if(this.isOutlierMark(e))return t===oi.OUTLIER?this.series.getOutliersField():t===oi.SERIES_FIELD?this.series.getSeriesField():null;switch(t){case oi.MIN:return this.series.getMinField();case oi.MAX:return this.series.getMaxField();case oi.MEDIAN:return this.series.getMedianField();case oi.Q1:return this.series.getQ1Field();case oi.Q3:return this.series.getQ3Field();case oi.SERIES_FIELD:return this.series.getSeriesField()}return null},this.getContentValue=t=>e=>{if(this.isOutlierMark(e))return t===oi.OUTLIER?e[Hy]:t===oi.SERIES_FIELD?e[this.series.getSeriesField()]:null;switch(t){case oi.MIN:return e[this.series.getMinField()];case oi.MAX:return e[this.series.getMaxField()];case oi.MEDIAN:return e[this.series.getMedianField()];case oi.Q1:return e[this.series.getQ1Field()];case oi.Q3:return e[this.series.getQ3Field()];case oi.SERIES_FIELD:return e[this.series.getSeriesField()]}return null},this.shapeColorCallback=t=>this.series.getShaftShape()==="line"?this.series.getMarkInName("boxPlot").getAttribute("stroke",t):this.series.getMarkInName("boxPlot").getAttribute("fill",t),this.getOutlierFillColor=t=>{var e;const i=this.series.getOutliersStyle();return(e=i==null?void 0:i.fill)!==null&&e!==void 0?e:this.series.getMarkInName("outlier").getAttribute("fill",t)},this.isOutlierMark=t=>z(t[Hy])}getDefaultTooltipPattern(t){return{visible:!0,activeType:t,title:{key:void 0,value:this.dimensionTooltipTitleCallback,hasShape:!1},content:[{key:this.getContentKey(oi.OUTLIER),value:this.getContentValue(oi.OUTLIER),hasShape:!0,shapeType:this.shapeTypeCallback,shapeColor:this.getOutlierFillColor,shapeStroke:this.getOutlierFillColor,shapeHollow:!1},{key:this.getContentKey(oi.MAX),value:this.getContentValue(oi.MAX),hasShape:!0,shapeType:this.shapeTypeCallback,shapeColor:this.shapeColorCallback,shapeStroke:this.shapeStrokeCallback,shapeHollow:!1},{key:this.getContentKey(oi.Q3),value:this.getContentValue(oi.Q3),hasShape:!0,shapeType:this.shapeTypeCallback,shapeColor:this.shapeColorCallback,shapeStroke:this.shapeStrokeCallback,shapeHollow:!1},{key:this.getContentKey(oi.MEDIAN),value:this.getContentValue(oi.MEDIAN),hasShape:!0,shapeType:this.shapeTypeCallback,shapeColor:this.shapeColorCallback,shapeStroke:this.shapeStrokeCallback,shapeHollow:!1},{key:this.getContentKey(oi.Q1),value:this.getContentValue(oi.Q1),hasShape:!0,shapeType:this.shapeTypeCallback,shapeColor:this.shapeColorCallback,shapeStroke:this.shapeStrokeCallback,shapeHollow:!1},{key:this.getContentKey(oi.MIN),value:this.getContentValue(oi.MIN),hasShape:!0,shapeType:this.shapeTypeCallback,shapeColor:this.shapeColorCallback,shapeStroke:this.shapeStrokeCallback,shapeHollow:!1},{key:this.getContentKey(oi.SERIES_FIELD),value:this.getContentValue(oi.SERIES_FIELD),hasShape:!0,shapeType:this.shapeTypeCallback,shapeColor:this.shapeColorCallback,shapeStroke:this.shapeStrokeCallback,shapeHollow:!1}]}}}class Vy extends Sr{constructor(){super(...arguments),this.type=Vy.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:2,boxWidth:30,shaftWidth:20,shaftShape:"line"})}_initProduct(t){const e=this.getStyle("shaftShape"),i=this.getVGrammarView(),r=this.getProductId(),s=e==="bar"?"barBoxplot":"boxplot",a=this.getStyle("direction");this._product=i.glyph(s,t??i.rootMark).id(r).configureGlyph({direction:a}),this._compiledProductId=r}}Vy.type="boxPlot";const lVt=()=>{Z.registerMark(Vy.type,Vy),qjt(),t8t()};class mp extends so{constructor(){super(...arguments),this.type=at.boxPlot}getMinField(){return this._minField}getMaxField(){return this._maxField}getQ1Field(){return this._q1Field}getMedianField(){return this._medianField}getQ3Field(){return this._q3Field}getOutliersField(){return this._outliersField}getShaftShape(){return this._shaftShape}getBoxFillColor(){return this._boxFillColor}getStrokeColor(){return this._strokeColor}getOutliersStyle(){return this._outliersStyle}setAttrFromSpec(){var t,e,i,r,s;super.setAttrFromSpec();const a=(e=(t=this._spec.boxPlot)===null||t===void 0?void 0:t.style)!==null&&e!==void 0?e:{};this._minField=this._spec.minField,this._maxField=this._spec.maxField,this._q1Field=this._spec.q1Field,this._medianField=this._spec.medianField,this._q3Field=this._spec.q3Field,this._outliersField=this._spec.outliersField,this._lineWidth=(i=a.lineWidth)!==null&&i!==void 0?i:2,this._boxWidth=a.boxWidth,this._shaftShape=(r=a.shaftShape)!==null&&r!==void 0?r:"line",this._shaftWidth=a.shaftWidth,this._boxFillColor=a.boxFill,this._strokeColor=a.stroke,this._shaftFillOpacity=this._shaftShape==="bar"?(s=a.shaftFillOpacity)!==null&&s!==void 0?s:.5:void 0,this._outliersStyle=this._spec.outliersStyle}initMark(){const t={progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold};this._boxPlotMark=this._createMark(mp.mark.boxPlot,{isSeriesMark:!0,progressive:t}),this._outlierMark=this._createMark(mp.mark.outlier,{progressive:t,key:$r,dataView:this._outlierDataView.getDataView(),dataProductId:this._outlierDataView.getProductId()})}initMarkStyle(){var t,e,i,r,s;const a=this._boxPlotMark;if(a){const l={direction:this._direction,lineWidth:this._lineWidth,shaftShape:this._shaftShape,fill:(t=this._boxFillColor)!==null&&t!==void 0?t:this._shaftShape==="line"?"#FFF":this.getColorAttribute(),minMaxFillOpacity:this._shaftFillOpacity,stroke:(e=this._strokeColor)!==null&&e!==void 0?e:this._shaftShape==="line"?this.getColorAttribute():"#000"},u=this._direction==="horizontal"?Object.assign(Object.assign({y:this.dataToPositionY.bind(this)},l),{boxHeight:()=>{var h;return(h=this._boxWidth)!==null&&h!==void 0?h:this._getMarkWidth()},ruleHeight:()=>{var h;return(h=this._shaftWidth)!==null&&h!==void 0?h:this._getMarkWidth()},q1q3Height:()=>{var h;return(h=this._boxWidth)!==null&&h!==void 0?h:this._getMarkWidth()},minMaxHeight:()=>{var h;return(h=this._shaftWidth)!==null&&h!==void 0?h:this._getMarkWidth()}}):Object.assign(Object.assign({x:this.dataToPositionX.bind(this)},l),{boxWidth:()=>{var h;return(h=this._boxWidth)!==null&&h!==void 0?h:this._getMarkWidth()},ruleWidth:()=>{var h;return(h=this._shaftWidth)!==null&&h!==void 0?h:this._getMarkWidth()},q1q3Width:()=>{var h;return(h=this._boxWidth)!==null&&h!==void 0?h:this._getMarkWidth()},minMaxWidth:()=>{var h;return(h=this._shaftWidth)!==null&&h!==void 0?h:this._getMarkWidth()}});this.setMarkStyle(a,u,Bt.STATE_NORMAL,kt.Series)}const o=this._outlierMark;o&&this.setMarkStyle(o,{fill:(r=(i=this._outliersStyle)===null||i===void 0?void 0:i.fill)!==null&&r!==void 0?r:this.getColorAttribute(),size:Mt((s=this._outliersStyle)===null||s===void 0?void 0:s.size)?this._outliersStyle.size:10,symbolType:"circle"},Bt.STATE_NORMAL,kt.Series)}initBoxPlotMarkStyle(){var t,e;const i=this._boxPlotMark,r=this._direction==="horizontal"?this._xAxisHelper:this._yAxisHelper;if(i&&r){const{dataToPosition:a}=r,o=(t=r==null?void 0:r.getScale)===null||t===void 0?void 0:t.call(r,0);this.setMarkStyle(i,{min:l=>Ue(a(this.getDatumPositionValues(l,this._minField),{bandPosition:this._bandPosition}),o),q1:l=>Ue(a(this.getDatumPositionValues(l,this._q1Field),{bandPosition:this._bandPosition}),o),median:l=>Ue(a(this.getDatumPositionValues(l,this._medianField),{bandPosition:this._bandPosition}),o),q3:l=>Ue(a(this.getDatumPositionValues(l,this._q3Field),{bandPosition:this._bandPosition}),o),max:l=>Ue(a(this.getDatumPositionValues(l,this._maxField),{bandPosition:this._bandPosition}),o)},Bt.STATE_NORMAL,kt.Series)}const s=this._outlierMark;if(s&&r){const{dataToPosition:a}=r,o=(e=r==null?void 0:r.getScale)===null||e===void 0?void 0:e.call(r,0),l=this._direction==="horizontal"?{y:this.dataToPositionY.bind(this),x:u=>Ue(a(this.getDatumPositionValues(u,Hy),{bandPosition:this._bandPosition}),o)}:{x:this.dataToPositionX.bind(this),y:u=>Ue(a(this.getDatumPositionValues(u,Hy),{bandPosition:this._bandPosition}),o)};this.setMarkStyle(s,l,Bt.STATE_NORMAL,kt.Series)}}initData(){if(super.initData(),!this._data)return;ie(this._dataSet,"foldOutlierData",aVt),ie(this._dataSet,"addVChartProperty",Nm);const t=new Le(this._dataSet,{name:`${this.type}_outlier_${this.id}_data`});t.parse([this.getViewData()],{type:"dataview"}),t.name=`${Kt}_series_${this.id}_outlierData`,t.transform({type:"foldOutlierData",options:{dimensionField:this._direction==="horizontal"?this._fieldY:this._fieldX,outliersField:this._outliersField}}),t.transform({type:"addVChartProperty",options:{beforeCall:rm.bind(this),call:fp}},!1),this._outlierDataView=new kl(this._option,t)}init(t){super.init(t),this.initBoxPlotMarkStyle()}_getMarkWidth(){if(this._autoBoxWidth)return this._autoBoxWidth;const t=this._direction==="horizontal"?this._yAxisHelper:this._xAxisHelper,e=this._direction==="horizontal"?this._fieldY:this._fieldX,i=t.getBandwidth(e.length-1)/e.length;return this._autoBoxWidth=i,this._autoBoxWidth}onLayoutEnd(t){super.onLayoutEnd(t),this._autoBoxWidth=null}_initAnimationSpec(t={}){const e=gt({},t);return["appear","enter","update","exit","disappear"].forEach(i=>{e[i]&&e[i].type==="scaleIn"?e[i].type=this._shaftShape==="line"?"boxplotScaleIn":"barBoxplotScaleIn":e[i]&&e[i].type==="scaleOut"&&(e[i].type=this._shaftShape==="line"?"boxplotScaleOut":"barBoxplotScaleOut")}),e}initAnimation(){var t,e,i,r,s,a,o;const l=Lc(this);if(this._boxPlotMark){const u=this._initAnimationSpec((t=Z.getAnimationInKey("scaleInOut"))===null||t===void 0?void 0:t()),h=this._initAnimationSpec(Ee("boxPlot",this._spec,this._markAttributeContext));this._boxPlotMark.setAnimationConfig(Ae(u,h,l))}if(this._outlierMark){const u={appear:(e=this._spec.animationAppear)===null||e===void 0?void 0:e.symbol,disappear:(i=this._spec.animationDisappear)===null||i===void 0?void 0:i.symbol,enter:(r=this._spec.animationEnter)===null||r===void 0?void 0:r.symbol,exit:(s=this._spec.animationExit)===null||s===void 0?void 0:s.symbol,update:(a=this._spec.animationUpdate)===null||a===void 0?void 0:a.symbol};this._outlierMark.setAnimationConfig(Ae((o=Z.getAnimationInKey("scaleInOut"))===null||o===void 0?void 0:o(),u,l))}}initTooltip(){this._tooltipHelper=new oVt(this),this._boxPlotMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._boxPlotMark),this._outlierMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._outlierMark)}getStatisticFields(){const t=super.getStatisticFields(),e=t.find(i=>i.key===this._outliersField);return e&&(e.operations=["array-min","array-max"]),t}onEvaluateEnd(t){super.onEvaluateEnd(t),this._outlierDataView.updateData()}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._boxPlotMark]}}mp.type=at.boxPlot,mp.mark=Pet;const uVt=()=>{lVt(),Uu(),gT(),$s(),Ws(),Z.registerSeries(mp.type,mp)};class am extends Sr{getTextType(){return this._textType}constructor(t,e){super(t,e),this.type=am.type,this._textType="text"}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{angle:0,textAlign:"center",lineWidth:0,textConfig:[]})}initStyleWithSpec(t,e){super.initStyleWithSpec(t,e),t.textType&&(this._textType=t.textType)}compileEncode(){super.compileEncode(),this._textType==="rich"&&this._product.encodeState("group",{textType:this._textType})}}am.type="text";const Gs=()=>{Z.registerMark(am.type,am),Gtt(),Gjt()};function eG(n,t,e,i,r,s,a,o,l){n.setMarkStyle(t,{textAlign:u=>{if(l()==="vertical")return"center";const h=r(u),c=s(u);if(e==="middle")return"center";if(h>=c){if(e==="start")return"left";if(e==="end")return"right";if(e==="outside")return"left"}else{if(e==="start")return"right";if(e==="end")return"left";if(e==="outside")return"right"}return"center"},textBaseline:u=>{if(l()==="horizontal")return"middle";const h=a(u),c=o(u);if(e==="middle")return"middle";if(c>=h){if(e==="start")return"bottom";if(e==="end")return"top";if(e==="outside")return"bottom"}else{if(e==="start")return"top";if(e==="end")return"bottom";if(e==="outside")return"top"}return"middle"}}),n.setMarkStyle(t,{x:u=>{const h=l(),c=r(u),d=s(u);if(h==="vertical"||e==="middle")return(c+d)/2;if(c>=d){if(e==="start")return d+i;if(e==="end")return c-i;if(e==="outside")return c+i}else{if(e==="start")return d-i;if(e==="end")return c+i;if(e==="outside")return c-i}return(c+d)/2},y:u=>{const h=l(),c=a(u),d=o(u);if(h==="horizontal"||e==="middle")return(c+d)/2;if(c>=d){if(e==="start")return d+i;if(e==="end")return c-i;if(e==="outside")return c+i}else{if(e==="start")return d-i;if(e==="end")return c+i;if(e==="outside")return c-i}return(c+d)/2}},"normal",kt.Series)}class hVt extends _s{getDefaultTooltipPattern(t){return{visible:!0,activeType:t,title:{key:void 0,value:this.dimensionTooltipTitleCallback,hasShape:!1},content:[{key:this.markTooltipKeyCallback,value:e=>this.series.getSpec().direction==="horizontal"?e[this.series.getSpec().xField[0]]+"-"+e[this.series.getSpec().xField[1]]:e[this.series.getSpec().yField[0]]+"-"+e[this.series.getSpec().yField[1]],hasShape:!0,shapeType:this.shapeTypeCallback,shapeColor:this.shapeColorCallback,shapeStroke:this.shapeStrokeCallback,shapeHollow:!1}]}}}const mnt=n=>({type:"growCenterIn",options:{direction:n.direction==="horizontal"?"x":"y"}}),cVt={type:"fadeIn"},iG=n=>({type:"growCenterOut",options:{direction:n.direction==="horizontal"?"x":"y"}});function dVt(n,t){return t==="fadeIn"?cVt:mnt(n)}const pVt=()=>{Z.registerAnimation("rangeColumn",(n,t)=>({appear:dVt(n,t),enter:mnt(n),exit:iG(n),disappear:iG(n)}))};class vnt extends AT{constructor(){super(...arguments),this._supportStack=!1}_transformLabelSpec(t){var e;((e=t.label)===null||e===void 0?void 0:e.position)!=="bothEnd"&&this._addMarkLabelSpec(t,"bar")}}class Lo extends zo{constructor(){super(...arguments),this.type=at.rangeColumn,this._barMarkType="rect",this._barName=at.bar,this.transformerConstructor=vnt}initMark(){var t,e,i,r,s,a,o,l,u,h;this._initBarBackgroundMark();const c=(t=this._spec.label)===null||t===void 0?void 0:t.position;this._barMark=this._createMark(Lo.mark.bar,{morph:Gu(this._spec,Lo.mark.bar.name),defaultMorphElementKey:this.getDimensionField()[0],groupKey:this._seriesField,isSeriesMark:!0,customShape:(e=this._spec.bar)===null||e===void 0?void 0:e.customShape,stateSort:(i=this._spec.bar)===null||i===void 0?void 0:i.stateSort}),((r=this._spec.label)===null||r===void 0?void 0:r.visible)!==!1&&c==="bothEnd"&&(((a=(s=this._spec.label)===null||s===void 0?void 0:s.minLabel)===null||a===void 0?void 0:a.visible)!==!1&&(this._minLabelMark=this._createMark(Lo.mark.minLabel,{markSpec:(o=this._spec.label)===null||o===void 0?void 0:o.minLabel})),((u=(l=this._spec.label)===null||l===void 0?void 0:l.maxLabel)===null||u===void 0?void 0:u.visible)!==!1&&(this._maxLabelMark=this._createMark(Lo.mark.maxLabel,{markSpec:(h=this._spec.label)===null||h===void 0?void 0:h.maxLabel})))}initMarkStyle(){var t,e,i,r,s,a,o,l,u,h;super.initMarkStyle();const c=this._minLabelMark,d=(t=this._spec.label)===null||t===void 0?void 0:t.minLabel;if(c){this.setMarkStyle(c,{fill:(i=(e=d==null?void 0:d.style)===null||e===void 0?void 0:e.fill)!==null&&i!==void 0?i:this.getColorAttribute(),text:v=>{const y=this._spec.direction==="horizontal"?v[this._spec.xField[0]]:v[this._spec.yField[0]];return d!=null&&d.formatMethod?d.formatMethod(y,v):y}});const g=(r=d==null?void 0:d.position)!==null&&r!==void 0?r:"end",_=(s=d==null?void 0:d.offset)!==null&&s!==void 0?s:this._direction==="vertical"?-20:-25;eG(this,c,g,_,v=>this._barMark.getAttribute("x",v),v=>this._direction==="vertical"?this._barMark.getAttribute("x",v)+this._barMark.getAttribute("width",v):this._barMark.getAttribute("x1",v),v=>this._barMark.getAttribute("y",v),v=>this._direction==="vertical"?this._barMark.getAttribute("y1",v):this._barMark.getAttribute("y",v)+this._barMark.getAttribute("height",v),()=>this._direction)}const p=this._maxLabelMark,f=(a=this._spec.label)===null||a===void 0?void 0:a.maxLabel;if(p){this.setMarkStyle(p,{fill:(l=(o=f==null?void 0:f.style)===null||o===void 0?void 0:o.fill)!==null&&l!==void 0?l:this.getColorAttribute(),text:v=>{const y=this._spec.direction==="horizontal"?v[this._spec.xField[1]]:v[this._spec.yField[1]];return f!=null&&f.formatMethod?f.formatMethod(y,v):y}});const g=(u=f==null?void 0:f.position)!==null&&u!==void 0?u:"start",_=(h=f==null?void 0:f.offset)!==null&&h!==void 0?h:this._direction==="vertical"?-20:-25;eG(this,p,g,_,v=>this._barMark.getAttribute("x",v),v=>this._direction==="vertical"?this._barMark.getAttribute("x",v)+this._barMark.getAttribute("width",v):this._barMark.getAttribute("x1",v),v=>this._barMark.getAttribute("y",v),v=>this._direction==="vertical"?this._barMark.getAttribute("y1",v):this._barMark.getAttribute("y",v)+this._barMark.getAttribute("height",v),()=>this._direction)}}initLabelMarkStyle(t){t&&(this.setMarkStyle(t,{text:e=>{let i,r;return this._spec.direction==="horizontal"?(i=e[this._spec.xField[0]],r=e[this._spec.xField[1]]):(i=e[this._spec.yField[0]],r=e[this._spec.yField[1]]),i+"-"+r},z:this._fieldZ?this.dataToPositionZ.bind(this):null}),this._labelMark=t)}_dataToPosX(t){return this._xAxisHelper.dataToPosition(this.getDatumPositionValues(t,this._spec.xField[0]),{bandPosition:this._bandPosition})}_dataToPosX1(t){return this._xAxisHelper.dataToPosition(this.getDatumPositionValues(t,this._spec.xField[1]),{bandPosition:this._bandPosition})}_dataToPosY(t){return this._yAxisHelper.dataToPosition(this.getDatumPositionValues(t,this._spec.yField[0]),{bandPosition:this._bandPosition})}_dataToPosY1(t){return this._yAxisHelper.dataToPosition(this.getDatumPositionValues(t,this._spec.yField[1]),{bandPosition:this._bandPosition})}initAnimation(){var t,e,i,r,s;const a=Lc(this),o=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset;this._barMark.setAnimationConfig(Ae((i=Z.getAnimationInKey("rangeColumn"))===null||i===void 0?void 0:i({direction:this.direction},o),Ee("bar",this._spec,this._markAttributeContext),a)),this._minLabelMark&&this._minLabelMark.setAnimationConfig(Ae((r=Z.getAnimationInKey("fadeInOut"))===null||r===void 0?void 0:r(),Ee("label",this._spec,this._markAttributeContext),a)),this._maxLabelMark&&this._maxLabelMark.setAnimationConfig(Ae((s=Z.getAnimationInKey("fadeInOut"))===null||s===void 0?void 0:s(),Ee("label",this._spec,this._markAttributeContext),a))}initTooltip(){this._tooltipHelper=new hVt(this),this._barMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._barMark),this._minLabelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._minLabelMark),this._maxLabelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._maxLabelMark),this._labelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._labelMark)}}Lo.type=at.rangeColumn,Lo.mark=Det,Lo.transformerConstructor=vnt;const fVt=()=>{Yu(),Gs(),pVt(),$u(),$s(),Ws(),Z.registerSeries(Lo.type,Lo)};class PC extends Lo{constructor(){super(...arguments),this.type=at.rangeColumn3d,this._barMarkType="rect3d",this._barName=at.bar3d}}PC.type=at.rangeColumn3d,PC.mark=Bet;const gVt=()=>{n5(),$s(),Ws(),Z.registerSeries(PC.type,PC)};class mVt extends _s{getDefaultTooltipPattern(t,e){switch(t){case"mark":case"group":return{visible:!0,activeType:t,title:{key:void 0,value:this.dimensionTooltipTitleCallback,hasShape:!1},content:[{key:this.markTooltipKeyCallback,value:this.markTooltipValueCallback,hasShape:!0,shapeType:this.shapeTypeCallback,shapeColor:this.shapeColorCallback,shapeStroke:this.shapeStrokeCallback,shapeHollow:!1}]};case"dimension":if(e){const i={key:void 0,value:this._getDimensionData,hasShape:!1},r=[];return e.forEach(({data:s})=>s.forEach(({series:a})=>{a.type==="rangeArea"&&r.push({seriesId:a.id,key:this.markTooltipKeyCallback,value:o=>this.series.getSpec().direction==="horizontal"?o[this.series.getSpec().xField[0]]+"-"+o[this.series.getSpec().xField[1]]:o[this.series.getSpec().yField[0]]+"-"+o[this.series.getSpec().yField[1]],hasShape:!0,shapeType:this.shapeTypeCallback,shapeColor:this.shapeColorCallback,shapeStroke:this.shapeStrokeCallback,shapeHollow:!1})})),{visible:!0,activeType:t,title:i,content:r}}}return null}}class om extends fu{constructor(){super(...arguments),this.type=at.rangeArea}initMark(){var t;const{customShape:e,stateSort:i}=(t=this._spec.area)!==null&&t!==void 0?t:{};this._areaMark=this._createMark(om.mark.area,{defaultMorphElementKey:this.getDimensionField()[0],groupKey:this._seriesField,isSeriesMark:!0,customShape:e,stateSort:i})}initMarkStyle(){this.initAreaMarkStyle()}initAreaMarkStyle(){const t=this._areaMark;t&&(super.initAreaMarkStyle(),this._direction==="horizontal"?this.setMarkStyle(this._areaMark,{x1:e=>{if(!this._xAxisHelper)return Number.NaN;const{dataToPosition:i}=this._xAxisHelper;return i(this.getDatumPositionValues(e,this._spec.xField[1]),{bandPosition:this._bandPosition})}},"normal",kt.Series):this.setMarkStyle(this._areaMark,{y1:e=>{if(!this._yAxisHelper)return Number.NaN;const{dataToPosition:i}=this._yAxisHelper;return i(this.getDatumPositionValues(e,this._spec.yField[1]),{bandPosition:this._bandPosition})}},"normal",kt.Series),this.setMarkStyle(t,{stroke:!1},"normal",kt.Series))}initTooltip(){this._tooltipHelper=new mVt(this),this._areaMark&&this._tooltipHelper.activeTriggerSet.dimension.add(this._areaMark)}_isFieldAllValid(){const t=this.getViewDataStatistics(),e=this.fieldY;return!!(t&&t.latestData&&e.length)&&e.every(i=>t.latestData[i]&&t.latestData[i].allValid)}}om.type=at.rangeArea,om.mark=zet;const vVt=()=>{ST(),$s(),Ws(),Z.registerSeries(om.type,om)};class B1 extends gp{constructor(){super(...arguments),this.coordinate="polar",this._outerRadius=Ay,this._innerRadius=0,this._angleField=[],this._radiusField=[],this._sortDataByAxis=!1}get outerRadius(){return this._outerRadius}get innerRadius(){return this._innerRadius}getAngleField(){return this._angleField}setAngleField(t){return this._angleField=z(t)?ot(t):[],this._angleField}getRadiusField(){return this._radiusField}setRadiusField(t){return this._radiusField=z(t)?ot(t):[],this._radiusField}get innerRadiusField(){return this._innerRadiusField}setInnerRadiusField(t){return this._innerRadiusField=ot(t),this._innerRadiusField}get radiusScale(){return this._radiusScale}setRadiusScale(t){return this._radiusScale=t,t}get angleScale(){return this._angleScale}setAngleScale(t){return this._angleScale=t,t}get angleAxisHelper(){return this._angleAxisHelper}set angleAxisHelper(t){this._angleAxisHelper=t,this.onAngleAxisHelperUpdate()}get radiusAxisHelper(){return this._radiusAxisHelper}set radiusAxisHelper(t){this._radiusAxisHelper=t,this.onRadiusAxisHelperUpdate()}get sortDataByAxis(){return this._sortDataByAxis}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToPosition=this.valueToPosition.bind(this),this._markAttributeContext.getCenter=()=>this.angleAxisHelper.center(),this._markAttributeContext.getLayoutRadius=()=>this._computeLayoutRadius()}valueToPosition(t,e){if(F(t)||F(e)||!this.angleAxisHelper||!this.radiusAxisHelper)return{x:Number.NaN,y:Number.NaN};const i=this.angleAxisHelper.dataToPosition(ot(t)),r=this.radiusAxisHelper.dataToPosition(ot(e));return this.angleAxisHelper.coordToPoint({angle:i,radius:r})}dataToPosition(t,e){return t&&this.angleAxisHelper&&this.radiusAxisHelper?e&&!this.isDatumInViewData(t)?null:this.valueToPosition(this.getDatumPositionValues(t,this._angleField),this.getDatumPositionValues(t,this._radiusField)):null}dataToPositionX(t){var e;return(e=this.dataToPosition(t))===null||e===void 0?void 0:e.x}dataToPositionY(t){var e;return(e=this.dataToPosition(t))===null||e===void 0?void 0:e.y}dataToPositionZ(t){return 0}positionToData(t){}radiusToData(t){}angleToData(t){}getStatisticFields(){var t,e;const i=[];return!((t=this.radiusAxisHelper)===null||t===void 0)&&t.getScale&&this._radiusField.forEach(r=>{const s={key:r,operations:[]};ti(this.radiusAxisHelper.getScale(0).type)?s.operations=["max","min"]:s.operations=["values"],i.push(s)}),!((e=this.angleAxisHelper)===null||e===void 0)&&e.getScale&&this._angleField.forEach(r=>{const s={key:r,operations:[]};ti(this.angleAxisHelper.getScale(0).type)?s.operations=["max","min"]:s.operations=["values"],i.push(s)}),i}setAttrFromSpec(){super.setAttrFromSpec(),z(this._spec.outerRadius)&&(this._outerRadius=this._spec.outerRadius),z(this._spec.radius)&&(this._outerRadius=this._spec.radius),z(this._spec.innerRadius)&&(this._innerRadius=this._spec.innerRadius),z(this._spec.sortDataByAxis)&&(this._sortDataByAxis=this._spec.sortDataByAxis===!0)}onRadiusAxisHelperUpdate(){this.onMarkPositionUpdate()}onAngleAxisHelperUpdate(){this.onMarkPositionUpdate()}afterInitMark(){super.afterInitMark()}_computeLayoutRadius(){const t=this._angleAxisHelper||this._radiusAxisHelper;if(t)return t.layoutRadius();const{width:e,height:i}=this._region.getLayoutRect();return Math.min(e/2,i/2)}initEvent(){super.initEvent(),this.sortDataByAxis&&this.event.on(Wt.scaleDomainUpdate,{filter:t=>{var e;return t.model.id===((e=this._angleAxisHelper)===null||e===void 0?void 0:e.getAxisId())}},()=>{this._sortDataInAxisDomain()})}_sortDataInAxisDomain(){var t,e;!((e=(t=this.getViewData())===null||t===void 0?void 0:t.latestData)===null||e===void 0)&&e.length&&$it(this.angleAxisHelper,this._angleField[0],this.getViewData().latestData)}getInvalidCheckFields(){const t=[];return this.angleAxisHelper.isContinuous&&this._angleField.forEach(e=>{t.push(e)}),this.radiusAxisHelper.isContinuous&&this._radiusField.forEach(e=>{t.push(e)}),t}}function _Vt(n){return Zg(n)?Number.parseFloat(n):0}const yVt=(n,t)=>{const e=n.map(C=>Object.assign({},C));if(!e||e.length===0)return e;const{angleField:i,startAngle:r,endAngle:s,minAngle:a,asStartAngle:o,asEndAngle:l,asMiddleAngle:u,asRadian:h,asRatio:c,asQuadrant:d,asK:p}=t,f=(C,k,M)=>{C[o]=k,C[l]=k+M,C[u]=k+M/2,C[h]=M,C[d]=f5t(k+M/2)};let g=0,_=-1/0;for(let C=0;C<e.length;C++){const k=_Vt(e[C][i]);g+=k,_=Math.max(k,_),e[C][LE]=k}const v=e.map(C=>Number(C[i])),y=s-r;let b=r,S=y,A=0;const w=x5t(v);if(e.forEach((C,k)=>{const M=C[LE],P=g?M/g:0;let E=P*y;E<a?(E=a,S-=a):A+=M;const I=b,D=b+E;C[c]=P,C[p]=_?M/_:0,C._percent_=w[k],f(C,I,E),b=D}),S<y)if(S<=.001){const C=y/e.length;e.forEach((k,M)=>{f(k,r+M*C,C)})}else{const C=S/A;b=r,e.forEach(k=>{const M=k[h]===a?a:k[LE]*C;f(k,b,M),b+=M})}return g!==0&&(e[e.length-1][l]=s),e};function CT(n,t,e){return(i,r,s)=>t?n.growField==="radius"?{overall:0}:{overall:n.growFrom(i,r,e)}:{overall:!1}}const nG=n=>({type:n.growField==="radius"?"growRadiusIn":"growAngleIn",options:CT(n,!0,bn.appear)}),bVt={type:"fadeIn"},_nt=n=>({type:n.growField==="radius"?"growRadiusIn":"growAngleIn",easing:"linear",options:CT(n,!0,bn.enter)}),ynt=n=>({type:n.growField==="radius"?"growRadiusOut":"growAngleOut",easing:"linear",options:CT(n,!0,bn.exit)}),bnt=n=>({type:n.growField==="radius"?"growRadiusOut":"growAngleOut",options:CT(n,!0,bn.exit)});function xnt(n,t){if(t===!1)return{};switch(t){case"fadeIn":return bVt;case"growRadius":return nG(Object.assign(Object.assign({},n),{growField:"radius"}));default:return nG(Object.assign(Object.assign({},n),{growField:"angle"}))}}const xVt=()=>{Z.registerAnimation("pie",(n,t)=>({appear:xnt(n,t),enter:_nt(n),exit:ynt(n),disappear:bnt(n)}))},SVt=()=>{Z.registerAnimation("pie3d",(n,t)=>({appear:xnt(n,t),enter:_nt(n),exit:ynt(n),disappear:bnt(n)}))};function AVt(n,t){var e,i,r,s;const a=(i=(e=t.options)===null||e===void 0?void 0:e.distance)!==null&&i!==void 0?i:10,o=st(t.duration)?t.duration/2:1e3,l=(r=t.options.easing)!==null&&r!==void 0?r:"cubicOut";return{oneByOne:t.oneByOne,loop:(s=t.loop)!==null&&s!==void 0&&s,timeSlices:[{duration:o,effects:{easing:l,channel:{x:{from:u=>n.getAttribute("x",u),to:u=>n.getAttribute("x",u)+un({x:0,y:0},a,u[du]).x},y:{from:u=>n.getAttribute("y",u),to:u=>n.getAttribute("y",u)+un({x:0,y:0},a,u[du]).y}}}},{duration:o,effects:{easing:l,channel:{x:{to:u=>n.getAttribute("x",u),from:u=>n.getAttribute("x",u)+un({x:0,y:0},a,u[du]).x},y:{to:u=>n.getAttribute("y",u),from:u=>n.getAttribute("y",u)+un({x:0,y:0},a,u[du]).y}}}}]}}class Snt extends Sr{constructor(t,e){super(t,e),this.type=lm.type,this._unCompileChannel={centerOffset:!0,radiusOffset:!0},this.computeOuterRadius=(i,r,s="normal",a,o)=>{var l;return o+((l=this.getAttribute("radiusOffset",r,s,a))!==null&&l!==void 0?l:0)},this.computeCenter=(i,r,s="normal",a,o)=>un({x:0,y:0},this.getAttribute("centerOffset",r,s,a),r[du])[i]+o,this._computeExChannel.x=this.computeCenter,this._computeExChannel.y=this.computeCenter,this._computeExChannel.outerRadius=this.computeOuterRadius,this._extensionChannel.centerOffset=["x","y"],this._extensionChannel.radiusOffset=["outerRadius"]}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{startAngle:0,endAngle:0,outerRadius:0,innerRadius:0,cornerRadius:0,lineWidth:0,innerPadding:0,outerPadding:0})}}class lm extends Snt{constructor(){super(...arguments),this.type=lm.type}}lm.type="arc";const Pp=()=>{Bjt(),kit(),Z.registerMark(lm.type,lm)};class u5 extends ys{_transformLabelSpec(t){this._addMarkLabelSpec(t,"pie")}_mergeThemeToSpec(t,e){const i=this._theme;let r=t;if(this._shouldMergeThemeToSpec()){const s=this._getDefaultSpecFromChart(e);r=Ut({},this._theme,s,t);const a=(o,l)=>Ut({},o==="inside"?this._theme.innerLabel:this._theme.outerLabel,l);ut(r.label)?r.label=r.label.map(o=>a(o.position,o)):r.label=a(r.label.position,r.label)}return{spec:r,theme:i}}_getDefaultSpecFromChart(t){var e;const i=(e=super._getDefaultSpecFromChart(t))!==null&&e!==void 0?e:{},{centerX:r,centerY:s}=t;return z(r)&&(i.centerX=r),z(s)&&(i.centerY=s),Object.keys(i).length>0?i:void 0}}class um extends B1{constructor(){super(...arguments),this.transformerConstructor=u5,this._pieMarkName="pie",this._pieMarkType="arc",this._startAngle=eT,this._endAngle=kF,this._pieMark=null,this._labelMark=null,this._labelLineMark=null,this.dataToCentralPosition=t=>{const e=t[du];if(F(e))return null;const i=this.computeDatumRadius(t),r=this.computeDatumInnerRadius(t),s=this.computeCenter(t);return un(s,(i+r)/2,e)}}getCenter(){var t,e,i,r;const{width:s,height:a}=this._region.getLayoutRect();return{x:(e=(t=this._spec)===null||t===void 0?void 0:t.centerX)!==null&&e!==void 0?e:s/2,y:(r=(i=this._spec)===null||i===void 0?void 0:i.centerY)!==null&&r!==void 0?r:a/2}}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.getCenter=()=>({x:()=>this.getCenter().x,y:()=>this.getCenter().y}),this._markAttributeContext.startAngleScale=t=>this.startAngleScale(t),this._markAttributeContext.endAngleScale=t=>this.endAngleScale(t)}setAttrFromSpec(){var t,e;super.setAttrFromSpec(),this._centerOffset=(t=this._spec.centerOffset)!==null&&t!==void 0?t:0,this._cornerRadius=(e=this._spec.cornerRadius)!==null&&e!==void 0?e:0;const i=g5t(z(this._spec.startAngle)?qe(this._spec.startAngle):this._startAngle,z(this._spec.endAngle)?qe(this._spec.endAngle):this._endAngle);this._startAngle=i.startAngle,this._endAngle=i.endAngle,this._padAngle=z(this._spec.padAngle)?qe(this._spec.padAngle):0,this.setAngleField(this._spec.valueField||this._spec.angleField),this._spec.categoryField&&this.setSeriesField(this._spec.categoryField),this._radiusField=[],this._specAngleField=this._angleField.slice(),this._specRadiusField=[]}initData(){super.initData();const t=this.getViewData();if(!t)return;ie(this._dataSet,"pie",yVt),t.transform({type:"pie",options:{angleField:this._angleField[0],startAngle:this._startAngle,endAngle:this._endAngle,minAngle:z(this._spec.minAngle)?qe(this._spec.minAngle):0,asStartAngle:gW,asEndAngle:mW,asRatio:A5t,asMiddleAngle:du,asRadian:k5t,asQuadrant:C5t,asK:w5t}},!1);const e=new Le(this._dataSet,{name:`${Kt}_series_${this.id}_viewDataLabel`});e.parse([this.getViewData()],{type:"dataview"}),this._viewDataLabel=new kl(this._option,e)}initMark(){var t,e;this._pieMark=this._createMark(Object.assign(Object.assign({},um.mark.pie),{name:this._pieMarkName,type:this._pieMarkType}),{morph:Gu(this._spec,this._pieMarkName),defaultMorphElementKey:this._seriesField,key:Ka,groupKey:this._seriesField,skipBeforeLayouted:!0,isSeriesMark:!0,customShape:(t=this._spec.pie)===null||t===void 0?void 0:t.customShape,stateSort:(e=this._spec.pie)===null||e===void 0?void 0:e.stateSort})}startAngleScale(t){return SS(gW)(t)}endAngleScale(t){return SS(mW)(t)}initMarkStyle(){const t=this._pieMark;t&&this.setMarkStyle(t,{x:()=>this.getCenter().x,y:()=>this.getCenter().y,fill:this.getColorAttribute(),outerRadius:t$(this._outerRadius)?this._outerRadius:()=>this._computeLayoutRadius()*this._outerRadius,innerRadius:t$(this._innerRadius)?this._innerRadius:()=>this._computeLayoutRadius()*this._innerRadius,cornerRadius:()=>this._computeLayoutRadius()*this._cornerRadius,startAngle:e=>this.startAngleScale(e),endAngle:e=>this.endAngleScale(e),padAngle:this._padAngle,centerOffset:this._centerOffset},"normal",kt.Series)}initInteraction(){this._parseInteractionConfig(this._pieMark?[this._pieMark]:[])}initTooltip(){super.initTooltip(),this._pieMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._pieMark)}initMarkStyleWithSpec(t,e,i){if(super.initMarkStyleWithSpec(t,e,i),t.name===this._pieMarkName){const r=this.getSpec()[t.name];if(r)for(const s in r.state||{})this.setMarkStyle(t,this.generateRadiusStyle(r.state[s]),s,kt.User_Mark)}}initLabelMarkStyle(t){t&&this.setMarkStyle(t,{visible:SS(S5t).bind(this),text:e=>e[this.getDimensionField()[0]],fill:this.getColorAttribute(),z:this.dataToPositionZ.bind(this)})}afterInitMark(){super.afterInitMark()}initEvent(){var t;super.initEvent(),(t=this._viewDataLabel.getDataView())===null||t===void 0||t.target.addListener("change",this.viewDataLabelUpdate.bind(this))}initGroups(){}onLayoutEnd(t){this._viewDataLabel.getDataView().reRunAllTransform(),this.onMarkPositionUpdate(),super.onLayoutEnd(t)}getDimensionField(){return this._seriesField?[this._seriesField]:[]}getMeasureField(){return this._specAngleField}viewDataLabelUpdate(){this.event.emit(Wt.viewDataLabelUpdate,{model:this}),this._viewDataLabel.updateData()}generateRadiusStyle(t){if(!t)return;const e={};return t.outerRadius&&(e.outerRadius=()=>this._computeLayoutRadius()*t.outerRadius),t.innerRadius&&(e.innerRadius=()=>this._computeLayoutRadius()*t.innerRadius),t.cornerRadius&&(e.cornerRadius=()=>this._computeLayoutRadius()*t.cornerRadius),e}computeCenter(t){return{x:this._pieMark.getAttribute("x",t,"normal"),y:this._pieMark.getAttribute("y",t,"normal")}}getRadius(t="normal"){var e,i,r,s,a,o,l;const u=t==="normal"?(r=(i=this.getSpec()[((e=this._pieMark)===null||e===void 0?void 0:e.name)||"pie"])===null||i===void 0?void 0:i.style)===null||r===void 0?void 0:r.outerRadius:(l=(o=(a=this.getSpec()[((s=this._pieMark)===null||s===void 0?void 0:s.name)||"pie"])===null||a===void 0?void 0:a.state)===null||o===void 0?void 0:o[t])===null||l===void 0?void 0:l.outerRadius;return u??this._outerRadius}getInnerRadius(t="normal"){var e,i,r,s,a,o,l;const u=t==="normal"?(r=(i=this.getSpec()[((e=this._pieMark)===null||e===void 0?void 0:e.name)||"pie"])===null||i===void 0?void 0:i.style)===null||r===void 0?void 0:r.innerRadius:(l=(o=(a=this.getSpec()[((s=this._pieMark)===null||s===void 0?void 0:s.name)||"pie"])===null||a===void 0?void 0:a.state)===null||o===void 0?void 0:o[t])===null||l===void 0?void 0:l.innerRadius;return u??this._innerRadius}computeRadius(t,e){return this._computeLayoutRadius()*t*(F(e)?1:e)+this._centerOffset}computeDatumRadius(t,e){return this._computeLayoutRadius()*this.getRadius(e)+this._centerOffset}_compareSpec(t,e,i){(i=i??{data:!0}).centerX=!0,i.centerX=!0,i.centerY=!0,i.centerOffset=!0,i.radius=!0,i.innerRadius=!0,i.cornerRadius=!0,i.startAngle=!0,i.endAngle=!0,i.padAngle=!0;const{centerX:r,centerY:s,centerOffset:a,radius:o,innerRadius:l,cornerRadius:u,startAngle:h,endAngle:c,padAngle:d}=e,p=super._compareSpec(t,e,i);return(t=t??{}).centerY===s&&t.centerX===r&&t.centerOffset===a&&t.radius===o&&t.innerRadius===l&&t.cornerRadius===u&&t.startAngle===h&&t.endAngle===c&&t.padAngle===d||(p.reRender=!0,p.change=!0),p}computeDatumInnerRadius(t,e){return this._computeLayoutRadius()*this.getInnerRadius(e)+this._centerOffset}dataToPosition(t,e){const i=t[du];if(F(i)||e&&!this.isDatumInViewData(t))return null;const r=this.computeDatumRadius(t),s=this.computeCenter(t);return un(s,r,i)}initAnimation(){var t,e;const i={growFrom:(s,a,o)=>{var l;if(o===bn.appear)return this._startAngle;if(o===bn.disappear)return this._endAngle;const u=[bn.disappear,bn.exit],h=a.mark.elements,c=s,d=c==null?void 0:c[$r];if(h.find(f=>{var g;return((g=f.data[0])===null||g===void 0?void 0:g[$r])<d})===void 0)return this._startAngle;if(h.find(f=>{var g;return((g=f.data[0])===null||g===void 0?void 0:g[$r])>d})===void 0)return this._endAngle;const p=[...h].reverse().find(f=>{var g;return((g=f.data[0])===null||g===void 0?void 0:g[$r])<d});return u.includes(o)?(l=p==null?void 0:p.getNextGraphicAttributes())===null||l===void 0?void 0:l.endAngle:p==null?void 0:p.getGraphicAttribute("endAngle",!0)}},r=(t=this._spec.animationAppear)===null||t===void 0?void 0:t.preset;if(this._pieMark){const s=Ae((e=Z.getAnimationInKey("pie"))===null||e===void 0?void 0:e(i,r),Ee("pie",this._spec,this._markAttributeContext));s.normal&&s.normal.type&&(s.normal=AVt(this._pieMark,s.normal)),this._pieMark.setAnimationConfig(s)}}getDefaultShapeType(){return"circle"}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}_noAnimationDataKey(t,e){return e}getActiveMarks(){return[this._pieMark]}}um.transformerConstructor=u5,um.mark=vet;class kD extends um{constructor(){super(...arguments),this.type=at.pie}}kD.type=at.pie;const wVt=()=>{Pp(),xVt(),Z.registerSeries(kD.type,kD)};class Wy extends Snt{constructor(){super(...arguments),this.type=Wy.type,this._support3d=!0}}Wy.type="arc3d";const Ant=()=>{kit(),Fjt(),Z.registerMark(Wy.type,Wy)};class wnt extends u5{_transformLabelSpec(t){this._addMarkLabelSpec(t,"pie3d")}}class G0 extends um{constructor(){super(...arguments),this.type=at.pie3d,this._pieMarkName="pie3d",this._pieMarkType="arc3d",this.transformerConstructor=wnt}setAttrFromSpec(){var t,e;super.setAttrFromSpec(),this._angle3d=(e=(t=this._spec)===null||t===void 0?void 0:t.angle3d)!==null&&e!==void 0?e:-Math.PI/3}initMarkStyle(){super.initMarkStyle();const t=this._pieMark;t&&this.setMarkStyle(t,{beta:()=>this._angle3d},"normal",kt.Series)}initLabelMarkStyle(t,e={}){if(!t)return;super.initLabelMarkStyle(t);const i={};t.setSupport3d(!0),i.beta=this._angle3d,i.anchor3d=r=>{const{x:s,y:a}=this.getCenter();return[s,a]},i.angle=r=>{const s=r[du];return e.position==="inside"?Hg(s):0},this.setMarkStyle(t,Object.assign(Object.assign({},i),{z:100}),void 0,kt.Mark)}}G0.type=at.pie3d,G0.mark=_et,G0.transformerConstructor=wnt;const CVt=()=>{SVt(),Ant(),Z.registerSeries(G0.type,G0)},rG=n=>{const t=n.growField==="angle"?0:n.innerRadius;return n.growField==="angle"?{type:n.growField==="angle"?"growAngleIn":"growRadiusIn"}:{channel:{innerRadius:{from:t,to:(e,i)=>{var r;return(r=i.getFinalGraphicAttributes())===null||r===void 0?void 0:r.innerRadius}},outerRadius:{from:t,to:(e,i)=>{var r;return(r=i.getFinalGraphicAttributes())===null||r===void 0?void 0:r.outerRadius}}}}},kVt={type:"fadeIn"},TVt=n=>({type:n.growField==="angle"?"growAngleIn":"growRadiusIn"}),MVt=n=>({type:n.growField==="angle"?"growAngleOut":"growRadiusOut"}),PVt=n=>({type:n.growField==="angle"?"growAngleOut":"growRadiusOut"});function EVt(n,t){if(t===!1)return{};switch(t){case"fadeIn":return kVt;case"growAngle":return rG(Object.assign(Object.assign({},n),{growField:"angle"}));default:return rG(Object.assign(Object.assign({},n),{growField:"radius"}))}}const OVt=()=>{Z.registerAnimation("rose",(n,t)=>({appear:EVt(n,t),enter:TVt(n),exit:MVt(n),disappear:PVt(n)}))};class Cnt extends B1{getStackGroupFields(){return this._angleField}getStackValueField(){return ot(this._spec.valueField)[0]||ot(this._spec.radiusField)[0]}getGroupFields(){return this._angleField}setAttrFromSpec(){super.setAttrFromSpec(),this.setAngleField(this._spec.categoryField||this._spec.angleField),this.setRadiusField(this._spec.valueField||this._spec.radiusField),this._specAngleField=this._angleField.slice(),this._specRadiusField=this._radiusField.slice(),this.setInnerRadiusField(this._spec.valueField||this._spec.radiusField),this.getStack()&&this.setValueFieldToStack(),this.getPercent()&&this.setValueFieldToPercent()}setValueFieldToStack(){this.setRadiusField(yn),this.setInnerRadiusField(Hs)}setValueFieldToPercent(){this.setRadiusField(bc),this.setInnerRadiusField(dp)}getDimensionField(){return this._specAngleField}getMeasureField(){return this._specRadiusField}getDefaultShapeType(){return"square"}}class knt extends ys{constructor(){super(...arguments),this._supportStack=!0}_transformLabelSpec(t){this._addMarkLabelSpec(t,"rose")}}const sG=(n,t)=>{var e,i,r,s,a,o;const l=(e=n.type)!==null&&e!==void 0?e:n.orient==="angle"?"band":"linear",u=`${mt.polarAxis}-${l}`,h=(i=n.startAngle)!==null&&i!==void 0?i:t.startAngle,c=(r=n.endAngle)!==null&&r!==void 0?r:t.endAngle;return{axisType:l,componentName:u,startAngle:h??TF,endAngle:c??(z(h)?h+360:Ttt),center:z(t.center)?t.center:z(t==null?void 0:t.centerX)||z(t==null?void 0:t.centerY)?{x:t==null?void 0:t.centerX,y:t==null?void 0:t.centerY}:void 0,outerRadius:(o=(a=(s=n.radius)!==null&&s!==void 0?s:t.outerRadius)!==null&&a!==void 0?a:t.radius)!==null&&o!==void 0?o:Ay,layoutRadius:t.layoutRadius}};var aG=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};class EC extends i5{get center(){return this._center}get startAngle(){return this._startAngle}get endAngle(){return this._endAngle}getOrient(){return this._orient}getGroupScales(){return this._groupScales}static getSpecInfo(t){const e=t[this.specKey];if(!e)return null;if(!ut(e)){if(!M$(e))return null;const{axisType:a,componentName:o,startAngle:l,endAngle:u,center:h,outerRadius:c,layoutRadius:d}=sG(e,t);return e.center=h,e.startAngle=l,e.endAngle=u,e.outerRadius=c,e.type=a,e.layoutRadius=d,[{spec:e,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:o}]}const i=[];let r;const s=[];return e.forEach((a,o)=>{if(!M$(a))return;const{axisType:l,componentName:u,startAngle:h,endAngle:c,center:d,outerRadius:p,layoutRadius:f}=sG(a,t);a.center=d,a.startAngle=h,a.endAngle=c,a.outerRadius=p,a.type=l,a.layoutRadius=f;const g={spec:a,specPath:[this.specKey,o],specInfoPath:["component",this.specKey,o],type:u};i.push(g),a.orient==="radius"?s.push(g):r=o}),s.forEach(a=>{a.angleAxisIndex=r}),i}static createComponent(t,e){const{spec:i}=t,r=aG(t,["spec"]),s=Z.getComponentInKey(r.type);return s?new s(i,Object.assign(Object.assign({},e),r)):(e.onError(`Component ${r.type} not found`),null)}constructor(t,e){super(t,e),this.type=mt.polarAxis,this.name=mt.polarAxis,this._defaultBandPosition=0,this._defaultBandInnerPadding=0,this._defaultBandOuterPadding=0,this.layoutType="absolute",this.layoutZIndex=ai.Axis,this._tick=void 0,this._center=null,this._startAngle=eT,this._endAngle=kF,this._orient="radius",this._groupScales=[],this.effect={scaleUpdate:i=>{this.computeData(i==null?void 0:i.value),zi(this._regions,r=>{this.getOrient()==="radius"?r.radiusAxisHelper=this.axisHelper():r.angleAxisHelper=this.axisHelper()},{userId:this._seriesUserId,specIndex:this._seriesIndex})}},this._transformLayoutPosition=i=>{var r;const s=(r=this.getRegions())===null||r===void 0?void 0:r[0];return s?s.getLayoutStartPoint():i},this._coordinateType="polar"}setAttrFromSpec(){super.setAttrFromSpec(),this.visible&&(this._axisStyle=this._getAxisAttributes(),this._gridStyle=this._getGridAttributes()),this._tick=this._spec.tick,this._orient=this._spec.orient==="angle"?"angle":"radius",this._center=this._spec.center,this._startAngle=qe(this._spec.startAngle),this._endAngle=qe(this._spec.endAngle),this._inverse=this._spec.inverse}onRender(t){}changeRegions(){}_tickTransformOption(){var t;return Object.assign(Object.assign({},super._tickTransformOption()),{noDecimal:(t=this._tick)===null||t===void 0?void 0:t.noDecimals,startAngle:this.startAngle,labelOffset:Oy(this._spec),getRadius:()=>this.getOuterRadius(),inside:this._spec.inside})}afterCompile(){var t;const e=(t=this._axisMark)===null||t===void 0?void 0:t.getProduct();e&&e.addEventListener(Ht.AFTER_ELEMENT_ENCODE,()=>{this._isLayout===!1&&this._delegateAxisContainerEvent(e.getGroupGraphicItem())})}updateScaleRange(){const t=this._scale.range();let e;return e=this.getOrient()==="radius"?this._inverse?[this.computeLayoutOuterRadius(),this.computeLayoutInnerRadius()]:[this.computeLayoutInnerRadius(),this.computeLayoutOuterRadius()]:this._inverse?[this._endAngle,this._startAngle]:[this._startAngle,this._endAngle],(!t||!e||t[0]!==e[0]||t[1]!==e[1])&&(this._scale.range(e),!0)}collectSeriesField(t,e){var i,r;let s;return s=t>0?(r=(i=e.getGroups())===null||i===void 0?void 0:i.fields)===null||r===void 0?void 0:r[t]:this.getOrient()==="radius"?e.getRadiusField():e.getAngleField(),s}updateSeriesScale(){zi(this._regions,t=>{this.getOrient()==="radius"?(t.setRadiusScale(this._scale),t.radiusAxisHelper=this.axisHelper()):(t.setAngleScale(this._scale),t.angleAxisHelper=this.axisHelper())},{userId:this._seriesUserId,specIndex:this._seriesIndex})}getSeriesStatisticsField(t){const e=this.getOrient()==="radius"?t.getRadiusField():t.getAngleField();return ti(this._scale.type)?e:[e[0]]}initGroupScales(){}axisHelper(){return{isContinuous:ti(this._scale.type),dataToPosition:this.dataToPosition.bind(this),coordToPoint:this.coordToPoint.bind(this),pointToCoord:this.pointToCoord.bind(this),center:this.getCenter.bind(this),layoutRadius:this.computeLayoutRadius.bind(this),getScale:(t=0)=>this._scales[t],getAxisId:()=>this.id,getSpec:()=>this._spec}}positionToData(t){const e=this.pointToCoord(t);return this.getOrient()==="radius"?this.invert(e.radius):this.invert(e.angle)}coordToPoint(t){const e=this.getCenter();return un(e,t.radius,t.angle)}pointToCoord(t){const{x:e,y:i}=this.getCenter();let r=t.x-e,s=t.y-i;const a=this._startAngle,o=this._endAngle,l=Math.sqrt(r*r+s*s);r/=l,s/=l;let u=Math.atan2(s,r);if(u<a)for(;u<=a;)u+=2*Math.PI;if(u>o)for(;u>=o;)u-=2*Math.PI;return{radius:l,angle:u}}getCenter(){var t,e;const i=this.getRefLayoutRect(),{width:r,height:s}=i;return{x:Qn((t=this._center)===null||t===void 0?void 0:t.x,r,i,r/2),y:Qn((e=this._center)===null||e===void 0?void 0:e.y,s,i,s/2)}}getOuterRadius(){return this.computeLayoutOuterRadius()}getInnerRadius(){return this.computeLayoutInnerRadius()}updateLayoutAttribute(){this._visible&&(this.getOrient()==="radius"?this._layoutRadiusAxis():this._layoutAngleAxis()),super.updateLayoutAttribute()}_getNormalizedValue(t,e){return e===0?0:(this.dataToPosition(t)-this._getStartValue())/e}getLabelItems(t){var e;const i=(e=this.getTickData())===null||e===void 0?void 0:e.getLatestData();return i&&i.length?[i.map(r=>nm(r.value,this._getNormalizedValue([r.value],t)))]:[]}_getStartValue(){return this.getOrient()==="radius"?this.computeLayoutInnerRadius():this._startAngle}_layoutAngleAxis(){const t=this.getCenter(),e=this.computeLayoutOuterRadius(),i=this.computeLayoutInnerRadius(),r=this._endAngle-this._startAngle,s=this.getLabelItems(r),a=Object.assign(Object.assign({},this.getLayoutStartPoint()),{inside:this._spec.inside,center:t,radius:e,innerRadius:i,startAngle:this._startAngle,endAngle:this._endAngle}),o=Object.assign(Object.assign({},a),{title:{text:this._spec.title.text||this._dataFieldText},items:s,orient:"angle"});this._spec.grid.visible&&(o.grid=Object.assign({type:"line",smoothLink:!0,items:s[0]},a)),this._update(o)}_layoutRadiusAxis(){var t,e,i;const r=this.getCenter(),s=this.computeLayoutOuterRadius(),a=this.computeLayoutInnerRadius(),o=this.coordToPoint({angle:this._startAngle,radius:s}),l=this.coordToPoint({angle:this._startAngle,radius:a}),u=Ni.distancePP(l,o),h=this.getLabelItems(u),c=Object.assign(Object.assign({},this.getLayoutStartPoint()),{start:l,end:o,verticalFactor:-1}),d=Object.assign(Object.assign({},c),{title:{text:this._spec.title.text||this._dataFieldText},items:h,orient:"radius"});!((t=this._spec.grid)===null||t===void 0)&&t.visible&&(d.grid=Object.assign({items:h[0],type:!((e=this._spec.grid)===null||e===void 0)&&e.smooth?"circle":"polygon",center:r,closed:!0,sides:(i=this._getRelatedAngleAxis())===null||i===void 0?void 0:i.getScale().domain().length,startAngle:this._startAngle,endAngle:this._endAngle},c)),this._update(d)}_getRelatedAngleAxis(){const t=this._option.angleAxisIndex;if(z(t))return this._option.getComponentByIndex(this.specKey,t)}computeLayoutRadius(){const t=this.getRefLayoutRect();if(Mt(this._spec.layoutRadius))return this._spec.layoutRadius;if(ft(this._spec.layoutRadius))return this._spec.layoutRadius(t,this.getCenter());const{width:e,height:i}=t;return this._spec.layoutRadius==="auto"&&e>0&&i>0?FCt(t,this.getCenter(),this._startAngle,this._endAngle):Math.min(e/2,i/2)}computeLayoutOuterRadius(){var t;const e=(t=this._spec.outerRadius)!==null&&t!==void 0?t:this._spec.radius,i=e??this.getRefSeriesRadius().outerRadius;return this.computeLayoutRadius()*i}computeLayoutInnerRadius(){var t;const e=(t=this._spec.innerRadius)!==null&&t!==void 0?t:this.getRefSeriesRadius().innerRadius;return this.computeLayoutRadius()*e}getRefLayoutRect(){return this.getRegions()[0].getLayoutRect()}getRefSeriesRadius(){let t=Ay,e=0;const i=this.getChart().getSpec();return zi(this.getRegions(),r=>{const s=r;if(IHt(s.type)){const{outerRadius:a=i.outerRadius,innerRadius:o=i.innerRadius}=s;st(a)&&(t=a),st(o)&&(e=o)}},{userId:this._seriesUserId,specIndex:this._seriesIndex}),{outerRadius:t,innerRadius:e}}_update(t){const{grid:e}=t,i=aG(t,["grid"]);this._axisMark.getProduct().encode(Ut({},this._axisStyle,i)),this._gridMark&&this._gridMark.getProduct().encode(Ut({},this._gridStyle,e))}invert(t){var e;if(this.getOrient()==="angle"&&this._scale.type==="band"){const i=this._scale.range(),r=i[i.length-1]-i[0],s=((e=this.getSpec().bandPosition)!==null&&e!==void 0?e:this._defaultBandPosition)===.5?0:this._scale.bandwidth()/2;if(i[0]<0){const a=(t+s+Math.abs(i[0]))%r-Math.abs(i[0]);return this._scale.invert(a)}return this._scale.invert((t+s)%r)}return this._scale.invert(t)}}EC.type=mt.polarAxis,EC.specKey="axes";class U0 extends EC{constructor(){super(...arguments),this.type=mt.polarLinearAxis,this._zero=!0,this._nice=!0,this._extend={},this._scale=new to}setAttrFromSpec(){super.setAttrFromSpec(),this.setExtraAttrFromSpec()}initScales(){super.initScales(),this.setScaleNice()}computeDomain(t){return this.computeLinearDomain(t)}axisHelper(){const t=super.axisHelper();return t.setExtendDomain=this.setExtendDomain.bind(this),t}}U0.type=mt.polarLinearAxis,U0.specKey="axes",On(U0,xT);const Hm=()=>{Mp(),Z.registerComponent(U0.type,U0)};class Y0 extends EC{constructor(){super(...arguments),this.type=mt.polarBandAxis,this._scale=new kp}computeDomain(t){return this.computeBandDomain(t)}updateScaleRange(){const t=super.updateScaleRange();return this.updateGroupScaleRange(),t}axisHelper(){const t=super.axisHelper();return Object.assign(Object.assign({},t),{getBandwidth:e=>t.getScale(e).bandwidth()})}initScales(){super.initScales(),this.calcScales(this._defaultBandInnerPadding,this._defaultBandOuterPadding)}transformScaleDomain(){}}Y0.type=mt.polarBandAxis,Y0.specKey="axes",On(Y0,Kit);const F1=()=>{Mp(),Z.registerComponent(Y0.type,Y0)};class nc extends Cnt{constructor(){super(...arguments),this.type=at.rose,this.transformerConstructor=knt,this._roseMark=null,this._labelMark=null}initMark(){this.initRoseMark()}initMarkStyle(){this.initRoseMarkStyle()}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.getCenter=()=>({x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y}),this._markAttributeContext.startAngleScale=t=>this.startAngleScale(t),this._markAttributeContext.endAngleScale=t=>this.endAngleScale(t)}initRoseMark(){var t,e;this._roseMark=this._createMark(nc.mark.rose,{morph:Gu(this._spec,nc.mark.rose.name),defaultMorphElementKey:this.getDimensionField()[0],groupKey:this._seriesField,isSeriesMark:!0,customShape:(t=this._spec.rose)===null||t===void 0?void 0:t.customShape,stateSort:(e=this._spec.rose)===null||e===void 0?void 0:e.stateSort})}getRoseAngle(){var t,e,i;return(i=(e=(t=this.angleAxisHelper).getBandwidth)===null||e===void 0?void 0:e.call(t,this._groups?this._groups.fields.length-1:0))!==null&&i!==void 0?i:.5}startAngleScale(t){return this.angleAxisHelper.dataToPosition(this.getDatumPositionValues(t,this.getGroupFields()))-.5*this.angleAxisHelper.getBandwidth(this.getGroupFields().length-1)}endAngleScale(t){return this.angleAxisHelper.dataToPosition(this.getDatumPositionValues(t,this.getGroupFields()))+this.getRoseAngle()-.5*this.angleAxisHelper.getBandwidth(this.getGroupFields().length-1)}initRoseMarkStyle(){const t=this._roseMark;t&&this.setMarkStyle(t,{x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:e=>this.startAngleScale(e),endAngle:e=>this.endAngleScale(e),fill:this.getColorAttribute(),outerRadius:e=>Ue(this.radiusAxisHelper.dataToPosition([e[this._radiusField[0]]]),this.radiusAxisHelper.getScale(0)),innerRadius:e=>{var i;if(!this.getStack())return 0;const r=Ue(this.radiusAxisHelper.dataToPosition([e[this._innerRadiusField[0]]]),this.radiusAxisHelper.getScale(0));return r<=Number.MIN_VALUE?this._computeLayoutRadius()*((i=this._spec.innerRadius)!==null&&i!==void 0?i:0):r}})}initTooltip(){super.initTooltip(),this._roseMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._roseMark)}initLabelMarkStyle(t){t&&this.setMarkStyle(t,{text:e=>e[this.getDimensionField()[0]],fill:this.getColorAttribute(),z:0})}initAnimation(){var t,e,i;const r=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset;if(this._roseMark){const s={innerRadius:()=>{var a;return this._computeLayoutRadius()*((a=this._spec.innerRadius)!==null&&a!==void 0?a:0)}};this._roseMark.setAnimationConfig(Ae((i=Z.getAnimationInKey("rose"))===null||i===void 0?void 0:i(s,r),Ee("rose",this._spec,this._markAttributeContext)))}}getDefaultShapeType(){return"circle"}getActiveMarks(){return[this._roseMark]}}nc.type=at.rose,nc.mark=yet,nc.transformerConstructor=knt;const RVt=()=>{Z.registerSeries(nc.type,nc),Pp(),OVt(),F1(),Hm()};class IVt extends ms{constructor(t,e,i,r,s){super(t,e,i,r,s);const a=this.params.pointToCoord,o=this.params.coordToPoint;ft(a)&&ft(o)||(this.valid=!1),this._pointToCoord=a,this._coordToPoint=o}getEndProps(){return this.valid===!1?{}:this._coordToPoint({angle:this._toAngle,radius:this._toRadius})}onBind(){const{angle:t,radius:e}=this._pointToCoord(this.from);st(t*e)||(this.valid=!1),this._fromAngle=t,this._fromRadius=e;const{angle:i,radius:r}=this._pointToCoord(this.to);st(i*r)||(this.valid=!1),this._toAngle=i,this._toRadius=r,aC(this._fromAngle,this._toAngle)&&aC(this._fromRadius,this._toRadius)&&(this.valid=!1)}onUpdate(t,e,i){if(this.valid!==!1)if(t){const{x:r,y:s}=this.getEndProps();i.x=r,i.y=s}else{const{x:r,y:s}=this._coordToPoint({angle:this._fromAngle+(this._toAngle-this._fromAngle)*e,radius:this._fromRadius+(this._toRadius-this._fromRadius)*e});i.x=r,i.y=s}}}class LVt extends _J{constructor(t,e,i,r,s){super(t,e,i,r,s);const a=this.params.pointToCoord,o=this.params.coordToPoint;this._pointToCoord=a,this._coordToPoint=o}onUpdate(t,e,i){this.points=this.points.map((r,s)=>{const a=this.polarPointInterpolation(this.interpolatePoints[s][0],this.interpolatePoints[s][1],e);return a.context=r.context,a}),i.points=this.points}polarPointInterpolation(t,e,i){const r=this._pointToCoord(t),s=this._pointToCoord({x:t.x1,y:t.y1});let a=fl(r.angle),o=fl(s.angle);const l=this._pointToCoord(e),u=this._pointToCoord({x:e.x1,y:e.y1});let h=fl(l.angle),c=fl(u.angle);!st(a)&&st(h)&&(a=h),st(a)&&!st(h)&&(h=a),!st(o)&&st(c)&&(o=c),st(o)&&!st(c)&&(c=o);const d=a+(h-a)*i,p=r.radius+(l.radius-r.radius)*i,f=o+(c-o)*i,g=s.radius+(u.radius-s.radius)*i,{x:_,y:v}=this._coordToPoint({angle:d,radius:p}),{x:y,y:b}=this._coordToPoint({angle:f,radius:g}),S=new Qi(_,v,y,b);return S.defined=e.defined,S}}const Tnt=n=>({type:n==="in"?"fadeIn":"fadeOut"}),DVt=(n,t)=>({type:t==="in"?"growPointsIn":"growPointsOut",options:()=>({center:n.center()})});function Vx(n,t,e){return t==="fadeIn"?Tnt(e):DVt(n,e)}const BVt=(n,t)=>{const e=()=>{var a;return(a=n.center())===null||a===void 0?void 0:a.x},i=(a,o)=>o.getGraphicAttribute("x"),r=()=>{var a;return(a=n.center())===null||a===void 0?void 0:a.y},s=(a,o)=>o.getGraphicAttribute("y");return t==="in"?{channel:{x:{from:e,to:i},y:{from:r,to:s}}}:{channel:{x:{from:i,to:e},y:{from:s,to:r}}}};function oG(n,t,e){return t==="fadeIn"?Tnt(e):BVt(n,e)}const lG=(n,t)=>({custom:sMt,customParameters:(e,i)=>{var r;return{group:i.getGraphicItem(),startAngle:(r=n.startAngle)!==null&&r!==void 0?r:Math.PI/2,orient:"clockwise",center:n.center(),radius:n.radius(),animationType:t}}}),FVt=()=>{Z.registerAnimation("radar",(n,t)=>({appear:t==="clipIn"?void 0:Vx(n,t,"in"),enter:Vx(n,t,"in"),exit:Vx(n,t,"out"),disappear:t==="clipIn"?void 0:Vx(n,t,"out"),update:[{options:{excludeChannels:["points","defined"]}},{channel:["points"],custom:LVt,customParameters:n,duration:Rh.update.duration,easing:Rh.update.easing}]})),Z.registerAnimation("radarSymbol",(n,t)=>({appear:t==="clipIn"?void 0:oG(n,t,"in"),enter:{type:"scaleIn"},exit:{type:"scaleOut"},disappear:t==="clipIn"?void 0:oG(n,t,"out"),update:[{options:{excludeChannels:["x","y"]}},{channel:["x","y"],custom:IVt,customParameters:n,duration:Rh.update.duration,easing:Rh.update.easing}]})),Z.registerAnimation("radarGroup",(n,t)=>({appear:lG(n,"in"),disappear:lG(n,"out")})),Bm()};class Lh extends Cnt{constructor(){super(...arguments),this.type=at.radar,this.transformerConstructor=I1,this._sortDataByAxis=!1}initGroups(){}compile(){super.compile(),this.addOverlapCompile()}initMark(){var t,e,i,r;const s={progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold},a=((t=this._spec.area)===null||t===void 0?void 0:t.visible)!==!1&&((i=(e=this._spec.area)===null||e===void 0?void 0:e.style)===null||i===void 0?void 0:i.visible)!==!1,o=(r=this._spec.seriesMark)!==null&&r!==void 0?r:"area";this.initAreaMark(s,a&&o==="area"),this.initLineMark(s,o==="line"||o==="area"&&!a),this.initSymbolMark(s,o==="point")}initMarkStyle(){this.initAreaMarkStyle(),this.initLineMarkStyle(),this.initSymbolMarkStyle()}initAreaMark(t,e){var i,r;this._areaMark=this._createMark(Lh.mark.area,{progressive:t,isSeriesMark:e,customShape:(i=this._spec.area)===null||i===void 0?void 0:i.customShape,stateSort:(r=this._spec.area)===null||r===void 0?void 0:r.stateSort})}initAreaMarkStyle(){const t=this._areaMark;t&&(this.setMarkStyle(t,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),x1:e=>e&&this.angleAxisHelper&&this.radiusAxisHelper?this.valueToPosition(this.getDatumPositionValues(e,this._angleField),this.getStack()?this.getDatumPositionValues(e,this._innerRadiusField):this.radiusScale.domain()[0]).x:Number.NaN,y1:e=>!e||!this.angleAxisHelper||!this.radiusAxisHelper?Number.NaN:this.valueToPosition(this.getDatumPositionValues(e,this._angleField),this.getStack()?this.getDatumPositionValues(e,this._innerRadiusField):this.radiusScale.domain()[0]).y,fill:this.getColorAttribute(),curveType:Uit,closePath:!0},"normal",kt.Series),this._invalidType!=="zero"&&this.setMarkStyle(t,{defined:this._getInvalidDefined.bind(this),connectedType:this._getInvalidConnectType()},"normal",kt.Series),this.event.on(Wt.viewDataStatisticsUpdate,{filter:e=>e.model===this},()=>{this.encodeDefined(t,"defined")}))}initTooltip(){super.initTooltip();const{dimension:t,group:e,mark:i}=this._tooltipHelper.activeTriggerSet;this._lineMark&&(t.add(this._lineMark),e.add(this._lineMark)),this._areaMark&&(t.add(this._areaMark),e.add(this._areaMark)),this._symbolMark&&(i.add(this._symbolMark),e.add(this._symbolMark))}initAnimation(){var t,e,i,r;const s={center:()=>{var o;return(o=this.angleAxisHelper)===null||o===void 0?void 0:o.center()},radius:()=>{const o=this.getLayoutRect();return Math.min(o.width,o.height)},startAngle:z(this._spec.startAngle)?qe(this._spec.startAngle):eT,pointToCoord:o=>{var l;return(l=this.angleAxisHelper)===null||l===void 0?void 0:l.pointToCoord(o)},coordToPoint:o=>this.angleAxisHelper.coordToPoint(o)},a=(i=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset)!==null&&i!==void 0?i:"clipIn";a==="clipIn"&&this._rootMark&&this._rootMark.setAnimationConfig(Ae((r=Z.getAnimationInKey("radarGroup"))===null||r===void 0?void 0:r(s,a),Ee("group",this._spec,this._markAttributeContext))),[[this._areaMark,"radar"],[this._lineMark,"radar"],[this._symbolMark,"radarSymbol"]].forEach(([o,l])=>{if(z(o)){const u=Z.getAnimationInKey(l);o.setAnimationConfig(Ae(u==null?void 0:u(s,a),Ee(o.name,this._spec,this._markAttributeContext)))}})}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._areaMark,this._symbolMark,this._lineMark]}getSeriesStyle(t){return e=>{var i,r,s,a;let o=(r=(i=this._seriesMark)===null||i===void 0?void 0:i.getAttribute(e,t))!==null&&r!==void 0?r:void 0;return e!=="fill"||o||(e="stroke",o=(a=(s=this._seriesMark)===null||s===void 0?void 0:s.getAttribute(e,t))!==null&&a!==void 0?a:void 0),e==="stroke"&&ut(o)?o[0]:o}}}Lh.type=at.radar,Lh.mark=met,Lh.transformerConstructor=I1,On(Lh,e5);const jVt=()=>{Z.registerSeries(Lh.type,Lh),jF(),ST(),yT(),Uu(),FVt(),F1(),Hm()};class NVt extends _s{updateTooltipSpec(){var t;super.updateTooltipSpec(),z((t=this.spec)===null||t===void 0?void 0:t.mark)&&(this.spec.mark.updateContent=(e,i,r)=>{const s=[],a=e.filter(o=>o.key==="children");return a.length>0&&a[0].value.forEach(o=>{let l=!0;for(const u in o)s.push({shapeType:"circle",hasShape:l,shapeColor:this.shapeColorCallback(i[0].datum[0]),shapeStroke:this.shapeStrokeCallback(i[0].datum[0]),key:u,value:o[u]+""}),l=!1}),e.concat(s)})}getDefaultTooltipPattern(t){return t==="mark"?{visible:!0,activeType:t,title:{key:"event info",value:"event info"},content:[{hasShape:!0,shapeType:"square",shapeColor:this.shapeColorCallback,shapeStroke:this.shapeStrokeCallback,key:e=>e.type,value:e=>e.id},{hasShape:!0,shapeType:"square",shapeColor:this.shapeColorCallback,shapeStroke:this.shapeStrokeCallback,key:"event_time",value:e=>Ro.getInstance().timeFormat("%Y%m%d",e.event_time)},{hasShape:!0,shapeType:"square",shapeColor:this.shapeColorCallback,shapeStroke:this.shapeStrokeCallback,key:"action_type",value:e=>e.action_type},{shapeType:"square",hasShape:!0,shapeColor:this.shapeColorCallback,shapeStroke:this.shapeStrokeCallback,key:"children",value:e=>e.children}],updateContent:(e,i,r)=>{const s=[];return e[3].value.forEach(a=>{let o=!0;for(const l in a)s.push({shapeType:"circle",hasShape:o,shapeColor:this.shapeColorCallback(i[0].datum[0]),shapeStroke:this.shapeStrokeCallback(i[0].datum[0]),key:l,value:a[l]+""}),o=!1}),e.concat(s)}}:null}}const zVt=(n,t)=>{var e;const i=!((e=n[0])===null||e===void 0)&&e.latestData?n[0].latestData:n||[],r=[];return i.forEach(s=>{const a={};for(const l in s)l!==t&&(a[l]=s[l]);const o=s[t];o==null||o.forEach(l=>{r.push(Object.assign({},a,l))})}),r},HVt={fill:"#bbb",fillOpacity:.2};class ha extends so{constructor(){super(...arguments),this.type=at.dot}getSeriesGroupField(){return this._seriesField}setSeriesGroupField(t){z(t)&&(this._seriesGroupField=t)}getTitleField(){return this._titleField}setTitleField(t){z(t)&&(this._titleField=t)}getSubTitleField(){return this._subTitleField}setSubTitleField(t){z(t)&&(this._subTitleField=t)}getDotTypeField(){return this._dotTypeField}setDotTypeField(t){z(t)&&(this._dotTypeField=t)}getHighLightSeriesGroup(){return this._highLightSeriesGroup}setHighLightSeriesGroup(t){z(t)&&(this._highLightSeriesGroup=t)}setGridBackground(t){z(t)&&(this._gridBackground=t)}initData(){var t;super.initData(),this._xDimensionStatisticsDomain=this.getRawData().latestData.map(e=>e[this._fieldY[0]]),ie(this._option.dataSet,"objFlat",zVt),ie(this._option.dataSet,"copyDataView",uT),vu(this._option.dataSet,"dataview",f2),(t=this.getViewData())===null||t===void 0||t.transform({type:"objFlat",options:"dots",level:$o.dotObjFlat},!1)}setSeriesField(t){z(t)&&(this._seriesField=t,this.getMarksInType(["line","area"]).forEach(e=>{e.setFacet(this._seriesField)}))}getStatisticFields(){return[{key:this._fieldY[0],operations:["values"],customize:this._xDimensionStatisticsDomain}]}setAttrFromSpec(){var t;super.setAttrFromSpec(),this.setSeriesGroupField(this._spec.seriesGroupField),this.setTitleField(this._spec.titleField),this.setSubTitleField(this._spec.subTitleField),this.setDotTypeField(this._spec.dotTypeField),this.setHighLightSeriesGroup(this._spec.highLightSeriesGroup),this.setGridBackground(Ut(HVt,((t=this._spec.grid)===null||t===void 0?void 0:t.background)||{}))}initMark(){this._clipMark=this._createMark(ha.mark.group),this._containerMark=this._createMark(ha.mark.group,{parent:this._clipMark,dataView:this.getRawData()}),this._gridBackgroundMark=this._createMark(ha.mark.gridBackground,{parent:this._containerMark,dataView:this.getRawData()}),this._gridMark=this._createMark(ha.mark.grid,{parent:this._containerMark,dataView:this.getRawData()}),this._dotMark=this._createMark(ha.mark.dot,{skipBeforeLayouted:!1,isSeriesMark:!0,parent:this._containerMark}),this._titleMark=this._createMark(ha.mark.title,{parent:this._containerMark,dataView:this.getRawData()}),this._subTitleMark=this._createMark(ha.mark.subTitle,{parent:this._containerMark,dataView:this.getRawData()}),this._symbolMark=this._createMark(ha.mark.symbol,{parent:this._containerMark,dataView:this.getRawData()})}initMarkStyle(){const t=this._clipMark;t&&(this.setMarkStyle(t,{x:-this._spec.leftAppendPadding,y:0,width:1e4,height:this._spec.clipHeight,clip:!0},"normal",kt.Series),t.setInteractive(!1));const e=this._containerMark;e&&(this.setMarkStyle(e,{x:this._spec.leftAppendPadding},"normal",kt.Series),e.setInteractive(!1));const i=this._gridBackgroundMark;i&&this.setMarkStyle(i,{x:this.getRegionRectLeft.bind(this),x1:this.getRegionRectRight.bind(this),y:this.dataToGridBackgroundPositionY.bind(this),y1:this.dataToGridBackgroundPositionY1.bind(this),fill:this._gridBackground.fill,fillOpacity:this.dataToGridBackgroundOpacity.bind(this)},"normal",kt.Series);const r=this._gridMark;r&&this.setMarkStyle(r,{stroke:this.getColorAttribute(),x:this.getRegionRectLeft.bind(this),y:this.dataToPositionY.bind(this),x1:this.getRegionRectRight.bind(this),y1:this.dataToPositionY.bind(this)},"normal",kt.Series);const s=this._dotMark;s&&this.setMarkStyle(s,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),fill:this.getDotColorAttribute(),fillOpacity:this.dataToOpacity.bind(this)},"normal",kt.Series);const a=this._titleMark;a&&this.setMarkStyle(a,{fill:this.getColorAttribute(),text:u=>u[this.getTitleField()],x:this.getRegionRectLeft.bind(this),y:this.dataToPositionY.bind(this)},"normal",kt.Series);const o=this._subTitleMark;o&&this.setMarkStyle(o,{fill:this.getColorAttribute(),text:u=>u[this.getSubTitleField()],x:this.getRegionRectLeft.bind(this),y:this.dataToPositionY.bind(this)},"normal",kt.Series);const l=this._symbolMark;l&&this.setMarkStyle(l,{x:this.getRegionRectLeft.bind(this),y:this.dataToPositionY.bind(this),fill:this.getColorAttribute()},"normal",kt.Series)}dataToGridBackgroundPositionY(t){if(!this._yAxisHelper)return Number.NaN;const{dataToPosition:e,getBandwidth:i}=this._yAxisHelper;return e(this.getDatumPositionValues(t,this._fieldY),{bandPosition:this._bandPosition})-i(0)/2}dataToGridBackgroundPositionY1(t){if(!this._yAxisHelper)return Number.NaN;const{dataToPosition:e,getBandwidth:i}=this._yAxisHelper;return e(this.getDatumPositionValues(t,this._fieldY),{bandPosition:this._bandPosition})+i(0)/2}dataToOpacity(t){var e,i,r,s;if(!this._xAxisHelper)return Number.NaN;const{dataToPosition:a,getScale:o}=this._xAxisHelper;return a(this.getDatumPositionValues(t,this._fieldX),{bandPosition:this._bandPosition})<o(0).range()[0]||a(this.getDatumPositionValues(t,this._fieldX),{bandPosition:this._bandPosition})>o(0).range()[1]?0:(s=(r=(i=(e=this._theme)===null||e===void 0?void 0:e.dot)===null||i===void 0?void 0:i.style)===null||r===void 0?void 0:r.fillOpacity)!==null&&s!==void 0?s:1}dataToGridBackgroundOpacity(t){return t[this._seriesGroupField]===this._highLightSeriesGroup?this._gridBackground.fillOpacity:0}onLayoutEnd(t){var e,i;super.onLayoutEnd(t);const r=(i=(e=this._spec)===null||e===void 0?void 0:e.leftAppendPadding)!==null&&i!==void 0?i:0;this.setMarkStyle(this._clipMark,{width:this.getLayoutRect().width+r},"normal",kt.Series)}getDefaultColorDomain(){var t,e;return this._seriesGroupField?(t=this.getViewDataStatistics())===null||t===void 0?void 0:t.latestData[this._seriesGroupField].values:this._seriesField?(e=this.getViewDataStatistics())===null||e===void 0?void 0:e.latestData[this._seriesField].values:[]}getColorAttribute(){var t,e,i;return{scale:(t=this._option.globalScale.getScale("color"))!==null&&t!==void 0?t:this._getDefaultColorScale(),field:(i=(e=this._seriesGroupField)!==null&&e!==void 0?e:this._seriesField)!==null&&i!==void 0?i:Ls}}getDotColorScale(){var t,e,i;const r=this._dotTypeField?(t=this.getViewDataStatistics())===null||t===void 0?void 0:t.latestData[this._dotTypeField].values:this._seriesGroupField?(e=this.getViewDataStatistics())===null||e===void 0?void 0:e.latestData[this._seriesGroupField].values:this._seriesField?(i=this.getViewDataStatistics())===null||i===void 0?void 0:i.latestData[this._seriesField].values:[],s=this._getDataScheme();return new O1().domain(r).range(s)}getDotColorAttribute(){var t,e,i,r;return{scale:(t=this._option.globalScale.getScale("color"))!==null&&t!==void 0?t:this.getDotColorScale(),field:(r=(i=(e=this._dotTypeField)!==null&&e!==void 0?e:this._seriesGroupField)!==null&&i!==void 0?i:this._seriesField)!==null&&r!==void 0?r:Ls}}initTooltip(){this._tooltipHelper=new NVt(this),this._dotMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._dotMark)}onEvaluateEnd(t){super.onEvaluateEnd(t)}onMarkTreePositionUpdate(t){t.forEach(e=>{e.type==="group"?this.onMarkTreePositionUpdate(e.getMarks()):e.updateLayoutState()})}getDotData(){var t;return(t=this._dotMark)===null||t===void 0?void 0:t.getData()}_getDataIdKey(){}getStackValueField(){return null}getActiveMarks(){return[this._dotMark]}}ha.type=at.dot,ha.mark=wet;const VVt=()=>{Uu(),zm(),Yu(),Gs(),Z.registerSeries(ha.type,ha)};class WVt extends _s{getDefaultTooltipPattern(t){return t==="mark"?{visible:!0,activeType:t,title:{key:"link info",value:"link info"},content:[{hasShape:!0,shapeType:"square",shapeColor:this.shapeColorCallback,shapeStroke:this.shapeStrokeCallback,key:"time",value:e=>Ro.getInstance().timeFormat("%Y%m%d %H:%M",e.from.split("_")[1])},{hasShape:!0,shapeType:"square",shapeColor:this.shapeColorCallback,shapeStroke:this.shapeStrokeCallback,key:"type",value:e=>e.action_type},{hasShape:!0,shapeType:"square",shapeColor:this.shapeColorCallback,shapeStroke:this.shapeStrokeCallback,key:"from",value:e=>e.from},{hasShape:!0,shapeType:"square",shapeColor:this.shapeColorCallback,shapeStroke:this.shapeStrokeCallback,key:"to",value:e=>e.to}]}:null}}const $Vt=(n,t)=>{const{infoKey:e,fields:i,linkData:r,dotData:s}=t,{fromField:a,toField:o,xField:l,yField:u}=i(),h=r(),c=s(),d={};return c.forEach(p=>{const f={};for(const _ in p)_!==e&&(f[_]=p[_]);const g=p[e];g==null||g.forEach(_=>{d[_.node_name]=Object.assign({},f,_)})}),h.forEach(p=>{var f,g,_,v;p[a+"_xField"]=(f=d==null?void 0:d[p[a]])===null||f===void 0?void 0:f[l],p[a+"_yField"]=(g=d==null?void 0:d[p[a]])===null||g===void 0?void 0:g[u],p[o+"_xField"]=(_=d==null?void 0:d[p[o]])===null||_===void 0?void 0:_[l],p[o+"_yField"]=(v=d==null?void 0:d[p[o]])===null||v===void 0?void 0:v[u]}),h};class gu extends so{constructor(){super(...arguments),this.type=at.link}getFromField(){return this._fromField}setFromField(t){z(t)&&(this._fromField=t)}getToField(){return this._toField}setToField(t){z(t)&&(this._toField=t)}getDotTypeField(){return this._dotTypeField}setDotTypeField(t){z(t)&&(this._dotTypeField=t)}getDotSeriesSpec(){return this._dotSeriesSpec}setDotSeriesSpec(t){z(t)&&(this._dotSeriesSpec=t)}_getDotData(){const t=this._option.getChart().getSeriesInIndex([this._spec.dotSeriesIndex])[0];return t?t.getRawData().latestData:[]}initData(){var t;super.initData(),ie(this._option.dataSet,"linkDotInfo",$Vt),(t=this.getViewData())===null||t===void 0||t.transform({type:"linkDotInfo",options:{infoKey:"dots",fields:()=>({fromField:this._fromField,toField:this._toField,xField:this._dotSeriesSpec.xField,yField:this._dotSeriesSpec.yField}),linkData:()=>this._rawData.latestData,dotData:()=>this._getDotData()},level:$o.linkDotInfo},!1)}setAttrFromSpec(){super.setAttrFromSpec(),this.setFromField(this._spec.fromField),this.setToField(this._spec.toField),this.setDotTypeField(this._spec.dotTypeField),this.setDotSeriesSpec(this._spec.dotSeriesSpec)}initMark(){this._clipMark=this._createMark(gu.mark.group),this._containerMark=this._createMark(gu.mark.group,{parent:this._clipMark}),this._linkMark=this._createMark(gu.mark.link,{skipBeforeLayouted:!1,parent:this._containerMark}),this._arrowMark=this._createMark(gu.mark.arrow,{skipBeforeLayouted:!1,isSeriesMark:!0,parent:this._containerMark})}initMarkStyle(){var t,e,i,r;const s=this._clipMark;s&&(this.setMarkStyle(s,{x:-this._spec.leftAppendPadding,y:0,width:1e4,height:this._spec.clipHeight,clip:!0},"normal",kt.Series),s.setInteractive(!1));const a=this._containerMark;a&&(this.setMarkStyle(a,{x:this._spec.leftAppendPadding,width:this.getLayoutRect().width},"normal",kt.Series),a.setInteractive(!1));const o=this._linkMark;o&&this.setMarkStyle(o,{stroke:this.getColorAttribute(),strokeOpacity:this.dataToOpacity.bind(this),x:this.dataToPositionXFrom.bind(this),y:this.dataToPositionYFrom.bind(this),x1:this.dataToPositionXTo.bind(this),y1:this.dataToPositionYTo.bind(this)},"normal",kt.Series);const l=this._arrowMark;if(l){const u=(r=(i=(e=(t=this._theme)===null||t===void 0?void 0:t.arrow)===null||e===void 0?void 0:e.style)===null||i===void 0?void 0:i.size)!==null&&r!==void 0?r:10;this.setMarkStyle(l,{x:this.dataToPositionXTo.bind(this),y:h=>this.dataToPositionArrowYTo(h,u),fill:this.getColorAttribute(),fillOpacity:this.dataToOpacity.bind(this),size:u,symbolType:h=>this.isPositionYFromHigher(h)?"triangleDown":"triangleUp"},"normal",kt.Series)}}afterInitMark(){super.afterInitMark()}dataToPositionXFrom(t){if(!this._xAxisHelper)return Number.NaN;const{dataToPosition:e}=this._xAxisHelper;return e(this.getDatumPositionValues(t,this._fromField+"_xField"),{bandPosition:this._bandPosition})}dataToPositionYFrom(t){if(!this._yAxisHelper)return Number.NaN;const{dataToPosition:e}=this._yAxisHelper;return e(this.getDatumPositionValues(t,this._fromField+"_yField"))}dataToPositionXTo(t){if(!this._xAxisHelper)return Number.NaN;const{dataToPosition:e}=this._xAxisHelper;return e(this.getDatumPositionValues(t,this._toField+"_xField"),{bandPosition:this._bandPosition})}dataToPositionYTo(t){if(!this._yAxisHelper)return Number.NaN;const{dataToPosition:e}=this._yAxisHelper;return e(this.getDatumPositionValues(t,this._toField+"_yField"),{bandPosition:this._bandPosition})}dataToPositionArrowYTo(t,e){if(!this._yAxisHelper)return Number.NaN;const{dataToPosition:i}=this._yAxisHelper,r=this.isPositionYFromHigher(t)?-e/2:e/2;return i(this.getDatumPositionValues(t,this._toField+"_yField"),{bandPosition:this._bandPosition})+r}dataToOpacity(t){return this.isPositionXOuterRange(t,this._fromField+"_xField")||this.isPositionXOuterRange(t,this._toField+"_xField")||t[this._fromField]===t[this._toField]?0:1}isPositionYFromHigher(t){return this.dataToPositionYFrom(t)<this.dataToPositionYTo(t)}isPositionXOuterRange(t,e){if(!this._xAxisHelper)return!1;const{dataToPosition:i,getScale:r}=this._xAxisHelper;return i(this.getDatumPositionValues(t,e),{bandPosition:this._bandPosition})<r(0).range()[0]||i(this.getDatumPositionValues(t,e),{bandPosition:this._bandPosition})>r(0).range()[1]}getDefaultColorDomain(){var t,e;return this._dotTypeField?(t=this.getViewDataStatistics())===null||t===void 0?void 0:t.latestData[this._dotTypeField].values:this._seriesField?(e=this.getViewDataStatistics())===null||e===void 0?void 0:e.latestData[this._seriesField].values:[]}getColorAttribute(){var t,e,i;return{scale:(t=this._option.globalScale.getScale("color"))!==null&&t!==void 0?t:this._getDefaultColorScale(),field:(i=(e=this._dotTypeField)!==null&&e!==void 0?e:this._seriesField)!==null&&i!==void 0?i:Ls}}initInteraction(){const t=[];this._linkMark&&t.push(this._linkMark),this._arrowMark&&t.push(this._arrowMark),this._parseInteractionConfig(t)}initTooltip(){this._tooltipHelper=new WVt(this),this._linkMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._linkMark),this._arrowMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._arrowMark)}onMarkTreePositionUpdate(t){t.forEach(e=>{e.type==="group"?this.onMarkTreePositionUpdate(e.getMarks()):e.updateLayoutState()})}getDotInfoData(){var t,e;return(e=(t=this._linkMark)!==null&&t!==void 0?t:this._arrowMark)===null||e===void 0?void 0:e.getData()}getActiveMarks(){return[this._linkMark,this._arrowMark]}}gu.type=at.link,gu.mark=Aet;const GVt=()=>{zm(),Uu(),$s(),Ws(),Z.registerSeries(gu.type,gu)};class Vm extends B1{constructor(){super(...arguments),this._arcGroupMark=null,this._getAngleValueStart=t=>{const e=this._getAngleAxis(),{tickMask:i}=this._spec;if(i!=null&&i.forceAlign&&this._isTickMaskVisible(e)){const r=t[this.getStack()?Hs:kS],s=this._getAngleAxisSubTickData(e),a=s[1].value-s[0].value,o=qe(i.offsetAngle);let l;if(z(r)){const u=B7(s,c=>c.value-r),h=u>=s.length||r>s[u].value-a/2?Math.min(u,s.length-1):u>0?u-1:void 0;h!==void 0&&(l=this.angleAxisHelper.dataToPosition([s[h].value-a/2]))}return F(l)&&(l=this.angleAxisHelper.dataToPosition([s[0].value-a/2])),l+o}return this._getAngleValueStartWithoutMask(t)},this._getAngleValueEnd=t=>{const e=this._getAngleAxis(),{tickMask:i}=this._spec;if(i!=null&&i.forceAlign&&this._isTickMaskVisible(e)){const r=t[this.getStack()?yn:this._angleField[0]],s=this._getAngleAxisSubTickData(e),a=s[1].value-s[0].value,o=qe(i.offsetAngle),l=B7(s,c=>c.value-r),u=l>=s.length||r>s[l].value-a/2?Math.min(l,s.length-1):l>0?l-1:void 0;let h;return h=u!==void 0?this.angleAxisHelper.dataToPosition([s[u].value+a/2]):this.angleAxisHelper.dataToPosition([s[0].value-a/2]),h+o}return this._getAngleValueEndWithoutMask(t)}}setAttrFromSpec(){var t,e,i;super.setAttrFromSpec();const r=(t=this._option.globalInstance.getChart())===null||t===void 0?void 0:t.getSpec(),s=(e=this._spec.startAngle)!==null&&e!==void 0?e:r==null?void 0:r.startAngle;this._startAngle=z(s)?qe(s):eT;const a=(i=this._spec.endAngle)!==null&&i!==void 0?i:r==null?void 0:r.endAngle;this._endAngle=z(a)?qe(a):kF,this.setAngleField(this._spec.valueField||this._spec.angleField),this.setRadiusField(this._spec.categoryField||this._spec.radiusField),this._specAngleField=this._angleField.slice(),this._specRadiusField=this._radiusField.slice()}getStackGroupFields(){return this._radiusField}getStackValueField(){var t;return(t=this._angleField)===null||t===void 0?void 0:t[0]}getGroupFields(){return this._angleField}_convertMarkStyle(t){const e=super._convertMarkStyle(t);if(e.fill){const i=t.fill;(i==null?void 0:i.gradient)!=="conical"||z(i==null?void 0:i.startAngle)||z(i==null?void 0:i.endAngle)||(e.fill=Object.assign(Object.assign({},i),{startAngle:this._startAngle,endAngle:this._endAngle}))}return e}_getAngleValueStartWithoutMask(t){if(this.getStack()){const e=Ue(this.angleAxisHelper.dataToPosition([t[Hs]]),this.angleAxisHelper.getScale(0));if(st(e))return e}return this._startAngle}_getAngleValueEndWithoutMask(t){if(this.getStack()){const e=Ue(this.angleAxisHelper.dataToPosition([t[yn]]),this.angleAxisHelper.getScale(0));if(st(e))return e}return this.angleAxisHelper.dataToPosition([t[this._angleField[0]]])}getDimensionField(){return this._specRadiusField}getMeasureField(){return this._specAngleField}initMark(){this._initArcGroupMark()}initMarkStyle(){this._initArcGroupMarkStyle()}_initArcGroupMark(){return this._arcGroupMark=this._createMark(Vm.mark.group,{skipBeforeLayouted:!1}),this._arcGroupMark}_initArcGroupMarkStyle(){const t=this._arcGroupMark;t.setZIndex(this.layoutZIndex),t.created(),this.setMarkStyle(t,{x:0,y:0},"normal",kt.Series),t.setClip(()=>{const e=this._getAngleAxis();if(this._isTickMaskVisible(e)){const{tickMask:s}=this._spec,{angle:a,offsetAngle:o,style:l={}}=s,u=this._getAngleAxisSubTickData(e),{x:h,y:c}=this.angleAxisHelper.center(),d=this._computeLayoutRadius(),p=l;return u.map(({value:f})=>{const g=this.angleAxisHelper.dataToPosition([f])+qe(o),_=qe(a)/2;return rF(Object.assign(Object.assign({},p),{x:h,y:c,startAngle:g-_,endAngle:g+_,innerRadius:d*this._innerRadius,outerRadius:d*this._outerRadius,fill:!0}))})}const{width:i,height:r}=this.getLayoutRect();return[ep({width:i,height:r,fill:!0})]}),this._arcGroupMark.setInteractive(!1)}_getAngleAxis(){if(!this.angleAxisHelper)return;const t=this.angleAxisHelper.getAxisId();return this._option.getChart().getAllComponents().find(e=>e.id===t)}_getAngleAxisTickData(t){var e;return(e=t==null?void 0:t.getTickData())===null||e===void 0?void 0:e.getLatestData()}_isTickMaskVisible(t){const e=this._getAngleAxisTickData(t),{tickMask:i}=this._spec;return i&&i.visible!==!1&&(e==null?void 0:e.length)>1}_getAngleAxisSubTickData(t){var e;const i=this._getAngleAxisTickData(t),r=[],{subTick:s={},tick:a={}}=(e=t==null?void 0:t.getSpec())!==null&&e!==void 0?e:{},{tickCount:o=4}=s,{alignWithLabel:l}=a;if((i==null?void 0:i.length)>=2){const u=i[1].value-i[0].value;for(let h=0;h<i.length-1;h++){const c=i[h],d=i[h+1];r.push(c);for(let p=0;p<o;p++){const f=(p+1)/(o+1),g=(1-f)*c.value+f*(d?d.value:l?1:c.value+u);r.push({value:g})}}return r.push(i[i.length-1]),r}return i}}Vm.mark=HF;const UVt=n=>({type:"growAngleIn",options:{overall:n.startAngle}}),YVt={type:"fadeIn"};function XVt(n,t){return t==="fadeIn"?YVt:UVt(n)}const Mnt=()=>{Z.registerAnimation("circularProgress",(n,t)=>({appear:XVt(n,t),enter:{type:"growAngleIn"},disappear:{type:"growAngleOut"}}))};class Pnt extends ys{constructor(){super(...arguments),this._supportStack=!0}}class rc extends Vm{constructor(){super(...arguments),this.type=at.circularProgress,this.transformerConstructor=Pnt,this._progressMark=null,this._trackMark=null,this._getRadiusValueStart=t=>{if(this.getGroupFields().length>1){const e=this.radiusAxisHelper.dataToPosition(this.getDatumPositionValues(t,this.getGroupFields()));if(st(e))return e}return this.radiusAxisHelper.dataToPosition([t[this._radiusField[0]]])},this._getRadiusValueEnd=t=>{var e,i;if(this.getGroupFields().length>1){const r=this.radiusAxisHelper.dataToPosition(this.getDatumPositionValues(t,this.getGroupFields()))+((i=(e=this.radiusAxisHelper).getBandwidth)===null||i===void 0?void 0:i.call(e,this._groups?this._groups.fields.length-1:0));if(st(r))return r}return this.radiusAxisHelper.dataToPosition([t[this._radiusField[0]]])+this.radiusAxisHelper.getScale(0).step()}}getStackGroupFields(){return this.getGroupFields()}getGroupFields(){return this._radiusField}initMark(){super.initMark(),this._initTrackMark(),this._initProgressMark()}initMarkStyle(){super.initMarkStyle(),this._initTrackMarkStyle(),this._initProgressMarkStyle()}_initProgressMark(){var t,e;return this._progressMark=this._createMark(rc.mark.progress,{parent:this._arcGroupMark,isSeriesMark:!0,customShape:(t=this._spec.progress)===null||t===void 0?void 0:t.customShape,stateSort:(e=this._spec.progress)===null||e===void 0?void 0:e.stateSort}),this._progressMark}_initProgressMarkStyle(){var t;const e=this._progressMark;e&&this.setMarkStyle(e,{x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:this._getAngleValueStart,endAngle:this._getAngleValueEnd,innerRadius:this._getRadiusValueStart,outerRadius:this._getRadiusValueEnd,cap:(t=this._spec.roundCap)!==null&&t!==void 0&&t,boundsMode:"imprecise",cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute(),zIndex:200,forceShowCap:!0},"normal",kt.Series)}initInteraction(){const t=[];this._trackMark&&t.push(this._trackMark),this._progressMark&&t.push(this._progressMark),this._parseInteractionConfig(t)}initTooltip(){super.initTooltip(),this._progressMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._progressMark)}_initTrackMark(){var t,e;return this._trackMark=this._createMark(rc.mark.track,{parent:this._arcGroupMark,customShape:(t=this._spec.track)===null||t===void 0?void 0:t.customShape,stateSort:(e=this._spec.track)===null||e===void 0?void 0:e.stateSort}),this._trackMark}_initTrackMarkStyle(){const t=this._trackMark;t&&this.setMarkStyle(t,{visible:e=>{const i=this.angleAxisHelper.getScale(0).range(),r=Math.min(i[0],i[i.length-1]),s=this._getAngleValueStartWithoutMask(e);return Math.abs(s-r)<=1e-14},x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:()=>{const e=this.getStack()?Hs:this._angleField[0],i=this.angleAxisHelper.getScale(0).domain();return this._getAngleValueStart({[e]:i[0]})},endAngle:()=>{const e=this.getStack()?yn:this._angleField[0],i=this.angleAxisHelper.getScale(0).domain();return this._getAngleValueEnd({[e]:i[i.length-1]})},innerRadius:this._getRadiusValueStart,outerRadius:this._getRadiusValueEnd,cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute(),zIndex:100},"normal",kt.Series)}initAnimation(){var t,e,i,r;const s=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset;this._progressMark.setAnimationConfig(Ae((i=Z.getAnimationInKey("circularProgress"))===null||i===void 0?void 0:i({startAngle:this._startAngle},s),Ee("progress",this._spec,this._markAttributeContext))),this._trackMark.setAnimationConfig(Ae((r=Z.getAnimationInKey("fadeInOut"))===null||r===void 0?void 0:r(),Ee("track",this._spec,this._markAttributeContext)))}getActiveMarks(){return[this._progressMark]}}rc.type=at.circularProgress,rc.mark=xet,rc.transformerConstructor=Pnt;const KVt=()=>{Z.registerSeries(rc.type,rc),Pp(),Mnt(),$u(),F1(),Hm()};function Ent(n){return()=>n.direction==="vertical"?{orient:"negative"}:{orient:"positive"}}const qVt=n=>({type:n.direction==="horizontal"?"growWidthIn":"growHeightIn",options:Ent(n)}),ZVt=n=>({type:n.direction==="horizontal"?"growWidthOut":"growHeightOut",options:Ent(n)}),JVt={type:"fadeIn"};function QVt(n,t){return t===!1?{}:t==="fadeIn"?JVt:qVt(n)}const tWt=()=>{Z.registerAnimation("linearProgress",(n,t)=>({appear:QVt(n,t),enter:{type:"grow"},disappear:ZVt(n)}))};class eWt extends _s{getDefaultTooltipPattern(t,e){const i=super.getDefaultTooltipPattern(t,e);switch(t){case"mark":case"group":return i;case"dimension":return i.visible=!1,i}return null}}class sc extends so{constructor(){super(...arguments),this.type=at.linearProgress,this._progressMark=null,this._trackMark=null,this._progressGroupMark=null}initMark(){this._initProgressGroupMark(),this._initTrackMark(),this._initProgressMark()}initMarkStyle(){this._initProgressGroupMarkStyle(),this._initTrackMarkStyle(),this._initProgressMarkStyle()}_initProgressMark(){var t,e;return this._progressMark=this._createMark(sc.mark.progress,{isSeriesMark:!0,parent:this._progressGroupMark,customShape:(t=this._spec.progress)===null||t===void 0?void 0:t.customShape,stateSort:(e=this._spec.progress)===null||e===void 0?void 0:e.stateSort}),this._progressMark}_initProgressMarkStyle(){var t,e,i,r,s,a,o,l;const u=this._progressMark;if(u)if(this._spec.direction==="vertical"){const h=(e=(t=this._spec.progress)===null||t===void 0?void 0:t.leftPadding)!==null&&e!==void 0?e:0,c=(r=(i=this._spec.progress)===null||i===void 0?void 0:i.rightPadding)!==null&&r!==void 0?r:0;this.setMarkStyle(u,{x:d=>{var p,f;return Ue(this.dataToPositionX(d),(f=(p=this._xAxisHelper)===null||p===void 0?void 0:p.getScale)===null||f===void 0?void 0:f.call(p,0))-this._spec.bandWidth/2+h},y:d=>{var p,f;return Ue(this.dataToPositionY(d),(f=(p=this._yAxisHelper)===null||p===void 0?void 0:p.getScale)===null||f===void 0?void 0:f.call(p,0))},height:()=>{var d;return(d=this._yAxisHelper)===null||d===void 0?void 0:d.dataToPosition([0],{bandPosition:this._bandPosition})},width:this._spec.bandWidth-h-c,cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute()},"normal",kt.Series)}else{const h=(a=(s=this._spec.progress)===null||s===void 0?void 0:s.topPadding)!==null&&a!==void 0?a:0,c=(l=(o=this._spec.progress)===null||o===void 0?void 0:o.bottomPadding)!==null&&l!==void 0?l:0;this.setMarkStyle(u,{x:d=>{var p,f;return Ue(this.dataToPositionX(d),(f=(p=this._xAxisHelper)===null||p===void 0?void 0:p.getScale)===null||f===void 0?void 0:f.call(p,0))-this._xAxisHelper.dataToPosition([1],{bandPosition:this._bandPosition})},y:d=>{var p,f;return Ue(this.dataToPositionY(d),(f=(p=this._yAxisHelper)===null||p===void 0?void 0:p.getScale)===null||f===void 0?void 0:f.call(p,0))-this._spec.bandWidth/2+h},height:this._spec.bandWidth-h-c,width:()=>{var d;return(d=this._xAxisHelper)===null||d===void 0?void 0:d.dataToPosition([1],{bandPosition:this._bandPosition})},cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute()},"normal",kt.Series)}}_initTrackMark(){var t,e;return this._trackMark=this._createMark(sc.mark.track,{parent:this._progressGroupMark,customShape:(t=this._spec.track)===null||t===void 0?void 0:t.customShape,stateSort:(e=this._spec.track)===null||e===void 0?void 0:e.stateSort}),this._trackMark}_initTrackMarkStyle(){const t=this._trackMark;t&&(this._spec.direction==="vertical"?this.setMarkStyle(t,{x:e=>{var i,r;return Ue(this.dataToPositionX(e),(r=(i=this._xAxisHelper)===null||i===void 0?void 0:i.getScale)===null||r===void 0?void 0:r.call(i,0))-this._spec.bandWidth/2},y:0,width:this._spec.bandWidth,height:()=>this._scaleY.range()[0],cornerRadius:this._spec.cornerRadius},"normal",kt.Series):this.setMarkStyle(t,{x:0,y:e=>{var i,r;return Ue(this.dataToPositionY(e),(r=(i=this._yAxisHelper)===null||i===void 0?void 0:i.getScale)===null||r===void 0?void 0:r.call(i,0))-this._spec.bandWidth/2},height:this._spec.bandWidth,width:()=>this._scaleX.range()[1],cornerRadius:this._spec.cornerRadius},"normal",kt.Series))}_initProgressGroupMark(){return this._progressGroupMark=this._createMark(sc.mark.group,{skipBeforeLayouted:!1}),this._progressGroupMark}_initProgressGroupMarkStyle(){const t=this._progressGroupMark;t.setZIndex(this.layoutZIndex),t.created(),this.setMarkStyle(t,{clip:!0,x:0,y:0,path:()=>{var e;const i=[];return(e=this._rawData)===null||e===void 0||e.rawData.forEach((r,s)=>{var a,o,l,u;if(this._spec.direction==="vertical"){const h=Ue(this.dataToPositionX(r),(o=(a=this._xAxisHelper)===null||a===void 0?void 0:a.getScale)===null||o===void 0?void 0:o.call(a,0))-this._spec.bandWidth/2,c=this._scaleY.range()[0];i.push(ep({x:h,y:0,height:c,width:this._spec.bandWidth,cornerRadius:this._spec.cornerRadius,fill:!0}))}else{const h=Ue(this.dataToPositionY(r),(u=(l=this._yAxisHelper)===null||l===void 0?void 0:l.getScale)===null||u===void 0?void 0:u.call(l,0))-this._spec.bandWidth/2,c=this._scaleX.range()[1];i.push(ep({x:0,y:h,height:this._spec.bandWidth,width:c,cornerRadius:this._spec.cornerRadius,fill:!0}))}}),i}},"normal",kt.Series),this._progressGroupMark.setInteractive(!1)}initInteraction(){const t=[];this._trackMark&&t.push(this._trackMark),this._progressMark&&t.push(this._progressMark),this._parseInteractionConfig(t)}initAnimation(){var t,e,i,r;const s={direction:this.direction},a=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset;this._progressMark.setAnimationConfig(Ae((i=Z.getAnimationInKey("linearProgress"))===null||i===void 0?void 0:i(s,a),Ee("progress",this._spec,this._markAttributeContext))),this._trackMark.setAnimationConfig(Ae((r=Z.getAnimationInKey("fadeInOut"))===null||r===void 0?void 0:r(),Ee("track",this._spec,this._markAttributeContext)))}initTooltip(){this._tooltipHelper=new eWt(this),this._progressMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._progressMark),this._trackMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._trackMark)}getActiveMarks(){return[this._progressMark]}}sc.type=at.linearProgress,sc.mark=Tet;const iWt=()=>{Yu(),tWt(),$u(),Z.registerSeries(sc.type,sc)},uG=[0],nWt="hidden",hG=20,rWt=[20,40],sWt=[200,500],aWt="circle",oWt={shrink:!1,enlarge:!1,fontSizeLimitMin:0},lWt=!0,cG=1,uWt=["triangleForward","triangle","diamond","square","star","cardioid","circle","pentagon","rect"],XE=`${Kt}_WORD_CLOUD_WEIGHT`,dG=`${Kt}_WORD_CLOUD_TEXT`;class hm extends gp{constructor(){super(...arguments),this._fontSizeRange=[hG,hG],this._isWordCloudShape=!1,this._dataChange=!0,this.getWordColor=t=>t.isFillingWord?(this._fillingColorCallback&&!this._dataChange||(this._fillingColorCallback=this._wordCloudShapeConfig.fillingColorHexField?e=>e[this._wordCloudShapeConfig.fillingColorHexField]:this.initColorCallback(this._wordCloudShapeConfig.fillingSeriesField,!0)),this._fillingColorCallback(t)):(this._keyWordColorCallback&&!this._dataChange||(this._keyWordColorCallback=this._colorHexField?e=>e[this._colorHexField]:this.initColorCallback(this._seriesField,!1)),this._keyWordColorCallback(t))}setValueField(t){z(t)&&(this._valueField=t)}setFontSizeRange(t){z(t)?this._fontSizeRange=t:this._fontSizeRange=rWt}setAttrFromSpec(){var t,e,i,r,s,a,o,l,u,h;super.setAttrFromSpec(),this._padding=this._option.getChart().padding,this._nameField=this._spec.nameField,this._fontFamilyField=this._spec.fontFamilyField,this._fontWeightField=this._spec.fontWeightField,this._fontStyleField=this._spec.fontStyleField,this._colorHexField=this._spec.colorHexField,this._colorMode=(t=this._spec.colorMode)!==null&&t!==void 0?t:"ordinal",this._colorList=this._spec.colorList,this.setValueField(this._spec.valueField),this._fontWeightRange=(e=this._spec.fontWeightRange)!==null&&e!==void 0?e:sWt,this._rotateAngles=(i=this._spec.rotateAngles)!==null&&i!==void 0?i:uG,this.setFontSizeRange(this._spec.fontSizeRange),this._maskShape=(r=this._spec.maskShape)!==null&&r!==void 0?r:aWt,this._keepAspect=this._spec.keepAspect,this._random=(s=this._spec.random)!==null&&s!==void 0?s:lWt,this._fontPadding=(o=(a=this._spec.word)===null||a===void 0?void 0:a.padding)!==null&&o!==void 0?o:cG,this._textField=!((l=this._spec.word)===null||l===void 0)&&l.formatMethod?dG:this._nameField,this._wordCloudConfig=Object.assign({drawOutOfBound:nWt,layoutMode:"default",zoomToFit:oWt},this._spec.wordCloudConfig),this._wordCloudShapeConfig=Object.assign({fillingSeriesField:this.getSeriesField(),fillingRotateAngles:uG,layoutMode:"default"},this._spec.wordCloudShapeConfig),this._fillingFontPadding=(h=(u=this._spec.fillingWord)===null||u===void 0?void 0:u.padding)!==null&&h!==void 0?h:cG,this._isWordCloudShape=!uWt.includes(this._maskShape),this._defaultFontFamily=this._option.getTheme().fontFamily}initData(){var t,e;super.initData(),(e=(t=this.getViewData())===null||t===void 0?void 0:t.target)===null||e===void 0||e.addListener("change",()=>{this._dataChange=!0,this.compile()})}initMark(){this._wordMark=this._createMark(hm.mark.word,{key:Ka,defaultMorphElementKey:this._seriesField,groupKey:this._seriesField,isSeriesMark:!0})}initMarkStyle(){var t,e,i;const r=this._wordMark,s=(t=this._spec.word)!==null&&t!==void 0?t:{};r&&(this.setMarkStyle(r,{fill:this.getWordColor,text:a=>a[this._textField],x:a=>a.x,y:a=>a.y,fontFamily:a=>a.fontFamily,fontSize:a=>a.fontSize,fontStyle:a=>a.fontStyle,fontWeight:a=>a.fontWeight,angle:a=>a.angle,visible:a=>a.visible},"normal",kt.Series),this.setMarkStyle(r,{fontFamily:(i=(e=s.style)===null||e===void 0?void 0:e.fontFamily)!==null&&i!==void 0?i:this._defaultFontFamily},"normal",kt.User_Mark))}initTooltip(){super.initTooltip(),this._wordMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._wordMark)}initAnimation(){var t,e;const i=this._wordMark;if(i){const r=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset,s={animationConfig:()=>{var a,o;return(o=(a=i.getAnimationConfig())===null||a===void 0?void 0:a.appear)===null||o===void 0?void 0:o[0]}};i.setAnimationConfig(Ae(Z.getAnimationInKey("wordCloud")(s,r),Ee("word",this._spec,this._markAttributeContext)))}}getWordOrdinalColorScale(t,e){var i,r,s,a,o;const l=e?this._wordCloudShapeConfig.fillingColorList:this._colorList,u=t?(i=this.getViewData())===null||i===void 0?void 0:i.latestData.map(c=>c[t]):[],h=(s=l??((r=this._option.globalScale.getScale("color"))===null||r===void 0?void 0:r.range()))!==null&&s!==void 0?s:this._getDataScheme();return(o=(a=new O1().domain(u)).range)===null||o===void 0?void 0:o.call(a,h)}initColorCallback(t,e){var i;if(this._colorMode==="ordinal"){const s=this.getWordOrdinalColorScale(t,e);return a=>{var o;return s.scale(a[(o=this._seriesField)!==null&&o!==void 0?o:Ls])}}let r=(i=e?this._colorList:this._wordCloudShapeConfig.fillingColorList)!==null&&i!==void 0?i:this._option.globalScale.getScale("color").range();return r.length===1&&(r=[r[0],r[0]]),s=>r[0]}compile(){var t,e;super.compile();const{width:i,height:r}=this._region.getLayoutRect();if(!st(i)||!st(r)||!(r>0&&i>0))return;const s=[],a=this._valueField,o=new to,l=this._fontWeightRange;if(a){const[h,c]=_L((t=this.getViewData())===null||t===void 0?void 0:t.latestData.map(d=>+d[a]));o.domain([h,c],!0).range(l),s.push({type:"map",as:XE,callback:d=>h===c?o.scale(c):o.scale(d[a])})}const u=(e=this._spec.word)!==null&&e!==void 0?e:{};u.formatMethod&&s.push({type:"map",as:dG,callback:u.formatMethod}),this._isWordCloudShape?s.push(Object.assign({type:"wordcloudShape"},this._wordCloudShapeTransformOption())):s.push(Object.assign({type:"wordcloud"},this._wordCloudTransformOption())),this._wordMark.getProduct().transform(s)}_wordCloudTransformOption(){var t,e,i,r,s;const{width:a,height:o}=this._region.getLayoutRect(),l=(e=(t=this._spec.word)===null||t===void 0?void 0:t.style)!==null&&e!==void 0?e:{};return{layoutType:ga(this._option.mode)?this._wordCloudConfig.layoutMode:"fast",size:[a,o],shape:this._maskShape,dataIndexKey:Ka,text:{field:this._textField},fontSize:this._valueField?{field:this._valueField}:this._fontSizeRange[0],fontSizeRange:this._fontSizeRange==="auto"?null:this._fontSizeRange,padding:this._fontPadding,rotate:this._rotateAngles,fontFamily:(r=(i=this._fontFamilyField)!==null&&i!==void 0?i:l.fontFamily)!==null&&r!==void 0?r:this._defaultFontFamily,fontWeight:this._fontWeightField?{field:this._fontWeightField}:this._valueField?{field:XE}:null,fontStyle:(s=this._fontStyleField)!==null&&s!==void 0?s:l.fontStyle,randomVisible:this._random,clip:this._wordCloudConfig.drawOutOfBound==="clip",shrink:this._wordCloudConfig.zoomToFit.shrink,enlarge:this._wordCloudConfig.zoomToFit.enlarge,minFontSize:this._wordCloudConfig.zoomToFit.fontSizeLimitMin,progressiveTime:this._wordCloudConfig.progressiveTime,progressiveStep:this._wordCloudConfig.progressiveStep}}_wordCloudShapeTransformOption(){var t,e,i,r,s,a,o,l,u,h;const{width:c,height:d}=this._region.getLayoutRect(),p=(e=(t=this._spec.word)===null||t===void 0?void 0:t.style)!==null&&e!==void 0?e:{},f=(i=this._wordCloudShapeConfig)!==null&&i!==void 0?i:{},g=this._wordCloudShapeConfig.fillingRotateAngles;return{dataIndexKey:Ka,size:[c,d],shape:this._maskShape,text:{field:this._textField},fontSize:this._valueField?{field:this._valueField}:this._fontSizeRange[0],fontSizeRange:this._fontSizeRange==="auto"?null:this._fontSizeRange,padding:this._fontPadding,rotateList:this._rotateAngles,fontFamily:(s=(r=this._fontFamilyField)!==null&&r!==void 0?r:p.fontFamily)!==null&&s!==void 0?s:this._defaultFontFamily,fontWeight:this._fontWeightField?{field:this._fontWeightField}:this._valueField?{field:XE}:null,fontStyle:(a=this._fontStyleField)!==null&&a!==void 0?a:p.fontStyle,fillingFontFamily:(l=(o=f.fillingFontFamilyField)!==null&&o!==void 0?o:p.fontFamily)!==null&&l!==void 0?l:this._defaultFontFamily,fillingPadding:this._fillingFontPadding,fillingFontStyle:(u=f.fillingFontStyleField)!==null&&u!==void 0?u:p.fontStyle,fillingFontWeight:(h=f.fillingFontWeightField)!==null&&h!==void 0?h:p.fontWeight,fillingRotateList:g,fillingTimes:f.fillingTimes,fillingXStep:f.fillingXStep,fillingYStep:f.fillingYStep,fillingXRatioStep:f.fillingXRatioStep,fillingYRatioStep:f.fillingYRatioStep,fillingInitialOpacity:f.fillingInitialOpacity,fillingDeltaOpacity:f.fillingDeltaOpacity,fillingInitialFontSize:f.fillingInitialFontSize,fillingDeltaFontSize:f.fillingDeltaFontSize,ratio:f.ratio,fillingRatio:f.fillingRatio,removeWhiteBorder:f.removeWhiteBorder,textLayoutTimes:f.textLayoutTimes,fontSizeShrinkFactor:f.fontSizeShrinkFactor,stepFactor:f.stepFactor,layoutMode:f.layoutMode,importantWordCount:f.importantWordCount,globalShinkLimit:f.globalShinkLimit,fontSizeEnlargeFactor:f.fontSizeEnlargeFactor,fillingDeltaFontSizeFactor:f.fillingDeltaFontSizeFactor}}getStatisticFields(){const t=[];return t.push({key:this._nameField,operations:["values"]}),t.push({key:this._valueField,operations:["max","min"]}),t}dataToPosition(t){return null}dataToPositionX(t){return null}dataToPositionY(t){return null}dataToPositionZ(t){return null}valueToPosition(t,e){return null}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}onLayoutEnd(t){super.onLayoutEnd(t),this.compile(),this._dataChange=!1}getActiveMarks(){return[this._wordMark]}reInit(){super.reInit(),this._keyWordColorCallback&&(this._keyWordColorCallback=null),this._fillingColorCallback&&(this._fillingColorCallback=null)}}hm.mark=hD;const hWt=n=>({custom:aMt,customParameters:(t,e)=>n,easing:"linear",loop:1/0,duration:6e3});function cWt(n,t,e){return n*e<t?n+(t-e*n)/(e-1):(t-n)/(e-1)}const dWt=n=>({channel:{fontSize:{from:0}},duration:200,delay:(t,e,i)=>{const r=n.animationConfig(),s=(r==null?void 0:r.duration)||200,a=(r==null?void 0:r.totalTime)||Rh.appear.duration,o=i.VGRAMMAR_ANIMATION_PARAMETERS.elementCount;return i.VGRAMMAR_ANIMATION_PARAMETERS.elementIndex*cWt(s,a,o)}});function pWt(n,t){return t===!1?{}:t==="fadeIn"?{type:"fadeIn"}:dWt(n)}const Ont=()=>{Z.registerAnimation("wordCloud",(n,t)=>({appear:pWt(n,t),enter:{type:"fadeIn"},exit:{type:"fadeOut"},disappear:{type:"fadeOut"}}))},Rnt=()=>{Z.registerAnimation("wordCloud3d",n=>({appear:hWt(n)}))},KE={triangleForward:vWt,triangleUpright:pG,triangle:pG,diamond:fWt,square:mWt,star:gWt,cardioid:_Wt,circle:yWt,pentagon:bWt};function fWt(){return function(n){const t=n%(2*Math.PI/4);return 1/(Math.cos(t)+Math.sin(t))}}function gWt(){return function(n){const t=(n+.955)%(2*Math.PI/10);return(n+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-t)+3.07768*Math.sin(2*Math.PI/10-t)):1/(Math.cos(t)+3.07768*Math.sin(t))}}function mWt(){return function(n){return Math.min(1/Math.abs(Math.cos(n)),1/Math.abs(Math.sin(n)))}}function pG(){return function(n){const t=(n+3*Math.PI/2)%(2*Math.PI/3);return 1/(Math.cos(t)+Math.sqrt(3)*Math.sin(t))}}function vWt(){return function(n){const t=n%(2*Math.PI/3);return 1/(Math.cos(t)+Math.sqrt(3)*Math.sin(t))}}function _Wt(){return function(n){return 1-Math.sin(n)}}function yWt(){return function(){return 1}}function bWt(){return function(n){const t=(n+.955)%(2*Math.PI/5);return 1/(Math.cos(t)+.726543*Math.sin(t))}}function Int(n,t){const e=t[0],i=t[1];let r=1;const s=[t[0]>>1,t[1]>>1];switch(n){case"cardioid":s[1]=~~(i/2.7*.6),r=Math.floor(Math.min(e/2.3,i/2.6));break;case"triangleForward":r=i/Math.sqrt(.75)>e?Math.floor(e/2):Math.floor(i/(2*Math.sqrt(.75)));break;case"triangle":case"triangleUpright":s[1]=~~(i/1.5),r=Math.floor(Math.min(i/1.5,e/2));break;case"rect":r=Math.floor(Math.max(i/2,e/2));break;default:r=Math.floor(Math.min(e/2,i/2))}return{maxRadius:r,center:s}}const xWt=n=>KE[n]?KE[n]():KE.circle(),fG=(n,t)=>"hsl("+(360*Math.random()).toFixed()+","+(30*Math.random()+70).toFixed()+"%,"+(Math.random()*(t-n)+n).toFixed()+"%)";function id(n){return ft(n)?n:function(){return n}}class Wm{constructor(t){var e,i;switch(this.options=gt({},Wm.defaultOptions,t),ft(this.options.shape)?this.shape=this.options.shape:this.shape=xWt(this.options.shape),this.getText=(e=id(this.options.text))!==null&&e!==void 0?e:r=>r,this.getTextFontWeight=id(this.options.fontWeight),this.getTextFontSize=id(this.options.fontSize),this.getTextFontStyle=id(this.options.fontStyle),this.getTextFontFamily=id(this.options.fontFamily),this.outputCallback=(i=this.options.outputCallback)!==null&&i!==void 0?i:r=>r,this.options.color){case"random-dark":this.getTextColor=()=>fG(10,50);break;case"random-light":this.getTextColor=()=>fG(50,90);break;default:this.getTextColor=id(this.options.color)}if(F(this.options.rotate))if(this.options.useRandomRotate){const r=Math.abs(this.options.maxRotation-this.options.minRotation),s=Math.abs(Math.floor(this.options.rotationSteps)),a=Math.min(this.options.maxRotation,this.options.minRotation);this.getTextRotate=()=>this.options.rotateRatio===0||Math.random()>this.options.rotateRatio?0:r===0?a:s>0?a+Math.floor(Math.random()*s)*r/(s-1):a+Math.random()*r}else this.getTextRotate=()=>0;else this.getTextRotate=ft(this.options.rotate)?r=>{var s;return qe((s=this.options.rotate(r))!==null&&s!==void 0?s:0)}:(r,s)=>{const a=ot(this.options.rotate),o=this.options.random?Math.random():RCt(s);return qe(a[Math.floor(o*a.length)])}}exceedTime(){var t;return this.options.progressiveStep>0?this.progressiveIndex>=(((t=this.currentStepIndex)!==null&&t!==void 0?t:0)+1)*this.options.progressiveStep:this.options.progressiveTime>0&&new Date().getTime()-this.escapeTime>this.options.progressiveTime}progressiveRun(){var t;if(this.options.progressiveStep>0?this.currentStepIndex=((t=this.currentStepIndex)!==null&&t!==void 0?t:0)+1:this.options.progressiveTime>0&&(this.escapeTime=Date.now()),this.data&&this.progressiveIndex&&this.progressiveIndex<this.data.length){this.progressiveResult=[];const e=this.data.length;let i=this.progressiveIndex;for(;i<e&&(this.layoutWord(i),i++,this.progressiveIndex=i,!this.exceedTime()););return this.progressiveResult}return this.result}initProgressive(){this.progressiveIndex=-1,this.options.progressiveStep>0?this.currentStepIndex=0:this.options.progressiveTime>0&&(this.escapeTime=Date.now()),this.progressiveResult=[]}output(){return this.result?this.outputCallback(this.result):null}progressiveOutput(){return this.progressiveResult?this.outputCallback(this.progressiveResult):null}unfinished(){return this.data&&this.data.length&&!F(this.progressiveIndex)&&this.progressiveIndex<this.data.length}release(){this.data=null,this.result=null,this.progressiveIndex=null,this.progressiveResult=null}}Wm.defaultOptions={fontFamily:'"Trebuchet MS", "Heiti TC", "微軟正黑體", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",fontStyle:"normal",minFontSize:12,drawOutOfBound:!1,shrink:!1,minRotation:-Math.PI/2,maxRotation:Math.PI/2,rotationSteps:0,rotateRatio:.1,random:!1,shape:"circle",progressiveTime:0,progressiveStep:0,backgroundColor:"#fff"};const gG={archimedean:SWt,rectangular:AWt};function SWt(n){const t=n[0]/n[1];return e=>[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}function AWt(n){const t=4*n[0]/n[1];let e=0,i=0;return r=>{const s=r<0?-1:1;switch(Math.sqrt(1+4*s*r)-s&3){case 0:e+=t;break;case 1:i+=4;break;case 2:e-=t;break;default:i-=4}return[e,i]}}class Ag extends Wm{constructor(t){var e;super(gt({},Ag.defaultOptions,t)),this.cw=64,this.ch=2048,this._size=[256,256],this._isBoardExpandCompleted=!1,this._placeStatus=0,this._tTemp=null,this._dtTemp=null,this._dy=0,this.cacheMap=new Map,this.options.minFontSize<=Ag.defaultOptions.minFontSize&&(this.options.minFontSize=Ag.defaultOptions.minFontSize),this.spiral=It(this.options.spiral)?(e=gG[this.options.spiral])!==null&&e!==void 0?e:gG.archimedean:this.options.spiral,this.random=this.options.random?Math.random:()=>1,this.getTextPadding=id(this.options.padding)}zoomRatio(){return this._originSize[0]/this._size[0]}dy(){return this._dy}layoutWord(t){const e=this.data[t];if((""+e.text).trim()==="")return!0;const{maxRadius:i,center:r}=Int(this.options.shape,this._size);if(e.x=r[0],e.y=r[1],wWt(this.contextAndRatio,e,this.data,t,this.cw,this.ch),this._placeStatus=0,e.hasText&&this.place(this._board,e,this._bounds,i))return this.result.push(e),this._bounds?kWt(this._bounds,e):this._bounds=[{x:e.x+e.x0,y:e.y+e.y0},{x:e.x+e.x1,y:e.y+e.y1}],e.x-=this._size[0]>>1,e.y-=this._size[1]>>1,this._tTemp=null,this._dtTemp=null,!0;if(this.updateBoardExpandStatus(e.fontSize),e.hasText&&this.shouldShrinkContinue()){if(this._placeStatus===1){const s=e.fontSize*this._originSize[0]/this.options.minFontSize,a=Math.max(e.width,e.height);if(a<=s)this.expandBoard(this._board,this._bounds,a/this._size[0]);else{if(!this.options.clip)return!0;this.expandBoard(this._board,this._bounds,s/this._size[0])}}else this._placeStatus,this.expandBoard(this._board,this._bounds);return this.updateBoardExpandStatus(e.fontSize),!1}return this._tTemp=null,this._dtTemp=null,!0}layout(t,e){this.initProgressive(),this.result=[],this._size=[e.width,e.height],this.clearCache(),this._originSize=[...this._size];const i=this.getContext(_e.createCanvas({width:1,height:1}));this.contextAndRatio=i,this._board=new Array((this._size[0]>>5)*this._size[1]).fill(0),this._bounds=null;const r=t.length;let s=0;this.result=[];const a=t.map((l,u)=>({text:this.getText(l),fontFamily:this.getTextFontFamily(l),fontStyle:this.getTextFontStyle(l),fontWeight:this.getTextFontWeight(l),angle:this.getTextRotate(l,u),fontSize:~~this.getTextFontSize(l),padding:this.getTextPadding(l),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:l,x:0,y:0,width:0,height:0})).sort(function(l,u){return u.fontSize-l.fontSize});this.data=a;let o=0;for(;s<r&&(this.layoutWord(s)||o>=2?(s++,o=0):o++,this.progressiveIndex=s,!this.exceedTime()););if(!this.options.clip&&this.options.enlarge&&this._bounds&&this.shrinkBoard(this._bounds),this._bounds&&["cardioid","triangle","triangle-upright"].includes(this.options.shape)){const l=(this._bounds[0].y+this._bounds[1].y)/2;this._dy=-(l-this._size[1]/2)}return this.result}formatTagItem(t){const e=this._size,i=this.zoomRatio(),r=this.dy(),s=e[0]>>1,a=e[1]>>1,o=t.length,l=[];let u,h;for(let c=0;c<o;++c)u=t[c],h={},h.datum=u.datum,h.x=(u.x+s)*i,h.y=(u.y+a+r)*i,h.fontFamily=u.fontFamily,h.fontSize=u.fontSize*i,h.fontStyle=u.fontStyle,h.fontWeight=u.fontWeight,h.angle=u.angle,l.push(h);return l}output(){return this.outputCallback?this.outputCallback(this.formatTagItem(this.result)):this.formatTagItem(this.result)}progressiveOutput(){return this.outputCallback?this.outputCallback(this.formatTagItem(this.progressiveResult)):this.formatTagItem(this.progressiveResult)}updateBoardExpandStatus(t){this._isBoardExpandCompleted=t*(this._originSize[0]/this._size[0])<this.options.minFontSize}shouldShrinkContinue(){return!this.options.clip&&this.options.shrink&&!this._isBoardExpandCompleted}shrinkBoard(t){const e=t[0],i=t[1];if(i.x>=this._size[0]||i.y>=this._size[1])return;const r=Math.min(e.x,this._size[0]-i.x),s=Math.min(e.y,this._size[1]-i.y),a=2*Math.min(r/this._size[0],s/this._size[1]);this._size=this._size.map(o=>o*(1-a))}expandBoard(t,e,i){const r=this._size[0]*(i||1.1)-this._size[0]>>5;let s=2*r>2?r:2;s%2!=0&&s++;let a=Math.ceil(this._size[1]*(s<<5)/this._size[0]);a%2!=0&&a++;const o=this._size[0],l=this._size[1],u=new Array(s).fill(0),h=new Array(a/2*(s+(o>>5))).fill(0);this.insertZerosToArray(t,l*(o>>5),h.length+s/2);for(let c=l-1;c>0;c--)this.insertZerosToArray(t,c*(o>>5),u.length);this.insertZerosToArray(t,0,h.length+s/2),this._size=[o+(s<<5),l+a],e&&(e[0].x+=(s<<5)/2,e[0].y+=a/2,e[1].x+=(s<<5)/2,e[1].y+=a/2)}insertZerosToArray(t,e,i){const r=Math.floor(i/6e4),s=i%6e4;for(let a=0;a<r;a++)t.splice(e+6e4*a,0,...new Array(6e4).fill(0));t.splice(e+6e4*r,0,...new Array(s).fill(0))}getContext(t){t.width=1,t.height=1;const e=t.getContext("2d").getImageData(0,0,1,1),i=Math.sqrt(e.data.length>>2);t.width=(this.cw<<5)/i,t.height=this.ch/i;const r=t.getContext("2d");return r.fillStyle=r.strokeStyle="red",r.textAlign="center",{context:r,ratio:i,canvas:t}}place(t,e,i,r){let s=!1;if(this.shouldShrinkContinue()&&(e.width>this._size[0]||e.height>this._size[1]))return this._placeStatus=1,!1;const a=this.random()<.5?1:-1;if(!this.shouldShrinkContinue()&&this.isSizeLargerThanMax(e,a))return null;const o=e.x,l=e.y,u=Math.sqrt(this._size[0]*this._size[0]+this._size[1]*this._size[1]),h=this.spiral(this._size);let c,d,p,f,g=-a;for(this._tTemp=null,this._dtTemp=null;c=h(g+=a);){d=c[0],p=c[1];const _=Math.sqrt(d**2+p**2);let v=Math.atan(p/d);d<0?v+=Math.PI:p<0&&(v=2*Math.PI+v);const y=this.shape(v);if(Math.min(Math.abs(d),Math.abs(p))>=u)break;if(_>=r)s&&this._tTemp===null&&(this._tTemp=g,this._dtTemp=a);else{if(e.x=o+~~(_*y*Math.cos(-v)),e.y=l+~~(_*y*Math.sin(-v)),f=e,this.options.clip)if(this.shouldShrinkContinue()){if(qE(f,this._size)){s&&this._tTemp===null&&(this._tTemp=g,this._dtTemp=a);continue}}else{if(MWt(f,this._size)){s&&this._tTemp===null&&(this._tTemp=g,this._dtTemp=a);continue}qE(f,this._size)&&(f=PWt(f,this._size))}else if(qE(f,this._size)){s&&this._tTemp===null&&(this._tTemp=g,this._dtTemp=a);continue}if(s=!0,(!i||TWt(f,i))&&(!i||!CWt(f,t,this._size))){const b=f.sprite,S=f.width>>5,A=this._size[0]>>5,w=f.x-(S<<4),C=127&w,k=32-C,M=f.y1-f.y0;let P,E=(f.y+f.y0)*A+(w>>5);for(let I=0;I<M;I++){P=0;for(let D=0;D<=S;D++)t[E+D]|=P<<k|(D<S?(P=b[I*S+D])>>>C:0);E+=A}return e.sprite=null,f.sprite=null,!0}}}return this._tTemp!==null&&(this._placeStatus=3),!this.shouldShrinkContinue()&&this.setCache(f,a),!1}clearCache(){this.cacheMap.clear()}setCache(t,e){const i=`${t.angle}-${e}`,r=t.x1-t.x0,s=t.y1-t.y0;if(!this.cacheMap.has(i))return void this.cacheMap.set(i,{width:r,height:s});const{width:a,height:o}=this.cacheMap.get(i);(r<a&&s<o||r<=a&&s<o)&&this.cacheMap.set(i,{width:r,height:s})}isSizeLargerThanMax(t,e){const i=`${t.angle}-${e}`;if(!this.cacheMap.has(i))return!1;const{width:r,height:s}=this.cacheMap.get(i),a=t.x1-t.x0,o=t.y1-t.y0;return a>=r&&o>=s}}function wWt(n,t,e,i,r,s){if(t.sprite)return;const a=n.context,o=n.ratio;a.setTransform(o,0,0,o,0,0),a.clearRect(0,0,(r<<5)/o,s/o);let l=0,u=0,h=0;const c=e.length;let d,p,f,g,_;for(--i;++i<c;){if(t=e[i],a.save(),a.font=t.fontStyle+" "+t.fontWeight+" "+~~((t.fontSize+1)/o)+"px "+t.fontFamily,d=a.measureText(t.text+"m").width*o,f=t.fontSize<<1,t.angle){const b=Math.sin(t.angle),S=Math.cos(t.angle),A=d*S,w=d*b,C=f*S,k=f*b;d=Math.max(Math.abs(A+k),Math.abs(A-k))+31>>5<<5,f=~~Math.max(Math.abs(w+C),Math.abs(w-C))}else d=d+31>>5<<5;if(f>h&&(h=f),l+d>=r<<5&&(l=0,u+=h,h=0),u+f>=s)break;a.translate((l+(d>>1))/o,(u+(f>>1))/o),t.angle&&a.rotate(t.angle),a.fillText(t.text,0,0),t.padding&&(a.lineWidth=2*t.padding,a.strokeText(t.text,0,0)),a.restore(),t.width=d,t.height=f,t.xoff=l,t.yoff=u,t.x1=d>>1,t.y1=f>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,l+=d}const v=a.getImageData(0,0,(r<<5)/o,s/o).data,y=[];for(;--i>=0;){if(!(t=e[i]).hasText)continue;for(d=t.width,p=d>>5,f=t.y1-t.y0,g=0;g<f*p;g++)y[g]=0;if(l=t.xoff,l==null)return;u=t.yoff;let b=0,S=-1;for(_=0;_<f;_++){for(g=0;g<d;g++){const A=p*_+(g>>5),w=v[(u+_)*(r<<5)+(l+g)<<2]?1<<31-g%32:0;y[A]|=w,b|=w}b?S=_:(t.y0++,f--,_--,u++)}t.y1=t.y0+S,t.sprite=y.slice(0,(t.y1-t.y0)*p)}}function CWt(n,t,e){const i=e[0]>>5,r=n.sprite,s=n.width>>5,a=n.x-(s<<4),o=127&a,l=32-o,u=n.y1-n.y0;let h,c=(n.y+n.y0)*i+(a>>5);for(let d=0;d<u;d++){h=0;for(let p=0;p<=s;p++)if((h<<l|(p<s?(h=r[d*s+p])>>>o:0))&t[c+p])return!0;c+=i}return!1}function kWt(n,t){const e=n[0],i=n[1];t.x+t.x0<e.x&&(e.x=t.x+t.x0),t.y+t.y0<e.y&&(e.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function TWt(n,t){return n.x+n.x1>t[0].x&&n.x+n.x0<t[1].x&&n.y+n.y1>t[0].y&&n.y+n.y0<t[1].y}Ag.defaultOptions={enlarge:!1,minFontSize:2};const MWt=(n,t)=>n.x+n.x0>t[0]||n.y+n.y0>t[0]||n.x+n.x1<0||n.y+n.y1<0,qE=(n,t)=>n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>t[0]||n.y+n.y1>t[1];function PWt(n,t){const e=n.sprite,i=n.y1-n.y0,r=n.width>>5;let s=0;const a=[],o=Math.max(-(n.y0+n.y),0),l=Math.min(i+(t[1]-(n.y1+n.y)),i),u=Math.max(-(n.x0+n.x),0)>>5,h=Math.min(r+(t[0]-(n.x1+n.x)>>5)+1,r);for(let g=0;g<i;g++){for(let _=0;_<r;_++)g<o||l<=g||_<u||h<=_||a.push(e[s+_]);s+=r}const c=u<<5,d=r-h<<5,p=o,f=i-l;return Object.assign(Object.assign({},n),{width:n.width-c-d,height:n.height-p-f,x0:n.x0+c,x1:n.x1-d,y0:n.y0+p,y1:n.y1-f,x:n.x+c/2-d/2,sprite:a})}let Lnt=class Dnt extends Wm{constructor(t){super(gt({},Dnt.defaultOptions,t)),this.fillGridAt=(e,i)=>{e>=this.ngx||i>=this.ngy||e<0||i<0||(this.grid[e][i]=!1)},this.updateGrid=(e,i,r,s,a)=>{const o=a.occupied;let l=o.length;for(;l--;){const u=e+o[l][0],h=i+o[l][1];u>=this.ngx||h>=this.ngy||u<0||h<0||this.fillGridAt(u,h)}},this.gridSize=Math.max(Math.floor(this.options.gridSize),4)}getPointsAtRadius(t){if(this.pointsAtRadius[t])return this.pointsAtRadius[t];const e=8*t;let i=e;const r=[];for(t===0&&r.push([this.center[0],this.center[1],0]);i--;){const s=this.shape(i/e*2*Math.PI);r.push([this.center[0]+t*s*Math.cos(-i/e*2*Math.PI),this.center[1]+t*s*Math.sin(-i/e*2*Math.PI)*this.options.ellipticity,i/e*2*Math.PI])}return this.pointsAtRadius[t]=r,r}getTextInfo(t,e=1,i){var r;const s=this.options.clip?1:e,a=Math.max(Math.floor(this.getTextFontSize(t)*s),this.options.minFontSize);let o=this.getText(t)+"";if(this.options.clip&&(o=o.slice(0,Math.ceil(o.length*e))),!o)return null;const l=this.getTextFontWeight(t),u=this.getTextFontStyle(t),h=this.getTextRotate&&(r=this.getTextRotate(t,i))!==null&&r!==void 0?r:0,c=this.getTextFontFamily(t),d=document.createElement("canvas"),p=d.getContext("2d",{willReadFrequently:!0});p.font=u+" "+l+" "+a.toString(10)+"px "+c;const f=p.measureText(o).width,g=Math.max(a,p.measureText("m").width,p.measureText("Ｗ").width);let _=f+2*g,v=3*g;const y=Math.ceil(_/this.gridSize),b=Math.ceil(v/this.gridSize);_=y*this.gridSize,v=b*this.gridSize;const S=-f/2,A=.4*-g,w=Math.ceil((_*Math.abs(Math.sin(h))+v*Math.abs(Math.cos(h)))/this.gridSize),C=Math.ceil((_*Math.abs(Math.cos(h))+v*Math.abs(Math.sin(h)))/this.gridSize),k=C*this.gridSize,M=w*this.gridSize;d.setAttribute("width",""+k),d.setAttribute("height",""+M),p.scale(1,1),p.translate(k/2,M/2),p.rotate(-h),p.font=u+" "+l+" "+a.toString(10)+"px "+c,p.fillStyle="#000",p.textBaseline="middle",p.fillText(o,S,A);const P=p.getImageData(0,0,k,M).data;if(this.exceedTime())return null;const E=[];let I,D=C;const N=[w/2,C/2,w/2,C/2],O=(L,H,j)=>{let G=this.gridSize;for(;G--;){let U=this.gridSize;for(;U--;)if(P[4*((H*this.gridSize+G)*k+(L*this.gridSize+U))+3])return j.push([L,H]),L<N[3]&&(N[3]=L),L>N[1]&&(N[1]=L),H<N[0]&&(N[0]=H),void(H>N[2]&&(N[2]=H))}};for(;D--;)for(I=w;I--;)O(D,I,E);return{datum:t,occupied:E,bounds:N,gw:C,gh:w,fillTextOffsetX:S,fillTextOffsetY:A,fillTextWidth:f,fillTextHeight:g,fontSize:a,fontStyle:u,fontWeight:l,fontFamily:c,angle:h,text:o}}canFitText(t,e,i,r,s){let a=s.length;for(;a--;){const o=t+s[a][0],l=e+s[a][1];if(o>=this.ngx||l>=this.ngy||o<0||l<0){if(!this.options.drawOutOfBound)return!1}else if(!this.grid[o][l])return!1}return!0}layoutWord(t,e=1){const i=this.data[t],r=this.getTextInfo(i,e,t);if(!r||this.exceedTime())return!1;if(!this.options.drawOutOfBound&&(!this.options.shrink||r.fontSize<=this.options.minFontSize)&&!this.options.clip){const o=r.bounds;if(o[1]-o[3]+1>this.ngx||o[2]-o[0]+1>this.ngy)return!1}let s=this.maxRadius+1;const a=o=>{const l=Math.floor(o[0]-r.gw/2),u=Math.floor(o[1]-r.gh/2),h=r.gw,c=r.gh;return!!this.canFitText(l,u,h,c,r.occupied)&&(r.distance=this.maxRadius-s,r.theta=o[2],this.outputText(l,u,r),this.updateGrid(l,u,h,c,r),!0)};for(;s--;){let o=this.getPointsAtRadius(this.maxRadius-s);if(this.options.random&&(o=[].concat(o),Bq(o)),o.some(a))return!0}return(this.options.clip||!!(this.options.shrink&&r.fontSize>this.options.minFontSize))&&this.layoutWord(t,.75*e)}outputText(t,e,i){const r=this.getTextColor(i),s={text:i.text,datum:i.datum,color:r,fontStyle:i.fontStyle,fontWeight:i.fontWeight,fontFamily:i.fontFamily,angle:i.angle,width:i.fillTextWidth,height:i.fillTextHeight,x:(t+i.gw/2)*this.gridSize,y:(e+i.gh/2)*this.gridSize+i.fillTextOffsetY+.5*i.fontSize,fontSize:i.fontSize};this.result.push(s),this.progressiveResult&&this.progressiveResult.push(s)}initGrid(t){let e;if(this.grid=[],t){let i=document.createElement("canvas").getContext("2d");i.fillStyle=this.options.backgroundColor,i.fillRect(0,0,1,1);let r=i.getImageData(0,0,1,1).data,s=t.getContext("2d").getImageData(0,0,this.ngx*this.gridSize,this.ngy*this.gridSize).data;const a=(l,u)=>{let h=this.gridSize;for(;h--;){let c=this.gridSize;for(;c--;)for(e=4;e--;)if(s[4*((u*this.gridSize+h)*this.ngx*this.gridSize+(l*this.gridSize+c))+e]!==r[e])return void(this.grid[l][u]=!1)}};let o=this.ngx;for(;o--;){this.grid[o]=[];let l=this.ngy;for(;l--;)a(o,l),this.grid[o][l]!==!1&&(this.grid[o][l]=!0)}s=i=r=void 0}else{let i=this.ngx;for(;i--;){this.grid[i]=[];let r=this.ngy;for(;r--;)this.grid[i][r]=!0}}}layout(t,e){this.initProgressive(),this.data=t,this.pointsAtRadius=[],this.ngx=Math.floor(e.width/this.gridSize),this.ngy=Math.floor(e.height/this.gridSize);const{center:i,maxRadius:r}=Int(this.options.shape,[e.width,e.height]);this.center=e.origin?[e.origin[0]/this.gridSize,e.origin[1]/this.gridSize]:[i[0]/this.gridSize,i[1]/this.gridSize],this.maxRadius=Math.floor(r/this.gridSize),this.initGrid(e.canvas),this.result=[];let s=0;for(;s<t.length&&(this.layoutWord(s),s++,this.progressiveIndex=s,!this.exceedTime()););return this.result}};Lnt.defaultOptions={gridSize:8,ellipticity:1};class kT extends Wm{constructor(t){super(gt({},kT.defaultOptions,t)),this.random=this.options.random?Math.random:()=>0,this.aspectRatio=1}fit(t){for(let e=0,i=this.result.length;e<i;e++)if(EWt(t,this.result[e]))return!1;return!0}getTextInfo(t,e){const i={datum:t,fontSize:this.getTextFontSize(t),fontWeight:this.getTextFontWeight(t),fontStyle:this.getTextFontStyle(t),fontFamily:this.getTextFontFamily(t),angle:this.getTextRotate(t,e),text:this.getText(t)+"",x:this.center[0],y:this.center[1]},r=x1(i);return i.width=r.width(),i.height=r.height(),i.top=this.center[1]-i.height+.21*i.height,i.left=this.center[0]-i.width/2,i}layoutWord(t){const e=this.getTextInfo(this.data[t],t);let i=2*Math.PI,r=0,s=e.left,a=e.top;const o=e.width,l=e.height;let u=1,h=this.fit(e);for(;!h&&r<this.maxRadius;)r+=.5,u=this.shape(r/this.maxRadius*2*Math.PI),i+=.5*(this.options.random?this.random()>.5?1:-1:t%2==0?1:-1),s=this.center[0]-o/2+r*u*Math.cos(i)*this.aspectRatio,a=this.center[1]-l/2+r*u*Math.sin(i),e.left=s,e.top=a,e.x=s+o/2,e.y=a+l/2,h=this.fit(e);return!!h&&!!(this.options.clip||e.left>=0&&e.left+e.width<=this.width&&e.top>=0&&e.top+e.height<=this.height)&&(this.result.push(e),!0)}layout(t,e){if(!(t!=null&&t.length))return[];this.initProgressive(),this.result=[],this.maxRadius=Math.sqrt(e.width*e.width+e.height*e.height)/2,this.center=[e.width/2,e.height/2],this.width=e.width,this.height=e.height,this.data=t.sort((r,s)=>this.getTextFontSize(s)-this.getTextFontSize(r));let i=0;for(;i<t.length&&(this.layoutWord(i),i++,this.progressiveIndex=i,!this.exceedTime()););return this.result}}function EWt(n,t){return!(n.left+n.width<t.left||n.top+n.height<t.top||n.left>t.left+t.width||n.top>t.top+t.height)}kT.defaultOptions={enlarge:!1};const OWt={x:"x",y:"y",z:"z",fontFamily:"fontFamily",fontSize:"fontSize",fontStyle:"fontStyle",fontWeight:"fontWeight",angle:"angle"},RWt=(n,t)=>{var e,i,r,s,a,o;if(n.size&&(n.size[0]<=0||n.size[1]<=0))return ri.getInstance().info("Wordcloud size dimensions must be greater than 0"),[];const l=t,u=((e=n.size)!==null&&e!==void 0?e:[500,500]).slice();u[0]=Math.floor(u[0]),u[1]=Math.floor(u[1]);const h=n.fontFamily?Kc(n.fontFamily):"sans-serif",c=n.fontStyle?Kc(n.fontStyle):"normal",d=n.fontWeight?Kc(n.fontWeight):"normal",p=n.rotate?Kc(n.rotate):0,f=Kc(n.text),g=(i=n.spiral)!==null&&i!==void 0?i:"archimedean",_=n.padding?Kc(n.padding):1,v=(r=n.shape)!==null&&r!==void 0?r:"square",y=(s=n.shrink)!==null&&s!==void 0&&s,b=(a=n.enlarge)!==null&&a!==void 0&&a,S=(o=n.clip)!==null&&o!==void 0&&o,A=n.minFontSize,w=n.randomVisible,C=n.as||OWt,k=n.depth_3d,M=n.postProjection;let P=n.fontSize?Kc(n.fontSize):14;const E=n.fontSizeRange;if(E&&!Mt(P)){const N=P,O=IWt(LWt(N,l),E);P=L=>O(N(L))}let I=Ag;n.layoutType==="fast"?I=kT:n.layoutType==="grid"&&(I=Lnt);const D=new I({text:f,padding:_,spiral:g,shape:v,rotate:p,fontFamily:h,fontStyle:c,fontWeight:d,fontSize:P,shrink:y,clip:S,enlarge:b,minFontSize:A,random:w,progressiveStep:n.progressiveStep,progressiveTime:n.progressiveTime,outputCallback:N=>{const O=[];let L,H;for(let j=0,G=N.length;j<G;j++)H=N[j],L=H.datum,L[C.x]=H.x,L[C.y]=H.y,L[C.fontFamily]=H.fontFamily,L[C.fontSize]=H.fontSize,L[C.fontStyle]=H.fontStyle,L[C.fontWeight]=H.fontWeight,L[C.angle]=H.angle,M==="StereographicProjection"&&DWt(u,H,L,C,k),O.push(L);return O}});return D.layout(l,{width:u[0],height:u[1]}),n.progressiveStep>0||n.progressiveTime>0?{progressive:D}:D.output()},Kc=n=>It(n)||Mt(n)||ft(n)||ut(n)?n:t=>t[n.field],ZE=n=>n<0?-Math.sqrt(-n):Math.sqrt(n),IWt=(n,t)=>{if(n[0]===n[1])return a=>t[0];const e=ZE(n[0]),i=ZE(n[1]),r=Math.min(e,i),s=Math.max(e,i);return a=>(ZE(a)-r)/(s-r)*(t[1]-t[0])+t[0]},LWt=(n,t)=>{let e=1/0,i=-1/0;const r=t.length;let s;for(let a=0;a<r;++a)s=pl(n(t[a])),s<e&&(e=s),s>i&&(i=s);return t.length===1&&e===i&&(e-=1e4),[e,i]};function DWt(n,t,e,i,r){const s=Math.max(n[0],n[1])/2,a=BWt(n[0],n[1],s,{x:s,y:s,z:r??s},t);e[i.x]=a.x,e[i.y]=a.y,e[i.z]=a.z}function BWt(n,t,e,i,r){const{x:s,y:a}=r,o=s/n*Math.PI*2;let l=Math.PI-a/t*Math.PI;return l+=(l<Math.PI/2?1:-1)*Math.pow(Math.min(l-Math.PI/2,1),2)/5,{x:e*Math.sin(l)*Math.cos(o)+i.x,y:e*Math.cos(l)+i.y,z:e*Math.sin(l)*Math.sin(o)+i.z}}const TT=()=>{Ct.registerTransform("wordcloud",{transform:RWt,markPhase:"beforeJoin"},!0)};var OC;(function(n){n.BEFORE_WORDCLOUD_SHAPE_LAYOUT="beforeWordcloudShapeLayout",n.AFTER_WORDCLOUD_SHAPE_LAYOUT="afterWordcloudShapeLayout"})(OC||(OC={}));const FWt=(n,t)=>{if(t.length===1&&t[0]==="#537EF5")return!0;if(!Array.isArray(n)||!Array.isArray(t)||n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0},jWt=()=>{let n=-1;const t=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9];return()=>(n=(n+1)%t.length,t[n])},NWt=n=>/^[\u4e00-\u9fa5]+$/.test(n),Bnt=(n,t)=>{if(F(n))return 0;let e=0;for(const i of n)NWt(i)?e+=1:e+=.53;return e};function zWt(n){return n&&(Rq(n)||Iq(n)||n.startsWith("<svg"))?new Promise((t,e)=>{var i;const r=nF({image:n}),s=(i=r.resources)===null||i===void 0?void 0:i.get(n);s&&s.state==="success"&&s.data?t(s.data):(r.successCallback=()=>{var a;if(r){const o=(a=r.resources)===null||a===void 0?void 0:a.get(n);o&&o.state==="success"&&o.data?t(o.data):e(new Error("image load failed"+n))}else e(new Error("image load failed"+n))},r.failCallback=()=>{ri.getInstance().error("image 加载失败！",n)})}):null}function HWt(n){return typeof n=="function"?n:function(){return n}}function VWt(n){const t=zWt(n.shapeUrl);return t?t.then(e=>n&&n.removeWhiteBorder&&e?$Wt(e,n.tempCanvas,n.tempCtx):e):null}function WWt(n,t){const{size:e,tempCanvas:i,tempCtx:r}=t,s=GWt(n,e);i.width=e[0],i.height=e[1],r.clearRect(0,0,i.width,i.height),r.drawImage(n,s.x,s.y,s.width,s.height);const a=r.getImageData(0,0,e[0],e[1]),o=new Array(e[0]*e[1]).fill(0);let l=1;const u=[[0,1],[1,0],[-1,0],[0,-1]];let h=[];for(let E=0;E<e[1];E++)for(let I=0;I<e[0];I++)if(o[E*e[0]+I]===0&&!RC(a,E,I)){o[E*e[0]+I]=l,h.push([E,I]);for(let D=0;D<h.length;D++)for(let N=0;N<4;N++){let O=h[D][0]+u[N][0],L=h[D][1]+u[N][1];O=O<0?0:O>=e[1]?e[1]-1:O,L=L<0?0:L>=e[0]?e[0]-1:L,o[O*e[0]+L]!==0||RC(a,O,L)||(o[O*e[0]+L]=l,h.push([O,L]))}l++,h=[]}const c={},d={},p={},f={},g={},_={},v={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0,width:0,height:0};for(let E=0;E<e[1];E++)for(let I=0;I<e[0];I++){const D=o[E*e[0]+I];D!==0&&(P(E,I)&&(c[D]=c[D]||[],c[D].push([I,E]),f[D]||(f[D]=[1/0,-1/0,1/0,-1/0]),E<f[D][0]&&(f[D][0]=E),E>f[D][1]&&(f[D][1]=E),I<f[D][2]&&(f[D][2]=I),I>f[D][3]&&(f[D][3]=I),I<v.x1&&(v.x1=I),I>v.x2&&(v.x2=I),E<v.y1&&(v.y1=E),E>v.y2&&(v.y2=E)),d[D]=d[D]||0,d[D]++)}const y=[];for(const E in c){const I=c[E],D=~~(I.reduce((G,U)=>G+U[0],0)/I.length),N=~~(I.reduce((G,U)=>G+U[1],0)/I.length);p[E]=[D,N],y.push(...I);const[O,L,H,j]=f[E];g[E]=~~Math.max(Math.sqrt((D-H)**2+(N-O)**2),Math.sqrt((D-j)**2+(N-L)**2),Math.sqrt((D-H)**2+(N-L)**2),Math.sqrt((D-j)**2+(N-O)**2)),_[E]=(j-H)/(L-O)}const b=Object.keys(p).map(E=>({label:E-1,boundary:c[E],area:d[E],center:p[E],maxPoint:f[E],maxR:g[E],ratio:_[E]}));v.width=v.x2-v.x1+1,v.height=v.y2-v.y1+1;const S=~~(y.reduce((E,I)=>E+I[0],0)/y.length),A=~~(y.reduce((E,I)=>E+I[1],0)/y.length),w=~~Math.max(Math.sqrt((S-v.x1)**2+(A-v.y1)**2),Math.sqrt((S-v.x2)**2+(A-v.y2)**2),Math.sqrt((S-v.x1)**2+(A-v.y2)**2),Math.sqrt((S-v.x2)**2+(A-v.y1)**2)),C=v.width/v.height,k=Object.keys(d).reduce((E,I)=>E+d[I],0),M={regions:b,labels:o,labelNumber:l-1};return Object.assign(t,{segmentation:M,shapeConfig:s,shapeBounds:v,shapeMaxR:w,shapeRatio:C,shapeCenter:[S,A],shapeArea:k});function P(E,I){const D=[[0,1],[1,0],[-1,0],[0,-1]];if(E===0||I===0||E===e[1]-1||I===e[0]-1)return!0;for(let N=0;N<4;N++){let O=E+D[N][0],L=I+D[N][1];if(O=O<0?0:O>=e[1]?e[1]-1:O,L=L<0?0:L>=e[0]?e[0]-1:L,o[O*e[0]+L]===0)return!0}return!1}}function RC(n,t,e){const i=n.width;return n.data[t*i*4+4*e+3]===0||n.data[t*i*4+4*e+0]===255&&n.data[t*i*4+4*e+1]===255&&n.data[t*i*4+4*e+2]===255}function $Wt(n,t,e){t.width=n.width,t.height=n.height,e.clearRect(0,0,t.width,t.height),e.drawImage(n,0,0);const i=t.width,r=e.getImageData(0,0,t.width,t.height);let s=0,a=r.height,o=0,l=r.width;for(;s<a&&mG(r,i,s);)++s;for(;a-1>s&&mG(r,i,a-1);)--a;for(;o<l&&vG(r,i,o,s,a);)++o;for(;l-1>o&&vG(r,i,l-1,s,a);)--l;const u=e.getImageData(o,s,l-o,a-s);return t.width=u.width,t.height=u.height,e.clearRect(0,0,t.width,t.height),e.putImageData(u,0,0),t}function mG(n,t,e){for(let i=0;i<t;++i)if(!RC(n,e,i))return!1;return!0}function vG(n,t,e,i,r){for(let s=i;s<r;++s)if(!RC(n,s,e))return!1;return!0}function GWt(n,t){const e=n.width,i=n.height;let r=t[0]/e;i*r>t[1]&&(r=t[1]/i);const s=Math.floor(r*e),a=Math.floor(r*i);return{x:(t[0]-s)/2,y:(t[1]-a)/2,width:s,height:a,scale:r}}function UWt(n,t){const{segmentation:{regions:e}}=t;let i=-1/0,r=0,s=0;e.forEach((u,h)=>{const c=u.area;c>i&&(i=c,s=h),r+=c});let a=0;e.forEach(u=>{const h=u.area,c=Math.ceil(h/r*n.length),d=h/i;u.words=[],u.regionNum=c,u.regionWeight=d,a+=c}),a<n.length&&(e[s].wordsNum+=n.length-a);let o=s;const l=e.map(u=>u.regionNum);n.forEach(u=>{let h=0,c=0;u.regionIndex=-1;do{if(l[o]>0&&u.weight<=e[o].regionWeight){u.regionIndex=o,e[o].words.push(u),l[o]--,o=(o+1)%e.length;break}o=(o+1)%e.length,h++,c++,c>e.length+1&&(e.forEach(d=>{d.regionWeight+=.15}),c=0)}while(u.regionIndex===-1&&h<3*e.length);u.regionIndex===-1&&(u.regionIndex=s,e[s].words.push(u),l[s]--)}),e.forEach(u=>{u.words.sort((h,c)=>c.weight-h.weight)})}function YWt(n,t,e){const{size:i,stepFactor:r}=t,{segmentation:{regions:s},tempCtx:a,tempCanvas:o,boardSize:l,shapeCenter:u,shapeMaxR:h,shapeRatio:c}=e,d=h5(e);for(const p of s){const{words:f,center:g,maxR:_,ratio:v}=p;for(let y=0;y<f.length;y++){vp(o,a,n,y);const b=f[y];b.x=g[0],b.y=g[1],b.hasText&&b.sprite&&cm(d,b,_,v,i,l,r)&&(b.hasPlaced=!0)}}for(let p=0;p<t.textLayoutTimes;p++){const f=n.filter(g=>(g.hasPlaced||(g.hasText=!1,g.sprite=null,g.fontSize=Math.max(~~(g.fontSize*t.fontSizeShrinkFactor),t.minFontSize)),!g.hasPlaced));if(f.length===0)break;for(let g=0;g<f.length;g++){const _=f[g];vp(o,a,f,g),_.x=u[0],_.y=u[1],_.hasText&&cm(d,_,h,c,i,l,r)&&(_.hasPlaced=!0)}}t.board=d}function Fnt(n,t,e){const{stepFactor:i,importantWordCount:r,globalShinkLimit:s}=t,{size:a,segmentation:{regions:o},tempCtx:l,tempCanvas:u,boardSize:h,shapeCenter:c,shapeMaxR:d,shapeRatio:p}=e,f=h5(e);let g=f.slice(0);const _=t.fontSizeShrinkFactor;let v=null,y=1,b=1;const S=r;let A=0;n.length>S&&(A=n.sort((w,C)=>C.weight-w.weight)[S].weight);for(let w=0;w<o.length;w++){const C=o[w],{words:k,center:M,maxR:P,ratio:E}=C;let I=!1;for(let D=0;D<k.length;D++){vp(u,l,n,D);const N=k[D];if(N.x=M[0],N.y=M[1],!N.skip&&N.hasText&&N.sprite&&cm(g,N,P,E,a,h,i))N.hasPlaced=!0;else{if(!N.skip&&N.weight>A&&b>s){const O=N.datum[Symbol.for("vGrammar_id")];O!==v&&(v=O,y=b),b*=_,n.forEach(L=>{L.hasText=!1,L.sprite=null,L.fontSize=L.fontSize*_}),g=f.slice(0),I=!0;break}if(!N.skip&&N.datum[Symbol.for("vGrammar_id")]===v){n.forEach(O=>{O.hasText=!1,O.sprite=null,O.fontSize=O.fontSize/b}),N.skip=!0,b=y,v=null,g=f.slice(0),I=!0;break}}}I&&(w=-1)}for(let w=0;w<t.textLayoutTimes;w++){const C=n.filter(k=>(k.hasPlaced||(k.hasText=!1,k.sprite=null,k.fontSize=Math.max(~~(k.fontSize*t.fontSizeShrinkFactor),t.minFontSize)),!k.hasPlaced));if(C.length===0)break;for(let k=0;k<C.length;k++){const M=C[k];vp(u,l,C,k),M.x=c[0],M.y=c[1],M.hasText&&cm(g,M,d,p,a,h,i)&&(M.hasPlaced=!0)}}t.board=g}function XWt(n,t,e){const{size:i,stepFactor:r,importantWordCount:s}=t,{segmentation:{regions:a},tempCtx:o,tempCanvas:l,boardSize:u,shapeCenter:h,shapeMaxR:c,shapeRatio:d}=e,p=h5(e);let f=p.slice(0);const g=t.fontSizeEnlargeFactor,_=Math.min(s,n.length);let v=0;n.length>_&&(v=n.sort((A,w)=>w.weight-A.weight)[_-1].weight);let y=0,b=1,S=!1;for(let A=0;A<a.length;A++){const w=a[A],{words:C,center:k,maxR:M,ratio:P}=w;let E=!1;for(let I=0;I<C.length;I++){vp(l,o,n,I);const D=C[I];if(D.x=k[0],D.y=k[1],D.hasText&&D.sprite&&cm(f,D,M,P,i,u,r)){if(D.hasPlaced=!0,D.weight>=v&&y++,y>=_&&!S){b*=g,n.forEach(N=>{N.hasText=!1,N.sprite=null,N.fontSize=N.fontSize*g}),f=p.slice(0),E=!0,y=0;break}}else{if(D.weight>=v&&b>1){n.forEach(N=>{N.hasText=!1,N.sprite=null,N.fontSize=N.fontSize/g}),b/=g,S=!0,f=p.slice(0),E=!0;break}if(D.weight>=v)return Fnt(n,t,e)}}E&&(A=-1)}for(let A=0;A<t.textLayoutTimes;A++){const w=n.filter(C=>(C.hasPlaced||(C.hasText=!1,C.sprite=null,C.fontSize=Math.max(~~(C.fontSize*t.fontSizeShrinkFactor),t.minFontSize)),!C.hasPlaced));if(w.length===0)break;for(let C=0;C<w.length;C++){const k=w[C];vp(l,o,w,C),k.x=h[0],k.y=h[1],k.hasText&&cm(f,k,c,d,i,u,r)&&(k.hasPlaced=!0)}}t.board=f}function cm(n,t,e,i,r,s,a){const o=t.x,l=t.y,u=KWt(i),h=1*a;let c,d,p,f=-h;for(;c=u(f+=h);){const{wordSize:g,bounds:{dTop:_,dBottom:v,dLeft:y,dRight:b}}=t;if(d=c[0],p=c[1],Math.min(Math.abs(d),Math.abs(p))>=e)break;if(t.x=~~(o+d),t.y=~~(l+p),!(t.x-y<0||t.x+b>r[0]||t.y-_<0||t.y+v>r[1]||Nnt(t,n,s)))return jnt(t,n,s),!0}return!1}function jnt(n,t,e){const{wordSize:i}=n,r=n.sprite,s=i[0]>>5,a=e[0]>>5,o=n.x-(s<<4),l=o%32,u=32-l,h=i[1];let c,d=(n.y-(i[1]>>1))*a+(o>>5);if(l===0)for(let p=0;p<h;p++){for(let f=0;f<s;f++)t[d+f]|=r[p*s+f];d+=a}else for(let p=0;p<h;p++){c=0;for(let f=0;f<=s;f++)t[d+f]|=c<<u|(f<s?(c=r[p*s+f])>>>l:0);d+=a}}function Nnt(n,t,e){const{sprite:i,wordSize:r}=n,s=e[0]>>5,a=r[0]>>5,o=n.x-(a<<4),l=o%32,u=32-l,h=r[1];let c,d=(n.y-(r[1]>>1))*s+(o>>5);if(l===0)for(let p=0;p<h;p++){for(let f=0;f<a;f++)if(t[d+f]&i[p*a+f])return!0;d+=s}else for(let p=0;p<h;p++){c=0;for(let f=0;f<=a;f++)if((c<<u|(f<a?(c=i[p*a+f])>>>l:0))&t[d+f])return!0;d+=s}return!1}function KWt(n){return function(t){return[n*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function vp(n,t,e,i){if(e[i].sprite||e[i].fontSize===0)return;const r=2048,s=Math.PI/180,a=e.length;n.width=r,n.height=2048,t.clearRect(0,0,r,2048),t.textAlign="center";let o,l,u=0,h=0,c=0,d=0;const p=i;for(--i;++i<a;){const v=e[i],y=Math.max(v.fontSize,2);if(t.save(),t.font=v.fontStyle+" "+v.fontWeight+" "+y+"px "+v.fontFamily,o=t.measureText(v.text+"m").width+2*v.padding,l=2*y+2*v.padding,v.rotate!==0){const b=Math.sin(v.rotate*s),S=Math.cos(v.rotate*s),A=o*S,w=o*b,C=l*S,k=l*b;o=Math.max(Math.abs(A+k),Math.abs(A-k)),l=~~Math.max(Math.abs(w+C),Math.abs(w-C))}if(o=o+31>>5<<5,l=Math.ceil(l),l>c&&(c=l),u+o>=r&&(u=0,h+=c,c=l),h+l>=2048){if(h===0){v.hasText=!1;continue}break}h+l>=d&&(d=h+l),t.translate(u+(o>>1),h+(l>>1)),v.rotate!==0&&t.rotate(v.rotate*s),t.fillText(v.text,0,0),v.padding&&(t.lineWidth=2*v.padding,t.strokeText(v.text,0,0)),t.restore(),v.LT=[u,h],v.wordSize=[o,l],v.hasText=!0,u+=o}if(d===0)return;const f=t.getImageData(0,0,r,d).data;let g,_;for(;--i>=p;){const v=e[i];if(!v.hasText){v.bounds={dTop:1/0,dBottom:-1/0,dLeft:1/0,dRight:-1/0};break}const{LT:y=[0,0],wordSize:b}=v;[u,h]=y;const S=b[0]>>5,A=new Array(S*b[1]).fill(0);let[w,C,k,M]=[1/0,-1/0,1/0,-1/0];for(_=0;_<b[1];_++){let P;for(g=0;g<b[0];g++)if(f[4*((h+_)*r+(u+g))+3]>0){const E=1<<31-g%32;A[S*_+(g>>5)]|=E,g<k&&(k=g),g>M&&(M=g),P|=E}P&&(_<w&&(w=_),_>C&&(C=_))}v.bounds={dTop:(b[1]>>1)-w,dBottom:C-(b[1]>>1),dLeft:(b[0]>>1)-k,dRight:M-(b[0]>>1)},v.sprite=A,delete v.LT}}function h5(n){const{segmentation:{labels:t},boardSize:e,size:i}=n,r=e[0]>>5,s=new Array(r*i[1]).fill(0);for(let a=0;a<i[1];a++)for(let o=0;o<i[0];o++)if(t[a*i[0]+o]===0){const l=1<<31-o%32;s[r*a+(o>>5)]|=l}if(e[0]>i[0]){const a=(1<<e[0]-i[0])-1;for(let o=0;o<i[1];o++)s[r*o+r-1]|=a}return s}function qWt(n,t,e){const{size:i,fillingTimes:r,fillingXStep:s,fillingYStep:a,getFillingFontStyle:o,getFillingFontWeight:l,getFillingFontFamily:u,fillingInitialFontSize:h,fillingDeltaFontSize:c,fillingInitialOpacity:d,fillingDeltaOpacity:p,fillingRotateList:f,getFillingPadding:g,random:_,board:v,minFillFoontSize:y}=t,{boardSize:b,shapeBounds:S,tempCtx:A,tempCanvas:w,randomGenerator:C}=e;let k=h,M=d;const P=[];for(let D=0;D<r;D++)E(k,M),k=Math.max(k>c?k-c:c,y),M=M>p?M-p:p;return P;function E(D,N){const O=n.map(tt=>{const{text:it,color:nt,fillingColor:K,hasPlaced:J,datum:Q}=tt;return{x:0,y:0,weight:0,text:it,fontFamily:u(Q),fontStyle:o(Q),fontWeight:l(Q),fontSize:D,rotate:f[~~(C()*f.length)],padding:g(Q),opacity:N,visible:!0,color:nt,fillingColor:K,hasPlaced:J,datum:Q}});I(O);let L=0;const{x1:H,y1:j,x2:G,y2:U}=S,[$,q]=[H+~~(C()*s*2),j+~~(C()*a*2)];for(let tt=q;tt<=U;tt+=a)for(let it=$;it<=G;it+=s){vp(w,A,O,L);const nt=O[L];nt.x=it,nt.y=tt;const{wordSize:K,bounds:J,hasPlaced:Q}=nt;if(!Q||!J){++L===O.length&&(L=0,_&&I(O));continue}const{dTop:dt,dBottom:bt,dLeft:xt,dRight:ht}=J;nt.x-xt<0||nt.x+ht>i[0]||nt.y-dt<0||nt.y+bt>i[1]||nt.hasText&&nt.sprite&&!Nnt(nt,v,b)&&(jnt(nt,v,b),P.push(Object.assign({},nt)),++L===O.length&&(L=0,_&&I(O)))}}function I(D){return D.sort(()=>C()-.5)}}function ZWt(n,t,e){UWt(n,e),t.layoutMode==="ensureMapping"?Fnt(n,t,e):t.layoutMode==="ensureMappingEnlarge"?XWt(n,t,e):YWt(n,t,e);const i=qWt(n,t,e),r=[],s=[];for(let a=0;a<n.length;a++)n[a].hasPlaced?s.push(n[a]):r.push(n[a]);return r.forEach(a=>a.visible=!1),{fillingWords:i,successedWords:s,failedWords:r}}const JWt={x:"x",y:"y",fontFamily:"fontFamily",fontSize:"fontSize",fontStyle:"fontStyle",fontWeight:"fontWeight",angle:"angle",opacity:"opacity",visible:"visible",isFillingWord:"isFillingWord",color:"color"};class QWt{constructor(t,e){this.progressiveResult=[],this.options=t,this.view=e}layout(t){this.data=t;const e=this.options,i={shapeUrl:e.shape,size:e.size,ratio:e.ratio||.8,tempCanvas:void 0,tempCtx:void 0,removeWhiteBorder:e.removeWhiteBorder||!1,boardSize:[0,0],random:!1,randomGenerator:void 0},r=_e.createCanvas({width:e.size[0],height:e.size[1]}),s=r.getContext("2d");s.textAlign="center",s.textBaseline="middle",i.tempCanvas=r,i.tempCtx=s;const a=e.size[0]+31>>5<<5;i.boardSize=[a,e.size[1]],i.random?i.randomGenerator=Math.random:i.randomGenerator=jWt();const o=VWt(i);o?(this.segmentationInput=i,this.isImageFinished=!1,this.isLayoutFinished=!1,o.then(l=>{this.shapeImage=l,this.isImageFinished=!0}).catch(l=>{this.shapeImage=null,this.isImageFinished=!0})):(this.isImageFinished=!0,this.isLayoutFinished=!0)}unfinished(){return!this.isLayoutFinished}output(){return this.progressiveResult}progressiveRun(){this.isImageFinished&&!this.isLayoutFinished&&(this.shapeImage&&this.doLayout(),this.isLayoutFinished=!0)}progressiveOutput(){return this.progressiveResult}doLayout(){var t,e,i;const r=this.segmentationInput,s=WWt(this.shapeImage,r),a=this.options,o=this.data,l=a.colorMode||"ordinal",u={getText:is(a.text),getFontSize:is(a.fontSize),fontSizeRange:a.fontSizeRange,colorMode:l,getColor:a.colorField?is(a.colorField):is(a.text),getFillingColor:is(a.fillingColorField),colorList:a.colorList||(l==="ordinal"?["#2E62F1"]:["#537EF5","#2E62F1","#2358D8","#184FBF","#0C45A6","#013B8E"]),getColorHex:is(a.colorHexField),getFontFamily:is(a.fontFamily||"sans-serif"),rotateList:a.rotateList||[0],getPadding:is(a.padding||1),getFontStyle:is(a.fontStyle||"normal"),getFontWeight:is(a.fontWeight||"normal"),getFontOpacity:a.fontOpacity?is(a.fontOpacity):()=>1};e$t(o,u,s);const h={size:a.size,ratio:a.ratio||.8,shapeUrl:a.shape,random:a.random===void 0||a.random,textLayoutTimes:a.textLayoutTimes||3,removeWhiteBorder:a.removeWhiteBorder||!1,layoutMode:a.layoutMode||"default",fontSizeShrinkFactor:a.fontSizeShrinkFactor||.8,stepFactor:a.stepFactor||1,importantWordCount:a.importantWordCount||10,globalShinkLimit:a.globalShinkLimit||.2,fontSizeEnlargeFactor:a.fontSizeEnlargeFactor||1.5,fillingRatio:a.fillingRatio||.7,fillingTimes:a.fillingTimes||4,fillingXStep:a.fillingXRatioStep?Math.max(Math.floor(a.size[0]*a.fillingXRatioStep),1):a.fillingXStep||4,fillingYStep:a.fillingYRatioStep?Math.max(Math.floor(a.size[1]*a.fillingYRatioStep),1):a.fillingYStep||4,fillingInitialFontSize:a.fillingInitialFontSize,fillingDeltaFontSize:a.fillingDeltaFontSize,fillingInitialOpacity:a.fillingInitialOpacity||.8,fillingDeltaOpacity:a.fillingDeltaOpacity||.05,getFillingFontFamily:is(a.fillingFontFamily||"sans-serif"),getFillingFontStyle:is(a.fillingFontStyle||"normal"),getFillingFontWeight:is(a.fillingFontWeight||"normal"),getFillingPadding:is(a.fillingPadding||.4),fillingRotateList:a.fillingRotateList||[0,90],fillingDeltaFontSizeFactor:a.fillingDeltaFontSizeFactor||.2,fillingColorList:a.fillingColorList||["#537EF5"],sameColorList:!1,minInitFontSize:a.minInitFontSize||10,minFontSize:a.minFontSize||4,minFillFoontSize:a.minFillFoontSize||2},c=FWt(u.colorList,h.fillingColorList);h.sameColorList=c,t$t(o,u,h,a),i$t(o,u,h,s);const{getText:d,getFontFamily:p,getFontStyle:f,getFontWeight:g,getPadding:_,getColor:v,getFillingColor:y,getColorHex:b,fontSizeScale:S,colorScale:A,fillingColorScale:w,getFontOpacity:C,rotateList:k}=u,M=o.map($=>{var q,tt;return{x:0,y:0,weight:0,text:d($),fontFamily:p($),fontWeight:g($),fontStyle:f($),rotate:k[~~(r.randomGenerator()*k.length)],fontSize:Math.max(h.minInitFontSize,~~S($)),opacity:C($),padding:_($),color:b&&b($)||A&&A(v($))||"black",fillingColor:!y||((q=a.colorField)===null||q===void 0?void 0:q.field)===((tt=a.fillingColorField)===null||tt===void 0?void 0:tt.field)&&c?void 0:b&&b($)||w&&w(y($))||"black",datum:$,visible:!0,hasPlaced:!1}}),P=Vi(M.map($=>$.fontSize));M.forEach($=>$.weight=$.fontSize/P),M.sort(($,q)=>q.weight-$.weight);const{fillingWords:E,successedWords:I,failedWords:D}=ZWt(M,h,s),N=(e=(t=a.text)===null||t===void 0?void 0:t.field)!==null&&e!==void 0?e:"textKey",O=(i=a.dataIndexKey)!==null&&i!==void 0?i:"defaultDataIndexKey",L=a.as||JWt;let H,j;const G=[];for(let $=0;$<M.length;++$)H=M[$],j=H.datum,j[L.x]=H.x,j[L.y]=H.y,j[L.fontFamily]=H.fontFamily,j[L.fontSize]=H.fontSize,j[L.fontStyle]=H.fontStyle,j[L.fontWeight]=H.fontWeight,j[L.angle]=qe(H.rotate),j[L.opacity]=H.opacity,j[L.visible]=H.visible,j[L.isFillingWord]=!1,j[L.color]=H.color,j[O]=`${H.text}_${$}_keyword`,G.push(j);const U=[];E.forEach(($,q)=>{var tt,it;const nt={};nt[L.x]=$.x,nt[L.y]=$.y,nt[L.fontFamily]=$.fontFamily,nt[L.fontSize]=$.fontSize,nt[L.fontStyle]=$.fontStyle,nt[L.fontWeight]=$.fontWeight,nt[L.angle]=qe($.rotate),nt[L.opacity]=$.opacity,nt[L.visible]=$.visible,nt[L.isFillingWord]=!0,nt[L.color]=y?((tt=a.colorField)===null||tt===void 0?void 0:tt.field)===((it=a.fillingColorField)===null||it===void 0?void 0:it.field)&&c?$.color:$.fillingColor:h.fillingColorList[~~(r.randomGenerator()*h.fillingColorList.length)],nt[N]=$.text,nt[O]=`${$.text}_${q}_fillingWords`,U.push(nt)}),this.view&&this.view.emit&&this.view.emit(OC.AFTER_WORDCLOUD_SHAPE_LAYOUT,{successedWords:I,failedWords:D}),this.progressiveResult=G.concat(U)}release(){this.segmentationInput=null,this.data=null,this.shapeImage=null,this.progressiveResult=null,this.options=null}}const t$t=(n,t,e,i)=>{var r,s,a,o;const{colorMode:l,getColor:u,getFillingColor:h}=t,{sameColorList:c}=e;let d,p,f=t.colorList,g=e.fillingColorList;if(l==="ordinal"){const _=n.map(v=>u(v));if(d=v=>new np().domain(_).range(f).scale(v),h&&(((r=i.colorField)===null||r===void 0?void 0:r.field)!==((s=i.fillingColorField)===null||s===void 0?void 0:s.field)||!c)){const v=n.map(y=>h(y));p=y=>new np().domain(v).range(g).scale(y)}}else{f.length===1&&(f=[f[0],f[0]]);const _=new to().domain(X0(u,n)).range(f);if(d=v=>_.scale(v),h&&(((a=i.colorField)===null||a===void 0?void 0:a.field)!==((o=i.fillingColorField)===null||o===void 0?void 0:o.field)||!c)){g.length===1&&(g=[g[0],g[0]]);const v=new to().domain(X0(h,n)).range(g);p=y=>v.scale(y)}}Object.assign(t,{colorScale:d,fillingColorScale:p})},e$t=(n,t,e)=>{let{fontSizeRange:i}=t;const{getFontSize:r,getText:s}=t;let a;if(r){if(r&&i){const o=new rC().domain(X0(r,n)).range(i);a=l=>o.scale(r(l))}else if(r&&ft(r)&&!i){const[l,u]=X0(r,n),h=n.map(p=>({text:s(p),value:r(p),weight:u===l?1:(r(p)-l)/(u-l)})),c=_G(h,e,!0);i=[~~(.5*c),~~c];const d=new rC().domain(X0(r,n)).range(i);a=p=>d.scale(r(p))}}else{const o=n.map(u=>({text:s(u)})),l=_G(o,e,!1);a=HWt(l)}Object.assign(t,{getFontSize:r,fontSizeRange:i,fontSizeScale:a})},_G=(n,t,e)=>{const i=t.shapeArea,r=t.ratio,s=t.segmentation.regions,a=Math.ceil(Math.sqrt(i)/12),o=n.reduce((u,h)=>{const c=Bnt(h.text);return c<a?u+c*(e?(.5+.5*h.weight)**2:1):u},0);if(o===0)return 12;let l=20;if(s.length===1)l=Math.sqrt(r*(i/(1.7*o)));else{const u=[];for(let h=0;h<s.length;h++){const c=s[h].area,d=s[h].ratio,p=c/i;if(p<.1)continue;const f=p*(o*(d<1?2.7-d:1.7)),g=Math.sqrt(r*(c/f));u.push(g)}l=u.length?Math.min(...u):Math.sqrt(r*(i/(1.7*o)))}return l};function i$t(n,t,e,i){const{getText:r}=t;let{fillingInitialFontSize:s,fillingDeltaFontSize:a}=e;const{fillingRatio:o}=e,l=Math.ceil(Math.sqrt(i.shapeArea)/4);if(!s||!a){const u=o/100,h=n.reduce((d,p)=>{const f=Bnt(r(p));return f>l?d:d+f},0)/n.length;let c;if(h===0)c=8;else{const d=.2*i.shapeArea;c=Math.sqrt(u*(d/h))}s=~~c,a=c*e.fillingDeltaFontSizeFactor,Object.assign(e,{fillingInitialFontSize:s,fillingDeltaFontSize:a})}}const X0=(n,t)=>{let e=1/0,i=-1/0;const r=t.length;let s;for(let a=0;a<r;++a)s=pl(n(t[a])),s<e&&(e=s),s>i&&(i=s);return t.length===1&&e===i&&(e-=1e4),[e,i]},is=n=>n?typeof n=="string"||typeof n=="number"?()=>n:ft(n)?n:t=>t[n.field]:null,n$t=(n,t,e,i)=>{if(!n.size||F(n.size[0])||F(n.size[1])||n.size[0]<=0||n.size[1]<=0)return ri.getInstance().info("Wordcloud size dimensions must be greater than 0"),[];if(n.size=[Math.ceil(n.size[0]),Math.ceil(n.size[1])],n.shape||Id("WordcloudShape shape must be specified."),n.text||Id("WordcloudShape text must be specified."),i!=null&&i.emit&&i.emit(OC.BEFORE_WORDCLOUD_SHAPE_LAYOUT),!t||t.length===0)return[];const r=new QWt(n,i);return r.layout(t),r.unfinished()?{progressive:r}:r.output()},znt=()=>{Ct.registerTransform("wordcloudShape",{transform:n$t,markPhase:"beforeJoin"},!0)};class $y extends hm{constructor(){super(...arguments),this.type=at.wordCloud}}$y.type=at.wordCloud;const Hnt=()=>{TT(),Gs(),Ont(),Z.registerSeries($y.type,$y)},r$t=()=>{znt(),TT(),Gs(),Ont(),Z.registerSeries($y.type,$y)};class Gy extends hm{constructor(){super(...arguments),this.type=at.wordCloud3d}_wordCloudTransformOption(){var t;return Object.assign(Object.assign({},super._wordCloudTransformOption()),{postProjection:(t=this._spec.postProjection)!==null&&t!==void 0?t:"StereographicProjection",depth_3d:this._spec.depth_3d})}_wordCloudShapeTransformOption(){var t;return Object.assign(Object.assign({},super._wordCloudShapeTransformOption()),{postProjection:(t=this._spec.postProjection)!==null&&t!==void 0?t:"StereographicProjection",depth_3d:this._spec.depth_3d})}initMark(){this._wordMark=this._createMark(hm.mark.word,{groupKey:this._seriesField,support3d:!0,isSeriesMark:!0})}initMarkStyle(){super.initMarkStyle();const t=this._wordMark;t&&this.setMarkStyle(t,{z:e=>{var i;return(i=e.z)!==null&&i!==void 0?i:0}},"normal",kt.Series)}initAnimation(){var t,e;const i=(t=this._padding)!==null&&t!==void 0?t:{};this._wordMark&&this._wordMark.setAnimationConfig(Ae((e=Z.getAnimationInKey("wordCloud3d"))===null||e===void 0?void 0:e(()=>{var r;const s=this.getCompiler().getVGrammarView(),a=s.width()-i.left||0-i.right||0,o=s.height()-i.top||0-i.bottom||0,l=Math.max(a,o)/2;return{center:{x:l,y:l,z:(r=this._spec.depth_3d)!==null&&r!==void 0?r:l},r:l}}),Ee("word",this._spec,this._markAttributeContext)))}}Gy.type=at.wordCloud3d;const Vnt=()=>{TT(),Gs(),Rnt(),Z.registerSeries(Gy.type,Gy)},s$t=()=>{znt(),TT(),Gs(),Rnt(),Z.registerSeries(Gy.type,Gy)},a$t=(n,t)=>{var e,i;const r=n.map(A=>Object.assign({},A));if(!r||r.length===0)return r;const{valueField:s,asTransformRatio:a,asReachRatio:o,asHeightRatio:l,asValueRatio:u,asNextValueRatio:h,asLastValueRatio:c,asLastValue:d,asCurrentValue:p,asNextValue:f,heightVisual:g=!1,isCone:_=!0,range:v}=t,y=r.reduce((A,w)=>Math.max(A,Number.parseFloat(w[s])||-1/0),-1/0),b=r.reduce((A,w)=>Math.min(A,Number.parseFloat(w[s])||1/0),1/0),S=[(e=v==null?void 0:v.min)!==null&&e!==void 0?e:b,(i=v==null?void 0:v.max)!==null&&i!==void 0?i:y];return r.forEach((A,w)=>{var C,k;const M=Number.parseFloat(A[s]),P=Number.parseFloat((C=r[w-1])===null||C===void 0?void 0:C[s]),E=Number.parseFloat((k=r[w+1])===null||k===void 0?void 0:k[s]),I=st(E*M)&&M!==0?E/M:0,D=st(M*P)&&P!==0?M/P:0;d&&(A[d]=P),f&&(A[f]=E),a&&(A[a]=I),o&&(A[o]=w===0?1:D),l&&(A[l]=g===!0?I:1/r.length),u&&(A[u]=M/S[1]),h&&(A[h]=w===r.length-1?_?0:A[u]:E/S[1]),c&&(A[c]=w===0?1:P/S[1]),p&&(A[p]=M)}),r},o$t=(n,t)=>{var e,i;const r=(i=(e=n[0])===null||e===void 0?void 0:e.latestData)===null||i===void 0?void 0:i.map(s=>Object.assign({},s));return r&&r.length!==0&&(r.shift(),r.forEach(s=>{s[t.asIsTransformLevel]=!0})),r},l$t=`${Kt}_FUNNEL_TRANSFORM_RATIO`,TD=`${Kt}_FUNNEL_REACH_RATIO`,u$t=`${Kt}_FUNNEL_HEIGHT_RATIO`,Wx=`${Kt}_FUNNEL_VALUE_RATIO`,yG=`${Kt}_FUNNEL_LAST_VALUE_RATIO`,bG=`${Kt}_FUNNEL_NEXT_VALUE_RATIO`,h$t=`${Kt}_FUNNEL_LAST_VALUE`,c$t=`${Kt}_FUNNEL_CURRENT_VALUE`,d$t=`${Kt}_FUNNEL_NEXT_VALUE`,xG=`${Kt}_FUNNEL_TRANSFORM_LEVEL`,$l=20,qc=5,p$t="80%",f$t=0;class g$t extends _s{constructor(){super(...arguments),this.dimensionTooltipTitleCallback=(t,e)=>{var i,r,s;const a=this.series;return((i=e==null?void 0:e.mark)===null||i===void 0?void 0:i.name)==="transform"?"转化率":(r=this._getDimensionData(t))!==null&&r!==void 0?r:(s=t.properties)===null||s===void 0?void 0:s[`${a.getCategoryField()}`]},this.markTooltipValueCallback=(t,e)=>{var i;return((i=e==null?void 0:e.mark)===null||i===void 0?void 0:i.name)==="transform"?`${(100*(t==null?void 0:t[TD])).toFixed(1)}%`:this._getMeasureData(t)},this.markTooltipKeyCallback=(t,e)=>{var i;if(((i=e==null?void 0:e.mark)===null||i===void 0?void 0:i.name)==="transform")return"转化率";const{dimensionFields:r,seriesFields:s}=this._seriesCacheInfo,a=r[r.length-1];return z(s[0])?t==null?void 0:t[s[0]]:t==null?void 0:t[a]}}}class Wnt extends Sr{_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{points:[]})}}class Uy extends Wnt{constructor(){super(...arguments),this.type=Uy.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:0})}}Uy.type="polygon";const $nt=()=>{Z.registerMark(Uy.type,Uy),$jt(),Mit()};class c5 extends ys{_transformLabelSpec(t){this._addMarkLabelSpec(t,"funnel"),t.isTransform&&this._addMarkLabelSpec(t,"transform","transformLabel")}}class Do extends gp{constructor(){super(...arguments),this.type=at.funnel,this._funnelMarkName="funnel",this._funnelMarkType="polygon",this._transformMarkName="transform",this._transformMarkType="polygon",this.transformerConstructor=c5,this._funnelMark=null,this._funnelTransformMark=null,this._labelMark=null,this._transformLabelMark=null,this._funnelOuterLabelMark={}}getCategoryField(){return this._categoryField}setCategoryField(t){return this._categoryField=t,this._categoryField}getValueField(){return this._valueField}setValueField(t){return this._valueField=t,this._valueField}setAttrFromSpec(){var t,e;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this._funnelOrient=(t=this._spec.funnelOrient)!==null&&t!==void 0?t:"top",this._shape=(e=this._spec.shape)!==null&&e!==void 0?e:"trapezoid",this._isHorizontal()?this._funnelAlign=["top","bottom"].includes(this._spec.funnelAlign)?this._spec.funnelAlign:"center":this._funnelAlign=["left","right"].includes(this._spec.funnelAlign)?this._spec.funnelAlign:"center",this._spec.categoryField&&this.setSeriesField(this._spec.categoryField)}initData(){if(super.initData(),!this._data)return;ie(this._dataSet,"funnel",a$t),ie(this._dataSet,"funnelTransform",o$t);const t=new Le(this._dataSet,{name:`${Kt}_series_${this.id}_viewDataTransform`});t.parse([this.getViewData()],{type:"dataview"}),this._viewDataTransform=new kl(this._option,t)}getStatisticFields(){const t=[];return t.push({key:this._categoryField,operations:["values"]}),t.push({key:this._valueField,operations:["max","min"]}),t}_statisticViewData(){var t,e,i,r,s,a,o,l,u;super._statisticViewData(),this._data.getDataView().transform({type:"funnel",options:{valueField:this.getValueField(),isCone:this._spec.isCone,asCurrentValue:c$t,asTransformRatio:l$t,asReachRatio:TD,asHeightRatio:u$t,asValueRatio:Wx,asNextValueRatio:bG,asLastValueRatio:yG,asLastValue:h$t,asNextValue:d$t,range:{min:(e=(t=this._spec.range)===null||t===void 0?void 0:t.min)!==null&&e!==void 0?e:(r=(i=this.getViewDataStatistics().latestData)===null||i===void 0?void 0:i[this.getValueField()])===null||r===void 0?void 0:r.min,max:(a=(s=this._spec.range)===null||s===void 0?void 0:s.max)!==null&&a!==void 0?a:(l=(o=this.getViewDataStatistics().latestData)===null||o===void 0?void 0:o[this.getValueField()])===null||l===void 0?void 0:l.max}}}),(u=this._viewDataTransform.getDataView())===null||u===void 0||u.transform({type:"funnelTransform",options:{asIsTransformLevel:xG}})}initMark(){var t,e,i,r,s,a,o,l,u,h,c,d;if(this._funnelMark=this._createMark(Object.assign(Object.assign({},Do.mark.funnel),{name:this._funnelMarkName,type:this._funnelMarkType}),{themeSpec:(t=this._theme)===null||t===void 0?void 0:t.funnel,morph:Gu(this._spec,this._funnelMarkName),defaultMorphElementKey:this._seriesField,groupKey:this._seriesField,isSeriesMark:!0,customShape:(e=this._spec.funnel)===null||e===void 0?void 0:e.customShape,stateSort:(i=this._spec.funnel)===null||i===void 0?void 0:i.stateSort,noSeparateStyle:!0}),this._spec.isTransform&&(this._funnelTransformMark=this._createMark(Object.assign(Object.assign({},Do.mark.transform),{name:this._transformMarkName,type:this._transformMarkType}),{themeSpec:(r=this._theme)===null||r===void 0?void 0:r.transform,skipBeforeLayouted:!1,dataView:this._viewDataTransform.getDataView(),dataProductId:this._viewDataTransform.getProductId(),customShape:(s=this._spec.transform)===null||s===void 0?void 0:s.customShape,stateSort:(a=this._spec.transform)===null||a===void 0?void 0:a.stateSort,noSeparateStyle:!0})),(l=(o=this._spec)===null||o===void 0?void 0:o.outerLabel)===null||l===void 0?void 0:l.visible){const{line:p}=(u=this._spec.outerLabel)!==null&&u!==void 0?u:{},{line:f}=(c=(h=this._theme)===null||h===void 0?void 0:h.outerLabel)!==null&&c!==void 0?c:{};this._funnelOuterLabelMark.label=this._createMark(Do.mark.outerLabel,{themeSpec:(d=this._theme)===null||d===void 0?void 0:d.outerLabel,markSpec:this._spec.outerLabel,skipBeforeLayouted:!0,noSeparateStyle:!0}),this._funnelOuterLabelMark.line=this._createMark(Do.mark.outerLabelLine,{themeSpec:f,markSpec:p,depend:[this._funnelOuterLabelMark.label],noSeparateStyle:!0})}}initTooltip(){this._tooltipHelper=new g$t(this),this._funnelMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._funnelMark),this._funnelTransformMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._funnelTransformMark)}getDimensionField(){return this._seriesField?[this._seriesField]:[]}getMeasureField(){return[this._valueField]}getGroupFields(){return null}initMarkStyle(){const t=this._funnelMark;t&&this.setMarkStyle(t,{points:s=>this.getPoints(s),visible:s=>z(s[this._valueField]),fill:this.getColorAttribute()},"normal",kt.Series);const e=this._funnelTransformMark;e&&this.setMarkStyle(e,{points:s=>this.getPoints(s)},"normal",kt.Series);const i=this._funnelOuterLabelMark.label;i&&this.setMarkStyle(i,{text:s=>{const a=`${s[this.getCategoryField()]}`;return ft(this._spec.outerLabel.formatMethod)?this._spec.outerLabel.formatMethod(a,s):a},x:s=>this._computeOuterLabelPosition(s).x,y:s=>this._computeOuterLabelPosition(s).y,textAlign:s=>this._computeOuterLabelPosition(s).align,textBaseline:s=>this._computeOuterLabelPosition(s).textBaseline,maxLineWidth:s=>this._computeOuterLabelLimit(s)},"normal",kt.Series);const r=this._funnelOuterLabelMark.line;r&&i&&this.setMarkStyle(r,{x:s=>this._computeOuterLabelLinePosition(s).x1,y:s=>this._computeOuterLabelLinePosition(s).y1,x1:s=>this._computeOuterLabelLinePosition(s).x2,y1:s=>this._computeOuterLabelLinePosition(s).y2},"normal",kt.Series)}initLabelMarkStyle(t){var e,i;if(!t)return;const r=t.getTarget(),s=t.getComponent();r===this._funnelMark?(this._labelMark=t,this.setMarkStyle(t,{text:a=>`${a[this.getCategoryField()]} ${a[this.getValueField()]}`,x:a=>this._computeLabelPosition(a).x,y:a=>this._computeLabelPosition(a).y,maxLineWidth:a=>this._computeLabelLimit(a,this._spec.label),stroke:this.getColorAttribute()},"normal",kt.Series),!((e=this._funnelOuterLabelMark)===null||e===void 0)&&e.label&&this._funnelOuterLabelMark.label.setDepend(s),!((i=this._funnelOuterLabelMark)===null||i===void 0)&&i.line&&this._funnelOuterLabelMark.line.setDepend(...this._funnelOuterLabelMark.line.getDepend())):this._funnelTransformMark&&r===this._funnelTransformMark&&(this._transformLabelMark=t,this.setMarkStyle(t,{text:a=>`${(100*SS(TD).bind(this)(a)).toFixed(1)}%`,x:a=>this._computeLabelPosition(a).x,y:a=>this._computeLabelPosition(a).y,maxLineWidth:a=>this._computeLabelLimit(a,this._spec.transformLabel)},"normal",kt.Series))}initAnimation(){var t,e,i,r,s,a,o;const l=(i=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset)!==null&&i!==void 0?i:"clipIn";l==="clipIn"&&this._rootMark&&this._rootMark.setAnimationConfig(Ae((r=Z.getAnimationInKey("cartesianGroupClip"))===null||r===void 0?void 0:r({direction:()=>this._isHorizontal()?"x":"y",width:()=>{const u=this.getRootMark().getProduct();if(u){const{x1:h,x2:c}=u.getBounds();return Math.max(h,c)}return this.getLayoutRect().width},height:()=>{const u=this.getRootMark().getProduct();if(u){const{y1:h,y2:c}=u.getBounds();return Math.max(h,c)}return this.getLayoutRect().height},orient:()=>this._isReverse()?"negative":"positive"},l),Ee("group",this._spec,this._markAttributeContext))),[(s=this._funnelOuterLabelMark)===null||s===void 0?void 0:s.label].forEach(u=>{u&&u.setAnimationConfig(Ae(Z.getAnimationInKey("fadeInOut")(),Ee(u.name,this._spec,this._markAttributeContext)))}),[this._funnelMark,this._funnelTransformMark].forEach(u=>{u&&u.setAnimationConfig(Ae(Z.getAnimationInKey("funnel")({},l),Ee(u.name,this._spec,this._markAttributeContext)))}),!((a=this._funnelOuterLabelMark)===null||a===void 0)&&a.line&&this._funnelOuterLabelMark.line.setAnimationConfig(Ae((o=Z.getAnimationInKey("fadeInOut"))===null||o===void 0?void 0:o(),Ee("outerLabelLine",this._spec,this._markAttributeContext)))}initGroups(){}getStackGroupFields(){return[]}getStackValueField(){return null}initEvent(){var t;super.initEvent(),(t=this._viewDataTransform.getDataView())===null||t===void 0||t.target.addListener("change",e=>{this._viewDataTransform.updateData()})}getPoints(t){const e=this.isTransformLevel(t),i=this._getMainAxisLength(e)/2;let r,s;e?(r=this._shape==="rect"?this._getSecondaryAxisLength(t[yG])/2:this._getSecondaryAxisLength(t[Wx])/2,s=this._getSecondaryAxisLength(t[Wx])/2):(r=this._getSecondaryAxisLength(t[Wx])/2,s=this._shape==="rect"?r:this._getSecondaryAxisLength(t[bG])/2);const{x:a,y:o}=this._getPositionByData(t),l=this._getPolygonPoints([a,o],r,s,r,s,i);return this._funnelAlign!=="center"&&this._adjustPoints(l),l}isTransformLevel(t){return!!(t!=null&&t[xG])}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToPosition=this.valueToPosition.bind(this),this._markAttributeContext.getPoints=this.getPoints.bind(this),this._markAttributeContext.isTransformLevel=this.isTransformLevel.bind(this)}valueToPosition(t){var e,i,r;const s=(r=(i=(e=this.getViewData())===null||e===void 0?void 0:e.latestData)===null||i===void 0?void 0:i.find)===null||r===void 0?void 0:r.call(i,a=>a[this._categoryField]===t);return z(s)?this._getPolygonCenter(this.getPoints(s)):null}dataToPosition(t,e){return e&&!this.isDatumInViewData(t)?null:this.valueToPosition(t[this._categoryField])}dataToPositionX(t){var e;return(e=this.dataToPosition(t))===null||e===void 0?void 0:e.x}dataToPositionY(t){var e;return(e=this.dataToPosition(t))===null||e===void 0?void 0:e.y}dataToPositionZ(t){return 0}_getMainAxisLength(t=!1){var e;const i=this.getViewData().latestData.length,r=this._isHorizontal()?this.getLayoutRect().width:this.getLayoutRect().height,s=!!this._spec.isTransform,a=s?0:(e=this._spec.gap)!==null&&e!==void 0?e:0,o=s?Math.max(0,i-1):0,l=this._spec.heightRatio||.5,u=(r-a*Math.max(0,i-1))/(i+l*o);return t?s?u*l:0:u}_getSecondaryAxisLength(t){const e=Number.isNaN(t)||!Number.isFinite(t)?0:t,i=this._computeMaxSize(),r=this._computeMinSize();return r+(i-r)*e}_getPositionByData(t){var e;const i=(e=this.getViewData().latestData)===null||e===void 0?void 0:e.findIndex(d=>d[this._categoryField]===t[this._categoryField]&&d[Ka]===t[Ka]);if(!z(i)||i<0)return{};const r=this.isTransformLevel(t),s=this._isHorizontal(),a=s?this.getLayoutRect().height:this.getLayoutRect().width,o=s?this.getLayoutRect().width:this.getLayoutRect().height,l=a/2;let u=0;const h=this._getMainAxisLength(),c=this._getMainAxisLength(!0);return u+=i*(h+c),u+=r?-c/2:h/2,!this._spec.isTransform&&this._spec.gap&&(u+=this._spec.gap*i),this._isReverse()&&(u=o-u),this._isHorizontal()?{x:u,y:l}:{x:l,y:u}}_getPolygonPoints(t,e,i,r,s,a){const o=t[0],l=t[1];switch(this._funnelOrient){case"left":return[{x:o-a,y:l+e},{x:o-a,y:l-r},{x:o+a,y:l-s},{x:o+a,y:l+i}];case"right":return[{x:o+a,y:l-r},{x:o+a,y:l+r},{x:o-a,y:l+i},{x:o-a,y:l-i}];case"bottom":return[{x:o+e,y:l+a},{x:o-r,y:l+a},{x:o-s,y:l-a},{x:o+i,y:l-a}];default:return[{x:o-e,y:l-a},{x:o+r,y:l-a},{x:o+s,y:l+a},{x:o-i,y:l+a}]}}_getPolygonCenter(t){if(this._isHorizontal()){const r=(t[0].x+t[3].x)/2,s=(t[0].y+t[3].y)/2;return{x:(r+(t[1].x+t[2].x)/2)/2,y:(s+(t[1].y+t[2].y)/2)/2}}const e=(t[0].x+t[3].x)/2,i=(t[0].y+t[3].y)/2;return{x:(e+(t[1].x+t[2].x)/2)/2,y:(i+(t[1].y+t[2].y)/2)/2}}_adjustPoints(t){let e,i,r;return this._isHorizontal()?(r="y",this._funnelOrient==="left"?(e=this._funnelAlign==="bottom"?-t[1].y:t[1].y,i=this._funnelAlign==="bottom"?-t[2].y:t[2].y):(e=this._funnelAlign==="bottom"?-t[0].y:t[0].y,i=this._funnelAlign==="bottom"?-t[3].y:t[3].y)):(r="x",this._funnelOrient==="top"?(e=this._funnelAlign==="left"?t[0].x:-t[0].x,i=this._funnelAlign==="left"?t[3].x:-t[3].x):(e=this._funnelAlign==="left"?t[1].x:-t[1].x,i=this._funnelAlign==="left"?t[2].x:-t[2].x)),t[0][r]-=e,t[1][r]-=e,t[2][r]-=i,t[3][r]-=i,t}_computeLabelPosition(t){const e=this.getPoints(t);return this._getPolygonCenter(e)}_computeLabelLimit(t,e){const i=e==null?void 0:e.limit;if(Mt(i))return i;const r=this.getPoints(t);return i==="shapeSize"?this._isHorizontal()?Math.abs(r[3].x-r[0].x):(Math.abs(r[0].x-r[1].x)+Math.abs(r[2].x-r[3].x))/2:this._isHorizontal()?Math.abs(r[3].x-r[0].x):void 0}_computeOuterLabelPosition(t){var e,i;let r,s,a=(e=this._spec.outerLabel)===null||e===void 0?void 0:e.position,o="center",l="middle";if(a=this._isHorizontal()?["top","bottom"].includes(a)?a:this._funnelAlign==="bottom"?"top":"bottom":["left","right"].includes(a)?a:this._funnelAlign==="left"?"right":"left",((i=this._spec.outerLabel)===null||i===void 0?void 0:i.alignLabel)!==!1)({x:r,y:s}=this._getPositionByData(t)),a==="left"?(r=0,o="left"):a==="right"?(r=this.getLayoutRect().width,o="right"):a==="top"?(s=0,l="top"):a==="bottom"&&(s=this.getLayoutRect().height,l="bottom");else{const{x2:u,y2:h}=this._computeOuterLabelLinePosition(t);r=u,s=h,a==="left"?(r-=qc,o="right"):a==="right"?(r+=qc,o="left"):a==="top"?(s-=qc,l="bottom"):a==="bottom"&&(s+=qc,l="top")}return{x:r,y:s,align:o,textBaseline:l}}_computeOuterLabelLimit(t){var e,i,r,s,a;if(this._isHorizontal())return this._getMainAxisLength(this.isTransformLevel(t));const o=this.getPoints(t),l=(Math.abs(o[0].x-o[1].x)+Math.abs(o[2].x-o[3].x))/2,u=this.getCategoryField(),h=(r=(i=(e=this._labelMark)===null||e===void 0?void 0:e.getComponent())===null||i===void 0?void 0:i.getProduct().getGroupGraphicItem().find(({attribute:f,type:g})=>{var _;return g==="text"&&((_=f.data)===null||_===void 0?void 0:_[u])===t[u]},!0))===null||r===void 0?void 0:r.AABBBounds,c=h?h.x2-h.x1:0,d=this._funnelOuterLabelMark.line?$l:0;let p=this.getLayoutRect().width-Math.max(l,c);return this._funnelAlign==="center"&&(p/=2),p-d-((a=(s=this._spec.outerLabel)===null||s===void 0?void 0:s.spaceWidth)!==null&&a!==void 0?a:qc)}_computeOuterLabelLinePosition(t){var e,i,r,s,a,o,l,u,h,c,d;const p=this.getCategoryField(),f=(a=(s=(r=(i=(e=this._funnelOuterLabelMark)===null||e===void 0?void 0:e.label)===null||i===void 0?void 0:i.getProduct())===null||r===void 0?void 0:r.elements)===null||s===void 0?void 0:s.find(M=>{var P;return((P=M.data[0])===null||P===void 0?void 0:P[p])===t[p]}))===null||a===void 0?void 0:a.getBounds(),g=(u=(l=(o=this._labelMark)===null||o===void 0?void 0:o.getComponent())===null||l===void 0?void 0:l.getProduct().getGroupGraphicItem().find(({attribute:M,type:P})=>{var E;return P==="text"&&((E=M.data)===null||E===void 0?void 0:E[p])===t[p]},!0))===null||u===void 0?void 0:u.AABBBounds,_=(h=this._spec.outerLabel)!==null&&h!==void 0?h:{};let v,y,b,S;if(this._isHorizontal()){const M=(c=_.spaceWidth)!==null&&c!==void 0?c:qc,P=this.getPoints(t),E=(Math.abs(P[0].y-P[1].y)+Math.abs(P[2].y-P[3].y))/2;return this._spec.outerLabel.position==="top"||this._funnelAlign==="bottom"?(b=this._getPolygonCenter(P).y-E/2-M,S=_.alignLabel!==!1?(f==null?void 0:f.y2)+M:b-M,v=this._getPolygonCenter(P).x,b-S<$l&&(S=b-$l),y=v):(b=this._getPolygonCenter(P).y+E/2+M,S=_.alignLabel!==!1?(f==null?void 0:f.y1)-M:b+M,v=this._getPolygonCenter(P).x,S-b<$l&&(S=b+$l),y=v),{x1:v,x2:y,y1:b,y2:S}}const A=this.getPoints(t),w=(Math.abs(A[0].x-A[1].x)+Math.abs(A[2].x-A[3].x))/2,C=(g==null?void 0:g.x2)-(g==null?void 0:g.x1)||0,k=(d=_.spaceWidth)!==null&&d!==void 0?d:qc;return this._spec.outerLabel.position==="right"||this._funnelAlign==="left"?(v=this._getPolygonCenter(A).x+Math.max(C/2,w/2)+k,y=_.alignLabel!==!1?(f==null?void 0:f.x1)-k:v+k,b=this._getPolygonCenter(A).y,y-v<$l&&(y=v+$l),S=b):(v=this._getPolygonCenter(A).x-Math.max(C/2,w/2)-k,y=_.alignLabel!==!1?(f==null?void 0:f.x2)+k:v-k,b=this._getPolygonCenter(A).y,v-y<$l&&(y=v-$l),S=b),{x1:v,x2:y,y1:b,y2:S}}_computeMaxSize(){var t;const e=this._isHorizontal()?this.getLayoutRect().height:this.getLayoutRect().width,i=(t=this._spec.maxSize)!==null&&t!==void 0?t:p$t;return Qn(i,e)}_computeMinSize(){var t;const e=this._isHorizontal()?this.getLayoutRect().height:this.getLayoutRect().width,i=(t=this._spec.minSize)!==null&&t!==void 0?t:f$t;return Qn(i,e)}_isHorizontal(){return this._funnelOrient==="left"||this._funnelOrient==="right"}_isReverse(){return this._funnelOrient==="bottom"||this._funnelOrient==="right"}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._funnelMark]}}Do.type=at.funnel,Do.mark=Cet,Do.transformerConstructor=c5;const m$t=()=>{$nt(),Gs(),zm(),Z.registerSeries(Do.type,Do),Z.registerAnimation("funnel",(n,t)=>Object.assign({appear:t==="clipIn"?void 0:{type:"fadeIn"}},fT)),k6t(),$u()};class Yy extends Wnt{constructor(){super(...arguments),this.type=Yy.type}}Yy.type="pyramid3d";const Gnt=()=>{Z.registerMark(Yy.type,Yy),jjt(),Mit()};class Unt extends c5{_transformLabelSpec(t){this._addMarkLabelSpec(t,"funnel3d"),t.isTransform&&this._addMarkLabelSpec(t,"transform3d","transformLabel")}}class vl extends Do{constructor(){super(...arguments),this.type=at.funnel3d,this._funnelMarkName="funnel3d",this._funnelMarkType="pyramid3d",this._transformMarkName="transform3d",this._transformMarkType="pyramid3d",this.transformerConstructor=Unt}initMark(){var t,e,i,r,s,a,o,l;if(this._funnelMark=this._createMark(Object.assign(Object.assign({},vl.mark.funnel3d),{name:this._funnelMarkName,type:this._funnelMarkType}),{themeSpec:(t=this._theme)===null||t===void 0?void 0:t.funnel3d,key:this._seriesField,isSeriesMark:!0,support3d:!0}),this._spec.isTransform&&(this._funnelTransformMark=this._createMark(Object.assign(Object.assign({},vl.mark.transform3d),{name:this._transformMarkName,type:this._transformMarkType}),{themeSpec:(e=this._theme)===null||e===void 0?void 0:e.transform3d,key:this._seriesField,skipBeforeLayouted:!1,dataView:this._viewDataTransform.getDataView(),dataProductId:this._viewDataTransform.getProductId()})),(r=(i=this._spec)===null||i===void 0?void 0:i.outerLabel)===null||r===void 0?void 0:r.visible){const{line:u}=(s=this._spec.outerLabel)!==null&&s!==void 0?s:{},{line:h}=(o=(a=this._theme)===null||a===void 0?void 0:a.outerLabel)!==null&&o!==void 0?o:{};this._funnelOuterLabelMark.label=this._createMark(vl.mark.outerLabel,{themeSpec:(l=this._theme)===null||l===void 0?void 0:l.outerLabel,key:this._seriesField,markSpec:this._spec.outerLabel}),this._funnelOuterLabelMark.line=this._createMark(vl.mark.outerLabelLine,{themeSpec:h,key:this._seriesField,markSpec:u,depend:[this._funnelOuterLabelMark.label]})}}initMarkStyle(){super.initMarkStyle();const t=this._funnelMark;t&&this.setMarkStyle(t,{z:e=>{if(this._isHorizontal())return 0;const i=this.getPoints(e),r=Math.max(Math.abs(i[0].x-i[1].x),Math.abs(i[2].x-i[3].x));return(this._computeMaxSize()-r)/2}},"normal",kt.Series)}initLabelMarkStyle(t){var e,i;super.initLabelMarkStyle(t),this.setMarkStyle(t,{z:r=>{if(this._isHorizontal())return 0;const s=this.getPoints(r),a=Math.max(Math.abs(s[0].x-s[1].x),Math.abs(s[2].x-s[3].x));return(this._computeMaxSize()-a)/2}},"normal",kt.Series),this._labelMark=t,!((e=this._funnelOuterLabelMark)===null||e===void 0)&&e.label&&this._funnelOuterLabelMark.label.setDepend(t.getComponent()),!((i=this._funnelOuterLabelMark)===null||i===void 0)&&i.line&&this._funnelOuterLabelMark.line.setDepend(...this._funnelOuterLabelMark.line.getDepend())}}vl.type=at.funnel3d,vl.mark=ket,vl.transformerConstructor=Unt;const v$t=()=>{Gnt(),Gs(),zm(),Z.registerSeries(vl.type,vl)},IC=(n,t)=>{const e=(n-t[0])/(t[1]-t[0]||1);return Math.max(0,Math.min(1,e))},LC=n=>{const t=n.mark.elements.filter(i=>i.diffState===Ve.update),e=dn(t.map(i=>{var r;return(r=i==null?void 0:i.data)===null||r===void 0?void 0:r[0].depth}));return t.filter(i=>{var r;return((r=i==null?void 0:i.data)===null||r===void 0?void 0:r[0].depth)===e})},SG=(n,t,e)=>Gt(n)?[t,e]:[dn(n.map(i=>1*i.getGraphicAttribute("startAngle",!1))),Vi(n.map(i=>1*i.getGraphicAttribute("endAngle",!1)))],_$t=n=>({channel:{startAngle:{from:(t,e)=>{const{startAngle:i,endAngle:r}=n.animationInfo(),s=LC(e),a=SG(s,i,r);return IC(t.startAngle,a)*(r-i)+i},to:t=>t.startAngle},endAngle:{from:(t,e)=>{const{startAngle:i,endAngle:r}=n.animationInfo(),s=LC(e),a=SG(s,i,r);return IC(t.endAngle,a)*(r-i)+i},to:t=>t.endAngle},outerRadius:{from:t=>t.innerRadius,to:t=>t.outerRadius},innerRadius:{from:t=>t.innerRadius,to:t=>t.innerRadius}}}),AG=n=>[dn(n.map(t=>1*t.getGraphicAttribute("startAngle",!1))),Vi(n.map(t=>1*t.getGraphicAttribute("endAngle",!1)))],wG=n=>({channel:{startAngle:{from:(t,e)=>e.getGraphicAttribute("startAngle",!1),to:(t,e)=>{const{startAngle:i,endAngle:r}=n.animationInfo(),s=LC(e),a=AG(s);return IC(e.getGraphicAttribute("startAngle",!1),a)*(r-i)+i}},endAngle:{from:(t,e)=>e.getGraphicAttribute("endAngle",!1),to:(t,e)=>{const{startAngle:i,endAngle:r}=n.animationInfo(),s=LC(e),a=AG(s);return IC(e.getGraphicAttribute("endAngle",!1),a)*(r-i)+i}},outerRadius:{from:(t,e)=>e.getGraphicAttribute("outerRadius",!1),to:()=>n.animationInfo().innerRadius},innerRadius:{from:(t,e)=>e.getGraphicAttribute("innerRadius",!1),to:()=>n.animationInfo().innerRadius}}}),y$t=(n,t)=>{switch(t){case"fadeIn":return{type:"fadeIn"};case"growAngle":return{type:"growAngleIn"};default:return{type:"growRadiusIn"}}},b$t=()=>{Z.registerAnimation("sunburst",(n,t)=>({appear:y$t(n,t),enter:_$t(n),exit:wG(n),disappear:wG(n)}))},d5=(n,t=[],e)=>{const i=(e==null?void 0:e.maxDepth)>=0;return n.forEach(r=>{(!i||r.depth<=e.maxDepth)&&(t.push(e!=null&&e.callback?e.callback(r):r),r.children&&(i&&r.depth===e.maxDepth?(r.children=null,r.isLeaf=!0):d5(r.children,t,e)))}),t};function x$t(n,t,e,i,r){const s=n.children,a=s.length;let o=0;const l=new Array(a+1);l[0]=0;for(let h=0;h<a;++h)o+=s[h].value,l[h+1]=o;const u=(h,c,d,p,f,g,_)=>{if(h>=c-1){const C=s[h];return C.x0=p,C.y0=f,C.x1=g,void(C.y1=_)}const v=l[h],y=d/2+v;let b=h+1,S=c-1;for(;b<S;){const C=b+S>>>1;l[C]<y?b=C+1:S=C}y-l[b-1]<l[b]-y&&h+1<b&&--b;const A=l[b]-v,w=d-A;if(g-p>_-f){const C=d?(p*w+g*A)/d:g;u(h,b,A,p,f,C,_),u(b,c,w,C,f,g,_)}else{const C=d?(f*w+_*A)/d:_;u(h,b,A,p,f,g,C),u(b,c,w,p,C,g,_)}};u(0,a,n.value,t,e,i,r)}function MT(n,t,e,i,r,s={x0:"x0",x1:"x1",y0:"y0",y1:"y1"}){const a=n.children;let o,l=-1;const u=a.length,h=n.value&&(i-t)/n.value;for(;++l<u;)o=a[l],o[s.y0]=e,o[s.y1]=r,o[s.x0]=t,o[s.x1]=t+=o.value*h}function p5(n,t,e,i,r){const s=n.children;let a,o=-1;const l=s.length,u=n.value&&(r-e)/n.value;for(;++o<l;)a=s[o],a.x0=t,a.x1=i,a.y0=e,e+=a.value*u,a.y1=e}function S$t(n,t,e,i,r){(n.depth%2==1?p5:MT)(n,t,e,i,r)}function A$t(n,t,e,i,r,s){const a=[],o=t.children;let l,u,h=0,c=0;const d=o.length;let p,f,g,_,v,y,b,S,A,w=t.value;for(;h<d;){p=r-e,f=s-i;do g=o[c++].value;while(!g&&c<d);for(_=g,v=g,S=Math.max(f/p,p/f)/(w*n),A=g*g*S,b=Math.max(v/A,A/_);c<d;++c){if(u=o[c].value,g+=u,u<_&&(_=u),u>v&&(v=u),A=g*g*S,y=Math.max(v/A,A/_),y>b){g-=u;break}b=y}l=Object.assign({},t,{value:g,children:o.slice(h,c)}),a.push(l),p<f?MT(l,e,i,r,w?i+=f*g/w:s):p5(l,e,i,w?e+=p*g/w:r,s),w-=g,h=c}return a}const w$t=n=>(t,e,i,r,s)=>{A$t(n,t,e,i,r,s)},PT=(n,t,e=0,i=-1,r,s)=>{let a=0,o=i??-1,l=e;return n.forEach((u,h)=>{var c,d;const p={flattenIndex:++o,key:s?s(u):`${(c=r==null?void 0:r.key)!==null&&c!==void 0?c:""}-${h}`,maxDepth:-1,depth:e,index:h,value:u.value,isLeaf:!0,datum:r?r.datum.concat(u):[u],parentKey:r==null?void 0:r.key};if(!((d=u.children)===null||d===void 0)&&d.length){p.children=[],p.isLeaf=!1;const f=PT(u.children,p.children,e+1,o,p,s);p.value=F(u.value)?f.sum:Math.max(f.sum,ud(u.value)),o=f.flattenIndex,l=Math.max(f.maxDepth,l)}else p.isLeaf=!0,p.value=ud(u.value);a+=Math.abs(p.value),t.push(p)}),{sum:a,maxDepth:l,flattenIndex:o}},ff=(n,t,e,i)=>{let r=i;return n.forEach((s,a)=>{var o;r=t(s,a,e,r),!((o=s.children)===null||o===void 0)&&o.length&&(r=ff(s.children,t,s,r))}),i},MS=(n,t,e,i)=>{let r=i;return n.forEach((s,a)=>{var o;!((o=s.children)===null||o===void 0)&&o.length&&(r=MS(s.children,t,s,r)),r=t(s,a,e,r)}),r},CG={binary:x$t,dice:MT,slice:p5,sliceDice:S$t};class ET{constructor(t){var e;this._filterByArea=(s,a)=>{var o;const l=this._getMinAreaByDepth(s.depth);if(l>0&&s.value*a<l)return!1;if(!((o=s.children)===null||o===void 0)&&o.length){const u=s.children.filter(h=>this._filterByArea(h,a));u.length?u.length!==s.children.length&&(s.children=u):(s.isLeaf=!0,s.children=null)}return!0},this._getMinAreaByDepth=s=>{var a;return s<0?0:(a=ut(this.options.minVisibleArea)?this.options.minVisibleArea[s]:this.options.minVisibleArea)!==null&&a!==void 0?a:0},this._getGapWidthByDepth=s=>{var a;return s<0?0:(a=ut(this.options.gapWidth)?this.options.gapWidth[s]:this.options.gapWidth)!==null&&a!==void 0?a:0},this._getPaddingByDepth=s=>{var a;return s<0?0:(a=ut(this.options.padding)?this.options.padding[s]:this.options.padding)!==null&&a!==void 0?a:0},this._getLabelPaddingByDepth=s=>{var a;return s<0?0:(a=ut(this.options.labelPadding)?this.options.labelPadding[s]:this.options.labelPadding)!==null&&a!==void 0?a:0},this._layoutNode=s=>{const a=this._getGapWidthByDepth(s.depth);let o=s.x0,l=s.y0,u=s.x1,h=s.y1;if(s.maxDepth=this._maxDepth,a>0&&(o+=a/2,u-=a/2,l+=a/2,h-=a/2,o>u&&(o=(o+u)/2,u=o),l>h&&(l=(l+h)/2,h=l),s.x0=o,s.x1=u,s.y0=l,s.y1=h),s.children){const c=this._getLabelPaddingByDepth(s.depth),d=this._getPaddingByDepth(s.depth);d>0&&d<Math.min(u-o,h-l)/2&&(l+=d,h-=d,o+=d,u-=d),c>0&&(this.options.labelPosition==="top"&&l+c<h?(s.labelRect={x0:o,y0:l,x1:u,y1:l+c},l+=c):this.options.labelPosition==="bottom"&&h-c>l?(s.labelRect={x0:o,y0:h-c,x1:u,y1:h},h-=c):this.options.labelPosition==="left"&&o+c<u?(s.labelRect={x0:o,y0:l,x1:o+c,y1:h},o+=c):this.options.labelPosition==="right"&&u-c>o&&(s.labelRect={x0:u-c,y0:l,x1:u,y1:h},u-=c));const p=this._getGapWidthByDepth(s.depth+1);p>0&&(o-=p/2,u+=p/2,l-=p/2,h+=p/2),this._splitNode(s,o,l,u,h)}},this.options=Object.assign({},ET.defaultOpionts,t);const i=this.options.nodeKey,r=ft(i)?i:i?Vo(i):null;this._getNodeKey=r,this._splitNode=this.options.splitType==="squarify"?w$t(this.options.aspectRatio):(e=CG[this.options.splitType])!==null&&e!==void 0?e:CG.binary,this._maxDepth=-1}layout(t,e){var i;if(!t||!t.length)return[];const r="width"in e?{x0:0,x1:e.width,y0:0,y1:e.height,width:e.width,height:e.height}:{x0:Math.min(e.x0,e.x1),x1:Math.max(e.x0,e.x1),y0:Math.min(e.y0,e.y1),y1:Math.max(e.y0,e.y1),width:Math.abs(e.x1-e.x0),height:Math.abs(e.y1-e.y0)},s=[],a=PT(t,s,0,-1,null,this._getNodeKey);if(this._maxDepth=a.maxDepth,a.sum<=0)return[];const o={flattenIndex:-1,maxDepth:-1,key:"-1",depth:-1,index:-1,value:a.sum,datum:null,x0:r.x0,x1:r.x1,y0:r.y0,y1:r.y1,children:s},l=r.width*r.height/a.sum;return this._filterByArea(o,l),this._layout(o),(i=o.children)!==null&&i!==void 0?i:[]}_filterChildren(t){const e=this.options.maxDepth;if(Mt(e)&&e>=0&&t.depth>=e)return!1;const i=this.options.minChildrenVisibleArea;if(Mt(i)&&Math.abs((t.x1-t.x0)*(t.y1-t.y0))<i)return!1;const r=this.options.minChildrenVisibleSize;return!Mt(r)||!(Math.abs(t.x1-t.x0)<r||Math.abs(t.y1-t.y0)<r)}_layout(t){var e;this._filterChildren(t)||(t.children=null,t.isLeaf=!0),this._layoutNode(t),!((e=t.children)===null||e===void 0)&&e.length&&t.children.forEach(i=>{var r;!((r=i==null?void 0:i.children)===null||r===void 0)&&r.length?this._layout(i):this._layoutNode(i)})}}ET.defaultOpionts={aspectRatio:(1+Math.sqrt(5))/2,gapWidth:0,labelPadding:0,labelPosition:"top",splitType:"binary",minVisibleArea:10};const C$t=(n,t)=>{const e=new ET(n).layout(t,"width"in n?{width:n.width,height:n.height}:{x0:n.x0,x1:n.x1,y0:n.y0,y1:n.y1});if(n.flatten){const i=[];return d5(e,i,{maxDepth:n==null?void 0:n.maxDepth}),i}return e},k$t={x0:"startAngle",x1:"endAngle",y0:"innerRadius",y1:"outerRadius"};class Xy{constructor(t){this._layoutNode=r=>{if(r.maxDepth=this._maxDepth,r.children){const s=this._parsedInnerRadius[r.depth+1],a=this._parsedOutterRadius[r.depth+1];MT(r,r.startAngle,Math.min(s,a),r.endAngle,Math.max(s,a),k$t);const o=ut(this.options.label)?this.options.label[r.depth+1]:this.options.label;r.children.forEach(l=>{if(l.x=this._parsedCenter[0],l.y=this._parsedCenter[1],o)return this._layoutLabel(l,Si(o)?{align:"center",rotate:"radial"}:o)})}},this.options=t?Object.assign({},Xy.defaultOpionts,t):Object.assign({},Xy.defaultOpionts);const e=this.options.nodeKey,i=ft(e)?e:e?Vo(e):null;this._getNodeKey=i,this._maxDepth=-1}_parseRadius(t,e){const i=t.x0+ca(this.options.center[0],t.width),r=t.y0+ca(this.options.center[1],t.height),s=Math.min(t.width/2,t.height/2),a=this.options.innerRadius,o=this.options.outerRadius,l=ut(a),u=l?a.map(f=>ca(f,s)):ca(a,s),h=ut(o),c=this.options.gapRadius,d=h?o.map(f=>ca(f,s)):ca(o,s),p=Fq(0,e+1);if(l)this._parsedInnerRadius=p.map((f,g)=>{const _=u[g];return F(_)?s:_}),this._parsedOutterRadius=p.map((f,g)=>{var _,v;return h?(_=d[g])!==null&&_!==void 0?_:s:g<e?this._parsedInnerRadius[g+1]-(ut(c)?(v=c[g])!==null&&v!==void 0?v:0:c):d});else if(h)this._parsedOutterRadius=p.map((f,g)=>F(d[g])?s:d[g]),this._parsedInnerRadius=p.map((f,g)=>{var _;return g===0?u:this._parsedOutterRadius[g-1]-(ut(c)?(_=c[g])!==null&&_!==void 0?_:0:c)});else{const f=ca(a,s),g=(d-f)/(e+1);this._parsedInnerRadius=p.map((_,v)=>f+v*g),this._parsedOutterRadius=p.map((_,v)=>{var y;return this._parsedInnerRadius[v]+g-(ut(c)?(y=c[v])!==null&&y!==void 0?y:0:c)})}this._parsedCenter=[i,r],this._maxRadius=s}layout(t,e){const i="width"in e?{x0:0,x1:e.width,y0:0,y1:e.height,width:e.width,height:e.height}:{x0:Math.min(e.x0,e.x1),x1:Math.max(e.x0,e.x1),y0:Math.min(e.y0,e.y1),y1:Math.max(e.y0,e.y1),width:Math.abs(e.x1-e.x0),height:Math.abs(e.y1-e.y0)};if(!t||!t.length)return[];const r=[],s=PT(t,r,0,-1,null,this._getNodeKey);return this._parseRadius(i,s.maxDepth),this._maxDepth=s.maxDepth,this._layout(r,{flattenIndex:-1,maxDepth:-1,key:"-1",depth:-1,index:-1,value:s.sum,datum:null,children:r,startAngle:this.options.startAngle,endAngle:this.options.endAngle}),r}_layout(t,e){this._layoutNode(e),t.forEach(i=>{var r;!((r=i==null?void 0:i.children)===null||r===void 0)&&r.length?this._layout(i.children,i):this._layoutNode(i)})}_layoutLabel(t,e){var i;const r=(t.startAngle+t.endAngle)/2,s=(e.align==="start"?t.innerRadius:e.align==="end"?t.outerRadius:(t.innerRadius+t.outerRadius)/2)+((i=e.offset)!==null&&i!==void 0?i:0),a=un({x:this._parsedCenter[0],y:this._parsedCenter[1]},s,r);if(t.label={x:a.x,y:a.y,textBaseline:"middle"},e.rotate==="tangential")t.label.angle=r-Math.PI/2,t.label.textAlign="center",t.label.maxLineWidth=Math.abs(t.endAngle-t.startAngle)*s;else{const o=r%(2*Math.PI),l=o<0?o+2*Math.PI:o;l>Math.PI/2&&l<1.5*Math.PI?(t.label.angle=l+Math.PI,t.label.textAlign=e.align==="start"?"end":e.align==="end"?"start":"center"):(t.label.angle=l,t.label.textAlign=e.align),t.label.maxLineWidth=t.isLeaf?void 0:Math.abs(t.outerRadius-t.innerRadius)}}}Xy.defaultOpionts={startAngle:Math.PI/2,endAngle:-3*Math.PI/2,center:["50%","50%"],gapRadius:0,innerRadius:0,outerRadius:"70%"};const T$t=1664525,M$t=1013904223,kG=4294967296;function P$t(n=1){let t=n;return()=>(t=(T$t*t+M$t)%kG)/kG}function E$t(n,t){let e=0;const i=Bq(Array.from(n),t),r=i.length;let s,a,o=[];for(;e<r;)s=i[e],a&&Ynt(a,s)?++e:(o=O$t(o,s),a=R$t(o),e=0);return a}function O$t(n,t){let e,i;if(JE(t,n))return[t];for(e=0;e<n.length;++e)if($x(t,n[e])&&JE(t0(n[e],t),n))return[n[e],t];for(e=0;e<n.length-1;++e)for(i=e+1;i<n.length;++i)if($x(t0(n[e],n[i]),t)&&$x(t0(n[e],t),n[i])&&$x(t0(n[i],t),n[e])&&JE(Xnt(n[e],n[i],t),n))return[n[e],n[i],t];ri.getInstance().error("error when packEncloseRandom")}function $x(n,t){const e=n.radius-t.radius,i=t.x-n.x,r=t.y-n.y;return e<0||e*e<i*i+r*r}function Ynt(n,t){const e=n.radius-t.radius+1e-9*Math.max(n.radius,t.radius,1),i=t.x-n.x,r=t.y-n.y;return e>0&&e*e>i*i+r*r}function JE(n,t){for(let e=0;e<t.length;++e)if(!Ynt(n,t[e]))return!1;return!0}function R$t(n){switch(n.length){case 1:return I$t(n[0]);case 2:return t0(n[0],n[1]);case 3:return Xnt(n[0],n[1],n[2])}}function I$t(n){return{x:n.x,y:n.y,radius:n.radius}}function t0(n,t){const e=n.x,i=n.y,r=n.radius,s=t.x,a=t.y,o=t.radius,l=s-e,u=a-i,h=o-r,c=Math.sqrt(l*l+u*u);return{x:(e+s+l/c*h)/2,y:(i+a+u/c*h)/2,radius:(c+r+o)/2}}function Xnt(n,t,e){const i=n.x,r=n.y,s=n.radius,a=t.x,o=t.y,l=t.radius,u=e.x,h=e.y,c=e.radius,d=i-a,p=i-u,f=r-o,g=r-h,_=l-s,v=c-s,y=i*i+r*r-s*s,b=y-a*a-o*o+l*l,S=y-u*u-h*h+c*c,A=p*f-d*g,w=(f*S-g*b)/(2*A)-i,C=(g*_-f*v)/A,k=(p*b-d*S)/(2*A)-r,M=(d*v-p*_)/A,P=C*C+M*M-1,E=2*(s+w*C+k*M),I=w*w+k*k-s*s,D=-(Math.abs(P)>1e-6?(E+Math.sqrt(E*E-4*P*I))/(2*P):I/E);return{x:i+w+C*D,y:r+k+M*D,radius:D}}function TG(n,t,e){const i=n.x-t.x;let r,s;const a=n.y-t.y;let o,l;const u=i*i+a*a;u?(s=t.radius+e.radius,s*=s,l=n.radius+e.radius,l*=l,s>l?(r=(u+l-s)/(2*u),o=Math.sqrt(Math.max(0,l/u-r*r)),e.x=n.x-r*i-o*a,e.y=n.y-r*a+o*i):(r=(u+s-l)/(2*u),o=Math.sqrt(Math.max(0,s/u-r*r)),e.x=t.x+r*i-o*a,e.y=t.y+r*a+o*i)):(e.x=t.x+e.radius,e.y=t.y)}function MG(n,t){const e=n.radius+t.radius-1e-6,i=t.x-n.x,r=t.y-n.y;return e>0&&e*e>i*i+r*r}function PG(n){const t=n._,e=n.next._,i=t.radius+e.radius,r=(t.x*e.radius+e.x*t.radius)/i,s=(t.y*e.radius+e.y*t.radius)/i;return r*r+s*s}function Gx(n){return{_:n,next:null,prev:null}}function L$t(n,t){const e=(n=ot(n)).length;if(!e)return 0;let i=n[0];if(i.x=0,i.y=0,e===1)return i.radius;const r=n[1];if(i.x=-r.radius,r.x=i.radius,r.y=0,e===2)return i.radius+r.radius;let s=n[2];TG(r,i,s);let a,o,l,u,h,c,d,p=Gx(i),f=Gx(r),g=Gx(s);p.next=f,g.prev=f,f.next=g,p.prev=g,g.next=p,f.prev=p;for(let v=3;v<e;++v){d=!1,s=n[v],TG(p._,f._,s),g=Gx(s),a=f.next,o=p.prev,l=f._.radius,u=p._.radius;do if(l<=u){if(MG(a._,g._)){f=a,p.next=f,f.prev=p,--v,d=!0;break}l+=a._.radius,a=a.next}else{if(MG(o._,g._)){p=o,p.next=f,f.prev=p,--v,d=!0;break}u+=o._.radius,o=o.prev}while(a!==o.next);if(!d){for(g.prev=p,g.next=f,p.next=f.prev=f=g,h=PG(p),g=g.next;g!==f;)c=PG(g),c<h&&(p=g,h=c),g=g.next;f=p.next}}const _=[f._];for(g=f.next;g!==f;)_.push(g._),g=g.next;s=E$t(_,t);for(let v=0;v<e;++v)i=n[v],i.x-=s.x,i.y-=s.y;return s.radius}function EG(n){return function(t){t.children||(t.radius=Math.max(0,+n(t)||0))}}function QE(n,t,e){return function(i){const r=i==null?void 0:i.children;if(r){let s;const a=r.length,o=n(i)*t||0;if(o)for(s=0;s<a;++s)r[s].radius+=o;const l=L$t(r,e);if(o)for(s=0;s<a;++s)r[s].radius-=o;i.radius=l+o}}}function OG(n,t){return function(e,i,r){e.radius*=n,e.maxDepth=t,r&&(e.x=r.x+n*e.x,e.y=r.y+n*e.y)}}class Ky{constructor(t){this.options=t;const e=t==null?void 0:t.nodeKey,i=ft(e)?e:e?Vo(e):null;this._getNodeKey=i,this._getPadding=Mt(t==null?void 0:t.padding)?r=>t.padding:ut(t==null?void 0:t.padding)?r=>{var s;return(s=t.padding[r.depth+1])!==null&&s!==void 0?s:0}:()=>0,this._maxDepth=-1}layout(t,e){var i;const r="width"in e?{x0:0,x1:e.width,y0:0,y1:e.height,width:e.width,height:e.height}:{x0:Math.min(e.x0,e.x1),x1:Math.max(e.x0,e.x1),y0:Math.min(e.y0,e.y1),y1:Math.max(e.y0,e.y1),width:Math.abs(e.x1-e.x0),height:Math.abs(e.y1-e.y0)};if(!t||!t.length)return[];const s=[],a=PT(t,s,0,-1,null,this._getNodeKey);this._maxDepth=a.maxDepth;const o=P$t(),l={flattenIndex:-1,maxDepth:-1,key:"root",depth:-1,index:-1,value:a.sum,datum:null,children:s,x:r.x0+r.width/2,y:r.y0+r.height/2},{nodeSort:u,setRadius:h,padding:c,includeRoot:d}=(i=this.options)!==null&&i!==void 0?i:{};if(u!==!1){const p=ft(u)?this.options.nodeKey:Ky.defaultOpionts.nodeSort;ff([l],f=>{f.children&&f.children.length&&f.children.sort(p)})}if(h)ff([l],EG(h)),MS([l],QE(this._getPadding,.5,o)),ff([l],OG(1,this._maxDepth));else{const p=Math.min(r.width,r.height);ff([l],EG(Ky.defaultOpionts.setRadius)),MS([l],QE(NIt,1,o)),c&&MS([l],QE(this._getPadding,l.radius/p,o)),ff([l],OG(p/(2*l.radius),this._maxDepth))}return d?[l]:s}}Ky.defaultOpionts={setRadius:n=>Math.sqrt(n.value),padding:0,nodeSort:(n,t)=>t.value-n.value};const D$t=()=>{Ct.registerTransform("treemap",{transform:C$t,markPhase:"beforeJoin"},!0)},j1=(n,t={})=>{if(!n)return[];const e=[];return d5(n,e,t),e},B$t=(n,t)=>{if(!n)return n;const e=t(),{width:i,height:r}=e;return new Xy(e).layout(n,{width:i,height:r})},F$t=10;class j$t extends _s{constructor(){super(...arguments),this.markTooltipKeyCallback=t=>t==null?void 0:t[this.series.getDimensionField()[0]]}}var Dh;(function(n){n.DrillDown="drillDown",n.DrillUp="drillUp"})(Dh||(Dh={}));const N$t=(n,t)=>{const e=t.info(),i=t.keyField(),r=e==null?void 0:e.key;if(F(r))return n;if(e.type===Dh.DrillDown){const s=eit(n,r,i,"children");return ot(s)}if(e.type===Dh.DrillUp){const s=iit(n,r,i,"children");if(s)return ot(s)}return n};class f5{_getDrillTriggerEvent(t){var e;const{mode:i}=this._drillParams;return(e=Xl(i))===null||e===void 0?void 0:e[t]}_hideTooltip(){const t=this.getChart().getComponentsByType(mt.tooltip)[0];t&&t.hideTooltip()}initDrillable(t){this._drillParams=t}initDrillableData(t){const{getRawData:e}=this._drillParams;ie(t,"drillFilter",N$t),e().transform({type:"drillFilter",options:{info:()=>this._drillInfo,keyField:()=>this._drillParams.drillField()}})}bindDrillEvent(){const{event:t,getRawData:e,drillField:i}=this._drillParams,r=i();this._getDrillTriggerEvent("start")&&t.on(this._getDrillTriggerEvent("start"),s=>{var a,o,l;if(F(s.datum)||F((a=s.datum)===null||a===void 0?void 0:a[r]))return void this.drillUp();this._hideTooltip();const u=s.datum[r],h=(l=(o=this._drillInfo)===null||o===void 0?void 0:o.path)!==null&&l!==void 0?l:[],c=L7t(e().rawData,u,r,"children");h[h.length-1]===c[c.length-1]?this.drillUp():this.drillDown(c)})}drillDown(t=[]){const{getRawData:e,event:i}=this._drillParams;if(!ut(t)||Gt(t))return t;const r=t[t.length-1];return this._drillInfo={key:r,path:t,type:Dh.DrillDown},e().reRunAllTransform(),i.emit(Wt.drill,{value:{path:t,type:Dh.DrillDown},model:this}),t}drillUp(){var t,e;const{getRawData:i,event:r}=this._drillParams,s=(e=(t=this._drillInfo)===null||t===void 0?void 0:t.path)!==null&&e!==void 0?e:[];if(!ut(s)||Gt(s))return s;const a=s.pop();return this._drillInfo={key:a,path:s,type:Dh.DrillUp},i().reRunAllTransform(),r.emit(Wt.drill,{value:{path:s,type:Dh.DrillUp},model:this}),s}}class ac extends B1{constructor(){super(...arguments),this.type=at.sunburst}setCategoryField(t){return this._categoryField=t,this._categoryField}getCategoryField(){return this._categoryField}setValueField(t){return this._valueField=t,this._valueField}getValueField(){return this._valueField}getDimensionField(){return[this._categoryField]}getMeasureField(){return[this._valueField]}setAttrFromSpec(){var t;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField((t=this._spec.seriesField)!==null&&t!==void 0?t:_u),this._spec.drill&&this.initDrillable({event:this.event,mode:this._option.mode,drillField:()=>{var e;return(e=this._spec.drillField)!==null&&e!==void 0?e:Ka},getRawData:()=>this.getRawData()}),this._startAngle=qe(this._spec.startAngle),this._endAngle=qe(this._spec.endAngle),this._centerX=this._spec.centerX,this._centerY=this._spec.centerY,this._offsetX=this._spec.offsetX,this._offsetY=this._spec.offsetY,this.__innerRadius=this._spec.innerRadius,this.__outerRadius=this._spec.outerRadius,this._gap=this._spec.gap,this._labelLayout=this._spec.labelLayout,this._sunburst=this._spec.sunburst,this._label=this._spec.label,this._labelAutoVisible=this._spec.labelAutoVisible}initData(){super.initData();const t=this.getRawData();t&&(this._spec.drill&&this.initDrillableData(this._dataSet),ie(this._dataSet,"sunburstLayout",B$t),ie(this._dataSet,"flatten",j1),t.transform({type:"sunburstLayout",options:()=>{const{innerRadius:e,outerRadius:i,gap:r,label:s}=this._computeLevel();return{nodeKey:this._categoryField,width:this.getLayoutRect().width,height:this.getLayoutRect().height,center:[z(this._centerX)?this._centerX:this.getLayoutRect().width/2,z(this._centerY)?this._centerY:this.getLayoutRect().height/2],startAngle:this._startAngle,endAngle:this._endAngle,innerRadius:e,outerRadius:i,gapRadius:r,label:s}}}),t.transform({type:"flatten",options:{callback:e=>{if(e.datum){const i=e.datum[e.depth];return Object.assign(Object.assign({},e),i)}return e}}}))}getStatisticFields(){return super.getStatisticFields().concat([{key:this._categoryField,operations:["values"]},{key:this._valueField,operations:["max","min"]},{key:Iy,operations:["max","min","values"]},{key:_u,operations:["values"]}])}_addDataIndexAndKey(){const t=this.getRawData();F(t==null?void 0:t.dataSet)||(ie(t.dataSet,"addVChartProperty",Nm),t.transform({type:"addVChartProperty",options:{beforeCall:t5.bind(this),call:_T}}))}initMark(){this._initArcMark(),this._initLabelMark()}initMarkStyle(){this._initArcMarkStyle(),this._initLabelMarkStyle()}_initArcMark(){var t,e;if(this._sunburst.visible===!1)return;const i=this._createMark(ac.mark.sunburst,{isSeriesMark:!0,customShape:(t=this._spec.sunburst)===null||t===void 0?void 0:t.customShape,stateSort:(e=this._spec.sunburst)===null||e===void 0?void 0:e.stateSort});this._sunburstMark=i}_initArcMarkStyle(){F(this._sunburstMark)||this.setMarkStyle(this._sunburstMark,{x:t=>t.x+(z(this._offsetX)?this._offsetX:0),y:t=>t.y+(z(this._offsetY)?this._offsetY:0),outerRadius:t=>t.outerRadius,innerRadius:t=>t.innerRadius,startAngle:t=>t.startAngle,endAngle:t=>t.endAngle,fill:this.getColorAttribute()},Bt.STATE_NORMAL,kt.Series)}_initLabelMark(){if(this._label.visible!==!0)return;const t=this._createMark(ac.mark.label,{isSeriesMark:!1});this._labelMark=t}_initLabelMarkStyle(){F(this._labelMark)||this.setMarkStyle(this._labelMark,{visible:t=>{var e;const i=this._labelAutoVisible;return ae(i)&&i.enable===!0?(t.endAngle-t.startAngle)*(t.outerRadius-t.innerRadius)>((e=i==null?void 0:i.circumference)!==null&&e!==void 0?e:F$t):this._spec.label.visible},x:t=>{var e;return((e=t.label)===null||e===void 0?void 0:e.x)+(z(this._offsetX)?this._offsetX:0)},y:t=>{var e;return((e=t.label)===null||e===void 0?void 0:e.y)+(z(this._offsetY)?this._offsetY:0)},textBaseline:t=>{var e;return(e=t.label)===null||e===void 0?void 0:e.textBaseline},textAlign:t=>{var e;return(e=t.label)===null||e===void 0?void 0:e.textAlign},angle:t=>{var e,i;return(i=(e=t.label)===null||e===void 0?void 0:e.angle)!==null&&i!==void 0?i:0},fontSize:10,text:t=>t.name},Bt.STATE_NORMAL,kt.Series)}initTooltip(){this._tooltipHelper=new j$t(this),this._sunburstMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._sunburstMark),this._labelMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._labelMark)}initAnimation(){var t,e;const i={animationInfo:()=>({innerRadius:this._computeRadius(ot(this.__innerRadius))[0],outerRadius:this._computeRadius(ot(this.__outerRadius))[0],startAngle:ot(this._startAngle)[0],endAngle:ot(this._endAngle)[0]})},r=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset;this.getMarksInType("arc").forEach(s=>{var a;s.setAnimationConfig(Ae((a=Z.getAnimationInKey("sunburst"))===null||a===void 0?void 0:a(i,r),Ee(s.name,this._spec,this._markAttributeContext)))}),this.getMarksInType("text").forEach(s=>{var a;s.setAnimationConfig(Ae((a=Z.getAnimationInKey("fadeInOut"))===null||a===void 0?void 0:a(),Ee(s.name,this._spec,this._markAttributeContext)))})}initEvent(){super.initEvent(),this._spec.drill&&this.bindDrillEvent()}onLayoutEnd(t){super.onLayoutEnd(t),this._rawData.reRunAllTransform()}_computeRadius(t){return ut(t)?t.map(e=>this._computeLayoutRadius()*e):this._computeLayoutRadius()*t}_computeLevel(){return{innerRadius:this._computeRadius(this.__innerRadius),outerRadius:this._computeRadius(this.__outerRadius),gap:this._gap,label:this._labelLayout}}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}_noAnimationDataKey(t,e){}getActiveMarks(){return[this._sunburstMark]}}ac.type=at.sunburst,ac.mark=Let,On(ac,f5);const z$t=()=>{Z.registerSeries(ac.type,ac),Pp(),Gs(),$u(),b$t()},H$t=(n,t)=>{if(!n)return n;const e=t(),{width:i,height:r}=e;return i===0||r===0?n:new Ky(e).layout(n,{width:i,height:r})};class V$t extends _s{constructor(){super(...arguments),this.markTooltipKeyCallback=t=>t==null?void 0:t[this.series.getDimensionField()[0]]}}const W$t=n=>n==="fadeIn"?{type:"fadeIn"}:{type:"growRadiusIn"},$$t=()=>{Z.registerAnimation("circlePacking",(n,t)=>({appear:W$t(t),enter:{type:"growRadiusIn"},exit:{type:"growRadiusOut"},disappear:{type:"growRadiusOut"}}))};class oc extends so{constructor(){super(...arguments),this.type=at.circlePacking}setCategoryField(t){return this._categoryField=t,this._categoryField}getCategoryField(){return this._categoryField}setValueField(t){return this._valueField=t,this._valueField}getValueField(){return this._valueField}getDimensionField(){return[this._categoryField]}getMeasureField(){return[this._valueField]}setAttrFromSpec(){var t;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField((t=this._spec.seriesField)!==null&&t!==void 0?t:_u),this._spec.drill&&this.initDrillable({event:this.event,mode:this._option.mode,drillField:()=>{var e;return(e=this._spec.drillField)!==null&&e!==void 0?e:Ka},getRawData:()=>this.getRawData()}),this._circlePacking=this._spec.circlePacking,this._label=this._spec.label,this._layoutPadding=this._spec.layoutPadding}initData(){super.initData();const t=this.getRawData();F(t)||(this._spec.drill&&this.initDrillableData(this._dataSet),ie(this._dataSet,"circlePackingLayout",H$t),ie(this._dataSet,"flatten",j1),t.transform({type:"circlePackingLayout",options:()=>({nodeKey:this._categoryField,padding:this._layoutPadding,includeRoot:!1,width:this.getLayoutRect().width||1,height:this.getLayoutRect().height||1})}),t.transform({type:"flatten",options:{callback:e=>{if(e.datum){const i=e.datum[e.depth];return Object.assign(Object.assign({},e),i)}return e}}}))}_addDataIndexAndKey(){const t=this.getRawData();F(t==null?void 0:t.dataSet)||(ie(t.dataSet,"addVChartProperty",Nm),t.transform({type:"addVChartProperty",options:{beforeCall:t5.bind(this),call:_T}}))}initMark(){this._initCirclePackingMark(),this._initLabelMark()}initMarkStyle(){this._initCirclePackingMarkStyle(),this._initLabelMarkStyle()}_initCirclePackingMark(){var t,e;if(((t=this._circlePacking)===null||t===void 0?void 0:t.visible)===!1)return;const i=this._createMark(oc.mark.circlePacking,{isSeriesMark:!0,customShape:(e=this._spec.circlePacking)===null||e===void 0?void 0:e.customShape});this._circlePackingMark=i}_initCirclePackingMarkStyle(){F(this._circlePackingMark)||this.setMarkStyle(this._circlePackingMark,{x:t=>t.x,y:t=>t.y,outerRadius:t=>t.radius,innerRadius:0,startAngle:0,endAngle:2*Math.PI,fill:this.getColorAttribute(),zIndex:t=>t.depth},Bt.STATE_NORMAL,kt.Series)}_initLabelMark(){var t;if(((t=this._label)===null||t===void 0?void 0:t.visible)===!1)return;const e=this._createMark(oc.mark.label,{isSeriesMark:!1});this._labelMark=e}_initLabelMarkStyle(){F(this._labelMark)||this.setMarkStyle(this._labelMark,{x:t=>t.x,y:t=>t.y,text:t=>t.key,cursor:"pointer"},Bt.STATE_NORMAL,kt.Series)}getStatisticFields(){return super.getStatisticFields().concat([{key:this._categoryField,operations:["values"]},{key:this._valueField,operations:["max","min"]},{key:Iy,operations:["max","min","values"]},{key:_u,operations:["values"]}])}initTooltip(){this._tooltipHelper=new V$t(this),this._tooltipHelper.updateTooltipSpec(),this._circlePackingMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._circlePackingMark),this._labelMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._labelMark)}initAnimation(){var t;const e=(t=this._spec.animationAppear)===null||t===void 0?void 0:t.preset;this.getMarksInType("arc").forEach(i=>{var r;i.setAnimationConfig(Ae((r=Z.getAnimationInKey("circlePacking"))===null||r===void 0?void 0:r(void 0,e),Ee(i.name,this._spec,this._markAttributeContext)))}),this.getMarksInType("text").forEach(i=>{var r;i.setAnimationConfig(Ae((r=Z.getAnimationInKey("scaleInOut"))===null||r===void 0?void 0:r(),Ee(i.name,this._spec,this._markAttributeContext)))})}initEvent(){super.initEvent(),this._spec.drill&&this.bindDrillEvent()}onLayoutEnd(t){super.onLayoutEnd(t),this._rawData.reRunAllTransform()}_noAnimationDataKey(t,e){}getActiveMarks(){return[this._circlePackingMark]}}oc.type=at.circlePacking,oc.mark=Fet,On(oc,f5);const G$t=()=>{Z.registerSeries(oc.type,oc),Pp(),Gs(),gT(),$$t()},Knt=n=>{let t=0;return n.forEach((e,i)=>{var r;F(e.value)&&(!((r=e.children)===null||r===void 0)&&r.length?e.value=Knt(e.children):e.value=0),t+=Math.abs(e.value)}),t};function RG(n){return n.depth}function IG(n,t){return t-1-n.endDepth}function U$t(n,t){return n.sourceLinks.length?n.depth:t-1}function Y$t(n,t,e){return n.targetLinks.length?n.depth:n.sourceLinks.length?dn(n.sourceLinks.map(i=>e[i.target].depth))-1:0}const Ux=(n,t)=>(n==null?void 0:n.y0)-(t==null?void 0:t.y0),LG=(n,t)=>{if(F(n.value))return null;const e=(t?n.targetLinks:n.sourceLinks).reduce((i,r)=>(F(r.value)?i.count+=1:i.sum+=r.value,i),{sum:0,count:0});return e.count>0?(n.value-e.sum)/e.count:null},X$t={left:RG,right:IG,justify:U$t,center:Y$t,start:RG,end:IG},K$t=o2(0,1);class N1{constructor(t){this._ascendingSourceBreadth=(r,s)=>Ux(this._nodeMap[r.source],this._nodeMap[s.source])||r.index-s.index,this._ascendingTargetBreadth=(r,s)=>Ux(this._nodeMap[r.target],this._nodeMap[s.target])||r.index-s.index,this.options=Object.assign({},N1.defaultOptions,t);const e=this.options.nodeKey,i=ft(e)?e:e?Vo(e):null;this._getNodeKey=i,this._logger=ri.getInstance(),this._alignFunc=ft(this.options.setNodeLayer)?r=>this.options.setNodeLayer(r.datum):X$t[this.options.nodeAlign]}layout(t,e){if(!t)return null;const i="width"in e?{x0:0,x1:e.width,y0:0,y1:e.height,width:e.width,height:e.height}:{x0:Math.min(e.x0,e.x1),x1:Math.max(e.x0,e.x1),y0:Math.min(e.y0,e.y1),y1:Math.max(e.y0,e.y1),width:Math.abs(e.x1-e.x0),height:Math.abs(e.y1-e.y0)};C9(this.options.direction)?this._viewBox={x0:i.y0,x1:i.y1,y0:i.x0,y1:i.x1,width:i.height,height:i.width}:this._viewBox=i;const r=this.computeNodeLinks(t),s=r.nodes;let a=r.links;if(this._nodeMap=r.nodeMap,this.computeNodeValues(s),this.computeNodeDepths(s),["right","end","justify"].includes(this.options.nodeAlign)&&this.computeNodeEndDepths(s),this._maxDepth<=1)return null;const o=this.computeNodeBreadths(s);return this.computeLinkBreadths(s),s.forEach(l=>{l.sourceLinks=l.sourceLinks.filter(u=>!F(u.source)&&!F(u.target)),l.targetLinks=l.targetLinks.filter(u=>!F(u.source)&&!F(u.target))}),a=a.filter(l=>!F(l.source)&&!F(l.target)),C9(this.options.direction)&&(s.forEach(l=>{const u=l.y0,h=l.y1;l.y0=l.x0,l.y1=l.x1,l.x0=u,l.x1=h}),a.forEach(l=>{l.vertical=!0;const u=l.x0,h=l.x1;l.x0=l.y0,l.x1=l.y1,l.y0=u,l.y1=h})),a.forEach(l=>{const u=this._nodeMap[l.source],h=this._nodeMap[l.target];l.sourceRect={x0:u.x0,x1:u.x1,y0:u.y0,y1:u.y1},l.targetRect={x0:h.x0,x1:h.x1,y1:h.y1,y0:h.y0}}),{nodes:s,links:a,columns:o}}computeHierarchicNodeLinks(t){const e=[],i=[],r={},s={},a=[];Knt(t);const o=(l,u,h)=>{l.forEach((c,d)=>{const p=this._getNodeKey?this._getNodeKey(c):h?`${h[h.length-1].key}-${d}`:`${u}-${d}`,f=F(c.value)?0:ud(c.value);if(r[p])r[p].value=void 0;else{const g={depth:u,datum:c,index:d,key:p,value:f,sourceLinks:[],targetLinks:[]};r[p]=g,e.push(g)}h&&a.push({source:h[h.length-1].key,target:p,value:f,parents:h}),c.children&&c.children.length&&o(c.children,u+1,h?h.concat([r[p]]):[r[p]])})};return o(t,0,null),a.forEach((l,u)=>{const h=`${l.source}-${l.target}`,c=fc(l,["parents"]);if(c.parents=l.parents.map(p=>fc(p,["sourceLinks","targetLinks"])),s[h])return s[h].value+=ud(l.value),void s[h].datum.push(c);const d={index:u,key:`${l.source}-${l.target}`,source:l.source,target:l.target,datum:[c],value:l.value,parents:l.parents.map(p=>p.key)};i.push(d),r[l.source].sourceLinks.push(d),r[l.target].targetLinks.push(d),s[h]=d}),{nodes:e,links:i,nodeMap:r}}computeSourceTargetNodeLinks(t){const e=[],i=[],r={};t.nodes&&t.nodes.forEach((a,o)=>{const l={depth:-1,datum:a,index:o,key:this._getNodeKey?this._getNodeKey(a):o,value:a.value,sourceLinks:[],targetLinks:[]};r[l.key]=l,e.push(l)});const s=[];return t.links.forEach((a,o)=>{const l=!F(a.source),u=!F(a.target);if(t.nodes&&(!r[a.source]||!r[a.target]))return;t.nodes||!l||r[a.source]||(r[a.source]={value:void 0,depth:-1,index:e.length,key:a.source,datum:null,sourceLinks:[],targetLinks:[]},e.push(r[a.source])),t.nodes||!u||r[a.target]||(r[a.target]={value:void 0,depth:-1,index:e.length,key:a.target,datum:null,sourceLinks:[],targetLinks:[]},e.push(r[a.target]));const h={index:o,source:a.source,target:a.target,datum:a,value:a.value};this.options.divideNodeValueToLink&&F(a.value)&&s.push(h),i.push(h),l&&r[a.source].sourceLinks.push(h),u&&r[a.target].targetLinks.push(h)}),this.options.divideNodeValueToLink&&s.length&&s.forEach(a=>{const o=[LG(r[a.source]),LG(r[a.target],!0)].filter(l=>!F(l));o.length&&(a.value=dn(o))}),{nodeMap:r,nodes:e,links:i}}computeNodeLinks(t){let e;"links"in t?e=this.computeSourceTargetNodeLinks(t):(this._isHierarchic=!0,e=this.computeHierarchicNodeLinks(t.nodes));let i=e.nodes;const r=e.links;if(this.options.linkSortBy)for(let s=0,a=i.length;s<a;s++)i[s].sourceLinks.sort(this.options.linkSortBy),i[s].targetLinks.sort(this.options.linkSortBy);return this.options.dropIsolatedNode&&(i=i.filter(s=>s.targetLinks.length||s.sourceLinks.length)),{nodes:i,links:r,nodeMap:e.nodeMap}}computeNodeValues(t){for(let e=0,i=t.length;e<i;e++){const r=t[e];r.value=Math.max(F(r.value)?0:ud(r.value),r.sourceLinks.reduce((s,a)=>{var o;return s+((o=ud(a.value))!==null&&o!==void 0?o:0)},0),r.targetLinks.reduce((s,a)=>{var o;return s+((o=ud(a.value))!==null&&o!==void 0?o:0)},0))}}computeNodeDepths(t){const e=t.length;let i,r,s=t,a=0;for(;s.length&&a<e;){i=[],r={};for(let o=0,l=s.length;o<l;o++){const u=s[o];if(u&&(u.depth=a,u.sourceLinks&&u.sourceLinks.length))for(let h=0,c=u.sourceLinks.length;h<c;h++){const d=u.sourceLinks[h];r[d.target]||(i.push(this._nodeMap[d.target]),r[d.target]=!0)}}s=i,a+=1}a>e&&this._logger.warn("Error: there is a circular link"),this._maxDepth=a}computeNodeEndDepths(t){const e=t.length;let i,r,s=t,a=0;for(;s.length&&a<e;){i=[],r={};for(let o=0,l=s.length;o<l;o++){const u=s[o];if(u){u.endDepth=a;for(let h=0,c=u.targetLinks.length;h<c;h++){const d=u.targetLinks[h];r[d.source]||(i.push(this._nodeMap[d.source]),r[d.source]=!0)}}}s=i,a+=1}a>e&&this._logger.warn("Error: there is a circular link")}computeNodeLayers(t){const e=this.options.nodeWidth,i=this.options.linkWidth,r=this.options.minStepWidth,s=this._viewBox.width;let a=null,o=null,l=!1;if(It(e)){const h=Zi(parseFloat(e.replace("%",""))/100,0,1);let c=s/(this._maxDepth-1+h);r>0&&(c=Math.max(r,c)),a=c*h,o=c*(1-h),l=!0}else if(Mt(e)){if(a=e,Mt(i))o=i;else if(F(i)){let h=(s-e)/(this._maxDepth-1);r>0&&(h=Math.max(r,h)),o=h-e}l=!0}else ft(e)&&Mt(i)&&(o=i);const u=[];for(let h=0,c=t.length;h<c;h++){const d=t[h];d.layer=this._isHierarchic?d.depth:Zi(Math.floor(this._alignFunc(d,this._maxDepth,this._nodeMap)),0,this._maxDepth-1);const p=d.layer;p===this._maxDepth-1&&(d.isLastLayer=!0),l&&(d.x0=this._viewBox.x0+p*(a+o),d.x1=d.x0+a),u[p]?u[p].push(d):u[p]=[d]}if(this.options.nodeSortBy)for(let h=0,c=u.length;h<c;h++)u[h].sort(this.options.nodeSortBy);if(!l&&ft(e)){let h=this._viewBox.x0;for(let c=0;c<this._maxDepth;c++){const d=u[c];let p=0,f=0;for(let g=0,_=d&&d.length;g<_;g++){const v=d[g],y=e(v);v.x0=h,v.x1=h+y,p=Math.max(a,y);const b=v.sourceLinks;for(let S=0,A=b.length;S<A;S++){const w=b[S],C=ft(i)?i(w,this._viewBox):o;f=Math.max(f,C)}}h+=p+f}}return u}initializeNodeBreadths(t){var e,i;const r=(e=this.options.minLinkHeight)!==null&&e!==void 0?e:0;let s=(i=this.options.minNodeHeight)!==null&&i!==void 0?i:0;(F(s)||s<r)&&(s=r);let a=0,o=null,l=null;if(ft(this.options.nodeGap))o=this.options.nodeGap,a=t.reduce((p,f)=>{const g=f.reduce((v,y)=>v+y.value,0),_=f.reduce((v,y)=>v+this.options.nodeGap(y),0);return Math.min(p,(this._viewBox.height-_)/g)},1/0);else{const p=t.reduce((g,_)=>Math.max(g,_.length),0),f=Math.min(s>0?Math.max(this.options.nodeGap,s):this.options.nodeGap,this._viewBox.height/p);o=()=>f,this._gapY=f,this.options.equalNodeHeight?l=this._viewBox.height/p-f:a=t.reduce((g,_)=>{const v=_.reduce((y,b)=>y+b.value,0);return Math.min(g,(this._viewBox.height-(_.length-1)*f)/v)},1/0)}const u=this.options.gapPosition==="start",h=!u&&this.options.gapPosition!=="end",c=Mt(this.options.nodeHeight)?p=>this.options.nodeHeight:ft(this.options.nodeHeight)?this.options.nodeHeight:l>0?p=>l:p=>Math.max(p.value*a,s,0),d=Mt(this.options.linkHeight)?()=>this.options.linkHeight:ft(this.options.linkHeight)?this.options.linkHeight:(p,f,g)=>Math.max(f.value?g*K$t(p.value/f.value):0,r,0);for(let p=0,f=t.length;p<f;p++){const g=t[p];if(!g||!g.length)continue;let _=this._viewBox.y0,v=0,y=0;for(let S=0,A=g.length;S<A;S++){const w=g[S];v=o(w),u&&(_+=v),y=c(w),w.y0=_,w.y1=_+y,_=u?w.y1:w.y1+v;for(let C=0,k=w.sourceLinks.length;C<k;C++){const M=w.sourceLinks[C];M.thickness=d(M,w,y)}}let b=this._viewBox.y1-_+(h?v:0);if(b>0){if(this.options.crossNodeAlign!=="start")if(this.options.crossNodeAlign==="end")for(let S=0,A=g.length;S<A;++S){const w=g[S];w.y0+=b,w.y1+=b}else{b/=g.length+1;for(let S=0,A=g.length;S<A;++S){const w=g[S];w.y0+=b*(S+1),w.y1+=b*(S+1)}}}else if(b<0&&g.length>1&&(b/=g.length-1,v+b>0)){v+=b,this._gapY=Math.min(v);for(let S=1,A=g.length;S<A;++S){const w=g[S];w.y0+=b*S,w.y1+=b*S}}this.reorderLinks(g)}}computeNodeBreadths(t){const e=this.computeNodeLayers(t);this.initializeNodeBreadths(e);const i=this.options.iterations;if(!this._isHierarchic&&!ft(this.options.setNodeLayer)&&!ft(this.options.nodeGap))for(let r=0;r<i;++r){const s=Math.pow(.99,r),a=Math.max(1-s,(r+1)/i);this.relaxRightToLeft(e,s,a),this.relaxLeftToRight(e,s,a)}return e}relaxLeftToRight(t,e,i){for(let r=1,s=t.length;r<s;++r){const a=t[r];for(let o=0,l=a.length;o<l;o++){const u=a[o];let h=0,c=0;for(let p=0,f=u.targetLinks.length;p<f;p++){const g=u.targetLinks[p],_=g.value*(u.layer-this._nodeMap[g.source].layer);h+=this.targetTop(this._nodeMap[g.source],u)*_,c+=_}if(!(c>0))continue;const d=(h/c-u.y0)*e;u.y0+=d,u.y1+=d,this.reorderNodeLinks(u)}F(this.options.nodeSortBy)&&a.sort(Ux),this.resolveCollisions(a,i)}}relaxRightToLeft(t,e,i){for(let r=t.length-2;r>=0;--r){const s=t[r];for(let a=0,o=s.length;a<o;a++){const l=s[a];let u=0,h=0;for(let d=0,p=l.sourceLinks.length;d<p;d++){const f=l.sourceLinks[d],g=f.value*(this._nodeMap[f.target].layer-l.layer);u+=this.sourceTop(l,this._nodeMap[f.target])*g,h+=g}if(!(h>0))continue;const c=(u/h-l.y0)*e;l.y0+=c,l.y1+=c,this.reorderNodeLinks(l)}this.options.nodeSortBy===void 0&&s.sort(Ux),this.resolveCollisions(s,i)}}resolveCollisions(t,e){const i=t.length>>1,r=t[i];this.resolveCollisionsBottomToTop(t,r.y0-this._gapY,i-1,e),this.resolveCollisionsTopToBottom(t,r.y1+this._gapY,i+1,e),this.resolveCollisionsBottomToTop(t,this._viewBox.y1,t.length-1,e),this.resolveCollisionsTopToBottom(t,this._viewBox.y0,0,e)}resolveCollisionsTopToBottom(t,e,i,r){for(;i<t.length;++i){const s=t[i],a=(e-s.y0)*r;a>1e-6&&(s.y0+=a,s.y1+=a),e=s.y1+this._gapY}}resolveCollisionsBottomToTop(t,e,i,r){for(;i>=0;--i){const s=t[i],a=(s.y1-e)*r;a>1e-6&&(s.y0-=a,s.y1-=a),e=s.y0-this._gapY}}targetTop(t,e){let i,r,s,a=t.y0-(t.sourceLinks.length-1)*this._gapY/2;for(i=0,r=t.sourceLinks.length;i<r&&(s=t.sourceLinks[i],s.target!==e.key);i++)a+=s.thickness+this._gapY;for(i=0,r=e.targetLinks.length;i<r&&(s=e.targetLinks[i],s.source!==t.key);i++)a-=s.thickness;return a}sourceTop(t,e){let i,r,s,a=e.y0-(e.targetLinks.length-1)*this._gapY/2;for(i=0,r=e.targetLinks.length;i<r&&(s=e.targetLinks[i],s.source!==t.key);i++)a+=s.thickness+this._gapY;for(i=0,r=t.sourceLinks.length;i<r&&(s=t.sourceLinks[i],s.target!==e.key);i++)a-=s.thickness;return a}computeLinkBreadthsNoOverlap(t){for(let e=0,i=t.length;e<i;e++){const r=t[e];let s=r.y0,a=!1;for(let l=0,u=r.sourceLinks.length;l<u;l++){const h=r.sourceLinks[l];a||(h.y0=s+h.thickness/2),h.x0=r.x1,s+h.thickness>r.y1||a?(h.y0=r.y1-h.thickness/2,a=!0):s+=h.thickness}let o=r.y0;a=!1;for(let l=0,u=r.targetLinks.length;l<u;l++){const h=r.targetLinks[l];a||(h.y1=o+h.thickness/2),h.x1=r.x0,o+h.thickness>r.y1||a?(h.y1=r.y1-h.thickness/2,a=!0):o+=h.thickness}}}computeLinkBreadthsOverlap(t){const e=this.options.linkOverlap;for(let i=0,r=t.length;i<r;i++){const s=t[i],a=e==="start"?s.y0:e==="end"?s.y1:(s.y0+s.y1)/2,o=e==="start"?.5:e==="end"?-.5:0;for(let l=0,u=s.sourceLinks.length;l<u;l++){const h=s.sourceLinks[l];h.y0=a+o*h.thickness,h.x0=s.x1}for(let l=0,u=s.targetLinks.length;l<u;l++){const h=s.targetLinks[l];h.y1=a+o*h.thickness,h.x1=s.x0}}}computeLinkBreadths(t){this.options.linkOverlap?this.computeLinkBreadthsOverlap(t):this.computeLinkBreadthsNoOverlap(t)}reorderNodeLinks(t){if(F(this.options.linkSortBy)){const e=t.targetLinks,i=t.sourceLinks;for(let r=0,s=e.length;r<s;r++){const a=e[r];this._nodeMap[a.source].sourceLinks.sort(this._ascendingTargetBreadth)}for(let r=0,s=i.length;r<s;r++){const a=i[r];this._nodeMap[a.target].targetLinks.sort(this._ascendingSourceBreadth)}}}reorderLinks(t){if(F(this.options.linkSortBy))for(let e=0,i=t.length;e<i;e++){const r=t[e];r.sourceLinks.sort(this._ascendingTargetBreadth),r.targetLinks.sort(this._ascendingSourceBreadth)}}}N1.defaultOptions={iterations:6,nodeAlign:"justify",direction:"horizontal",nodeWidth:24,nodeGap:8,crossNodeAlign:"middle",dropIsolatedNode:!0};const q$t=(n,t)=>{const e=new N1(n).layout(Array.isArray(t)?t[0]:t,"width"in n?{width:n.width,height:n.height}:{x0:n.x0,x1:n.x1,y0:n.y0,y1:n.y1});return e?[e]:[]},Z$t=()=>{Ct.registerTransform("sankey",{transform:q$t,markPhase:"beforeJoin"},!0)},qnt=(n,t,e)=>{t.forEach(i=>{F(i[e])||n.add(i[e]),i.children&&i.children.length>0&&qnt(n,i.children,e)})},J$t=n=>{var t;if(!n||!ut(n))return[];if(n.length>1){const e={links:[],nodes:[]};return n.forEach(i=>{i.id!=="links"&&i.id!=="nodes"||(e[i.id]=i.values)}),[e]}return!((t=n[0])===null||t===void 0)&&t.latestData?n[0].latestData:n},Q$t=(n,t)=>{if(!n||!(t!=null&&t.view)||!n.length)return[];const e=t.view();if(e.x1-e.x0==0||e.y1-e.y0==0||e.x1-e.x0==-1/0||e.x1-e.x0==1/0||e.y1-e.y0==-1/0||e.y1-e.y0==1/0)return[];const i=n[0];if((t.sourceField!=="source"||t.targetField!=="target"||t.valueField!=="value")&&i.links){const a=[];i.links.forEach(o=>{const l={};for(const u in o)u===t.sourceField?l.source=o[t.sourceField]:u===t.targetField?l.target=o[t.targetField]:u===t.valueField?l.value=o[t.valueField]:l[u]=o[u];a.push(l)}),i.links=a}const r=new N1(t),s=[];return s.push(r.layout(i,e)),s},tGt=n=>{var t,e;return n&&ut(n)&&(!((t=n[0])===null||t===void 0)&&t.latestData)&&n[0].latestData.length&&n[0].latestData[0]&&(e=n[0].latestData[0].nodes)!==null&&e!==void 0?e:[]},eGt=n=>{var t,e;return n&&ut(n)&&(!((t=n[0])===null||t===void 0)&&t.latestData)&&n[0].latestData.length&&n[0].latestData[0]&&(e=n[0].latestData[0].links)!==null&&e!==void 0?e:[]};class iGt extends _s{getDefaultTooltipPattern(t,e){switch(t){case"mark":return{visible:!0,activeType:t,title:{key:void 0,value:i=>{if(i.source){if(Mt(i.source)){const r=this.series.getSeriesKeys();return r[i.source]+" => "+r[i.target]}return i.source+" => "+i.target}return i.datum?i.datum[this.series.getSpec().categoryField]:i.key},hasShape:!1},content:[{key:this.markTooltipKeyCallback,value:i=>i.value,hasShape:!0,shapeType:this.shapeTypeCallback,shapeColor:this.shapeColorCallback,shapeStroke:this.shapeStrokeCallback,shapeHollow:!1}]};case"dimension":if(e){const i={key:void 0,value:this._getDimensionData,hasShape:!1},r=[];return e.forEach(({data:s})=>s.forEach(({series:a})=>{r.push({seriesId:a.id,key:this.markTooltipKeyCallback,value:this.markTooltipValueCallback,hasShape:!0,shapeType:this.shapeTypeCallback,shapeColor:this.shapeColorCallback,shapeStroke:this.shapeStrokeCallback,shapeHollow:!1})})),{visible:!0,activeType:t,title:i,content:r}}}return null}}const nGt=(n,t=!0)=>({type:n.direction==="horizontal"?"growWidthIn":"growHeightIn",options:{overall:t&&n.growFrom(),orient:"positive"}}),rGt=(n,t)=>t==="fadeIn"?{type:"fadeIn"}:nGt(n),sGt=n=>n==="fadeIn"?{type:"fadeIn"}:{type:"linkPathGrowIn"},aGt=()=>{Z.registerAnimation("sankeyNode",(n,t)=>Object.assign({appear:rGt(n,t)},fT)),Z.registerAnimation("sankeyLinkPath",(n,t)=>({appear:sGt(t),enter:{type:"linkPathGrowIn"},exit:{type:"linkPathGrowOut"},disappear:{type:"linkPathGrowOut"}}))};class qy extends Sr{constructor(){super(...arguments),this.type=qy.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{x:0,y:0,x0:0,y0:0,x1:100,y1:100,thickness:1,round:!0})}_initProduct(t){const e=this.getVGrammarView(),i=this.getProductId(),r=this.getStyle("direction");this._product=e.glyph("linkPath",t??e.rootMark).id(i).configureGlyph({direction:r}),this._compiledProductId=i}}qy.type="linkPath";const oGt=()=>{l8t(),Z.registerMark(qy.type,qy)};class lc extends so{constructor(){super(...arguments),this.type=at.sankey,this._nodeLayoutZIndex=ai.Node,this._labelLayoutZIndex=ai.Label,this._viewBox=new Fn,this._fillByNode=t=>{var e,i,r,s,a;if(t&&t.sourceRect&&t.targetRect)return this._fillByLink(t);const o=(i=(e=this._spec.node)===null||e===void 0?void 0:e.style)===null||i===void 0?void 0:i.fill;if(z(o))return o;if(z(this._spec.seriesField)){const l=(s=(r=this._option)===null||r===void 0?void 0:r.globalScale)===null||s===void 0?void 0:s.getScale("color"),u=t!=null&&t.datum?t.datum:t;return l==null?void 0:l.scale(u==null?void 0:u[this._spec.seriesField])}return(a=this._colorScale)===null||a===void 0?void 0:a.scale(this._getNodeNameFromData(t))},this._fillByLink=t=>{var e,i,r,s,a,o,l;const u=(i=(e=this._spec.link)===null||e===void 0?void 0:e.style)===null||i===void 0?void 0:i.fill;if(u)return u;if(z(this._spec.seriesField)){const c=(s=(r=this._nodesSeriesData)===null||r===void 0?void 0:r.getLatestData())===null||s===void 0?void 0:s.find(f=>t.source===f.key),d=c==null?void 0:c.datum,p=(o=(a=this._option)===null||a===void 0?void 0:a.globalScale)===null||o===void 0?void 0:o.getScale("color");return p==null?void 0:p.scale(d==null?void 0:d[this._spec.seriesField])}const h=Mt(t.source)?this.getNodeList()[t.source]:t.source;return(l=this._colorScale)===null||l===void 0?void 0:l.scale(h)},this._handleEmphasisElement=t=>{var e;const i=(e=this._spec.emphasis)!==null&&e!==void 0?e:{},r=t.item;i.effect==="adjacency"?r&&r.mark.id().includes("node")?this._handleNodeAdjacencyClick(r):r&&r.mark.id().includes("link")?this._handleLinkAdjacencyClick(r):this._handleClearEmpty():i.effect==="related"&&(r&&r.mark.id().includes("node")?this._handleNodeRelatedClick(r):r&&r.mark.id().includes("link")?this._handleLinkRelatedClick(r):this._handleClearEmpty())},this._handleClearEmpty=()=>{var t,e,i;const r=(t=this._nodeMark)===null||t===void 0?void 0:t.getProductElements();if(!r||!r.length)return;const s=(e=this._linkMark)===null||e===void 0?void 0:e.getProductElements();if(!s||!s.length)return;const a=(i=this._labelMark)===null||i===void 0?void 0:i.getProductElements();if(!a||!a.length)return;const o=[Bt.STATE_SANKEY_EMPHASIS,Bt.STATE_SANKEY_EMPHASIS_REVERSE];r.forEach(l=>{l.removeState(o)}),s.forEach(l=>{l.removeState(o)}),a.forEach(l=>{l.removeState(o)})},this._handleNodeAdjacencyClick=t=>{const e=t.getDatum(),i=[e.key];if(this._linkMark){const r=this._linkMark.getProductElements();if(!r||!r.length)return;r.forEach((s,a)=>{const o=s.getDatum(),l=o!=null&&o.parents?"parents":"source";if(ot(o[l]).includes(e.key)){let u;if(i.includes(o.source)||i.push(o.source),i.includes(o.target)||i.push(o.target),l==="parents"){const h=o.datum;u=(h?h.filter(c=>c.parents.some(d=>d.key===e.key)).reduce((c,d)=>c+d.value,0):0)/o.value}s.removeState(Bt.STATE_SANKEY_EMPHASIS_REVERSE),s.addState(Bt.STATE_SANKEY_EMPHASIS),s.addState(Bt.STATE_SANKEY_EMPHASIS,{ratio:u})}else o.target===e.key?i.includes(o.source)||i.push(o.source):(s.removeState(Bt.STATE_SANKEY_EMPHASIS),s.addState(Bt.STATE_SANKEY_EMPHASIS_REVERSE))})}this._nodeMark&&this._highLightElements(this._nodeMark.getProductElements(),i),this._labelMark&&this._highLightElements(this._labelMark.getProductElements(),i)},this._handleLinkAdjacencyClick=t=>{const e=t.getDatum(),i=[e.source,e.target];if(this._linkMark){const r=this._linkMark.getProductElements();if(!r||!r.length)return;r.forEach(s=>{s===t?(s.removeState(Bt.STATE_SANKEY_EMPHASIS_REVERSE),s.addState(Bt.STATE_SANKEY_EMPHASIS,{ratio:1})):(s.removeState(Bt.STATE_SANKEY_EMPHASIS),s.addState(Bt.STATE_SANKEY_EMPHASIS_REVERSE))})}this._nodeMark&&this._highLightElements(this._nodeMark.getProductElements(),i),this._labelMark&&this._highLightElements(this._labelMark.getProductElements(),i)},this._handleNodeRelatedClick=t=>{var e;const i=t.getDatum(),r=this._nodeMark.getProductElements();if(!r||!r.length)return;const s=this._linkMark.getProductElements();if(!(!s||!s.length))if((!((e=s[0].getDatum())===null||e===void 0)&&e.parents?"parents":"source")=="source"){const a=[i.key],o=[];if(s.forEach((l,u)=>{var h,c,d,p;const f=l.getDatum(),g=f!=null&&f.parents?"parents":"source";if(ot(f[g]).includes(i.key)){if(o.includes((h=f.key)!==null&&h!==void 0?h:f.index)||o.push((c=f.key)!==null&&c!==void 0?c:f.index),a.includes(f.source)||a.push(f.source),!a.includes(f.target)){a.push(f.target);let _=r.find(v=>v.data[0].key===f.target).data[0].sourceLinks;for(;(_==null?void 0:_.length)>0;){const v=[];return _.forEach(y=>{var b,S;if(!o.includes((b=y.key)!==null&&b!==void 0?b:y.index)&&(o.push((S=y.key)!==null&&S!==void 0?S:y.index),!a.includes(y.target))){a.push(y.target);const A=r.find(w=>w.data[0].key===y.target);v.push(A.data[0].targetLinks)}}),void(_=v)}}}else if(f.target===i.key&&(o.includes((d=f.key)!==null&&d!==void 0?d:f.index)||o.push((p=f.key)!==null&&p!==void 0?p:f.index),!a.includes(f.source))){a.push(f.source);let _=r.find(v=>v.data[0].key===f.source).data[0].targetLinks;for(;(_==null?void 0:_.length)>0;){const v=[];return _.forEach(y=>{var b,S;if(!o.includes((b=y.key)!==null&&b!==void 0?b:y.index)&&(o.push((S=y.key)!==null&&S!==void 0?S:y.index),!a.includes(y.source))){a.push(y.source);const A=r.find(w=>w.data[0].key===y.source);v.push(A.data[0].targetLinks)}}),void(_=v)}}}),this._linkMark){const l=this._linkMark.getProductElements();if(!l||!l.length)return;l.forEach((u,h)=>{var c;o.includes((c=u.getDatum().key)!==null&&c!==void 0?c:u.getDatum().index)?(u.removeState(Bt.STATE_SANKEY_EMPHASIS_REVERSE),u.addState(Bt.STATE_SANKEY_EMPHASIS)):(u.removeState(Bt.STATE_SANKEY_EMPHASIS),u.addState(Bt.STATE_SANKEY_EMPHASIS_REVERSE))})}this._nodeMark&&this._highLightElements(this._nodeMark.getProductElements(),a),this._labelMark&&this._highLightElements(this._labelMark.getProductElements(),a)}else{const a=[i.key],o=i.targetLinks.reduce((l,u)=>(ot(u.datum).forEach(h=>{const c=h.parents,d=c.length;for(let p=0;p<d;p++){const f=c[p].key,g=c[p+1]?c[p+1].key:i.key,_=h.value,v=l.find(y=>y.source===f&&y.target===g);v?v.value+=_:l.push({source:f,target:g,value:_})}}),l),[]);s.forEach((l,u)=>{const h=l.getDatum(),c=h!=null&&h.parents?"parents":"source",d=h.datum,p=d?d.filter(g=>g[c].some(_=>_.key===i.key)):null,f=o.find(g=>g.source===h.source&&g.target===h.target);if(p&&p.length){a.includes(h.source)||a.push(h.source),a.includes(h.target)||a.push(h.target);const g=p.reduce((_,v)=>_+v.value,0)/h.value;return l.removeState(Bt.STATE_SANKEY_EMPHASIS_REVERSE),l.addState(Bt.STATE_SANKEY_EMPHASIS),void l.addState(Bt.STATE_SANKEY_EMPHASIS,{ratio:g})}if(f)return a.includes(h.source)||a.push(h.source),a.includes(h.target)||a.push(h.target),l.removeState(Bt.STATE_SANKEY_EMPHASIS_REVERSE),l.addState(Bt.STATE_SANKEY_EMPHASIS),void l.addState(Bt.STATE_SANKEY_EMPHASIS,{ratio:f.value/h.value});l.removeState(Bt.STATE_SANKEY_EMPHASIS),l.addState(Bt.STATE_SANKEY_EMPHASIS_REVERSE)}),this._nodeMark&&this._highLightElements(this._nodeMark.getProductElements(),a),this._labelMark&&this._highLightElements(this._labelMark.getProductElements(),a)}},this._handleLinkRelatedClick=t=>{var e;const i=this._nodeMark.getProductElements();if(!i||!i.length)return;const r=this._linkMark.getProductElements();if(!(!r||!r.length))if((!((e=t.getDatum())===null||e===void 0)&&e.parents?"parents":"source")=="source"){const s=[Bt.STATE_SANKEY_EMPHASIS,Bt.STATE_SANKEY_EMPHASIS_REVERSE];if(this._linkMark&&r.forEach(a=>{a.removeState(s)}),this._nodeMark&&i.forEach(a=>{a.removeState(s)}),this._labelMark){const a=this._labelMark.getProductElements();if(!a||!a.length)return;a.forEach(o=>{o.removeState(s)})}}else{const s=t.getDatum(),a=[s.source,s.target],o=[];ot(s.datum).forEach(l=>{const u=l.parents,h=u.length;for(let c=0;c<h-1;c++){const d=u[c].key,p=u[c+1].key,f=l.value,g=o.find(_=>_.source===d&&_.target===p);o.push({source:u[c].key,target:u[c+1].key,value:l.value}),g?g.value+=f:o.push({source:d,target:p,value:f})}}),r.forEach(l=>{const u=l.getDatum(),h=u.datum;if(u.source===s.source&&u.target===s.target)return l.removeState(Bt.STATE_SANKEY_EMPHASIS_REVERSE),void l.addState(Bt.STATE_SANKEY_EMPHASIS,{ratio:1});const c=h?h.filter(p=>{const f=p.parents.map(g=>g.key);return f.includes(s.source)&&f.includes(s.target)}):null;if(c&&c.length){a.includes(u.source)||a.push(u.source),a.includes(u.target)||a.push(u.target);const p=c.filter(g=>g.parents.some((_,v)=>{var y;return _.key===s.source&&((y=g.parents[v+1])===null||y===void 0?void 0:y.key)===s.target})).reduce((g,_)=>g+_.value,0),f=p/u.value;return l.removeState(Bt.STATE_SANKEY_EMPHASIS_REVERSE),l.addState(Bt.STATE_SANKEY_EMPHASIS),void l.addState(Bt.STATE_SANKEY_EMPHASIS,{ratio:f})}const d=o.find(p=>p.source===u.source&&p.target===u.target);if(d)return a.includes(u.source)||a.push(u.source),a.includes(u.target)||a.push(u.target),l.removeState(Bt.STATE_SANKEY_EMPHASIS_REVERSE),l.addState(Bt.STATE_SANKEY_EMPHASIS),void l.addState(Bt.STATE_SANKEY_EMPHASIS,{ratio:d.value/u.value});l.removeState(Bt.STATE_SANKEY_EMPHASIS),l.addState(Bt.STATE_SANKEY_EMPHASIS_REVERSE)}),this._highLightElements(i,a),this._labelMark&&this._highLightElements(this._labelMark.getProductElements(),a)}}}getCategoryField(){return this._categoryField}setCategoryField(t){return this._categoryField=t,this._categoryField}getValueField(){return this._valueField}setValueField(t){return this._valueField=t,this._valueField}setAttrFromSpec(){var t,e,i;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField((t=this._spec.seriesField)!==null&&t!==void 0?t:this._spec.categoryField),this._labelLimit=(i=(e=this._spec.label)===null||e===void 0?void 0:e.limit)!==null&&i!==void 0?i:100}initData(){var t,e,i,r;super.initData();const s=this.getViewData(),a=this.getRawData();if(a&&s){ie(this._dataSet,"sankeyLayout",Q$t),ie(this._dataSet,"sankeyFormat",J$t),a.transform({type:"sankeyFormat"},!1),s.transform({type:"sankeyLayout",options:{view:()=>({x0:this._viewBox.x1,x1:this._viewBox.x2,y0:this._viewBox.y1,y1:this._viewBox.y2}),sourceField:this._spec.sourceField,targetField:this._spec.targetField,valueField:this._spec.valueField,direction:this._spec.direction,nodeAlign:(t=this._spec.nodeAlign)!==null&&t!==void 0?t:"justify",nodeGap:(e=this._spec.nodeGap)!==null&&e!==void 0?e:8,nodeWidth:(i=this._spec.nodeWidth)!==null&&i!==void 0?i:10,linkWidth:this._spec.linkWidth,minStepWidth:this._spec.minStepWidth,minNodeHeight:(r=this._spec.minNodeHeight)!==null&&r!==void 0?r:4,minLinkHeight:this._spec.minLinkHeight,iterations:this._spec.iterations,nodeKey:this._spec.nodeKey,linkSortBy:this._spec.linkSortBy,nodeSortBy:this._spec.nodeSortBy,setNodeLayer:this._spec.setNodeLayer,dropIsolatedNode:this._spec.dropIsolatedNode,nodeHeight:this._spec.nodeHeight,linkHeight:this._spec.linkHeight,equalNodeHeight:this._spec.equalNodeHeight,linkOverlap:this._spec.linkOverlap},level:$o.sankeyLayout});const{dataSet:o}=this._option;ie(o,"sankeyNodes",tGt),ie(o,"flatten",j1);const l=new Le(o,{name:`sankey-node-${this.id}-data`});l.parse([this.getViewData()],{type:"dataview"}),l.transform({type:"sankeyNodes"}),l.transform({type:"flatten",options:{callback:h=>{if(h.datum){const c=h.datum[h.depth];return Object.assign(Object.assign({},h),c)}return h}}},!1),l.transform({type:"addVChartProperty",options:{beforeCall:rm.bind(this),call:fp}},!1),this._nodesSeriesData=new kl(this._option,l),ie(o,"sankeyLinks",eGt);const u=new Le(o,{name:`sankey-link-${this.id}-data`});u.parse([this.getViewData()],{type:"dataview"}),u.transform({type:"sankeyLinks"}),u.transform({type:"addVChartProperty",options:{beforeCall:rm.bind(this),call:fp}},!1),this._linksSeriesData=new kl(this._option,u)}}initMark(){var t,e,i,r;const s=this._createMark(lc.mark.node,{isSeriesMark:!0,dataView:this._nodesSeriesData.getDataView(),dataProductId:this._nodesSeriesData.getProductId(),customShape:(t=this._spec.node)===null||t===void 0?void 0:t.customShape,stateSort:(e=this._spec.node)===null||e===void 0?void 0:e.stateSort});s&&(s.setZIndex(this._nodeLayoutZIndex),this._nodeMark=s);const a=this._createMark(lc.mark.link,{dataView:this._linksSeriesData.getDataView(),dataProductId:this._linksSeriesData.getProductId(),customShape:(i=this._spec.link)===null||i===void 0?void 0:i.customShape,stateSort:(r=this._spec.link)===null||r===void 0?void 0:r.stateSort});if(a&&(this._linkMark=a),this._spec.label&&this._spec.label.visible){const o=this._createMark(lc.mark.label,{dataView:this._nodesSeriesData.getDataView(),dataProductId:this._nodesSeriesData.getProductId()});o&&(this._labelMark=o)}}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToNode=this.valueToNode.bind(this),this._markAttributeContext.valueToLink=this.valueToLink.bind(this)}valueToNode(t){const e=this._nodesSeriesData.getLatestData(),i=ot(t)[0];return e&&e.find(r=>r.key===i)}valueToLink(t){const e=this._linksSeriesData.getLatestData(),i=ot(t);return e&&e.find(r=>r&&r.source===i[0]&&r.target===i[1])}valueToPositionX(t){const e=this.valueToNode(t);return e==null?void 0:e.x0}valueToPositionY(t){const e=this.valueToNode(t);return e==null?void 0:e.y0}initMarkStyle(){this._initNodeMarkStyle(),this._initLinkMarkStyle(),this._initLabelMarkStyle()}_initNodeMarkStyle(){const t=this._nodeMark;t&&this.setMarkStyle(t,{x:e=>e.x0,x1:e=>e.x1,y:e=>e.y0,y1:e=>e.y1,fill:this._fillByNode},Bt.STATE_NORMAL,kt.Mark)}_initLinkMarkStyle(){var t;const e=this._linkMark;e&&this.setMarkStyle(e,{x0:i=>i.x0,x1:i=>i.x1,y0:i=>i.y0,y1:i=>i.y1,thickness:i=>i.thickness,fill:this._fillByLink,direction:(t=this._spec.direction)!==null&&t!==void 0?t:"horizontal"},Bt.STATE_NORMAL,kt.Series)}_initLabelMarkStyle(){this._labelMark&&(this._spec.direction==="vertical"?this._spec.label.position==="inside-start"?this.setMarkStyle(this._labelMark,{x:t=>t.x0,y:t=>(t.y0+t.y1)/2,fill:"#ffffff",text:t=>this._createText(t),limit:t=>{var e;return(e=this._spec.label.limit)!==null&&e!==void 0?e:t.x1-t.x0},textAlign:"left",textBaseline:"middle"},Bt.STATE_NORMAL,kt.Series):this._spec.label.position==="inside-middle"?this.setMarkStyle(this._labelMark,{x:t=>(t.x0+t.x1)/2,y:t=>(t.y0+t.y1)/2,fill:"#ffffff",text:t=>this._createText(t),limit:t=>{var e;return(e=this._spec.label.limit)!==null&&e!==void 0?e:t.x1-t.x0},textAlign:"center",textBaseline:"middle"},Bt.STATE_NORMAL,kt.Series):this._spec.label.position==="inside-end"?this.setMarkStyle(this._labelMark,{x:t=>t.x1,y:t=>(t.y0+t.y1)/2,fill:"#ffffff",text:t=>this._createText(t),limit:t=>{var e;return(e=this._spec.label.limit)!==null&&e!==void 0?e:t.x1-t.x0},textAlign:"right",textBaseline:"middle"},Bt.STATE_NORMAL,kt.Series):this.setMarkStyle(this._labelMark,{x:t=>(t.x0+t.x1)/2,y:t=>t.y1>=this._viewBox.y2?t.y0:t.y1,fill:this._fillByNode,text:t=>this._createText(t),limit:this._labelLimit,textAlign:"center",textBaseline:t=>t.y1>=this._viewBox.y2?"bottom":"top"},Bt.STATE_NORMAL,kt.Series):this._spec.label.position==="inside-start"?this.setMarkStyle(this._labelMark,{x:t=>t.x0,y:t=>(t.y0+t.y1)/2,fill:"#ffffff",text:t=>this._createText(t),limit:t=>{var e;return(e=this._spec.label.limit)!==null&&e!==void 0?e:t.x1-t.x0},textAlign:"left",textBaseline:"middle"},Bt.STATE_NORMAL,kt.Series):this._spec.label.position==="inside-middle"?this.setMarkStyle(this._labelMark,{x:t=>(t.x0+t.x1)/2,y:t=>(t.y0+t.y1)/2,fill:"#ffffff",text:t=>this._createText(t),limit:t=>{var e;return(e=this._spec.label.limit)!==null&&e!==void 0?e:t.x1-t.x0},textAlign:"center",textBaseline:"middle"},Bt.STATE_NORMAL,kt.Series):this._spec.label.position==="inside-end"?this.setMarkStyle(this._labelMark,{x:t=>t.x1,y:t=>(t.y0+t.y1)/2,fill:"#ffffff",text:t=>this._createText(t),limit:t=>{var e;return(e=this._spec.label.limit)!==null&&e!==void 0?e:t.x1-t.x0},textAlign:"right",textBaseline:"middle"},Bt.STATE_NORMAL,kt.Series):this._spec.label.position==="left"?this.setMarkStyle(this._labelMark,{x:t=>t.x0,y:t=>(t.y0+t.y1)/2,fill:this._fillByNode,text:t=>this._createText(t),limit:this._labelLimit,textAlign:"right",textBaseline:"middle"},Bt.STATE_NORMAL,kt.Series):this._spec.label.position==="right"?this.setMarkStyle(this._labelMark,{x:t=>t.x1,y:t=>(t.y0+t.y1)/2,fill:this._fillByNode,text:t=>this._createText(t),limit:this._labelLimit,textAlign:"left",textBaseline:"middle"},Bt.STATE_NORMAL,kt.Series):this.setMarkStyle(this._labelMark,{x:t=>t.x1>=this._viewBox.x2?t.x0:t.x1,y:t=>(t.y0+t.y1)/2,fill:this._fillByNode,text:t=>this._createText(t),limit:this._labelLimit,textAlign:t=>t.x1>=this._viewBox.x2?"right":"left",textBaseline:"middle"},Bt.STATE_NORMAL,kt.Series),this._labelMark.setZIndex(this._labelLayoutZIndex))}_createText(t){var e;if(F(t)||F(t.datum))return"";let i=t.datum[this._spec.categoryField]||"";return!((e=this._spec.label)===null||e===void 0)&&e.formatMethod&&(i=this._spec.label.formatMethod(i,t.datum)),i}initAnimation(){var t,e,i,r,s;const a={direction:this.direction,growFrom:()=>{var l,u;return this.direction==="horizontal"?(l=this._xAxisHelper)===null||l===void 0?void 0:l.getScale(0).scale(0):(u=this._yAxisHelper)===null||u===void 0?void 0:u.getScale(0).scale(0)}},o=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset;this._nodeMark&&this._nodeMark.setAnimationConfig(Ae((i=Z.getAnimationInKey("sankeyNode"))===null||i===void 0?void 0:i(a,o),Ee("node",this._spec,this._markAttributeContext))),this._linkMark&&this._linkMark.setAnimationConfig(Ae((r=Z.getAnimationInKey("sankeyLinkPath"))===null||r===void 0?void 0:r(a,o),Ee("link",this._spec,this._markAttributeContext))),this._labelMark&&this._labelMark.setAnimationConfig(Ae((s=Z.getAnimationInKey("fadeInOut"))===null||s===void 0?void 0:s(),Ee("label",this._spec,this._markAttributeContext)))}initEvent(){var t,e,i;super.initEvent(),(t=this._nodesSeriesData.getDataView())===null||t===void 0||t.target.addListener("change",this.nodesSeriesDataUpdate.bind(this)),(e=this._linksSeriesData.getDataView())===null||e===void 0||e.target.addListener("change",this.linksSeriesDataUpdate.bind(this));const r=(i=this._spec.emphasis)!==null&&i!==void 0?i:{};if(this._option.disableTriggerEvent!==!0&&r.enable&&(r.effect==="adjacency"||r.effect==="related")){const s=r.trigger==="hover"?"pointerover":"pointerdown";this.event.on(s,{level:ci.chart},this._handleEmphasisElement)}}nodesSeriesDataUpdate(){this._nodesSeriesData.updateData(),this._nodeList=null,this._setNodeOrdinalColorScale()}linksSeriesDataUpdate(){this._linksSeriesData.updateData()}_highLightElements(t,e){t&&t.length&&t.forEach(i=>{i.removeState([Bt.STATE_SANKEY_EMPHASIS_REVERSE,Bt.STATE_SANKEY_EMPHASIS]),e.includes(i.getDatum().key)||i.addState(Bt.STATE_SANKEY_EMPHASIS_REVERSE)})}initTooltip(){this._tooltipHelper=new iGt(this),this._nodeMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._nodeMark),this._linkMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._linkMark),this._labelMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._labelMark)}_setNodeOrdinalColorScale(){var t,e,i,r,s;const a=(e=(t=this._option)===null||t===void 0?void 0:t.globalScale)===null||e===void 0?void 0:e.getScale("color");if(a!=null&&a._specified)return void(this._colorScale=a);let o,l;a&&(o=a.domain(),l=a.range()),l||(l=this._getDataScheme()),o&&!F(o[0])||(o=this.getNodeList(),o.length>10&&(l=(i=this._getDataScheme()[1])===null||i===void 0?void 0:i.scheme));const u=new O1;(s=(r=u.domain(o)).range)===null||s===void 0||s.call(r,l),this._colorScale=u}getNodeList(){var t;if(this._nodeList)return this._nodeList;const e=this._rawData.latestData[0],i=e!=null&&e.nodes?!((t=e.nodes[0])===null||t===void 0)&&t.children?Array.from(this.extractNamesFromTree(e.nodes,this._spec.categoryField)):e.nodes.map((r,s)=>r[this._spec.categoryField]):e!=null&&e.links?Array.from(this.extractNamesFromLink(e.links)):e==null?void 0:e.values.map((r,s)=>r[this._spec.categoryField]);return this._nodeList=i,i}_getNodeNameFromData(t){var e;return t!=null&&t.datum?t.datum[this._spec.categoryField]:(e=t.key)!==null&&e!==void 0?e:t[this._spec.categoryField]}extractNamesFromTree(t,e){const i=new Set;return t.forEach(r=>{i.add(r[e]),r.children&&this.extractNamesFromTree(r.children,e).forEach(s=>i.add(s))}),i}extractNamesFromLink(t){const e=new Set,{sourceField:i,targetField:r}=this._spec;return t.forEach(s=>{z(s[i])&&e.add(s[i]),z(s[r])&&e.add(s[r])}),e}getDimensionField(){return[this._spec.categoryField]}getMeasureField(){return[this._valueField]}getRawDataStatisticsByField(t,e){var i;return this._rawStatisticsCache||(this._rawStatisticsCache={}),!this._rawStatisticsCache[t]&&(this._viewDataStatistics&&this.getViewData().transformsArr.length<=1&&(!((i=this._viewDataStatistics.latestData)===null||i===void 0)&&i[t])?this._rawStatisticsCache[t]=this._viewDataStatistics.latestData[t]:this._rawData&&(this._rawStatisticsCache[t]={values:this._collectByField(t)})),this._rawStatisticsCache[t]}_collectByField(t){var e,i,r;const s=[],a=(i=(e=this.getRawData())===null||e===void 0?void 0:e.latestData)===null||i===void 0?void 0:i[0];if(!a)return[];if(a.links)!((r=a.nodes)===null||r===void 0)&&r.length&&a.nodes.forEach(o=>{o[this._seriesField]&&s.push(o[this._seriesField])});else if(a.nodes){const o=new Set;return qnt(o,a.nodes,this._seriesField),Array.from(o)}return s}onLayoutEnd(t){super.onLayoutEnd(t),this._viewBox.set(0,0,this._region.getLayoutRect().width,this._region.getLayoutRect().height),this.getViewData().reRunAllTransform()}getDefaultShapeType(){return"square"}_noAnimationDataKey(t,e){}getActiveMarks(){return[this._nodeMark,this._linkMark]}}lc.type=at.sankey,lc.mark=Oet;const lGt=()=>{Z$t(),Yu(),oGt(),Gs(),aGt(),$u(),Z.registerSeries(lc.type,lc)},uGt=(n,t)=>{let e={},i=t.fields;if(ft(i)&&(i=i()),!(i!=null&&i.length)||!(n!=null&&n.length)||!n[0].latestData)return e;const r=n[0].latestData,s=j1(r);return e=AD([{latestData:s}],t),e};class hGt extends _s{constructor(){super(...arguments),this.markTooltipKeyCallback=t=>t==null?void 0:t[this.series.getDimensionField()[0]]}get defaultShapeType(){return"square"}}const cGt=n=>n==="fadeIn"?{type:"fadeIn"}:{type:"growCenterIn"},dGt=()=>{Z.registerAnimation("treemap",(n,t)=>({appear:cGt(t),enter:{type:"growCenterIn"},exit:{type:"growCenterOut"},disappear:{type:"growCenterOut"}}))};class Znt extends ys{_transformLabelSpec(t){this._addMarkLabelSpec(t,"nonLeaf","nonLeafLabel","initNonLeafLabelMarkStyle"),this._addMarkLabelSpec(t,"leaf")}}class dl extends so{constructor(){super(...arguments),this.type=at.treemap,this.transformerConstructor=Znt,this._viewBox=new Fn,this._enableAnimationHook=this.enableMarkAnimation.bind(this),this.isHierarchyData=()=>!0}getCategoryField(){return this._categoryField}setCategoryField(t){return this._categoryField=t,this._categoryField}getValueField(){return this._valueField}setValueField(t){return this._valueField=t,this._valueField}setAttrFromSpec(){var t;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField((t=this._spec.seriesField)!==null&&t!==void 0?t:_u),this._spec.roam&&(this.initZoomable(this.event,this._option.mode),this._matrix=new Wi),this._spec.drill&&this.initDrillable({event:this.event,mode:this._option.mode,drillField:()=>{var e,i;return(i=(e=this._spec.drillField)!==null&&e!==void 0?e:this._categoryField)!==null&&i!==void 0?i:Ka},getRawData:()=>this.getRawData()}),st(this._spec.maxDepth)&&(this._maxDepth=this._spec.maxDepth-1)}initData(){super.initData(),this.getViewData()&&this._spec.drill&&this.initDrillableData(this._dataSet)}compile(){super.compile(),this._runTreemapTransform()}_runTreemapTransform(t=!1){var e,i,r,s;const a=this._data.getProduct();a&&a.transform([{type:"treemap",x0:this._viewBox.x1,x1:this._viewBox.x2,y0:this._viewBox.y1,y1:this._viewBox.y2,maxDepth:this._maxDepth,gapWidth:this._spec.gapWidth,padding:this._spec.nodePadding,splitType:this._spec.splitType,aspectRatio:this._spec.aspectRatio,labelPadding:!((e=this._spec.nonLeafLabel)===null||e===void 0)&&e.visible?(i=this._spec.nonLeafLabel)===null||i===void 0?void 0:i.padding:0,labelPosition:(r=this._spec.nonLeafLabel)===null||r===void 0?void 0:r.position,minVisibleArea:(s=this._spec.minVisibleArea)!==null&&s!==void 0?s:10,minChildrenVisibleArea:this._spec.minChildrenVisibleArea,minChildrenVisibleSize:this._spec.minChildrenVisibleSize,flatten:!0},{type:"map",callback:o=>(o&&[_u,"name"].forEach(l=>{o[l]=o.datum[o.depth][l]}),o)}]),t&&this.getCompiler().renderNextTick()}_addDataIndexAndKey(){var t;!((t=this._rawData)===null||t===void 0)&&t.dataSet&&(ie(this._rawData.dataSet,"addVChartProperty",Nm),this._rawData.transform({type:"addVChartProperty",options:{beforeCall:t5.bind(this),call:_T}}))}getRawDataStatisticsByField(t,e){var i;if(!this._rawDataStatistics){const r=`${this.type}_${this.id}_rawDataStatic`;this._rawDataStatistics=this._createHierarchyDataStatistics(r,[this._rawData]),this._rawData.target.removeListener("change",this._rawDataStatistics.reRunAllTransform),this._rawDataStatistics.reRunAllTransform()}return(i=this._rawDataStatistics.latestData)===null||i===void 0?void 0:i[t]}_createHierarchyDataStatistics(t,e){ie(this._dataSet,"hierarchyDimensionStatistics",uGt),ie(this._dataSet,"flatten",j1);const i=new Le(this._dataSet,{name:t});return i.parse(e,{type:"dataview"}),i.transform({type:"hierarchyDimensionStatistics",options:{fields:()=>{const r=this.getStatisticFields();return this._seriesField&&this._seriesField!==this._categoryField&&r.push({key:this._seriesField,operations:["values"]}),r}}},!1),i}getStatisticFields(){return super.getStatisticFields().concat([{key:this._categoryField,operations:["values"]},{key:this._valueField,operations:["max","min"]},{key:Iy,operations:["max","min","values"]},{key:_u,operations:["values"]}])}initMark(){var t,e,i,r;const s=this._createMark(dl.mark.nonLeaf,{isSeriesMark:!0,customShape:(t=this._spec.nonLeaf)===null||t===void 0?void 0:t.customShape,stateSort:(e=this._spec.nonLeaf)===null||e===void 0?void 0:e.stateSort});s&&(s.setTransform([{type:"filter",callback:o=>!this._shouldFilterElement(o,"nonLeaf")}]),this._nonLeafMark=s);const a=this._createMark(dl.mark.leaf,{isSeriesMark:!0,customShape:(i=this._spec.leaf)===null||i===void 0?void 0:i.customShape,stateSort:(r=this._spec.leaf)===null||r===void 0?void 0:r.stateSort});a&&(a.setTransform([{type:"filter",callback:o=>!this._shouldFilterElement(o,"leaf")}]),this._leafMark=a)}initMarkStyle(){this._initLeafMarkStyle(),this._initNonLeafMarkStyle()}_initLeafMarkStyle(){this._leafMark&&this.setMarkStyle(this._leafMark,{x:t=>t.x0,y:t=>t.y0,x1:t=>t.x1,y1:t=>t.y1,fill:this.getColorAttribute()},Bt.STATE_NORMAL,kt.Series)}_initNonLeafMarkStyle(){this._nonLeafMark&&this.setMarkStyle(this._nonLeafMark,{x:t=>t.x0,y:t=>t.y0,x1:t=>t.x1,y1:t=>t.y1,fill:this.getColorAttribute()},Bt.STATE_NORMAL,kt.Series)}initLabelMarkStyle(t){t&&(this._labelMark=t,t.setRule("treemap"),this.setMarkStyle(t,{x:e=>(e.x0+e.x1)/2,y:e=>(e.y0+e.y1)/2,text:e=>{var i;return(i=e.datum[e.depth])===null||i===void 0?void 0:i[this.getDimensionField()[0]]},maxLineWidth:e=>e.x1===e.x0?Number.MIN_VALUE:e.x1-e.x0},Bt.STATE_NORMAL,kt.Series),t.getTextType()==="rich"&&this.setMarkStyle(t,{maxWidth:e=>Math.abs(e.x0-e.x1),maxHeight:e=>Math.abs(e.y0-e.y1),ellipsis:!0},Bt.STATE_NORMAL,kt.Series))}initNonLeafLabelMarkStyle(t){t&&(this._nonLeafLabelMark=t,t.setRule("treemap"),this.setMarkStyle(t,{x:e=>e.labelRect?(e.labelRect.x0+e.labelRect.x1)/2:(e.x0+e.x1)/2,y:e=>e.labelRect?(e.labelRect.y0+e.labelRect.y1)/2:(e.y0+e.y1)/2,text:e=>{var i;return(i=e.datum[e.depth])===null||i===void 0?void 0:i[this.getDimensionField()[0]]},maxLineWidth:e=>e.x1===e.x0?Number.MIN_VALUE:e.x1-e.x0},Bt.STATE_NORMAL,kt.Series),t.getTextType()==="rich"&&this.setMarkStyle(t,{maxWidth:e=>Math.abs(e.x0-e.x1),maxHeight:e=>Math.abs(e.y0-e.y1),ellipsis:!0},Bt.STATE_NORMAL,kt.Series))}initAnimation(){this.getMarksInType("rect").forEach(t=>{var e;t.setAnimationConfig(Ae((e=Z.getAnimationInKey("treemap"))===null||e===void 0?void 0:e(),Ee(t.name,this._spec,this._markAttributeContext)))})}initEvent(){super.initEvent(),this._spec.roam&&(this.initDragEventOfSeries(this),this.event.on("panmove",t=>{this.handlePan(t)}),this.initZoomEventOfSeries(this),this.event.on("zoom",t=>{this.handleZoom(t)})),this._spec.drill&&this.bindDrillEvent()}_getDataIdKey(){return"key"}initTooltip(){this._tooltipHelper=new hGt(this),this._leafMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._leafMark),this._nonLeafMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._nonLeafMark)}_shouldFilterElement(t,e){const i=t.isLeaf;return e==="leaf"?!i:i}handlePan(t){const{delta:e}=t;if(e[0]===0&&e[1]===0)return;this._matrix.reset(),this._matrix.translate(e[0],e[1]);const{a:i,b:r,c:s,d:a,e:o,f:l}=this._matrix;this._matrix.multiply(i,r,s,a,o,l),this._viewBox.transformWithMatrix(this._matrix),this._runTreemapTransform(!0)}handleZoom(t){const{scale:e,scaleCenter:i}=t;if(e===1)return;this._matrix.reset();const{x:r,y:s}=i;this._matrix.translate(r,s),this._matrix.scale(e,e),this._matrix.translate(-r,-s);const{a,b:o,c:l,d:u,e:h,f:c}=this._matrix;this._matrix.multiply(a,o,l,u,h,c),this.disableMarkAnimation(),this.event.on(Ht.AFTER_DO_RENDER,this._enableAnimationHook),this._viewBox.transformWithMatrix(this._matrix),this._runTreemapTransform(!0)}getDimensionField(){return[this._categoryField]}getMeasureField(){return[this._valueField]}onLayoutEnd(t){super.onLayoutEnd(t),this._viewBox.set(0,0,this.getLayoutRect().width,this.getLayoutRect().height),this._runTreemapTransform()}enableMarkAnimation(){this.getMarks().forEach(t=>{var e;(e=t.getProduct().animate)===null||e===void 0||e.enable()}),[this._labelMark,this._nonLeafLabelMark].forEach(t=>{t&&t.getComponent()&&t.getComponent().getProduct().getGroupGraphicItem().enableAnimation()}),this.event.off(Ht.AFTER_DO_RENDER,this._enableAnimationHook)}disableMarkAnimation(){this.getMarks().forEach(t=>{var e;(e=t.getProduct().animate)===null||e===void 0||e.disable()}),[this._labelMark,this._nonLeafLabelMark].forEach(t=>{t&&t.getComponent()&&t.getComponent().getProduct().getGroupGraphicItem().disableAnimation()})}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._nonLeafMark,this._leafMark]}}dl.type=at.treemap,dl.mark=Eet,dl.transformerConstructor=Znt,On(dl,f5),On(dl,a5);const pGt=()=>{Yu(),Gs(),dGt(),$u(),D$t(),Z.registerSeries(dl.type,dl)},fGt=n=>({channel:{angle:{from:n.startAngle+Math.PI/2}}}),gGt={type:"fadeIn"};function mGt(n,t){return t==="fadeIn"?gGt:fGt(n)}const vGt=()=>{Z.registerAnimation("gaugePointer",(n,t)=>{const e=mGt(n,t);return{appear:e,enter:e,disappear:{type:"fadeOut"}}})};class Jnt extends ys{constructor(){super(...arguments),this._supportStack=!1}}class yu extends Vm{constructor(){super(...arguments),this.type=at.gaugePointer,this.transformerConstructor=Jnt,this._pinMark=null,this._pointerMark=null,this._pinBackgroundMark=null}setAttrFromSpec(){var t;super.setAttrFromSpec(),this.setRadiusField(this._spec.radiusField),this._pointerType=((t=this._spec.pointer)===null||t===void 0?void 0:t.type)==="rect"?"rect":"path"}initMark(){this._pinBackgroundMark=this._createMark(yu.mark.pinBackground),this._pointerMark=this._createMark(Object.assign(Object.assign({},yu.mark.pointer),{type:this._pointerType}),{isSeriesMark:!0}),this._pinMark=this._createMark(yu.mark.pin)}initMarkStyle(){this.initPinBackgroundMarkStyle(),this.initPointerMarkStyle(),this.initPinMarkStyle()}initGroups(){}initPointerMarkStyle(){const t=this._pointerMark,e=this._spec.pointer;t&&(this.setMarkStyle(t,{x:i=>{var r,s;const{x:a}=this._getPointerAnchor(i,e);return a-this._getPointerWidth()*((s=(r=e==null?void 0:e.center)===null||r===void 0?void 0:r[0])!==null&&s!==void 0?s:0)},y:i=>{var r,s;const{y:a}=this._getPointerAnchor(i,e);return a-this._getPointerHeight(i)*((s=(r=e==null?void 0:e.center)===null||r===void 0?void 0:r[1])!==null&&s!==void 0?s:0)},anchor:i=>{const{x:r,y:s}=this._getPointerAnchor(i,e);return[r,s]},fill:this.getColorAttribute(),zIndex:200}),this._pointerType==="path"?this.setMarkStyle(t,{scaleX:this._getPointerWidth.bind(this),scaleY:this._getPointerHeight.bind(this),angle:i=>this._getPointerAngle(i)+Math.PI/2}):this.setMarkStyle(t,{width:this._getPointerWidth.bind(this),height:this._getPointerHeight.bind(this),angle:i=>this._getPointerAngle(i)-Math.PI/2}))}initTooltip(){super.initTooltip(),this._pointerMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._pointerMark)}_getPointerAnchor(t,e){var i;return(i=e.isOnCenter)===null||i===void 0||i?this.angleAxisHelper.center():this.radiusAxisHelper.coordToPoint({radius:this._innerRadius*this._computeLayoutRadius(),angle:this.angleAxisHelper.dataToPosition([t[this._angleField[0]]])})}_getPointerWidth(){return this._spec.pointer.width*this._computeLayoutRadius()}_getPointerHeight(t){var e,i;const r=this._spec.pointer,s=this._radiusField[0];return z(this.radiusAxisHelper)&&z(s)?this.radiusAxisHelper.dataToPosition([t[s]])-((e=r==null?void 0:r.innerPadding)!==null&&e!==void 0?e:0)-((i=r==null?void 0:r.outerPadding)!==null&&i!==void 0?i:10):r.height*this._computeLayoutRadius()}_getPointerAngle(t){const e=this.angleAxisHelper.getScale().domain(),i=Vi(e),r=dn(e),s=Zi(t[this._angleField[0]],r,i);return this.angleAxisHelper.dataToPosition([s])}_getRotatedPointerCenterOffset(t){var e,i,r,s;const a=this._spec.pointer,o=this._getPointerWidth()*((i=(e=a==null?void 0:a.center)===null||e===void 0?void 0:e[0])!==null&&i!==void 0?i:0),l=-this._getPointerHeight(t)*((s=(r=a==null?void 0:a.center)===null||r===void 0?void 0:r[1])!==null&&s!==void 0?s:0),u=this._getPointerAngle(t)-Math.PI/2,h=Math.cos(u),c=Math.sin(u);return{x:o*h+l*c,y:-(l*h-o*c)}}initPinBackgroundMarkStyle(){const t=this._pinBackgroundMark,e=this._spec.pinBackground;t&&this.setMarkStyle(t,{x:i=>this._getPointerAnchor(i,e).x,y:i=>this._getPointerAnchor(i,e).y,scaleX:()=>e.width*this._computeLayoutRadius(),scaleY:()=>e.height*this._computeLayoutRadius(),fill:this.getColorAttribute(),zIndex:100})}initPinMarkStyle(){const t=this._pinMark,e=this._spec.pin;t&&this.setMarkStyle(t,{x:i=>this._getPointerAnchor(i,e).x,y:i=>this._getPointerAnchor(i,e).y,scaleX:()=>e.width*this._computeLayoutRadius(),scaleY:()=>e.height*this._computeLayoutRadius(),fill:this.getColorAttribute(),zIndex:300})}initInteraction(){this._parseInteractionConfig(this._pointerMark?[this._pointerMark]:[])}initAnimation(){var t,e,i;const r=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset;this._pointerMark.setAnimationConfig(Ae((i=Z.getAnimationInKey("gaugePointer"))===null||i===void 0?void 0:i({startAngle:this._startAngle},r),Ee("pointer",this._spec,this._markAttributeContext)))}getDefaultShapeType(){return"circle"}getActiveMarks(){return[]}}yu.type=at.gaugePointer,yu.mark=Iet,yu.transformerConstructor=Jnt;const _Gt=()=>{Z.registerSeries(yu.type,yu),s5(),Yu(),vGt(),F1(),Hm()};class Qnt extends ys{constructor(){super(...arguments),this._supportStack=!1}_transformLabelSpec(t){this._addMarkLabelSpec(t,"segment")}}class uc extends Vm{constructor(){super(...arguments),this.type=at.gauge,this.transformerConstructor=Qnt,this._segmentMark=null,this._trackMark=null,this._padAngle=0}setAttrFromSpec(){var t;super.setAttrFromSpec(),this._padAngle=qe((t=this._spec.padAngle)!==null&&t!==void 0?t:0)}initData(){var t;super.initData(),ie(this._option.dataSet,"spiltSegment",(e,i)=>{const r=e.slice();return r.sort((s,a)=>s[this._angleField[0]]-a[this._angleField[0]]),r.forEach((s,a)=>{s[jE]=s[this._angleField[0]],s[kS]=a>0?r[a-1][jE]:void 0}),r}),(t=this.getViewData())===null||t===void 0||t.transform({type:"spiltSegment"},!1)}initMark(){super.initMark(),this._trackMark=this._createMark(uc.mark.track,{parent:this._arcGroupMark,dataView:!1}),this._segmentMark=this._createMark(uc.mark.segment,{parent:this._arcGroupMark,isSeriesMark:!0})}initMarkStyle(){super.initMarkStyle(),this.initTrackMarkStyle(),this.initSegmentMarkStyle()}initSegmentMarkStyle(){var t;const e=this._segmentMark;e&&this.setMarkStyle(e,{x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:this._getAngleValueStart.bind(this),endAngle:this._getAngleValueEnd.bind(this),innerRadius:()=>{var i;return this._computeLayoutRadius()*((i=this._spec.innerRadius)!==null&&i!==void 0?i:0)},outerRadius:()=>{var i,r;return this._computeLayoutRadius()*((r=(i=this._spec.radius)!==null&&i!==void 0?i:this._spec.outerRadius)!==null&&r!==void 0?r:1)},cap:(t=this._spec.roundCap)!==null&&t!==void 0&&t,boundsMode:"imprecise",cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute(),zIndex:200,forceShowCap:!0})}initTooltip(){super.initTooltip(),this._segmentMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._segmentMark)}initTrackMarkStyle(){var t;const e=this._trackMark;e&&this.setMarkStyle(e,{x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:this._startAngle,endAngle:this._endAngle,innerRadius:()=>{var i;return this._computeLayoutRadius()*((i=this._spec.innerRadius)!==null&&i!==void 0?i:0)},outerRadius:()=>{var i,r;return this._computeLayoutRadius()*((r=(i=this._spec.radius)!==null&&i!==void 0?i:this._spec.outerRadius)!==null&&r!==void 0?r:1)},cap:(t=this._spec.roundCap)!==null&&t!==void 0&&t,boundsMode:"imprecise",cornerRadius:this._spec.cornerRadius,zIndex:100})}_getAngleValueStartWithoutMask(t){const e=this._getAngleValueStartWithoutPadAngle(t),i=this._getAngleValueEndWithoutPadAngle(t);return Math.min(e+this._padAngle/2,(e+i)/2)}_getAngleValueEndWithoutMask(t){const e=this._getAngleValueStartWithoutPadAngle(t),i=this._getAngleValueEndWithoutPadAngle(t);return Math.max(i-this._padAngle/2,(e+i)/2)}_getAngleValueStartWithoutPadAngle(t){return z(t[kS])?this.angleAxisHelper.dataToPosition([t[kS]]):this._startAngle}_getAngleValueEndWithoutPadAngle(t){return this.angleAxisHelper.dataToPosition([t[jE]])}initAnimation(){var t,e,i;const r=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset;this._segmentMark.setAnimationConfig(Ae((i=Z.getAnimationInKey("circularProgress"))===null||i===void 0?void 0:i({startAngle:this._startAngle},r),Ee("segment",this._spec,this._markAttributeContext)))}getDefaultShapeType(){return"circle"}getActiveMarks(){return[]}}uc.type=at.gauge,uc.mark=Ret,uc.transformerConstructor=Qnt;const yGt=()=>{Z.registerSeries(uc.type,uc),Pp(),Mnt(),Hm()};class Zy extends Xit{constructor(){super(...arguments),this.type=Zy.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{padding:0})}}Zy.type="cell";const bGt=()=>{Z.registerMark(Zy.type,Zy),Ujt(),XNt()};function xGt(n){return n===!1?{}:{type:"fadeIn"}}const SGt=()=>{Z.registerAnimation("heatmap",(n,t)=>Object.assign(Object.assign({},fT),{appear:xGt(t)}))};class AGt extends _s{getDefaultTooltipPattern(t,e){const i=super.getDefaultTooltipPattern(t,e);return z(i)&&t==="dimension"&&(i.visible=!1),i}}class trt extends ys{_transformLabelSpec(t){this._addMarkLabelSpec(t,"cell")}}class bu extends so{constructor(){super(...arguments),this.type=at.heatmap,this.transformerConstructor=trt}getFieldValue(){return this._fieldValue}setFieldValue(t){this._fieldValue=ot(t)}setAttrFromSpec(){super.setAttrFromSpec(),this.setFieldValue(this._spec.valueField)}initMark(){var t,e,i,r;const s={progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold};this._cellMark=this._createMark(bu.mark.cell,{morph:Gu(this._spec,bu.mark.cell.name),defaultMorphElementKey:this.getDimensionField()[0],isSeriesMark:!0,progressive:s,customShape:(t=this._spec.cell)===null||t===void 0?void 0:t.customShape,stateSort:(e=this._spec.cell)===null||e===void 0?void 0:e.stateSort}),this._backgroundMark=this._createMark(bu.mark.cellBackground,{progressive:s,customShape:(i=this._spec.cellBackground)===null||i===void 0?void 0:i.customShape,stateSort:(r=this._spec.cellBackground)===null||r===void 0?void 0:r.stateSort})}initMarkStyle(){this.initCellMarkStyle(),this.initCellBackgroundMarkStyle()}initLabelMarkStyle(t){t&&this.setMarkStyle(t,{fill:this.getColorAttribute(),text:e=>e[this.getMeasureField()[0]]})}initCellMarkStyle(){this.setMarkStyle(this._cellMark,{x:t=>this.dataToPositionX(t),y:t=>this.dataToPositionY(t),size:()=>[this.getCellSize(this._xAxisHelper),this.getCellSize(this._yAxisHelper)],fill:this.getColorAttribute()},"normal",kt.Series)}initCellBackgroundMarkStyle(){var t,e,i;const r=ds((i=(e=(t=this._spec.cellBackground)===null||t===void 0?void 0:t.style)===null||e===void 0?void 0:e.padding)!==null&&i!==void 0?i:0);this.setMarkStyle(this._backgroundMark,{x:s=>{const a=this.getCellSize(this._xAxisHelper);return this.dataToPositionX(s)-a/2+r[3]},y:s=>{const a=this.getCellSize(this._yAxisHelper);return this.dataToPositionY(s)-a/2+r[0]},width:()=>this.getCellSize(this._xAxisHelper)-r[1]-r[3],height:()=>this.getCellSize(this._yAxisHelper)-r[0]-r[2]},"normal",kt.Series)}getColorAttribute(){var t;return{scale:(t=this._option.globalScale.getScale("color"))!==null&&t!==void 0?t:this._getDefaultColorScale(),field:this.getFieldValue[0]}}initInteraction(){this._parseInteractionConfig(this._cellMark?[this._cellMark]:[])}initAnimation(){var t,e,i;const r=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset,s=Lc(this);this._cellMark.setAnimationConfig(Ae((i=Z.getAnimationInKey("heatmap"))===null||i===void 0?void 0:i(r),Ee("cell",this._spec,this._markAttributeContext),s))}getCellSize(t){var e,i;return(i=(e=t.getBandwidth)===null||e===void 0?void 0:e.call(t,0))!==null&&i!==void 0?i:6}initTooltip(){this._tooltipHelper=new AGt(this),this._cellMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._cellMark)}getDefaultShapeType(){return"square"}getDimensionField(){return[].concat(this.fieldX,this.fieldY)}getMeasureField(){return this.getFieldValue()}getActiveMarks(){return[this._cellMark]}}bu.type=at.heatmap,bu.mark=jet,bu.transformerConstructor=trt;const wGt=()=>{Gs(),bGt(),SGt(),$s(),Ws(),Z.registerSeries(bu.type,bu)},CGt=(n,t)=>{var e,i,r,s,a,o,l,u,h,c,d,p,f,g,_;if(!n||!(t!=null&&t.view)||!ut(n))return n;const v=t.view();if(v.x1-v.x0==0||v.y1-v.y0==0||v.x1-v.x0==-1/0||v.x1-v.x0==1/0||v.y1-v.y0==-1/0||v.y1-v.y0==1/0)return n;const y=qe((e=t.startAngle)!==null&&e!==void 0?e:-90),b=qe((i=t.endAngle)!==null&&i!==void 0?i:270),S=Math.max((v.x1-v.x0)/2,(v.y1-v.y0)/2),A=ca((r=t.innerRadius)!==null&&r!==void 0?r:0,S),w=ca(t.outerRadius,S),C=[Mt((s=t.center)===null||s===void 0?void 0:s[0])?t.center[0]:v.x0+ca((o=(a=t.center)===null||a===void 0?void 0:a[0])!==null&&o!==void 0?o:"50%",v.x1-v.x0),Mt((l=t.center)===null||l===void 0?void 0:l[1])?t.center[1]:v.y0+ca((h=(u=t.center)===null||u===void 0?void 0:u[1])!==null&&h!==void 0?h:"50%",v.y1-v.y0)],k=Vo(t.field),M=n.map(k),[P,E]=_L(M),I=P===E?$=>(A+w)/2:$=>A+(w-A)*($-P)/(E-P),D=F(t.radiusField)?k:Vo(t.radiusField),N=(d=(c=t==null?void 0:t.radiusRange)===null||c===void 0?void 0:c[1])!==null&&d!==void 0?d:5;let O=$=>N;if(D){const[$,q]=D!==k?_L(n.map(D)):[P,E],tt=(f=(p=t.radiusRange)===null||p===void 0?void 0:p[0])!==null&&f!==void 0?f:5,it=(_=(g=t.radiusRange)===null||g===void 0?void 0:g[1])!==null&&_!==void 0?_:5;$!==q&&(O=nt=>tt+(it-tt)*(D(nt)-$)/(q-$))}const L=Math.min(y,b),H=Math.max(y,b),j=kGt(L,H,n.length),G=[],U=(H-L)/60;return n.forEach(($,q)=>{const tt=I(M[q]),it=O($);let nt,K,J=j[q];for(let Q=0;Q<60&&(nt=C[0]+tt*Math.cos(J),K=C[1]+tt*Math.sin(J),TGt({x:nt,y:K,size:it},G)||nt-it<v.x0||nt+it>v.x1||K-it<v.y0||K+it>v.y1);Q++)Q<59&&(J+=U,J>H?J=L:J<L&&(J=H));G.push(Object.assign({[het]:nt,[cet]:K,[det]:it},$))}),G},kGt=(n,t,e)=>{let i=0,r=Math.max(Math.ceil(2*(t-n)/Math.PI),2),s=(t-n)/r,a=0,o=1,l=0,u=0;const h=[];let c=n;for(;l<e;)u<r&&(h.push(c+(u%2?Math.floor(u/2)+Math.floor(r/2):u/2)*s*o),u++),l++,u===r&&(u=0,a+=1,o*=-1,i===0?i=s/2:i/=2,c=o===-1?t-i:n+i,a>=2&&(s/=2,r*=2));return h},TGt=(n,t)=>!(!t||!t.length)&&t.some(e=>Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2)<Math.pow(n.size+e.size,2)),MGt=(n,t)=>{if(!n||!ut(n))return[];const{keyword:e,categoryField:i}=t,r=n[0].latestData[0];return{[i]:e,[$r]:r==null?void 0:r[$r],[Ls]:r==null?void 0:r[Ls]}};class Jy extends Sr{constructor(){super(...arguments),this.type=Jy.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{x:0,y:0,ripple:0})}_initProduct(t){const e=this.getVGrammarView(),i=this.getProductId();this._product=e.glyph("ripplePoint",t??e.rootMark).id(i),this._compiledProductId=i}}Jy.type="ripple";const ert=()=>{Z.registerMark(Jy.type,Jy),e8t()},PGt=(n,t)=>t==="fadeIn"?{type:"fadeIn"}:{type:"scaleIn"},EGt=()=>{Z.registerAnimation("correlation",(n,t)=>Object.assign({appear:PGt(0,t)},ZF))};class irt extends ys{_transformLabelSpec(t){this._addMarkLabelSpec(t,"nodePoint"),this._addMarkLabelSpec(t,"centerPoint","centerLabel")}}class xu extends B1{constructor(){super(...arguments),this.type=at.correlation,this.transformerConstructor=irt,this._viewBox=new Fn}getCategoryField(){return this._categoryField}setCategoryField(t){return this._categoryField=t,this._categoryField}getValueField(){return this._valueField}setValueField(t){return this._valueField=t,this._valueField}getSeriesField(){return this._seriesField}setSeriesField(t){z(t)&&(this._seriesField=t)}getSizeField(){return this._sizeField}setSizeField(t){z(t)&&(this._sizeField=t)}getSizeRange(){return this._sizeRange}setSizeRange(t){z(t)&&(this._sizeRange=t)}setAttrFromSpec(){super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField(this._spec.seriesField),this.setSizeField(this._spec.sizeField),this.setSizeRange(this._spec.sizeRange)}initData(){var t,e,i;if(super.initData(),!this._data)return;ie(this._dataSet,"correlation",CGt);const r=new gc;vu(r,"dataview",f2),ie(r,"correlationCenter",MGt);const s=new Le(r,{name:`${this.type}_${this.id}_center`});s.parse([this.getViewData()],{type:"dataview"}),s.transform({type:"correlationCenter",options:{keyword:(i=(e=(t=this._spec.centerLabel)===null||t===void 0?void 0:t.style)===null||e===void 0?void 0:e.text)!==null&&i!==void 0?i:"",categoryField:this._spec.categoryField}}),this._centerSeriesData=new kl(this._option,s)}_statisticViewData(){super._statisticViewData(),this._data.getDataView().transform({type:"correlation",options:{view:()=>({x0:this._viewBox.x1,x1:this._viewBox.x2,y0:this._viewBox.y1,y1:this._viewBox.y2}),field:this._spec.valueField,radiusRange:this._spec.sizeRange,radiusField:this._spec.sizeField,center:[this._spec.centerX,this._spec.centerY],innerRadius:this._spec.innerRadius,outerRadius:this._spec.outerRadius,startAngle:this._spec.startAngle,endAngle:this._spec.endAngle}})}initMark(){var t,e,i,r;const s=this._createMark(xu.mark.nodePoint,{groupKey:this._seriesField,isSeriesMark:!0,key:$r,customShape:(t=this._spec.nodePoint)===null||t===void 0?void 0:t.customShape,stateSort:(e=this._spec.nodePoint)===null||e===void 0?void 0:e.stateSort});s&&(s.setZIndex(ai.Node),this._nodePointMark=s);const a=this._createMark(xu.mark.ripplePoint,{key:$r,dataView:this._centerSeriesData.getDataView(),dataProductId:this._centerSeriesData.getProductId()});a&&(this._ripplePointMark=a);const o=this._createMark(xu.mark.centerPoint,{key:$r,dataView:this._centerSeriesData.getDataView(),dataProductId:this._centerSeriesData.getProductId(),customShape:(i=this._spec.centerPoint)===null||i===void 0?void 0:i.customShape,stateSort:(r=this._spec.centerPoint)===null||r===void 0?void 0:r.stateSort});o&&(o.setZIndex(ai.Node),this._centerPointMark=o)}initMarkStyle(){this._initNodePointMarkStyle(),this._initRipplePointMarkStyle(),this._initCenterPointMarkStyle()}_initNodePointMarkStyle(){var t,e,i,r;const s=this._nodePointMark;if(!s)return;const a=(e=(t=this._spec.nodePoint)===null||t===void 0?void 0:t.style)!==null&&e!==void 0?e:{};this.setMarkStyle(s,{x:o=>o[het],y:o=>o[cet],size:o=>o[det],fill:(i=a.fill)!==null&&i!==void 0?i:this.getColorAttribute(),fillOpacity:(r=a.fillOpacity)!==null&&r!==void 0?r:1,lineWidth:0},Bt.STATE_NORMAL,kt.Series)}_initRipplePointMarkStyle(){var t,e,i,r,s;const a=this._ripplePointMark;if(!a)return;const o=(e=(t=this._spec.ripplePoint)===null||t===void 0?void 0:t.style)!==null&&e!==void 0?e:{};this.setMarkStyle(a,{x:()=>{var l;return(l=this._spec.centerX)!==null&&l!==void 0?l:(this._viewBox.x1+this._viewBox.x2)/2},y:()=>{var l;return(l=this._spec.centerY)!==null&&l!==void 0?l:(this._viewBox.y1+this._viewBox.y2)/2},size:()=>Math.max(this._viewBox.x2-this._viewBox.x1,this._viewBox.y2-this._viewBox.y1)/2,fill:(i=o.fill)!==null&&i!==void 0?i:this.getColorAttribute(),opacity:(r=o.fillOpacity)!==null&&r!==void 0?r:.2,ripple:(s=o.ripple)!==null&&s!==void 0?s:0},Bt.STATE_NORMAL,kt.Series)}_initCenterPointMarkStyle(){var t,e,i,r,s,a;const o=this._centerPointMark;o&&this.setMarkStyle(o,{x:()=>{var l;return(l=this._spec.centerX)!==null&&l!==void 0?l:(this._viewBox.x1+this._viewBox.x2)/2},y:()=>{var l;return(l=this._spec.centerY)!==null&&l!==void 0?l:(this._viewBox.y1+this._viewBox.y2)/2},size:()=>.2*Math.max(this._viewBox.x2-this._viewBox.x1,this._viewBox.y2-this._viewBox.y1)/2,fill:(i=(e=(t=this._spec.centerPoint)===null||t===void 0?void 0:t.style)===null||e===void 0?void 0:e.fill)!==null&&i!==void 0?i:this.getColorAttribute(),fillOpacity:(a=(s=(r=this._spec.centerPoint)===null||r===void 0?void 0:r.style)===null||s===void 0?void 0:s.fillOpacity)!==null&&a!==void 0?a:1},Bt.STATE_NORMAL,kt.Series)}initTooltip(){super.initTooltip(),this._nodePointMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._nodePointMark)}initLabelMarkStyle(t){t&&this.setMarkStyle(t,{fill:this.getColorAttribute(),text:e=>e[this._categoryField],z:this.dataToPositionZ.bind(this)},Bt.STATE_NORMAL,kt.Series)}initAnimation(){var t,e;const i=(t=this._spec.animationAppear)===null||t===void 0?void 0:t.preset;this._nodePointMark.setAnimationConfig(Ae((e=Z.getAnimationInKey("correlation"))===null||e===void 0?void 0:e({},i),Ee("nodePoint",this._spec,this._markAttributeContext)))}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}getActiveMarks(){return[this._nodePointMark,this._centerPointMark]}getDimensionField(){return[this._categoryField]}getMeasureField(){return[this._valueField]}onLayoutEnd(t){super.onLayoutEnd(t),this._viewBox.set(0,0,this._region.getLayoutRect().width,this._region.getLayoutRect().height),this._rawData.reRunAllTransform(),this.getViewData().reRunAllTransform()}}xu.type=at.correlation,xu.mark=Net,xu.transformerConstructor=irt;const OGt=()=>{Uu(),ert(),Z.registerSeries(xu.type,xu),EGt()};class nrt extends ao{_isValidSeries(t){return t===at.map}_getDefaultSeriesSpec(t){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{type:t.type,nameField:t.nameField,valueField:t.valueField,seriesField:t.seriesField,map:t.map,nameProperty:t.nameProperty,centroidProperty:t.centroidProperty,nameMap:t.nameMap,area:t.area,defaultFillColor:t.defaultFillColor,showDefaultName:t.showDefaultName})}transformSpec(t){super.transformSpec(t),t.region.forEach(i=>{i.coordinate="geo"});const e=this._getDefaultSeriesSpec(t);t.series&&t.series.length!==0?t.series.forEach(i=>{this._isValidSeries(i.type)&&Object.keys(e).forEach(r=>{r in i||(i[r]=e[r])})}):t.series=[e]}}class K0 extends Ei{constructor(){super(...arguments),this.transformerConstructor=nrt,this.type="map",this.seriesType=at.map}}K0.type="map",K0.seriesType=at.map,K0.transformerConstructor=nrt;const RGt=()=>{L9t(),Z.registerChart(K0.type,K0)};class g5 extends ao{_isValidSeries(t){return!this.seriesType||t===this.seriesType}getIndicatorSpec(t){var e,i,r;const s=ot(t.indicator),a=(e=t.innerRadius)!==null&&e!==void 0?e:(r=(i=t.series)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.innerRadius;return z(a)&&s.forEach(o=>{F(o.limitRatio)&&(o.limitRatio=a)}),s}_getDefaultSeriesSpec(t){const e=Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{radius:t.radius,outerRadius:t.outerRadius,innerRadius:t.innerRadius,startAngle:t.startAngle,endAngle:t.endAngle,sortDataByAxis:t.sortDataByAxis}),i=this.seriesType;return i&&(e.type=i,e[i]=t[i]),e}transformSpec(t){super.transformSpec(t),ut(t.dataZoom)&&t.dataZoom.length>0&&t.dataZoom.forEach(e=>{e.filterMode==="axis"&&(e.filterMode="filter")}),this.transformSeriesSpec(t),z(t.indicator)&&(t.indicator=this.getIndicatorSpec(t))}}class rrt extends g5{needAxes(){return!1}_getDefaultSeriesSpec(t){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{seriesField:t.seriesField,categoryField:t.categoryField||t.radiusField,valueField:t.valueField||t.angleField,startAngle:t.startAngle,endAngle:t.endAngle,radius:t.radius,innerRadius:t.innerRadius,centerX:t.centerX,centerY:t.centerY})}_transformProgressAxisSpec(t,e,i,r,s){var a,o;t.axes||(t.axes=[]);let l=((a=t.axes)!==null&&a!==void 0?a:[]).find(c=>c.orient==="radius"),u=((o=t.axes)!==null&&o!==void 0?o:[]).find(c=>c.orient==="angle");u||(u=e,t.axes.push(u)),l||(l=i,t.axes.push(l)),F(u.type)&&(u.type="linear"),F(l.type)&&(l.type="band");const h=Ry(u,{min:0,max:1});F(u.min)&&(u.min=h.min),F(u.max)&&(u.max=h.max),r&&Object.assign(u,Ut({},r,u)),s&&Object.assign(l,Ut({},s,l))}}class srt extends g5{needAxes(){return!0}_getDefaultSeriesSpec(t){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{categoryField:t.categoryField||t.angleField,valueField:t.valueField||t.radiusField})}transformSpec(t){var e;if(super.transformSpec(t),this.needAxes()){t.axes||(t.axes=[]);const i={radius:!1,angle:!1};((e=t.axes)!==null&&e!==void 0?e:[]).forEach(r=>{const{orient:s}=r;s==="radius"&&(i.radius=!0),s==="angle"&&(i.angle=!0)}),i.angle||t.axes.push({orient:"angle"}),i.radius||t.axes.push({orient:"radius"})}}}class z1 extends g5{needAxes(){return!1}_getDefaultSeriesSpec(t){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{categoryField:t.categoryField||t.seriesField,valueField:t.valueField||t.angleField,center:t.center,centerOffset:t.centerOffset,cornerRadius:t.cornerRadius,padAngle:t.padAngle,minAngle:t.minAngle})}}class m5 extends Ei{constructor(){super(...arguments),this.transformerConstructor=z1}}m5.transformerConstructor=z1;class q0 extends m5{constructor(){super(...arguments),this.transformerConstructor=z1,this.type="pie",this.seriesType=at.pie}}q0.type="pie",q0.seriesType=at.pie,q0.transformerConstructor=z1;const IGt=()=>{wVt(),Z.registerChart(q0.type,q0)};class art extends z1{transformSpec(t){super.transformSpec(t),t.series.forEach(e=>{e.type==="pie3d"&&(e.angle3d=t.angle3d)})}}class Z0 extends m5{constructor(){super(...arguments),this.transformerConstructor=art,this.type="pie3d",this.seriesType=at.pie3d}}Z0.type="pie3d",Z0.seriesType=at.pie3d,Z0.transformerConstructor=art;const LGt=()=>{CVt(),Z.registerChart(Z0.type,Z0)};class ort extends srt{_getDefaultSeriesSpec(t){var e,i,r;return Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{radius:(e=t.radius)!==null&&e!==void 0?e:Ay,outerRadius:(i=t.outerRadius)!==null&&i!==void 0?i:Ay,innerRadius:(r=t.innerRadius)!==null&&r!==void 0?r:0,seriesField:t.seriesField,stack:t.stack,percent:t.percent})}transformSpec(t){var e;super.transformSpec(t),((e=t.axes)!==null&&e!==void 0?e:[]).forEach(i=>{["domainLine","grid","label","tick"].forEach(r=>{i[r]||(i[r]={visible:!1})}),i.orient==="angle"&&F(i.bandPosition)&&(i.bandPosition=.5)}),t.crosshair=ot(t.crosshair||{}).map(i=>Ut({categoryField:{visible:!0,line:{visible:!0,type:"rect"}}},i))}}class J0 extends Ei{constructor(){super(...arguments),this.transformerConstructor=ort,this.type="rose",this.seriesType=at.rose,this._canStack=!0}}J0.type="rose",J0.seriesType=at.rose,J0.transformerConstructor=ort;const DGt=()=>{RVt(),Z.registerChart(J0.type,J0)};class lrt extends srt{_getDefaultSeriesSpec(t){var e;return Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{seriesField:t.seriesField,line:t.line,point:t.point,stack:t.stack,percent:t.percent,area:Ut({visible:!1},t.area),seriesMark:(e=t.seriesMark)!==null&&e!==void 0?e:"area",activePoint:t.activePoint,pointDis:t.pointDis,pointDisMul:t.pointDisMul,markOverlap:t.markOverlap})}transformSpec(t){var e;super.transformSpec(t),((e=t.axes)!==null&&e!==void 0?e:[]).forEach(i=>{i.orient==="radius"&&(["domainLine","label","tick"].forEach(r=>{i[r]||(i[r]={visible:!1})}),i.grid||(i.grid={visible:!0}))}),t.crosshair=ot(t.crosshair||{}).map(i=>Ut({categoryField:{visible:!0,line:{visible:!0,type:"line"}}},i))}}class Q0 extends Ei{constructor(){super(...arguments),this.transformerConstructor=lrt,this.type="radar",this.seriesType=at.radar,this._canStack=!0}}Q0.type="radar",Q0.seriesType=at.radar,Q0.transformerConstructor=lrt;const BGt=()=>{jVt(),Z.registerChart(Q0.type,Q0)};class urt extends ao{_getDefaultSeriesSpec(t){const e=super._getDefaultSeriesSpec(t);return delete e.data,e}_transformAxisSpec(t){t.axes&&t.autoBandSize&&t.series.forEach((e,i)=>{var r;if(e.type==="bar"){const s=this._findBandAxisBySeries(e,i,t.axes);if(s&&!s.bandSize&&!s.maxBandSize&&!s.minBandSize){const a=ae(e.autoBandSize)&&(r=e.autoBandSize.extend)!==null&&r!==void 0?r:0,{barMaxWidth:o,barMinWidth:l,barWidth:u,barGapInGroup:h}=e;this._applyAxisBandSize(s,a,{barMaxWidth:o,barMinWidth:l,barWidth:u,barGapInGroup:h})}}})}transformSpec(t){if(super.transformSpec(t),t.series&&t.series.length){const e=this._getDefaultSeriesSpec(t);t.series.forEach(i=>{this._isValidSeries(i.type)&&Object.keys(e).forEach(r=>{r in i||(i[r]=e[r])})})}t.axes&&t.axes.length&&t.axes.forEach(e=>{le(e,"trimPadding")&&Ut(e,pit(this.type,t))}),this._transformAxisSpec(t)}}class DC extends Ei{constructor(){super(...arguments),this.transformerConstructor=urt,this.type="common",this._canStack=!0}}DC.type="common",DC.transformerConstructor=urt;const FGt=()=>{Z.registerChart(DC.type,DC)},MD=12;class hrt extends ao{_getSeriesDataLength(t,e){var i,r;if(e.data){const a=ot(e.data)[0];return a instanceof Le?(i=a.latestData)===null||i===void 0?void 0:i.length:(r=a.values)===null||r===void 0?void 0:r.length}const s=ot(t.data).find((a,o)=>e.dataId?a instanceof Le?a.name===e.dataId:a.id===e.dataId:e.dataIndex===o);return s?s instanceof Le?s.latestData.length:s.values.length:0}addAttrToComponentSpec(t,e,i){return Array.isArray(t)?t[0][e]=i:t[e]=i,t}transformSpec(t){var e,i,r,s,a,o,l,u,h,c,d;super.transformSpec(t);let p=0;const f=[],g=[],_=[],v=[],y=[],b=t.series.filter(k=>k.type!==at.link).length,S=(500-20*(b-1))/b,A=((e=t==null?void 0:t.appendPadding)===null||e===void 0?void 0:e.left)||0,w=((i=t==null?void 0:t.appendPadding)===null||i===void 0?void 0:i.right)||0;if(t!=null&&t.legends){f.push({modelId:`legendRow${p}`,col:1,row:p}),this.addAttrToComponentSpec(t.legends,"id",`legendRow${p}`);const k=ot(t.legends);let M=(r=k[0].height)!==null&&r!==void 0?r:40;if(k[0].padding){const P=Ru(k[0].padding);M+=Number((s=P==null?void 0:P.bottom)!==null&&s!==void 0?s:0),M+=Number((a=P==null?void 0:P.top)!==null&&a!==void 0?a:0),k[0].offsetY=Number((l=(o=k[0])===null||o===void 0?void 0:o.offsetY)!==null&&l!==void 0?l:0)+Number((u=P==null?void 0:P.top)!==null&&u!==void 0?u:0)}y.push({index:p,size:M}),p++}t!=null&&t.dataZoom&&(f.push({modelId:`dataZoomRow${p}`,col:1,row:p}),this.addAttrToComponentSpec(t.dataZoom,"id",`dataZoomRow${p}`),p++,y.push({index:p,size:10}),p++),g.push({id:`regionAxesRow${p}`}),f.push({modelId:`axesRow${p}`,col:1,row:p}),t.axes[0].id=`axesRow${p}`,t.axes[0].regionIndex=Array.from(Array(t.series.length),(k,M)=>M+1),p++,(h=t==null?void 0:t.series)===null||h===void 0||h.forEach(k=>{var M,P;if([at.bar,at.line,at.area,at.dot].includes(k.type)){if(f.push({modelId:`${k.type}Row${p}`,col:1,row:p}),f.push({modelId:`axesLeftRow${p}`,col:0,row:p}),g.push({id:`${k.type}Row${p}`,clip:!1}),y.push({index:p,size:(k==null?void 0:k.height)||S}),_.push({orient:"left",id:`axesLeftRow${p}`,type:k.type===at.dot?"band":"linear",visible:k.type!==at.dot,title:{visible:!0,autoRotate:!1,style:{text:k==null?void 0:k.barTitle,dx:-20,textBaseline:"middle",textAlign:"end"}},grid:{visible:typeof((M=k==null?void 0:k.grid)===null||M===void 0?void 0:M.visible)!="boolean"||((P=k==null?void 0:k.grid)===null||P===void 0?void 0:P.visible),style:(E,I)=>{var D,N,O,L,H;let j=0;if(I===0){const G=(D=k==null?void 0:k.grid)===null||D===void 0?void 0:D.style;j=(O=(N=G==null?void 0:G.lineWidth)!==null&&N!==void 0?N:G==null?void 0:G.strokeWidth)!==null&&O!==void 0?O:1}return{lineWidth:j,stroke:((H=(L=k==null?void 0:k.grid)===null||L===void 0?void 0:L.style)===null||H===void 0?void 0:H.stroke)||"#dfdfdf",lineDash:[0,0]}}},domainLine:{visible:!1},tick:{visible:!1},label:{visible:!1},regionIndex:g.length-1}),k.type===at.dot){f.push({modelId:`scrollBarRightRow${p}`,col:2,row:p});const E=this._getSeriesDataLength(t,k);let I=0;E&&(I=((k==null?void 0:k.height)||S)/(30*E)),v.push(Object.assign({orient:"right",visible:k.type===at.dot&&I<1,id:`scrollBarRightRow${p}`,start:0,end:Math.min(I,1),filterMode:"axis",regionIndex:g.length-1,axisId:`axesLeftRow${p}`},ot(t==null?void 0:t.scrollBar)[0]))}k.regionIndex=g.length-1,p++,y.push({index:p,size:(k==null?void 0:k.padding)||20}),p++,k.leftAppendPadding=A,k.type===at.dot&&(k.title.style.dx=-A,k.subTitle.style.dx=-A)}}),(c=t==null?void 0:t.series)===null||c===void 0||c.forEach(k=>{if(k.type===at.link){const M=k.dotSeriesIndex+1;f.push({modelId:`${k.type}Row${M}`,col:1,row:M-1}),k.regionIndex=t.series[k.dotSeriesIndex].regionIndex,k.leftAppendPadding=A,k.height=t.series[k.dotSeriesIndex].height,k.clipHeight=t.series[k.dotSeriesIndex].clipHeight}}),t!=null&&t.legends&&this.addAttrToComponentSpec(t.legends,"regionIndex",[g.length-1]);const C={type:"grid",col:4,row:p,colWidth:[{index:0,size:A},{index:2,size:MD},{index:3,size:w}],rowHeight:y,elements:f};t.layout=C,t.region=g,(d=t.axes)===null||d===void 0||d.push(..._),t.scrollBar=v}}var jGt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};class BC extends Ei{constructor(){super(...arguments),this.transformerConstructor=hrt,this.type="sequence"}_createSeries(t,e){if(!t)return;const{spec:i}=e,r=jGt(e,["spec"]);let s;if(i.type===at.link&&(i.dotSeriesSpec=this._spec.series[i.dotSeriesIndex]),i.regionId&&(s=this.getRegionsInUserId(i.regionId)),s||(s=this.getRegionsInIndex(i.regionIndex?[i.regionIndex]:void 0)[0]),!s)return;const a=new t(i,Object.assign(Object.assign(Object.assign({},this._modelOption),r),{region:s,specKey:"series",globalScale:this._globalScale}));a&&(a.created(),this._series.push(a),s.addSeries(a))}}BC.type="sequence",BC.transformerConstructor=hrt;const NGt=()=>{VVt(),GVt(),$s(),Ws(),Z.registerChart(BC.type,BC)};class v5 extends Uo{transformSpec(t){super.transformSpec(t),t.axes.forEach(e=>e.type="linear")}_getDefaultSeriesSpec(t){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{x2Field:t==null?void 0:t.x2Field,y2Field:t==null?void 0:t.y2Field,barMinHeight:t==null?void 0:t.barMinHeight,barBackground:t==null?void 0:t.barBackground})}}class _5 extends Ei{constructor(){super(...arguments),this.transformerConstructor=v5,this._canStack=!0}}_5.transformerConstructor=v5;class OT extends v5{transformSpec(t){super.transformSpec(t),Ic(t)}}class t_ extends _5{constructor(){super(...arguments),this.transformerConstructor=OT,this.type="histogram",this.seriesType=at.bar}}t_.type="histogram",t_.seriesType=at.bar,t_.transformerConstructor=OT;const zGt=()=>{int(),Z.registerChart(t_.type,t_)};class e_ extends _5{constructor(){super(...arguments),this.transformerConstructor=OT,this.type="histogram3d",this.seriesType=at.bar3d}}e_.type="histogram3d",e_.seriesType=at.bar3d,e_.transformerConstructor=OT;const HGt=()=>{nnt(),Z.registerChart(e_.type,e_)};class crt extends rrt{_getDefaultSeriesSpec(t){var e,i;const r=super._getDefaultSeriesSpec(t);return Object.assign(Object.assign({},r),{cornerRadius:(e=t.cornerRadius)!==null&&e!==void 0?e:0,roundCap:(i=t.roundCap)!==null&&i!==void 0&&i,progress:t.progress,track:t.track,tickMask:t.tickMask})}transformSpec(t){super.transformSpec(t),this._transformProgressAxisSpec(t,{orient:"angle",visible:!1},{orient:"radius",visible:!1},{forceInitTick:t.tickMask&&t.tickMask.visible!==!1})}}class i_ extends Ei{constructor(){super(...arguments),this.transformerConstructor=crt,this.type="circularProgress",this.seriesType=at.circularProgress,this._canStack=!0}}i_.type="circularProgress",i_.seriesType=at.circularProgress,i_.transformerConstructor=crt;const VGt=()=>{KVt(),Z.registerChart(i_.type,i_)};class drt extends rrt{_getDefaultSeriesSpec(t){const e=super._getDefaultSeriesSpec(t);return Object.assign(Object.assign({},e),{radiusField:t.radiusField,pin:t.pin,pinBackground:t.pinBackground,pointer:t.pointer})}_getDefaultCircularProgressSeriesSpec(t){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{type:at.circularProgress})}transformSpec(t){var e,i,r,s,a;super.transformSpec(t);let o=(e=t.series)===null||e===void 0?void 0:e.find(l=>l.type===at.gauge||l.type===at.circularProgress);F(o)&&(o=(i=t.gauge)!==null&&i!==void 0?i:this._getDefaultCircularProgressSeriesSpec(t),o.type==="circularProgress"&&(F(o.radiusField)&&F(o.categoryField)&&(o.radiusField=(s=(r=t.radiusField)!==null&&r!==void 0?r:t.categoryField)!==null&&s!==void 0?s:t.seriesField),F(o.valueField)&&F(o.angleField)&&(o.valueField=(a=t.valueField)!==null&&a!==void 0?a:t.angleField)),t.series.length===1?t.series.push(o):t.series.forEach(l=>{l.type===o.type&&Object.keys(o).forEach(u=>{u in l||(l[u]=o[u])})})),o.type===at.circularProgress?this._transformProgressAxisSpec(t,{orient:"angle",visible:!0,domainLine:{visible:!1},grid:{visible:!1}},{orient:"radius",visible:!1},{zIndex:ai.Region+50}):this._transformGaugeAxisSpec(t)}_transformGaugeAxisSpec(t){var e;t.axes||(t.axes=[]);const i={radius:null,angle:null};((e=t.axes)!==null&&e!==void 0?e:[]).forEach(r=>{const{orient:s}=r;s==="radius"&&(i.radius=r),s==="angle"&&(i.angle=r)}),i.angle||(i.angle={orient:"angle",visible:!0},t.axes.push(i.angle)),i.radius||(i.radius={orient:"radius",visible:!1},t.axes.push(i.radius)),F(i.angle.type)&&(i.angle.type="linear"),F(i.radius.type)&&(i.radius.type="linear"),F(i.angle.zIndex)&&(i.angle.zIndex=ai.Region+50)}}class n_ extends Ei{constructor(){super(...arguments),this.transformerConstructor=drt,this.type="gauge",this.seriesType=at.gaugePointer}}n_.type="gauge",n_.seriesType=at.gaugePointer,n_.transformerConstructor=drt;const WGt=()=>{_Gt(),yGt(),Z.registerChart(n_.type,n_)};class RT extends ao{transformSpec(t){super.transformSpec(t),this.transformSeriesSpec(t)}}class y5 extends Ei{constructor(){super(...arguments),this.transformerConstructor=RT,this.type="wordCloud",this.seriesType=at.wordCloud}}y5.transformerConstructor=RT;class prt extends RT{_getDefaultSeriesSpec(t){const e=Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{nameField:t.nameField,valueField:t.valueField,seriesField:t.seriesField,fontFamilyField:t.fontFamilyField,fontWeightField:t.fontWeightField,fontStyleField:t.fontStyleField,colorHexField:t.colorHexField,colorMode:t.colorMode,colorList:t.colorList,rotateAngles:t.rotateAngles,fontWeightRange:t.fontWeightRange,fontSizeRange:t.fontSizeRange,maskShape:t.maskShape,keepAspect:t.keepAspect,random:t.random,wordCloudConfig:t.wordCloudConfig,wordCloudShapeConfig:t.wordCloudShapeConfig,word:t.word,fillingWord:t.fillingWord}),i=this.seriesType;return i&&(e.type=i,e[i]=t[i]),e}}class zd extends y5{constructor(){super(...arguments),this.transformerConstructor=prt,this.type="wordCloud",this.seriesType=at.wordCloud}}zd.type="wordCloud",zd.seriesType=at.wordCloud,zd.transformerConstructor=prt;const $Gt=()=>{Hnt(),Z.registerChart(zd.type,zd)},GGt=()=>{r$t(),Hnt(),Z.registerChart(zd.type,zd)};class frt extends RT{_getDefaultSeriesSpec(t){const e=Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{nameField:t.nameField,valueField:t.valueField,seriesField:t.seriesField,fontFamilyField:t.fontFamilyField,fontWeightField:t.fontWeightField,fontStyleField:t.fontStyleField,colorHexField:t.colorHexField,colorMode:t.colorMode,colorList:t.colorList,rotateAngles:t.rotateAngles,fontWeightRange:t.fontWeightRange,fontSizeRange:t.fontSizeRange,depth_3d:t.depth_3d,maskShape:t.maskShape,keepAspect:t.keepAspect,random:t.random,wordCloudConfig:t.wordCloudConfig,wordCloudShapeConfig:t.wordCloudShapeConfig,word:t.word,fillingWord:t.fillingWord}),i=this.seriesType;return i&&(e.type=i,e[i]=t[i]),e}}class Hd extends y5{constructor(){super(...arguments),this.transformerConstructor=frt,this.type="wordCloud3d",this.seriesType=at.wordCloud3d}}Hd.type="wordCloud3d",Hd.seriesType=at.wordCloud3d,Hd.transformerConstructor=frt;const UGt=()=>{Vnt(),Z.registerChart(Hd.type,Hd)},YGt=()=>{s$t(),Vnt(),Z.registerChart(Hd.type,Hd)};class IT extends ao{needAxes(){return!1}_getDefaultSeriesSpec(t){const e=Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{categoryField:t.categoryField,valueField:t.valueField,seriesField:t.seriesField,funnelAlign:t.funnelAlign,funnelOrient:t.funnelOrient,heightRatio:t.heightRatio,shape:t.shape,funnel:t.funnel,transform:t.transform,outerLabel:t.outerLabel,transformLabel:t.transformLabel,isTransform:t.isTransform,maxSize:t.maxSize,minSize:t.minSize,gap:t.gap,isCone:t.isCone,range:t.range}),i=this.seriesType;return i&&(e.type=i,e[i]=t[i]),e}transformSpec(t){super.transformSpec(t);const e=this._getDefaultSeriesSpec(t);t.series&&t.series.length!==0?t.series.forEach(i=>{this._isValidSeries(i.type)&&Object.keys(e).forEach(r=>{r in i||(i[r]=e[r])})}):t.series=[e]}}class r_ extends Ei{constructor(){super(...arguments),this.transformerConstructor=IT,this.type="funnel",this.seriesType=at.funnel}}r_.type="funnel",r_.seriesType=at.funnel,r_.transformerConstructor=IT;const XGt=()=>{m$t(),Z.registerChart(r_.type,r_)};class s_ extends Ei{constructor(){super(...arguments),this.transformerConstructor=IT,this.type="funnel3d",this.seriesType=at.funnel3d}}s_.type="funnel3d",s_.seriesType=at.funnel3d,s_.transformerConstructor=IT;const KGt=()=>{v$t(),Z.registerChart(s_.type,s_)};class grt extends Uo{needAxes(){return!1}_getDefaultSeriesSpec(t){var e,i;const r=super._getDefaultSeriesSpec(t);return Object.assign(Object.assign({},r),{direction:(e=t.direction)!==null&&e!==void 0?e:"horizontal",cornerRadius:(i=t.cornerRadius)!==null&&i!==void 0?i:0,bandWidth:t.bandWidth,progress:t.progress,track:t.track})}transformSpec(t){var e,i;if(super.transformSpec(t),t.axes||(t.axes=[]),t.direction==="vertical"){let r=null,s=null;((e=t.axes)!==null&&e!==void 0?e:[]).forEach(o=>{const{orient:l}=o;l==="left"&&(r=o),l==="bottom"&&(s=o)}),r||(r={orient:"left",visible:!1},t.axes.push(r)),s||(s={orient:"bottom",visible:!1},t.axes.push(s)),F(s.type)&&(s.type="band"),F(r.type)&&(r.type="linear");const a=Ry(r,{min:0,max:1});F(r.min)&&(r.min=a.min),F(r.max)&&(r.max=a.max)}else{let r=null,s=null;((i=t.axes)!==null&&i!==void 0?i:[]).forEach(o=>{const{orient:l}=o;l==="left"&&(r=o),l==="bottom"&&(s=o)}),r||(r={type:"band",orient:"left",visible:!1},t.axes.push(r)),s||(s={orient:"bottom",visible:!1},t.axes.push(s)),F(s.type)&&(s.type="linear"),F(r.type)&&(r.type="band");const a=Ry(s,{min:0,max:1});F(s.min)&&(s.min=a.min),F(s.max)&&(s.max=a.max)}}}class a_ extends Ei{constructor(){super(...arguments),this.transformerConstructor=grt,this.type="linearProgress",this.seriesType=at.linearProgress,this._canStack=!0}}a_.type="linearProgress",a_.seriesType=at.linearProgress,a_.transformerConstructor=grt;const qGt=()=>{iWt(),Z.registerChart(a_.type,a_)};class mrt extends Uo{_getDefaultSeriesSpec(t){var e,i;const r=Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{barWidth:t.barWidth,barMaxWidth:t.barMaxWidth,barMinWidth:t.barMinWidth,barGapInGroup:t.barGapInGroup,barBackground:t.barBackground,barMinHeight:t.barMinHeight,stackCornerRadius:t.stackCornerRadius});return r.bar=t.bar,t.direction==="horizontal"?r.xField=(e=t.xField)!==null&&e!==void 0?e:[t.minField,t.maxField]:r.yField=(i=t.yField)!==null&&i!==void 0?i:[t.minField,t.maxField],r}transformSpec(t){super.transformSpec(t),Ic(t)}}class o_ extends Ei{constructor(){super(...arguments),this.transformerConstructor=mrt,this.type="rangeColumn",this.seriesType=at.rangeColumn}}o_.type="rangeColumn",o_.seriesType=at.rangeColumn,o_.transformerConstructor=mrt;const ZGt=()=>{fVt(),Z.registerChart(o_.type,o_)};class vrt extends Uo{_getDefaultSeriesSpec(t){var e,i;const r=Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{barGapInGroup:t.barGapInGroup});return r.bar3d=t.bar3d,t.direction==="horizontal"?r.xField=(e=t.xField)!==null&&e!==void 0?e:[t.minField,t.maxField]:r.yField=(i=t.yField)!==null&&i!==void 0?i:[t.minField,t.maxField],r}}class l_ extends Ei{constructor(){super(...arguments),this.transformerConstructor=vrt,this.type="rangeColumn3d",this.seriesType=at.rangeColumn3d}}l_.type="rangeColumn3d",l_.seriesType=at.rangeColumn3d,l_.transformerConstructor=vrt;const JGt=()=>{gVt(),Z.registerChart(l_.type,l_)};class _rt extends ao{_getDefaultSeriesSpec(t){const e=z(t.startAngle)?t.startAngle:TF,i=z(t.endAngle)?t.endAngle:e+Hg(2*Math.PI),r=Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{categoryField:t.categoryField,valueField:t.valueField,seriesField:t.seriesField,centerX:t.centerX,centerY:t.centerY,offsetX:t.offsetX,offsetY:t.offsetY,startAngle:e,endAngle:i,innerRadius:t.innerRadius,outerRadius:t.outerRadius,gap:t.gap,labelLayout:t.labelLayout,label:t.label,labelAutoVisible:t.labelAutoVisible,drill:t.drill,drillField:t.drillField}),s=at.sunburst;return r.type=s,r[s]=t[s],r}transformSpec(t){super.transformSpec(t),this.transformSeriesSpec(t)}}class u_ extends Ei{constructor(){super(...arguments),this.transformerConstructor=_rt,this.type="sunburst",this.seriesType=at.sunburst}}u_.type="sunburst",u_.seriesType=at.sunburst,u_.transformerConstructor=_rt;const QGt=()=>{z$t(),Z.registerChart(u_.type,u_)};class yrt extends ao{_getDefaultSeriesSpec(t){const e=Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{categoryField:t.categoryField,valueField:t.valueField,seriesField:t.seriesField,layoutPadding:t.layoutPadding,label:t.label,circlePacking:t.circlePacking,drill:t.drill,drillField:t.drillField}),i=at.circlePacking;return e.type=i,e[i]=t[i],e}transformSpec(t){super.transformSpec(t),this.transformSeriesSpec(t)}}class h_ extends Ei{constructor(){super(...arguments),this.transformerConstructor=yrt,this.type="circlePacking",this.seriesType=at.circlePacking}}h_.type="circlePacking",h_.seriesType=at.circlePacking,h_.transformerConstructor=yrt;const tUt=()=>{G$t(),Z.registerChart(h_.type,h_)};class brt extends ao{_getDefaultSeriesSpec(t){const e=Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{categoryField:t.categoryField,valueField:t.valueField,seriesField:t.seriesField,aspectRatio:t.aspectRatio,splitType:t.splitType,maxDepth:t.maxDepth,gapWidth:t.gapWidth,nodePadding:t.nodePadding,minVisibleArea:t.minVisibleArea,minChildrenVisibleArea:t.minChildrenVisibleArea,minChildrenVisibleSize:t.minChildrenVisibleSize,roam:t.roam,drill:t.drill,drillField:t.drillField,leaf:t.leaf,nonLeaf:t.nonLeaf,nonLeafLabel:t.nonLeafLabel}),i=this.seriesType;return i&&(e.type=i,e[i]=t[i]),e}transformSpec(t){super.transformSpec(t),this.transformSeriesSpec(t)}}class c_ extends Ei{constructor(){super(...arguments),this.transformerConstructor=brt,this.type="treemap",this.seriesType=at.treemap}}c_.type="treemap",c_.seriesType=at.treemap,c_.transformerConstructor=brt;const eUt=()=>{pGt(),Z.registerChart(c_.type,c_)};class xrt extends wT{transformSpec(t){super.transformSpec(t),t.legends&&ot(t.legends).forEach(e=>{e.select=!1,e.hover=!1,e.filter=!1}),Ic(t)}_getDefaultSeriesSpec(t){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{bar:t.bar,stackLabel:t.stackLabel,leaderLine:t.leaderLine,total:t.total})}}class d_ extends jd{constructor(){super(...arguments),this.transformerConstructor=xrt,this.type="waterfall",this.seriesType=at.waterfall}}d_.type="waterfall",d_.seriesType=at.waterfall,d_.transformerConstructor=xrt;const iUt=()=>{sVt(),Z.registerChart(d_.type,d_)};class Srt extends Uo{_getDefaultSeriesSpec(t){var e;const i=[t.maxField,t.medianField,t.q1Field,t.q3Field,t.minField,t.outliersField],r=Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{boxPlot:t.boxPlot,direction:(e=t.direction)!==null&&e!==void 0?e:"vertical",minField:t.minField,maxField:t.maxField,q1Field:t.q1Field,medianField:t.medianField,q3Field:t.q3Field,outliersField:t.outliersField,outliersStyle:t.outliersStyle});return r[r.direction==="horizontal"?"xField":"yField"]=i,r}transformSpec(t){super.transformSpec(t),t.axes||(t.axes=[{orient:"bottom"},{orient:"left"}]),Ic(t)}}class p_ extends Ei{constructor(){super(...arguments),this.transformerConstructor=Srt,this.type="boxPlot",this.seriesType=at.boxPlot}}p_.type="boxPlot",p_.seriesType=at.boxPlot,p_.transformerConstructor=Srt;const nUt=()=>{uVt(),Z.registerChart(p_.type,p_)};class Art extends ao{_getDefaultSeriesSpec(t){const e=Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{categoryField:t.categoryField,valueField:t.valueField,sourceField:t.sourceField,targetField:t.targetField,direction:t.direction,nodeAlign:t.nodeAlign,nodeGap:t.nodeGap,nodeWidth:t.nodeWidth,linkWidth:t.linkWidth,minStepWidth:t.minStepWidth,minNodeHeight:t.minNodeHeight,minLinkHeight:t.minLinkHeight,dropIsolatedNode:t.dropIsolatedNode,nodeHeight:t.nodeHeight,linkHeight:t.linkHeight,equalNodeHeight:t.equalNodeHeight,linkOverlap:t.linkOverlap,iterations:t.iterations,nodeKey:t.nodeKey,linkSortBy:t.linkSortBy,nodeSortBy:t.nodeSortBy,setNodeLayer:t.setNodeLayer,node:t.node,link:t.link,label:t.label,emphasis:t.emphasis}),i=this.seriesType;return i&&(e.type=i,e[i]=t[i]),e}transformSpec(t){super.transformSpec(t),this.transformSeriesSpec(t)}}class f_ extends Ei{constructor(){super(...arguments),this.transformerConstructor=Art,this.type="sankey",this.seriesType=at.sankey}_setStateInDatum(t,e,i,r,s){const a=ut(i)?i[0]:i,o=a?Object.keys(a):null;this.getRegionsInQuerier(s).forEach(l=>{if(!a)return void l.interaction.clearEventElement(t,!0);let u=!1;l.getSeries().forEach(h=>{var c,d;let p=null;h.getMarksWithoutRoot().forEach(f=>{if(f.type==="text")return;let g=null;const _=f.getProduct();_&&((!r||ft(r)&&r(h,f))&&(g=_.elements.find(v=>o.every(y=>{var b;let S=(b=v.getDatum())===null||b===void 0?void 0:b.datum;return ut(S)&&(S=S[0]),a[y]==(S==null?void 0:S[y])}))),g&&(u=!0,l.interaction.startInteraction(t,g),(_.id().includes("node")||_.id().includes("link"))&&(p=g)))}),p&&((d=(c=h)._handleEmphasisElement)===null||d===void 0||d.call(c,{item:p}))}),e&&u&&l.interaction.reverseEventElement(t)})}}f_.type="sankey",f_.seriesType=at.sankey,f_.transformerConstructor=Art;const rUt=()=>{lGt(),Z.registerChart(f_.type,f_)};class wrt extends Uo{_getDefaultSeriesSpec(t){var e,i;const r=Object.assign({},super._getDefaultSeriesSpec(t));return r.area=t.area,t.direction==="horizontal"?r.xField=(e=t.xField)!==null&&e!==void 0?e:[t.minField,t.maxField]:r.yField=(i=t.yField)!==null&&i!==void 0?i:[t.minField,t.maxField],r.stack=!1,r}transformSpec(t){super.transformSpec(t),Ic(t)}}class g_ extends Ei{constructor(){super(...arguments),this.transformerConstructor=wrt,this.type="rangeArea",this.seriesType=at.rangeArea}}g_.type="rangeArea",g_.seriesType=at.rangeArea,g_.transformerConstructor=wrt;const sUt=()=>{vVt(),Z.registerChart(g_.type,g_)};class Crt extends Uo{_getDefaultSeriesSpec(t){const e=super._getDefaultSeriesSpec(t);return Object.assign(Object.assign({},e),{valueField:t.valueField,cell:t.cell})}}class m_ extends Ei{constructor(){super(...arguments),this.transformerConstructor=Crt,this.type="heatmap",this.seriesType=at.heatmap}}m_.type="heatmap",m_.seriesType=at.heatmap,m_.transformerConstructor=Crt;const aUt=()=>{wGt(),Z.registerChart(m_.type,m_)};class krt extends ao{_getDefaultSeriesSpec(t){const e=Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{categoryField:t.categoryField,valueField:t.valueField,seriesField:t.seriesField,sizeField:t.sizeField,sizeRange:t.sizeRange,centerX:t.centerX,centerY:t.centerY,innerRadius:t.innerRadius,outerRadius:t.outerRadius,startAngle:t.startAngle,endAngle:t.endAngle,ripplePoint:t.ripplePoint,centerPoint:t.centerPoint,centerLabel:t.centerLabel,nodePoint:t.nodePoint,label:t.label}),i=at.correlation;return e.type=i,e[i]=t[i],e}transformSpec(t){super.transformSpec(t),this.transformSeriesSpec(t)}}class v_ extends Ei{constructor(){super(...arguments),this.transformerConstructor=krt,this.type="correlation",this.seriesType=at.correlation}}v_.type="correlation",v_.seriesType=at.correlation,v_.transformerConstructor=krt;const oUt=()=>{OGt(),Z.registerChart(v_.type,v_)};function Trt(n){var t,e;const i=Object.assign({},n);return Gt(n.style)||(i.textStyle=qt(n.style)),Gt(n.textStyle)||Ut(i.textStyle,qt(n.textStyle)),!((t=n.shape)===null||t===void 0)&&t.style&&qt(i.shape.style),!((e=n.background)===null||e===void 0)&&e.style&&qt(i.background.style),i}var lUt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};function uUt(n,t){const{title:e={},item:i={},pager:r={},background:s={},type:a,id:o,visible:l,orient:u,position:h,data:c,filter:d,regionId:p,regionIndex:f,seriesIndex:g,seriesId:_,padding:v}=n,y=lUt(n,["title","item","pager","background","type","id","visible","orient","position","data","filter","regionId","regionIndex","seriesIndex","seriesId","padding"]);return e.visible&&(y.title=Trt(e)),Gt(i.focusIconStyle)||qt(i.focusIconStyle),i.shape&&(i.shape=Oo(i.shape)),i.label&&(i.label=Oo(i.label)),i.value&&(i.value=Oo(i.value)),i.background&&(i.background=Oo(i.background)),Ds(i.maxWidth)&&(i.maxWidth=Number(i.maxWidth.substring(0,i.maxWidth.length-1))*t.width/100),Ds(i.width)&&(i.width=Number(i.width.substring(0,i.width.length-1))*t.width/100),Ds(i.height)&&(i.height=Number(i.height.substring(0,i.height.length-1))*t.width/100),y.item=i,r.type==="scrollbar"?(Gt(r.railStyle)||qt(r.railStyle),Gt(r.sliderStyle)||qt(r.sliderStyle)):(Gt(r.textStyle)||qt(r.textStyle),r.handler&&Oo(r.handler)),y.pager=r,s.visible&&!Gt(s.style)&&(Ut(y,s.style),z(s.padding)&&(y.padding=s.padding)),y}const hUt=(n,t)=>{const e=[],i={},{series:r,seriesField:s}=t;return r().forEach(a=>{const o=s(a);let l;l=o===a.getSeriesField()?a.getSeriesInfoList():a.getSeriesInfoInField(o),l.forEach(u=>{i[u.key]||(i[u.key]=!0,e.push(u))})}),e},cUt=(n,t)=>{var e,i,r;const{series:s,selected:a,field:o,data:l}=t,u=a(),h=l();if(u.length===0&&h.length)return[];if(u.length===h.length)return n;const c={};u.forEach(p=>{c[p]=!0});const d=(e=o())!==null&&e!==void 0?e:Ls;return ut(n)&&(!((i=n[0])===null||i===void 0)&&i.nodes)?(n[0].nodes=n[0].nodes.filter(p=>c[p.key]===!0),!((r=n[0])===null||r===void 0)&&r.links&&(n[0].links=n[0].links.filter(p=>c[p.source]===!0&&c[p.target]===!0))):z(d)&&(n=n.filter(p=>c[s.getSeriesFieldValue(p,d)]===!0)),n};class b5 extends bs{constructor(){super(...arguments),this.layoutType="normal",this.layoutZIndex=ai.Legend,this.layoutLevel=Wo.Legend,this.specKey="legends",this._orient="left",this._visible=!0,this._position="middle",this._preSelectedData=[],this._selectedData=[],this.effect={onSelectedDataChange:()=>{zi(this._regions,t=>{var e;(e=t.getViewData())===null||e===void 0||e.markRunning()},{userId:this._seriesUserId,specIndex:this._seriesIndex}),zi(this._regions,t=>{t.reFilterViewData()},{userId:this._seriesUserId,specIndex:this._seriesIndex})}}}get orient(){return this._orient}get visible(){return this._visible}get position(){return this._position}getLegendData(){return this._legendData.getLatestData()}getSelectedData(){return this._selectedData}setAttrFromSpec(){var t;super.setAttrFromSpec(),this._orient=WF(this._spec.orient)?this._spec.orient:"left",this._position=(t=this._spec.position)!==null&&t!==void 0?t:"middle",this._visible=this._spec.visible!==!1;const{regionId:e,regionIndex:i,seriesId:r,seriesIndex:s}=this._spec;z(r)&&(this._seriesUserId=ot(r)),z(e)&&(this._regionUserId=ot(e)),z(s)&&(this._seriesIndex=ot(s)),z(i)&&(this._regionUserIndex=ot(i)),this._regions=this._option.getRegionsInUserIdOrIndex(this._regionUserId,this._regionUserIndex)}created(){super.created(),this.initData()}onRender(t){}_compareSpec(t,e){const i=super._compareSpec(t,e);return i.reRender=!0,(t==null?void 0:t.orient)!==(e==null?void 0:e.orient)?(i.reMake=!0,i):(mi(e,t)||(i.reCompile=!0),i)}changeRegions(t){}_bindLegendDataChange(){this._preSelectedData=this._selectedData.slice(),this._initSelectedData()}initData(){const t=this._initLegendData();t.target.addListener("change",this._bindLegendDataChange.bind(this)),this._legendData=new Cl(this._option,t),this._initSelectedData(),zi(this._regions,e=>{e.event.on(Wt.rawDataUpdate,{filter:({model:i})=>(i==null?void 0:i.id)===e.id},()=>{this._legendData.getDataView().reRunAllTransform()})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}setSelectedData(t){var e,i,r;const s=this._selectedData;F(t)||JSON.stringify(s)===JSON.stringify(t)||(zi(this._regions,a=>{a.legendSelectedFilter&&(t=a.legendSelectedFilter(this,t))},{userId:this._seriesUserId,specIndex:this._seriesIndex}),this._selectedData=[...t],(i=(e=this.effect).onSelectedDataChange)===null||i===void 0||i.call(e),this.event.emit(Wt.legendSelectedDataChange,{model:this}),(r=this._legendComponent)===null||r===void 0||r.setSelected(this._selectedData))}afterSetLayoutStartPoint(t){if(super.afterSetLayoutStartPoint(t),this._legendComponent){const{x:e,y:i}=t;st(e*i)&&this._legendComponent.setAttributes({x:e,y:i})}}getBoundsInRect(t,e){if(!this._visible)return{x1:0,y1:0,x2:0,y2:0};const i={x1:this.getLayoutStartPoint().x,y1:this.getLayoutStartPoint().y,x2:0,y2:0},r=this._getLegendAttributes(t);if(r.disableTriggerEvent=this._option.disableTriggerEvent,this._legendComponent)mi(r,this._cacheAttrs)||this._legendComponent.setAttributes(Ut({},r,{defaultSelected:this._selectedData}));else{const o=new(this._getLegendConstructor())(Ut({},r,{defaultSelected:this._selectedData}));o.name="legend",this._legendComponent=o,this.getContainer().add(o),this._option.disableTriggerEvent||this._initEvent(),o.on("*",(l,u)=>this._delegateEvent(this._legendComponent,l,u))}this._cacheAttrs=r;const s=isFinite(this._legendComponent.AABBBounds.width())?this._legendComponent.AABBBounds.width():0,a=isFinite(this._legendComponent.AABBBounds.height())?this._legendComponent.AABBBounds.height():0;if(this.layoutType!=="normal-inline"){const o=this.layoutOrient==="bottom"||this.layoutOrient==="top"?"horizontal":"vertical",l=this._position,{width:u,height:h}=e;let c=0,d=0;o==="horizontal"?l==="middle"?c=(u-s)/2:l==="end"&&(c=u-s):l==="middle"?d=(h-a)/2:l==="end"&&(d=h-a),this._legendComponent.setAttributes({dx:c,dy:d})}return i.x2=i.x1+s,i.y2=i.y1+a,i}onDataUpdate(){var t,e,i;if(JSON.stringify(this._preSelectedData)!==JSON.stringify(this._selectedData)){if(this._legendComponent){const r=this._getLegendAttributes(this.getLayoutRect());mi(r,this._cacheAttrs)||this._legendComponent.setAttributes(Ut({},r,{defaultSelected:this._selectedData}))}(e=(t=this.effect).onSelectedDataChange)===null||e===void 0||e.call(t),(i=this.getChart())===null||i===void 0||i.setLayoutTag(!0,null,!1),this.event.emit(Wt.legendSelectedDataChange,{model:this})}}_getNeedClearVRenderComponents(){return[this._legendComponent]}clear(){super.clear(),this._cacheAttrs=null,this._preSelectedData=null}}b5.specKey="legends";class FC extends b5{constructor(){super(...arguments),this.type=mt.discreteLegend,this.name=mt.discreteLegend}static getSpecInfo(t){const e=t[this.specKey];if(!e)return;if(!ut(e))return e.type&&e.type!=="discrete"?void 0:[{spec:e,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:mt.discreteLegend}];const i=[];return e.forEach((r,s)=>{r.type&&r.type!=="discrete"||i.push({spec:r,specPath:[this.specKey,s],specInfoPath:["component",this.specKey,s],type:mt.discreteLegend})}),i}init(t){super.init(t),zi(this._regions,e=>{e.addViewDataFilter({type:"discreteLegendFilter",options:{series:e,selected:()=>this._selectedData,field:()=>this._getSeriesLegendField(e),data:()=>this.getLegendDefaultData()},level:$o.legendFilter})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}_initLegendData(){ie(this._option.dataSet,"discreteLegendFilter",cUt),ie(this._option.dataSet,"discreteLegendDataMake",hUt);const t=new Le(this._option.dataSet,{name:`${this.type}_${this.id}_data`});return t.transform({type:"discreteLegendDataMake",options:{series:()=>{const e=[];return zi(this._regions,i=>{e.push(i)},{specIndex:this._spec.seriesIndex,userId:this._spec.seriesId}),e},seriesField:e=>this._getSeriesLegendField(e)}}),t}_getSeriesLegendField(t){var e,i,r;const s=t.getSeriesField(),a=(e=this._spec.scaleName)!==null&&e!==void 0?e:this._spec.scale;if(F(a)||!t.getRawData())return s;const o=this._option.globalScale.getScaleSpec(a);if(!o)return s;if(this._spec.field)return this._spec.field;if(!Gf(o.domain))return s;const l=o.domain.find(u=>u.dataId===t.getRawData().name);return l&&(r=(i=l.fields)===null||i===void 0?void 0:i[0])!==null&&r!==void 0?r:s}_initSelectedData(){const t=this.getLegendDefaultData();if(this._unselectedData){const e=[],i=[];t.forEach(r=>{this._unselectedData.includes(r)?i.push(r):e.push(r)}),this._selectedData=e,this._unselectedData=i}else this._spec.defaultSelected?this._selectedData=[...this._spec.defaultSelected]:this._selectedData=t}getLegendDefaultData(t){return ft(this._spec.data)?this._getLegendItems().map(e=>e.label):this._legendData.getLatestData().map(t?e=>e.originalKey:e=>e.key)}_addDefaultTitleText(t){var e,i,r,s;if(!((e=t.title)===null||e===void 0)&&e.visible&&F(t.title.text)&&F((i=t.title.style)===null||i===void 0?void 0:i.text)){const a=(s=(r=this._regions)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.getSeries()[0];if(!a)return;t.title.text=_C(a.getRawData(),a.getSeriesField())}}_getLegendAttributes(t){const e=this.layoutOrient==="bottom"||this.layoutOrient==="top"?"horizontal":"vertical",i=Object.assign(Object.assign({layout:e,items:this._getLegendItems(),zIndex:this.layoutZIndex},uUt(this._spec,t)),{maxWidth:t.width,maxHeight:t.height});return this._addDefaultTitleText(i),this._addLegendItemFormatMethods(i),i}_getLegendConstructor(){return ftt}setSelectedData(t){t&&(this._unselectedData=this.getLegendDefaultData().filter(e=>!t.includes(e))),super.setSelectedData(t)}_initEvent(){if(this._legendComponent){const t=this._spec.filter!==!1;this._legendComponent.addEventListener(Br.legendItemClick,e=>{const i=le(e,"detail.currentSelected");t&&this.setSelectedData(i),this.event.emit(Wt.legendItemClick,{model:this,value:i,event:e})}),this._legendComponent.addEventListener(Br.legendItemHover,e=>{const i=le(e,"detail");this.event.emit(Wt.legendItemHover,{model:this,value:i,event:e})}),this._legendComponent.addEventListener(Br.legendItemUnHover,e=>{const i=le(e,"detail");this.event.emit(Wt.legendItemUnHover,{model:this,value:i,event:e})})}}_getLegendItems(){const t=(this._legendData.getLatestData()||[]).map(e=>{var i,r;const s=e.style("fillOpacity"),a=e.style("strokeOpacity"),o=e.style("opacity"),l=e.style("texture");return{label:e.key,shape:{symbolType:(r=(i=e.style("symbolType"))!==null&&i!==void 0?i:e.shapeType)!==null&&r!==void 0?r:"circle",fillOpacity:st(s)?s:1,strokeOpacity:st(a)?a:1,opacity:st(o)?o:1,texturePadding:l?1:null,textureSize:l?4:null,texture:l,fill:e.style("fill"),stroke:e.style("stroke"),textureColor:e.style("textureColor"),innerBorder:e.style("innerBorder"),outerBorder:e.style("outerBorder"),lineDash:e.style("lineDash"),lineDashOffset:e.style("lineDashOffset"),lineWidth:e.style("lineWidth")}}});return ft(this._spec.data)?this._spec.data(t,this._option.globalScale.getScale("color"),this._option.globalScale):t}_addLegendItemFormatMethods(t){var e,i,r,s;const{formatMethod:a,formatter:o}=(i=(e=this._spec.item)===null||e===void 0?void 0:e.label)!==null&&i!==void 0?i:{},{formatMethod:l,formatter:u}=(s=(r=this._spec.item)===null||r===void 0?void 0:r.value)!==null&&s!==void 0?s:{},{formatFunc:h}=Lu(a,o);o&&!a&&h&&(t.item.label.formatMethod=(d,p)=>h(d,p,o));const{formatFunc:c}=Lu(l,u);u&&!l&&c&&(t.item.value.formatMethod=(d,p)=>c(u,d,p,o))}}FC.specKey="legends",FC.type=mt.discreteLegend;const dUt=()=>{Z.registerComponent(FC.type,FC)},pUt=(n,t)=>{const{series:e,field:i,scale:r}=t,s=i();if(i&&s){let a=1/0,o=-1/0;return e().forEach(l=>{const u=l.getRawDataStatisticsByField(s,!0),h=u==null?void 0:u.min,c=u==null?void 0:u.max;st(h)&&(a=Math.min(h,a)),st(c)&&(o=Math.max(c,o))}),[a,o]}if(r){const a=r();return a?a.domain():[]}return[]},fUt=(n,t)=>{const{selected:e,field:i,data:r,isHierarchyData:s}=t,a=e(),o=i(),l=s||(u=>u&&u.some(h=>h&&D7t(h)));if(a===r())return n;if(o&&!Gt(a)){const[u,h]=a;return l(n)?nit(n,+u,+h):n.filter(c=>c[o]>=u&&c[o]<=h)}return n};var gUt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};function mUt(n){const t=Ut({},n),{title:e={},handler:i={},rail:r={},track:s={},startText:a,endText:o,handlerText:l,sizeBackground:u,background:h={},type:c,id:d,visible:p,orient:f,position:g,data:_,defaultSelected:v,field:y,filter:b,regionId:S,regionIndex:A,seriesIndex:w,seriesId:C,padding:k}=t,M=gUt(t,["title","handler","rail","track","startText","endText","handlerText","sizeBackground","background","type","id","visible","orient","position","data","defaultSelected","field","filter","regionId","regionIndex","seriesIndex","seriesId","padding"]);return e.visible&&(M.title=Trt(e)),M.showHandler=i.visible!==!1,Gt(i.style)||(M.handlerStyle=qt(i.style)),z(r.width)&&(M.railWidth=r.width),z(r.height)&&(M.railHeight=r.height),Gt(r.style)||(M.railStyle=qt(r.style)),Gt(s.style)||(M.trackStyle=qt(s.style)),M.startText=Oo(a),M.endText=Oo(o),M.handlerText=Oo(l),Gt(u)||(M.sizeBackground=qt(u)),h.visible&&!Gt(h.style)&&(Ut(M,h.style),z(h.padding)&&(M.padding=h.padding)),M}function DG(n){return n==="color"||n==="size"}const vUt={color:Q2,size:tT},_Ut=["#C4E7FF","#98CAFF","#75ACFF","#518FF9","#2775DC","#005CBE","#00429F","#00287E"],yUt=[2,10];class jC extends b5{static getSpecInfo(t){const e=t[this.specKey];if(!e)return;if(!ut(e))return DG(e.type)?[{spec:e,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:e.type==="color"?mt.colorLegend:mt.sizeLegend}]:void 0;const i=[];return e.forEach((r,s)=>{DG(r.type)&&i.push({spec:r,specPath:[this.specKey,s],specInfoPath:["component",this.specKey,s],type:r.type==="color"?mt.colorLegend:mt.sizeLegend})}),i}constructor(t,e){super(t,e),this.type=mt.colorLegend,this.name=mt.colorLegend;const i=this._spec.type==="color"?mt.colorLegend:mt.sizeLegend;this.type=i,this.name=i}setAttrFromSpec(){super.setAttrFromSpec(),this._field=this._spec.field,this._legendType=this._spec.type}init(t){super.init(t),zi(this._regions,e=>{e.addViewDataFilter({type:"continuousLegendFilter",options:{selected:()=>this._selectedData,field:()=>this._field,data:()=>this._legendData.getLatestData(),isHierarchyData:e.isHierarchyData},level:$o.legendFilter})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}_getScaleInGlobal(){const t=this._option.globalScale;let e=this._spec.scale;return e||(e=this._legendType),t.getScale(e)}_initLegendData(){ie(this._option.dataSet,"continuousLegendFilter",fUt),ie(this._option.dataSet,"continuousLegendDataMake",pUt);const t=new Le(this._option.dataSet,{name:`${this.type}_${this.id}_data`});return t.transform({type:"continuousLegendDataMake",options:{series:()=>ktt(this._regions,{userId:this._seriesUserId,specIndex:this._seriesIndex}),field:()=>this._field,scale:this._getScaleInGlobal.bind(this)}}),t}_initSelectedData(){this._spec.defaultSelected?this._selectedData=this._spec.defaultSelected.slice():this._selectedData=this._legendData.getLatestData()}_addDefaultTitleText(t){var e,i,r,s;if(!((e=t.title)===null||e===void 0)&&e.visible&&F(t.title.text)&&F((i=t.title.style)===null||i===void 0?void 0:i.text)){const a=this._field;if(a){const h=(s=(r=this._regions)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.getSeries()[0];return h?void(t.title.text=_C(h.getRawData(),a)):void 0}let o=this._spec.scale;o||(o=this._legendType);const l=this._option.globalScale.getScaleSpec(o);if(!Gf(l==null?void 0:l.domain))return;const u=l.domain[0];if(u.fields.length===0)return;t.title.text=_C(this._option.dataSet.getDataView(u.dataId),u.fields[0])}}_getLegendAttributes(t){var e,i;const r=this.layoutOrient==="bottom"||this.layoutOrient==="top"?"horizontal":"vertical",s=r==="horizontal"?"bottom":this.layoutOrient;let a=[];const o=this._getScaleInGlobal();o&&o.type==="linear"&&(a=o.range()),Gt(a)&&(a=this._legendType==="color"?_Ut:yUt);let l=(e=this._legendData.getLatestData()[0])!==null&&e!==void 0?e:0,u=(i=this._legendData.getLatestData()[1])!==null&&i!==void 0?i:1;this._legendData.getLatestData()[0]===this._legendData.getLatestData()[1]&&(l=Math.min(0,this._legendData.getLatestData()[0]),u=this._legendData.getLatestData()[0]===0?1:Math.max(0,this._legendData.getLatestData()[0]));const h=Object.assign({layout:r,align:s,zIndex:this.layoutZIndex,min:l,max:u,value:this._spec.defaultSelected,[this._legendType==="color"?"colors":"sizeRange"]:a},mUt(this._spec));return this._addDefaultTitleText(h),h}_getLegendConstructor(){return vUt[this._legendType]}_initEvent(){if(this._legendComponent){const t=this._spec.filter!==!1;this._legendComponent.addEventListener("change",Ml(e=>{const i=le(e,"detail.value");t&&this.setSelectedData(i),this.event.emit(Wt.legendFilter,{model:this,value:i,event:e})},30))}}}jC.specKey="legends",jC.type=mt.continuousLegend;const bUt=()=>{Z.registerComponent(jC.type,jC)};class x5{constructor(t){this._showTooltipByHandler=(e,i)=>{var r,s,a;if(F(e))return 1;i.changePositionOnly||this.clearCache(),this._updateViewSpec(i);const o=this._cacheViewSpec;if(F(o==null?void 0:o[this.activeType])||o.visible===!1)return 1;i.tooltipSpec=o,this._updateActualTooltip(e,i),i.tooltipActual=this._cacheActualTooltip;const{title:l,content:u}=this._cacheActualTooltip,h=F(l==null?void 0:l.key)&&F(l==null?void 0:l.value)&&!(u!=null&&u.length);if(this.component.event.emit(Wt.tooltipShow,Object.assign(Object.assign({},i),{isEmptyTooltip:F(l==null?void 0:l.key)&&F(l==null?void 0:l.value)&&!(u!=null&&u.length),tooltipData:e,activeType:this.activeType,tooltip:this.component})),h)return 1;let c;return!((r=o.handler)===null||r===void 0)&&r.showTooltip?c=o.handler.showTooltip.bind(o.handler):!((s=this.component.tooltipHandler)===null||s===void 0)&&s.showTooltip&&(c=this.component.tooltipHandler.showTooltip.bind(this.component.tooltipHandler)),c?(a=c(this.activeType,e,i))!==null&&a!==void 0?a:0:1},this.component=t}_preprocessDimensionInfo(t){const e=[];if(t==null||t.forEach(i=>{const r=Object.assign(Object.assign({},i),{data:i.data.filter(({series:s})=>{var a,o;return((o=(a=s.getSpec())===null||a===void 0?void 0:a.tooltip)===null||o===void 0?void 0:o.visible)!==!1})});r.data.length>0&&e.push(r)}),e.length>0)return e}_getDimensionInfo(t){var e,i;let r;const s=this.component.getChart(),a=s.getCompiler().getStage().getLayer(void 0),o={x:t.event.viewX,y:t.event.viewY};if(a.globalTransMatrix.transformPoint({x:t.event.viewX,y:t.event.viewY},o),r=[...(e=uit(s,o,!0))!==null&&e!==void 0?e:[],...(i=sit(s,o))!==null&&i!==void 0?i:[]],r.length===0)r=void 0;else if(r.length>1){const l=r.filter(u=>{var h;const c=u.axis;if(c.getSpec().hasDimensionTooltip)return!0;if(!qn(c.getScale().type))return!1;let d;for(const p of(h=c==null?void 0:c.getRegions())!==null&&h!==void 0?h:[]){for(const f of p.getSeries())if(f.coordinate==="cartesian"){d=f;break}if(z(d))break}return z(d)&&d.getDimensionField()[0]===d.fieldY[0]?c.getOrient()==="left"||c.getOrient()==="right":c.getOrient()==="bottom"||c.getOrient()==="top"});if(r=l.length?l:r.slice(0,1),r.length>1){const u=new Set;r.forEach(h=>{h.data=h.data.filter(({key:c})=>!u.has(c)&&(u.add(c),!0))})}}return r}_updateViewSpec(t){const{changePositionOnly:e,model:i,dimensionInfo:r}=t;e&&this._cacheViewSpec||(this._cacheViewSpec=eHt(this.activeType,this.component.getSpec(),i,r))}_updateActualTooltip(t,e){var i,r,s,a;const o=this._cacheViewSpec[this.activeType],{changePositionOnly:l}=e;if(!l||!this._cacheActualTooltip){const u=uHt(o,t,e),h=!!z(u)&&AC(o.visible,t,e)!==!1;this._cacheActualTooltip=Object.assign(Object.assign({},u),{visible:h,activeType:o.activeType,data:t});const{title:c,content:d}=this._cacheActualTooltip;this._cacheActualTooltip.title=(r=(i=o.updateTitle)===null||i===void 0?void 0:i.call(o,c,t,e))!==null&&r!==void 0?r:c,this._cacheActualTooltip.content=(a=(s=o.updateContent)===null||s===void 0?void 0:s.call(o,d,t,e))!==null&&a!==void 0?a:d}}clearCache(){this._cacheViewSpec=void 0,this._cacheActualTooltip=void 0}}class xUt extends x5{constructor(){super(...arguments),this.activeType="dimension"}showTooltip(t,e,i){const r=Object.assign(Object.assign({},e),{dimensionInfo:this._preprocessDimensionInfo(t),changePositionOnly:i,tooltip:this.component});return this._showTooltipByHandler(t,r)}shouldHandleTooltip(t,e){var i,r;const{tooltipInfo:s}=e;if(F(s))return!1;const a=(i=t.model)===null||i===void 0?void 0:i.tooltipHelper;return!!((r=a==null?void 0:a.activeType)!==null&&r!==void 0?r:this.component.getSpec().activeType).includes("dimension")}getMouseEventData(t){var e;return{tooltipInfo:this._getDimensionInfo(t),ignore:[...(e=this.component.getOption().getAllSeries())!==null&&e!==void 0?e:[]].some(i=>{var r;const s=(r=i.tooltipHelper)===null||r===void 0?void 0:r.ignoreTriggerSet.dimension;return t.model&&(s==null?void 0:s.has(t.model))||t.mark&&(s==null?void 0:s.has(t.mark))})}}}class SUt extends x5{constructor(){super(...arguments),this.activeType="mark"}showTooltip(t,e,i){const{datum:r,series:s,dimensionInfo:a}=t,o=[{datum:[r],series:s}],l=Object.assign(Object.assign({},e),{dimensionInfo:this._preprocessDimensionInfo(a),changePositionOnly:i,tooltip:this.component});return this._showTooltipByHandler(o,l)}shouldHandleTooltip(t,e){var i;const{tooltipInfo:r}=e;if(F(r))return!1;const s=(i=t.model)===null||i===void 0?void 0:i.tooltipHelper;return!!(s!=null&&s.activeType.includes("mark"))}getMouseEventData(t,e){var i;let r,s;if(((i=t.model)===null||i===void 0?void 0:i.modelType)==="series"){const a=t.model,o=a.tooltipHelper,l=o==null?void 0:o.activeTriggerSet.mark,u=o==null?void 0:o.ignoreTriggerSet.mark;l!=null&&l.has(t.model)||l!=null&&l.has(t.mark)?r={mark:t.mark,datum:t.datum,series:a,dimensionInfo:e}:(u!=null&&u.has(t.model)||u!=null&&u.has(t.mark))&&(s=!0)}return{tooltipInfo:r,ignore:s}}}class AUt extends x5{constructor(){super(...arguments),this.activeType="group"}showTooltip(t,e,i){const{datum:r,series:s,dimensionInfo:a}=t,o=[{datum:ot(r),series:s}],l=Object.assign(Object.assign({},e),{groupDatum:this._getGroupDatum(e),dimensionInfo:this._preprocessDimensionInfo(a),changePositionOnly:i,tooltip:this.component});return this._showTooltipByHandler(o,l)}shouldHandleTooltip(t,e){var i;const{tooltipInfo:r}=e;if(F(r))return!1;const s=(i=t.model)===null||i===void 0?void 0:i.tooltipHelper;return!!(s!=null&&s.activeType.includes("group"))}getMouseEventData(t,e){var i,r;let s,a;if(((i=t.model)===null||i===void 0?void 0:i.modelType)==="series"){const o=t.model,l=o.tooltipHelper,u=l==null?void 0:l.activeTriggerSet.group,h=l==null?void 0:l.ignoreTriggerSet.group;if(u!=null&&u.has(t.model)||u!=null&&u.has(t.mark)){const c=this.component.getSpec()[this.activeType];(c!=null&&c.triggerMark?ot(c.triggerMark):[]).includes((r=t.mark)===null||r===void 0?void 0:r.name)&&(s={mark:t.mark,datum:t.datum,series:o,dimensionInfo:e})}else(h!=null&&h.has(t.model)||h!=null&&h.has(t.mark))&&(a=!0)}return{tooltipInfo:s,ignore:a}}_getGroupDatum(t){const{model:e,mark:i,datum:r}=t,s=e;if(["line","area"].includes(i.type))return ot(r);const a=s.getViewData().latestData,o=s.getSeriesField();if(!o)return a;const l=ot(r)[0][o];return a.filter(u=>u[o]===l)}}const BG=n=>z(n)&&!ut(n),tO=n=>z(n)&&ut(n);class Mrt extends L1{_shouldMergeThemeToSpec(){return!1}_initTheme(t,e){const{spec:i,theme:r}=super._initTheme(t,e);return i.style=Ut({},this._theme,i.style),{spec:i,theme:r}}_transformSpecAfterMergingTheme(t,e,i){var r,s,a,o,l,u,h,c,d;super._transformSpecAfterMergingTheme(t,e,i),t.visible=(r=t.visible)===null||r===void 0||r,t.activeType=Ih(t),t.renderMode=(s=t.renderMode)!==null&&s!==void 0?s:Ec(this._option.mode)||!ga(this._option.mode)?"canvas":"html",t.trigger=(a=t.trigger)!==null&&a!==void 0?a:"hover",t.className=(o=t.className)!==null&&o!==void 0?o:oHt,t.enterable=(l=t.enterable)!==null&&l!==void 0&&l,t.transitionDuration=(u=t.transitionDuration)!==null&&u!==void 0?u:150,t.triggerOff=(h=t.triggerOff)!==null&&h!==void 0?h:t.trigger,t.confine=(c=t.confine)!==null&&c!==void 0?c:t.renderMode==="canvas",z(t.mark)&&(t.mark.activeType="mark"),z(t.dimension)&&(t.dimension.activeType="dimension"),z(t.parentElement)?It(t.parentElement)&&(t.parentElement=(d=globalThis==null?void 0:globalThis.document)===null||d===void 0?void 0:d.getElementById(t.parentElement)):ga(this._option.mode)&&(t.parentElement=Th==null?void 0:Th.body)}}class __ extends bs{constructor(){super(...arguments),this.layoutZIndex=1,this.type=mt.tooltip,this.name=mt.tooltip,this.transformerConstructor=Mrt,this.specKey="tooltip",this.layoutType="none",this._alwaysShow=!1,this._eventList=[],this._isTooltipShown=!1,this._clickLock=!1,this._mountEvent=(t,e,i)=>{this.event.on(t,e,i),this._eventList.push({eventType:t,handler:i})},this._getMouseOutHandler=t=>e=>{var i,r,s;if(this._alwaysShow||!this._isTooltipShown&&!(!((r=(i=this.tooltipHandler)===null||i===void 0?void 0:i.isTooltipShown)===null||r===void 0)&&r.call(i)))return;const a=ga((s=this._option)===null||s===void 0?void 0:s.mode),{clientX:o,clientY:l}=e.event;a&&this._isPointerOnTooltip(e)||a&&t&&this._isPointerInChart({x:o,y:l})||this._handleChartMouseOut(e)},this._handleChartMouseOut=t=>{this._alwaysShow||this._spec.triggerOff!=="none"&&(this._hideTooltipByHandler(Object.assign(Object.assign({},t),{tooltip:this})),this._cacheInfo=void 0,this._cacheParams=void 0,this._cacheActiveType=void 0)},this._getMouseMoveHandler=t=>e=>{if(this.tooltipHandler||this._initHandler(),this.processor||this._initProcessor(),this._alwaysShow||this._isPointerOnTooltip(e)||!t&&this._clickLock)return;const i=this._getMouseEventData(e),{tooltipInfo:{dimension:r},ignore:{mark:s,dimension:a}}=i,o={mark:!1,dimension:!1,group:!1};o.group=this._showTooltipByMouseEvent("group",i,e,t),o.group||(o.mark=this._showTooltipByMouseEvent("mark",i,e,t)),o.mark||o.group||(o.dimension=this._showTooltipByMouseEvent("dimension",i,e,t)),Object.values(o).every(l=>!l)&&!Q6t(e)&&(s&&BG(this._cacheInfo)?o.mark=this._showTooltipByMouseEvent("mark",i,e,t,!0):a&&tO(this._cacheInfo)?o.dimension=this._showTooltipByMouseEvent("dimension",i,e,t,!0):z(r)&&(o.dimension=this._showTooltipByMouseEvent("dimension",i,e,t))),o.mark||o.group||o.dimension&&!F(r)||(this._handleChartMouseOut(e),t&&this._clickLock&&(this._clickLock=!1))},this._showTooltipByMouseEvent=(t,e,i,r,s)=>{var a;const o=this.processor[t];if(!o.shouldHandleTooltip(i,{tooltipInfo:e.tooltipInfo[t],ignore:e.ignore[t]}))return!1;let l;if(this._timer&&clearTimeout(this._timer),s)l=!o.showTooltip(this._cacheInfo,i,!0);else{const h=e.tooltipInfo[t],c=this._isSameAsCache(h,i,t);l=!o.showTooltip(h,i,c),l&&(this._cacheInfo=h,this._cacheParams=i,this._cacheActiveType=t)}l&&(this._isTooltipShown=!0,r&&this._spec.lockAfterClick&&!this._clickLock?this._clickLock=!0:Number.isFinite(this._spec.hideTimer)&&(this._timer=setTimeout(()=>{this._handleChartMouseOut()},this._spec.hideTimer)));const u=(a=this._option)===null||a===void 0?void 0:a.globalInstance;return l&&ar.globalConfig.uniqueTooltip&&u&&ar.hideTooltip(u.id),l},this._getMouseEventData=t=>{const e={tooltipInfo:{},ignore:{}};let i="dimension";const{tooltipInfo:r,ignore:s}=this.processor[i].getMouseEventData(t);e.tooltipInfo[i]=r,e.ignore[i]=s;const a=r;for(i of Object.keys(this.processor))if(i!=="dimension"){const{tooltipInfo:o,ignore:l}=this.processor[i].getMouseEventData(t,a);e.tooltipInfo[i]=o,e.ignore[i]=l}return e},this._hideTooltipByHandler=t=>{var e,i,r,s;if(!this._isTooltipShown&&!(!((i=(e=this.tooltipHandler)===null||e===void 0?void 0:e.isTooltipShown)===null||i===void 0)&&i.call(e)))return 0;let a;if(this.event.emit(Wt.tooltipHide,Object.assign(Object.assign({},t),{source:Re.chart,tooltip:this})),Object.values(this.processor).forEach(o=>{o.clearCache()}),!((r=this._spec.handler)===null||r===void 0)&&r.hideTooltip?a=this._spec.handler.hideTooltip.bind(this._spec.handler):!((s=this.tooltipHandler)===null||s===void 0)&&s.hideTooltip&&(a=this.tooltipHandler.hideTooltip.bind(this.tooltipHandler)),a){const o=a(t);return o||(this._isTooltipShown=!1),o}return 1}}static getSpecInfo(t){const e=t[this.specKey];if(!e)return null;if(!ut(e))return[{spec:e,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:mt.tooltip}];const i=[];return e.forEach((r,s)=>{i.push({spec:r,specPath:[this.specKey,s],specInfoPath:["component",this.specKey,s],type:mt.tooltip})}),i}isTooltipShown(){return this._isTooltipShown}changeRegions(t){}_getNeedClearVRenderComponents(){return[]}_registerEvent(){}_releaseEvent(){}onLayout(t){}onLayoutEnd(t){}onRender(t){}created(){super.created(),this._regions=this._option.getAllRegions(),this._initEvent()}release(){var t,e;super.release(),this._timer&&clearTimeout(this._timer),this._eventList.forEach(({eventType:i,handler:r})=>{this.event.off(i,r)}),this._eventList=[],(e=(t=this.tooltipHandler)===null||t===void 0?void 0:t.release)===null||e===void 0||e.call(t),this._isTooltipShown=!1}beforeRelease(){this.event.emit(Wt.tooltipHide,{tooltip:this,chart:this.getChart()}),this.event.emit(Wt.tooltipRelease,{tooltip:this,chart:this.getChart()})}_initHandler(){var t,e,i;const r=(t=this._spec.renderMode)!==null&&t!==void 0?t:"html",s=this._option.globalInstance.getTooltipHandlerByUser();if(s)this.tooltipHandler=s;else{const a=r==="canvas"?xc.canvas:xc.dom,o=Z.getComponentPluginInType(a);o||ip("Can not find tooltip handler: "+a);const l=new o;l.name=`${this._spec.className}-${(e=this._option.globalInstance.id)!==null&&e!==void 0?e:0}-${this.getSpecIndex()}`,(i=this.pluginService)===null||i===void 0||i.load([l]),this.tooltipHandler=l}}_initProcessor(){this.processor={mark:new SUt(this),dimension:new xUt(this),group:new AUt(this)}}_initEvent(){var t;if(this._option.disableTriggerEvent)return;const e=ot((t=this._spec.trigger)!==null&&t!==void 0?t:"hover"),i=this._option.mode;e.includes("hover")&&(this._mountEvent("pointermove",{source:"chart"},this._getMouseMoveHandler(!1)),(vc(i)||Ec(i))&&(this._mountEvent("pointerdown",{source:"chart"},this._getMouseMoveHandler(!1)),this._mountEvent("pointerup",{source:"window"},this._getMouseOutHandler(!0))),this._mountEvent("pointerout",{source:"canvas"},this._getMouseOutHandler(!1))),e.includes("click")&&(this._mountEvent("pointertap",{source:"chart"},this._getMouseMoveHandler(!0)),this._mountEvent("pointerup",{source:"window"},this._getMouseOutHandler(!0)))}reInit(t){var e,i;super.reInit(t),this.tooltipHandler?(i=(e=this.tooltipHandler).reInit)===null||i===void 0||i.call(e):this._initHandler()}showTooltip(t,e){var i;if(this.tooltipHandler||this._initHandler(),this.processor||this._initProcessor(),!(!((i=this.tooltipHandler)===null||i===void 0)&&i.showTooltip))return!1;const r=Z6t(t,e,this);return r!=="none"&&(this._alwaysShow=!!(e!=null&&e.alwaysShow)),r}hideTooltip(){const t={changePositionOnly:!1,tooltip:this,item:void 0,datum:void 0,source:Re.chart};return this._alwaysShow=!1,!this._hideTooltipByHandler(t)}_isSameAsCache(t,e,i){if(i!==this._cacheActiveType)return!1;if(t===this._cacheInfo)return!0;if(F(this._cacheInfo)||F(t))return!1;if(tO(t)){if(BG(this._cacheInfo))return!1;const s=this._cacheInfo;if(!(s.length===t.length&&t.every((a,o)=>rit(a,s[o]))))return!1}else{if(tO(this._cacheInfo))return!1;const s=this._cacheInfo;if(!((t==null?void 0:t.datum)===s.datum&&(t==null?void 0:t.mark)===s.mark&&(t==null?void 0:t.series)===s.series))return!1}const r=this._cacheParams;return!F(r)&&!F(e)&&r.mark===e.mark&&r.model===e.model&&r.datum===e.datum}_isPointerInChart(t){var e;const i=(e=this._option)===null||e===void 0?void 0:e.globalInstance;if(!i||!i.getChart())return!1;const{x:r,y:s}=t,a=i.getCanvas(),{x:o,y:l,width:u,height:h}=a.getBoundingClientRect();return r>=o&&r<=o+u&&s>=l&&s<=l+h}_isPointerOnTooltip(t){var e,i;if(this._spec.enterable&&this._spec.renderMode==="html"){const{event:r}=t;let s;if(z(r.nativeEvent)){const o=r.nativeEvent;s=o.relatedTarget,o.composedPath&&o.composedPath().length>0&&(s=o.composedPath()[0])}else s=r.relatedTarget;const a=(i=(e=this.tooltipHandler)===null||e===void 0?void 0:e.getTooltipContainer)===null||i===void 0?void 0:i.call(e);if(z(a)&&z(s)&&Xq(s,a))return!0}return!1}getVisible(){return this._spec.visible!==!1}}__.type=mt.tooltip,__.transformerConstructor=Mrt,__.specKey="tooltip";const wUt=()=>{Z.registerComponent(__.type,__)};function CUt(n){return n===vn["desktop-browser"]||n===vn["desktop-miniApp"]?{click:"pointertap",hover:"pointermove",hoverOut:"pointerleave",clickOut:"pointerleave"}:vc(n)||Ec(n)?{click:"tap",hover:["pointerdown","pointermove"],hoverOut:"pointerleave",clickOut:"pointerleave"}:null}var FG;(function(n){n[n.ALL=3]="ALL",n[n.HORIZONTAL=2]="HORIZONTAL",n[n.VERTICAL=1]="VERTICAL"})(FG||(FG={}));var jG=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};const kUt={x:["top","bottom"],y:["left","right"],category:["angle"],value:["radius"]};class S5 extends bs{get enableRemain(){return this.triggerOff==="none"}constructor(t,e){super(t,e),this.specKey="crosshair",this.layoutType="none",this.gridZIndex=ai.CrossHair_Grid,this.labelZIndex=ai.CrossHair,this.trigger="hover",this._handleIn=i=>{if(!this._option)return;const{x:r,y:s}=this.calculateTriggerPoint(i);this.showDefault=!1,this._layoutCrosshair(r,s);const a=this._getNeedClearVRenderComponents();this._hasActive=a.some(o=>o&&o.attribute.visible!==!1)},this._handleClickInEvent=i=>{this._handleIn(i),this._clickLock=this._hasActive&&this._spec.lockAfterClick,this._clickLock&&Mt(this.triggerOff)&&(this._timer&&clearTimeout(this._timer),this._timer=setTimeout(()=>{this._clickLock=!1,this._handleOutEvent()},this.triggerOff))},this._handleHoverInEvent=Pc(i=>{this._clickLock||this._handleIn(i)},10),this._handleOutEvent=()=>{this.enableRemain||this._clickLock||!this._hasActive||(this.clearOutEvent(),this.hide())},this._handleTooltipShow=i=>{const r=i.tooltipData;if(i.isEmptyTooltip||!r||!r.length)return void this._handleTooltipHideOrRelease();if(ae(this._spec.followTooltip)&&this._spec.followTooltip[i.activeType]===!1)return void this._handleTooltipHideOrRelease();const{x:s,y:a}=this.calculateTriggerPoint(i);this.showDefault=!1,this._layoutCrosshair(s,a,r,i.activeType);const o=this._getNeedClearVRenderComponents();this._hasActive=o.some(l=>l&&l.attribute.visible!==!1)},this._handleTooltipHideOrRelease=()=>{this.clearOutEvent(),this.hide()},this.enable=!0,this.showDefault=!0}_getLimitBounds(){var t,e;if(!this._limitBounds){const{width:i,height:r}=(e=(t=this._option.globalInstance.getChart())===null||t===void 0?void 0:t.getViewRect())!==null&&e!==void 0?e:{width:0,height:0};this._limitBounds={x1:0,y1:0,x2:i,y2:r}}return this._limitBounds}_showDefaultCrosshair(){this.showDefault&&this._showDefaultCrosshairBySpec()}setAttrFromSpec(){super.setAttrFromSpec(),this._parseCrosshairSpec()}created(){super.created(),this._initEvent()}_compareSpec(t,e){const i=super._compareSpec(t,e);return i.reMake||mi(e,t)||(i.reRender=!0,i.reMake=!0),i}_initEvent(){if(!this._option.disableTriggerEvent)if(this._spec.followTooltip)this._registerTooltipEvent();else{const t=this._getTriggerEvent();t&&t.forEach(e=>{this._registerEvent(e.in,!1,e.click),e.out&&this._registerEvent(e.out,!0)})}}_registerEvent(t,e,i){const r=e?this._handleOutEvent:i?this._handleClickInEvent:this._handleHoverInEvent,s=e?{level:ci.chart}:{source:Re.chart};ut(t)?t.forEach(a=>{this.event.on(a,s,r)}):this.event.on(t,s,r)}_eventOff(t,e,i){const r=e?this._handleOutEvent:i?this._handleClickInEvent:this._handleHoverInEvent;ut(t)?t.forEach(s=>{this.event.off(s,r)}):this.event.off(t,r)}updateLayoutAttribute(){this._limitBounds=null,this._showDefaultCrosshair()}calculateTriggerPoint(t){const{event:e}=t,i=this._option.getCompiler().getStage().getLayer(void 0),r={x:e.viewX,y:e.viewY};return i.globalTransMatrix.transformPoint({x:e.viewX,y:e.viewY},r),{x:r.x-this.getLayoutStartPoint().x,y:r.y-this.getLayoutStartPoint().y}}_getTriggerEvent(){const{mode:t=vn["desktop-browser"]}=this._option,e=CUt(t);if(e){const i=this.trigger||"hover",r=s=>s==="click"?this.triggerOff==="none"?null:e.clickOut:e.hoverOut;if(ut(i)){const s=[];return i.forEach(a=>{s.push({click:a==="click",in:e[a],out:r(a)})}),s}return[{click:i==="click",in:e[i],out:r(i)}]}return null}_registerTooltipEvent(){this.event.on(Wt.tooltipHide,{source:Re.chart},this._handleTooltipHideOrRelease),this.event.on(Wt.tooltipShow,{source:Re.chart},this._handleTooltipShow),this.event.on(Wt.tooltipRelease,{source:Re.chart},this._handleTooltipHideOrRelease)}_getAxisInfoByField(t){var e,i;const r=(i=(e=this._option).getComponentsByKey)===null||i===void 0?void 0:i.call(e,"axes");if(!(r!=null&&r.length))return null;let s=le(this._spec,`${t}Field.bindingAxesIndex`);if(s||(s=[],r.forEach((p,f)=>{kUt[t].includes(p.getOrient())&&s.push(f)})),!s.length)return null;const a=new Map;let o=1/0,l=1/0,u=-1/0,h=-1/0;const{x:c,y:d}=this.getLayoutStartPoint();return s.forEach(p=>{o=1/0,l=1/0,u=-1/0,h=-1/0;const f=r.find(g=>g.getSpecIndex()===p);f&&(f.getRegions().forEach(g=>{const{x:_,y:v}=g.getLayoutStartPoint();o=Math.min(o,_-c),l=Math.min(l,v-d),u=Math.max(u,_+g.getLayoutRect().width-c),h=Math.max(h,v+g.getLayoutRect().height-d)}),a.set(p,{x1:o,y1:l,x2:u,y2:h,axis:f}))}),a}changeRegions(t){}onLayoutEnd(t){const e=this._regions[0];this.setLayoutRect(e.getLayoutRect()),this.setLayoutStartPosition(e.getLayoutStartPoint()),super.onLayoutEnd(t)}onRender(t){}_releaseEvent(){this.clearOutEvent();const t=this._getTriggerEvent();t&&t.forEach(e=>{this._eventOff(e.in,!1,e.click),e.out&&this._eventOff(e.out,!0)})}_parseCrosshairSpec(){this._parseFieldInfo();const{trigger:t,triggerOff:e,labelZIndex:i,gridZIndex:r}=this._spec;t&&(this.trigger=t),(e==="none"||Mt(e)&&e>0)&&(this.triggerOff=e),i!==void 0&&(this.labelZIndex=i),r!==void 0&&(this.gridZIndex=r)}_parseField(t,e){var i,r,s;const a={},{line:o={},label:l={},visible:u}=t;if(a.visible=u,a.type=o.type||"line",o.visible===!1)a.style={visible:!1};else{const h=o.style||{},{stroke:c,fill:d,lineWidth:p}=h,f=h,{strokeOpacity:g,fillOpacity:_,opacity:v}=f,y=jG(f,["strokeOpacity","fillOpacity","opacity"]),b=a.type==="line";let S=b?g:_;if(Mt(v)&&(S=(S??1)*v),a.style=Object.assign({opacity:S,pickable:!1,visible:!0},y),b)a.style.stroke=c||d,a.style.lineWidth=le(o,"width",p||2);else{a.style.fill=d||c,!((s=(r=(i=this._spec[e])===null||i===void 0?void 0:i.line)===null||r===void 0?void 0:r.style)===null||s===void 0)&&s.stroke&&(a.style.stroke=this._spec[e].line.style.stroke);const A=le(o,"width");if(typeof A=="string"){const w=parseInt(A.substring(0,A.length-1),10)/100;a.style.sizePercent=w}else typeof A!="number"&&typeof A!="function"||(a.style.size=A)}}if(l.visible){const h=l.labelBackground||{},c=l.style||{},d=h.style||{},{fill:p="rgba(47, 59, 82, 0.9)",stroke:f,outerBorder:g}=d,_=jG(d,["fill","stroke","outerBorder"]);a.label={visible:!0,formatMethod:l.formatMethod,formatter:l.formatter,minWidth:h.minWidth,maxWidth:h.maxWidth,padding:h.padding,textStyle:Object.assign(Object.assign({fontSize:14,pickable:!1},c),{fill:c.fill||"#fff",stroke:le(c,"stroke")}),panel:(Si(h.visible)?h.visible:h)?Object.assign({visible:!0,pickable:!1,fill:p,stroke:f,outerBorder:Object.assign({stroke:p,distance:0,lineWidth:3},g)},_):{visible:!1},zIndex:this.labelZIndex,childrenPickable:!1,pickable:!1}}else a.label={visible:!1};return a}_filterAxisByPoint(t,e,i){return t&&t.forEach(r=>{const s=r.axis;if(m5t(r,e,i)&&t.delete(s.getSpecIndex()),s.type.startsWith("polarAxis")){const a=s.getCenter(),o=s.getInnerRadius(),l=s.getOuterRadius(),u=Ni.distancePP({x:e,y:i},a);(u>l||u<o)&&t.delete(s.getSpecIndex())}}),t}clearOutEvent(){this._timer&&(clearTimeout(this._timer),this._timer=null),this._clickLock&&(this._clickLock=null),this._hasActive&&(this._hasActive=null)}}S5.specKey="crosshair";class NC extends S5{static getSpecInfo(t){const e=t[this.specKey];if(F(e))return;if(!ut(e))return e.xField&&e.xField.visible!==!1||e.yField&&e.yField.visible!==!1?[{spec:e,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:mt.cartesianCrosshair}]:void 0;const i=[];return e.forEach((r,s)=>{(r.xField&&r.xField.visible!==!1||r.yField&&r.yField.visible!==!1)&&i.push({spec:r,specPath:[this.specKey,s],specInfoPath:["component",this.specKey,s],type:mt.cartesianCrosshair})}),i}constructor(t,e){super(t,e),this.type=mt.cartesianCrosshair,this.name=mt.cartesianCrosshair,this._currValueX=new Map,this._currValueY=new Map}_showDefaultCrosshairBySpec(){const{xField:t,yField:e}=this._spec;if(t!=null&&t.visible&&t.defaultSelect){const{axisIndex:i,datum:r}=t.defaultSelect;this._defaultCrosshair(i,r,1)}if(e!=null&&e.visible&&e.defaultSelect){const{axisIndex:i,datum:r}=e.defaultSelect;this._defaultCrosshair(i,r,2)}}_defaultCrosshair(t,e,i){const r=this._option.getComponentsByKey("axes").find(s=>s.getSpecIndex()===t);r&&(i===1?(this._currValueX.clear(),this._currValueX.set(t,{axis:r,value:e})):(this._currValueY.clear(),this._currValueY.set(t,{axis:r,value:e})),this.layoutByValue(i))}_findAllAxisContains(t,e){const i=this._getAxisInfoByField("x"),r=this._getAxisInfoByField("y");return{xAxisMap:this._filterAxisByPoint(i,t,e),yAxisMap:this._filterAxisByPoint(r,t,e)}}_getValueAt(t,e){return t.getScale().invert(e)}clearAxisValue(){this._currValueX.clear(),this._currValueY.clear()}setAxisValue(t,e){Ii(e.getOrient())?this._currValueX.set(e.getSpecIndex(),{value:t,axis:e}):this._currValueY.set(e.getSpecIndex(),{value:t,axis:e})}_getAllAxisValues(t,e,i,r){let s=!1;return t.forEach(a=>{qn(a.axis.getScale().type)&&(s?this.enable=!1:s=!0)}),!!this.enable&&(t.forEach((a,o)=>{const l=a.axis;i.set(o,{value:this._getValueAt(l,e-(r?l.getLayoutStartPoint().x-this.getLayoutStartPoint().x:l.getLayoutStartPoint().y-this.getLayoutStartPoint().y)),axis:l})}),!0)}_layoutCrosshair(t,e,i,r){var s;let a=t,o=e;if(i&&i.length){if(r==="dimension"){const h=i[0],c=h.data.findIndex(p=>p.datum.length>0);let d;if(c>-1){const p=h.data[c];d=p.series.dataToPosition(p.datum[0])}(z(h.dimType)?h.dimType==="y":cl((s=h==null?void 0:h.axis)===null||s===void 0?void 0:s.getOrient()))?o=d==null?void 0:d.y:a=d==null?void 0:d.x}else if(r==="mark"){const h=i[0],c=h.series.dataToPosition(h.datum[0]);a=c==null?void 0:c.x,o=c==null?void 0:c.y}}const{xAxisMap:l,yAxisMap:u}=this._findAllAxisContains(a,o);if(l&&l.size===0||u&&u.size===0){if(this.enableRemain)return;this.hide()}else this._currValueX.clear(),this._currValueY.clear(),l&&l.size&&this._getAllAxisValues(l,a,this._currValueX,!0),u&&u.size&&this._getAllAxisValues(u,o,this._currValueY,!1),this.layoutByValue(3)}hide(){this._xCrosshair&&this._xCrosshair.hideAll(),this._xTopLabel&&this._xTopLabel.hideAll(),this._xBottomLabel&&this._xBottomLabel.hideAll(),this._yCrosshair&&this._yCrosshair.hideAll(),this._yLeftLabel&&this._yLeftLabel.hideAll(),this._yRightLabel&&this._yRightLabel.hideAll()}layoutByValue(t=3){if(!this.enable)return;const e=rp(this._regions,"cartesian");if(!e)return;const{x:i,y:r,offsetWidth:s,offsetHeight:a,bandWidth:o,bandHeight:l}=Rit(t,e,this.getLayoutStartPoint(),this._currValueX,this._currValueY,this._xHair,this._yHair,this.enableRemain,this._cacheXCrossHairInfo,this._cacheYCrossHairInfo);this.enableRemain&&(i&&(this._cacheXCrossHairInfo=Object.assign(Object.assign({},i),{_isCache:!0})),r&&(this._cacheYCrossHairInfo=Object.assign(Object.assign({},r),{_isCache:!0}))),i&&this._layoutVertical(i,o,s),r&&this._layoutHorizontal(r,l,a)}_layoutVertical(t,e,i){var r,s;if(t._isCache&&this.enableRemain||!this._xHair)return;const{x:a,topPos:o,height:l,top:u,bottom:h,visible:c}=t;if(c){const d=this._xHair.type,p=Iit(this._xHair,t,e,i);if(this._updateCrosshair("x",d,p),u.visible){const f=Object.assign(Object.assign(Object.assign({x:a+e/2,y:o},u),this._xHair.label),{textStyle:Object.assign(Object.assign({},(r=this._xHair.label)===null||r===void 0?void 0:r.textStyle),{textAlign:"center",textBaseline:"bottom"}),zIndex:this.labelZIndex,visible:!0});this._updateCrosshairLabel(this._xTopLabel,f,g=>{g.name="crosshair-x-top-label",this._xTopLabel=g})}else this._xTopLabel&&this._xTopLabel.hideAll();if(h.visible){const f=Object.assign(Object.assign(Object.assign({x:a+e/2,y:o+l},h),this._xHair.label),{textStyle:Object.assign(Object.assign({},(s=this._xHair.label)===null||s===void 0?void 0:s.textStyle),{textAlign:"center",textBaseline:"top"}),zIndex:this.labelZIndex,visible:!0});this._updateCrosshairLabel(this._xBottomLabel,f,g=>{g.name="crosshair-x-bottom-label",this._xBottomLabel=g})}else this._xBottomLabel&&this._xBottomLabel.hideAll()}}_layoutHorizontal(t,e,i){var r,s;if(t._isCache&&this.enableRemain||!this._yHair)return;const{leftPos:a,width:o,y:l,left:u,right:h,visible:c}=t;if(c){const d=this._yHair.type,p=Lit(this._yHair,t,e,i);if(this._updateCrosshair("y",d,p),u.visible){const f=Object.assign(Object.assign(Object.assign({x:a,y:l+e/2},u),this._yHair.label),{textStyle:Object.assign(Object.assign({},(r=this._yHair.label)===null||r===void 0?void 0:r.textStyle),{textAlign:"right",textBaseline:"middle"}),zIndex:this.labelZIndex});this._updateCrosshairLabel(this._yLeftLabel,f,g=>{g.name="crosshair-y-left-label",this._yLeftLabel=g})}else this._yLeftLabel&&this._yLeftLabel.hideAll();if(h.visible){const f=Object.assign(Object.assign(Object.assign({x:a+o,y:l+e},h),this._yHair.label),{textStyle:Object.assign(Object.assign({},(s=this._yHair.label)===null||s===void 0?void 0:s.textStyle),{textAlign:"left",textBaseline:"middle"}),zIndex:this.labelZIndex});this._updateCrosshairLabel(this._yRightLabel,f,g=>{g.name="crosshair-y-right-label",this._yRightLabel=g})}else this._yRightLabel&&this._yRightLabel.hideAll()}}_parseFieldInfo(){const{xField:t,yField:e}=this._spec;t&&t.visible&&(this._xHair=this._parseField(t,"xField")),e&&e.visible&&(this._yHair=this._parseField(e,"yField"))}_updateCrosshair(t,e,i){const r=this.getContainer();let s;if(s=t==="x"?this._xCrosshair:this._yCrosshair,s)s.setAttributes(i);else{const a=t==="x"?this._xHair.style:this._yHair.style;e==="line"?s=new C1(Object.assign(Object.assign({},i),{lineStyle:a,zIndex:this.gridZIndex+1,disableTriggerEvent:this._option.disableTriggerEvent,pickable:!1})):e==="rect"&&(s=new j2(Object.assign(Object.assign({},i),{rectStyle:a,zIndex:this.gridZIndex,disableTriggerEvent:this._option.disableTriggerEvent,pickable:!1}))),r==null||r.add(s),t==="x"?this._xCrosshair=s:this._yCrosshair=s}}_updateCrosshairLabel(t,e,i){const r=this.getContainer();t?t.setAttributes(e):(i(t=new ro(e)),r==null||r.add(t)),Oit(t,this._getLimitBounds())}_getNeedClearVRenderComponents(){return[this._xCrosshair,this._xTopLabel,this._xBottomLabel,this._yCrosshair,this._yLeftLabel,this._yRightLabel]}}NC.specKey="crosshair",NC.type=mt.cartesianCrosshair;const TUt=()=>{Z.registerComponent(NC.type,NC)};var NG=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};const MUt=(n,t,e,i,r,s=!1,a,o)=>{let l={x:0,y:0,center:{x:0,y:0},radius:0,distance:0,startAngle:0,endAngle:0,innerRadius:0,visible:!1,label:{visible:!1,text:"",offset:0}},u={x:0,y:0,center:{x:0,y:0},radius:0,distance:0,startAngle:0,endAngle:0,innerRadius:0,visible:!1,sides:n.angleAxisHelper.getScale(0).domain().length,label:{visible:!1,text:"",offset:0}};if(i){l.visible=!!t.size;const h=n.angleAxisHelper.getBandwidth(0);t.forEach(c=>{var d,{axis:p,value:f,coord:g}=c,_=NG(c,["axis","value","coord"]);f=f??"",Ut(l,_);const v=n.angleAxisHelper.dataToPosition([f]);l.angle=v;const y=p.niceLabelFormatter;!((d=i.label)===null||d===void 0)&&d.visible&&(l.label.visible=!0,l.label.defaultFormatter=y,l.label.text=f,l.label.offset=Oy(p.getSpec())),l.startAngle=v-h/2,l.endAngle=v+h/2})}if(r&&(u.visible=!!e.size,e.forEach(h=>{var c,{axis:d,value:p,coord:f}=h,g=NG(h,["axis","value","coord"]);p=p??"";const _=d.niceLabelFormatter;!((c=r.label)===null||c===void 0)&&c.visible&&(u.label.visible=!0,u.label.defaultFormatter=_,u.label.text=p,u.label.offset=Oy(d.getSpec())),u.angle=f.angle,u.axis=d,Ut(u,g)})),s&&!l.visible&&z(a))l=a;else if(l.label.visible&&i&&i.label){const{label:h}=l,{formatMethod:c,formatter:d}=i.label,{formatFunc:p,args:f}=Lu(c,d,h.text,{label:h.text,orient:"angle"});p?h.text=p(...f):h.defaultFormatter&&(h.text=h.defaultFormatter(h.text))}if(s&&!u.visible&&z(o))u=o;else if(u.label.visible&&r&&r.label){const{label:h}=u,{formatMethod:c,formatter:d}=r.label,{formatFunc:p,args:f}=Lu(c,d,h.text,{label:h.text,orient:"radius"});p?h.text=p(...f):h.defaultFormatter&&(h.text=h.defaultFormatter(h.text))}return{angle:l,radius:u}},PUt=(n,t)=>{const{angle:e,innerRadius:i,radius:r,startAngle:s,endAngle:a,center:o}=t;let l;return l=(n.type==="rect"?"sector":"line")=="sector"?{center:o,innerRadius:i,radius:r,startAngle:s,endAngle:a}:{start:un(o,i,e),end:un(o,r,e)},l},EUt=(n,t)=>{const{center:e,startAngle:i,endAngle:r,distance:s,sides:a,axis:o,point:l,radius:u,innerRadius:h}=t;let c=s;if((n.smooth?"circle":"polygon")=="polygon"){const d=o.getCenter(),p=bA(d,l),f=(r-i)/a,g=Math.floor((p-i)/f),_=g*f+i,v=Math.min((g+1)*f+i,r),y=un(d,s,_),b=un(d,s,v),S=Gq([b.x,b.y],[y.x,y.y],[d.x,d.y],[l.x,l.y]);S&&(c=Zi(Ni.distancePN(l,S[0],S[1])+s,h,u))}return{center:e,startAngle:i,endAngle:r,radius:c,sides:a}};class zC extends S5{static getSpecInfo(t){const e=t[this.specKey];if(F(e))return;if(!ut(e))return e.categoryField&&e.categoryField.visible!==!1||e.valueField&&e.valueField.visible!==!1?[{spec:e,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:mt.polarCrosshair}]:void 0;const i=[];return e.forEach((r,s)=>{(r.categoryField&&r.categoryField.visible!==!1||r.valueField&&r.valueField.visible!==!1)&&i.push({spec:r,specPath:[this.specKey,s],specInfoPath:["component",this.specKey,s],type:mt.polarCrosshair})}),i}constructor(t,e){super(t,e),this.type=mt.polarCrosshair,this.name=mt.polarCrosshair,this._currValueAngle=new Map,this._currValueRadius=new Map}_showDefaultCrosshairBySpec(){const{categoryField:t,valueField:e}=this._spec;if(t!=null&&t.visible&&t.defaultSelect){const{axisIndex:i,datum:r}=t.defaultSelect;this._defaultCrosshair(i,r,1)}if(e!=null&&e.visible&&e.defaultSelect){const{axisIndex:i,datum:r}=e.defaultSelect;this._defaultCrosshair(i,r,2)}}_defaultCrosshair(t,e,i){const r=this._option.getComponentsByKey("axes").find(s=>s.getSpecIndex()===t);if(r){if(i===1){this._currValueAngle.clear();const s={angle:r.valueToPosition(e),radius:r.getOuterRadius()},a=r.coordToPoint(s);this._currValueAngle.set(t,this._getValueByAxis(r,a))}else{this._currValueRadius.clear();const s={angle:r.startAngle,radius:r.valueToPosition(e)},a=r.coordToPoint(s);this._currValueRadius.set(t,this._getValueByAxis(r,a))}this.layoutByValue(3)}}hide(){this._radiusCrosshair&&this._radiusCrosshair.hideAll(),this._radiusLabelCrosshair&&this._radiusLabelCrosshair.hideAll(),this._angleCrosshair&&this._angleCrosshair.hideAll(),this._angleLabelCrosshair&&this._angleLabelCrosshair.hideAll()}_findAllAxisContains(t,e){const i=this._getAxisInfoByField("category"),r=this._getAxisInfoByField("value");return{angleAxisMap:this._filterAxisByPoint(i,t,e),radiusAxisMap:this._filterAxisByPoint(r,t,e)}}_getAllAxisValues(t,e,i){let r=!1;return t.forEach(s=>{qn(s.axis.getScale().type)&&(r?this.enable=!1:r=!0)}),!!this.enable&&(t.forEach((s,a)=>{const o=s.axis;i.set(a,this._getValueByAxis(o,e))}),!0)}_getValueByAxis(t,e){const{x:i,y:r}=t.getLayoutStartPoint(),{x:s,y:a}=this.getLayoutStartPoint(),o=t.positionToData({x:e.x-(i-s),y:e.y-(r-a)}),l={x:t.getCenter().x+this.getLayoutStartPoint().x,y:t.getCenter().y+this.getLayoutStartPoint().y};return{value:o,axis:t,center:l,innerRadius:t.getInnerRadius(),radius:t.getOuterRadius(),startAngle:t.startAngle,endAngle:t.endAngle,distance:Ni.distancePP(e,t.getCenter()),coord:t.pointToCoord(e),point:e}}_layoutCrosshair(t,e,i,r){let s=t,a=e;if(i&&i.length){if(r==="dimension"){const u=i[0];if(u.axis){const h=u.axis.pointToCoord({x:s,y:a}),c=u.axis.getOrient()==="radius"?{radius:u.position,angle:h.angle}:{radius:h.radius,angle:u.position},d=u.axis.coordToPoint(c);s=d.x,a=d.y}}else if(r==="mark"){const u=i[0],h=u.series.dataToPosition(u.datum[0]);s=h.x,a=h.y}}const{angleAxisMap:o,radiusAxisMap:l}=this._findAllAxisContains(s,a);if(o.size!==0||l.size!==0)this._currValueAngle.clear(),this._currValueRadius.clear(),o&&this._getAllAxisValues(o,{x:s,y:a},this._currValueAngle),l&&this._getAllAxisValues(l,{x:s,y:a},this._currValueRadius),this.layoutByValue(3);else{if(this.enableRemain)return;this.hide()}}layoutByValue(t=3){if(!this.enable)return;const e=rp(this._regions,"polar");if(!e)return;const{angle:i,radius:r}=MUt(e,this._currValueAngle,this._currValueRadius,this._angleHair,this._radiusHair,this.enableRemain,this._cacheAngleCrossHairInfo,this._cacheRadiusCrossHairInfo);this.enableRemain&&(this._cacheAngleCrossHairInfo=Object.assign(Object.assign({},i),{_isCache:!0}),this._cacheRadiusCrossHairInfo=Object.assign(Object.assign({},r),{_isCache:!0})),t&&(this._layoutRadius(r),this._layoutAngle(i))}_layoutAngle(t){var e;if(t._isCache&&this.enableRemain)return;const i=this.getContainer(),{angle:r,radius:s,label:a,center:o,visible:l}=t;if(l){const u=this._angleHair.type==="rect"?"sector":"line",h=PUt(this._angleHair,t);if(this._angleCrosshair)this._angleCrosshair.setAttributes(h);else{let c;u==="line"?c=new C1(Object.assign(Object.assign({},h),{lineStyle:this._angleHair.style,zIndex:this.gridZIndex,pickable:!1})):u==="sector"&&(c=new z2(Object.assign(Object.assign({},h),{sectorStyle:this._angleHair.style,zIndex:this.gridZIndex,pickable:!1}))),this._angleCrosshair=c,i.add(c)}if(a.visible){const c=h3t(r),d=Object.assign(Object.assign(Object.assign(Object.assign({},un(o,s+a.offset,r)),this._angleHair.label),a),{textStyle:Object.assign(Object.assign({},(e=this._angleHair.label)===null||e===void 0?void 0:e.textStyle),{textAlign:c.align,textBaseline:c.baseline}),zIndex:this.labelZIndex});this._updateCrosshairLabel(this._angleLabelCrosshair,d,p=>{p.name="crosshair-angle-label",this._angleLabelCrosshair=p})}else this._angleLabelCrosshair&&this._angleLabelCrosshair.hideAll()}}_layoutRadius(t){var e;if(t._isCache&&this.enableRemain)return;const{center:i,startAngle:r,label:s,visible:a}=t,o=this.getContainer();if(a){const l=this._radiusHair.smooth?"circle":"polygon",u=EUt(this._radiusHair,t),h=u.radius;if(this._radiusCrosshair)this._radiusCrosshair.setAttributes(u);else{let c;c=l==="polygon"?new H2(Object.assign(Object.assign({},u),{lineStyle:this._radiusHair.style,zIndex:this.gridZIndex+1})):new N2(Object.assign(Object.assign({},u),{lineStyle:this._radiusHair.style,zIndex:this.gridZIndex})),this._radiusCrosshair=c,o.add(c)}if(s.visible){const c=b5t(r),d=Object.assign(Object.assign(Object.assign(Object.assign({},un(i,h,r)),this._radiusHair.label),s),{textStyle:Object.assign(Object.assign({},(e=this._radiusHair.label)===null||e===void 0?void 0:e.textStyle),{textAlign:c.align,textBaseline:c.baseline}),zIndex:this.labelZIndex});this._updateCrosshairLabel(this._radiusLabelCrosshair,d,p=>{p.name="crosshair-radius-label",this._radiusLabelCrosshair=p})}else this._radiusLabelCrosshair&&this._radiusLabelCrosshair.hideAll()}}_parseFieldInfo(){var t;const{categoryField:e,valueField:i}=this._spec;e&&e.visible&&(this._angleHair=this._parseField(e,"categoryField")),i&&i.visible&&(this._radiusHair=this._parseField(i,"valueField"),this._radiusHair.smooth=(t=i==null?void 0:i.line)===null||t===void 0?void 0:t.smooth)}_updateCrosshairLabel(t,e,i){const r=this.getContainer();t?t.setAttributes(e):(t=new ro(e),r==null||r.add(t),i(t)),Oit(t,this._getLimitBounds())}_getNeedClearVRenderComponents(){return[this._radiusCrosshair,this._radiusLabelCrosshair,this._angleCrosshair,this._angleLabelCrosshair]}}zC.specKey="crosshair",zC.type=mt.polarCrosshair;const OUt=()=>{Z.registerComponent(zC.type,zC)},RUt=(n,t)=>{const{getNewDomain:e,isContinuous:i,field:r}=t,s=r(),a=e();if(F(a)||F(s))return n;if(a.length===0)return[];const o={};a.forEach(u=>{o[u]||(o[u]=1)});let l=null;return l=i()?u=>u[s]>=a[0]&&u[s]<=a[1]:u=>o[u[s]+""]||o[u[s]],n.filter(l)},IUt=(n,t)=>{const{stateFields:e,valueFields:i,dataCollection:r}=t.input,{stateField:s,valueField:a}=t.output,o={},l=[];return r.forEach((u,h)=>{var c;if(F(e[h]))return;const d=(c=u.getFields())===null||c===void 0?void 0:c[e[h]];d&&d.lockStatisticsByDomain&&d.domain.forEach(p=>{o[p]=0}),u.latestData.forEach(p=>{ot(e[h]).forEach(f=>{F(p[f])||(F(o[p[f]])&&(o[p[f]]=0),F(i[h])||(o[p[f]]+=isNaN(parseFloat(p[i[h]]))?1:parseFloat(p[i[h]])))})})}),Object.keys(o).forEach((u,h)=>{const c={[s]:u};a&&(c[a]=o[u]),l.push(c)}),l};class A5 extends bs{get relatedAxisComponent(){return this._relatedAxisComponent}setStartAndEnd(t,e,i=["percent","percent"]){const[r="percent",s="percent"]=i,a=r==="percent"?t:this.dataToStatePoint(t),o=s==="percent"?e:this.dataToStatePoint(e);this._handleChange(a,o,!0)}enableInteraction(){this._activeRoam=!0}disableInteraction(){this._activeRoam=!1}zoomIn(t){this._handleChartZoom({zoomDelta:1.2,zoomX:t==null?void 0:t.x,zoomY:t==null?void 0:t.y})}zoomOut(t){this._handleChartZoom({zoomDelta:.8,zoomX:t==null?void 0:t.x,zoomY:t==null?void 0:t.y})}_handleChange(t,e,i){var r,s;(s=(r=this._spec)===null||r===void 0?void 0:r.zoomLock)!==null&&s!==void 0&&s||e-t!==this._spanCache&&(e-t<this._minSpan||e-t>this._maxSpan)?this._shouldChange=!1:(this._shouldChange=!0,this._spanCache=e-t)}_isReverse(){const t=this._relatedAxisComponent;if(!t)return!1;const e=t.getScale();return e.range()[0]>e.range()[1]&&(!t.getInverse()||this._isHorizontal)}_updateRangeFactor(t){const e=this._relatedAxisComponent.getScale(),i=this._isReverse(),r=i?[1-this._end,1-this._start]:[this._start,this._end];if(i)switch(t){case"startHandler":e.rangeFactorEnd(r[1]);break;case"endHandler":e.rangeFactorStart(r[0]);break;default:e.rangeFactorStart(r[0],!0),e.rangeFactorEnd(r[1])}else switch(t){case"startHandler":e.rangeFactorStart(r[0]);break;case"endHandler":e.rangeFactorEnd(r[1]);break;default:e.rangeFactorEnd(r[1],!0),e.rangeFactorStart(r[0])}const s=e.rangeFactor();s?(this._start=i?1-s[1]:s[0],this._end=i?1-s[0]:s[1]):(this._start=0,this._end=1)}get visible(){return this._visible}constructor(t,e){super(t,e),this.layoutType="none",this._orient="left",this._cacheVisibility=void 0,this._dataUpdating=!1,this._shouldChange=!0,this._stateField="x",this._activeRoam=!0,this._zoomAttr={enable:!0,rate:1,focus:!0},this._dragAttr={enable:!0,rate:1,reverse:!0},this._scrollAttr={enable:!0,rate:1,reverse:!0},this.effect={onZoomChange:i=>{var r,s;const a=this._relatedAxisComponent;if(a&&this._filterMode==="axis"){const o=a.getScale(),l=a.getSpec();this._auto&&this._getAxisBandSize(l)&&this._spec.ignoreBandSize&&(o.bandwidth("auto"),o.maxBandwidth("auto"),o.minBandwidth("auto")),this._updateRangeFactor(i),this._auto&&((s=(r=this._component)===null||r===void 0?void 0:r.setStartAndEnd)===null||s===void 0||s.call(r,this._start,this._end)),a.effect.scaleUpdate()}else zi(this._regions,o=>{var l;(l=o.getViewData())===null||l===void 0||l.markRunning()},{userId:this._seriesUserId,specIndex:this._seriesIndex}),zi(this._regions,o=>{o.reFilterViewData()},{userId:this._seriesUserId,specIndex:this._seriesIndex})}},this._visible=!0,this._handleStateChange=(i,r,s)=>{var a,o;return this._startValue=i,this._endValue=r,this._newDomain=this._parseDomainFromState(this._startValue,this._endValue),(o=(a=this.effect).onZoomChange)===null||o===void 0||o.call(a,s),!0},this._handleChartZoom=i=>{var r,s;if(!this._activeRoam)return;const{zoomDelta:a,zoomX:o,zoomY:l}=i,{x:u,y:h}=this._regions[0].getLayoutStartPoint(),{width:c,height:d}=this._regions[0].getLayoutRect(),p=Math.abs(this._start-this._end),f=(s=(r=this._spec.roamZoom)===null||r===void 0?void 0:r.rate)!==null&&s!==void 0?s:1;if(p>=1&&a<1||p<=.01&&a>1)return;const g=this._isHorizontal?o:l,_=p*(a-1)*f;let v=_/2,y=_/2;if(g){const A=this._isHorizontal?u:h,w=this._isHorizontal?c:d;v=Math.abs(A-g)/Math.abs(w-A)*_,y=Math.abs(w-g)/Math.abs(w-A)*_}const b=Zi(this._start+v,0,1),S=Zi(this._end-y,0,1);this._handleChange(Math.min(b,S),Math.max(b,S),!0)},this._handleChartScroll=(i,r)=>{var s;if(!this._activeRoam)return!1;const{scrollX:a,scrollY:o}=i;let l=this._isHorizontal?a:o;const u=this._isHorizontal?Ie(a/o)>=.5:Ie(o/a)>=.5;this._scrollAttr.reverse||(l=-l),u&&this._handleChartMove(l,(s=this._scrollAttr.rate)!==null&&s!==void 0?s:1);const h=this._start!==0&&this._end!==1;return u&&h},this._handleChartDrag=(i,r)=>{var s;if(!this._activeRoam)return;const[a,o]=i;let l=this._isHorizontal?a:o;this._dragAttr.reverse&&(l=-l),this._handleChartMove(l,(s=this._dragAttr.rate)!==null&&s!==void 0?s:1)},this._handleChartMove=(i,r)=>{const s=this._isHorizontal?this.getLayoutRect().width:this.getLayoutRect().height;if(Math.abs(i)>=1e-6){if(i>0&&this._end<1){const a=Math.min(1-this._end,i/s)*r;this._handleChange(this._start+a,this._end+a,!0)}else if(i<0&&this._start>0){const a=Math.max(-this._start,i/s)*r;this._handleChange(this._start+a,this._end+a,!0)}}return!1},this._orient=cd(t),this._isHorizontal=ait(this._orient)==="horizontal"}created(){super.created(),this._setAxisFromSpec(),this._setRegionsFromSpec(),this._initEvent(),this._initData(),this._initStateScale(),this._setStateFromSpec()}initLayout(){super.initLayout(),this._layout&&(this._layout.layoutOrient=this._orient)}_setAxisFromSpec(){if(z(this._spec.axisId)?this._relatedAxisComponent=this._option.getComponentByUserId(this._spec.axisId):z(this._spec.axisIndex)&&(this._relatedAxisComponent=this._option.getComponentByIndex("axes",this._spec.axisIndex)),F(this._spec.field)&&!this._relatedAxisComponent){const t=this._option.getComponentsByKey("axes"),e=t.find(i=>i._orient===this._orient);if(e)this._relatedAxisComponent=e;else{const i=t.find(r=>!ti(r.getScale().type));this._relatedAxisComponent=i}}this._relatedAxisComponent&&this._filterMode==="axis"&&(this._relatedAxisComponent.autoIndentOnce=!0)}_setRegionsFromSpec(){var t,e;this._regions=this._relatedAxisComponent?this._relatedAxisComponent.getRegions():this._option.getAllRegions();const i=this._relatedAxisComponent?(e=(t=this._relatedAxisComponent).getBindSeriesFilter)===null||e===void 0?void 0:e.call(t):null;if(z(i)&&(z(i.userId)&&(this._seriesUserId=ot(i.userId)),z(i.specIndex)&&(this._seriesIndex=ot(i.specIndex))),z(this._spec.seriesId)){const r=ot(this._spec.seriesId);this._seriesUserId?this._seriesUserId=this._seriesUserId.filter(s=>r.includes(s)):this._seriesUserId=r}if(z(this._spec.seriesIndex)){const r=ot(this._spec.seriesIndex);this._seriesIndex?this._seriesIndex=this._seriesIndex.filter(s=>r.includes(s)):this._seriesIndex=r}if(z(this._spec.regionIndex)){const r=this._option.getRegionsInIndex(ot(this._spec.regionIndex));this._regions=this._regions.filter(s=>r.includes(s))}else if(z(this._spec.regionId)){const r=ot(this._spec.regionId);this._regions=r.length?this._regions.filter(s=>r.includes(s.id)):[]}}onDataUpdate(){var t;const e=this._computeDomainOfStateScale(ti(this._stateScale.type));this._stateScale.domain(e,!0),this._handleChange(this._start,this._end,!0),this._spec.auto&&(this._dataUpdating=!0,(t=this.getChart())===null||t===void 0||t.setLayoutTag(!0,null,!1))}_computeDomainOfStateScale(t){if(this._spec.customDomain)return this._spec.customDomain;const e=this._data.getLatestData().map(i=>i[this._stateField]);if(t){const i=e.map(r=>1*r);return e.length?[dn(i),Vi(i)]:[-1/0,1/0]}return e}_initEvent(){this._initCommonEvent()}_initData(){const t=[],e=[],i=[];if(this._relatedAxisComponent){const a={};zi(this._regions,o=>{var l,u;const h=o.coordinate==="cartesian"?o.getXAxisHelper():o.coordinate==="polar"?o.angleAxisHelper:null,c=o.coordinate==="cartesian"?o.getYAxisHelper():o.coordinate==="polar"?o.radiusAxisHelper:null;if(!h||!c)return;const d=h.getAxisId()===this._relatedAxisComponent.id?h:c.getAxisId()===this._relatedAxisComponent.id?c:this._isHorizontal?h:c,p=d===h?c:h,f=ti(p.getScale(0).type);t.push(o.getRawData());const g=o.getSpec(),_=ot(g.xField),v=ot(g.yField),y=o.coordinate==="cartesian"?_[0]:(l=g.angleField)!==null&&l!==void 0?l:g.categoryField,b=o.coordinate==="cartesian"?v[0]:(u=g.radiusField)!==null&&u!==void 0?u:g.valueField;if(a[o.id]=o.type==="link"?"from_xField":d===h?y:b,e.push(a[o.id]),this._valueField){const S=o.type==="link"?"from_yField":p===h?y:b;i.push(f?S:null)}},{userId:this._seriesUserId,specIndex:this._seriesIndex}),this._originalStateFields=a}else zi(this._regions,a=>{t.push(a.getRawData()),e.push(this._field),this._valueField&&i.push(this._spec.valueField)},{userId:this._seriesUserId,specIndex:this._seriesIndex});const{dataSet:r}=this._option;vu(r,"dataview",f2),ie(r,"dataFilterComputeDomain",IUt);const s=new Le(r,{name:`${this.type}_${this.id}_data`});s.transform({type:"dataFilterComputeDomain",options:{input:{dataCollection:t,stateFields:e,valueFields:i},output:{stateField:this._stateField,valueField:this._valueField}}},!1),this._data=new Cl(this._option,s),s.reRunAllTransform(),r.multipleDataViewAddListener(t,"change",this._handleDataCollectionChange.bind(this))}setAttrFromSpec(){var t;super.setAttrFromSpec(),this._spec.roamZoom===!0||this._spec.roamZoom?this._zoomAttr=gt({},this._zoomAttr,this._spec.roamZoom):this._zoomAttr.enable=!1,this._spec.roamDrag===!0||this._spec.roamDrag?this._dragAttr=gt({},this._dragAttr,this._spec.roamDrag):this._dragAttr.enable=!1,this._spec.roamScroll===!0||this._spec.roamScroll?this._scrollAttr=gt({},this._scrollAttr,this._spec.roamScroll):this._scrollAttr.enable=!1,this._field=this._spec.field,this._width=this._computeWidth(),this._height=this._computeHeight(),this._visible=(t=this._spec.visible)===null||t===void 0||t}_statePointToData(t){const e=this._stateScale,i=e.domain();if(ti(e.type))return this._isReverse()?i[0]+(i[1]-i[0])*(1-t):i[0]+(i[1]-i[0])*t;let r=e.range();this._isReverse()&&(r=r.slice().reverse());const s=r[0]+(r[1]-r[0])*t;return e.invert(s)}dataToStatePoint(t){const e=this._stateScale,i=e.scale(t);let r=e.range();return!this._isHorizontal&&ti(e.type)&&(r=r.slice().reverse()),(i-r[0])/(r[1]-r[0])}_modeCheck(t,e){return t==="start"?e==="percent"&&this._spec.start||e==="value"&&this._spec.startValue:e==="percent"&&this._spec.end||e==="value"&&this._spec.endValue}_setStateFromSpec(){var t,e;let i,r;if(this._auto=!!this._spec.auto,this._spec.rangeMode){const[s,a]=this._spec.rangeMode;this._modeCheck("start",s)&&this._modeCheck("end",a)&&(i=s==="percent"?this._spec.start:this.dataToStatePoint(this._spec.startValue),r=a==="percent"?this._spec.end:this.dataToStatePoint(this._spec.endValue))}else i=this._spec.start?this._spec.start:this._spec.startValue?this.dataToStatePoint(this._spec.startValue):0,r=this._spec.end?this._spec.end:this._spec.endValue?this.dataToStatePoint(this._spec.endValue):1;this._startValue=this._statePointToData(i),this._endValue=this._statePointToData(r),this._start=i,this._end=r,this._minSpan=(t=this._spec.minSpan)!==null&&t!==void 0?t:0,this._maxSpan=(e=this._spec.maxSpan)!==null&&e!==void 0?e:1,ti(this._stateScale.type)&&this._stateScale.domain()[0]!==this._stateScale.domain()[1]&&(this._spec.minValueSpan&&(this._minSpan=this._spec.minValueSpan/(this._stateScale.domain()[1]-this._stateScale.domain()[0])),this._spec.maxValueSpan&&(this._maxSpan=this._spec.maxValueSpan/(this._stateScale.domain()[1]-this._stateScale.domain()[0]))),this._minSpan=Math.max(0,this._minSpan),this._maxSpan=Math.min(this._maxSpan,1),this._relatedAxisComponent&&this._filterMode==="axis"||this._start===0&&this._end===1||(this._newDomain=this._parseDomainFromState(this._startValue,this._endValue))}_parseFieldOfSeries(t){var e;return(e=this._originalStateFields)===null||e===void 0?void 0:e[t.id]}_initStateScale(){const t=[0,1];if(this._relatedAxisComponent){const e=this._relatedAxisComponent.getScale(),i=ti(e.type),r=this._computeDomainOfStateScale(i);if(this._stateScale=e.clone(),i){const s=r.map(a=>1*a);this._stateScale.domain(r.length?[dn(s),Vi(s)]:[0,1],!0).range(t)}else this._stateScale.domain(r,!0).range(t)}else this._stateScale=new kp,this._stateScale.domain(this._computeDomainOfStateScale(),!0).range(t)}init(t){super.init(t),this._addTransformToSeries(),this._start===0&&this._end===1||this.effect.onZoomChange()}_addTransformToSeries(){this._relatedAxisComponent&&this._filterMode==="axis"||(ie(this._option.dataSet,"dataFilterWithNewDomain",RUt),zi(this._regions,t=>{t.addViewDataFilter({type:"dataFilterWithNewDomain",options:{getNewDomain:()=>this._newDomain,field:()=>{var e;return(e=this._field)!==null&&e!==void 0?e:this._parseFieldOfSeries(t)},isContinuous:()=>ti(this._stateScale.type)},level:$o.dataZoomFilter})},{userId:this._seriesUserId,specIndex:this._seriesIndex}))}onRender(t){}_compareSpec(t,e){const i=super._compareSpec(t,e);return i.reMake||mi(e,t)||(i.reRender=!0,i.reMake=!0),i}reInit(t){super.reInit(t),this._marks.forEach(e=>{e.getMarks().forEach(i=>{this.initMarkStyleWithSpec(i,this._spec[i.name])})})}changeRegions(){}update(t){}resize(t){}_parseDomainFromState(t,e){if(ti(this._stateScale.type))return[Math.min(e,t),Math.max(e,t)];const i=this._stateScale.domain(),r=i.indexOf(t),s=i.indexOf(e);return i.slice(Math.min(r,s),Math.max(r,s)+1)}_initCommonEvent(){var t,e,i,r,s,a,o;const l={delayType:(e=(t=this._spec)===null||t===void 0?void 0:t.delayType)!==null&&e!==void 0?e:"throttle",delayTime:z((i=this._spec)===null||i===void 0?void 0:i.delayType)?(s=(r=this._spec)===null||r===void 0?void 0:r.delayTime)!==null&&s!==void 0?s:30:0,realTime:(o=(a=this._spec)===null||a===void 0?void 0:a.realTime)===null||o===void 0||o};this._zoomAttr.enable&&this.initZoomEventOfRegions(this._regions,null,this._handleChartZoom,l),this._scrollAttr.enable&&this.initScrollEventOfRegions(this._regions,null,this._handleChartScroll,l),this._dragAttr.enable&&this.initDragEventOfRegions(this._regions,null,this._handleChartDrag,l)}updateLayoutAttribute(){this._visible&&this._createOrUpdateComponent(),super.updateLayoutAttribute()}onLayoutStart(t,e,i){super.onLayoutStart(t,e,i);const r=this._autoUpdate(t),s=this._isHorizontal?"height":"width";this.layout.setLayoutRect({[s]:r?this[`_${s}`]:0},{[s]:kt.Built_In}),this._dataUpdating=!1}getBoundsInRect(t){const e={x1:this.getLayoutStartPoint().x,y1:this.getLayoutStartPoint().y,x2:0,y2:0};return this._isHorizontal?(e.y2=e.y1+this._height,e.x2=e.x1+t.width):(e.x2=e.x1+this._width,e.y2=e.y1+t.height),e}hide(){var t;(t=this._component)===null||t===void 0||t.hideAll()}show(){var t;(t=this._component)===null||t===void 0||t.showAll()}_getAxisBandSize(t){const e=t==null?void 0:t.bandSize,i=t==null?void 0:t.maxBandSize,r=t==null?void 0:t.minBandSize;if(e||r||i)return{bandSize:e,maxBandSize:i,minBandSize:r}}_autoUpdate(t){var e,i,r,s,a,o;if(!this._auto)return this._cacheVisibility=void 0,!0;const l=this._relatedAxisComponent,u=l==null?void 0:l.getSpec(),h=l==null?void 0:l.getScale(),c=this._getAxisBandSize(u);if(!this._dataUpdating&&qn(h.type)&&(t==null?void 0:t.height)===((e=this._cacheRect)===null||e===void 0?void 0:e.height)&&(t==null?void 0:t.width)===((i=this._cacheRect)===null||i===void 0?void 0:i.width)&&this._fixedBandSize===(c==null?void 0:c.bandSize))return this._cacheVisibility;let d=!0;if(this._isHorizontal&&(t==null?void 0:t.width)!==((r=this._cacheRect)===null||r===void 0?void 0:r.width)?h.range(l.getInverse()?[t.width,0]:[0,t.width]):(t==null?void 0:t.height)!==((s=this._cacheRect)===null||s===void 0?void 0:s.height)&&h.range(l.getInverse()?[0,t.height]:[t.height,0]),this._cacheRect={width:t==null?void 0:t.width,height:t==null?void 0:t.height},this._fixedBandSize=c==null?void 0:c.bandSize,qn(h.type)){c&&(this._start||this._end)&&(this.type===mt.scrollBar&&(this._start=0,this._end=1),this._updateRangeFactor());const[p,f]=(a=h.rangeFactor())!==null&&a!==void 0?a:[];d=(!F(p)||!F(f))&&!(p===0&&f===1)}else{const[p,f]=(o=h.rangeFactor())!==null&&o!==void 0?o:[this._start,this._end];d=!(p===0&&f===1)}return this.setStartAndEnd(this._start,this._end),d?this.show():this.hide(),this._cacheVisibility=d,d}_getNeedClearVRenderComponents(){return[this._component]}}On(A5,a5);class Prt extends L1{_mergeThemeToSpec(t,e){const i=this._theme;let r=t;if(this._shouldMergeThemeToSpec()){const s=o=>{const l=Ut({selectedBackgroundChart:{line:{},area:{}}},this._theme,o),{selectedBackgroundChart:u={}}=o,{line:h,area:c}=u;return h&&h.visible!==!1&&(l.selectedBackgroundChart.line.style=Object.assign(Object.assign({},l.selectedBackgroundChart.line.style),{visible:!0})),c&&c.visible!==!1&&(l.selectedBackgroundChart.area.style=Object.assign(Object.assign({},l.selectedBackgroundChart.area.style),{visible:!0})),l},a=t;r=ut(a)?a.map(o=>s(o)):s(a)}return this._adjustPadding(r),{spec:r,theme:i}}}class y_ extends A5{static getSpecInfo(t){const e=t[this.specKey];if(F(e))return;if(!ut(e))return[{spec:e,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:mt.dataZoom}];const i=[];return e.forEach((r,s)=>{i.push({spec:r,specPath:[this.specKey,s],specInfoPath:["component",this.specKey,s],type:mt.dataZoom})}),i}constructor(t,e){var i;super(t,e),this.type=mt.dataZoom,this.name=mt.dataZoom,this.transformerConstructor=Prt,this.specKey="dataZoom",this.layoutZIndex=ai.DataZoom,this.layoutLevel=Wo.DataZoom,this.layoutType="region-relative",this._isReverseCache=!1,this._dataToPositionX=r=>{const s=this._orient==="left"?this._middleHandlerSize:0,a=this._isHorizontal?this._startHandlerSize/2:0,o=this._isHorizontal?this._stateScale:this._valueScale,l=this._isHorizontal?this._stateField:this._valueField;return o.scale(r[l])+this.getLayoutStartPoint().x+s+a},this._dataToPositionX2=r=>{const s=this._orient==="left"?this._middleHandlerSize:0,a=this._isHorizontal?this._startHandlerSize/2:0,o=this._isHorizontal?this._stateScale:this._valueScale,l=o.domain()[0];return o.scale(l)+this.getLayoutStartPoint().x+s+a},this._dataToPositionY=r=>{const s=this._isHorizontal?this._middleHandlerSize:0,a=this._isHorizontal?0:this._startHandlerSize/2,o=this._isHorizontal?this._valueScale:this._stateScale,l=this._isHorizontal?this._valueField:this._stateField;return o.scale(r[l])+this.getLayoutStartPoint().y+s+a},this._dataToPositionY2=r=>{const s=this._isHorizontal?this._middleHandlerSize:0,a=this._isHorizontal?0:this._startHandlerSize/2,o=this._isHorizontal?this._valueScale:this._stateScale,l=o.domain()[0];return o.scale(l)+this.getLayoutStartPoint().y+s+a},this._valueField="y",this._filterMode=(i=t.filterMode)!==null&&i!==void 0?i:"filter"}created(){super.created(),this._initValueScale()}setAttrFromSpec(){var t,e,i,r,s,a,o,l,u,h;super.setAttrFromSpec(),Si(this._spec.roam)&&(this._zoomAttr.enable=this._spec.roam,this._dragAttr.enable=this._spec.roam,this._scrollAttr.enable=this._spec.roam),(this._zoomAttr.enable||this._dragAttr.enable||this._scrollAttr.enable)&&this.initZoomable(this.event,this._option.mode),this._backgroundSize=(e=(t=this._spec.background)===null||t===void 0?void 0:t.size)!==null&&e!==void 0?e:30,this._middleHandlerSize=this._computeMiddleHandlerSize(),this._width=this._computeWidth(),this._height=this._computeHeight(),F((s=(r=(i=this._spec)===null||i===void 0?void 0:i.startHandler)===null||r===void 0?void 0:r.style)===null||s===void 0?void 0:s.size)&&(this._spec.startHandler.style.size=this._isHorizontal?this._height-this._middleHandlerSize:this._width-this._middleHandlerSize),F((l=(o=(a=this._spec)===null||a===void 0?void 0:a.endHandler)===null||o===void 0?void 0:o.style)===null||l===void 0?void 0:l.size)&&(this._spec.endHandler.style.size=this._isHorizontal?this._height-this._middleHandlerSize:this._width-this._middleHandlerSize);const c=(u=this._spec.startHandler.style.visible)===null||u===void 0||u,d=(h=this._spec.endHandler.style.visible)===null||h===void 0||h;this._startHandlerSize=c?this._spec.startHandler.style.size:0,this._endHandlerSize=d?this._spec.endHandler.style.size:0}onLayoutEnd(t){this._updateScaleRange(),this._isReverse()&&!this._isReverseCache&&(this._isReverseCache=this._isReverse(),this.effect.onZoomChange()),this._cacheVisibility!==!1&&super.onLayoutEnd(t)}_initValueScale(){const t=this._computeDomainOfValueScale();if(t){const e=new to;e.domain(t),this._valueScale=e}}_updateScaleRange(){var t,e;const i=this._startHandlerSize+this._endHandlerSize;if(!this._stateScale||!this._valueScale)return;let r;const s=this._isHorizontal?this.getLayoutRect().width-i:this.getLayoutRect().height-i,a=(e=(t=this._relatedAxisComponent)===null||t===void 0?void 0:t.getScale().range())!==null&&e!==void 0?e:[this._startHandlerSize/2,s+this._startHandlerSize/2];this._isHorizontal?(r=this._visible?[this._startHandlerSize/2,this._computeWidth()-i+this._startHandlerSize/2]:a,this._stateScale.range(r),this._valueScale.range([this._computeHeight()-this._middleHandlerSize,0])):this.layoutOrient==="left"?(r=this._visible?[this._startHandlerSize/2,this._computeHeight()-i+this._startHandlerSize/2]:a,this._stateScale.range(r),this._valueScale.range([this._computeWidth()-this._middleHandlerSize,0])):(r=this._visible?[this._startHandlerSize/2,this._computeHeight()-i+this._startHandlerSize/2]:a,this._stateScale.range(r),this._valueScale.range([0,this._computeWidth()-this._middleHandlerSize])),this._component&&this._cacheVisibility!==!1&&this._component.setAttributes({size:{width:this._computeWidth(),height:this._computeHeight()},position:{x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y}})}_computeDomainOfValueScale(){const t=this._data.getLatestData().map(i=>i[this._valueField]),e=t.map(i=>1*i);return t.length?[dn(e),Vi(e)]:null}_computeMiddleHandlerSize(){var t,e,i,r;let s=0;if(!((e=(t=this._spec)===null||t===void 0?void 0:t.middleHandler)===null||e===void 0)&&e.visible){const a=(i=this._spec.middleHandler.icon.style.size)!==null&&i!==void 0?i:8,o=(r=this._spec.middleHandler.background.size)!==null&&r!==void 0?r:40;s+=Math.max(a,o)}return s}_computeWidth(){return this._visible===!1?0:Mt(this._spec.width)?this._spec.width:this._isHorizontal?this.getLayoutRect().width:this._backgroundSize+this._middleHandlerSize}_computeHeight(){return this._visible===!1?0:Mt(this._spec.height)?this._spec.height:this._isHorizontal?this._backgroundSize+this._middleHandlerSize:this.getLayoutRect().height-(this._startHandlerSize+this._endHandlerSize)/2}_isScaleValid(t){if(!t||!t.domain())return!1;const e=t.domain();return(!ti(t.type)||e[0]!==e[1])&&(!qn(t.type)||xCt(e).length!==1)}_getAttrs(t){var e,i,r,s,a;const o=(e=this._spec)!==null&&e!==void 0?e:{};return Object.assign({zIndex:this.layoutZIndex,start:this._start,end:this._end,position:{x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y},orient:this._orient,size:{width:this.getLayoutRect().width,height:this.getLayoutRect().height},showDetail:o.showDetail,brushSelect:(i=o.brushSelect)!==null&&i!==void 0&&i,zoomLock:(r=o.zoomLock)!==null&&r!==void 0&&r,minSpan:this._minSpan,maxSpan:this._maxSpan,delayType:o.delayType,delayTime:z(o.delayType)?(s=o.delayTime)!==null&&s!==void 0?s:30:0,realTime:(a=o.realTime)===null||a===void 0||a,previewData:t&&this._data.getLatestData(),previewPointsX:t&&this._dataToPositionX,previewPointsY:t&&this._dataToPositionY,tolerance:this._spec.tolerance},this._getComponentAttrs(t))}_createOrUpdateComponent(){if(this._visible){const t=this._isHorizontal?this._stateScale:this._valueScale,e=this._isHorizontal?this._valueScale:this._stateScale,i=this._isScaleValid(t)&&this._isScaleValid(e)&&this._spec.showBackgroundChart!==!1,r=this._getAttrs(i);if(this._component)this._component.setAttributes(r);else{const s=this.getContainer();this._component=new QQ(r),this._isHorizontal?i&&this._component.setPreviewPointsY1(this._dataToPositionY2):i&&this._component.setPreviewPointsX1(this._dataToPositionX2),this._component.setStatePointToData(a=>this._statePointToData(a)),this._component.addEventListener("change",a=>{const{start:o,end:l,tag:u}=a.detail;this._handleChange(o,l,void 0,u)}),s.add(this._component),this._updateScaleRange()}}}_handleChange(t,e,i,r){if(super._handleChange(t,e,i),this._shouldChange){i&&this._component&&this._component.setStartAndEnd(t,e),this._start=t,this._end=e;const s=this._statePointToData(t),a=this._statePointToData(e);(ft(this._spec.updateDataAfterChange)?this._spec.updateDataAfterChange(t,e,s,a):this._handleStateChange(s,a,r))&&this.event.emit(Wt.dataZoomChange,{model:this,value:{filterData:this._filterMode!=="axis",start:t,end:e,startValue:this._startValue,endValue:this._endValue,newDomain:this._newDomain}})}}_handleDataCollectionChange(){var t;const e=this._data.getDataView();if(e.reRunAllTransform(),(t=this._component)===null||t===void 0||t.setPreviewData(e.latestData),this._valueScale){const i=this._computeDomainOfValueScale();i&&this._valueScale.domain(i)}}_getComponentAttrs(t){var e,i,r,s,a,o,l,u,h,c,d;const{middleHandler:p={},startText:f={},endText:g={},backgroundChart:_={},selectedBackgroundChart:v={}}=this._spec;return{backgroundStyle:qt((e=this._spec.background)===null||e===void 0?void 0:e.style),startHandlerStyle:qt((i=this._spec.startHandler)===null||i===void 0?void 0:i.style),middleHandlerStyle:p.visible?{visible:!0,icon:qt((r=p.icon)===null||r===void 0?void 0:r.style),background:{size:(s=p.background)===null||s===void 0?void 0:s.size,style:qt((a=p.background)===null||a===void 0?void 0:a.style)}}:{visible:!1},endHandlerStyle:qt((o=this._spec.endHandler)===null||o===void 0?void 0:o.style),startTextStyle:{padding:f.padding,formatMethod:this._getHandlerTextFormatMethod(f),textStyle:qt(f.style)},endTextStyle:{padding:g.padding,formatMethod:this._getHandlerTextFormatMethod(g),textStyle:qt(g.style)},selectedBackgroundStyle:qt(this._spec.selectedBackground.style),dragMaskStyle:qt((l=this._spec.dragMask)===null||l===void 0?void 0:l.style),backgroundChartStyle:t?{line:Ut(qt((u=_.line)===null||u===void 0?void 0:u.style),{fill:!1}),area:Object.assign({curveType:"basis",visible:!0},qt((h=_.area)===null||h===void 0?void 0:h.style))}:{line:{visible:!1},area:{visible:!1}},selectedBackgroundChartStyle:t?{line:Ut(qt((c=v.line)===null||c===void 0?void 0:c.style),{fill:!1}),area:Object.assign({curveType:"basis",visible:!0},qt((d=v.area)===null||d===void 0?void 0:d.style))}:{line:{visible:!1},area:{visible:!1}},disableTriggerEvent:this._option.disableTriggerEvent}}_getHandlerTextFormatMethod(t){const{formatMethod:e,formatter:i}=t,{formatFunc:r}=Lu(e,i);return r?s=>r(s,{label:s},i):void 0}_getNeedClearVRenderComponents(){return[this._component]}clear(){if(this._component){const t=this.getContainer();this._component.removeAllChild(),t&&t.removeChild(this._component),this._component=null}super.clear()}}y_.type=mt.dataZoom,y_.transformerConstructor=Prt,y_.specKey="dataZoom";const LUt=()=>{Z.registerComponent(y_.type,y_)};class HC extends A5{static getSpecInfo(t){const e=t[this.specKey];if(F(e))return;if(!ut(e))return[{spec:e,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:mt.scrollBar}];const i=[];return e.forEach((r,s)=>{i.push({spec:r,specPath:[this.specKey,s],specInfoPath:["component",this.specKey,s],type:mt.scrollBar})}),i}constructor(t,e){var i;super(t,e),this.type=mt.scrollBar,this.name=mt.scrollBar,this.specKey="scrollBar",this.layoutZIndex=ai.DataZoom,this.layoutLevel=Wo.DataZoom,this.layoutType="region-relative",this._filterMode=(i=t.filterMode)!==null&&i!==void 0?i:"axis"}setAttrFromSpec(){super.setAttrFromSpec(),Si(this._spec.roam)&&(this._zoomAttr.enable=!1,this._dragAttr.enable=this._spec.roam,this._scrollAttr.enable=this._spec.roam),(this._zoomAttr.enable||this._dragAttr.enable||this._scrollAttr.enable)&&this.initZoomable(this.event,this._option.mode)}onLayoutEnd(t){var e,i;this._updateScaleRange(),(i=(e=this.effect).onZoomChange)===null||i===void 0||i.call(e),super.onLayoutEnd(t)}_updateScaleRange(){this._component&&this._component.setAttributes({x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y,width:this.getLayoutRect().width,height:this.getLayoutRect().height})}_computeWidth(){return Mt(this._spec.width)?this._spec.width:this._isHorizontal?this.getLayoutRect().width:MD}_computeHeight(){return Mt(this._spec.height)?this._spec.height:this._isHorizontal?MD:this.getLayoutRect().height}_getAttrs(){var t,e,i,r,s,a;return Object.assign({zIndex:this.layoutZIndex,x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y,width:this.getLayoutRect().width,height:this.getLayoutRect().height,range:[this._start,this._end],direction:this._isHorizontal?"horizontal":"vertical",delayType:(t=this._spec)===null||t===void 0?void 0:t.delayType,delayTime:z((e=this._spec)===null||e===void 0?void 0:e.delayType)?(r=(i=this._spec)===null||i===void 0?void 0:i.delayTime)!==null&&r!==void 0?r:30:0,realTime:(a=(s=this._spec)===null||s===void 0?void 0:s.realTime)===null||a===void 0||a},this._getComponentAttrs())}_createOrUpdateComponent(){const t=this._getAttrs();if(this._component)this._component.setAttributes(t);else{const e=this.getContainer();this._component=new qw(t),this._component.addEventListener("scrollDrag",i=>{const r=i.detail.value;this._handleChange(r[0],r[1])}),e.add(this._component)}}_handleChange(t,e,i){super._handleChange(t,e,i);const r=aC(this._start,t)&&aC(this._end,e);if(this._shouldChange&&!r){i&&this._component&&this._component.setAttribute("range",[t,e]),this._start=t,this._end=e;const s=this._statePointToData(t),a=this._statePointToData(e);(ft(this._spec.updateDataAfterChange)?this._spec.updateDataAfterChange(t,e,s,a):this._handleStateChange(this._statePointToData(t),this._statePointToData(e)))&&this.event.emit(Wt.scrollBarChange,{model:this,value:{filterData:this._filterMode!=="axis",start:this._start,end:this._end,startValue:this._startValue,endValue:this._endValue,newDomain:this._newDomain}})}}_handleDataCollectionChange(){}_initCommonEvent(){super._initCommonEvent(),this._component&&this._component.on("scrollDrag",t=>{const e=t.detail.value;this._handleChange(e[0],e[1])})}_getComponentAttrs(){const{rail:t,slider:e,innerPadding:i}=this._spec,r={};return F(i)||(r.padding=i),Gt(t==null?void 0:t.style)||(r.railStyle=qt(t.style)),Gt(e==null?void 0:e.style)||(r.sliderStyle=qt(e.style)),r.disableTriggerEvent=this._option.disableTriggerEvent,r}_getNeedClearVRenderComponents(){return[this._component]}}HC.type=mt.scrollBar,HC.specKey="scrollBar";const DUt=()=>{Z.registerComponent(HC.type,HC)},BUt=(n,t)=>{const{datum:e,title:i,content:r}=t,s=[],a=e.call(null);return i.visible&&s.push({type:"title",index:0,datum:a,spec:i}),ot(r).forEach((o,l)=>{o.visible&&s.push({type:"content",index:l,datum:a,spec:o})}),s};class dm extends bs{constructor(){super(...arguments),this.type=mt.indicator,this.name=mt.indicator,this.specKey="indicator",this.layoutType="none",this.layoutZIndex=ai.Indicator,this.layoutLevel=Wo.Indicator,this._gap=0,this._activeDatum=null}static getSpecInfo(t){if(this.type!==dm.type)return null;const e=t[this.specKey];if(!ut(e))return e.visible===!1?[]:[{spec:e,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:mt.indicator}];const i=[];return e.forEach((r,s)=>{r&&r.visible!==!1&&i.push({spec:r,specPath:[this.specKey,s],specInfoPath:["component",this.specKey,s],type:mt.indicator})}),i}created(){super.created(),this.initData(),this.initEvent()}setAttrFromSpec(){super.setAttrFromSpec(),this._gap=this._spec.gap||0,this._title=this._spec.title,this._content=ot(this._spec.content),this._regions=this._option.getRegionsInUserIdOrIndex(ot(this._spec.regionId),ot(this._spec.regionIndex))}onRender(t){}changeRegions(t){}initEvent(){var t;if(this._option.disableTriggerEvent||this._spec.trigger==="none")return;const e=(t=this.getCompiler())===null||t===void 0?void 0:t.getVGrammarView();e&&(this._spec.trigger==="hover"?(e.addEventListener("element-highlight:start",i=>{this.isRelativeModel(i.options.regionId)&&this.updateDatum(i.elements[0].getDatum())}),e.addEventListener("element-highlight:reset",i=>{this.isRelativeModel(i.options.regionId)&&this.updateDatum(null)})):(e.addEventListener("element-select:start",i=>{this.isRelativeModel(i.options.regionId)&&this.updateDatum(i.elements[0].getDatum())}),e.addEventListener("element-select:reset",i=>{this.isRelativeModel(i.options.regionId)&&this.updateDatum(null)})))}updateDatum(t){this._activeDatum=t,this._displayData.updateData();const e=this._getIndicatorAttrs();this._createOrUpdateIndicatorComponent(e)}initData(){ie(this._option.dataSet,"indicatorFilter",BUt);const t=new Le(this._option.dataSet,{name:`${this.type}_${this.id}_data`});t.transform({type:"indicatorFilter",options:{title:this._title,content:this._content,datum:()=>this._activeDatum}}),t.target.addListener("change",this.updateDatum.bind(this)),this._displayData=new Cl(this._option,t)}updateLayoutAttribute(){const t=this._getIndicatorAttrs();this._createOrUpdateIndicatorComponent(t),super.updateLayoutAttribute()}_getIndicatorAttrs(){const t=this._regions[0],{width:e,height:i}=t.getLayoutRect(),{x:r,y:s}=t.getLayoutStartPoint(),a=[];return ot(this._spec.content).forEach(o=>{const l=Ut({},this._theme.content,o);a.push({visible:l.visible!==!1&&(!l.field||this._activeDatum!==null),space:l.space||this._gap,autoLimit:l.autoLimit,autoFit:l.autoFit,fitPercent:l.fitPercent,fitStrategy:l.fitStrategy,style:Object.assign(Object.assign({},c$(fc(l.style,["text"]),this._activeDatum)),{text:this._createText(l.field,l.style.text)})})}),{visible:this._spec.visible!==!1&&(this._spec.fixed!==!1||this._activeDatum!==null),size:{width:e,height:i},zIndex:this.layoutZIndex,x:r,y:s,dx:this._spec.offsetX?Jf(this._spec.offsetX,this._computeLayoutRadius()):0,dy:this._spec.offsetY?Jf(this._spec.offsetY,this._computeLayoutRadius()):0,limitRatio:this._spec.limitRatio||1/0,title:{visible:this._spec.title.visible!==!1&&(!z(this._spec.title.field)||this._activeDatum!==null),space:this._spec.title.space||this._gap,autoLimit:this._spec.title.autoLimit,autoFit:this._spec.title.autoFit,fitPercent:this._spec.title.fitPercent,fitStrategy:this._spec.title.fitStrategy,style:Object.assign(Object.assign({},c$(fc(this._spec.title.style,["text"]),this._activeDatum)),{text:this._createText(this._spec.title.field,this._spec.title.style.text)})},content:a}}_createOrUpdateIndicatorComponent(t){if(this._indicatorComponent)mi(t,this._cacheAttrs)||this._indicatorComponent.setAttributes(t);else{const e=this.getContainer(),i=new WFt(t);i.name="indicator",e.add(i),this._indicatorComponent=i,this._indicatorComponent.on("*",(r,s)=>this._delegateEvent(this._indicatorComponent,r,s))}return this._cacheAttrs=t,this._indicatorComponent}_createText(t,e){var i;return t?this._activeDatum?this._activeDatum[t]:"":ft(e)?(i=e(this._activeDatum,void 0))!==null&&i!==void 0?i:"":e??""}_computeLayoutRadius(){const t=this._regions[0],{width:e,height:i}=t.getLayoutRect();return Math.min(e/2,i/2)}isRelativeModel(t){return this._regions.some(e=>e.id===t)}_getNeedClearVRenderComponents(){return[this._indicatorComponent]}clear(){this._cacheAttrs=null,super.clear()}getIndicatorComponent(){return this._indicatorComponent}}dm.type=mt.indicator,dm.specKey="indicator";const FUt=()=>{Z.registerComponent(dm.type,dm)},jUt=["sum","average","min","max","variance","standardDeviation","median"];var NUt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};function Sc(n,t,e){if(!e)return!1;const i=n.map(a=>1*a),r=dn(i),s=Vi(i);return t<r||t>s}function zG(n,t,e,i,r,s){var a,o;const{relativeSeries:l}=i;let u;return Mt(n.x)&&Sc(t,n.x,e)&&((o=l==null?void 0:(a=l.getXAxisHelper()).setExtendDomain)===null||o===void 0||o.call(a,"marker_xAxis_extend",n.x)),u=Ds(n.x)?tg(n.x,r)+s.x:l.getXAxisHelper().dataToPosition([n.x])+s.x,u}function HG(n,t,e,i,r,s){var a,o;const{relativeSeries:l}=i;let u;return Mt(n.y)&&Sc(t,n.y,e)&&((o=(a=l.getYAxisHelper())===null||a===void 0?void 0:a.setExtendDomain)===null||o===void 0||o.call(a,"marker_yAxis_extend",n.y)),u=Ds(n.y)?tg(n.y,r)+s.y:l.getYAxisHelper().dataToPosition([n.y])+s.y,u}function VG(n,t,e,i){var r,s;const{relativeSeries:a}=i;return Mt(n.angle)&&Sc(t,n.angle,e)&&((s=(r=a.angleAxisHelper)===null||r===void 0?void 0:r.setExtendDomain)===null||s===void 0||s.call(r,"marker_angleAxis_extend",n.angle)),a.angleAxisHelper.dataToPosition([n.angle])}function WG(n,t,e,i){var r,s;const{relativeSeries:a}=i;return Mt(n.radius)&&Sc(t,n.radius,e)&&((s=(r=a.radiusAxisHelper)===null||r===void 0?void 0:r.setExtendDomain)===null||s===void 0||s.call(r,"marker_radiusAxis_extend",n.radius)),a.radiusAxisHelper.dataToPosition([n.radius])}function tg(n,t){return Number(n.substring(0,n.length-1))*t/100}function Rv(n){return jUt.includes(n)}function VC(n,t,e,i,r){const s=t.getRegion(),a=s.getLayoutStartPoint(),o=e.getRegion(),l=o.getLayoutStartPoint(),u=Math.abs(Math.min(a.x,l.x)-Math.max(a.x+s.getLayoutRect().width,l.x+o.getLayoutRect().width)),h=Math.abs(Math.min(a.y,l.y)-Math.max(a.y+s.getLayoutRect().height,l.y+o.getLayoutRect().height)),c={relativeSeries:i,startRelativeSeries:t,endRelativeSeries:e},d=[],p=n.latestData[0]&&n.latestData[0].latestData?n.latestData[0].latestData:n.latestData,f=i.getXAxisHelper().getScale(0).domain(),g=i.getYAxisHelper().getScale(0).domain();return p.forEach(_=>{const v=z(_.x),y=z(_.y);if(v&&y){const b=zG(_,f,r,c,u,a),S=HG(_,g,r,c,h,a);d.push([{x:b,y:S}])}else if(v){const b=zG(_,f,r,c,u,a),S=Math.max(a.y+s.getLayoutRect().height,l.y+o.getLayoutRect().height),A=Math.min(a.y,l.y);d.push([{x:b,y:S},{x:b,y:A}])}else if(y){const b=Math.min(a.x,l.x),S=HG(_,g,r,c,h,a),A=Math.max(a.x+s.getLayoutRect().width,l.x+o.getLayoutRect().width);d.push([{x:b,y:S},{x:A,y:S}])}}),d}function w5(n,t,e,i,r){const s={relativeSeries:i,startRelativeSeries:t,endRelativeSeries:e},a=[],o=n.latestData[0]&&n.latestData[0].latestData?n.latestData[0].latestData:n.latestData,l=i.angleAxisHelper.getScale(0).domain(),u=i.radiusAxisHelper.getScale(0).domain(),h=Math.min(i.getRegion().getLayoutRect().width/2,i.getRegion().getLayoutRect().height/2);return o.forEach(c=>{const d=z(c.angle),p=z(c.radius);if(d&&p){const f=VG(c,l,r,s),g=WG(c,u,r,s);a.push([{angle:f,radius:g}])}else if(d){const f=VG(c,l,r,s);a.push([{angle:f,radius:-h},{angle:f,radius:h}])}else if(p){const f=WG(c,u,r,s);a.push([{radius:f,angle:0},{radius:f,angle:2*Math.PI}])}}),a}function zUt(n,t){const e=[];return(n.latestData[0]&&n.latestData[0].latestData?n.latestData[0].latestData:n.latestData).forEach(i=>{z(i.areaName)&&e.push([{x:t.nameValueToPosition(i.areaName).x+t.getRegion().getLayoutStartPoint().x,y:t.nameValueToPosition(i.areaName).y+t.getRegion().getLayoutStartPoint().y}])}),e}function C5(n,t,e,i){const r=[],s=n.latestData[0]&&n.latestData[0].latestData?n.latestData[0].latestData:n.latestData,a=ut(i);return s.forEach((o,l)=>{var u,h,c,d;const p=o!=null&&o.getRefRelativeSeries?o.getRefRelativeSeries():t,f=p.getRegion(),g=f.getLayoutStartPoint(),{width:_,height:v}=f.getLayoutRect();let y=0,b=0;if(i){const k=a?i[l]:i,M=k.x,P=k.y;M&&(y=Ds(M)?Number(M.substring(0,M.length-1))*_/100:M),P&&(b=Ds(P)?Number(P.substring(0,P.length-1))*v/100:P)}const S=p.getXAxisHelper().getScale(0).domain(),A=p.getYAxisHelper().getScale(0).domain(),w=ot(o.x),C=ot(o.y);w.length===1&&Mt(w[0])&&Sc(S,w[0],e)&&((h=(u=p.getXAxisHelper())===null||u===void 0?void 0:u.setExtendDomain)===null||h===void 0||h.call(u,"marker_xAxis_extend",w[0])),C.length===1&&Mt(C[0])&&Sc(A,C[0],e)&&((d=(c=p.getYAxisHelper())===null||c===void 0?void 0:c.setExtendDomain)===null||d===void 0||d.call(c,"marker_yAxis_extend",C[0])),r.push({x:p.getXAxisHelper().dataToPosition(w)+g.x+y,y:p.getYAxisHelper().dataToPosition(C)+g.y+b})}),r}function Ert(n,t,e){const i=[];return(n.latestData[0]&&n.latestData[0].latestData?n.latestData[0].latestData:n.latestData).forEach(r=>{var s,a,o,l;const u=r!=null&&r.getRefRelativeSeries?r.getRefRelativeSeries():t,h=u.angleAxisHelper.getScale(0).domain(),c=u.radiusAxisHelper.getScale(0).domain(),d=ot(r.angle),p=ot(r.radius);d.length===1&&Mt(d[0])&&Sc(h,d[0],e)&&((a=(s=u.angleAxisHelper)===null||s===void 0?void 0:s.setExtendDomain)===null||a===void 0||a.call(s,"marker_xAxis_extend",d[0])),p.length===1&&Mt(p[0])&&Sc(c,p[0],e)&&((l=(o=u.radiusAxisHelper)===null||o===void 0?void 0:o.setExtendDomain)===null||l===void 0||l.call(o,"marker_yAxis_extend",p[0])),i.push({angle:u.angleAxisHelper.dataToPosition(d),radius:u.radiusAxisHelper.dataToPosition(p)})}),i}function k5(n,t,e){if(e){const s=t.getRegion(),{x:a,y:o}=s.getLayoutStartPoint(),{width:l,height:u}=s.getLayoutRect();return n.map(h=>{let{x:c,y:d}=h;return Ds(c)&&(c=tg(c,l)),c+=a,Ds(d)&&(d=tg(d,u)),d+=o,{x:c,y:d}})}const{width:i,height:r}=t.getOption().getChart().getViewRect();return n.map(s=>{let{x:a,y:o}=s;return Ds(a)&&(a=tg(a,i)),Ds(o)&&(o=tg(o,r)),{x:a,y:o}})}function T5(n){let t=1/0,e=-1/0,i=1/0,r=-1/0;return n.forEach(s=>{const a=s.getLayoutStartPoint(),o=s.getLayoutRect();a.x<t&&(t=a.x),a.x+o.width>e&&(e=a.x+o.width),a.y<i&&(i=a.y),a.y+o.height>r&&(r=a.y+o.height)}),{minX:t,maxX:e,minY:i,maxY:r}}function M5(n,t){const{labelBackground:e={},style:i,shape:r}=n,s=NUt(n,["labelBackground","style","shape"]);if(n.visible!==!1){const a=s;return r!=null&&r.visible?a.shape=Object.assign({visible:!0},qt(r.style)):a.shape={visible:!1},e.visible!==!1?(a.panel=Object.assign({visible:!0},Bh(qt(e.style),t)),z(e.padding)&&(a.padding=ds(e.padding))):(a.panel={visible:!1},a.padding=0),i&&(a.textStyle=Bh(qt(i),t)),a}return{visible:!1}}function Jn(n,t){for(const e in n)ft(n[e])&&(n[e]=n[e](t));return n}function Bh(n,t){return ft(n)?n(t):n}function $G(n,t){return ft(n)?n(t):n}function GG(n,t,e){return z(n)?t==="regionLeft"?e.getLayoutStartPoint().x-n.x:t==="regionRight"?e.getLayoutStartPoint().x+e.getLayoutRect().width-n.x:t==="regionTop"?e.getLayoutStartPoint().y-n.y:t==="regionBottom"?e.getLayoutStartPoint().y+e.getLayoutRect().height-n.y:t:t}function Vd(n){const t="x"in n,e="y"in n,i="x1"in n,r="y1"in n,s="angle"in n,a="radius"in n,o="angle1"in n,l="radius1"in n;return{doXProcess:t&&!e&&!r,doXYY1Process:t&&e&&r,doYProcess:e&&!t&&!i,doYXX1Process:e&&t&&i,doXYProcess:t&&e&&i&&r,doAngleProcess:s&&!o&&!a&&!l,doRadiusProcess:a&&!l&&!s&&!o,doAngRadRad1Process:s&&!o&&a&&l,doRadAngAng1Process:a&&s&&o&&!l,doRadAngProcess:s&&a&&o&&l,doCoordinatesProcess:"coordinates"in n&&(!("process"in n)||"process"in n&&"xy"in n.process)}}function Wd(n){const t="x"in n,e="x1"in n,i="y"in n,r="y1"in n,s="angle"in n,a="radius"in n,o="angle1"in n,l="radius1"in n;return{doXProcess:t&&e&&!i&&!r,doYProcess:i&&r&&!t&&!e,doXYProcess:t&&e&&i&&r,doAngleProcess:s&&o&&!a&&!l,doRadiusProcess:a&&l&&!s&&!o,doRadAngProcess:s&&a&&o&&l,doCoordinatesProcess:"coordinates"in n}}function PD(n){return{doXYProcess:z(n.x)&&z(n.y),doPolarProcess:z(n.angle)&&z(n.radius),doGeoProcess:z(n.areaName)}}function HUt(n,t,e,i=0){const r=[],s=n.y-t.y,a=n.x-t.x;switch(e){case"top":r.push(n),r.push({x:n.x,y:s>0?n.y-i-Math.abs(s):n.y-i}),r.push({x:t.x,y:s>0?t.y-i:t.y-i-Math.abs(s)}),r.push(t);break;case"bottom":r.push(n),r.push({x:n.x,y:s<0?n.y+i+Math.abs(s):n.y+i}),r.push({x:t.x,y:s<0?t.y+i:t.y+i+Math.abs(s)}),r.push(t);break;case"left":r.push(n),r.push({x:a>0?n.x-i-Math.abs(a):n.x-i,y:n.y}),r.push({x:a>0?t.x-i:t.x-i-Math.abs(a),y:t.y}),r.push(t);break;case"right":r.push(n),r.push({x:a>0?n.x+i:n.x+i+Math.abs(a),y:n.y}),r.push({x:a>0?t.x+i+Math.abs(a):t.x+i,y:t.y}),r.push(t)}return r}function VUt(n,t,e,i=0){const r=n.y-t.y,s=n.x-t.x;return e==="bottom"?{dx:s>0?-s/2:Math.abs(s/2),dy:r>0?i:Math.abs(r)+i}:e==="top"?{dx:s>0?-Math.abs(s/2):+Math.abs(s/2),dy:r>0?-(Math.abs(r)+i):-i}:e==="left"?{dx:s>0?-s-i:-i,dy:r>0?-r/2:Math.abs(r/2)}:e==="right"?{dx:s>0?i:Math.abs(s)+i,dy:r>0?-r/2:Math.abs(r/2)}:{}}const WUt=(n,t)=>{const e=n[0].latestData;return Stt(e,t.field)},$Ut=(n,t)=>{const e=n[0].latestData;return CF(e,t.field)};function GUt(n,t){const e=n[0].latestData;return Att(e,t.field)}function UUt(n,t){const e=n[0].latestData;return wtt(e,t.field)}function YUt(n,t){const e=n[0].latestData;return Ctt(e,t.field)}function XUt(n,t){const e=n[0].latestData;return v5t(e,t.field)}function KUt(n,t){const e=n[0].latestData;return _5t(e,t.field)}function P5(n,t){const e=[];return t.forEach(i=>{const r={x:null,y:null,angle:null,radius:null,areaName:null};if(z(i.x)){const s=i.x;ut(s)?r.x=s.map(a=>Gl(a,n,i)):r.x=Gl(s,n,i)}if(z(i.y)){const s=i.y;ut(s)?r.y=s.map(a=>Gl(a,n,i)):r.y=Gl(s,n,i)}if(z(i.angle)){const s=i.angle;ut(s)?r.angle=s.map(a=>Gl(a,n,i)):r.angle=Gl(s,n,i)}if(z(i.radius)){const s=i.radius;ut(s)?r.radius=s.map(a=>Gl(a,n,i)):r.radius=Gl(s,n,i)}if(z(i.areaName)){const s=i.areaName;r.areaName=Gl(s,n,i)}i.getRefRelativeSeries&&(r.getRefRelativeSeries=i.getRefRelativeSeries),e.push(r)}),e}const qUt={min:WUt,max:$Ut,sum:GUt,average:UUt,variance:YUt,standardDeviation:XUt,median:KUt};function Gl(n,t,e){const i=e.getRelativeSeries(),r=e.getStartRelativeSeries(),s=e.getEndRelativeSeries(),a=i.getData().getLatestData(),o=r.getData().getLatestData(),l=s.getData().getLatestData();if(ft(n))return n(a,o,l,i,r,s);if(No(n)){const{aggrType:u,field:h}=n;return qUt[u](t,{field:h})}return n}class E5 extends bs{constructor(){super(...arguments),this.layoutType="none",this._layoutOffsetX=0,this._layoutOffsetY=0}getRelativeSeries(){return this._relativeSeries}getMarkerData(){return this._markerData}static _getMarkerCoordinateType(t){return"cartesian"}static getSpecInfo(t){const e=t[this.specKey];if(Gt(e))return;if(!ut(e)&&e.visible!==!1&&this._getMarkerCoordinateType(e)===this.coordinateType)return[{spec:e,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:this.type}];const i=[];return ot(e).forEach((r,s)=>{r.visible!==!1&&this._getMarkerCoordinateType(r)===this.coordinateType&&i.push({spec:r,specPath:[this.specKey,s],specInfoPath:["component",this.specKey,s],type:this.type})}),i}created(){super.created(),this._bindSeries(),this._initDataView(),this.initEvent()}_getAllRelativeSeries(){return{getRelativeSeries:()=>this._relativeSeries,getStartRelativeSeries:()=>this._startRelativeSeries,getEndRelativeSeries:()=>this._endRelativeSeries}}_getFieldInfoFromSpec(t,e,i){const r={x:"xField",y:"yField",radius:"valueField",angle:"categoryField",areaName:"nameField"};return It(e)&&Rv(e)?{field:i.getSpec()[r[t]],aggrType:e}:e}_processSpecByDims(t){const e=this._relativeSeries,i={};return t.forEach(r=>i[r.dim]=this._getFieldInfoFromSpec(r.dim,r.specValue,e)),Object.assign(Object.assign({},i),this._getAllRelativeSeries())}_processSpecCoo(t){var e;let i;return((e=t.coordinates)!==null&&e!==void 0?e:ot(t.coordinate)).map(r=>{const s=this._getSeriesByIdOrIndex(r.refRelativeSeriesId,r.refRelativeSeriesIndex);if(this.coordinateType==="cartesian"){const{xField:a,yField:o}=s.getSpec(),{xFieldDim:l,xFieldIndex:u,yFieldDim:h,yFieldIndex:c}=r;let d=a;z(u)&&(d=ot(a)[u]),l&&ot(a).includes(l)&&(d=l);let p=o;z(c)&&(p=ot(o)[c]),h&&ot(o).includes(h)&&(p=h),i=Object.assign({x:void 0,y:void 0},this._getAllRelativeSeries()),It(r[d])&&Rv(r[d])?i.x={field:d,aggrType:r[d]}:i.x=ot(d).map(f=>r[f]),It(r[p])&&Rv(r[p])?i.y={field:p,aggrType:r[p]}:i.y=ot(p).map(f=>r[f])}else if(this.coordinateType==="polar"){const{valueField:a,categoryField:o}=s.getSpec(),{angleFieldDim:l,angleFieldIndex:u}=r;let h=o;z(u)&&(h=ot(o)[u]),l&&ot(o).includes(l)&&(h=l);const c=a;i=Object.assign({angle:void 0,radius:void 0},this._getAllRelativeSeries()),It(r[h])&&Rv(r[h])?i.angle={field:h,aggrType:r[h]}:i.angle=ot(h).map(d=>r[d]),It(r[c])&&Rv(r[c])?i.radius={field:c,aggrType:r[c]}:i.radius=ot(c).map(d=>r[d])}return i.getRefRelativeSeries=()=>s,i})}_getRelativeDataView(){if(this._specifiedDataSeries){let t=[];ot(this._specifiedDataSeries).forEach(i=>{t=t.concat(i.getViewData().latestData)});const e=new gc;return e.registerParser("array",Eq),new Le(e).parse(t,{type:"array"})}return this._relativeSeries.getViewData()}updateLayoutAttribute(){var t,e,i;if((t=this._spec.visible)===null||t===void 0||t){if(!this._markerComponent){const r=this._createMarkerComponent();r.name=(e=this._spec.name)!==null&&e!==void 0?e:this.type,r.id=(i=this._spec.id)!==null&&i!==void 0?i:`${this.type}-${this.id}`,this._markerComponent=r,this.getContainer().add(this._markerComponent),this._markerComponent.on("*",(s,a)=>{this._delegateEvent(this._markerComponent,s,a,null,this.getMarkerData.bind(this))})}this._markerLayout()}super.updateLayoutAttribute()}_getSeriesByIdOrIndex(t,e){var i,r;let s;return s=(i=this._option.getSeriesInUserIdOrIndex(z(t)?[t]:[],[e]))===null||i===void 0?void 0:i[0],s||(s=(r=this._relativeSeries)!==null&&r!==void 0?r:this._getFirstSeries()),s}_bindSeries(){const t=this._spec;this._relativeSeries=this._getSeriesByIdOrIndex(t.relativeSeriesId,t.relativeSeriesIndex),this._startRelativeSeries=this._getSeriesByIdOrIndex(t.startRelativeSeriesId,t.startRelativeSeriesIndex),this._endRelativeSeries=this._getSeriesByIdOrIndex(t.endRelativeSeriesId,t.endRelativeSeriesIndex),t.specifiedDataSeriesIndex&&t.specifiedDataSeriesIndex==="all"||t.specifiedDataSeriesId&&t.specifiedDataSeriesId==="all"?this._specifiedDataSeries=this._option.getAllSeries():(t.specifiedDataSeriesIndex||t.specifiedDataSeriesId)&&(this._specifiedDataSeries=this._getSeriesByIdOrIndex(t.specifiedDataSeriesId,t.specifiedDataSeriesIndex))}initEvent(){this._relativeSeries.coordinate!=="cartesian"&&(this._relativeSeries.event.on("zoom",this._markerLayout.bind(this)),this._relativeSeries.event.on("panmove",this._markerLayout.bind(this)),this._relativeSeries.event.on("scroll",this._markerLayout.bind(this)))}onRender(t){}changeRegions(t){}clear(){super.clear(),this._firstSeries=null}_getFirstSeries(){var t;if(this._firstSeries)return this._firstSeries;const e=rp(this._regions);return e?(this._firstSeries=e,e):((t=this._option)===null||t===void 0||t.onError("need at least one series"),null)}_getNeedClearVRenderComponents(){return[this._markerComponent]}onLayoutStart(t,e,i){F(this._spec.offsetX)||(this._layoutOffsetX=Qn(this._spec.offsetX,e.width,e)),F(this._spec.offsetY)||(this._layoutOffsetY=Qn(this._spec.offsetY,e.height,e)),super.onLayoutStart(t,e,i)}_compareSpec(t,e){const i=super._compareSpec(t,e);return mi(e,t)||(i.reRender=!0,i.reMake=!0,i.change=!0),i}}function ZUt(n,t){const e=n[0].latestData;return y5t(e,t.fieldX,t.fieldY)}function O5(n,t){if(t&&t.getRelativeSeries){const e=t.getRelativeSeries();if(e){const i=e.getViewData();return i&&i.latestData&&i.latestData.length?n:[]}}return n}class R5 extends E5{constructor(){super(...arguments),this.specKey="markLine",this.layoutZIndex=ai.MarkLine}static _getMarkerCoordinateType(t){const{doAngleProcess:e,doRadiusProcess:i,doAngRadRad1Process:r,doRadAngAng1Process:s,doRadAngProcess:a}=Vd(t);return t.coordinateType==="polar"||e||i||r||s||a?"polar":"cartesian"}_createMarkerComponent(){var t,e,i,r,s,a,o,l,u,h,c,d,p,f,g,_,v,y,b;const{label:S={},startSymbol:A={},endSymbol:w={}}=this._spec,C={zIndex:this.layoutZIndex,interactive:(t=this._spec.interactive)===null||t===void 0||t,hover:(e=this._spec.interactive)===null||e===void 0||e,select:(i=this._spec.interactive)===null||i===void 0||i,points:[{x:0,y:0},{x:0,y:0}],center:{x:0,y:0},radius:0,startAngle:0,endAngle:0,lineStyle:Bh(qt((r=this._spec.line)===null||r===void 0?void 0:r.style),this._markerData),clipInRange:(s=this._spec.clip)!==null&&s!==void 0&&s,label:M5(S,this._markerData),state:{line:Jn((o=(a=this._spec.line)===null||a===void 0?void 0:a.state)!==null&&o!==void 0?o:{},this._markerData),lineStartSymbol:Jn((u=(l=this._spec.startSymbol)===null||l===void 0?void 0:l.state)!==null&&u!==void 0?u:{},this._markerData),lineEndSymbol:Jn((c=(h=this._spec.endSymbol)===null||h===void 0?void 0:h.state)!==null&&c!==void 0?c:{},this._markerData),label:Jn((f=(p=(d=this._spec)===null||d===void 0?void 0:d.label)===null||p===void 0?void 0:p.state)!==null&&f!==void 0?f:{},this._markerData),labelBackground:Jn((y=(v=(_=(g=this._spec)===null||g===void 0?void 0:g.label)===null||_===void 0?void 0:_.labelBackground)===null||v===void 0?void 0:v.state)!==null&&y!==void 0?y:{},this._markerData)},animation:(b=this._spec.animation)!==null&&b!==void 0&&b,animationEnter:this._spec.animationEnter,animationExit:this._spec.animationExit,animationUpdate:this._spec.animationUpdate};return A.visible?C.startSymbol=Object.assign(Object.assign({},A),{visible:!0,style:qt(A.style)}):C.startSymbol={visible:!1},w.visible?C.endSymbol=Object.assign(Object.assign({},w),{visible:!0,style:qt(w.style)}):C.endSymbol={visible:!1},this._newMarkLineComponent(C)}_getUpdateMarkerAttrs(){var t,e,i,r;const s=this._spec,a=this._markerData,o=this._startRelativeSeries,l=this._endRelativeSeries,u=this._relativeSeries,h=this._computePointsAttr(),c=u.getViewData().latestData,d=a.latestData[0]&&a.latestData[0].latestData?a.latestData[0].latestData:a.latestData;let p;if(s.clip||!((t=s.label)===null||t===void 0)&&t.confine){const{minX:_,maxX:v,minY:y,maxY:b}=T5([o.getRegion(),l.getRegion(),u.getRegion()]);p={x:_,y,width:v-_,height:b-y}}const f=(i=(e=this._markerComponent)===null||e===void 0?void 0:e.attribute)!==null&&i!==void 0?i:{},g=Object.assign(Object.assign({},f.label),{text:this._spec.label.formatMethod?this._spec.label.formatMethod(d,c):(r=f.label)===null||r===void 0?void 0:r.text});return Object.assign(Object.assign({},h),{label:g,limitRect:p,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}_markerLayout(){var t;const e=this._getUpdateMarkerAttrs();(t=this._markerComponent)===null||t===void 0||t.setAttributes(e)}_initDataView(){const t=this._spec,e="coordinates"in t,{doXProcess:i,doYProcess:r,doXYY1Process:s,doYXX1Process:a,doXYProcess:o,doAngleProcess:l,doRadiusProcess:u,doAngRadRad1Process:h,doRadAngAng1Process:c,doRadAngProcess:d}=Vd(t);if(this._markerData=this._getRelativeDataView(),!(i||r||s||a||o||l||u||h||c||d||e))return;ie(this._option.dataSet,"markerAggregation",P5),ie(this._option.dataSet,"markerRegression",ZUt),ie(this._option.dataSet,"markerFilter",O5);const{options:p,needAggr:f,needRegr:g,processData:_}=this._computeOptions(),v=new Le(this._option.dataSet);v.parse([_],{type:"dataview"}),f&&v.transform({type:"markerAggregation",options:p}),g&&v.transform({type:"markerRegression",options:p}),v.transform({type:"markerFilter",options:this._getAllRelativeSeries()}),v.target.on("change",()=>{this._markerLayout()}),this._markerData=v}}R5.specKey="markLine";class WC extends R5{constructor(){super(...arguments),this.type=mt.markLine,this.name=mt.markLine,this.coordinateType="cartesian"}_newMarkLineComponent(t){return new Yh(t)}_computePointsAttr(){var t;const e=this._spec,i=this._markerData,r=this._startRelativeSeries,s=this._endRelativeSeries,a=this._relativeSeries,o=z(e.coordinates),l=z(e.process),u=l&&z(e.process.x),h=l&&z(e.process.y),c=z(e.positions),d=(t=e.autoRange)!==null&&t!==void 0&&t,{doXProcess:p,doYProcess:f,doXYY1Process:g,doYXX1Process:_,doXYProcess:v,doCoordinatesProcess:y}=Vd(e);let b=[];if(p||g||f||_||v||o&&u||o&&h){const S=VC(i,r,s,a,d);b=S.length===1?S[0]:S.map(A=>A[0])}else y?b=C5(i,a,d,e.coordinatesOffset):c&&(b=k5(e.positions,a,e.regionRelative));return{points:b}}_markerLayout(){var t,e,i,r,s,a,o,l;const u=this._getUpdateMarkerAttrs();if(this._spec.type==="type-step"){const h=this._startRelativeSeries,c=this._endRelativeSeries,{multiSegment:d,mainSegmentIndex:p}=this._spec.line||{},{connectDirection:f,expandDistance:g=0}=this._spec;let _;if(Ds(g)){const C=h.getRegion(),k=C.getLayoutStartPoint(),M=c.getRegion(),P=M.getLayoutStartPoint();if(f==="bottom"||f==="top"){const E=Math.abs(Math.min(k.y,P.y)-Math.max(k.y+C.getLayoutRect().height,P.y+M.getLayoutRect().height));_=Number(g.substring(0,g.length-1))*E/100}else{const E=Math.abs(Math.min(k.x,P.x)-Math.max(k.x+C.getLayoutRect().width,P.x+M.getLayoutRect().width));_=Number(g.substring(0,g.length-1))*E/100}}else _=g;const{points:v,label:y,limitRect:b}=u,S=HUt(v[0],v[1],f,_);let A;A=d&&z(p)?{position:"middle",autoRotate:!1,refX:0,refY:0}:Object.assign(Object.assign({position:"start",autoRotate:!1},VUt(v[0],v[1],f,_)),{refX:0,refY:0}),st((t=this._spec.label)===null||t===void 0?void 0:t.refX)&&(A.refX+=this._spec.label.refX),st((e=this._spec.label)===null||e===void 0?void 0:e.refY)&&(A.refY+=this._spec.label.refY),st((i=this._spec.label)===null||i===void 0?void 0:i.dx)&&(A.dx=(A.dx||0)+this._spec.label.dx),st((r=this._spec.label)===null||r===void 0?void 0:r.dy)&&(A.dy=(A.dy||0)+this._spec.label.dy);const w=(a=(s=this._markerComponent)===null||s===void 0?void 0:s.attribute)!==null&&a!==void 0?a:{};(o=this._markerComponent)===null||o===void 0||o.setAttributes({points:d?[[S[0],S[1]],[S[1],S[2]],[S[2],S[3]]]:S,label:Object.assign(Object.assign(Object.assign({},y),A),{textStyle:Object.assign(Object.assign({},w.label.textStyle),{textAlign:"center",textBaseline:"middle"})}),limitRect:b,multiSegment:d,mainSegmentIndex:p,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}else(l=this._markerComponent)===null||l===void 0||l.setAttributes(u)}_computeOptions(){let t,e=this._getRelativeDataView(),i=!0,r=!1;const s=this._spec,a=this._relativeSeries,{doXProcess:o,doYProcess:l,doXYY1Process:u,doYXX1Process:h,doXYProcess:c,doCoordinatesProcess:d}=Vd(s);if(c)t=[this._processSpecByDims([{dim:"x",specValue:s.x},{dim:"y",specValue:s.y}]),this._processSpecByDims([{dim:"x",specValue:s.x1},{dim:"y",specValue:s.y1}])];else if(o)t=[this._processSpecByDims([{dim:"x",specValue:s.x}])];else if(l)t=[this._processSpecByDims([{dim:"y",specValue:s.y}])];else if(u)t=[this._processSpecByDims([{dim:"x",specValue:s.x},{dim:"y",specValue:s.y}]),this._processSpecByDims([{dim:"x",specValue:s.x},{dim:"y",specValue:s.y1}])];else if(h)t=[this._processSpecByDims([{dim:"x",specValue:s.x},{dim:"y",specValue:s.y}]),this._processSpecByDims([{dim:"x",specValue:s.x1},{dim:"y",specValue:s.y}])];else if(d){if(t=this._processSpecCoo(s),i=!1,e=new Le(this._option.dataSet,{name:`${this.type}_${this.id}_data`}).parse([a.getViewData()],{type:"dataview"}).transform({type:"markerAggregation",options:t}),s.process&&"x"in s.process&&(t=[this._processSpecByDims([{dim:"x",specValue:s.process.x}])],i=!0),s.process&&"y"in s.process&&(t=t=[this._processSpecByDims([{dim:"y",specValue:s.process.y}])],i=!0),s.process&&"xy"in s.process){const{xField:p,yField:f}=a.getSpec();t={fieldX:p,fieldY:f},r=!0}}else i=!1;return{options:t,needAggr:i,needRegr:r,processData:e}}}WC.type=mt.markLine,WC.coordinateType="cartesian";const JUt=()=>{Z.registerComponent(WC.type,WC),ltt()};class $C extends R5{constructor(){super(...arguments),this.type=mt.polarMarkLine,this.name=mt.polarMarkLine,this.coordinateType="polar"}_newMarkLineComponent(t){const{doRadiusProcess:e,doRadAngAng1Process:i}=Vd(this._spec);return e||i?new Ld(t):new Yh(t)}_computePointsAttr(){var t;const e=this._spec,i=this._markerData,r=this._startRelativeSeries,s=this._endRelativeSeries,a=this._relativeSeries,o=(t=e.autoRange)!==null&&t!==void 0&&t,{doAngleProcess:l,doRadiusProcess:u,doAngRadRad1Process:h,doRadAngAng1Process:c,doRadAngProcess:d,doCoordinatesProcess:p}=Vd(e);let f=[],g={};const _={x:this._relativeSeries.getRegion().getLayoutStartPoint().x+this._relativeSeries.angleAxisHelper.center().x,y:this._relativeSeries.getRegion().getLayoutStartPoint().y+this._relativeSeries.angleAxisHelper.center().y};if(l||u||h||c||d){const v=w5(i,r,s,a,o);f=v.length===1?v[0]:v.map(y=>y[0]),g=f[0].radius===f[1].radius?{radius:f[0].radius,startAngle:f[0].angle,endAngle:f[1].angle,center:_}:{points:f.map(y=>un(_,y.radius,y.angle))}}else p&&(f=Ert(i,a,o),g={points:f.map(v=>un(_,v.radius,v.angle))});return g}_computeOptions(){const t=this._spec,{doAngleProcess:e,doRadiusProcess:i,doAngRadRad1Process:r,doRadAngAng1Process:s,doRadAngProcess:a,doCoordinatesProcess:o}=Vd(t);let l;const u=this._getRelativeDataView();return a?l=[this._processSpecByDims([{dim:"angle",specValue:t.angle},{dim:"radius",specValue:t.radius}]),this._processSpecByDims([{dim:"angle",specValue:t.angle1},{dim:"radius",specValue:t.radius1}])]:e?l=[this._processSpecByDims([{dim:"angle",specValue:t.angle}])]:i?l=[this._processSpecByDims([{dim:"radius",specValue:t.radius}])]:r?l=[this._processSpecByDims([{dim:"angle",specValue:t.angle},{dim:"radius",specValue:t.radius}]),this._processSpecByDims([{dim:"angle",specValue:t.angle},{dim:"radius",specValue:t.radius1}])]:s?l=[this._processSpecByDims([{dim:"angle",specValue:t.angle},{dim:"radius",specValue:t.radius}]),this._processSpecByDims([{dim:"angle",specValue:t.angle1},{dim:"radius",specValue:t.radius}])]:o&&(l=this._processSpecCoo(t)),{options:l,needAggr:!0,needRegr:!1,processData:u}}}$C.type=mt.polarMarkLine,$C.coordinateType="polar";const QUt=()=>{Z.registerComponent($C.type,$C),IFt(),ltt()};class GC extends bs{get orient(){return this._orient}constructor(t,e){super(t,e),this.type=mt.title,this.specKey=mt.title,this.layoutType="normal",this.layoutZIndex=ai.Title,this.layoutLevel=Wo.Title,this._orient="top",this._orient=WF(t.orient)?t.orient:"top"}initLayout(){super.initLayout(),this._layout&&(this._layout.layoutOrient=this._orient)}static getSpecInfo(t){const e=t[this.specKey];if(!e||e.visible===!1)return null;if(!ut(e))return[{spec:e,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:mt.title}];const i=[];return e.forEach((r,s)=>{r.visible!==!1&&i.push({spec:r,specPath:[this.specKey,s],specInfoPath:["component",this.specKey,s],type:mt.title})}),i}onRender(t){}_compareSpec(t,e){const i=super._compareSpec(t,e);return(e==null?void 0:e.orient)!==(t==null?void 0:t.orient)&&(i.reMake=!0),i.change=!0,i.reRender=!0,i}changeRegions(t){}update(t){}resize(t){}afterSetLayoutStartPoint(t){st(t.x)&&this._titleComponent&&this._titleComponent.setAttribute("x",t.x),st(t.y)&&this._titleComponent&&this._titleComponent.setAttribute("y",t.y),super.afterSetLayoutStartPoint(t)}getBoundsInRect(t){let e={};this.setLayoutRect(t);const i=this._getTitleAttrs();this._createOrUpdateTitleComponent(i),e=this._getTitleLayoutRect();const{x:r,y:s}=this.getLayoutStartPoint();return{x1:r,y1:s,x2:r+e.width,y2:s+e.height}}_getTitleLayoutRect(){const t=this._titleComponent.AABBBounds;return{width:this._spec.width?this._spec.width:st(t.width())?t.width():0,height:this._spec.height?this._spec.height:st(t.height())?t.height():0}}_getTitleAttrs(){var t,e,i,r,s,a,o,l,u;const h=Math.max(0,(t=this._spec.width)!==null&&t!==void 0?t:this.getLayoutRect().width);return Object.assign(Object.assign({},fc(this._spec,["padding"])),{textType:(e=this._spec.textType)!==null&&e!==void 0?e:"text",text:(i=this._spec.text)!==null&&i!==void 0?i:"",subtextType:(r=this._spec.subtextType)!==null&&r!==void 0?r:"text",subtext:(s=this._spec.subtext)!==null&&s!==void 0?s:"",x:(a=this._spec.x)!==null&&a!==void 0?a:0,y:(o=this._spec.y)!==null&&o!==void 0?o:0,width:h,height:this._spec.height,minWidth:this._spec.minWidth,maxWidth:this._spec.maxWidth,minHeight:this._spec.minHeight,maxHeight:this._spec.maxHeight,padding:this._spec.innerPadding,align:(l=this._spec.align)!==null&&l!==void 0?l:"left",verticalAlign:(u=this._spec.verticalAlign)!==null&&u!==void 0?u:"top",textStyle:Object.assign({width:h},this._spec.textStyle),subtextStyle:Object.assign({width:h},this._spec.subtextStyle)})}_createOrUpdateTitleComponent(t){if(this._titleComponent)mi(t,this._cacheAttrs)||this._titleComponent.setAttributes(t);else{const e=this.getContainer(),i=new mtt(t);i.name="title",e.add(i),this._titleComponent=i,i.on("*",(r,s)=>this._delegateEvent(i,r,s))}return this._cacheAttrs=t,this._titleComponent}_getNeedClearVRenderComponents(){return[this._titleComponent]}clear(){super.clear(),this._cacheAttrs=null}}GC.type=mt.title,GC.specKey=mt.title;const tYt=()=>{Z.registerComponent(GC.type,GC)};class I5 extends E5{constructor(){super(...arguments),this.specKey="markArea",this.layoutZIndex=ai.MarkArea}static _getMarkerCoordinateType(t){const{doAngleProcess:e,doRadiusProcess:i,doRadAngProcess:r}=Wd(t);return t.coordinateType==="polar"||e||i||r?"polar":"cartesian"}_createMarkerComponent(){var t,e,i,r,s,a,o,l,u,h,c,d;const p=(t=this._spec.label)!==null&&t!==void 0?t:{},f={zIndex:this.layoutZIndex,interactive:(e=this._spec.interactive)===null||e===void 0||e,hover:(i=this._spec.interactive)===null||i===void 0||i,select:(r=this._spec.interactive)===null||r===void 0||r,points:[{x:0,y:0}],center:{x:0,y:0},innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,areaStyle:Bh(qt((s=this._spec.area)===null||s===void 0?void 0:s.style),this._markerData),clipInRange:(a=this._spec.clip)!==null&&a!==void 0&&a,label:M5(p,this._markerData),state:{area:Jn((o=this._spec.area)===null||o===void 0?void 0:o.state,this._markerData),label:Jn((l=this._spec.label)===null||l===void 0?void 0:l.state,this._markerData),labelBackground:Jn((c=(h=(u=this._spec)===null||u===void 0?void 0:u.label)===null||h===void 0?void 0:h.labelBackground)===null||c===void 0?void 0:c.state,this._markerData)},animation:(d=this._spec.animation)!==null&&d!==void 0&&d,animationEnter:this._spec.animationEnter,animationExit:this._spec.animationExit,animationUpdate:this._spec.animationUpdate};return this._newMarkAreaComponent(f)}_markerLayout(){var t,e,i,r;const s=this._spec,a=this._markerData,o=this._startRelativeSeries,l=this._endRelativeSeries,u=this._relativeSeries,h=this._computePointsAttr(),c=this._getRelativeDataView().latestData,d=a?a.latestData[0]&&a.latestData[0].latestData?a.latestData[0].latestData:a.latestData:c;let p;if(s.clip||!((t=s.label)===null||t===void 0)&&t.confine){const{minX:f,maxX:g,minY:_,maxY:v}=T5([o.getRegion(),l.getRegion(),u.getRegion()]);p={x:f,y:_,width:g-f,height:v-_}}this._markerComponent&&this._markerComponent.setAttributes(Object.assign(Object.assign({},h),{label:Object.assign(Object.assign({},(e=this._markerComponent.attribute)===null||e===void 0?void 0:e.label),{text:this._spec.label.formatMethod?this._spec.label.formatMethod(d,c):(r=(i=this._markerComponent.attribute)===null||i===void 0?void 0:i.label)===null||r===void 0?void 0:r.text}),limitRect:p,dx:this._layoutOffsetX,dy:this._layoutOffsetY}))}_initDataView(){const t=this._spec,{doXProcess:e,doYProcess:i,doXYProcess:r,doAngleProcess:s,doRadiusProcess:a,doRadAngProcess:o,doCoordinatesProcess:l}=Wd(t);if(!(e||i||r||s||a||o||l))return null;const{options:u}=this._computeOptions(),h=this._getRelativeDataView();ie(this._option.dataSet,"markerAggregation",P5),ie(this._option.dataSet,"markerFilter",O5);const c=new Le(this._option.dataSet,{name:`${this.type}_${this.id}_data`});c.parse([h],{type:"dataview"}),c.transform({type:"markerAggregation",options:u}),c.transform({type:"markerFilter",options:this._getAllRelativeSeries()}),c.target.on("change",()=>{this._markerLayout()}),this._markerData=c}}I5.specKey="markArea";class UC extends I5{constructor(){super(...arguments),this.type=mt.markArea,this.name=mt.markArea,this.coordinateType="cartesian"}_newMarkAreaComponent(t){return new Xh(t)}_computePointsAttr(){var t;const e=this._spec,i=this._markerData,r=this._startRelativeSeries,s=this._endRelativeSeries,a=this._relativeSeries,{doXProcess:o,doYProcess:l,doXYProcess:u,doCoordinatesProcess:h}=Wd(e),c=z(e.positions),d=(t=e.autoRange)!==null&&t!==void 0&&t;let p=[],f=[];if(u){f=VC(i,r,s,a,d);const[g,_]=f;g&&g.length&&_&&_.length&&(p=[{x:g[0].x,y:_[0].y},g[0],{x:_[0].x,y:g[0].y},_[0]])}else if(o||l){f=VC(i,r,s,a,d);const[g,_]=f;g&&g.length&&_&&_.length&&(p=[...g,_[1],_[0]])}else h?p=C5(i,a,d,e.coordinatesOffset):c&&(p=k5(e.positions,a,e.regionRelative));return{points:p}}_computeOptions(){const t=this._spec,{doXProcess:e,doYProcess:i,doXYProcess:r,doCoordinatesProcess:s}=Wd(t);let a;return r?a=[this._processSpecByDims([{dim:"x",specValue:t.x},{dim:"y",specValue:t.y}]),this._processSpecByDims([{dim:"x",specValue:t.x1},{dim:"y",specValue:t.y1}])]:e?a=[this._processSpecByDims([{dim:"x",specValue:t.x}]),this._processSpecByDims([{dim:"x",specValue:t.x1}])]:i?a=[this._processSpecByDims([{dim:"y",specValue:t.y}]),this._processSpecByDims([{dim:"y",specValue:t.y1}])]:s&&(a=this._processSpecCoo(t)),{options:a}}}UC.type=mt.markArea,UC.coordinateType="cartesian";const eYt=()=>{Z.registerComponent(UC.type,UC),utt()};class YC extends I5{constructor(){super(...arguments),this.type=mt.polarMarkArea,this.name=mt.polarMarkArea,this.coordinateType="polar"}_newMarkAreaComponent(t){const{doRadiusProcess:e,doAngleProcess:i,doRadAngProcess:r}=Wd(this._spec);return i||e||r?new Dd(t):new Xh(t)}_computePointsAttr(){var t;const e=this._spec,i=this._markerData,r=this._startRelativeSeries,s=this._endRelativeSeries,a=this._relativeSeries,{doAngleProcess:o,doRadiusProcess:l,doRadAngProcess:u,doCoordinatesProcess:h}=Wd(e),c=(t=e.autoRange)!==null&&t!==void 0&&t;let d,p={};const f={x:this._relativeSeries.getRegion().getLayoutStartPoint().x+this._relativeSeries.angleAxisHelper.center().x,y:this._relativeSeries.getRegion().getLayoutStartPoint().y+this._relativeSeries.angleAxisHelper.center().y};if(o||l||u){const g=w5(i,r,s,a,c);u?p={innerRadius:g[0][0].radius,outerRadius:g[1][0].radius,startAngle:g[0][0].angle,endAngle:g[1][0].angle,center:f}:o?p={innerRadius:0,outerRadius:Math.abs(g[0][0].radius),startAngle:g[0][1].angle,endAngle:g[1][1].angle,center:f}:l&&(p={innerRadius:g[0][0].radius,outerRadius:g[1][0].radius,startAngle:g[0][0].angle,endAngle:g[1][1].angle,center:f})}else h&&(d=Ert(i,a,c),p={points:d.map(g=>un(f,g.radius,g.angle))});return p}_computeOptions(){const t=this._spec,{doAngleProcess:e,doRadiusProcess:i,doRadAngProcess:r,doCoordinatesProcess:s}=Wd(t);let a;return r?a=[this._processSpecByDims([{dim:"angle",specValue:t.angle},{dim:"radius",specValue:t.radius}]),this._processSpecByDims([{dim:"angle",specValue:t.angle1},{dim:"radius",specValue:t.radius1}])]:e?a=[this._processSpecByDims([{dim:"angle",specValue:t.angle},{dim:"radius",specValue:t.radius}]),this._processSpecByDims([{dim:"angle",specValue:t.angle1},{dim:"radius",specValue:t.radius}])]:i?a=[this._processSpecByDims([{dim:"radius",specValue:t.radius}]),this._processSpecByDims([{dim:"radius",specValue:t.radius1}])]:s&&(a=this._processSpecCoo(t)),{options:a}}}YC.type=mt.polarMarkArea,YC.coordinateType="polar";const iYt=()=>{Z.registerComponent(YC.type,YC),LFt(),utt()},UG=n=>{const t=Object.assign({},n);return qt(t)},nYt=n=>{const t=Object.assign({},n);return qt(t)},Yx=n=>Object.assign(Object.assign({},n),{style:Object.assign({},qt(n.style))}),Ort=n=>{var t,e,i,r,s,a,o,l,u,h,c,d,p,f,g;const _=UG((e=(t=n==null?void 0:n.slider)===null||t===void 0?void 0:t.trackStyle)!==null&&e!==void 0?e:{}),v=UG((r=(i=n==null?void 0:n.slider)===null||i===void 0?void 0:i.railStyle)!==null&&r!==void 0?r:{}),y=nYt((a=(s=n==null?void 0:n.slider)===null||s===void 0?void 0:s.handlerStyle)!==null&&a!==void 0?a:{}),b=Yx((l=(o=n==null?void 0:n.controller)===null||o===void 0?void 0:o.start)!==null&&l!==void 0?l:{}),S=Yx((h=(u=n==null?void 0:n.controller)===null||u===void 0?void 0:u.pause)!==null&&h!==void 0?h:{}),A=Yx((d=(c=n==null?void 0:n.controller)===null||c===void 0?void 0:c.backward)!==null&&d!==void 0?d:{}),w=Yx((f=(p=n==null?void 0:n.controller)===null||p===void 0?void 0:p.forward)!==null&&f!==void 0?f:{}),C=Object.assign(Object.assign({},n),{direction:n.direction,interval:n.interval,visible:n.visible,orient:(g=n.orient)!==null&&g!==void 0?g:"bottom",slider:Object.assign(Object.assign({},n.slider),{trackStyle:_,railStyle:v,handlerStyle:y}),controller:Object.assign(Object.assign({},n.controller),{start:b,pause:S,backward:A,forward:w})});return n.visible||(C.controller.visible=!1,C.slider.visible=!1),C},rYt=(n,t)=>Object.assign(Object.assign({},Ort(n)),{data:t,type:"continuous"}),sYt=(n,t)=>Object.assign(Object.assign({},Ort(n)),{data:t,type:"discrete"}),Iv=n=>n==="left"||n==="right",eO=n=>n==="top"||n==="bottom";class XC extends bs{constructor(){super(...arguments),this.layoutZIndex=ai.Player,this.layoutLevel=Wo.Player,this.specKey="player",this.type=mt.player,this._orient="bottom",this._getPlayerAttrs=()=>{var t,e,i,r,s,a;const o=this._spec.type,l={size:{width:this._width,height:this._height},dx:(t=this._spec.dx)!==null&&t!==void 0?t:0+this._dx,dy:(e=this._spec.dy)!==null&&e!==void 0?e:0+this._dy};return o==="discrete"?Object.assign(Object.assign(Object.assign({},sYt(this._spec,this._specs)),l),{disableTriggerEvent:this._option.disableTriggerEvent,loop:(r=(i=this._spec)===null||i===void 0?void 0:i.loop)===null||r===void 0||r}):Object.assign(Object.assign(Object.assign({},rYt(this._spec,this._specs)),l),{disableTriggerEvent:this._option.disableTriggerEvent,loop:(a=(s=this._spec)===null||s===void 0?void 0:s.loop)===null||a===void 0||a})},this._createOrUpdatePlayerComponent=()=>{const t=Object.assign({},this._getPlayerAttrs()),e=this.getContainer();this._playerComponent?mi(t,this._cacheAttrs)||(this._cacheAttrs=t,this._playerComponent.setAttributes(t),this._playerComponent._initAttributes(),this._playerComponent.render()):(t.type==="discrete"?this._playerComponent=new s5t(t):this._playerComponent=new o5t(t),this._cacheAttrs=t,this._playerComponent.name="player",e.add(this._playerComponent),this._initEvent())},this._maxSize=()=>{var t,e,i,r,s,a,o,l,u;return Math.max(...ot((e=(t=this._spec.controller.start)===null||t===void 0?void 0:t.style)===null||e===void 0?void 0:e.size),...ot((r=(i=this._spec.controller.pause)===null||i===void 0?void 0:i.style)===null||r===void 0?void 0:r.size),...ot((a=(s=this._spec.controller.backward)===null||s===void 0?void 0:s.style)===null||a===void 0?void 0:a.size),...ot((l=(o=this._spec.controller.forward)===null||o===void 0?void 0:o.style)===null||l===void 0?void 0:l.size),(u=Iv(this._orient)?this._spec.slider.railStyle.width:this._spec.slider.railStyle.height)!==null&&u!==void 0?u:10)},this._sliderExceededSize=()=>{var t,e,i,r,s,a,o,l,u;const h=(t=Iv(this._orient)?this._spec.slider.railStyle.width:this._spec.slider.railStyle.height)!==null&&t!==void 0?t:10,c=Math.max(...ot((i=(e=this._spec.controller.start)===null||e===void 0?void 0:e.style)===null||i===void 0?void 0:i.size),...ot((s=(r=this._spec.controller.pause)===null||r===void 0?void 0:r.style)===null||s===void 0?void 0:s.size),...ot((o=(a=this._spec.controller.backward)===null||a===void 0?void 0:a.style)===null||o===void 0?void 0:o.size),...ot((u=(l=this._spec.controller.forward)===null||l===void 0?void 0:l.style)===null||u===void 0?void 0:u.size));return h>=c?h-c:0},this._initEvent=()=>{this._option.disableTriggerEvent||(this._option.globalInstance.on(Wt.rendered,()=>{var t;!((t=this._spec)===null||t===void 0)&&t.auto&&this._playerComponent.play()}),this._playerComponent.addEventListener(qi.end,()=>{var t;this.event.emit(Wt.playerEnd,{model:this}),this._alternate&&this._spec.type==="discrete"&&(this._direction=this._direction==="default"?"reverse":"default",this._playerComponent.setAttributes({direction:this._direction,dataIndex:this._direction==="reverse"?this._specs.length-2:1})),!((t=this._spec)===null||t===void 0)&&t.loop&&this._playerComponent.play()}),this._playerComponent.addEventListener(qi.change,t=>{const{index:e}=t.detail,i=this._specs[e];ot(i.data).forEach(r=>{var s,a;(a=(s=this._option)===null||s===void 0?void 0:s.globalInstance)===null||a===void 0||a.updateData(r.id,r.values)}),this.event.emit(Wt.playerChange,{model:this,value:{spec:i,index:e,specs:this._specs}})}),this._playerComponent.addEventListener(qi.backward,t=>{const{index:e}=t.detail,i=this._specs[e];this.event.emit(Wt.playerBackward,{model:this,value:{spec:i,index:e,specs:this._specs}})}),this._playerComponent.addEventListener(qi.forward,t=>{const{index:e}=t.detail,i=this._specs[e];this.event.emit(Wt.playerForward,{model:this,value:{spec:i,index:e,specs:this._specs}})}),this._playerComponent.addEventListener(qi.play,t=>{const{index:e}=t.detail,i=this._specs[e];this.event.emit(Wt.playerPlay,{model:this,value:{spec:i,index:e,specs:this._specs}})}),this._playerComponent.addEventListener(qi.pause,t=>{const{index:e}=t.detail,i=this._specs[e];this.event.emit(Wt.playerPause,{model:this,value:{spec:i,index:e,specs:this._specs}})}))}}get orient(){return this._orient}set layoutOrient(t){this._orient=t}static getSpecInfo(t){const e=t[this.specKey];return F(e)?null:[{spec:e,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:mt.player}]}setAttrFromSpec(){var t,e,i,r,s,a,o,l;super.setAttrFromSpec(),this._orient=(t=this._spec.orient)!==null&&t!==void 0?t:"bottom",this._specs=(e=this._spec.specs)!==null&&e!==void 0?e:[],this._direction=(i=this._spec.direction)!==null&&i!==void 0?i:"default",this._alternate=(r=this._spec.alternate)!==null&&r!==void 0&&r,this._dx=(s=this._spec.dx)!==null&&s!==void 0?s:0,this._dy=(a=this._spec.dy)!==null&&a!==void 0?a:0,this._position=(o=this._spec.position)!==null&&o!==void 0?o:"middle",this._visible=(l=this._spec.visible)===null||l===void 0||l}afterSetLayoutStartPoint(t){if(super.afterSetLayoutStartPoint(t),st(t.x)){const e=Iv(this._orient)?t.x+this._sliderExceededSize()/2:t.x;this._playerComponent&&this._playerComponent.setAttribute("x",e)}if(st(t.y)){const e=eO(this._orient)?t.y+this._sliderExceededSize()/2:t.y;this._playerComponent&&this._playerComponent.setAttribute("y",e)}}getBoundsInRect(t,e){this._width=this._computeWidth(t),this._height=this._computeHeight(t),this._dx=this._computeDx(e),this._dy=this._computeDy(e);const i=this._computeLayoutRect(t,this._width,this._height);return this._createOrUpdatePlayerComponent(),i}changeRegions(t){}onRender(t){}_getNeedClearVRenderComponents(){return[this._playerComponent]}_computeLayoutRect(t,e,i){if(this._visible===!1)return{x1:0,x2:0,y1:0,y2:0};switch(this._orient){case"top":case"left":return{x1:0,y1:0,x2:e,y2:i};case"right":return{x1:t.width-e,y1:0,x2:t.width,y2:t.height};default:return{x1:0,y1:t.height-i,x2:t.width,y2:t.height}}}_computeWidth(t){return Mt(this._spec.width)?Math.min(t.width,Number(this._spec.width)):Iv(this._orient)?this._maxSize():t.width}_computeHeight(t){return Mt(this._spec.height)?(this._height=this._spec.height,Math.min(t.height,Number(this._spec.height))):eO(this._orient)?this._maxSize():t.height}_computeDx(t){return Iv(this._orient)||this._position==="start"?0:this._position==="middle"?(t.width-this._width)/2:t.width-this._width}_computeDy(t){return eO(this._orient)||this._position==="start"?0:this._position==="middle"?(t.height-this._height)/2:t.height-this._height}}XC.specKey="player",XC.type=mt.player;const aYt=()=>{Z.registerComponent(XC.type,XC)};class L5 extends bs{constructor(t,e){super(t,e),this.type=mt.label,this.name=mt.label,this.layoutType="none",this.layoutZIndex=ai.Label,this._regions=e.getRegionsInIndex(e.regionIndexes)}_interactiveConfig(t){const{interactive:e}=t,i={hover:!1,select:!1,state:t.state};if(e!==!0)return i;const{hover:r,select:s}=this._option.getChart().getSpec();return r===!1&&r.enable===!1||(i.hover=!0),s===!1&&s.enable===!1||(i.select=!0),i}_compareSpec(t,e){const i=super._compareSpec(t,e);return i.reRender=!0,mi(e,t)||(i.reMake=!0),i}onRender(t){}changeRegions(t){}_getNeedClearVRenderComponents(){return[]}_delegateLabelEvent(t){t.listenerCount("*")===0&&t.addEventListener("*",(e,i)=>this._delegateEvent(t,e,i))}}L5.type=mt.label;class KC extends am{constructor(){super(...arguments),this.skipEncode=!1}getRule(){return this._rule}setRule(t){this._rule=t}getTarget(){return this._target}setTarget(t){this._target=t,this._rule||this.setRule(t.type)}getComponent(){return this._component}setComponent(t){this._component=t}}KC.type="text",KC.constructorType="label";const Rrt=()=>{Z.registerMark(KC.constructorType,KC),Gtt()};class Irt extends L1{_initTheme(t,e){return{spec:t,theme:this._theme}}}class b_ extends L5{constructor(t,e){super(t,e),this.type=mt.label,this.name=mt.label,this.specKey="label",this.transformerConstructor=Irt,this.layoutZIndex=ai.Label,this._layoutRule=t.labelLayout||"series"}static getSpecInfo(t,e){const i=[];return((e==null?void 0:e.region)||[]).forEach((s,a)=>{(s.seriesIndexes||[]).some(o=>{const l=e.series[o],{markLabelSpec:u={}}=l;return Object.values(u).some(h=>Array.isArray(h)&&(c=>c.some(d=>d.visible))(h))})&&i.push({spec:t,type:mt.label,specInfoPath:["component",this.specKey,a],regionIndexes:[a]})}),i}init(t){super.init(t),this.initEvent(),this._initTextMark(),this._initLabelComponent(),this._initTextMarkStyle()}reInit(t){super.reInit(t),this._labelInfoMap&&this._labelInfoMap.clear(),this._initTextMark(),this._initTextMarkStyle()}initEvent(){this.event.on(Wt.dataZoomChange,()=>{this._labelComponentMap.forEach((e,i)=>{const r=i.getProduct().getGroupGraphicItem();r&&r.disableAnimation()}),this.event.on(Ht.AFTER_MARK_RENDER_END,t)});const t=()=>{this._labelComponentMap.forEach((e,i)=>{const r=i.getProduct().getGroupGraphicItem();r&&r.enableAnimation()}),this.event.off(Ht.AFTER_MARK_RENDER_END,t)}}afterCompile(){this._labelComponentMap.forEach((t,e)=>{const i=e.getProduct();i&&i.addEventListener(Ht.AFTER_ELEMENT_ENCODE,()=>{this._isLayout===!1&&this._delegateLabelEvent(i.getGroupGraphicItem())})})}_initTextMark(){this._labelInfoMap||(this._labelInfoMap=new Map),this._labelComponentMap||(this._labelComponentMap=new Map),zi(this._regions,t=>{const{markLabelSpec:e={}}=t.getSpecInfo(),i=Object.keys(e),r=t.getRegion();this._labelInfoMap.get(r)||this._labelInfoMap.set(r,[]);for(let s=0;s<i.length;s++){const a=i[s],o=t.getMarkInName(a);o&&e[a].forEach((l,u)=>{if(l.visible){const h=this._labelInfoMap.get(r),c=this._createMark({type:"label",name:`${a}-label-${u}`},{noSeparateStyle:!0,attributeContext:t.getMarkAttributeContext()});c.setTarget(o),h.push({labelMark:c,baseMark:o,series:t,labelSpec:l})}})}})}_initLabelComponent(){this._labelInfoMap.forEach((t,e)=>{if(this._layoutRule==="region"){const i=this._createMark({type:"component",name:`${e.getGroupMark().name}-label-component`},{componentType:"label",noSeparateStyle:!0,support3d:this._spec.support3d});i&&(i.setSkipBeforeLayouted(!0),this._marks.addMark(i),this._labelComponentMap.set(i,()=>this._labelInfoMap.get(e)))}else t.forEach((i,r)=>{const s=this._createMark({type:"component",name:`${i.labelMark.name}-component`},{componentType:"label",noSeparateStyle:!0,support3d:i.baseMark.getSupport3d()});s&&(s.setSkipBeforeLayouted(!0),this._marks.addMark(s),this._labelComponentMap.set(s,()=>this._labelInfoMap.get(e)[r]),i.labelMark.setComponent(s))})})}_initTextMarkStyle(){this._labelInfoMap.forEach(t=>{t.forEach(e=>{var i,r;const{labelMark:s,labelSpec:a,series:o}=e;if(this.initMarkStyleWithSpec(s,a,void 0),ft(a==null?void 0:a.getStyleHandler)){const l=a.getStyleHandler(o);l==null||l.call(o,s,a)}!((r=(i=s.stateStyle)===null||i===void 0?void 0:i.normal)===null||r===void 0)&&r.lineWidth&&s.setAttribute("stroke",o.getColorAttribute(),"normal",kt.Base_Series)})})}updateLayoutAttribute(){super.updateLayoutAttribute(),this._labelComponentMap.forEach((t,e)=>{const i=t();ut(i)?this._updateMultiLabelAttribute(i,e):this._updateSingleLabelAttribute(i,e)})}_updateMultiLabelAttribute(t,e){this._updateLabelComponentAttribute(e.getProduct(),t.map(({baseMark:i})=>i.getProduct()),t)}_updateSingleLabelAttribute(t,e){const{baseMark:i}=t;this._updateLabelComponentAttribute(e.getProduct(),i.getProduct(),[t])}_updateLabelComponentAttribute(t,e,i){const r=this._option.getComponentsByType("totalLabel");t.target(e).configure({interactive:!1}).depend(r.map(s=>s.getMarks()[0].getProduct())).labelStyle((s,a)=>{var o,l;const u=i[a.labelIndex];if(u){const{labelSpec:h,labelMark:c}=u,d=c.getRule(),p=this._interactiveConfig(h),f=(l=(o=this._spec)===null||o===void 0?void 0:o.centerOffset)!==null&&l!==void 0?l:0,g=Ut({textStyle:Object.assign({pickable:h.interactive===!0},h.style),overlap:{avoidMarks:r.map(_=>_.getMarks()[0].getProductId())}},q9t(d,u),Object.assign(Object.assign(Object.assign({},fc(h,["position","style","state","type"])),p),{centerOffset:f}));return d!=="line"&&d!=="area"||(g.type=d),g}}).encode((s,a,o)=>{if(i[o.labelIndex]){const{labelSpec:l,labelMark:u}=i[o.labelIndex];return u.skipEncode?{data:s}:o5(i[o.labelIndex],s,l.formatMethod,l.formatter)}}).size(()=>i[0].series.getRegion().getLayoutRect())}compileMarks(){this.getMarks().forEach(t=>{var e;const i=this._labelComponentMap.get(t)();let r;r=ut(i)?i[0].series.getRegion().getGroupMark().getProduct():i.series.getRegion().getGroupMark().getProduct(),t.compile({group:r}),(e=t.getProduct())===null||e===void 0||e.configure({context:{model:this,labelInfo:i}})})}getVRenderComponents(){const t=[];return this._labelComponentMap.forEach((e,i)=>{const r=i.getProduct().getGroupGraphicItem();r&&t.push(r)}),t}}b_.type=mt.label,b_.specKey="label",b_.transformerConstructor=Irt;const oYt=()=>{tet(),Rrt(),bT(),Z.registerComponent(b_.type,b_,!0)};class qC extends L5{constructor(){super(...arguments),this.type=mt.totalLabel,this.name=mt.totalLabel,this.specKey="totalLabel",this.layoutZIndex=ai.Label}static getSpecInfo(t,e){var i;const r=[];return(i=e==null?void 0:e.region)===null||i===void 0||i.forEach((s,a)=>{var o;(o=s.seriesIndexes)===null||o===void 0||o.forEach(l=>{const{spec:u}=e.series[l],h=u[this.specKey];h!=null&&h.visible&&r.push({spec:h,type:mt.totalLabel,specPath:["series",l,this.specKey],specInfoPath:["component",this.specKey,l],regionIndexes:[a],seriesIndexes:[l]})})}),r}init(t){super.init(t),this._initTextMark(),this._initLabelComponent()}_initTextMark(){var t;const e=this._getSeries();if(!((t=e.getSpec().totalLabel)===null||t===void 0)&&t.visible){const i=e.getSeriesMark();if(i){const r=this._createMark({type:"label",name:`${i.name}-total-label`});this._baseMark=i,this._textMark=r,this._initTextMarkStyle()}}}_initTextMarkStyle(){var t;super.initMarkStyleWithSpec(this._textMark,this._spec),this.setMarkStyle(this._textMark,{text:i=>i[pet]},"normal",kt.Default);const e=this._getSeries();(t=e.initTotalLabelMarkStyle)===null||t===void 0||t.call(e,this._textMark)}_initLabelComponent(){const t=this._getSeries(),e=this._createMark({type:"component",name:`${t.name}-total-label-component`},{componentType:"label",noSeparateStyle:!0,support3d:this._spec.support3d});e&&this._marks.addMark(e)}afterCompile(){this._marks.forEach((t,e)=>{const i=t.getProduct();i&&i.addEventListener(Ht.AFTER_ELEMENT_ENCODE,()=>{this._isLayout===!1&&this._delegateLabelEvent(i.getGroupGraphicItem())})})}updateLayoutAttribute(){super.updateLayoutAttribute();const t=this._getSeries();this._marks.forEach((e,i)=>{e.getProduct().target(this._baseMark.getProduct()).configure({interactive:!1}).labelStyle(()=>{var r,s;if(this._baseMark){const{offset:a,animation:o,overlap:l}=this._spec,u=this._interactiveConfig(this._spec);return Ut({textStyle:{pickable:this._spec.interactive===!0},position:lYt(t,this._baseMark.type),x:0,y:0},(s=(r=t.getTotalLabelComponentStyle)===null||r===void 0?void 0:r.call(t,{baseMark:this._baseMark,labelMark:this._textMark}))!==null&&s!==void 0?s:{},Object.assign({offset:a,animation:o,overlap:l,dataFilter:h=>h.filter(c=>c.data[ky])},u))}}).encode(r=>o5({baseMark:this._baseMark,labelMark:this._textMark,series:t,labelSpec:t.getSpec().totalLabel},r,this._spec.formatMethod)).size(()=>this._regions[0].getLayoutRect())})}compileMarks(){this.getMarks().forEach(t=>{var e;const i=this._regions[0].getGroupMark().getProduct();t.compile({group:i}),(e=t.getProduct())===null||e===void 0||e.configure({context:{model:this}})})}getVRenderComponents(){const t=[];return this.getMarks().forEach(e=>{const i=e.getProduct().getGroupGraphicItem();i&&t.push(i)}),t}_getSeries(){return this._option.getSeriesInIndex([this.getSpecPath()[1]])[0]}}qC.type=mt.totalLabel,qC.specKey="totalLabel";function lYt(n,t){var e,i;let r;const{direction:s}=n,a={vertical:["top","bottom"],horizontal:["right","left"]},o=(s==="horizontal"?!((e=n.getXAxisHelper())===null||e===void 0)&&e.isInverse():!((i=n.getYAxisHelper())===null||i===void 0)&&i.isInverse())?1:0;switch(t){case"rect":case"symbol":r=a[s][o];break;default:r="top"}return r}const uYt=()=>{tet(),Rrt(),bT(),Z.registerComponent(qC.type,qC,!0)};var YG=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};class LT extends E5{constructor(){super(...arguments),this.specKey="markPoint",this.layoutZIndex=ai.MarkPoint}static _getMarkerCoordinateType(t){const{doPolarProcess:e,doGeoProcess:i}=PD(t);return t.coordinateType==="polar"||e?"polar":t.coordinateType==="geo"||i?"geo":"cartesian"}_createMarkerComponent(){var t,e,i,r,s,a,o,l,u,h,c,d,p,f,g,_,v,y,b,S,A,w,C,k,M,P,E,I;const{itemContent:D={},itemLine:N={},targetSymbol:O={}}=this._spec,{text:L={},symbol:H,image:j,richText:G}=D,U=YG(D,["text","symbol","image","richText"]),$={zIndex:this.layoutZIndex,interactive:(t=this._spec.interactive)===null||t===void 0||t,hover:(e=this._spec.interactive)===null||e===void 0||e,select:(i=this._spec.interactive)===null||i===void 0||i,position:{x:0,y:0},clipInRange:(r=this._spec.clip)!==null&&r!==void 0&&r,itemContent:Object.assign({offsetX:$G(D.offsetX,this._relativeSeries.getRegion()),offsetY:$G(D.offsetX,this._relativeSeries.getRegion())},U),targetSymbol:{offset:(s=O.offset)!==null&&s!==void 0?s:0,visible:(a=O.visible)!==null&&a!==void 0&&a,size:(o=O.size)!==null&&o!==void 0?o:20,style:Bh(O.style,this._markerData)},state:{line:Jn((u=(l=this._spec.itemLine.line)===null||l===void 0?void 0:l.state)!==null&&u!==void 0?u:{},this._markerData),lineStartSymbol:Jn((c=(h=this._spec.itemLine.startSymbol)===null||h===void 0?void 0:h.state)!==null&&c!==void 0?c:{},this._markerData),lineEndSymbol:Jn((p=(d=this._spec.itemLine.endSymbol)===null||d===void 0?void 0:d.state)!==null&&p!==void 0?p:{},this._markerData),symbol:Jn((g=(f=this._spec.itemContent.symbol)===null||f===void 0?void 0:f.state)!==null&&g!==void 0?g:{},this._markerData),image:Jn((v=(_=this._spec.itemContent.image)===null||_===void 0?void 0:_.state)!==null&&v!==void 0?v:{},this._markerData),text:Jn((b=(y=this._spec.itemContent.text)===null||y===void 0?void 0:y.state)!==null&&b!==void 0?b:{},this._markerData),textBackground:Jn((A=(S=this._spec.itemContent.text)===null||S===void 0?void 0:S.labelBackground)===null||A===void 0?void 0:A.state,this._markerData),richText:Jn((C=(w=this._spec.itemContent.richText)===null||w===void 0?void 0:w.state)!==null&&C!==void 0?C:{},this._markerData),customMark:Jn((M=(k=this._spec.itemContent.customMark)===null||k===void 0?void 0:k.state)!==null&&M!==void 0?M:{},this._markerData),targetItem:Jn((E=(P=this._spec.targetSymbol)===null||P===void 0?void 0:P.state)!==null&&E!==void 0?E:{},this._markerData)},animation:(I=this._spec.animation)!==null&&I!==void 0&&I,animationEnter:this._spec.animationEnter,animationExit:this._spec.animationExit,animationUpdate:this._spec.animationUpdate};H!=null&&H.style&&($.itemContent.symbolStyle=qt(Bh(H.style,this._markerData))),j!=null&&j.style&&($.itemContent.imageStyle=Bh(j.style,this._markerData)),L&&($.itemContent.textStyle=M5(L,this._markerData)),G!=null&&G.style&&($.itemContent.richTextStyle=Bh(G.style,this._markerData));const{visible:q,line:tt={}}=N,it=YG(N,["visible","line"]);return $.itemLine=q!==!1?Object.assign(Object.assign({},it),{visible:!0,lineStyle:qt(tt.style)}):{visible:!1},new Kh($)}_markerLayout(){var t,e,i,r,s;const a=this._spec,o=this._markerData,l=this._relativeSeries,{point:u}=this._computePointsAttr(),h=this._getRelativeDataView().latestData,c=o?o.latestData[0]&&o.latestData[0].latestData?o.latestData[0].latestData:o.latestData:h;let d;if(a.clip||!((t=a.itemContent)===null||t===void 0)&&t.confine){const{minX:p,maxX:f,minY:g,maxY:_}=T5([l.getRegion()]);d={x:p,y:g,width:f-p,height:_-g}}if(this._markerComponent){const p=(e=this._markerComponent.attribute)!==null&&e!==void 0?e:{},f=(r=(i=p.itemContent)===null||i===void 0?void 0:i.textStyle)!==null&&r!==void 0?r:{};this._markerComponent.setAttributes({position:u===void 0?{x:null,y:null}:u,itemContent:Object.assign(Object.assign({},p.itemContent),{textStyle:Object.assign(Object.assign({},f),{text:!((s=this._spec.itemContent.text)===null||s===void 0)&&s.formatMethod?this._spec.itemContent.text.formatMethod(c,h):f.text}),offsetX:GG(u,p.itemContent.offsetX,this._relativeSeries.getRegion()),offsetY:GG(u,p.itemContent.offsetY,this._relativeSeries.getRegion())}),limitRect:d,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}}_initDataView(){const t=this._spec,{doXYProcess:e,doPolarProcess:i,doGeoProcess:r}=PD(t);if(!(z(t.coordinate)||e||i||r))return;ie(this._option.dataSet,"markerAggregation",P5),ie(this._option.dataSet,"markerFilter",O5);const{options:s}=this._computeOptions(),a=new Le(this._option.dataSet,{name:`${this.type}_${this.id}_data`});a.parse([this._getRelativeDataView()],{type:"dataview"}),a.transform({type:"markerAggregation",options:s}),a.transform({type:"markerFilter",options:this._getAllRelativeSeries()}),a.target.on("change",()=>{this._markerLayout()}),this._markerData=a}}LT.specKey="markPoint";class ZC extends LT{constructor(){super(...arguments),this.type=mt.markPoint,this.name=mt.markPoint,this.coordinateType="cartesian"}_computePointsAttr(){var t;const e=this._spec,i=this._markerData,r=this._relativeSeries,s="x"in e&&"y"in e,a="coordinate"in e,o="position"in e,l=(t=e==null?void 0:e.autoRange)!==null&&t!==void 0&&t;let u;return s?u=VC(i,r,r,r,l)[0][0]:a?u=C5(i,r,l,e.coordinatesOffset)[0]:o&&(u=k5([e.position],r,e.regionRelative)[0]),{point:u}}_computeOptions(){const t=this._spec,{doXYProcess:e}=PD(t),i=z(t.coordinate);let r;return e?r=[this._processSpecByDims([{dim:"x",specValue:t.x},{dim:"y",specValue:t.y}])]:i&&(r=this._processSpecCoo(t)),{options:r}}}ZC.type=mt.markPoint,ZC.coordinateType="cartesian";const hYt=()=>{Z.registerComponent(ZC.type,ZC),SF()};class JC extends LT{constructor(){super(...arguments),this.type=mt.polarMarkPoint,this.name=mt.polarMarkPoint,this.coordinateType="polar"}_computePointsAttr(){var t,e;const i=this._markerData,r=this._relativeSeries,s=(e=(t=this._spec)===null||t===void 0?void 0:t.autoRange)!==null&&e!==void 0&&e,a=w5(i,r,r,r,s)[0][0],o={x:this._relativeSeries.getRegion().getLayoutStartPoint().x+this._relativeSeries.angleAxisHelper.center().x,y:this._relativeSeries.getRegion().getLayoutStartPoint().y+this._relativeSeries.angleAxisHelper.center().y};return{point:un(o,a.radius,a.angle)}}_computeOptions(){const t=this._spec;return{options:[this._processSpecByDims([{dim:"radius",specValue:t.radius},{dim:"angle",specValue:t.angle}])]}}}JC.type=mt.polarMarkPoint,JC.coordinateType="polar";const cYt=()=>{Z.registerComponent(JC.type,JC),SF()};class QC extends LT{constructor(){super(...arguments),this.type=mt.geoMarkPoint,this.name=mt.geoMarkPoint,this.coordinateType="geo"}_computePointsAttr(){const t=this._markerData,e=this._relativeSeries;return{point:zUt(t,e)[0][0]}}_computeOptions(){const t=this._spec;return{options:[this._processSpecByDims([{dim:"areaName",specValue:t.areaName}])]}}}QC.type=mt.geoMarkPoint,QC.coordinateType="geo";const dYt=()=>{Z.registerComponent(QC.type,QC),SF()};class tk extends bs{constructor(){super(...arguments),this.layoutType="none",this.type=mt.brush,this.name=mt.brush,this.specKey="brush",this.layoutZIndex=ai.Brush,this._linkedSeries=[],this._itemMap={},this._linkedItemMap={},this._inBrushElementsMap={},this._outOfBrushElementsMap={},this._linkedInBrushElementsMap={},this._linkedOutOfBrushElementsMap={},this._needInitOutState=!0,this._cacheInteractiveRangeAttrs=[],this._needDisablePickable=!1,this._releatedAxes=[],this._regionAxisMap={},this._axisDataZoomMap={},this._zoomRecord=[]}init(){const t=this._transformBrushedMarkAttr(this._spec.inBrush),e=this._transformBrushedMarkAttr(this._spec.outOfBrush);this._option.getAllSeries().forEach(i=>{i.getActiveMarks().forEach(r=>{r&&(i.setMarkStyle(r,Object.assign({},t),"inBrush",kt.Series),i.setMarkStyle(r,Object.assign({},e),"outOfBrush",kt.Series))})})}static getSpecInfo(t){const e=t[this.specKey];if(!F(e)&&e.visible!==!1)return[{spec:e,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:mt.brush}]}created(){super.created(),this.initEvent(),this._bindRegions(),this._bindLinkedSeries(),this._initRegionAxisMap(),this._initAxisDataZoomMap(),this._initNeedOperatedItem()}_extendDataInBrush(t){const e=[];for(const i in t)for(const r in t[i])e.push(Object.assign({},t[i][r].data[0]));return e}_extendDatumOutOfBrush(t){const e=[];for(const i in t)e.push(t[i].data[0]);return e}_getBrushInteractiveAttr(t){const e=t.getLayoutStartPoint(),i=t.getLayoutRect(),r=e.x,s=r+i.width,a=e.y,o=a+i.height;return{interactiveRange:{minY:a,maxY:o,minX:r,maxX:s},xRange:[r,s],yRange:[a,o]}}_updateBrushComponent(t,e){const i=this._getBrushInteractiveAttr(t),r=this._brushComponents[e];r.setAttributes(i),this._initMarkBrushState(e,""),r.children[0].removeAllChild(),this._needInitOutState=!0}_createBrushComponent(t,e){var i,r;const s=this._getBrushInteractiveAttr(t),a=new ytt(Object.assign(Object.assign(Object.assign({zIndex:this.layoutZIndex,brushStyle:qt((i=this._spec)===null||i===void 0?void 0:i.style)},s),this._spec),{disableTriggerEvent:this._option.disableTriggerEvent}));a.id=(r=this._spec.id)!==null&&r!==void 0?r:`brush-${this.id}`,this.getContainer().add(a);const{brushMode:o="single"}=this._spec;this._brushComponents.push(a),this._cacheInteractiveRangeAttrs.push(s),a.addEventListener(Fr.drawStart,l=>{this._emitEvent(Wt.brushStart,t)}),a.addEventListener(Fr.moveStart,l=>{this._emitEvent(Wt.brushStart,t)}),a.addEventListener(Fr.drawing,l=>{this._needInitOutState&&o==="single"&&this._initMarkBrushState(e,"outOfBrush"),this._needInitOutState=!1,this._needDisablePickable=!0,this._handleBrushChange(Wt.brushChange,t,l),this._emitEvent(Wt.brushChange,t)}),a.addEventListener(Fr.moving,l=>{this._handleBrushChange(Wt.brushChange,t,l),this._emitEvent(Wt.brushChange,t)}),a.addEventListener(Fr.brushClear,l=>{this._initMarkBrushState(e,""),this._needInitOutState=!0,this._needDisablePickable=!1,this._handleBrushChange(Wt.brushChange,t,l),this._handleBrushChange(Wt.brushClear,t,l),this._emitEvent(Wt.brushChange,t),this._emitEvent(Wt.brushClear,t)}),a.addEventListener(Fr.drawEnd,l=>{this._needInitOutState=!0,this._needDisablePickable=!1;const{operateMask:u}=l.detail;this._handleBrushChange(Wt.brushEnd,t,l),this._setAxisAndDataZoom(u,t),this._emitEvent(Wt.brushEnd,t)}),a.addEventListener(Fr.moveEnd,l=>{const{operateMask:u}=l.detail;this._handleBrushChange(Wt.brushEnd,t,l),this._setAxisAndDataZoom(u,t),this._emitEvent(Wt.brushEnd,t)})}_handleBrushChange(t,e,i){const{operateMask:r}=i.detail;this._reconfigItem(r,e),this._reconfigLinkedItem(r,e)}_emitEvent(t,e){this.event.emit(t,{model:this,value:{operateType:t,operateRegion:e,inBrushData:this._extendDataInBrush(this._inBrushElementsMap),outOfBrushData:this._extendDatumOutOfBrush(this._outOfBrushElementsMap),linkInBrushData:this._extendDataInBrush(this._linkedInBrushElementsMap),linkOutOfBrushData:this._extendDatumOutOfBrush(this._linkedOutOfBrushElementsMap),inBrushElementsMap:this._inBrushElementsMap,outOfBrushElementsMap:this._outOfBrushElementsMap,linkedInBrushElementsMap:this._linkedInBrushElementsMap,linkedOutOfBrushElementsMap:this._linkedOutOfBrushElementsMap,zoomRecord:this._zoomRecord}})}_transformBrushedMarkAttr(t){const e={};return t!=null&&t.symbol&&(e.symbolType=t.symbol),t!=null&&t.symbolSize&&(e.size=t.symbolSize),t!=null&&t.color&&(e.fill=t.color),t!=null&&t.colorAlpha&&(e.fillOpacity=t.colorAlpha),Object.assign(Object.assign({},qt(t)),e)}_reconfigItem(t,e){this._itemMap[e.id].forEach(i=>{const r=i.getProduct();!r||!r.elements||!r.elements.length||r.elements.forEach(s=>{var a,o,l;const u=s.getGraphicItem(),h=i.id+"_"+s.key;!((a=this._outOfBrushElementsMap)===null||a===void 0)&&a[h]&&this._isBrushContainItem(t,u)?(s.addState("inBrush"),this._inBrushElementsMap[t==null?void 0:t.name]||(this._inBrushElementsMap[t==null?void 0:t.name]={}),this._inBrushElementsMap[t==null?void 0:t.name][h]=s,delete this._outOfBrushElementsMap[h]):!((l=(o=this._inBrushElementsMap)===null||o===void 0?void 0:o[t==null?void 0:t.name])===null||l===void 0)&&l[h]&&!this._isBrushContainItem(t,u)&&(s.removeState("inBrush"),s.addState("outOfBrush"),this._outOfBrushElementsMap[h]=s,delete this._inBrushElementsMap[t.name][h]),u.setAttribute("pickable",!this._needDisablePickable)})})}_reconfigLinkedItem(t,e){const i=e.getLayoutStartPoint(),r=e.getSeries().map(s=>s.id);this._linkedSeries.forEach(s=>{if(!r.includes(s.id)){const a=s.getRegion().getLayoutStartPoint(),o=a.x-i.x,l=a.y-i.y;this._linkedItemMap[s.id].forEach(u=>{const h=u.getProduct();!h||!h.elements||!h.elements.length||h.elements.forEach(c=>{var d,p,f;const g=c.getGraphicItem(),_=u.id+"_"+c.key;!((d=this._linkedOutOfBrushElementsMap)===null||d===void 0)&&d[_]&&this._isBrushContainItem(t,g,{dx:o,dy:l})?(c.addState("inBrush"),this._linkedInBrushElementsMap[t==null?void 0:t.name]||(this._linkedInBrushElementsMap[t==null?void 0:t.name]={}),this._linkedInBrushElementsMap[t==null?void 0:t.name][_]=c,delete this._linkedOutOfBrushElementsMap[_]):!((f=(p=this._linkedInBrushElementsMap)===null||p===void 0?void 0:p[t==null?void 0:t.name])===null||f===void 0)&&f[_]&&!this._isBrushContainItem(t,g,{dx:o,dy:l})&&(c.removeState("inBrush"),c.addState("outOfBrush"),this._linkedOutOfBrushElementsMap[_]=c),g.setAttribute("pickable",!this._needDisablePickable)})})}})}_isBrushContainItem(t,e,i){var r,s,a;if(!(t!=null&&t.globalTransMatrix)||!(!((r=t==null?void 0:t.attribute)===null||r===void 0)&&r.points))return!1;const o=(a=(s=t==null?void 0:t.attribute)===null||s===void 0?void 0:s.points)!==null&&a!==void 0?a:[],{a:l,b:u,c:h,d:c,e:d,f:p}=t.globalTransMatrix,f=(i==null?void 0:i.dx)||0,g=(i==null?void 0:i.dy)||0,_=o.map(S=>({x:l*S.x+h*S.y+d+f,y:u*S.x+c*S.y+p+g}));t.globalAABBBounds.clone().set(t.globalAABBBounds.x1+f,t.globalAABBBounds.y1+g,t.globalAABBBounds.x2+f,t.globalAABBBounds.y2+g);const v=e.globalTransMatrix.e,y=e.globalTransMatrix.f;let b=[];if(e.type==="symbol"){const{size:S=0}=e==null?void 0:e.attribute,A=ot(S)[0]/2;return b=[{x:v-A,y:y-A},{x:v+A,y:y-A},{x:v+A,y:y+A},{x:v-A,y:y+A}],G7(_,b)}if(e.type==="rect"){const{x1:S,x2:A,y1:w,y2:C}=e==null?void 0:e.AABBBounds,k=Math.abs(S-A),M=Math.abs(w-C);return b=[{x:v,y},{x:v+k,y},{x:v+k,y:y+M},{x:v,y:y+M}],G7(_,b)}return t.globalAABBBounds.intersects(e.globalAABBBounds)}_stateClamp(t){return Math.min(Math.max(0,t),1)}_setAxisAndDataZoom(t,e){var i;if(this._zoomRecord=[],this._spec.zoomAfterBrush){const r=t.AABBBounds;(i=this._regionAxisMap["region_"+e.id])===null||i===void 0||i.forEach(s=>{var a,o;const l=s.layoutOrient==="bottom"||s.layoutOrient==="top",u=(a=this._spec.axisRangeExpand)!==null&&a!==void 0?a:0,{x1:h,x2:c,y1:d,y2:p}=r,f=l?"x":"y",g=l?h:d,_=l?c:p;if(this._axisDataZoomMap[s.id]){const v=this._axisDataZoomMap[s.id],y=v.relatedAxisComponent,b=y.getScale().invert(g-e.getLayoutStartPoint()[f]),S=y.getScale().invert(_-e.getLayoutStartPoint()[f]),A=v.dataToStatePoint(b),w=v.dataToStatePoint(S),C=this._stateClamp(A-u),k=this._stateClamp(w+u);v.setStartAndEnd(C,k,["percent","percent"]),this._zoomRecord.push({operateComponent:v,start:C,end:k})}else{const v=s.getScale().range(),y=(o=s.getScale().rangeFactor())!==null&&o!==void 0?o:[0,1],b=g-e.getLayoutStartPoint()[f],S=_-e.getLayoutStartPoint()[f],A=(b-v[0])/(v[1]-v[0])*(y[1]-y[0])+y[0],w=(S-v[0])/(v[1]-v[0])*(y[1]-y[0])+y[0],C=this._stateClamp(A-u),k=this._stateClamp(w+u);s.getScale().rangeFactor([C,k]),s.effect.scaleUpdate(),this._zoomRecord.push({operateComponent:s,start:C,end:k})}})}}_bindRegions(){z(this._spec.regionId)&&z(this._spec.regionIndex)&&(this._relativeRegions=this._option.getAllRegions()),this._relativeRegions=this._option.getRegionsInUserIdOrIndex(ot(this._spec.regionId),ot(this._spec.regionIndex))}_bindLinkedSeries(){z(this._spec.brushLinkSeriesId)&&z(this._spec.brushLinkSeriesIndex)||(this._linkedSeries=this._option.getSeriesInUserIdOrIndex(ot(this._spec.brushLinkSeriesId),ot(this._spec.brushLinkSeriesIndex)))}_initRegionAxisMap(){z(this._spec.axisId)?ot(this._spec.axisId).forEach(t=>{this._releatedAxes.push(this._option.getComponentByUserId(t))}):z(this._spec.axisIndex)?ot(this._spec.axisIndex).forEach(t=>{this._releatedAxes.push(this._option.getComponentByIndex("axes",t))}):this._releatedAxes=this._option.getComponentsByKey("axes"),this._releatedAxes.forEach(t=>{t==null||t.getRegions().forEach(e=>{this._regionAxisMap["region_"+e.id]?this._regionAxisMap["region_"+e.id].push(t):this._regionAxisMap["region_"+e.id]=[t]})})}_initAxisDataZoomMap(){this._option.getComponentsByKey("dataZoom").forEach(t=>{t.relatedAxisComponent&&(this._axisDataZoomMap[t.relatedAxisComponent.id]=t)})}_initNeedOperatedItem(){const t=this._spec.seriesId,e=this._spec.seriesIndex;this._relativeRegions.forEach(i=>{const r=[];i.getSeries().forEach(s=>{(t&&ot(t).includes(s.userId.toString())||e&&ot(e).includes(s.getSpecIndex())||!e&&!t)&&r.push(...s.getMarksWithoutRoot()),this._itemMap[i.id]=r})}),this._linkedSeries.forEach(i=>{this._linkedItemMap[i.id]=i.getMarksWithoutRoot()})}_initMarkBrushState(t,e){this._brushComponents.forEach((i,r)=>{r!==t&&i.children[0].removeAllChild()}),this._inBrushElementsMap={},this._outOfBrushElementsMap={},this._linkedInBrushElementsMap={},this._linkedOutOfBrushElementsMap={},this._option.getAllSeries().forEach(i=>{i.getMarksWithoutRoot().forEach(r=>{const s=r.getProduct();!s||!s.elements||!s.elements.length||s.elements.forEach(a=>{const o=r.id+"_"+a.key;a.removeState("inBrush"),a.removeState("outOfBrush"),a.addState(e),this._outOfBrushElementsMap[o]=a,this._linkedOutOfBrushElementsMap[o]=a})})})}initEvent(){}onRender(t){}changeRegions(t){}_getNeedClearVRenderComponents(){return this._brushComponents}_compareSpec(t,e){this._brushComponents&&this._relativeRegions.forEach((r,s)=>{this._updateBrushComponent(r,s)});const i=super._compareSpec(t,e);return mi(e,t)||(i.reRender=!0,i.reMake=!0),i}onLayoutEnd(t){var e;super.onLayoutEnd(t),!this._option.disableTriggerEvent&&((e=this._spec.visible)===null||e===void 0||e)&&(this._brushComponents?this._relativeRegions.forEach((i,r)=>{this._updateBrushComponent(i,r)}):(this._brushComponents=[],this._relativeRegions.forEach((i,r)=>{this._createBrushComponent(i,r)})))}clearGraphic(){this._brushComponents&&this._brushComponents.forEach(t=>{t._container.incrementalClearChild()})}clear(){if(this._brushComponents){const t=this.getContainer();this._brushComponents.forEach(e=>{e.removeAllChild(),e.releaseBrushEvents(),t&&t.removeChild(e)}),this._brushComponents=null}}}tk.type=mt.brush,tk.specKey="brush";const pYt=()=>{Z.registerComponent(tk.type,tk)};class ek extends bs{constructor(){super(...arguments),this.type=mt.customMark,this.specKey="customMark",this.layoutType="none",this.layoutZIndex=ai.CustomMark,this.layoutLevel=Wo.CustomMark}static getSpecInfo(t){const e=t[this.specKey];return e?ut(e)?e.map((i,r)=>({spec:i,specPath:[this.specKey,r],specInfoPath:["component",this.specKey,r],type:mt.customMark})):[{spec:e,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:mt.customMark}]:null}created(){super.created(),this.initMarks(),this.initEvent()}getMarkAttributeContext(){return this._markAttributeContext}_buildMarkAttributeContext(){this._markAttributeContext={vchart:this._option.globalInstance,globalScale:(t,e)=>{var i;return(i=this._option.globalScale.getScale(t))===null||i===void 0?void 0:i.scale(e)}}}initMarks(){if(!this._spec)return;const t=this._option&&this._option.getAllSeries(),e=this._option.animation!==!1,i=[];t&&t.length&&t.forEach(r=>{const s=r&&r.getMarksWithoutRoot();s&&s.length&&s.forEach(a=>{i.push(a)})}),this._createExtensionMark(this._spec,null,`${Kt}_series_${this.id}_extensionMark`,0,{depend:i,hasAnimation:e})}_createExtensionMark(t,e,i,r=0,s){var a;const o=this._createMark({type:t.type,name:`${i}_${r}`},{skipBeforeLayouted:!0,attributeContext:this._getMarkAttributeContext(),componentType:t.componentType,key:t.dataKey});if(o){if(s.hasAnimation&&t.animation){const l=Ae({},Ee(t.type,t,this._markAttributeContext));o.setAnimationConfig(l)}if(s.depend&&s.depend.length&&o.setDepend(...s.depend),F(e)?this._marks.addMark(o):e&&e.addMark(o),this.initMarkStyleWithSpec(o,t),t.type==="group"&&(i=`${i}_${r}`,(a=t.children)===null||a===void 0||a.forEach((l,u)=>{this._createExtensionMark(l,o,i,u,s)})),z(t.dataId)||st(t.dataIndex)){const l=this.getChart().getSeriesData(t.dataId,t.dataIndex);l&&(l.target.addListener("change",()=>{o.getData().updateData()}),o.setDataView(l))}}}initEvent(){}_compareSpec(t,e){const i=super._compareSpec(t,e);return mi(e,t)||(i.reMake=!0),i.change=!0,i.reRender=!0,i}changeRegions(t){}_getNeedClearVRenderComponents(){return[]}onRender(t){}afterCompile(){this.getMarks().forEach(t=>{const e=t.getProduct();e&&e.addEventListener(Ht.AFTER_ELEMENT_ENCODE,()=>{if(this._isLayout===!1){const i=e.getGroupGraphicItem();i.listenerCount("*")===0&&i.addEventListener("*",(r,s)=>this._delegateEvent(i,r,s))}})})}_getMarkAttributeContext(){return{vchart:this._option.globalInstance,chart:this.getChart(),globalScale:(t,e)=>{var i;return(i=this._option.globalScale.getScale(t))===null||i===void 0?void 0:i.scale(e)},getLayoutBounds:()=>{const{x:t,y:e}=this.getLayoutStartPoint(),{width:i,height:r}=this.getLayoutRect();return new Fn().set(t,e,t+i,e+r)}}}_getLayoutRect(){const t=new Fn;return this.getMarks().forEach(e=>{const i=e.getProduct();i&&t.union(i.getBounds())}),t.empty()?{width:0,height:0}:{width:t.width(),height:t.height()}}getBoundsInRect(t){this.setLayoutRect(t);const e=this._getLayoutRect(),{x:i,y:r}=this.getLayoutStartPoint();return{x1:i,y1:r,x2:i+e.width,y2:r+e.height}}}ek.type=mt.customMark,ek.specKey="customMark";const fYt=()=>{Z.registerComponent(ek.type,ek)};function XG(n,t,e=0){return e>Math.max(t.x1-n.x2,n.x1-t.x2,t.y1-n.y2,n.y1-t.y2)}function gYt(n){return{x1:n.x,x2:n.x+n.width,y1:n.y,y2:n.y+n.height}}function mYt(n){return{x:n.x1,y:n.y1,width:n.x2-n.x1,height:n.y2-n.y1}}function Lrt(n){var t;if(!n||n.length===0)return[];if(n.length===1)return[n[0].rect];const e=n.map(r=>{var s;return Object.assign(Object.assign({},r),{bound:gYt(r.rect),anchorCandidates:yYt((s=r.anchors)!==null&&s!==void 0?s:[],r.point,r.rect,r.offset)})}),i=[];i.push(e[0].bound);for(let r=1;r<=e.length-1;r++){const s=e[r],a=s.bound;let o=i.some(l=>XG(l,a));if(s.anchorCandidates)if(o&&((t=s.anchorCandidates)===null||t===void 0?void 0:t.length)>0){for(let l=0;l<s.anchorCandidates.length;l++){const u=s.anchorCandidates[l],h={x1:u.x,y1:u.y,x2:u.x+a.x2-a.x1,y2:u.y+a.y2-a.y1,anchor:u};if(!i.some(c=>XG(c,h))){i.push(h),o=!1;break}}o&&i.push(s.bound)}else i.push(s.bound)}return i.map(r=>mYt(r))}function vYt(n,t,e){const i=n.map(u=>u.pointCoord),{x1:r,x2:s,y1:a,y2:o}=UCt(i),l=e([(r+s)/2,(a+o)/2]);return l?Lrt(n.map(u=>{const h=u.rect,c=Drt(t,u.pointCoord)?e(_Yt(t,[u.pointCoord.x,u.pointCoord.y],KG(qG(u.point,l)))):u.point;c&&(h.x=c.x,h.y=c.y);const d=KG(qG(u.point,l));let p;const f=[];return d>=-45&&d<45?(p="top",f.push("left","right")):d>=45&&d<135?p="right":d>=-135&&d<-45?(p="left",f.push("left")):(p="bottom",f.push("left","right")),u.anchors=f,u.offset=20,u.rect=D5(u.rect,p,0),u})):[]}function KG(n){return n>180?n-360:n}function qG(n,t){return 180*Math.atan2(n.y-t.y,n.x-t.x)/Math.PI+90}function _Yt(n,t,e,i=200){const r=5621/i;let s=t;for(let a=1;a<=r;a++){const o=nkt(s,i,e);if(!Drt(n,o))return[o.x,o.y];s=[o.x,o.y]}return t}function Drt(n,t){for(let e=0;e<n.length;e++)if(ikt(t,n[e]))return!0;return!1}function D5(n,t,e=0){const i=Object.assign({},n);return t==="top"?(i.x-=n.width/2,i.y-=e+n.height/2):t==="bottom"?(i.x-=n.width/2,i.y+=e-n.height/2):t==="left"?(i.x-=e+n.width,i.y-=n.height/2):t==="right"&&(i.x+=e,i.y-=n.height/2),i}function yYt(n,t,e,i=0){const r=[];return n.forEach(s=>{const{x:a,y:o}=D5(Object.assign(Object.assign({},t),{width:e.width,height:e.height}),s,i);r.push({x:a,y:o})}),r}class ik extends bs{constructor(){super(...arguments),this.type=mt.mapLabel,this.name=mt.mapLabel,this.specKey="mapLabel",this.layoutType="none",this.layoutZIndex=ai.MarkPoint,this._activeDatum=[]}static getSpecInfo(t){const e=t[this.specKey];return e&&e.visible&&!z(e.series)?[{spec:e,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:mt.mapLabel}]:null}setAttrFromSpec(){var t,e,i,r;this.nameField=(t=this._spec.nameField)!==null&&t!==void 0?t:(e=this._series)===null||e===void 0?void 0:e.getDimensionField()[0],this.valueField=(i=this._spec.valueField)!==null&&i!==void 0?i:(r=this._series)===null||r===void 0?void 0:r.getMeasureField()[0]}created(){super.created(),this._spec.visible&&(this.initRelatedInfo(),this.initData(),this.initEvent())}initRelatedInfo(){var t,e,i,r,s,a,o,l;this._series=this._option.getSeriesInUserIdOrIndex([this._spec.seriesId])[0],this._spec.position==="outer"&&(this._map=(e=(t=this._regions[0].getSeriesInType("map")[0])===null||t===void 0?void 0:t.getMapViewData())===null||e===void 0?void 0:e.latestData,this._longitudeField=(s=(r=(i=this._regions[0]).getSpec)===null||r===void 0?void 0:r.call(i))===null||s===void 0?void 0:s.longitudeField,this._latitudeField=(l=(o=(a=this._regions[0]).getSpec)===null||o===void 0?void 0:o.call(a))===null||l===void 0?void 0:l.latitudeField)}initData(){const t=this._series;if(!t)return;const e=t.getViewData();if(e){const i=new Le(this._option.dataSet,{name:`${this.name}_data`});i.parse([e],{type:"dataview"}),i.transform({type:"copyDataView",level:$o.copyDataView},!1),this._data=new Cl(this._option,i),i.target.addListener("change",()=>{this._spec.trigger!=="hover"&&this._spec.trigger!=="click"&&(this._activeDatum=this._data.getLatestData())})}}initEvent(){var t;this.event.on("zoom",{filter:r=>this._isRelativeModel(r.model)},r=>(this.handleZoom(r),!0)),this.event.on("panmove",{filter:r=>this._isRelativeModel(r.model)},r=>(this.handlePan(r),!0));const e=this._spec.trigger;if(e==="none")return;const i=(t=this.getCompiler())===null||t===void 0?void 0:t.getVGrammarView();i&&(e==="hover"?(i.addEventListener("element-highlight:start",r=>{this._isRelativeSeries(r.options.seriesId)&&this._updateDatum(r.elements[0].getDatum())}),i.addEventListener("element-highlight:reset",r=>{this._isRelativeSeries(r.options.seriesId)&&this._updateDatum(null)})):e==="click"&&(i.addEventListener("element-select:start",r=>{this._isRelativeSeries(r.options.seriesId)&&this._updateDatum(r.elements[0].getDatum())}),i.addEventListener("elementSelectReset",r=>{this._isRelativeSeries(r.options.seriesId)&&this._updateDatum([])})))}handlePan(t){const{delta:e}=t;this._markerComponents.forEach(i=>{i.translate(e[0],e[1])})}handleZoom(t){this._updateMarkerLayoutAttribute()}_updateDatum(t){this._activeDatum=t,this._markerComponents.forEach((e,i)=>{var r;const s=(r=this._data)===null||r===void 0?void 0:r.getLatestData()[i];this._activeDatum.includes(s)?e.setAttribute("visible",!0):e.setAttribute("visible",!1)})}dataToPosition(t){return this._series.dataToPosition(t)}updateLayoutAttribute(){var t;const e=(t=this._data)===null||t===void 0?void 0:t.getLatestData();e&&e.length!==0&&(super.updateLayoutAttribute(),this._updateMarkerLayoutAttribute())}_updateMarkerLayoutAttribute(){var t;const e=[],i=[];this._markerComponents||(this._markerComponents=(t=this._data)===null||t===void 0?void 0:t.getLatestData().map((s,a)=>{var o;const l=new Kh({position:void 0,animation:!1});return l&&(l.name=`${this.name}_marker_${a}`,l.id=(o=this._spec.id)!==null&&o!==void 0?o:`${this.name}_marker_${this.id}`,l.setAttribute("zIndex",this.layoutZIndex)),l})),this._markerComponents.forEach((s,a)=>{s.removeAllChild();const{pairInfo:o,contentMarks:l}=this._evaluateMarker(this._data.getLatestData()[a],a);o&&e.push(o),l&&i.push(l)});const r=this._layoutLabels(e);this._layoutMarkers(r,i),this._renderMarkers()}_evaluateMarker(t,e){var i,r,s,a,o,l,u,h,c,d,p,f;let g=0,_=0,v=0,y=0,b=0;const S=this._spec.position||"top",A=this._spec.offset,w=Ru((i=this._spec.background)===null||i===void 0?void 0:i.padding),C=this._spec.space||0;_+=((w==null?void 0:w.left)||0)+((w==null?void 0:w.right)||0),v+=((w==null?void 0:w.top)||0)+((w==null?void 0:w.bottom)||0);const k={},M=this.dataToPosition(t),P=K3({});if(P.name=`${this.name}_marker_itemContainer_${e}`,k.container=P,(r=this._spec.background)===null||r===void 0?void 0:r.visible){const O=ep(qt(Object.assign({},this._spec.background.style)));O.setAttributes(M),k.labelBackground=O,P.appendChild(O)}if(!((s=this._spec.icon)===null||s===void 0)&&s.visible){const O=P2(qt(Object.assign({},this._spec.icon.style)));O.setAttributes(M),O.setAttribute("symbolType",(a=this._spec.icon.style)===null||a===void 0?void 0:a.shape);const L=O.AABBBounds,H=(o=(L==null?void 0:L.y2)-(L==null?void 0:L.y1))!==null&&o!==void 0?o:0,j=(l=(L==null?void 0:L.x2)-(L==null?void 0:L.x1))!==null&&l!==void 0?l:0;k.icon=O,P.appendChild(O),b=H,y+=j,g++}if(!((u=this._spec.nameLabel)===null||u===void 0)&&u.visible){const O=Ug(qt(Object.assign({},this._spec.nameLabel.style)));O.setAttributes(M),O.setAttribute("text",t[this.nameField]);const L=O.AABBBounds,H=(h=(L==null?void 0:L.y2)-(L==null?void 0:L.y1))!==null&&h!==void 0?h:0,j=(c=(L==null?void 0:L.x2)-(L==null?void 0:L.x1))!==null&&c!==void 0?c:0;k.nameLabel=O,P.appendChild(O),b=Math.max(b,H),y+=j,g++}if(!((d=this._spec.valueLabel)===null||d===void 0)&&d.visible&&z(t[this.valueField])){const O=Ug(qt(Object.assign({},this._spec.valueLabel.style)));O.setAttributes(M),O.setAttribute("text",t[this.valueField]);const L=O.AABBBounds,H=(p=(L==null?void 0:L.y2)-(L==null?void 0:L.y1))!==null&&p!==void 0?p:0,j=(f=(L==null?void 0:L.x2)-(L==null?void 0:L.x1))!==null&&f!==void 0?f:0;k.valueLabel=O,P.appendChild(O),b=Math.max(b,H),y+=j,g++}const E=Object.values(k).find(O=>!!O&&O.type!=="group"),I={x:E==null?void 0:E.getComputedAttribute("x"),y:E==null?void 0:E.getComputedAttribute("y")},D={x:I.x,y:I.y,width:0,height:0};D.width=_+y+(g-1)*C,D.height=v+b;const N={rect:D,point:I,index:e};if(S!=="outer"){const O=["top","right","left","bottom"].filter(L=>L!==S);N.rect=D5(D,S,A),N.anchors=O,N.offset=A}else N.pointCoord={x:+(t==null?void 0:t[this._longitudeField]),y:+(t==null?void 0:t[this._latitudeField])};return{pairInfo:N,contentMarks:k}}_layoutMarkers(t,e){var i,r,s;for(let a=0;a<e.length;a++){if(!t[a]||!e[a])return;const{icon:o,nameLabel:l,valueLabel:u,labelBackground:h,container:c}=e[a],d=t[a],p=Ru((i=this._spec.background)===null||i===void 0?void 0:i.padding),f=this._spec.space||0,g=d.height/2;let _=(p==null?void 0:p.left)||0;[o,l,u].forEach((A,w)=>{var C,k;if(A){const M=A.AABBBounds;let P=0;A.type==="symbol"&&(P+=((C=M.x2-M.x1)!==null&&C!==void 0?C:0)/2),A.setAttributes({x:_+P,y:g}),_+=(k=M.x2-M.x1)!==null&&k!==void 0?k:0,w!==2&&(_+=f)}}),h==null||h.setAttributes({x:0,y:0,width:d.width,height:d.height}),c==null||c.setAttributes({dx:-d.width/2,dy:-d.height/2});const v=this._data.getLatestData()[a],y=this.dataToPosition(v),b=this.getRegions()[0].getLayoutStartPoint(),S=!(!(!((r=this._spec.leader)===null||r===void 0)&&r.visible)||!(o||l||u));this._markerComponents[a].setAttributes({x:b.x,y:b.y,position:y,visible:this._activeDatum.includes(v),itemContent:{refX:0,type:"custom",renderCustomCallback:()=>c,autoRotate:!1,offsetX:d.x+d.width/2-y.x,offsetY:d.y+d.height/2-y.y},itemLine:{visible:S,type:"type-po",lineStyle:qt(Object.assign({},(s=this._spec.leader)===null||s===void 0?void 0:s.style)),startSymbol:{visible:!1}}})}}_renderMarkers(){if(this._markerComponents&&this._markerComponents.length)for(let t=0;t<this._markerComponents.length;t++)this.getContainer().add(this._markerComponents[t])}_layoutLabels(t){return this._spec.position==="outer"&&this._map?vYt(t,this._map,e=>this._series.dataToPosition({[this._longitudeField]:e[0],[this._latitudeField]:e[1]})):Lrt(t)}_isRelativeModel(t){var e,i,r;const s=(i=(e=this._series.getXAxisHelper())===null||e===void 0?void 0:e.getAxisId())!==null&&i!==void 0?i:(r=this._series.getCoordinateHelper())===null||r===void 0?void 0:r.getCoordinateId();return(t==null?void 0:t.id)===s}_isRelativeSeries(t){return(t==null?void 0:t.id)===this._series.id}onRender(t){}changeRegions(){}_getNeedClearVRenderComponents(){return this._markerComponents}}ik.type=mt.mapLabel,ik.specKey="mapLabel";const bYt=()=>{Z.registerComponent(ik.type,ik)};class ED{constructor(t,e){this._chartLayoutRect={x:0,y:0,width:1,height:1},this._col=1,this._row=1,this._elementMap=new Map,this.standardizationSpec(t),this._gridInfo=t,this._col=t.col,this._row=t.row,this._colSize=new Array(this._col).fill(null),this._rowSize=new Array(this._row).fill(null),this._colElements=new Array(this._col).fill([]),this._rowElements=new Array(this._row).fill([]),this._onError=e==null?void 0:e.onError,this.initUserSetting()}standardizationSpec(t){var e,i,r;t.col=(e=t.col)!==null&&e!==void 0?e:1,t.row=(i=t.row)!==null&&i!==void 0?i:1,t.elements=(r=t.elements)!==null&&r!==void 0?r:[]}initUserSetting(){this._gridInfo.colWidth&&this.setSizeFromUserSetting(this._gridInfo.colWidth,this._colSize,this._col,this._chartLayoutRect.width),this._gridInfo.rowHeight&&this.setSizeFromUserSetting(this._gridInfo.rowHeight,this._rowSize,this._row,this._chartLayoutRect.height),this._colSize.forEach((t,e)=>{t||(this._colSize[e]={value:0,isUserSetting:!1,isLayoutSetting:!1})}),this._rowSize.forEach((t,e)=>{t||(this._rowSize[e]={value:0,isUserSetting:!1,isLayoutSetting:!1})})}setSizeFromUserSetting(t,e,i,r){t.forEach(s=>{s.index<0&&s.index>=i||(st(s.size)?e[s.index]={value:+s.size,isUserSetting:!0,isLayoutSetting:!1}:ft(s.size)&&(e[s.index]={value:s.size(r),isUserSetting:!0,isLayoutSetting:!1}))})}clearLayoutSize(){this._colSize.forEach(t=>{t.isLayoutSetting=!1,t.isUserSetting||(t.value=0)}),this._rowSize.forEach(t=>{t.isLayoutSetting=!1,t.isUserSetting||(t.value=0)})}getItemGridInfo(t){var e;const i=this._elementMap.get(t);if(i)return i;let r;return r=(e=this._gridInfo.elements)===null||e===void 0?void 0:e.find(s=>{var a;if("modelId"in s&&z(s.modelId)){if(z(t.model.userId)&&t.model.userId===s.modelId)return!0}else if("modelKey"in s&&z(s.modelKey)&&"modelIndex"in s&&z(s.modelIndex)&&((a=t.model.specKey)!==null&&a!==void 0?a:t.model.type)===s.modelKey&&t.model.getSpecIndex()===s.modelIndex)return!0;return!1}),r||(r={col:0,colSpan:1,row:0,rowSpan:1}),this._elementMap.set(t,r),r}getSizeFromGrid(t,e){var i;const r=e==="col"?this._colSize:this._rowSize;let s=0;for(let a=t[e];a<t[e]+((i=t[`${e}Span`])!==null&&i!==void 0?i:1);a++)s+=r[a].value;return s}getSizeFromUser(t,e){var i,r;const s=e==="col"?this._colSize:this._rowSize;if(!(!((i=s[t[e]])===null||i===void 0)&&i.isUserSetting))return;let a=0;for(let o=t[e];o<t[e]+((r=t[`${e}Span`])!==null&&r!==void 0?r:1);o++){if(!s[o].isUserSetting)return;a+=s[o].value}return a}setItemLayoutSizeToGrid(t,e){if(Lv(t)){if(e.colSpan&&e.colSpan>1||this._colSize[e.col].isUserSetting)return;this._colSize[e.col].value=Math.max(this._colSize[e.col].value,t.getLayoutRect().width+t.layoutPaddingLeft+t.layoutPaddingRight),this._colSize[e.col].isLayoutSetting=!0}else{if(e.rowSpan&&e.rowSpan>1||this._rowSize[e.row].isUserSetting)return;this._rowSize[e.row].value=Math.max(this._rowSize[e.row].value,t.getLayoutRect().height+t.layoutPaddingTop+t.layoutPaddingBottom),this._rowSize[e.row].isLayoutSetting=!0}}layoutGrid(t){const e=t==="col"?this._colSize:this._rowSize;let i=t==="col"?this._chartLayoutRect.width:this._chartLayoutRect.height;const r=[];e.forEach(s=>{s.isUserSetting||s.isLayoutSetting?i-=s.value:r.push(s)}),i<0&&console.warn(`layout content ${t} size bigger than chart`),r.forEach(s=>s.value=i/r.length)}getItemPosition(t){const e=this.getItemGridInfo(t),i={x:this._chartLayoutRect.x,y:this._chartLayoutRect.y};for(let r=0;r<e.col;r++)i.x+=this._colSize[r].value;for(let r=0;r<e.row;r++)i.y+=this._rowSize[r].value;return i.x+=t.layoutPaddingLeft+t.layoutOffsetX,i.y+=t.layoutPaddingTop+t.layoutOffsetY,i}getItemLayoutRect(t){var e,i;const r=this.getItemGridInfo(t);return{width:((e=this.getSizeFromGrid(r,"col"))!==null&&e!==void 0?e:this._chartLayoutRect.width)-t.layoutPaddingLeft-t.layoutPaddingRight,height:((i=this.getSizeFromGrid(r,"row"))!==null&&i!==void 0?i:this._chartLayoutRect.height)-t.layoutPaddingTop-t.layoutPaddingBottom}}layoutItems(t,e,i,r){this._chartLayoutRect=i,this._chartViewBox=r,this.clearLayoutSize(),e.sort((c,d)=>d.layoutLevel-c.layoutLevel);const s=e.filter(c=>c.layoutType==="normal"&&c.getModelVisible()!==!1),a=s.filter(c=>Lv(c)),o=s.filter(c=>!Lv(c));s.forEach(c=>{this.layoutOneItem(c,"user",!1)});const l=e.filter(c=>c.layoutType==="region-relative"),u=l.filter(c=>Lv(c)),h=l.filter(c=>!Lv(c));u.forEach(c=>this.layoutOneItem(c,"user",!1)),this.layoutGrid("col"),o.forEach(c=>this.layoutOneItem(c,"colGrid",!1)),h.forEach(c=>{this.layoutOneItem(c,"colGrid",!1)}),this.layoutGrid("row"),h.forEach(c=>{this.layoutOneItem(c,"grid",!1)}),a.forEach(c=>this.layoutOneItem(c,"grid",!1)),u.forEach(c=>{this.layoutOneItem(c,"grid",!0)}),this.layoutGrid("col"),e.filter(c=>c.layoutType==="region").forEach(c=>this.layoutOneItem(c,"grid",!1)),this.layoutAbsoluteItems(e.filter(c=>c.layoutType==="absolute")),e.filter(c=>c.layoutType!=="absolute").forEach(c=>{c.setLayoutStartPosition(this.getItemPosition(c))})}layoutAbsoluteItems(t){t.forEach(e=>{e.absoluteLayoutInRect(this._chartLayoutRect)})}layoutOneItem(t,e,i){var r,s;const a=e==="rowGrid"||e==="grid"?this.getSizeFromGrid.bind(this):this.getSizeFromUser.bind(this),o=e==="colGrid"||e==="grid"?this.getSizeFromGrid.bind(this):this.getSizeFromUser.bind(this),l=this.getItemGridInfo(t),u={width:((r=o(l,"col"))!==null&&r!==void 0?r:this._chartLayoutRect.width)-t.layoutPaddingLeft-t.layoutPaddingRight,height:((s=a(l,"row"))!==null&&s!==void 0?s:this._chartLayoutRect.height)-t.layoutPaddingTop-t.layoutPaddingBottom},h=t.computeBoundsInRect(u);st(h.width)||(h.width=u.width),st(h.height)||(h.height=u.height),t.setLayoutRect(e!=="grid"?h:u),this.setItemLayoutSizeToGrid(t,l)}}function Lv(n){return n.layoutOrient==="left"||n.layoutOrient==="right"}ED.type="grid";const xYt=()=>{Z.registerLayout(ED.type,ED)};class OD extends qF{layoutItems(t,e,i,r){this._layoutInit(t,e,i,r),this._layoutNormalItems(e);const s={left:this.leftCurrent,top:this.topCurrent,right:this.rightCurrent,bottom:this.bottomCurrent},a=e.filter(v=>v.layoutType==="absolute"),o=a.filter(v=>v.layoutOrient==="z");let l={width:0,height:0};o.length&&(l=o[0].getLayoutRect()),this.leftCurrent+=l.width/8,this.rightCurrent-=l.width/8,this.topCurrent+=l.height/8,this.bottomCurrent-=l.height/8;const{regionItems:u,relativeItems:h,relativeOverlapItems:c,allRelatives:d,overlapItems:p}=this._groupItems(e);this.layoutRegionItems(u,h,c,p),this._processAutoIndent(u,h,c,p,d,s);const f=a.filter(v=>v.layoutOrient!=="z");this.layoutAbsoluteItems(f);const g=h.filter(v=>v.model.specKey==="axes"&&Ii(v.layoutOrient))[0],_=h.filter(v=>v.model.specKey==="axes"&&cl(v.layoutOrient))[0];if(g&&o.length){const v=g.getLayoutStartPoint(),y=g.getLayoutRect(),b={x:_.layoutOrient==="left"?v.x+y.width:v.x,y:v.y,width:this._chartLayoutRect.width,height:this._chartLayoutRect.height};o[0].model.directionStr=_.layoutOrient==="left"?"r2l":"l2r";const S=g.getLayoutRect(),A=_.getLayoutRect(),w={length:o[0].getLayoutRect().width,width:S.width,height:A.height};g.model.setLayout3dBox&&g.model.setLayout3dBox(w),_.model.setLayout3dBox&&_.model.setLayout3dBox(w),o[0].model.setLayout3dBox&&o[0].model.setLayout3dBox(w),this.layoutZAxisItems(o,b)}}layoutZAxisItems(t,e){t.forEach(i=>{i.absoluteLayoutInRect(e)})}getItemComputeLayoutRect(t,e){return e||(e={offsetLeft:0,offsetRight:0,offsetTop:0,offsetBottom:0}),{width:this.rightCurrent-this.leftCurrent-t.layoutPaddingLeft-t.layoutPaddingRight-(e.offsetLeft+e.offsetRight),height:this.bottomCurrent-this.topCurrent-t.layoutPaddingTop-t.layoutPaddingBottom-(e.offsetTop+e.offsetBottom)}}_checkAutoIndent(t){const e={top:0,left:0,bottom:0,right:0},i=this._chartViewBox.x2-this._chartViewBox.x1-this.rightCurrent,r=this._chartViewBox.y2-this._chartViewBox.y1-this.bottomCurrent;return t.forEach(s=>{if(!s.getModelVisible()||!s.autoIndent)return;const a=s.layoutOrient==="left"||s.layoutOrient==="right",o=s.getLastComputeOutBounds();a?(e.top=Math.max(e.top,o.y1-this.topCurrent),e.bottom=Math.max(e.bottom,o.y2-r)):(e.left=Math.max(e.left,o.x1-this.leftCurrent),e.right=Math.max(e.right,o.x2-i))}),e}}OD.type="layout3d";const SYt=()=>{Z.registerLayout(OD.type,OD)},AYt=()=>{BBt()};class Qy extends Sr{constructor(){super(...arguments),this.type=Qy.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{width:void 0,height:void 0,lineWidth:0})}}Qy.type="image";const wYt=()=>{Z.registerMark(Qy.type,Qy),Hjt()},CYt=()=>{Sit(),yT(),Uu(),zm(),Gs(),ST(),Yu(),s5(),Pp(),$nt(),wYt(),ert(),bT(),Ant(),n5(),Gnt()};ar.useRegisters([QHt,n9t,l9t,v9t,IGt,DGt,BGt,zGt,RGt,WGt,$Gt,GGt,XGt,iUt,nUt,VGt,qGt,ZGt,sUt,QGt,tUt,eUt,rUt,aUt,NGt,oUt,FGt,u9t,LGt,HGt,KGt,JGt,UGt,YGt,Ws,$s,GHt,UHt,YHt,F1,Hm,dUt,bUt,wUt,TUt,OUt,LUt,DUt,FUt,lnt,JUt,eYt,hYt,QUt,iYt,cYt,dYt,tYt,aYt,oYt,uYt,pYt,fYt,bYt,AYt,xYt,SYt,CYt,CHt,kHt,j6t,r4t,u4t,h4t,c4t,l4t,o4t]);const x_=n=>{let t;return typeof n=="number"?t={key:n,value:n}:t=n,t},Xx=(n,t)=>{const{fields:e}=n??{};return e[t]};var nk={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */nk.exports;(function(n,t){(function(){var e,i="4.17.21",r=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",o="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",u=500,h="__lodash_placeholder__",c=1,d=2,p=4,f=1,g=2,_=1,v=2,y=4,b=8,S=16,A=32,w=64,C=128,k=256,M=512,P=30,E="...",I=800,D=16,N=1,O=2,L=3,H=1/0,j=9007199254740991,G=17976931348623157e292,U=NaN,$=4294967295,q=$-1,tt=$>>>1,it=[["ary",C],["bind",_],["bindKey",v],["curry",b],["curryRight",S],["flip",M],["partial",A],["partialRight",w],["rearg",k]],nt="[object Arguments]",K="[object Array]",J="[object AsyncFunction]",Q="[object Boolean]",dt="[object Date]",bt="[object DOMException]",xt="[object Error]",ht="[object Function]",St="[object GeneratorFunction]",yt="[object Map]",vt="[object Number]",pt="[object Null]",jt="[object Object]",Lt="[object Promise]",Yt="[object Proxy]",Nt="[object RegExp]",te="[object Set]",ge="[object String]",Pe="[object Symbol]",we="[object Undefined]",Ze="[object WeakMap]",je="[object WeakSet]",oe="[object ArrayBuffer]",ne="[object DataView]",De="[object Float32Array]",ye="[object Float64Array]",Xe="[object Int8Array]",Gi="[object Int16Array]",wn="[object Int32Array]",Mi="[object Uint8Array]",di="[object Uint8ClampedArray]",Ui="[object Uint16Array]",oo="[object Uint32Array]",V1=/\b__p \+= '';/g,jT=/\b(__p \+=) '' \+/g,W1=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ep=/&(?:amp|lt|gt|quot|#39);/g,$m=/[&<>"']/g,me=RegExp(Ep.source),Cr=RegExp($m.source),Xu=/<%-([\s\S]+?)%>/g,Dc=/<%([\s\S]+?)%>/g,Ol=/<%=([\s\S]+?)%>/g,Gm=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ist=/^\w*$/,nst=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,NT=/[\\^$.*+?()[\]{}|]/g,rst=RegExp(NT.source),zT=/^\s+/,sst=/\s/,ast=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ost=/\{\n\/\* \[wrapped with (.+)\] \*/,lst=/,? & /,ust=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,hst=/[()=,{}\[\]\/\s]/,cst=/\\(\\)?/g,dst=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,z5=/\w*$/,pst=/^[-+]0x[0-9a-f]+$/i,fst=/^0b[01]+$/i,gst=/^\[object .+?Constructor\]$/,mst=/^0o[0-7]+$/i,vst=/^(?:0|[1-9]\d*)$/,_st=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$1=/($^)/,yst=/['\n\r\u2028\u2029\\]/g,G1="\\ud800-\\udfff",bst="\\u0300-\\u036f",xst="\\ufe20-\\ufe2f",Sst="\\u20d0-\\u20ff",H5=bst+xst+Sst,V5="\\u2700-\\u27bf",W5="a-z\\xdf-\\xf6\\xf8-\\xff",Ast="\\xac\\xb1\\xd7\\xf7",wst="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Cst="\\u2000-\\u206f",kst=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",$5="A-Z\\xc0-\\xd6\\xd8-\\xde",G5="\\ufe0e\\ufe0f",U5=Ast+wst+Cst+kst,HT="['’]",Tst="["+G1+"]",Y5="["+U5+"]",U1="["+H5+"]",X5="\\d+",Mst="["+V5+"]",K5="["+W5+"]",q5="[^"+G1+U5+X5+V5+W5+$5+"]",VT="\\ud83c[\\udffb-\\udfff]",Pst="(?:"+U1+"|"+VT+")",Z5="[^"+G1+"]",WT="(?:\\ud83c[\\udde6-\\uddff]){2}",$T="[\\ud800-\\udbff][\\udc00-\\udfff]",Op="["+$5+"]",J5="\\u200d",Q5="(?:"+K5+"|"+q5+")",Est="(?:"+Op+"|"+q5+")",t4="(?:"+HT+"(?:d|ll|m|re|s|t|ve))?",e4="(?:"+HT+"(?:D|LL|M|RE|S|T|VE))?",i4=Pst+"?",n4="["+G5+"]?",Ost="(?:"+J5+"(?:"+[Z5,WT,$T].join("|")+")"+n4+i4+")*",Rst="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ist="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",r4=n4+i4+Ost,Lst="(?:"+[Mst,WT,$T].join("|")+")"+r4,Dst="(?:"+[Z5+U1+"?",U1,WT,$T,Tst].join("|")+")",Bst=RegExp(HT,"g"),Fst=RegExp(U1,"g"),GT=RegExp(VT+"(?="+VT+")|"+Dst+r4,"g"),jst=RegExp([Op+"?"+K5+"+"+t4+"(?="+[Y5,Op,"$"].join("|")+")",Est+"+"+e4+"(?="+[Y5,Op+Q5,"$"].join("|")+")",Op+"?"+Q5+"+"+t4,Op+"+"+e4,Ist,Rst,X5,Lst].join("|"),"g"),Nst=RegExp("["+J5+G1+H5+G5+"]"),zst=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Hst=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Vst=-1,Bi={};Bi[De]=Bi[ye]=Bi[Xe]=Bi[Gi]=Bi[wn]=Bi[Mi]=Bi[di]=Bi[Ui]=Bi[oo]=!0,Bi[nt]=Bi[K]=Bi[oe]=Bi[Q]=Bi[ne]=Bi[dt]=Bi[xt]=Bi[ht]=Bi[yt]=Bi[vt]=Bi[jt]=Bi[Nt]=Bi[te]=Bi[ge]=Bi[Ze]=!1;var Oi={};Oi[nt]=Oi[K]=Oi[oe]=Oi[ne]=Oi[Q]=Oi[dt]=Oi[De]=Oi[ye]=Oi[Xe]=Oi[Gi]=Oi[wn]=Oi[yt]=Oi[vt]=Oi[jt]=Oi[Nt]=Oi[te]=Oi[ge]=Oi[Pe]=Oi[Mi]=Oi[di]=Oi[Ui]=Oi[oo]=!0,Oi[xt]=Oi[ht]=Oi[Ze]=!1;var Wst={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},$st={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Gst={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ust={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Yst=parseFloat,Xst=parseInt,s4=typeof So=="object"&&So&&So.Object===Object&&So,Kst=typeof self=="object"&&self&&self.Object===Object&&self,ur=s4||Kst||Function("return this")(),UT=t&&!t.nodeType&&t,Bc=UT&&!0&&n&&!n.nodeType&&n,a4=Bc&&Bc.exports===UT,YT=a4&&s4.process,Sa=function(){try{var lt=Bc&&Bc.require&&Bc.require("util").types;return lt||YT&&YT.binding&&YT.binding("util")}catch{}}(),o4=Sa&&Sa.isArrayBuffer,l4=Sa&&Sa.isDate,u4=Sa&&Sa.isMap,h4=Sa&&Sa.isRegExp,c4=Sa&&Sa.isSet,d4=Sa&&Sa.isTypedArray;function Us(lt,Tt,At){switch(At.length){case 0:return lt.call(Tt);case 1:return lt.call(Tt,At[0]);case 2:return lt.call(Tt,At[0],At[1]);case 3:return lt.call(Tt,At[0],At[1],At[2])}return lt.apply(Tt,At)}function qst(lt,Tt,At,Zt){for(var xe=-1,ui=lt==null?0:lt.length;++xe<ui;){var zn=lt[xe];Tt(Zt,zn,At(zn),lt)}return Zt}function Aa(lt,Tt){for(var At=-1,Zt=lt==null?0:lt.length;++At<Zt&&Tt(lt[At],At,lt)!==!1;);return lt}function Zst(lt,Tt){for(var At=lt==null?0:lt.length;At--&&Tt(lt[At],At,lt)!==!1;);return lt}function p4(lt,Tt){for(var At=-1,Zt=lt==null?0:lt.length;++At<Zt;)if(!Tt(lt[At],At,lt))return!1;return!0}function Ku(lt,Tt){for(var At=-1,Zt=lt==null?0:lt.length,xe=0,ui=[];++At<Zt;){var zn=lt[At];Tt(zn,At,lt)&&(ui[xe++]=zn)}return ui}function Y1(lt,Tt){var At=lt==null?0:lt.length;return!!At&&Rp(lt,Tt,0)>-1}function XT(lt,Tt,At){for(var Zt=-1,xe=lt==null?0:lt.length;++Zt<xe;)if(At(Tt,lt[Zt]))return!0;return!1}function Yi(lt,Tt){for(var At=-1,Zt=lt==null?0:lt.length,xe=Array(Zt);++At<Zt;)xe[At]=Tt(lt[At],At,lt);return xe}function qu(lt,Tt){for(var At=-1,Zt=Tt.length,xe=lt.length;++At<Zt;)lt[xe+At]=Tt[At];return lt}function KT(lt,Tt,At,Zt){var xe=-1,ui=lt==null?0:lt.length;for(Zt&&ui&&(At=lt[++xe]);++xe<ui;)At=Tt(At,lt[xe],xe,lt);return At}function Jst(lt,Tt,At,Zt){var xe=lt==null?0:lt.length;for(Zt&&xe&&(At=lt[--xe]);xe--;)At=Tt(At,lt[xe],xe,lt);return At}function qT(lt,Tt){for(var At=-1,Zt=lt==null?0:lt.length;++At<Zt;)if(Tt(lt[At],At,lt))return!0;return!1}var Qst=ZT("length");function tat(lt){return lt.split("")}function eat(lt){return lt.match(ust)||[]}function f4(lt,Tt,At){var Zt;return At(lt,function(xe,ui,zn){if(Tt(xe,ui,zn))return Zt=ui,!1}),Zt}function X1(lt,Tt,At,Zt){for(var xe=lt.length,ui=At+(Zt?1:-1);Zt?ui--:++ui<xe;)if(Tt(lt[ui],ui,lt))return ui;return-1}function Rp(lt,Tt,At){return Tt===Tt?pat(lt,Tt,At):X1(lt,g4,At)}function iat(lt,Tt,At,Zt){for(var xe=At-1,ui=lt.length;++xe<ui;)if(Zt(lt[xe],Tt))return xe;return-1}function g4(lt){return lt!==lt}function m4(lt,Tt){var At=lt==null?0:lt.length;return At?QT(lt,Tt)/At:U}function ZT(lt){return function(Tt){return Tt==null?e:Tt[lt]}}function JT(lt){return function(Tt){return lt==null?e:lt[Tt]}}function v4(lt,Tt,At,Zt,xe){return xe(lt,function(ui,zn,Pi){At=Zt?(Zt=!1,ui):Tt(At,ui,zn,Pi)}),At}function nat(lt,Tt){var At=lt.length;for(lt.sort(Tt);At--;)lt[At]=lt[At].value;return lt}function QT(lt,Tt){for(var At,Zt=-1,xe=lt.length;++Zt<xe;){var ui=Tt(lt[Zt]);ui!==e&&(At=At===e?ui:At+ui)}return At}function tM(lt,Tt){for(var At=-1,Zt=Array(lt);++At<lt;)Zt[At]=Tt(At);return Zt}function rat(lt,Tt){return Yi(Tt,function(At){return[At,lt[At]]})}function _4(lt){return lt&&lt.slice(0,S4(lt)+1).replace(zT,"")}function Ys(lt){return function(Tt){return lt(Tt)}}function eM(lt,Tt){return Yi(Tt,function(At){return lt[At]})}function Um(lt,Tt){return lt.has(Tt)}function y4(lt,Tt){for(var At=-1,Zt=lt.length;++At<Zt&&Rp(Tt,lt[At],0)>-1;);return At}function b4(lt,Tt){for(var At=lt.length;At--&&Rp(Tt,lt[At],0)>-1;);return At}function sat(lt,Tt){for(var At=lt.length,Zt=0;At--;)lt[At]===Tt&&++Zt;return Zt}var aat=JT(Wst),oat=JT($st);function lat(lt){return"\\"+Ust[lt]}function uat(lt,Tt){return lt==null?e:lt[Tt]}function Ip(lt){return Nst.test(lt)}function hat(lt){return zst.test(lt)}function cat(lt){for(var Tt,At=[];!(Tt=lt.next()).done;)At.push(Tt.value);return At}function iM(lt){var Tt=-1,At=Array(lt.size);return lt.forEach(function(Zt,xe){At[++Tt]=[xe,Zt]}),At}function x4(lt,Tt){return function(At){return lt(Tt(At))}}function Zu(lt,Tt){for(var At=-1,Zt=lt.length,xe=0,ui=[];++At<Zt;){var zn=lt[At];(zn===Tt||zn===h)&&(lt[At]=h,ui[xe++]=At)}return ui}function K1(lt){var Tt=-1,At=Array(lt.size);return lt.forEach(function(Zt){At[++Tt]=Zt}),At}function dat(lt){var Tt=-1,At=Array(lt.size);return lt.forEach(function(Zt){At[++Tt]=[Zt,Zt]}),At}function pat(lt,Tt,At){for(var Zt=At-1,xe=lt.length;++Zt<xe;)if(lt[Zt]===Tt)return Zt;return-1}function fat(lt,Tt,At){for(var Zt=At+1;Zt--;)if(lt[Zt]===Tt)return Zt;return Zt}function Lp(lt){return Ip(lt)?mat(lt):Qst(lt)}function lo(lt){return Ip(lt)?vat(lt):tat(lt)}function S4(lt){for(var Tt=lt.length;Tt--&&sst.test(lt.charAt(Tt)););return Tt}var gat=JT(Gst);function mat(lt){for(var Tt=GT.lastIndex=0;GT.test(lt);)++Tt;return Tt}function vat(lt){return lt.match(GT)||[]}function _at(lt){return lt.match(jst)||[]}var yat=function lt(Tt){Tt=Tt==null?ur:Dp.defaults(ur.Object(),Tt,Dp.pick(ur,Hst));var At=Tt.Array,Zt=Tt.Date,xe=Tt.Error,ui=Tt.Function,zn=Tt.Math,Pi=Tt.Object,nM=Tt.RegExp,bat=Tt.String,wa=Tt.TypeError,q1=At.prototype,xat=ui.prototype,Bp=Pi.prototype,Z1=Tt["__core-js_shared__"],J1=xat.toString,_i=Bp.hasOwnProperty,Sat=0,A4=function(){var m=/[^.]+$/.exec(Z1&&Z1.keys&&Z1.keys.IE_PROTO||"");return m?"Symbol(src)_1."+m:""}(),Q1=Bp.toString,Aat=J1.call(Pi),wat=ur._,Cat=nM("^"+J1.call(_i).replace(NT,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tb=a4?Tt.Buffer:e,Ju=Tt.Symbol,eb=Tt.Uint8Array,w4=tb?tb.allocUnsafe:e,ib=x4(Pi.getPrototypeOf,Pi),C4=Pi.create,k4=Bp.propertyIsEnumerable,nb=q1.splice,T4=Ju?Ju.isConcatSpreadable:e,Ym=Ju?Ju.iterator:e,Fc=Ju?Ju.toStringTag:e,rb=function(){try{var m=Vc(Pi,"defineProperty");return m({},"",{}),m}catch{}}(),kat=Tt.clearTimeout!==ur.clearTimeout&&Tt.clearTimeout,Tat=Zt&&Zt.now!==ur.Date.now&&Zt.now,Mat=Tt.setTimeout!==ur.setTimeout&&Tt.setTimeout,sb=zn.ceil,ab=zn.floor,rM=Pi.getOwnPropertySymbols,Pat=tb?tb.isBuffer:e,M4=Tt.isFinite,Eat=q1.join,Oat=x4(Pi.keys,Pi),Hn=zn.max,kr=zn.min,Rat=Zt.now,Iat=Tt.parseInt,P4=zn.random,Lat=q1.reverse,sM=Vc(Tt,"DataView"),Xm=Vc(Tt,"Map"),aM=Vc(Tt,"Promise"),Fp=Vc(Tt,"Set"),Km=Vc(Tt,"WeakMap"),qm=Vc(Pi,"create"),ob=Km&&new Km,jp={},Dat=Wc(sM),Bat=Wc(Xm),Fat=Wc(aM),jat=Wc(Fp),Nat=Wc(Km),lb=Ju?Ju.prototype:e,Zm=lb?lb.valueOf:e,E4=lb?lb.toString:e;function Y(m){if(fn(m)&&!Ce(m)&&!(m instanceof Ke)){if(m instanceof Ca)return m;if(_i.call(m,"__wrapped__"))return Oj(m)}return new Ca(m)}var Np=function(){function m(){}return function(x){if(!sn(x))return{};if(C4)return C4(x);m.prototype=x;var T=new m;return m.prototype=e,T}}();function ub(){}function Ca(m,x){this.__wrapped__=m,this.__actions__=[],this.__chain__=!!x,this.__index__=0,this.__values__=e}Y.templateSettings={escape:Xu,evaluate:Dc,interpolate:Ol,variable:"",imports:{_:Y}},Y.prototype=ub.prototype,Y.prototype.constructor=Y,Ca.prototype=Np(ub.prototype),Ca.prototype.constructor=Ca;function Ke(m){this.__wrapped__=m,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=$,this.__views__=[]}function zat(){var m=new Ke(this.__wrapped__);return m.__actions__=xs(this.__actions__),m.__dir__=this.__dir__,m.__filtered__=this.__filtered__,m.__iteratees__=xs(this.__iteratees__),m.__takeCount__=this.__takeCount__,m.__views__=xs(this.__views__),m}function Hat(){if(this.__filtered__){var m=new Ke(this);m.__dir__=-1,m.__filtered__=!0}else m=this.clone(),m.__dir__*=-1;return m}function Vat(){var m=this.__wrapped__.value(),x=this.__dir__,T=Ce(m),R=x<0,W=T?m.length:0,X=tlt(0,W,this.__views__),et=X.start,rt=X.end,ct=rt-et,Et=R?rt:et-1,Ot=this.__iteratees__,Dt=Ot.length,Xt=0,ee=kr(ct,this.__takeCount__);if(!T||!R&&W==ct&&ee==ct)return tj(m,this.__actions__);var ce=[];t:for(;ct--&&Xt<ee;){Et+=x;for(var Be=-1,de=m[Et];++Be<Dt;){var Ge=Ot[Be],Je=Ge.iteratee,qs=Ge.type,es=Je(de);if(qs==O)de=es;else if(!es){if(qs==N)continue t;break t}}ce[Xt++]=de}return ce}Ke.prototype=Np(ub.prototype),Ke.prototype.constructor=Ke;function jc(m){var x=-1,T=m==null?0:m.length;for(this.clear();++x<T;){var R=m[x];this.set(R[0],R[1])}}function Wat(){this.__data__=qm?qm(null):{},this.size=0}function $at(m){var x=this.has(m)&&delete this.__data__[m];return this.size-=x?1:0,x}function Gat(m){var x=this.__data__;if(qm){var T=x[m];return T===l?e:T}return _i.call(x,m)?x[m]:e}function Uat(m){var x=this.__data__;return qm?x[m]!==e:_i.call(x,m)}function Yat(m,x){var T=this.__data__;return this.size+=this.has(m)?0:1,T[m]=qm&&x===e?l:x,this}jc.prototype.clear=Wat,jc.prototype.delete=$at,jc.prototype.get=Gat,jc.prototype.has=Uat,jc.prototype.set=Yat;function Rl(m){var x=-1,T=m==null?0:m.length;for(this.clear();++x<T;){var R=m[x];this.set(R[0],R[1])}}function Xat(){this.__data__=[],this.size=0}function Kat(m){var x=this.__data__,T=hb(x,m);if(T<0)return!1;var R=x.length-1;return T==R?x.pop():nb.call(x,T,1),--this.size,!0}function qat(m){var x=this.__data__,T=hb(x,m);return T<0?e:x[T][1]}function Zat(m){return hb(this.__data__,m)>-1}function Jat(m,x){var T=this.__data__,R=hb(T,m);return R<0?(++this.size,T.push([m,x])):T[R][1]=x,this}Rl.prototype.clear=Xat,Rl.prototype.delete=Kat,Rl.prototype.get=qat,Rl.prototype.has=Zat,Rl.prototype.set=Jat;function Il(m){var x=-1,T=m==null?0:m.length;for(this.clear();++x<T;){var R=m[x];this.set(R[0],R[1])}}function Qat(){this.size=0,this.__data__={hash:new jc,map:new(Xm||Rl),string:new jc}}function tot(m){var x=Sb(this,m).delete(m);return this.size-=x?1:0,x}function eot(m){return Sb(this,m).get(m)}function iot(m){return Sb(this,m).has(m)}function not(m,x){var T=Sb(this,m),R=T.size;return T.set(m,x),this.size+=T.size==R?0:1,this}Il.prototype.clear=Qat,Il.prototype.delete=tot,Il.prototype.get=eot,Il.prototype.has=iot,Il.prototype.set=not;function Nc(m){var x=-1,T=m==null?0:m.length;for(this.__data__=new Il;++x<T;)this.add(m[x])}function rot(m){return this.__data__.set(m,l),this}function sot(m){return this.__data__.has(m)}Nc.prototype.add=Nc.prototype.push=rot,Nc.prototype.has=sot;function uo(m){var x=this.__data__=new Rl(m);this.size=x.size}function aot(){this.__data__=new Rl,this.size=0}function oot(m){var x=this.__data__,T=x.delete(m);return this.size=x.size,T}function lot(m){return this.__data__.get(m)}function uot(m){return this.__data__.has(m)}function hot(m,x){var T=this.__data__;if(T instanceof Rl){var R=T.__data__;if(!Xm||R.length<r-1)return R.push([m,x]),this.size=++T.size,this;T=this.__data__=new Il(R)}return T.set(m,x),this.size=T.size,this}uo.prototype.clear=aot,uo.prototype.delete=oot,uo.prototype.get=lot,uo.prototype.has=uot,uo.prototype.set=hot;function O4(m,x){var T=Ce(m),R=!T&&$c(m),W=!T&&!R&&nh(m),X=!T&&!R&&!W&&Wp(m),et=T||R||W||X,rt=et?tM(m.length,bat):[],ct=rt.length;for(var Et in m)(x||_i.call(m,Et))&&!(et&&(Et=="length"||W&&(Et=="offset"||Et=="parent")||X&&(Et=="buffer"||Et=="byteLength"||Et=="byteOffset")||Fl(Et,ct)))&&rt.push(Et);return rt}function R4(m){var x=m.length;return x?m[vM(0,x-1)]:e}function cot(m,x){return Ab(xs(m),zc(x,0,m.length))}function dot(m){return Ab(xs(m))}function oM(m,x,T){(T!==e&&!ho(m[x],T)||T===e&&!(x in m))&&Ll(m,x,T)}function Jm(m,x,T){var R=m[x];(!(_i.call(m,x)&&ho(R,T))||T===e&&!(x in m))&&Ll(m,x,T)}function hb(m,x){for(var T=m.length;T--;)if(ho(m[T][0],x))return T;return-1}function pot(m,x,T,R){return Qu(m,function(W,X,et){x(R,W,T(W),et)}),R}function I4(m,x){return m&&Xo(x,Zn(x),m)}function fot(m,x){return m&&Xo(x,As(x),m)}function Ll(m,x,T){x=="__proto__"&&rb?rb(m,x,{configurable:!0,enumerable:!0,value:T,writable:!0}):m[x]=T}function lM(m,x){for(var T=-1,R=x.length,W=At(R),X=m==null;++T<R;)W[T]=X?e:VM(m,x[T]);return W}function zc(m,x,T){return m===m&&(T!==e&&(m=m<=T?m:T),x!==e&&(m=m>=x?m:x)),m}function ka(m,x,T,R,W,X){var et,rt=x&c,ct=x&d,Et=x&p;if(T&&(et=W?T(m,R,W,X):T(m)),et!==e)return et;if(!sn(m))return m;var Ot=Ce(m);if(Ot){if(et=ilt(m),!rt)return xs(m,et)}else{var Dt=Tr(m),Xt=Dt==ht||Dt==St;if(nh(m))return nj(m,rt);if(Dt==jt||Dt==nt||Xt&&!W){if(et=ct||Xt?{}:Sj(m),!rt)return ct?Got(m,fot(et,m)):$ot(m,I4(et,m))}else{if(!Oi[Dt])return W?m:{};et=nlt(m,Dt,rt)}}X||(X=new uo);var ee=X.get(m);if(ee)return ee;X.set(m,et),Zj(m)?m.forEach(function(de){et.add(ka(de,x,T,de,m,X))}):Kj(m)&&m.forEach(function(de,Ge){et.set(Ge,ka(de,x,T,Ge,m,X))});var ce=Et?ct?MM:TM:ct?As:Zn,Be=Ot?e:ce(m);return Aa(Be||m,function(de,Ge){Be&&(Ge=de,de=m[Ge]),Jm(et,Ge,ka(de,x,T,Ge,m,X))}),et}function got(m){var x=Zn(m);return function(T){return L4(T,m,x)}}function L4(m,x,T){var R=T.length;if(m==null)return!R;for(m=Pi(m);R--;){var W=T[R],X=x[W],et=m[W];if(et===e&&!(W in m)||!X(et))return!1}return!0}function D4(m,x,T){if(typeof m!="function")throw new wa(a);return sv(function(){m.apply(e,T)},x)}function Qm(m,x,T,R){var W=-1,X=Y1,et=!0,rt=m.length,ct=[],Et=x.length;if(!rt)return ct;T&&(x=Yi(x,Ys(T))),R?(X=XT,et=!1):x.length>=r&&(X=Um,et=!1,x=new Nc(x));t:for(;++W<rt;){var Ot=m[W],Dt=T==null?Ot:T(Ot);if(Ot=R||Ot!==0?Ot:0,et&&Dt===Dt){for(var Xt=Et;Xt--;)if(x[Xt]===Dt)continue t;ct.push(Ot)}else X(x,Dt,R)||ct.push(Ot)}return ct}var Qu=lj(Yo),B4=lj(hM,!0);function mot(m,x){var T=!0;return Qu(m,function(R,W,X){return T=!!x(R,W,X),T}),T}function cb(m,x,T){for(var R=-1,W=m.length;++R<W;){var X=m[R],et=x(X);if(et!=null&&(rt===e?et===et&&!Ks(et):T(et,rt)))var rt=et,ct=X}return ct}function vot(m,x,T,R){var W=m.length;for(T=Oe(T),T<0&&(T=-T>W?0:W+T),R=R===e||R>W?W:Oe(R),R<0&&(R+=W),R=T>R?0:Qj(R);T<R;)m[T++]=x;return m}function F4(m,x){var T=[];return Qu(m,function(R,W,X){x(R,W,X)&&T.push(R)}),T}function hr(m,x,T,R,W){var X=-1,et=m.length;for(T||(T=slt),W||(W=[]);++X<et;){var rt=m[X];x>0&&T(rt)?x>1?hr(rt,x-1,T,R,W):qu(W,rt):R||(W[W.length]=rt)}return W}var uM=uj(),j4=uj(!0);function Yo(m,x){return m&&uM(m,x,Zn)}function hM(m,x){return m&&j4(m,x,Zn)}function db(m,x){return Ku(x,function(T){return jl(m[T])})}function Hc(m,x){x=eh(x,m);for(var T=0,R=x.length;m!=null&&T<R;)m=m[Ko(x[T++])];return T&&T==R?m:e}function N4(m,x,T){var R=x(m);return Ce(m)?R:qu(R,T(m))}function Qr(m){return m==null?m===e?we:pt:Fc&&Fc in Pi(m)?Qot(m):dlt(m)}function cM(m,x){return m>x}function _ot(m,x){return m!=null&&_i.call(m,x)}function yot(m,x){return m!=null&&x in Pi(m)}function bot(m,x,T){return m>=kr(x,T)&&m<Hn(x,T)}function dM(m,x,T){for(var R=T?XT:Y1,W=m[0].length,X=m.length,et=X,rt=At(X),ct=1/0,Et=[];et--;){var Ot=m[et];et&&x&&(Ot=Yi(Ot,Ys(x))),ct=kr(Ot.length,ct),rt[et]=!T&&(x||W>=120&&Ot.length>=120)?new Nc(et&&Ot):e}Ot=m[0];var Dt=-1,Xt=rt[0];t:for(;++Dt<W&&Et.length<ct;){var ee=Ot[Dt],ce=x?x(ee):ee;if(ee=T||ee!==0?ee:0,!(Xt?Um(Xt,ce):R(Et,ce,T))){for(et=X;--et;){var Be=rt[et];if(!(Be?Um(Be,ce):R(m[et],ce,T)))continue t}Xt&&Xt.push(ce),Et.push(ee)}}return Et}function xot(m,x,T,R){return Yo(m,function(W,X,et){x(R,T(W),X,et)}),R}function tv(m,x,T){x=eh(x,m),m=kj(m,x);var R=m==null?m:m[Ko(Ma(x))];return R==null?e:Us(R,m,T)}function z4(m){return fn(m)&&Qr(m)==nt}function Sot(m){return fn(m)&&Qr(m)==oe}function Aot(m){return fn(m)&&Qr(m)==dt}function ev(m,x,T,R,W){return m===x?!0:m==null||x==null||!fn(m)&&!fn(x)?m!==m&&x!==x:wot(m,x,T,R,ev,W)}function wot(m,x,T,R,W,X){var et=Ce(m),rt=Ce(x),ct=et?K:Tr(m),Et=rt?K:Tr(x);ct=ct==nt?jt:ct,Et=Et==nt?jt:Et;var Ot=ct==jt,Dt=Et==jt,Xt=ct==Et;if(Xt&&nh(m)){if(!nh(x))return!1;et=!0,Ot=!1}if(Xt&&!Ot)return X||(X=new uo),et||Wp(m)?yj(m,x,T,R,W,X):Zot(m,x,ct,T,R,W,X);if(!(T&f)){var ee=Ot&&_i.call(m,"__wrapped__"),ce=Dt&&_i.call(x,"__wrapped__");if(ee||ce){var Be=ee?m.value():m,de=ce?x.value():x;return X||(X=new uo),W(Be,de,T,R,X)}}return Xt?(X||(X=new uo),Jot(m,x,T,R,W,X)):!1}function Cot(m){return fn(m)&&Tr(m)==yt}function pM(m,x,T,R){var W=T.length,X=W,et=!R;if(m==null)return!X;for(m=Pi(m);W--;){var rt=T[W];if(et&&rt[2]?rt[1]!==m[rt[0]]:!(rt[0]in m))return!1}for(;++W<X;){rt=T[W];var ct=rt[0],Et=m[ct],Ot=rt[1];if(et&&rt[2]){if(Et===e&&!(ct in m))return!1}else{var Dt=new uo;if(R)var Xt=R(Et,Ot,ct,m,x,Dt);if(!(Xt===e?ev(Ot,Et,f|g,R,Dt):Xt))return!1}}return!0}function H4(m){if(!sn(m)||olt(m))return!1;var x=jl(m)?Cat:gst;return x.test(Wc(m))}function kot(m){return fn(m)&&Qr(m)==Nt}function Tot(m){return fn(m)&&Tr(m)==te}function Mot(m){return fn(m)&&Pb(m.length)&&!!Bi[Qr(m)]}function V4(m){return typeof m=="function"?m:m==null?ws:typeof m=="object"?Ce(m)?G4(m[0],m[1]):$4(m):h8(m)}function fM(m){if(!rv(m))return Oat(m);var x=[];for(var T in Pi(m))_i.call(m,T)&&T!="constructor"&&x.push(T);return x}function Pot(m){if(!sn(m))return clt(m);var x=rv(m),T=[];for(var R in m)R=="constructor"&&(x||!_i.call(m,R))||T.push(R);return T}function gM(m,x){return m<x}function W4(m,x){var T=-1,R=Ss(m)?At(m.length):[];return Qu(m,function(W,X,et){R[++T]=x(W,X,et)}),R}function $4(m){var x=EM(m);return x.length==1&&x[0][2]?wj(x[0][0],x[0][1]):function(T){return T===m||pM(T,m,x)}}function G4(m,x){return RM(m)&&Aj(x)?wj(Ko(m),x):function(T){var R=VM(T,m);return R===e&&R===x?WM(T,m):ev(x,R,f|g)}}function pb(m,x,T,R,W){m!==x&&uM(x,function(X,et){if(W||(W=new uo),sn(X))Eot(m,x,et,T,pb,R,W);else{var rt=R?R(LM(m,et),X,et+"",m,x,W):e;rt===e&&(rt=X),oM(m,et,rt)}},As)}function Eot(m,x,T,R,W,X,et){var rt=LM(m,T),ct=LM(x,T),Et=et.get(ct);if(Et){oM(m,T,Et);return}var Ot=X?X(rt,ct,T+"",m,x,et):e,Dt=Ot===e;if(Dt){var Xt=Ce(ct),ee=!Xt&&nh(ct),ce=!Xt&&!ee&&Wp(ct);Ot=ct,Xt||ee||ce?Ce(rt)?Ot=rt:Cn(rt)?Ot=xs(rt):ee?(Dt=!1,Ot=nj(ct,!0)):ce?(Dt=!1,Ot=rj(ct,!0)):Ot=[]:av(ct)||$c(ct)?(Ot=rt,$c(rt)?Ot=t8(rt):(!sn(rt)||jl(rt))&&(Ot=Sj(ct))):Dt=!1}Dt&&(et.set(ct,Ot),W(Ot,ct,R,X,et),et.delete(ct)),oM(m,T,Ot)}function U4(m,x){var T=m.length;if(T)return x+=x<0?T:0,Fl(x,T)?m[x]:e}function Y4(m,x,T){x.length?x=Yi(x,function(X){return Ce(X)?function(et){return Hc(et,X.length===1?X[0]:X)}:X}):x=[ws];var R=-1;x=Yi(x,Ys(he()));var W=W4(m,function(X,et,rt){var ct=Yi(x,function(Et){return Et(X)});return{criteria:ct,index:++R,value:X}});return nat(W,function(X,et){return Wot(X,et,T)})}function Oot(m,x){return X4(m,x,function(T,R){return WM(m,R)})}function X4(m,x,T){for(var R=-1,W=x.length,X={};++R<W;){var et=x[R],rt=Hc(m,et);T(rt,et)&&iv(X,eh(et,m),rt)}return X}function Rot(m){return function(x){return Hc(x,m)}}function mM(m,x,T,R){var W=R?iat:Rp,X=-1,et=x.length,rt=m;for(m===x&&(x=xs(x)),T&&(rt=Yi(m,Ys(T)));++X<et;)for(var ct=0,Et=x[X],Ot=T?T(Et):Et;(ct=W(rt,Ot,ct,R))>-1;)rt!==m&&nb.call(rt,ct,1),nb.call(m,ct,1);return m}function K4(m,x){for(var T=m?x.length:0,R=T-1;T--;){var W=x[T];if(T==R||W!==X){var X=W;Fl(W)?nb.call(m,W,1):bM(m,W)}}return m}function vM(m,x){return m+ab(P4()*(x-m+1))}function Iot(m,x,T,R){for(var W=-1,X=Hn(sb((x-m)/(T||1)),0),et=At(X);X--;)et[R?X:++W]=m,m+=T;return et}function _M(m,x){var T="";if(!m||x<1||x>j)return T;do x%2&&(T+=m),x=ab(x/2),x&&(m+=m);while(x);return T}function Ne(m,x){return DM(Cj(m,x,ws),m+"")}function Lot(m){return R4($p(m))}function Dot(m,x){var T=$p(m);return Ab(T,zc(x,0,T.length))}function iv(m,x,T,R){if(!sn(m))return m;x=eh(x,m);for(var W=-1,X=x.length,et=X-1,rt=m;rt!=null&&++W<X;){var ct=Ko(x[W]),Et=T;if(ct==="__proto__"||ct==="constructor"||ct==="prototype")return m;if(W!=et){var Ot=rt[ct];Et=R?R(Ot,ct,rt):e,Et===e&&(Et=sn(Ot)?Ot:Fl(x[W+1])?[]:{})}Jm(rt,ct,Et),rt=rt[ct]}return m}var q4=ob?function(m,x){return ob.set(m,x),m}:ws,Bot=rb?function(m,x){return rb(m,"toString",{configurable:!0,enumerable:!1,value:GM(x),writable:!0})}:ws;function Fot(m){return Ab($p(m))}function Ta(m,x,T){var R=-1,W=m.length;x<0&&(x=-x>W?0:W+x),T=T>W?W:T,T<0&&(T+=W),W=x>T?0:T-x>>>0,x>>>=0;for(var X=At(W);++R<W;)X[R]=m[R+x];return X}function jot(m,x){var T;return Qu(m,function(R,W,X){return T=x(R,W,X),!T}),!!T}function fb(m,x,T){var R=0,W=m==null?R:m.length;if(typeof x=="number"&&x===x&&W<=tt){for(;R<W;){var X=R+W>>>1,et=m[X];et!==null&&!Ks(et)&&(T?et<=x:et<x)?R=X+1:W=X}return W}return yM(m,x,ws,T)}function yM(m,x,T,R){var W=0,X=m==null?0:m.length;if(X===0)return 0;x=T(x);for(var et=x!==x,rt=x===null,ct=Ks(x),Et=x===e;W<X;){var Ot=ab((W+X)/2),Dt=T(m[Ot]),Xt=Dt!==e,ee=Dt===null,ce=Dt===Dt,Be=Ks(Dt);if(et)var de=R||ce;else Et?de=ce&&(R||Xt):rt?de=ce&&Xt&&(R||!ee):ct?de=ce&&Xt&&!ee&&(R||!Be):ee||Be?de=!1:de=R?Dt<=x:Dt<x;de?W=Ot+1:X=Ot}return kr(X,q)}function Z4(m,x){for(var T=-1,R=m.length,W=0,X=[];++T<R;){var et=m[T],rt=x?x(et):et;if(!T||!ho(rt,ct)){var ct=rt;X[W++]=et===0?0:et}}return X}function J4(m){return typeof m=="number"?m:Ks(m)?U:+m}function Xs(m){if(typeof m=="string")return m;if(Ce(m))return Yi(m,Xs)+"";if(Ks(m))return E4?E4.call(m):"";var x=m+"";return x=="0"&&1/m==-H?"-0":x}function th(m,x,T){var R=-1,W=Y1,X=m.length,et=!0,rt=[],ct=rt;if(T)et=!1,W=XT;else if(X>=r){var Et=x?null:Kot(m);if(Et)return K1(Et);et=!1,W=Um,ct=new Nc}else ct=x?[]:rt;t:for(;++R<X;){var Ot=m[R],Dt=x?x(Ot):Ot;if(Ot=T||Ot!==0?Ot:0,et&&Dt===Dt){for(var Xt=ct.length;Xt--;)if(ct[Xt]===Dt)continue t;x&&ct.push(Dt),rt.push(Ot)}else W(ct,Dt,T)||(ct!==rt&&ct.push(Dt),rt.push(Ot))}return rt}function bM(m,x){return x=eh(x,m),m=kj(m,x),m==null||delete m[Ko(Ma(x))]}function Q4(m,x,T,R){return iv(m,x,T(Hc(m,x)),R)}function gb(m,x,T,R){for(var W=m.length,X=R?W:-1;(R?X--:++X<W)&&x(m[X],X,m););return T?Ta(m,R?0:X,R?X+1:W):Ta(m,R?X+1:0,R?W:X)}function tj(m,x){var T=m;return T instanceof Ke&&(T=T.value()),KT(x,function(R,W){return W.func.apply(W.thisArg,qu([R],W.args))},T)}function xM(m,x,T){var R=m.length;if(R<2)return R?th(m[0]):[];for(var W=-1,X=At(R);++W<R;)for(var et=m[W],rt=-1;++rt<R;)rt!=W&&(X[W]=Qm(X[W]||et,m[rt],x,T));return th(hr(X,1),x,T)}function ej(m,x,T){for(var R=-1,W=m.length,X=x.length,et={};++R<W;){var rt=R<X?x[R]:e;T(et,m[R],rt)}return et}function SM(m){return Cn(m)?m:[]}function AM(m){return typeof m=="function"?m:ws}function eh(m,x){return Ce(m)?m:RM(m,x)?[m]:Ej(pi(m))}var Not=Ne;function ih(m,x,T){var R=m.length;return T=T===e?R:T,!x&&T>=R?m:Ta(m,x,T)}var ij=kat||function(m){return ur.clearTimeout(m)};function nj(m,x){if(x)return m.slice();var T=m.length,R=w4?w4(T):new m.constructor(T);return m.copy(R),R}function wM(m){var x=new m.constructor(m.byteLength);return new eb(x).set(new eb(m)),x}function zot(m,x){var T=x?wM(m.buffer):m.buffer;return new m.constructor(T,m.byteOffset,m.byteLength)}function Hot(m){var x=new m.constructor(m.source,z5.exec(m));return x.lastIndex=m.lastIndex,x}function Vot(m){return Zm?Pi(Zm.call(m)):{}}function rj(m,x){var T=x?wM(m.buffer):m.buffer;return new m.constructor(T,m.byteOffset,m.length)}function sj(m,x){if(m!==x){var T=m!==e,R=m===null,W=m===m,X=Ks(m),et=x!==e,rt=x===null,ct=x===x,Et=Ks(x);if(!rt&&!Et&&!X&&m>x||X&&et&&ct&&!rt&&!Et||R&&et&&ct||!T&&ct||!W)return 1;if(!R&&!X&&!Et&&m<x||Et&&T&&W&&!R&&!X||rt&&T&&W||!et&&W||!ct)return-1}return 0}function Wot(m,x,T){for(var R=-1,W=m.criteria,X=x.criteria,et=W.length,rt=T.length;++R<et;){var ct=sj(W[R],X[R]);if(ct){if(R>=rt)return ct;var Et=T[R];return ct*(Et=="desc"?-1:1)}}return m.index-x.index}function aj(m,x,T,R){for(var W=-1,X=m.length,et=T.length,rt=-1,ct=x.length,Et=Hn(X-et,0),Ot=At(ct+Et),Dt=!R;++rt<ct;)Ot[rt]=x[rt];for(;++W<et;)(Dt||W<X)&&(Ot[T[W]]=m[W]);for(;Et--;)Ot[rt++]=m[W++];return Ot}function oj(m,x,T,R){for(var W=-1,X=m.length,et=-1,rt=T.length,ct=-1,Et=x.length,Ot=Hn(X-rt,0),Dt=At(Ot+Et),Xt=!R;++W<Ot;)Dt[W]=m[W];for(var ee=W;++ct<Et;)Dt[ee+ct]=x[ct];for(;++et<rt;)(Xt||W<X)&&(Dt[ee+T[et]]=m[W++]);return Dt}function xs(m,x){var T=-1,R=m.length;for(x||(x=At(R));++T<R;)x[T]=m[T];return x}function Xo(m,x,T,R){var W=!T;T||(T={});for(var X=-1,et=x.length;++X<et;){var rt=x[X],ct=R?R(T[rt],m[rt],rt,T,m):e;ct===e&&(ct=m[rt]),W?Ll(T,rt,ct):Jm(T,rt,ct)}return T}function $ot(m,x){return Xo(m,OM(m),x)}function Got(m,x){return Xo(m,bj(m),x)}function mb(m,x){return function(T,R){var W=Ce(T)?qst:pot,X=x?x():{};return W(T,m,he(R,2),X)}}function zp(m){return Ne(function(x,T){var R=-1,W=T.length,X=W>1?T[W-1]:e,et=W>2?T[2]:e;for(X=m.length>3&&typeof X=="function"?(W--,X):e,et&&ts(T[0],T[1],et)&&(X=W<3?e:X,W=1),x=Pi(x);++R<W;){var rt=T[R];rt&&m(x,rt,R,X)}return x})}function lj(m,x){return function(T,R){if(T==null)return T;if(!Ss(T))return m(T,R);for(var W=T.length,X=x?W:-1,et=Pi(T);(x?X--:++X<W)&&R(et[X],X,et)!==!1;);return T}}function uj(m){return function(x,T,R){for(var W=-1,X=Pi(x),et=R(x),rt=et.length;rt--;){var ct=et[m?rt:++W];if(T(X[ct],ct,X)===!1)break}return x}}function Uot(m,x,T){var R=x&_,W=nv(m);function X(){var et=this&&this!==ur&&this instanceof X?W:m;return et.apply(R?T:this,arguments)}return X}function hj(m){return function(x){x=pi(x);var T=Ip(x)?lo(x):e,R=T?T[0]:x.charAt(0),W=T?ih(T,1).join(""):x.slice(1);return R[m]()+W}}function Hp(m){return function(x){return KT(l8(o8(x).replace(Bst,"")),m,"")}}function nv(m){return function(){var x=arguments;switch(x.length){case 0:return new m;case 1:return new m(x[0]);case 2:return new m(x[0],x[1]);case 3:return new m(x[0],x[1],x[2]);case 4:return new m(x[0],x[1],x[2],x[3]);case 5:return new m(x[0],x[1],x[2],x[3],x[4]);case 6:return new m(x[0],x[1],x[2],x[3],x[4],x[5]);case 7:return new m(x[0],x[1],x[2],x[3],x[4],x[5],x[6])}var T=Np(m.prototype),R=m.apply(T,x);return sn(R)?R:T}}function Yot(m,x,T){var R=nv(m);function W(){for(var X=arguments.length,et=At(X),rt=X,ct=Vp(W);rt--;)et[rt]=arguments[rt];var Et=X<3&&et[0]!==ct&&et[X-1]!==ct?[]:Zu(et,ct);if(X-=Et.length,X<T)return gj(m,x,vb,W.placeholder,e,et,Et,e,e,T-X);var Ot=this&&this!==ur&&this instanceof W?R:m;return Us(Ot,this,et)}return W}function cj(m){return function(x,T,R){var W=Pi(x);if(!Ss(x)){var X=he(T,3);x=Zn(x),T=function(rt){return X(W[rt],rt,W)}}var et=m(x,T,R);return et>-1?W[X?x[et]:et]:e}}function dj(m){return Bl(function(x){var T=x.length,R=T,W=Ca.prototype.thru;for(m&&x.reverse();R--;){var X=x[R];if(typeof X!="function")throw new wa(a);if(W&&!et&&xb(X)=="wrapper")var et=new Ca([],!0)}for(R=et?R:T;++R<T;){X=x[R];var rt=xb(X),ct=rt=="wrapper"?PM(X):e;ct&&IM(ct[0])&&ct[1]==(C|b|A|k)&&!ct[4].length&&ct[9]==1?et=et[xb(ct[0])].apply(et,ct[3]):et=X.length==1&&IM(X)?et[rt]():et.thru(X)}return function(){var Et=arguments,Ot=Et[0];if(et&&Et.length==1&&Ce(Ot))return et.plant(Ot).value();for(var Dt=0,Xt=T?x[Dt].apply(this,Et):Ot;++Dt<T;)Xt=x[Dt].call(this,Xt);return Xt}})}function vb(m,x,T,R,W,X,et,rt,ct,Et){var Ot=x&C,Dt=x&_,Xt=x&v,ee=x&(b|S),ce=x&M,Be=Xt?e:nv(m);function de(){for(var Ge=arguments.length,Je=At(Ge),qs=Ge;qs--;)Je[qs]=arguments[qs];if(ee)var es=Vp(de),Zs=sat(Je,es);if(R&&(Je=aj(Je,R,W,ee)),X&&(Je=oj(Je,X,et,ee)),Ge-=Zs,ee&&Ge<Et){var kn=Zu(Je,es);return gj(m,x,vb,de.placeholder,T,Je,kn,rt,ct,Et-Ge)}var co=Dt?T:this,zl=Xt?co[m]:m;return Ge=Je.length,rt?Je=plt(Je,rt):ce&&Ge>1&&Je.reverse(),Ot&&ct<Ge&&(Je.length=ct),this&&this!==ur&&this instanceof de&&(zl=Be||nv(zl)),zl.apply(co,Je)}return de}function pj(m,x){return function(T,R){return xot(T,m,x(R),{})}}function _b(m,x){return function(T,R){var W;if(T===e&&R===e)return x;if(T!==e&&(W=T),R!==e){if(W===e)return R;typeof T=="string"||typeof R=="string"?(T=Xs(T),R=Xs(R)):(T=J4(T),R=J4(R)),W=m(T,R)}return W}}function CM(m){return Bl(function(x){return x=Yi(x,Ys(he())),Ne(function(T){var R=this;return m(x,function(W){return Us(W,R,T)})})})}function yb(m,x){x=x===e?" ":Xs(x);var T=x.length;if(T<2)return T?_M(x,m):x;var R=_M(x,sb(m/Lp(x)));return Ip(x)?ih(lo(R),0,m).join(""):R.slice(0,m)}function Xot(m,x,T,R){var W=x&_,X=nv(m);function et(){for(var rt=-1,ct=arguments.length,Et=-1,Ot=R.length,Dt=At(Ot+ct),Xt=this&&this!==ur&&this instanceof et?X:m;++Et<Ot;)Dt[Et]=R[Et];for(;ct--;)Dt[Et++]=arguments[++rt];return Us(Xt,W?T:this,Dt)}return et}function fj(m){return function(x,T,R){return R&&typeof R!="number"&&ts(x,T,R)&&(T=R=e),x=Nl(x),T===e?(T=x,x=0):T=Nl(T),R=R===e?x<T?1:-1:Nl(R),Iot(x,T,R,m)}}function bb(m){return function(x,T){return typeof x=="string"&&typeof T=="string"||(x=Pa(x),T=Pa(T)),m(x,T)}}function gj(m,x,T,R,W,X,et,rt,ct,Et){var Ot=x&b,Dt=Ot?et:e,Xt=Ot?e:et,ee=Ot?X:e,ce=Ot?e:X;x|=Ot?A:w,x&=~(Ot?w:A),x&y||(x&=~(_|v));var Be=[m,x,W,ee,Dt,ce,Xt,rt,ct,Et],de=T.apply(e,Be);return IM(m)&&Tj(de,Be),de.placeholder=R,Mj(de,m,x)}function kM(m){var x=zn[m];return function(T,R){if(T=Pa(T),R=R==null?0:kr(Oe(R),292),R&&M4(T)){var W=(pi(T)+"e").split("e"),X=x(W[0]+"e"+(+W[1]+R));return W=(pi(X)+"e").split("e"),+(W[0]+"e"+(+W[1]-R))}return x(T)}}var Kot=Fp&&1/K1(new Fp([,-0]))[1]==H?function(m){return new Fp(m)}:XM;function mj(m){return function(x){var T=Tr(x);return T==yt?iM(x):T==te?dat(x):rat(x,m(x))}}function Dl(m,x,T,R,W,X,et,rt){var ct=x&v;if(!ct&&typeof m!="function")throw new wa(a);var Et=R?R.length:0;if(Et||(x&=~(A|w),R=W=e),et=et===e?et:Hn(Oe(et),0),rt=rt===e?rt:Oe(rt),Et-=W?W.length:0,x&w){var Ot=R,Dt=W;R=W=e}var Xt=ct?e:PM(m),ee=[m,x,T,R,W,Ot,Dt,X,et,rt];if(Xt&&hlt(ee,Xt),m=ee[0],x=ee[1],T=ee[2],R=ee[3],W=ee[4],rt=ee[9]=ee[9]===e?ct?0:m.length:Hn(ee[9]-Et,0),!rt&&x&(b|S)&&(x&=~(b|S)),!x||x==_)var ce=Uot(m,x,T);else x==b||x==S?ce=Yot(m,x,rt):(x==A||x==(_|A))&&!W.length?ce=Xot(m,x,T,R):ce=vb.apply(e,ee);var Be=Xt?q4:Tj;return Mj(Be(ce,ee),m,x)}function vj(m,x,T,R){return m===e||ho(m,Bp[T])&&!_i.call(R,T)?x:m}function _j(m,x,T,R,W,X){return sn(m)&&sn(x)&&(X.set(x,m),pb(m,x,e,_j,X),X.delete(x)),m}function qot(m){return av(m)?e:m}function yj(m,x,T,R,W,X){var et=T&f,rt=m.length,ct=x.length;if(rt!=ct&&!(et&&ct>rt))return!1;var Et=X.get(m),Ot=X.get(x);if(Et&&Ot)return Et==x&&Ot==m;var Dt=-1,Xt=!0,ee=T&g?new Nc:e;for(X.set(m,x),X.set(x,m);++Dt<rt;){var ce=m[Dt],Be=x[Dt];if(R)var de=et?R(Be,ce,Dt,x,m,X):R(ce,Be,Dt,m,x,X);if(de!==e){if(de)continue;Xt=!1;break}if(ee){if(!qT(x,function(Ge,Je){if(!Um(ee,Je)&&(ce===Ge||W(ce,Ge,T,R,X)))return ee.push(Je)})){Xt=!1;break}}else if(!(ce===Be||W(ce,Be,T,R,X))){Xt=!1;break}}return X.delete(m),X.delete(x),Xt}function Zot(m,x,T,R,W,X,et){switch(T){case ne:if(m.byteLength!=x.byteLength||m.byteOffset!=x.byteOffset)return!1;m=m.buffer,x=x.buffer;case oe:return!(m.byteLength!=x.byteLength||!X(new eb(m),new eb(x)));case Q:case dt:case vt:return ho(+m,+x);case xt:return m.name==x.name&&m.message==x.message;case Nt:case ge:return m==x+"";case yt:var rt=iM;case te:var ct=R&f;if(rt||(rt=K1),m.size!=x.size&&!ct)return!1;var Et=et.get(m);if(Et)return Et==x;R|=g,et.set(m,x);var Ot=yj(rt(m),rt(x),R,W,X,et);return et.delete(m),Ot;case Pe:if(Zm)return Zm.call(m)==Zm.call(x)}return!1}function Jot(m,x,T,R,W,X){var et=T&f,rt=TM(m),ct=rt.length,Et=TM(x),Ot=Et.length;if(ct!=Ot&&!et)return!1;for(var Dt=ct;Dt--;){var Xt=rt[Dt];if(!(et?Xt in x:_i.call(x,Xt)))return!1}var ee=X.get(m),ce=X.get(x);if(ee&&ce)return ee==x&&ce==m;var Be=!0;X.set(m,x),X.set(x,m);for(var de=et;++Dt<ct;){Xt=rt[Dt];var Ge=m[Xt],Je=x[Xt];if(R)var qs=et?R(Je,Ge,Xt,x,m,X):R(Ge,Je,Xt,m,x,X);if(!(qs===e?Ge===Je||W(Ge,Je,T,R,X):qs)){Be=!1;break}de||(de=Xt=="constructor")}if(Be&&!de){var es=m.constructor,Zs=x.constructor;es!=Zs&&"constructor"in m&&"constructor"in x&&!(typeof es=="function"&&es instanceof es&&typeof Zs=="function"&&Zs instanceof Zs)&&(Be=!1)}return X.delete(m),X.delete(x),Be}function Bl(m){return DM(Cj(m,e,Lj),m+"")}function TM(m){return N4(m,Zn,OM)}function MM(m){return N4(m,As,bj)}var PM=ob?function(m){return ob.get(m)}:XM;function xb(m){for(var x=m.name+"",T=jp[x],R=_i.call(jp,x)?T.length:0;R--;){var W=T[R],X=W.func;if(X==null||X==m)return W.name}return x}function Vp(m){var x=_i.call(Y,"placeholder")?Y:m;return x.placeholder}function he(){var m=Y.iteratee||UM;return m=m===UM?V4:m,arguments.length?m(arguments[0],arguments[1]):m}function Sb(m,x){var T=m.__data__;return alt(x)?T[typeof x=="string"?"string":"hash"]:T.map}function EM(m){for(var x=Zn(m),T=x.length;T--;){var R=x[T],W=m[R];x[T]=[R,W,Aj(W)]}return x}function Vc(m,x){var T=uat(m,x);return H4(T)?T:e}function Qot(m){var x=_i.call(m,Fc),T=m[Fc];try{m[Fc]=e;var R=!0}catch{}var W=Q1.call(m);return R&&(x?m[Fc]=T:delete m[Fc]),W}var OM=rM?function(m){return m==null?[]:(m=Pi(m),Ku(rM(m),function(x){return k4.call(m,x)}))}:KM,bj=rM?function(m){for(var x=[];m;)qu(x,OM(m)),m=ib(m);return x}:KM,Tr=Qr;(sM&&Tr(new sM(new ArrayBuffer(1)))!=ne||Xm&&Tr(new Xm)!=yt||aM&&Tr(aM.resolve())!=Lt||Fp&&Tr(new Fp)!=te||Km&&Tr(new Km)!=Ze)&&(Tr=function(m){var x=Qr(m),T=x==jt?m.constructor:e,R=T?Wc(T):"";if(R)switch(R){case Dat:return ne;case Bat:return yt;case Fat:return Lt;case jat:return te;case Nat:return Ze}return x});function tlt(m,x,T){for(var R=-1,W=T.length;++R<W;){var X=T[R],et=X.size;switch(X.type){case"drop":m+=et;break;case"dropRight":x-=et;break;case"take":x=kr(x,m+et);break;case"takeRight":m=Hn(m,x-et);break}}return{start:m,end:x}}function elt(m){var x=m.match(ost);return x?x[1].split(lst):[]}function xj(m,x,T){x=eh(x,m);for(var R=-1,W=x.length,X=!1;++R<W;){var et=Ko(x[R]);if(!(X=m!=null&&T(m,et)))break;m=m[et]}return X||++R!=W?X:(W=m==null?0:m.length,!!W&&Pb(W)&&Fl(et,W)&&(Ce(m)||$c(m)))}function ilt(m){var x=m.length,T=new m.constructor(x);return x&&typeof m[0]=="string"&&_i.call(m,"index")&&(T.index=m.index,T.input=m.input),T}function Sj(m){return typeof m.constructor=="function"&&!rv(m)?Np(ib(m)):{}}function nlt(m,x,T){var R=m.constructor;switch(x){case oe:return wM(m);case Q:case dt:return new R(+m);case ne:return zot(m,T);case De:case ye:case Xe:case Gi:case wn:case Mi:case di:case Ui:case oo:return rj(m,T);case yt:return new R;case vt:case ge:return new R(m);case Nt:return Hot(m);case te:return new R;case Pe:return Vot(m)}}function rlt(m,x){var T=x.length;if(!T)return m;var R=T-1;return x[R]=(T>1?"& ":"")+x[R],x=x.join(T>2?", ":" "),m.replace(ast,`{
/* [wrapped with `+x+`] */
`)}function slt(m){return Ce(m)||$c(m)||!!(T4&&m&&m[T4])}function Fl(m,x){var T=typeof m;return x=x??j,!!x&&(T=="number"||T!="symbol"&&vst.test(m))&&m>-1&&m%1==0&&m<x}function ts(m,x,T){if(!sn(T))return!1;var R=typeof x;return(R=="number"?Ss(T)&&Fl(x,T.length):R=="string"&&x in T)?ho(T[x],m):!1}function RM(m,x){if(Ce(m))return!1;var T=typeof m;return T=="number"||T=="symbol"||T=="boolean"||m==null||Ks(m)?!0:ist.test(m)||!Gm.test(m)||x!=null&&m in Pi(x)}function alt(m){var x=typeof m;return x=="string"||x=="number"||x=="symbol"||x=="boolean"?m!=="__proto__":m===null}function IM(m){var x=xb(m),T=Y[x];if(typeof T!="function"||!(x in Ke.prototype))return!1;if(m===T)return!0;var R=PM(T);return!!R&&m===R[0]}function olt(m){return!!A4&&A4 in m}var llt=Z1?jl:qM;function rv(m){var x=m&&m.constructor,T=typeof x=="function"&&x.prototype||Bp;return m===T}function Aj(m){return m===m&&!sn(m)}function wj(m,x){return function(T){return T==null?!1:T[m]===x&&(x!==e||m in Pi(T))}}function ult(m){var x=Tb(m,function(R){return T.size===u&&T.clear(),R}),T=x.cache;return x}function hlt(m,x){var T=m[1],R=x[1],W=T|R,X=W<(_|v|C),et=R==C&&T==b||R==C&&T==k&&m[7].length<=x[8]||R==(C|k)&&x[7].length<=x[8]&&T==b;if(!(X||et))return m;R&_&&(m[2]=x[2],W|=T&_?0:y);var rt=x[3];if(rt){var ct=m[3];m[3]=ct?aj(ct,rt,x[4]):rt,m[4]=ct?Zu(m[3],h):x[4]}return rt=x[5],rt&&(ct=m[5],m[5]=ct?oj(ct,rt,x[6]):rt,m[6]=ct?Zu(m[5],h):x[6]),rt=x[7],rt&&(m[7]=rt),R&C&&(m[8]=m[8]==null?x[8]:kr(m[8],x[8])),m[9]==null&&(m[9]=x[9]),m[0]=x[0],m[1]=W,m}function clt(m){var x=[];if(m!=null)for(var T in Pi(m))x.push(T);return x}function dlt(m){return Q1.call(m)}function Cj(m,x,T){return x=Hn(x===e?m.length-1:x,0),function(){for(var R=arguments,W=-1,X=Hn(R.length-x,0),et=At(X);++W<X;)et[W]=R[x+W];W=-1;for(var rt=At(x+1);++W<x;)rt[W]=R[W];return rt[x]=T(et),Us(m,this,rt)}}function kj(m,x){return x.length<2?m:Hc(m,Ta(x,0,-1))}function plt(m,x){for(var T=m.length,R=kr(x.length,T),W=xs(m);R--;){var X=x[R];m[R]=Fl(X,T)?W[X]:e}return m}function LM(m,x){if(!(x==="constructor"&&typeof m[x]=="function")&&x!="__proto__")return m[x]}var Tj=Pj(q4),sv=Mat||function(m,x){return ur.setTimeout(m,x)},DM=Pj(Bot);function Mj(m,x,T){var R=x+"";return DM(m,rlt(R,flt(elt(R),T)))}function Pj(m){var x=0,T=0;return function(){var R=Rat(),W=D-(R-T);if(T=R,W>0){if(++x>=I)return arguments[0]}else x=0;return m.apply(e,arguments)}}function Ab(m,x){var T=-1,R=m.length,W=R-1;for(x=x===e?R:x;++T<x;){var X=vM(T,W),et=m[X];m[X]=m[T],m[T]=et}return m.length=x,m}var Ej=ult(function(m){var x=[];return m.charCodeAt(0)===46&&x.push(""),m.replace(nst,function(T,R,W,X){x.push(W?X.replace(cst,"$1"):R||T)}),x});function Ko(m){if(typeof m=="string"||Ks(m))return m;var x=m+"";return x=="0"&&1/m==-H?"-0":x}function Wc(m){if(m!=null){try{return J1.call(m)}catch{}try{return m+""}catch{}}return""}function flt(m,x){return Aa(it,function(T){var R="_."+T[0];x&T[1]&&!Y1(m,R)&&m.push(R)}),m.sort()}function Oj(m){if(m instanceof Ke)return m.clone();var x=new Ca(m.__wrapped__,m.__chain__);return x.__actions__=xs(m.__actions__),x.__index__=m.__index__,x.__values__=m.__values__,x}function glt(m,x,T){(T?ts(m,x,T):x===e)?x=1:x=Hn(Oe(x),0);var R=m==null?0:m.length;if(!R||x<1)return[];for(var W=0,X=0,et=At(sb(R/x));W<R;)et[X++]=Ta(m,W,W+=x);return et}function mlt(m){for(var x=-1,T=m==null?0:m.length,R=0,W=[];++x<T;){var X=m[x];X&&(W[R++]=X)}return W}function vlt(){var m=arguments.length;if(!m)return[];for(var x=At(m-1),T=arguments[0],R=m;R--;)x[R-1]=arguments[R];return qu(Ce(T)?xs(T):[T],hr(x,1))}var _lt=Ne(function(m,x){return Cn(m)?Qm(m,hr(x,1,Cn,!0)):[]}),ylt=Ne(function(m,x){var T=Ma(x);return Cn(T)&&(T=e),Cn(m)?Qm(m,hr(x,1,Cn,!0),he(T,2)):[]}),blt=Ne(function(m,x){var T=Ma(x);return Cn(T)&&(T=e),Cn(m)?Qm(m,hr(x,1,Cn,!0),e,T):[]});function xlt(m,x,T){var R=m==null?0:m.length;return R?(x=T||x===e?1:Oe(x),Ta(m,x<0?0:x,R)):[]}function Slt(m,x,T){var R=m==null?0:m.length;return R?(x=T||x===e?1:Oe(x),x=R-x,Ta(m,0,x<0?0:x)):[]}function Alt(m,x){return m&&m.length?gb(m,he(x,3),!0,!0):[]}function wlt(m,x){return m&&m.length?gb(m,he(x,3),!0):[]}function Clt(m,x,T,R){var W=m==null?0:m.length;return W?(T&&typeof T!="number"&&ts(m,x,T)&&(T=0,R=W),vot(m,x,T,R)):[]}function Rj(m,x,T){var R=m==null?0:m.length;if(!R)return-1;var W=T==null?0:Oe(T);return W<0&&(W=Hn(R+W,0)),X1(m,he(x,3),W)}function Ij(m,x,T){var R=m==null?0:m.length;if(!R)return-1;var W=R-1;return T!==e&&(W=Oe(T),W=T<0?Hn(R+W,0):kr(W,R-1)),X1(m,he(x,3),W,!0)}function Lj(m){var x=m==null?0:m.length;return x?hr(m,1):[]}function klt(m){var x=m==null?0:m.length;return x?hr(m,H):[]}function Tlt(m,x){var T=m==null?0:m.length;return T?(x=x===e?1:Oe(x),hr(m,x)):[]}function Mlt(m){for(var x=-1,T=m==null?0:m.length,R={};++x<T;){var W=m[x];R[W[0]]=W[1]}return R}function Dj(m){return m&&m.length?m[0]:e}function Plt(m,x,T){var R=m==null?0:m.length;if(!R)return-1;var W=T==null?0:Oe(T);return W<0&&(W=Hn(R+W,0)),Rp(m,x,W)}function Elt(m){var x=m==null?0:m.length;return x?Ta(m,0,-1):[]}var Olt=Ne(function(m){var x=Yi(m,SM);return x.length&&x[0]===m[0]?dM(x):[]}),Rlt=Ne(function(m){var x=Ma(m),T=Yi(m,SM);return x===Ma(T)?x=e:T.pop(),T.length&&T[0]===m[0]?dM(T,he(x,2)):[]}),Ilt=Ne(function(m){var x=Ma(m),T=Yi(m,SM);return x=typeof x=="function"?x:e,x&&T.pop(),T.length&&T[0]===m[0]?dM(T,e,x):[]});function Llt(m,x){return m==null?"":Eat.call(m,x)}function Ma(m){var x=m==null?0:m.length;return x?m[x-1]:e}function Dlt(m,x,T){var R=m==null?0:m.length;if(!R)return-1;var W=R;return T!==e&&(W=Oe(T),W=W<0?Hn(R+W,0):kr(W,R-1)),x===x?fat(m,x,W):X1(m,g4,W,!0)}function Blt(m,x){return m&&m.length?U4(m,Oe(x)):e}var Flt=Ne(Bj);function Bj(m,x){return m&&m.length&&x&&x.length?mM(m,x):m}function jlt(m,x,T){return m&&m.length&&x&&x.length?mM(m,x,he(T,2)):m}function Nlt(m,x,T){return m&&m.length&&x&&x.length?mM(m,x,e,T):m}var zlt=Bl(function(m,x){var T=m==null?0:m.length,R=lM(m,x);return K4(m,Yi(x,function(W){return Fl(W,T)?+W:W}).sort(sj)),R});function Hlt(m,x){var T=[];if(!(m&&m.length))return T;var R=-1,W=[],X=m.length;for(x=he(x,3);++R<X;){var et=m[R];x(et,R,m)&&(T.push(et),W.push(R))}return K4(m,W),T}function BM(m){return m==null?m:Lat.call(m)}function Vlt(m,x,T){var R=m==null?0:m.length;return R?(T&&typeof T!="number"&&ts(m,x,T)?(x=0,T=R):(x=x==null?0:Oe(x),T=T===e?R:Oe(T)),Ta(m,x,T)):[]}function Wlt(m,x){return fb(m,x)}function $lt(m,x,T){return yM(m,x,he(T,2))}function Glt(m,x){var T=m==null?0:m.length;if(T){var R=fb(m,x);if(R<T&&ho(m[R],x))return R}return-1}function Ult(m,x){return fb(m,x,!0)}function Ylt(m,x,T){return yM(m,x,he(T,2),!0)}function Xlt(m,x){var T=m==null?0:m.length;if(T){var R=fb(m,x,!0)-1;if(ho(m[R],x))return R}return-1}function Klt(m){return m&&m.length?Z4(m):[]}function qlt(m,x){return m&&m.length?Z4(m,he(x,2)):[]}function Zlt(m){var x=m==null?0:m.length;return x?Ta(m,1,x):[]}function Jlt(m,x,T){return m&&m.length?(x=T||x===e?1:Oe(x),Ta(m,0,x<0?0:x)):[]}function Qlt(m,x,T){var R=m==null?0:m.length;return R?(x=T||x===e?1:Oe(x),x=R-x,Ta(m,x<0?0:x,R)):[]}function tut(m,x){return m&&m.length?gb(m,he(x,3),!1,!0):[]}function eut(m,x){return m&&m.length?gb(m,he(x,3)):[]}var iut=Ne(function(m){return th(hr(m,1,Cn,!0))}),nut=Ne(function(m){var x=Ma(m);return Cn(x)&&(x=e),th(hr(m,1,Cn,!0),he(x,2))}),rut=Ne(function(m){var x=Ma(m);return x=typeof x=="function"?x:e,th(hr(m,1,Cn,!0),e,x)});function sut(m){return m&&m.length?th(m):[]}function aut(m,x){return m&&m.length?th(m,he(x,2)):[]}function out(m,x){return x=typeof x=="function"?x:e,m&&m.length?th(m,e,x):[]}function FM(m){if(!(m&&m.length))return[];var x=0;return m=Ku(m,function(T){if(Cn(T))return x=Hn(T.length,x),!0}),tM(x,function(T){return Yi(m,ZT(T))})}function Fj(m,x){if(!(m&&m.length))return[];var T=FM(m);return x==null?T:Yi(T,function(R){return Us(x,e,R)})}var lut=Ne(function(m,x){return Cn(m)?Qm(m,x):[]}),uut=Ne(function(m){return xM(Ku(m,Cn))}),hut=Ne(function(m){var x=Ma(m);return Cn(x)&&(x=e),xM(Ku(m,Cn),he(x,2))}),cut=Ne(function(m){var x=Ma(m);return x=typeof x=="function"?x:e,xM(Ku(m,Cn),e,x)}),dut=Ne(FM);function put(m,x){return ej(m||[],x||[],Jm)}function fut(m,x){return ej(m||[],x||[],iv)}var gut=Ne(function(m){var x=m.length,T=x>1?m[x-1]:e;return T=typeof T=="function"?(m.pop(),T):e,Fj(m,T)});function jj(m){var x=Y(m);return x.__chain__=!0,x}function mut(m,x){return x(m),m}function wb(m,x){return x(m)}var vut=Bl(function(m){var x=m.length,T=x?m[0]:0,R=this.__wrapped__,W=function(X){return lM(X,m)};return x>1||this.__actions__.length||!(R instanceof Ke)||!Fl(T)?this.thru(W):(R=R.slice(T,+T+(x?1:0)),R.__actions__.push({func:wb,args:[W],thisArg:e}),new Ca(R,this.__chain__).thru(function(X){return x&&!X.length&&X.push(e),X}))});function _ut(){return jj(this)}function yut(){return new Ca(this.value(),this.__chain__)}function but(){this.__values__===e&&(this.__values__=Jj(this.value()));var m=this.__index__>=this.__values__.length,x=m?e:this.__values__[this.__index__++];return{done:m,value:x}}function xut(){return this}function Sut(m){for(var x,T=this;T instanceof ub;){var R=Oj(T);R.__index__=0,R.__values__=e,x?W.__wrapped__=R:x=R;var W=R;T=T.__wrapped__}return W.__wrapped__=m,x}function Aut(){var m=this.__wrapped__;if(m instanceof Ke){var x=m;return this.__actions__.length&&(x=new Ke(this)),x=x.reverse(),x.__actions__.push({func:wb,args:[BM],thisArg:e}),new Ca(x,this.__chain__)}return this.thru(BM)}function wut(){return tj(this.__wrapped__,this.__actions__)}var Cut=mb(function(m,x,T){_i.call(m,T)?++m[T]:Ll(m,T,1)});function kut(m,x,T){var R=Ce(m)?p4:mot;return T&&ts(m,x,T)&&(x=e),R(m,he(x,3))}function Tut(m,x){var T=Ce(m)?Ku:F4;return T(m,he(x,3))}var Mut=cj(Rj),Put=cj(Ij);function Eut(m,x){return hr(Cb(m,x),1)}function Out(m,x){return hr(Cb(m,x),H)}function Rut(m,x,T){return T=T===e?1:Oe(T),hr(Cb(m,x),T)}function Nj(m,x){var T=Ce(m)?Aa:Qu;return T(m,he(x,3))}function zj(m,x){var T=Ce(m)?Zst:B4;return T(m,he(x,3))}var Iut=mb(function(m,x,T){_i.call(m,T)?m[T].push(x):Ll(m,T,[x])});function Lut(m,x,T,R){m=Ss(m)?m:$p(m),T=T&&!R?Oe(T):0;var W=m.length;return T<0&&(T=Hn(W+T,0)),Eb(m)?T<=W&&m.indexOf(x,T)>-1:!!W&&Rp(m,x,T)>-1}var Dut=Ne(function(m,x,T){var R=-1,W=typeof x=="function",X=Ss(m)?At(m.length):[];return Qu(m,function(et){X[++R]=W?Us(x,et,T):tv(et,x,T)}),X}),But=mb(function(m,x,T){Ll(m,T,x)});function Cb(m,x){var T=Ce(m)?Yi:W4;return T(m,he(x,3))}function Fut(m,x,T,R){return m==null?[]:(Ce(x)||(x=x==null?[]:[x]),T=R?e:T,Ce(T)||(T=T==null?[]:[T]),Y4(m,x,T))}var jut=mb(function(m,x,T){m[T?0:1].push(x)},function(){return[[],[]]});function Nut(m,x,T){var R=Ce(m)?KT:v4,W=arguments.length<3;return R(m,he(x,4),T,W,Qu)}function zut(m,x,T){var R=Ce(m)?Jst:v4,W=arguments.length<3;return R(m,he(x,4),T,W,B4)}function Hut(m,x){var T=Ce(m)?Ku:F4;return T(m,Mb(he(x,3)))}function Vut(m){var x=Ce(m)?R4:Lot;return x(m)}function Wut(m,x,T){(T?ts(m,x,T):x===e)?x=1:x=Oe(x);var R=Ce(m)?cot:Dot;return R(m,x)}function $ut(m){var x=Ce(m)?dot:Fot;return x(m)}function Gut(m){if(m==null)return 0;if(Ss(m))return Eb(m)?Lp(m):m.length;var x=Tr(m);return x==yt||x==te?m.size:fM(m).length}function Uut(m,x,T){var R=Ce(m)?qT:jot;return T&&ts(m,x,T)&&(x=e),R(m,he(x,3))}var Yut=Ne(function(m,x){if(m==null)return[];var T=x.length;return T>1&&ts(m,x[0],x[1])?x=[]:T>2&&ts(x[0],x[1],x[2])&&(x=[x[0]]),Y4(m,hr(x,1),[])}),kb=Tat||function(){return ur.Date.now()};function Xut(m,x){if(typeof x!="function")throw new wa(a);return m=Oe(m),function(){if(--m<1)return x.apply(this,arguments)}}function Hj(m,x,T){return x=T?e:x,x=m&&x==null?m.length:x,Dl(m,C,e,e,e,e,x)}function Vj(m,x){var T;if(typeof x!="function")throw new wa(a);return m=Oe(m),function(){return--m>0&&(T=x.apply(this,arguments)),m<=1&&(x=e),T}}var jM=Ne(function(m,x,T){var R=_;if(T.length){var W=Zu(T,Vp(jM));R|=A}return Dl(m,R,x,T,W)}),Wj=Ne(function(m,x,T){var R=_|v;if(T.length){var W=Zu(T,Vp(Wj));R|=A}return Dl(x,R,m,T,W)});function $j(m,x,T){x=T?e:x;var R=Dl(m,b,e,e,e,e,e,x);return R.placeholder=$j.placeholder,R}function Gj(m,x,T){x=T?e:x;var R=Dl(m,S,e,e,e,e,e,x);return R.placeholder=Gj.placeholder,R}function Uj(m,x,T){var R,W,X,et,rt,ct,Et=0,Ot=!1,Dt=!1,Xt=!0;if(typeof m!="function")throw new wa(a);x=Pa(x)||0,sn(T)&&(Ot=!!T.leading,Dt="maxWait"in T,X=Dt?Hn(Pa(T.maxWait)||0,x):X,Xt="trailing"in T?!!T.trailing:Xt);function ee(kn){var co=R,zl=W;return R=W=e,Et=kn,et=m.apply(zl,co),et}function ce(kn){return Et=kn,rt=sv(Ge,x),Ot?ee(kn):et}function Be(kn){var co=kn-ct,zl=kn-Et,c8=x-co;return Dt?kr(c8,X-zl):c8}function de(kn){var co=kn-ct,zl=kn-Et;return ct===e||co>=x||co<0||Dt&&zl>=X}function Ge(){var kn=kb();if(de(kn))return Je(kn);rt=sv(Ge,Be(kn))}function Je(kn){return rt=e,Xt&&R?ee(kn):(R=W=e,et)}function qs(){rt!==e&&ij(rt),Et=0,R=ct=W=rt=e}function es(){return rt===e?et:Je(kb())}function Zs(){var kn=kb(),co=de(kn);if(R=arguments,W=this,ct=kn,co){if(rt===e)return ce(ct);if(Dt)return ij(rt),rt=sv(Ge,x),ee(ct)}return rt===e&&(rt=sv(Ge,x)),et}return Zs.cancel=qs,Zs.flush=es,Zs}var Kut=Ne(function(m,x){return D4(m,1,x)}),qut=Ne(function(m,x,T){return D4(m,Pa(x)||0,T)});function Zut(m){return Dl(m,M)}function Tb(m,x){if(typeof m!="function"||x!=null&&typeof x!="function")throw new wa(a);var T=function(){var R=arguments,W=x?x.apply(this,R):R[0],X=T.cache;if(X.has(W))return X.get(W);var et=m.apply(this,R);return T.cache=X.set(W,et)||X,et};return T.cache=new(Tb.Cache||Il),T}Tb.Cache=Il;function Mb(m){if(typeof m!="function")throw new wa(a);return function(){var x=arguments;switch(x.length){case 0:return!m.call(this);case 1:return!m.call(this,x[0]);case 2:return!m.call(this,x[0],x[1]);case 3:return!m.call(this,x[0],x[1],x[2])}return!m.apply(this,x)}}function Jut(m){return Vj(2,m)}var Qut=Not(function(m,x){x=x.length==1&&Ce(x[0])?Yi(x[0],Ys(he())):Yi(hr(x,1),Ys(he()));var T=x.length;return Ne(function(R){for(var W=-1,X=kr(R.length,T);++W<X;)R[W]=x[W].call(this,R[W]);return Us(m,this,R)})}),NM=Ne(function(m,x){var T=Zu(x,Vp(NM));return Dl(m,A,e,x,T)}),Yj=Ne(function(m,x){var T=Zu(x,Vp(Yj));return Dl(m,w,e,x,T)}),tht=Bl(function(m,x){return Dl(m,k,e,e,e,x)});function eht(m,x){if(typeof m!="function")throw new wa(a);return x=x===e?x:Oe(x),Ne(m,x)}function iht(m,x){if(typeof m!="function")throw new wa(a);return x=x==null?0:Hn(Oe(x),0),Ne(function(T){var R=T[x],W=ih(T,0,x);return R&&qu(W,R),Us(m,this,W)})}function nht(m,x,T){var R=!0,W=!0;if(typeof m!="function")throw new wa(a);return sn(T)&&(R="leading"in T?!!T.leading:R,W="trailing"in T?!!T.trailing:W),Uj(m,x,{leading:R,maxWait:x,trailing:W})}function rht(m){return Hj(m,1)}function sht(m,x){return NM(AM(x),m)}function aht(){if(!arguments.length)return[];var m=arguments[0];return Ce(m)?m:[m]}function oht(m){return ka(m,p)}function lht(m,x){return x=typeof x=="function"?x:e,ka(m,p,x)}function uht(m){return ka(m,c|p)}function hht(m,x){return x=typeof x=="function"?x:e,ka(m,c|p,x)}function cht(m,x){return x==null||L4(m,x,Zn(x))}function ho(m,x){return m===x||m!==m&&x!==x}var dht=bb(cM),pht=bb(function(m,x){return m>=x}),$c=z4(function(){return arguments}())?z4:function(m){return fn(m)&&_i.call(m,"callee")&&!k4.call(m,"callee")},Ce=At.isArray,fht=o4?Ys(o4):Sot;function Ss(m){return m!=null&&Pb(m.length)&&!jl(m)}function Cn(m){return fn(m)&&Ss(m)}function ght(m){return m===!0||m===!1||fn(m)&&Qr(m)==Q}var nh=Pat||qM,mht=l4?Ys(l4):Aot;function vht(m){return fn(m)&&m.nodeType===1&&!av(m)}function _ht(m){if(m==null)return!0;if(Ss(m)&&(Ce(m)||typeof m=="string"||typeof m.splice=="function"||nh(m)||Wp(m)||$c(m)))return!m.length;var x=Tr(m);if(x==yt||x==te)return!m.size;if(rv(m))return!fM(m).length;for(var T in m)if(_i.call(m,T))return!1;return!0}function yht(m,x){return ev(m,x)}function bht(m,x,T){T=typeof T=="function"?T:e;var R=T?T(m,x):e;return R===e?ev(m,x,e,T):!!R}function zM(m){if(!fn(m))return!1;var x=Qr(m);return x==xt||x==bt||typeof m.message=="string"&&typeof m.name=="string"&&!av(m)}function xht(m){return typeof m=="number"&&M4(m)}function jl(m){if(!sn(m))return!1;var x=Qr(m);return x==ht||x==St||x==J||x==Yt}function Xj(m){return typeof m=="number"&&m==Oe(m)}function Pb(m){return typeof m=="number"&&m>-1&&m%1==0&&m<=j}function sn(m){var x=typeof m;return m!=null&&(x=="object"||x=="function")}function fn(m){return m!=null&&typeof m=="object"}var Kj=u4?Ys(u4):Cot;function Sht(m,x){return m===x||pM(m,x,EM(x))}function Aht(m,x,T){return T=typeof T=="function"?T:e,pM(m,x,EM(x),T)}function wht(m){return qj(m)&&m!=+m}function Cht(m){if(llt(m))throw new xe(s);return H4(m)}function kht(m){return m===null}function Tht(m){return m==null}function qj(m){return typeof m=="number"||fn(m)&&Qr(m)==vt}function av(m){if(!fn(m)||Qr(m)!=jt)return!1;var x=ib(m);if(x===null)return!0;var T=_i.call(x,"constructor")&&x.constructor;return typeof T=="function"&&T instanceof T&&J1.call(T)==Aat}var HM=h4?Ys(h4):kot;function Mht(m){return Xj(m)&&m>=-j&&m<=j}var Zj=c4?Ys(c4):Tot;function Eb(m){return typeof m=="string"||!Ce(m)&&fn(m)&&Qr(m)==ge}function Ks(m){return typeof m=="symbol"||fn(m)&&Qr(m)==Pe}var Wp=d4?Ys(d4):Mot;function Pht(m){return m===e}function Eht(m){return fn(m)&&Tr(m)==Ze}function Oht(m){return fn(m)&&Qr(m)==je}var Rht=bb(gM),Iht=bb(function(m,x){return m<=x});function Jj(m){if(!m)return[];if(Ss(m))return Eb(m)?lo(m):xs(m);if(Ym&&m[Ym])return cat(m[Ym]());var x=Tr(m),T=x==yt?iM:x==te?K1:$p;return T(m)}function Nl(m){if(!m)return m===0?m:0;if(m=Pa(m),m===H||m===-H){var x=m<0?-1:1;return x*G}return m===m?m:0}function Oe(m){var x=Nl(m),T=x%1;return x===x?T?x-T:x:0}function Qj(m){return m?zc(Oe(m),0,$):0}function Pa(m){if(typeof m=="number")return m;if(Ks(m))return U;if(sn(m)){var x=typeof m.valueOf=="function"?m.valueOf():m;m=sn(x)?x+"":x}if(typeof m!="string")return m===0?m:+m;m=_4(m);var T=fst.test(m);return T||mst.test(m)?Xst(m.slice(2),T?2:8):pst.test(m)?U:+m}function t8(m){return Xo(m,As(m))}function Lht(m){return m?zc(Oe(m),-j,j):m===0?m:0}function pi(m){return m==null?"":Xs(m)}var Dht=zp(function(m,x){if(rv(x)||Ss(x)){Xo(x,Zn(x),m);return}for(var T in x)_i.call(x,T)&&Jm(m,T,x[T])}),e8=zp(function(m,x){Xo(x,As(x),m)}),Ob=zp(function(m,x,T,R){Xo(x,As(x),m,R)}),Bht=zp(function(m,x,T,R){Xo(x,Zn(x),m,R)}),Fht=Bl(lM);function jht(m,x){var T=Np(m);return x==null?T:I4(T,x)}var Nht=Ne(function(m,x){m=Pi(m);var T=-1,R=x.length,W=R>2?x[2]:e;for(W&&ts(x[0],x[1],W)&&(R=1);++T<R;)for(var X=x[T],et=As(X),rt=-1,ct=et.length;++rt<ct;){var Et=et[rt],Ot=m[Et];(Ot===e||ho(Ot,Bp[Et])&&!_i.call(m,Et))&&(m[Et]=X[Et])}return m}),zht=Ne(function(m){return m.push(e,_j),Us(i8,e,m)});function Hht(m,x){return f4(m,he(x,3),Yo)}function Vht(m,x){return f4(m,he(x,3),hM)}function Wht(m,x){return m==null?m:uM(m,he(x,3),As)}function $ht(m,x){return m==null?m:j4(m,he(x,3),As)}function Ght(m,x){return m&&Yo(m,he(x,3))}function Uht(m,x){return m&&hM(m,he(x,3))}function Yht(m){return m==null?[]:db(m,Zn(m))}function Xht(m){return m==null?[]:db(m,As(m))}function VM(m,x,T){var R=m==null?e:Hc(m,x);return R===e?T:R}function Kht(m,x){return m!=null&&xj(m,x,_ot)}function WM(m,x){return m!=null&&xj(m,x,yot)}var qht=pj(function(m,x,T){x!=null&&typeof x.toString!="function"&&(x=Q1.call(x)),m[x]=T},GM(ws)),Zht=pj(function(m,x,T){x!=null&&typeof x.toString!="function"&&(x=Q1.call(x)),_i.call(m,x)?m[x].push(T):m[x]=[T]},he),Jht=Ne(tv);function Zn(m){return Ss(m)?O4(m):fM(m)}function As(m){return Ss(m)?O4(m,!0):Pot(m)}function Qht(m,x){var T={};return x=he(x,3),Yo(m,function(R,W,X){Ll(T,x(R,W,X),R)}),T}function tct(m,x){var T={};return x=he(x,3),Yo(m,function(R,W,X){Ll(T,W,x(R,W,X))}),T}var ect=zp(function(m,x,T){pb(m,x,T)}),i8=zp(function(m,x,T,R){pb(m,x,T,R)}),ict=Bl(function(m,x){var T={};if(m==null)return T;var R=!1;x=Yi(x,function(X){return X=eh(X,m),R||(R=X.length>1),X}),Xo(m,MM(m),T),R&&(T=ka(T,c|d|p,qot));for(var W=x.length;W--;)bM(T,x[W]);return T});function nct(m,x){return n8(m,Mb(he(x)))}var rct=Bl(function(m,x){return m==null?{}:Oot(m,x)});function n8(m,x){if(m==null)return{};var T=Yi(MM(m),function(R){return[R]});return x=he(x),X4(m,T,function(R,W){return x(R,W[0])})}function sct(m,x,T){x=eh(x,m);var R=-1,W=x.length;for(W||(W=1,m=e);++R<W;){var X=m==null?e:m[Ko(x[R])];X===e&&(R=W,X=T),m=jl(X)?X.call(m):X}return m}function act(m,x,T){return m==null?m:iv(m,x,T)}function oct(m,x,T,R){return R=typeof R=="function"?R:e,m==null?m:iv(m,x,T,R)}var r8=mj(Zn),s8=mj(As);function lct(m,x,T){var R=Ce(m),W=R||nh(m)||Wp(m);if(x=he(x,4),T==null){var X=m&&m.constructor;W?T=R?new X:[]:sn(m)?T=jl(X)?Np(ib(m)):{}:T={}}return(W?Aa:Yo)(m,function(et,rt,ct){return x(T,et,rt,ct)}),T}function uct(m,x){return m==null?!0:bM(m,x)}function hct(m,x,T){return m==null?m:Q4(m,x,AM(T))}function cct(m,x,T,R){return R=typeof R=="function"?R:e,m==null?m:Q4(m,x,AM(T),R)}function $p(m){return m==null?[]:eM(m,Zn(m))}function dct(m){return m==null?[]:eM(m,As(m))}function pct(m,x,T){return T===e&&(T=x,x=e),T!==e&&(T=Pa(T),T=T===T?T:0),x!==e&&(x=Pa(x),x=x===x?x:0),zc(Pa(m),x,T)}function fct(m,x,T){return x=Nl(x),T===e?(T=x,x=0):T=Nl(T),m=Pa(m),bot(m,x,T)}function gct(m,x,T){if(T&&typeof T!="boolean"&&ts(m,x,T)&&(x=T=e),T===e&&(typeof x=="boolean"?(T=x,x=e):typeof m=="boolean"&&(T=m,m=e)),m===e&&x===e?(m=0,x=1):(m=Nl(m),x===e?(x=m,m=0):x=Nl(x)),m>x){var R=m;m=x,x=R}if(T||m%1||x%1){var W=P4();return kr(m+W*(x-m+Yst("1e-"+((W+"").length-1))),x)}return vM(m,x)}var mct=Hp(function(m,x,T){return x=x.toLowerCase(),m+(T?a8(x):x)});function a8(m){return $M(pi(m).toLowerCase())}function o8(m){return m=pi(m),m&&m.replace(_st,aat).replace(Fst,"")}function vct(m,x,T){m=pi(m),x=Xs(x);var R=m.length;T=T===e?R:zc(Oe(T),0,R);var W=T;return T-=x.length,T>=0&&m.slice(T,W)==x}function _ct(m){return m=pi(m),m&&Cr.test(m)?m.replace($m,oat):m}function yct(m){return m=pi(m),m&&rst.test(m)?m.replace(NT,"\\$&"):m}var bct=Hp(function(m,x,T){return m+(T?"-":"")+x.toLowerCase()}),xct=Hp(function(m,x,T){return m+(T?" ":"")+x.toLowerCase()}),Sct=hj("toLowerCase");function Act(m,x,T){m=pi(m),x=Oe(x);var R=x?Lp(m):0;if(!x||R>=x)return m;var W=(x-R)/2;return yb(ab(W),T)+m+yb(sb(W),T)}function wct(m,x,T){m=pi(m),x=Oe(x);var R=x?Lp(m):0;return x&&R<x?m+yb(x-R,T):m}function Cct(m,x,T){m=pi(m),x=Oe(x);var R=x?Lp(m):0;return x&&R<x?yb(x-R,T)+m:m}function kct(m,x,T){return T||x==null?x=0:x&&(x=+x),Iat(pi(m).replace(zT,""),x||0)}function Tct(m,x,T){return(T?ts(m,x,T):x===e)?x=1:x=Oe(x),_M(pi(m),x)}function Mct(){var m=arguments,x=pi(m[0]);return m.length<3?x:x.replace(m[1],m[2])}var Pct=Hp(function(m,x,T){return m+(T?"_":"")+x.toLowerCase()});function Ect(m,x,T){return T&&typeof T!="number"&&ts(m,x,T)&&(x=T=e),T=T===e?$:T>>>0,T?(m=pi(m),m&&(typeof x=="string"||x!=null&&!HM(x))&&(x=Xs(x),!x&&Ip(m))?ih(lo(m),0,T):m.split(x,T)):[]}var Oct=Hp(function(m,x,T){return m+(T?" ":"")+$M(x)});function Rct(m,x,T){return m=pi(m),T=T==null?0:zc(Oe(T),0,m.length),x=Xs(x),m.slice(T,T+x.length)==x}function Ict(m,x,T){var R=Y.templateSettings;T&&ts(m,x,T)&&(x=e),m=pi(m),x=Ob({},x,R,vj);var W=Ob({},x.imports,R.imports,vj),X=Zn(W),et=eM(W,X),rt,ct,Et=0,Ot=x.interpolate||$1,Dt="__p += '",Xt=nM((x.escape||$1).source+"|"+Ot.source+"|"+(Ot===Ol?dst:$1).source+"|"+(x.evaluate||$1).source+"|$","g"),ee="//# sourceURL="+(_i.call(x,"sourceURL")?(x.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Vst+"]")+`
`;m.replace(Xt,function(de,Ge,Je,qs,es,Zs){return Je||(Je=qs),Dt+=m.slice(Et,Zs).replace(yst,lat),Ge&&(rt=!0,Dt+=`' +
__e(`+Ge+`) +
'`),es&&(ct=!0,Dt+=`';
`+es+`;
__p += '`),Je&&(Dt+=`' +
((__t = (`+Je+`)) == null ? '' : __t) +
'`),Et=Zs+de.length,de}),Dt+=`';
`;var ce=_i.call(x,"variable")&&x.variable;if(!ce)Dt=`with (obj) {
`+Dt+`
}
`;else if(hst.test(ce))throw new xe(o);Dt=(ct?Dt.replace(V1,""):Dt).replace(jT,"$1").replace(W1,"$1;"),Dt="function("+(ce||"obj")+`) {
`+(ce?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(rt?", __e = _.escape":"")+(ct?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Dt+`return __p
}`;var Be=u8(function(){return ui(X,ee+"return "+Dt).apply(e,et)});if(Be.source=Dt,zM(Be))throw Be;return Be}function Lct(m){return pi(m).toLowerCase()}function Dct(m){return pi(m).toUpperCase()}function Bct(m,x,T){if(m=pi(m),m&&(T||x===e))return _4(m);if(!m||!(x=Xs(x)))return m;var R=lo(m),W=lo(x),X=y4(R,W),et=b4(R,W)+1;return ih(R,X,et).join("")}function Fct(m,x,T){if(m=pi(m),m&&(T||x===e))return m.slice(0,S4(m)+1);if(!m||!(x=Xs(x)))return m;var R=lo(m),W=b4(R,lo(x))+1;return ih(R,0,W).join("")}function jct(m,x,T){if(m=pi(m),m&&(T||x===e))return m.replace(zT,"");if(!m||!(x=Xs(x)))return m;var R=lo(m),W=y4(R,lo(x));return ih(R,W).join("")}function Nct(m,x){var T=P,R=E;if(sn(x)){var W="separator"in x?x.separator:W;T="length"in x?Oe(x.length):T,R="omission"in x?Xs(x.omission):R}m=pi(m);var X=m.length;if(Ip(m)){var et=lo(m);X=et.length}if(T>=X)return m;var rt=T-Lp(R);if(rt<1)return R;var ct=et?ih(et,0,rt).join(""):m.slice(0,rt);if(W===e)return ct+R;if(et&&(rt+=ct.length-rt),HM(W)){if(m.slice(rt).search(W)){var Et,Ot=ct;for(W.global||(W=nM(W.source,pi(z5.exec(W))+"g")),W.lastIndex=0;Et=W.exec(Ot);)var Dt=Et.index;ct=ct.slice(0,Dt===e?rt:Dt)}}else if(m.indexOf(Xs(W),rt)!=rt){var Xt=ct.lastIndexOf(W);Xt>-1&&(ct=ct.slice(0,Xt))}return ct+R}function zct(m){return m=pi(m),m&&me.test(m)?m.replace(Ep,gat):m}var Hct=Hp(function(m,x,T){return m+(T?" ":"")+x.toUpperCase()}),$M=hj("toUpperCase");function l8(m,x,T){return m=pi(m),x=T?e:x,x===e?hat(m)?_at(m):eat(m):m.match(x)||[]}var u8=Ne(function(m,x){try{return Us(m,e,x)}catch(T){return zM(T)?T:new xe(T)}}),Vct=Bl(function(m,x){return Aa(x,function(T){T=Ko(T),Ll(m,T,jM(m[T],m))}),m});function Wct(m){var x=m==null?0:m.length,T=he();return m=x?Yi(m,function(R){if(typeof R[1]!="function")throw new wa(a);return[T(R[0]),R[1]]}):[],Ne(function(R){for(var W=-1;++W<x;){var X=m[W];if(Us(X[0],this,R))return Us(X[1],this,R)}})}function $ct(m){return got(ka(m,c))}function GM(m){return function(){return m}}function Gct(m,x){return m==null||m!==m?x:m}var Uct=dj(),Yct=dj(!0);function ws(m){return m}function UM(m){return V4(typeof m=="function"?m:ka(m,c))}function Xct(m){return $4(ka(m,c))}function Kct(m,x){return G4(m,ka(x,c))}var qct=Ne(function(m,x){return function(T){return tv(T,m,x)}}),Zct=Ne(function(m,x){return function(T){return tv(m,T,x)}});function YM(m,x,T){var R=Zn(x),W=db(x,R);T==null&&!(sn(x)&&(W.length||!R.length))&&(T=x,x=m,m=this,W=db(x,Zn(x)));var X=!(sn(T)&&"chain"in T)||!!T.chain,et=jl(m);return Aa(W,function(rt){var ct=x[rt];m[rt]=ct,et&&(m.prototype[rt]=function(){var Et=this.__chain__;if(X||Et){var Ot=m(this.__wrapped__),Dt=Ot.__actions__=xs(this.__actions__);return Dt.push({func:ct,args:arguments,thisArg:m}),Ot.__chain__=Et,Ot}return ct.apply(m,qu([this.value()],arguments))})}),m}function Jct(){return ur._===this&&(ur._=wat),this}function XM(){}function Qct(m){return m=Oe(m),Ne(function(x){return U4(x,m)})}var tdt=CM(Yi),edt=CM(p4),idt=CM(qT);function h8(m){return RM(m)?ZT(Ko(m)):Rot(m)}function ndt(m){return function(x){return m==null?e:Hc(m,x)}}var rdt=fj(),sdt=fj(!0);function KM(){return[]}function qM(){return!1}function adt(){return{}}function odt(){return""}function ldt(){return!0}function udt(m,x){if(m=Oe(m),m<1||m>j)return[];var T=$,R=kr(m,$);x=he(x),m-=$;for(var W=tM(R,x);++T<m;)x(T);return W}function hdt(m){return Ce(m)?Yi(m,Ko):Ks(m)?[m]:xs(Ej(pi(m)))}function cdt(m){var x=++Sat;return pi(m)+x}var ddt=_b(function(m,x){return m+x},0),pdt=kM("ceil"),fdt=_b(function(m,x){return m/x},1),gdt=kM("floor");function mdt(m){return m&&m.length?cb(m,ws,cM):e}function vdt(m,x){return m&&m.length?cb(m,he(x,2),cM):e}function _dt(m){return m4(m,ws)}function ydt(m,x){return m4(m,he(x,2))}function bdt(m){return m&&m.length?cb(m,ws,gM):e}function xdt(m,x){return m&&m.length?cb(m,he(x,2),gM):e}var Sdt=_b(function(m,x){return m*x},1),Adt=kM("round"),wdt=_b(function(m,x){return m-x},0);function Cdt(m){return m&&m.length?QT(m,ws):0}function kdt(m,x){return m&&m.length?QT(m,he(x,2)):0}return Y.after=Xut,Y.ary=Hj,Y.assign=Dht,Y.assignIn=e8,Y.assignInWith=Ob,Y.assignWith=Bht,Y.at=Fht,Y.before=Vj,Y.bind=jM,Y.bindAll=Vct,Y.bindKey=Wj,Y.castArray=aht,Y.chain=jj,Y.chunk=glt,Y.compact=mlt,Y.concat=vlt,Y.cond=Wct,Y.conforms=$ct,Y.constant=GM,Y.countBy=Cut,Y.create=jht,Y.curry=$j,Y.curryRight=Gj,Y.debounce=Uj,Y.defaults=Nht,Y.defaultsDeep=zht,Y.defer=Kut,Y.delay=qut,Y.difference=_lt,Y.differenceBy=ylt,Y.differenceWith=blt,Y.drop=xlt,Y.dropRight=Slt,Y.dropRightWhile=Alt,Y.dropWhile=wlt,Y.fill=Clt,Y.filter=Tut,Y.flatMap=Eut,Y.flatMapDeep=Out,Y.flatMapDepth=Rut,Y.flatten=Lj,Y.flattenDeep=klt,Y.flattenDepth=Tlt,Y.flip=Zut,Y.flow=Uct,Y.flowRight=Yct,Y.fromPairs=Mlt,Y.functions=Yht,Y.functionsIn=Xht,Y.groupBy=Iut,Y.initial=Elt,Y.intersection=Olt,Y.intersectionBy=Rlt,Y.intersectionWith=Ilt,Y.invert=qht,Y.invertBy=Zht,Y.invokeMap=Dut,Y.iteratee=UM,Y.keyBy=But,Y.keys=Zn,Y.keysIn=As,Y.map=Cb,Y.mapKeys=Qht,Y.mapValues=tct,Y.matches=Xct,Y.matchesProperty=Kct,Y.memoize=Tb,Y.merge=ect,Y.mergeWith=i8,Y.method=qct,Y.methodOf=Zct,Y.mixin=YM,Y.negate=Mb,Y.nthArg=Qct,Y.omit=ict,Y.omitBy=nct,Y.once=Jut,Y.orderBy=Fut,Y.over=tdt,Y.overArgs=Qut,Y.overEvery=edt,Y.overSome=idt,Y.partial=NM,Y.partialRight=Yj,Y.partition=jut,Y.pick=rct,Y.pickBy=n8,Y.property=h8,Y.propertyOf=ndt,Y.pull=Flt,Y.pullAll=Bj,Y.pullAllBy=jlt,Y.pullAllWith=Nlt,Y.pullAt=zlt,Y.range=rdt,Y.rangeRight=sdt,Y.rearg=tht,Y.reject=Hut,Y.remove=Hlt,Y.rest=eht,Y.reverse=BM,Y.sampleSize=Wut,Y.set=act,Y.setWith=oct,Y.shuffle=$ut,Y.slice=Vlt,Y.sortBy=Yut,Y.sortedUniq=Klt,Y.sortedUniqBy=qlt,Y.split=Ect,Y.spread=iht,Y.tail=Zlt,Y.take=Jlt,Y.takeRight=Qlt,Y.takeRightWhile=tut,Y.takeWhile=eut,Y.tap=mut,Y.throttle=nht,Y.thru=wb,Y.toArray=Jj,Y.toPairs=r8,Y.toPairsIn=s8,Y.toPath=hdt,Y.toPlainObject=t8,Y.transform=lct,Y.unary=rht,Y.union=iut,Y.unionBy=nut,Y.unionWith=rut,Y.uniq=sut,Y.uniqBy=aut,Y.uniqWith=out,Y.unset=uct,Y.unzip=FM,Y.unzipWith=Fj,Y.update=hct,Y.updateWith=cct,Y.values=$p,Y.valuesIn=dct,Y.without=lut,Y.words=l8,Y.wrap=sht,Y.xor=uut,Y.xorBy=hut,Y.xorWith=cut,Y.zip=dut,Y.zipObject=put,Y.zipObjectDeep=fut,Y.zipWith=gut,Y.entries=r8,Y.entriesIn=s8,Y.extend=e8,Y.extendWith=Ob,YM(Y,Y),Y.add=ddt,Y.attempt=u8,Y.camelCase=mct,Y.capitalize=a8,Y.ceil=pdt,Y.clamp=pct,Y.clone=oht,Y.cloneDeep=uht,Y.cloneDeepWith=hht,Y.cloneWith=lht,Y.conformsTo=cht,Y.deburr=o8,Y.defaultTo=Gct,Y.divide=fdt,Y.endsWith=vct,Y.eq=ho,Y.escape=_ct,Y.escapeRegExp=yct,Y.every=kut,Y.find=Mut,Y.findIndex=Rj,Y.findKey=Hht,Y.findLast=Put,Y.findLastIndex=Ij,Y.findLastKey=Vht,Y.floor=gdt,Y.forEach=Nj,Y.forEachRight=zj,Y.forIn=Wht,Y.forInRight=$ht,Y.forOwn=Ght,Y.forOwnRight=Uht,Y.get=VM,Y.gt=dht,Y.gte=pht,Y.has=Kht,Y.hasIn=WM,Y.head=Dj,Y.identity=ws,Y.includes=Lut,Y.indexOf=Plt,Y.inRange=fct,Y.invoke=Jht,Y.isArguments=$c,Y.isArray=Ce,Y.isArrayBuffer=fht,Y.isArrayLike=Ss,Y.isArrayLikeObject=Cn,Y.isBoolean=ght,Y.isBuffer=nh,Y.isDate=mht,Y.isElement=vht,Y.isEmpty=_ht,Y.isEqual=yht,Y.isEqualWith=bht,Y.isError=zM,Y.isFinite=xht,Y.isFunction=jl,Y.isInteger=Xj,Y.isLength=Pb,Y.isMap=Kj,Y.isMatch=Sht,Y.isMatchWith=Aht,Y.isNaN=wht,Y.isNative=Cht,Y.isNil=Tht,Y.isNull=kht,Y.isNumber=qj,Y.isObject=sn,Y.isObjectLike=fn,Y.isPlainObject=av,Y.isRegExp=HM,Y.isSafeInteger=Mht,Y.isSet=Zj,Y.isString=Eb,Y.isSymbol=Ks,Y.isTypedArray=Wp,Y.isUndefined=Pht,Y.isWeakMap=Eht,Y.isWeakSet=Oht,Y.join=Llt,Y.kebabCase=bct,Y.last=Ma,Y.lastIndexOf=Dlt,Y.lowerCase=xct,Y.lowerFirst=Sct,Y.lt=Rht,Y.lte=Iht,Y.max=mdt,Y.maxBy=vdt,Y.mean=_dt,Y.meanBy=ydt,Y.min=bdt,Y.minBy=xdt,Y.stubArray=KM,Y.stubFalse=qM,Y.stubObject=adt,Y.stubString=odt,Y.stubTrue=ldt,Y.multiply=Sdt,Y.nth=Blt,Y.noConflict=Jct,Y.noop=XM,Y.now=kb,Y.pad=Act,Y.padEnd=wct,Y.padStart=Cct,Y.parseInt=kct,Y.random=gct,Y.reduce=Nut,Y.reduceRight=zut,Y.repeat=Tct,Y.replace=Mct,Y.result=sct,Y.round=Adt,Y.runInContext=lt,Y.sample=Vut,Y.size=Gut,Y.snakeCase=Pct,Y.some=Uut,Y.sortedIndex=Wlt,Y.sortedIndexBy=$lt,Y.sortedIndexOf=Glt,Y.sortedLastIndex=Ult,Y.sortedLastIndexBy=Ylt,Y.sortedLastIndexOf=Xlt,Y.startCase=Oct,Y.startsWith=Rct,Y.subtract=wdt,Y.sum=Cdt,Y.sumBy=kdt,Y.template=Ict,Y.times=udt,Y.toFinite=Nl,Y.toInteger=Oe,Y.toLength=Qj,Y.toLower=Lct,Y.toNumber=Pa,Y.toSafeInteger=Lht,Y.toString=pi,Y.toUpper=Dct,Y.trim=Bct,Y.trimEnd=Fct,Y.trimStart=jct,Y.truncate=Nct,Y.unescape=zct,Y.uniqueId=cdt,Y.upperCase=Hct,Y.upperFirst=$M,Y.each=Nj,Y.eachRight=zj,Y.first=Dj,YM(Y,function(){var m={};return Yo(Y,function(x,T){_i.call(Y.prototype,T)||(m[T]=x)}),m}(),{chain:!1}),Y.VERSION=i,Aa(["bind","bindKey","curry","curryRight","partial","partialRight"],function(m){Y[m].placeholder=Y}),Aa(["drop","take"],function(m,x){Ke.prototype[m]=function(T){T=T===e?1:Hn(Oe(T),0);var R=this.__filtered__&&!x?new Ke(this):this.clone();return R.__filtered__?R.__takeCount__=kr(T,R.__takeCount__):R.__views__.push({size:kr(T,$),type:m+(R.__dir__<0?"Right":"")}),R},Ke.prototype[m+"Right"]=function(T){return this.reverse()[m](T).reverse()}}),Aa(["filter","map","takeWhile"],function(m,x){var T=x+1,R=T==N||T==L;Ke.prototype[m]=function(W){var X=this.clone();return X.__iteratees__.push({iteratee:he(W,3),type:T}),X.__filtered__=X.__filtered__||R,X}}),Aa(["head","last"],function(m,x){var T="take"+(x?"Right":"");Ke.prototype[m]=function(){return this[T](1).value()[0]}}),Aa(["initial","tail"],function(m,x){var T="drop"+(x?"":"Right");Ke.prototype[m]=function(){return this.__filtered__?new Ke(this):this[T](1)}}),Ke.prototype.compact=function(){return this.filter(ws)},Ke.prototype.find=function(m){return this.filter(m).head()},Ke.prototype.findLast=function(m){return this.reverse().find(m)},Ke.prototype.invokeMap=Ne(function(m,x){return typeof m=="function"?new Ke(this):this.map(function(T){return tv(T,m,x)})}),Ke.prototype.reject=function(m){return this.filter(Mb(he(m)))},Ke.prototype.slice=function(m,x){m=Oe(m);var T=this;return T.__filtered__&&(m>0||x<0)?new Ke(T):(m<0?T=T.takeRight(-m):m&&(T=T.drop(m)),x!==e&&(x=Oe(x),T=x<0?T.dropRight(-x):T.take(x-m)),T)},Ke.prototype.takeRightWhile=function(m){return this.reverse().takeWhile(m).reverse()},Ke.prototype.toArray=function(){return this.take($)},Yo(Ke.prototype,function(m,x){var T=/^(?:filter|find|map|reject)|While$/.test(x),R=/^(?:head|last)$/.test(x),W=Y[R?"take"+(x=="last"?"Right":""):x],X=R||/^find/.test(x);W&&(Y.prototype[x]=function(){var et=this.__wrapped__,rt=R?[1]:arguments,ct=et instanceof Ke,Et=rt[0],Ot=ct||Ce(et),Dt=function(Ge){var Je=W.apply(Y,qu([Ge],rt));return R&&Xt?Je[0]:Je};Ot&&T&&typeof Et=="function"&&Et.length!=1&&(ct=Ot=!1);var Xt=this.__chain__,ee=!!this.__actions__.length,ce=X&&!Xt,Be=ct&&!ee;if(!X&&Ot){et=Be?et:new Ke(this);var de=m.apply(et,rt);return de.__actions__.push({func:wb,args:[Dt],thisArg:e}),new Ca(de,Xt)}return ce&&Be?m.apply(this,rt):(de=this.thru(Dt),ce?R?de.value()[0]:de.value():de)})}),Aa(["pop","push","shift","sort","splice","unshift"],function(m){var x=q1[m],T=/^(?:push|sort|unshift)$/.test(m)?"tap":"thru",R=/^(?:pop|shift)$/.test(m);Y.prototype[m]=function(){var W=arguments;if(R&&!this.__chain__){var X=this.value();return x.apply(Ce(X)?X:[],W)}return this[T](function(et){return x.apply(Ce(et)?et:[],W)})}}),Yo(Ke.prototype,function(m,x){var T=Y[x];if(T){var R=T.name+"";_i.call(jp,R)||(jp[R]=[]),jp[R].push({name:x,func:T})}}),jp[vb(e,v).name]=[{name:"wrapper",func:e}],Ke.prototype.clone=zat,Ke.prototype.reverse=Hat,Ke.prototype.value=Vat,Y.prototype.at=vut,Y.prototype.chain=_ut,Y.prototype.commit=yut,Y.prototype.next=but,Y.prototype.plant=Sut,Y.prototype.reverse=Aut,Y.prototype.toJSON=Y.prototype.valueOf=Y.prototype.value=wut,Y.prototype.first=Y.prototype.head,Ym&&(Y.prototype[Ym]=xut),Y},Dp=yat();Bc?((Bc.exports=Dp)._=Dp,UT._=Dp):ur._=Dp}).call(So)})(nk,nk.exports);var kYt=nk.exports;const _l=Du(kYt);class TYt{generateChartOptions(t){const{options:e}=t??{},{fields:i,type:r,layout:s,visual:a}=e??{},{category:o,value:l}=i??{},{direction:u="vertical"}=s??{};let h={xField:o,yField:l};return u==="horizontal"&&(h={xField:l,yField:o}),{layout:s,visual:a,type:r,chartFields:h}}}class MYt{generateChartOptions(t){const{options:e}=t??{},{fields:i,type:r,layout:s,visual:a}=e??{},{category:o,value:l}=i??{};return{layout:s,visual:a,type:r,chartFields:{categoryField:o,valueField:l}}}}const iO=new Map([["pie",MYt],["bar",TYt]]);class PYt{generateData(t){return t}}class EYt{generateData(t){return t==null?void 0:t.map((e,i)=>({key:i,value:e}))}}const nO=new Map([["object-array",PYt],["number-array",EYt]]);class OYt{constructor(t){Js(this,"strategy");this.strategy=t}getChartOptions(t){return this.strategy.generateChartOptions(t)}}class RYt{constructor(t){Js(this,"strategy");this.strategy=t}getData(t){var e;return(e=this.strategy)==null?void 0:e.generateData(t)}}class IYt{constructor(){Js(this,"schema");this.schema={dataStructureType:"",data:[],actions:[],fields:{},chartConfig:{type:"",visual:{},layout:{},chartFields:{}}}}setData(t){this.schema.data=_l.cloneDeep(t)}getData(){return this.schema.data}setDataStructureType(t){this.schema.dataStructureType=t}getDataStructureType(){return this.schema.dataStructureType}setChartConfig(t){this.schema.chartConfig=_l.cloneDeep(t)}getChartConfig(){return this.schema.chartConfig}getActions(){return this.schema.actions}setActions(t){this.schema.actions=t}setFields(t){this.schema.fields=_l.cloneDeep(t)}getFields(){return this.schema.fields}getSchema(){return this.schema}}const Brt=()=>{const n=new IYt;return{loadChartConfig:s=>{const{options:a}=s??{},{type:o}=a??{},l=iO==null?void 0:iO.get(o);l&&n.setChartConfig(new OYt(new l).getChartOptions(s))},loadData:s=>{var l;let a="array";a==="array"&&(a=`${s!=null&&s.every(h=>_l.isNumber(h))?"number":"object"}-${a}`);const o=nO==null?void 0:nO.get(a);o&&(n==null||n.setData((l=new RYt(new o))==null?void 0:l.getData(s)))},loadBasicProperties:(s,a)=>{n.setFields(s),n.setDataStructureType(a),n.setActions([])},build:()=>n}},LYt={dataStructureType:"array",data:[],options:{type:"bar",visual:{},fields:{category:"key",value:"value"}},actions:[]},wg={array:LYt};class Frt{constructor(t,e){return this.init(t,e),this.getProxy()}getDefaultConfig(t,e){if(typeof t!="string"){const i=wg==null?void 0:wg.array;e=_l.cloneDeep({...i,data:t})}return["array",e]}init(t,e){[t,e]=this.getDefaultConfig(t,e);const{data:i,options:r}=e??{},{fields:s}=r??{},a=Brt();a.loadData(i),a.loadChartConfig(e),a.loadBasicProperties(s,t);const o=a.build();this.schema=o.getSchema(),this.data=_l.cloneDeep(o.getData())}getInstance(){return this}get length(){return this.data.length}getProxy(){const t=this;return new Proxy(this,{get(e,i){if(!isNaN(Number(i)))return e.get(i);const r=e==null?void 0:e[i];return typeof r=="function"?r.bind(t):r},set(e,i,r){return isNaN(Number(i))||e.set(+i,r),!0}})}push(t){this.data.push(x_(t)),this.schema.actions.push({op:"push",value:x_(t)})}pop(){this.data.pop(),this.schema.actions.push({op:"pop"})}set(t,e){const i=Xx(this.schema,"category"),r=Xx(this.schema,"value");let s=t;if(!isNaN(+t))s={id:`${e}-${t}`,[i]:+t,[r]:+e},this.data[+t]=_l.cloneDeep(s);else{let a=0;this.data.map((o,l)=>{if((o==null?void 0:o[i])===(s==null?void 0:s[i])){a=l;return}}),this.data[a]=_l.cloneDeep(s)}this.schema.actions.push({op:"set",value:s})}get(t){var s;const e=Xx(this.schema,"category"),i=Xx(this.schema,"value"),r=this.data.filter(a=>(a==null?void 0:a[e])===+t);if(r[0])return(s=r[0])==null?void 0:s[i]}insert(t,e){this.data.splice(e,0,t),this.schema.actions.push({op:"insert",value:x_(t),place:e})}delete(t){const e=Object.keys(t)[0];let i=0;this.data.map((r,s)=>{(r==null?void 0:r[e])===+Object.values(t)[0]&&(i=s)}),this.data.splice(i,1),this.schema.actions.push({op:"delete",value:t})}}const DYt={push:n=>{const{data:t,modifyValue:e={}}=n;return t.push(e),t},pop:n=>{const{data:t}=n;return t.pop(),t},set:n=>{const{data:t,modifyValue:e={},category:i="key"}=n;let r=-1;return t.map((s,a)=>{if(s[i]===(e==null?void 0:e[i])){r=a;return}}),t[r]=e,t},insert:n=>{const{data:t,modifyValue:e={},place:i=0}=n;return t.splice(i,0,e),t},delete:n=>{const{data:t,modifyValue:e={}}=n,i=Object.keys(e)[0];let r=0;return t.map((s,a)=>{s[i]===Object.values(e)[0]&&(r=a)}),t.splice(r,1),t}};class jrt{constructor(t,e){return this.init(t,e),this.getProxy()}getProxy(){const t=this;return new Proxy(this,{get(e,i){if(!isNaN(Number(i)))return e.get(i);const r=e==null?void 0:e[i];return typeof r=="function"?r.bind(t):r},set(e,i,r){return isNaN(Number(i))||e.set(+i,r),!0}})}getDefaultConfig(t,e){const i=wg==null?void 0:wg[t];return e=_l.cloneDeep({...i,data:e}),e}init(t,e){e!=null&&e.options||(e=this.getDefaultConfig(t,e));const{data:i,options:r}=e??{},{fields:s}=r??{},a=Brt();a.loadData(i),a.loadChartConfig(e),a.loadBasicProperties(s,t);const o=a.build();this.schema=o.getSchema(),this.data=o.getData()}getInstance(){return this}get isEmpty(){return!this.data.length}push(t){this.data.push(x_(t)),this.schema.actions.push({op:"push",value:x_(t)})}pop(){this.data.pop(),this.schema.actions.push({op:"pop"})}clear(){this.data=[]}size(){return this.data.length}}class BYt{constructor(t,e){return this.getInstance(t,e)}getInstance(t,e){switch(t){case"array":return new Frt(t,e);case"stack":return new jrt(t,e);default:throw new Error(`Unknown type: ${t}`)}}}const FYt=(n,t,e)=>{const{data:i}=t,{category:r,value:s}=(e==null?void 0:e.fields)??{},a=n==null?void 0:n.value,o=n==null?void 0:n.op,l=n==null?void 0:n.place,u={data:i[0].values,modifyValue:a,category:r,place:l,value:s};return i[0].values=_l.cloneDeep(DYt[o](u)),t},Nrt=n=>n.actions,jYt=(n,t,e)=>{const i=Nrt(n);return new zrt(t,e,i,n)};class zrt{constructor(t,e,i,r){Js(this,"spec");Js(this,"vchart");Js(this,"actions");Js(this,"schema");Js(this,"index",0);Js(this,"exe",async()=>{await new Promise(i=>setTimeout(i,1e3));const t=this.actions[this.index],e=FYt(t,this.spec,this.schema);this.vchart.updateSpecSync(e),this.vchart.renderAsync()});Js(this,"exeNext",async()=>{await this.exe(),this.index++});Js(this,"exePre",async()=>{await this.exe(),this.index--});this.spec=t,this.vchart=e,this.actions=i,this.schema=r}}const Hrt=`const defaultFunctionTemplate = function () {
    // Your code here
    const arr = new AlVis("array", {
        data: [
            { month: 'Monday', sales: 22 },
            { month: 'Tuesday', sales: 13 },
            { month: 'Wednesday', sales: 25 },
            { month: 'Thursday', sales: 29 },
            { month: 'Friday', sales: 38 }
        ],
        options: {
            type: "bar",
            layout: {
                direction: "horizontal"
            },
            fields: {
                category: "month",
                value: "sales"
            },
        }
    })
    return arr
}

return defaultFunctionTemplate`;var B5=(n=>(n[n.visactor=0]="visactor",n[n.d3=1]="d3",n))(B5||{});const NYt=(n,t)=>{const e=new ar(n,{dom:t});return e.renderAsync(),e},ZG=n=>{const{chartConfig:t,data:e}=n,{type:i,layout:r,visual:s,chartFields:a}=t??{};return{type:i,...s,...r,...a,data:[{id:`${i}-data`,values:e}]}},zYt=(n,t,e)=>{if(B5.visactor===t){const o=ZG(n),l=NYt(o,e),u=jYt(n,o,l);return[o,l,u]}const i=ZG(n),r=new ar(i,{dom:e});r.renderAsync();const s=Nrt(n),a=new zrt(i,r,s,n);return[i,r,a]};function HYt(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function JG(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function QG(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?JG(Object(e),!0).forEach(function(i){HYt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):JG(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function VYt(n,t){if(n==null)return{};var e={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&(e[r]=n[r]);return e}function WYt(n,t){if(n==null)return{};var e=VYt(n,t),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(e[i]=n[i])}return e}function $Yt(n,t){return GYt(n)||UYt(n,t)||YYt(n,t)||XYt()}function GYt(n){if(Array.isArray(n))return n}function UYt(n,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var e=[],i=!0,r=!1,s=void 0;try{for(var a=n[Symbol.iterator](),o;!(i=(o=a.next()).done)&&(e.push(o.value),!(t&&e.length===t));i=!0);}catch(l){r=!0,s=l}finally{try{!i&&a.return!=null&&a.return()}finally{if(r)throw s}}return e}}function YYt(n,t){if(n){if(typeof n=="string")return tU(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return tU(n,t)}}function tU(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function XYt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KYt(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function eU(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function iU(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?eU(Object(e),!0).forEach(function(i){KYt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):eU(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function qYt(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return function(i){return t.reduceRight(function(r,s){return s(r)},i)}}function e0(n){return function t(){for(var e=this,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return r.length>=n.length?n.apply(this,r):function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return t.apply(e,[].concat(r,o))}}}function rk(n){return{}.toString.call(n).includes("Object")}function ZYt(n){return!Object.keys(n).length}function t1(n){return typeof n=="function"}function JYt(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function QYt(n,t){return rk(t)||hc("changeType"),Object.keys(t).some(function(e){return!JYt(n,e)})&&hc("changeField"),t}function tXt(n){t1(n)||hc("selectorType")}function eXt(n){t1(n)||rk(n)||hc("handlerType"),rk(n)&&Object.values(n).some(function(t){return!t1(t)})&&hc("handlersType")}function iXt(n){n||hc("initialIsRequired"),rk(n)||hc("initialType"),ZYt(n)&&hc("initialContent")}function nXt(n,t){throw new Error(n[t]||n.default)}var rXt={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},hc=e0(nXt)(rXt),Kx={changes:QYt,selector:tXt,handler:eXt,initial:iXt};function sXt(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Kx.initial(n),Kx.handler(t);var e={current:n},i=e0(lXt)(e,t),r=e0(oXt)(e),s=e0(Kx.changes)(n),a=e0(aXt)(e);function o(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(h){return h};return Kx.selector(u),u(e.current)}function l(u){qYt(i,r,s,a)(u)}return[o,l]}function aXt(n,t){return t1(t)?t(n.current):t}function oXt(n,t){return n.current=iU(iU({},n.current),t),t}function lXt(n,t,e){return t1(t)?t(n.current):Object.keys(e).forEach(function(i){var r;return(r=t[i])===null||r===void 0?void 0:r.call(t,n.current[i])}),e}var uXt={create:sXt},hXt={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};function cXt(n){return function t(){for(var e=this,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return r.length>=n.length?n.apply(this,r):function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return t.apply(e,[].concat(r,o))}}}function dXt(n){return{}.toString.call(n).includes("Object")}function pXt(n){return n||nU("configIsRequired"),dXt(n)||nU("configType"),n.urls?(fXt(),{paths:{vs:n.urls.monacoBase}}):n}function fXt(){console.warn(Vrt.deprecation)}function gXt(n,t){throw new Error(n[t]||n.default)}var Vrt={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},nU=cXt(gXt)(Vrt),mXt={config:pXt},vXt=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(r){return e.reduceRight(function(s,a){return a(s)},r)}};function Wrt(n,t){return Object.keys(t).forEach(function(e){t[e]instanceof Object&&n[e]&&Object.assign(t[e],Wrt(n[e],t[e]))}),QG(QG({},n),t)}var _Xt={type:"cancelation",msg:"operation is manually canceled"};function rO(n){var t=!1,e=new Promise(function(i,r){n.then(function(s){return t?r(_Xt):i(s)}),n.catch(r)});return e.cancel=function(){return t=!0},e}var yXt=uXt.create({config:hXt,isInitialized:!1,resolve:null,reject:null,monaco:null}),$rt=$Yt(yXt,2),H1=$rt[0],DT=$rt[1];function bXt(n){var t=mXt.config(n),e=t.monaco,i=WYt(t,["monaco"]);DT(function(r){return{config:Wrt(r.config,i),monaco:e}})}function xXt(){var n=H1(function(t){var e=t.monaco,i=t.isInitialized,r=t.resolve;return{monaco:e,isInitialized:i,resolve:r}});if(!n.isInitialized){if(DT({isInitialized:!0}),n.monaco)return n.resolve(n.monaco),rO(sO);if(window.monaco&&window.monaco.editor)return Grt(window.monaco),n.resolve(window.monaco),rO(sO);vXt(SXt,wXt)(CXt)}return rO(sO)}function SXt(n){return document.body.appendChild(n)}function AXt(n){var t=document.createElement("script");return n&&(t.src=n),t}function wXt(n){var t=H1(function(i){var r=i.config,s=i.reject;return{config:r,reject:s}}),e=AXt("".concat(t.config.paths.vs,"/loader.js"));return e.onload=function(){return n()},e.onerror=t.reject,e}function CXt(){var n=H1(function(e){var i=e.config,r=e.resolve,s=e.reject;return{config:i,resolve:r,reject:s}}),t=window.require;t.config(n.config),t(["vs/editor/editor.main"],function(e){Grt(e),n.resolve(e)},function(e){n.reject(e)})}function Grt(n){H1().monaco||DT({monaco:n})}function kXt(){return H1(function(n){var t=n.monaco;return t})}var sO=new Promise(function(n,t){return DT({resolve:n,reject:t})}),sk={config:bXt,init:xXt,__getMonacoInstance:kXt},TXt={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},aO=TXt,MXt={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},PXt=MXt;function EXt({children:n}){return B.createElement("div",{style:PXt.container},n)}var OXt=EXt,RXt=OXt;function IXt({width:n,height:t,isEditorReady:e,loading:i,_ref:r,className:s,wrapperProps:a}){return B.createElement("section",{style:{...aO.wrapper,width:n,height:t},...a},!e&&B.createElement(RXt,null,i),B.createElement("div",{ref:r,style:{...aO.fullWidth,...!e&&aO.hide},className:s}))}var LXt=IXt,Urt=V.memo(LXt);function DXt(n){V.useEffect(n,[])}var F5=DXt;function BXt(n,t,e=!0){let i=V.useRef(!0);V.useEffect(i.current||!e?()=>{i.current=!1}:n,t)}var da=BXt;function S_(){}function eg(n,t,e,i){return FXt(n,i)||jXt(n,t,e,i)}function FXt(n,t){return n.editor.getModel(Yrt(n,t))}function jXt(n,t,e,i){return n.editor.createModel(t,e,i?Yrt(n,i):void 0)}function Yrt(n,t){return n.Uri.parse(t)}function NXt({original:n,modified:t,language:e,originalLanguage:i,modifiedLanguage:r,originalModelPath:s,modifiedModelPath:a,keepCurrentOriginalModel:o=!1,keepCurrentModifiedModel:l=!1,theme:u="light",loading:h="Loading...",options:c={},height:d="100%",width:p="100%",className:f,wrapperProps:g={},beforeMount:_=S_,onMount:v=S_}){let[y,b]=V.useState(!1),[S,A]=V.useState(!0),w=V.useRef(null),C=V.useRef(null),k=V.useRef(null),M=V.useRef(v),P=V.useRef(_),E=V.useRef(!1);F5(()=>{let O=sk.init();return O.then(L=>(C.current=L)&&A(!1)).catch(L=>(L==null?void 0:L.type)!=="cancelation"&&console.error("Monaco initialization: error:",L)),()=>w.current?N():O.cancel()}),da(()=>{if(w.current&&C.current){let O=w.current.getOriginalEditor(),L=eg(C.current,n||"",i||e||"text",s||"");L!==O.getModel()&&O.setModel(L)}},[s],y),da(()=>{if(w.current&&C.current){let O=w.current.getModifiedEditor(),L=eg(C.current,t||"",r||e||"text",a||"");L!==O.getModel()&&O.setModel(L)}},[a],y),da(()=>{let O=w.current.getModifiedEditor();O.getOption(C.current.editor.EditorOption.readOnly)?O.setValue(t||""):t!==O.getValue()&&(O.executeEdits("",[{range:O.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),O.pushUndoStop())},[t],y),da(()=>{var O,L;(L=(O=w.current)==null?void 0:O.getModel())==null||L.original.setValue(n||"")},[n],y),da(()=>{let{original:O,modified:L}=w.current.getModel();C.current.editor.setModelLanguage(O,i||e||"text"),C.current.editor.setModelLanguage(L,r||e||"text")},[e,i,r],y),da(()=>{var O;(O=C.current)==null||O.editor.setTheme(u)},[u],y),da(()=>{var O;(O=w.current)==null||O.updateOptions(c)},[c],y);let I=V.useCallback(()=>{var H;if(!C.current)return;P.current(C.current);let O=eg(C.current,n||"",i||e||"text",s||""),L=eg(C.current,t||"",r||e||"text",a||"");(H=w.current)==null||H.setModel({original:O,modified:L})},[e,t,r,n,i,s,a]),D=V.useCallback(()=>{var O;!E.current&&k.current&&(w.current=C.current.editor.createDiffEditor(k.current,{automaticLayout:!0,...c}),I(),(O=C.current)==null||O.editor.setTheme(u),b(!0),E.current=!0)},[c,u,I]);V.useEffect(()=>{y&&M.current(w.current,C.current)},[y]),V.useEffect(()=>{!S&&!y&&D()},[S,y,D]);function N(){var L,H,j,G;let O=(L=w.current)==null?void 0:L.getModel();o||((H=O==null?void 0:O.original)==null||H.dispose()),l||((j=O==null?void 0:O.modified)==null||j.dispose()),(G=w.current)==null||G.dispose()}return B.createElement(Urt,{width:p,height:d,isEditorReady:y,loading:h,_ref:k,className:f,wrapperProps:g})}var zXt=NXt;V.memo(zXt);function HXt(){let[n,t]=V.useState(sk.__getMonacoInstance());return F5(()=>{let e;return n||(e=sk.init(),e.then(i=>{t(i)})),()=>e==null?void 0:e.cancel()}),n}var VXt=HXt;function WXt(n){let t=V.useRef();return V.useEffect(()=>{t.current=n},[n]),t.current}var $Xt=WXt,qx=new Map;function GXt({defaultValue:n,defaultLanguage:t,defaultPath:e,value:i,language:r,path:s,theme:a="light",line:o,loading:l="Loading...",options:u={},overrideServices:h={},saveViewState:c=!0,keepCurrentModel:d=!1,width:p="100%",height:f="100%",className:g,wrapperProps:_={},beforeMount:v=S_,onMount:y=S_,onChange:b,onValidate:S=S_}){let[A,w]=V.useState(!1),[C,k]=V.useState(!0),M=V.useRef(null),P=V.useRef(null),E=V.useRef(null),I=V.useRef(y),D=V.useRef(v),N=V.useRef(),O=V.useRef(i),L=$Xt(s),H=V.useRef(!1),j=V.useRef(!1);F5(()=>{let $=sk.init();return $.then(q=>(M.current=q)&&k(!1)).catch(q=>(q==null?void 0:q.type)!=="cancelation"&&console.error("Monaco initialization: error:",q)),()=>P.current?U():$.cancel()}),da(()=>{var q,tt,it,nt;let $=eg(M.current,n||i||"",t||r||"",s||e||"");$!==((q=P.current)==null?void 0:q.getModel())&&(c&&qx.set(L,(tt=P.current)==null?void 0:tt.saveViewState()),(it=P.current)==null||it.setModel($),c&&((nt=P.current)==null||nt.restoreViewState(qx.get(s))))},[s],A),da(()=>{var $;($=P.current)==null||$.updateOptions(u)},[u],A),da(()=>{!P.current||i===void 0||(P.current.getOption(M.current.editor.EditorOption.readOnly)?P.current.setValue(i):i!==P.current.getValue()&&(j.current=!0,P.current.executeEdits("",[{range:P.current.getModel().getFullModelRange(),text:i,forceMoveMarkers:!0}]),P.current.pushUndoStop(),j.current=!1))},[i],A),da(()=>{var q,tt;let $=(q=P.current)==null?void 0:q.getModel();$&&r&&((tt=M.current)==null||tt.editor.setModelLanguage($,r))},[r],A),da(()=>{var $;o!==void 0&&(($=P.current)==null||$.revealLine(o))},[o],A),da(()=>{var $;($=M.current)==null||$.editor.setTheme(a)},[a],A);let G=V.useCallback(()=>{var $;if(!(!E.current||!M.current)&&!H.current){D.current(M.current);let q=s||e,tt=eg(M.current,i||n||"",t||r||"",q||"");P.current=($=M.current)==null?void 0:$.editor.create(E.current,{model:tt,automaticLayout:!0,...u},h),c&&P.current.restoreViewState(qx.get(q)),M.current.editor.setTheme(a),o!==void 0&&P.current.revealLine(o),w(!0),H.current=!0}},[n,t,e,i,r,s,u,h,c,a,o]);V.useEffect(()=>{A&&I.current(P.current,M.current)},[A]),V.useEffect(()=>{!C&&!A&&G()},[C,A,G]),O.current=i,V.useEffect(()=>{var $,q;A&&b&&(($=N.current)==null||$.dispose(),N.current=(q=P.current)==null?void 0:q.onDidChangeModelContent(tt=>{j.current||b(P.current.getValue(),tt)}))},[A,b]),V.useEffect(()=>{if(A){let $=M.current.editor.onDidChangeMarkers(q=>{var it;let tt=(it=P.current.getModel())==null?void 0:it.uri;if(tt&&q.find(nt=>nt.path===tt.path)){let nt=M.current.editor.getModelMarkers({resource:tt});S==null||S(nt)}});return()=>{$==null||$.dispose()}}return()=>{}},[A,S]);function U(){var $,q;($=N.current)==null||$.dispose(),d?c&&qx.set(s,P.current.saveViewState()):(q=P.current.getModel())==null||q.dispose(),P.current.dispose()}return B.createElement(Urt,{width:p,height:f,isEditorReady:A,loading:l,_ref:E,className:g,wrapperProps:_})}var UXt=GXt,YXt=V.memo(UXt);function rU(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function sU(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?rU(Object(e),!0).forEach(function(i){Ti(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):rU(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function XXt(n,t){var e=V.useContext(vi),i=e.prefixCls,r=i===void 0?"arco":i,s=n.spin,a=n.className,o=sU(sU({"aria-hidden":!0,focusable:!1,ref:t},n),{},{className:"".concat(a?a+" ":"").concat(r,"-icon ").concat(r,"-icon-play-arrow")});return s&&(o.className="".concat(o.className," ").concat(r,"-icon-loading")),delete o.spin,delete o.isIcon,B.createElement("svg",ii({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),B.createElement("path",{d:"M12.533 7.965A1 1 0 0 0 11 8.81v30.377a1 1 0 0 0 1.533.846L36.656 24.84a1 1 0 0 0 0-1.692L12.533 7.965Z"}))}var j5=B.forwardRef(XXt);j5.defaultProps={isIcon:!0};j5.displayName="IconPlayArrow";var KXt={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const aU=n=>{let t;const e=new Set,i=(h,c)=>{const d=typeof h=="function"?h(t):h;if(!Object.is(d,t)){const p=t;t=c??(typeof d!="object"||d===null)?d:Object.assign({},t,d),e.forEach(f=>f(t,p))}},r=()=>t,l={setState:i,getState:r,getInitialState:()=>u,subscribe:h=>(e.add(h),()=>e.delete(h)),destroy:()=>{(KXt?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),e.clear()}},u=t=n(i,r,l);return l},qXt=n=>n?aU(n):aU;var Xrt={exports:{}},Krt={},qrt={exports:{}},Zrt={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pm=V;function ZXt(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var JXt=typeof Object.is=="function"?Object.is:ZXt,QXt=pm.useState,tKt=pm.useEffect,eKt=pm.useLayoutEffect,iKt=pm.useDebugValue;function nKt(n,t){var e=t(),i=QXt({inst:{value:e,getSnapshot:t}}),r=i[0].inst,s=i[1];return eKt(function(){r.value=e,r.getSnapshot=t,oO(r)&&s({inst:r})},[n,e,t]),tKt(function(){return oO(r)&&s({inst:r}),n(function(){oO(r)&&s({inst:r})})},[n]),iKt(e),e}function oO(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!JXt(n,e)}catch{return!0}}function rKt(n,t){return t()}var sKt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?rKt:nKt;Zrt.useSyncExternalStore=pm.useSyncExternalStore!==void 0?pm.useSyncExternalStore:sKt;qrt.exports=Zrt;var aKt=qrt.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BT=V,oKt=aKt;function lKt(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var uKt=typeof Object.is=="function"?Object.is:lKt,hKt=oKt.useSyncExternalStore,cKt=BT.useRef,dKt=BT.useEffect,pKt=BT.useMemo,fKt=BT.useDebugValue;Krt.useSyncExternalStoreWithSelector=function(n,t,e,i,r){var s=cKt(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=pKt(function(){function l(p){if(!u){if(u=!0,h=p,p=i(p),r!==void 0&&a.hasValue){var f=a.value;if(r(f,p))return c=f}return c=p}if(f=c,uKt(h,p))return f;var g=i(p);return r!==void 0&&r(f,g)?f:(h=p,c=g)}var u=!1,h,c,d=e===void 0?null:e;return[function(){return l(t())},d===null?void 0:function(){return l(d())}]},[t,e,i,r]);var o=hKt(n,s[0],s[1]);return dKt(function(){a.hasValue=!0,a.value=o},[o]),fKt(o),o};Xrt.exports=Krt;var gKt=Xrt.exports;const mKt=Du(gKt);var Jrt={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:vKt}=B,{useSyncExternalStoreWithSelector:_Kt}=mKt;let oU=!1;const yKt=n=>n;function bKt(n,t=yKt,e){(Jrt?"production":void 0)!=="production"&&e&&!oU&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),oU=!0);const i=_Kt(n.subscribe,n.getState,n.getServerState||n.getInitialState,t,e);return vKt(i),i}const xKt=n=>{(Jrt?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof n=="function"?qXt(n):n,e=(i,r)=>bKt(t,i,r);return Object.assign(e,t),e},N5=n=>xKt,RD=N5()(n=>({page:"0",setPage:t=>n(()=>({page:t}))})),Su=N5()(n=>({themeColor:"#F7BA1E",titleBachgroundColor:"var(--color-fill-2)",contentBackgroundColor:"var(--color-bg-2)",setThemeColor:t=>n(()=>({themeColor:t}))}));N5()(n=>({lng:0,setLng:t=>n(()=>({lng:t}))}));const Qrt=({onChange:n,code:t})=>{const e=V.useRef(null),[i,r]=V.useState(null),s=VXt(),a=Su(u=>u.contentBackgroundColor),o=V.useCallback(u=>{e.current=u,r(u)},[]);V.useEffect(()=>{if(i){const u=s==null?void 0:s.languages.registerCompletionItemProvider("javascript",{provideCompletionItems:function(h,c){const d=h.getWordUntilPosition(c),p={startLineNumber:c.lineNumber,endLineNumber:c.lineNumber,startColumn:d.startColumn,endColumn:d.endColumn},f=[{label:"AlVisArray",kind:s.languages.CompletionItemKind.Class,insertText:"AlVisArray([])",range:p},{label:"AlVisStack",kind:s.languages.CompletionItemKind.Class,insertText:"AlVisStack([])",range:p},{label:"AlVis",kind:s.languages.CompletionItemKind.Class,insertText:'AlVis("", { data: [], options: {}})',range:p}],g=h.getValue(),_=["push","pop","insert","get","set","delete"],v=["push","pop"];return g.includes("AlVisArray")?(_==null||_.map(y=>{f.push({label:y,kind:s.languages.CompletionItemKind.Method,insertText:`${y}()`,range:p})}),f.push({label:"length",kind:s.languages.CompletionItemKind.Property,insertText:"length",range:p})):g.includes("AlVisStack")&&(v==null||v.map(y=>{f.push({label:y,kind:s.languages.CompletionItemKind.Method,insertText:`${y}()`,range:p})})),{suggestions:f}}});return()=>u==null?void 0:u.dispose()}},[i]);const l=V.useCallback(()=>{var h;const u=((h=e==null?void 0:e.current)==null?void 0:h.getValue())||"";n(u)},[t]);return _t.jsxs("div",{id:"container",style:{height:"550px"},children:[_t.jsx("div",{style:{padding:10,marginBottom:8,backgroundColor:a},children:_t.jsx(pc,{content:"Run",color:"#165DFF",children:_t.jsx(wq,{children:_t.jsx(jo,{type:"outline",icon:_t.jsx(j5,{}),shape:"circle",onClick:l})})})}),_t.jsx(YXt,{onMount:o,height:"500px",language:"javascript",theme:"vs-light",value:t})]})},SKt=ju.Row,lU=ju.Col,AKt=()=>{const[n,t]=V.useState(Hrt),e=i=>{t(i)};return _t.jsxs(SKt,{style:{marginBottom:16},children:[_t.jsx(lU,{span:11,children:_t.jsx("div",{style:{height:"560px"},children:_t.jsx(ID,{id:"chart",code:n})})}),_t.jsx(lU,{span:13,style:{paddingLeft:10,height:"560px"},children:_t.jsx(Qrt,{onChange:e,code:n})})]})},wKt=n=>{const{schema:t,id:e}=n;return V.useEffect(()=>{if(!t)return;const[,i,r]=zYt(t,B5.visactor,e);return(async()=>{for(let a=0;a<t.actions.length;a++)await r.exeNext()})(),()=>{i.release()}},[t]),_t.jsx("div",{style:{height:"100%"},children:_t.jsx("div",{style:{height:"100%"},id:e})})},CKt=n=>{let t=new Function("AlVis","AlVisArray","AlVisStack",n)(BYt,Frt,jrt);return t=t(),t.schema},ID=n=>{const{code:t=Hrt,id:e="chart"}=n,[i,r]=V.useState(null);return V.useEffect(()=>{t.length!==0&&r(CKt(t))},[t]),_t.jsx("div",{style:{height:"100%"},children:_t.jsx(wKt,{id:e,schema:i})})},kKt=[`const defaultFunctionTemplate = function () {
      const arr = new AlVisArray([10, 9, 8, 7, 6, 5, 4, 3, 2, 1])
      const n = arr.length
      for (let i = 0; i < n - 1; i++) {
          for (let j = 0; j < n - 1 - i; j++) {
              if (arr[j] > arr[j + 1]) {
                  // 交换元素
                  let temp = arr[j];
                  arr[j] = arr[j + 1];
                  arr[j + 1] = temp;
              }
          }
      }
      return arr
  }
  
  return defaultFunctionTemplate`],TKt=[""],MKt=[`const defaultFunctionTemplate = function () {
    // Your code here
    const array = new AlVisArray([10, 9, 8, 7, 6, 5, 4, 3, 2, 1])
    for (let i = 1; i < array.length; i++) {
        const key = array.get(i);
        let j = i - 1;

        while (j >= 0 && array.get(j) > key) {
            [array[j+1], array[j]] = [array[j], array[j + 1]]
            j = j - 1;
        }
    }
    return array
}

return defaultFunctionTemplate`,`const defaultFunctionTemplate = function () {
    const nums = new AlVisArray([10, 9, 8, 7, 6, 5, 4, 3, 2, 1])
    qSort(nums, 0, nums.length - 1)
    return nums;
}

const qSort = (q, l, r) => {
    if (l >= r) return;

    let i = l - 1, j = r + 1, x = q[l];
    while (i < j) {
        do i++; while (q[i] < x);
        do j--; while (q[j] > x);
        if (i < j) [q[i], q[j]] = [q[j], q[i]]
    }
    qSort(q, l, j);
    qSort(q, j + 1, r);
}


return defaultFunctionTemplate`],lO=[kKt,TKt,MKt],PKt=n=>{var u;const{name:t,type:e,num:i}=n,[r,s]=V.useState(!1),[a,o]=V.useState((u=lO==null?void 0:lO[e])==null?void 0:u[i]),l=h=>{o(h)};return _t.jsxs("div",{children:[_t.jsx(s2,{style:{marginBottom:10,marginRight:10},title:t,extra:_t.jsx("div",{onClick:()=>s(!0),children:"More"}),children:_t.jsx("div",{style:{width:360,height:400},children:_t.jsx(ID,{id:t,code:a})})}),_t.jsx(Nu,{style:{width:1200},title:t,visible:r,onOk:()=>s(!1),onCancel:()=>s(!1),autoFocus:!1,focusLock:!0,children:_t.jsxs("div",{style:{display:"flex"},children:[_t.jsx("div",{style:{width:400},children:_t.jsx(ID,{id:`${t}-chart`,code:a})}),_t.jsx("div",{style:{width:700},children:_t.jsx(Qrt,{onChange:l,code:a})})]})})]})},EKt=()=>{const{t:n}=Mm(),t=n("gallery.algorithmList",{returnObjects:!0});return _t.jsx("div",{children:t==null?void 0:t.map((e,i)=>{var r;return _t.jsxs("div",{id:`${e==null?void 0:e.title}`,children:[_t.jsx("h3",{children:e==null?void 0:e.title}),_t.jsx("div",{style:{marginTop:20,display:"flex"},children:(r=e==null?void 0:e.algorithms)==null?void 0:r.map((s,a)=>_t.jsx(PKt,{name:s,type:i,num:a}))})]})})})},OKt=Kr.Content,RKt=Kr.Sider,IKt=()=>_t.jsx(_t.Fragment,{children:_t.jsx("div",{children:_t.jsx(Kr,{children:_t.jsxs(Kr,{children:[_t.jsx(RKt,{children:_t.jsx(lCt,{})}),_t.jsx(OKt,{style:{margin:10},children:_t.jsx(EKt,{})})]})})})}),LKt=()=>{const n=Su(t=>t.themeColor);return _t.jsxs("div",{children:["一个基于",_t.jsxs("span",{style:{position:"relative"},children:["标准",_t.jsx("svg",{width:"240",height:"20",viewBox:"0 0 240 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",style:{color:n,position:"absolute",top:"55px",left:"1px",width:"100%",height:"auto"},children:_t.jsx("path",{d:"M20.766 10.187c.939-.024.386-.885.552-1.401 1.105-.301.553.626.962 1.061.685-.263 1.171-1.1 1.696-1.085.044.144.15.191.044.378.697-.736 2.21-.134 2.995-1.052a.55.55 0 0 1 .127.215 3.35 3.35 0 0 1-.204-1.204c.42-.034.751-.593.94 0-.255 0-.266.23-.377.416l.426-.273c.448.813-.586.316-.553.927.84-.306 1.802-1.037 2.476-.831.182.803-1.525.339-.608 1.023l-1.033-.268c.85 1.248-.625-.057.171 1.276 1.348.177 1.47-.478 2.818-.3.276-.479-.132-.66.144-1.124 1.857-.885 1.602 1.984 2.94.846.337-.555.42-1.582 1.442-1.08l-.276.889c1.298.038.668-1.348 2.06-.784-.226.368-1.005.344-.8.444.917.689.59-.545 1.27-.569l.16.827c1.371-.181 2.863-.827 4.388-1.037-.072.249-.326.512.044.746 1.912-.478 4.123-.058 6.007.368l.68-.727c.05.015.095.04.132.074a.275.275 0 0 1 .077.118c.014.044.015.091.004.136a.27.27 0 0 1-.07.122c.74.243 0-.445.354-.732.414-.062.552.383.315.603 1.248-.636 3.586-1.401 4.973-.694l-.254.22c1.06.249 1.105-1.477 2.127-.855l-.182.129c2.293.23 4.785-.478 6.564.52.293-1.017 2.272.393 2.365-1.022 1.327.664.967.927 2.813 1.348.492.052.702-.899 1.299-1.061l.044.731.79-.794.47.87.552-.205a.66.66 0 0 1-.332-.2.517.517 0 0 1-.132-.33c.873-.354 2.177.477 2.21.831l2.078-.679c-.039.301-.387.411-.657.607 1.105-.779.226.77 1.232.053-.144-.163.06-.44.077-.588.553.435 1.691.416 2.547.205l-.149.512c1.558.1 3.271-.31 5.018-.335-.636-.224-.514-1.109 0-1.204l.226.774c.32-.478-.552-.282.122-.884.652.076.464.875.094 1.138l.784-.287c.056.23-.127.358-.165.655.309-.478 1.387.75 1.834-.096l.05.23c1.746-.03 2.53-.316 3.95-.383 0-.674.553-.535.984-1.085 1.05.196 2.21.707 3.482.63.878-.343.243-.568.635-.955.077.612 1.332.535.69.985a15.353 15.353 0 0 0 3.83-.68c-.21-.243-.447-.353-.331-.563a.738.738 0 0 1 .275.01c.09.02.173.058.245.11a.58.58 0 0 1 .169.188c.04.072.061.151.062.232l-.088.067c2.127-.956 4.973 1.706 6.669.41l-.099.068 1.763-.684c.817.1-.481.478.127.842 1.9-1.043 3.022.12 4.586-.574 1.243 1.793 4.327-.167 5.979.956l-.1-.42c.426-.421.52.234.835.33-.05-.33-.464-.378-.205-.613 3.598-.545 7.438.598 11.129.956 1.348.11.757-2.203 2.465-1.195l-.481.794c2.719-.956 5.564 0 8.233-.77-.154.182-.16.416-.425.416.552.574 2.083.034 2.094-.435.42.053.1.425.354.665.552.339 1.42-.732 1.718-.158.05.09-.16.186-.265.23.37-.278 1.719.076 1.365-.589 1 .32 1.917-.287 2.713.105.553-.736 1.713.364 1.884-.683-.077 1.08 1.752.875 2.387.377-.215.326.553.345.299.794.718 0 1.381-.206 1.265-.76 1.315 1.305 2.686-1.018 3.415.645a45.888 45.888 0 0 1 6.078-1.17c-.082 1.075-2.138.09-2.066 1.218 1.834-.425 2.906-1.343 4.719-1.066.47.153-.276.478-.437.65 1.835-.43 3.537.148 5.172-.42 0 .1-.182.21-.348.291.321-.033.741.167.713-.325l-.315.13c-.497-.718 1.304-1.468 1.365-1.841-.553 1.396 1.602.377.707 2.137a.73.73 0 0 0 .337-.263.58.58 0 0 0 .1-.383c.315.1.409.297.083.665 1.155-.254.757-.78 1.801-.75 0 .233-.221.324-.337.601.553-.478 1.078-.908 1.951-.697-.056.143.044.33-.216.325 1.509-.048 2.603-1.195 4.249-.722-.513 1.023.553.349.625 1.243l.895-.254-.348-.44c.785.034 1.492-.602 2.155-.296l-.591.354 1.47-.139-.824-.354c.807-.444-.055-1.132.978-.86-.21.086.785.029 1.177.56.398-.278.801-.57 1.376-.335.138.291-.149.984-.055 1.176.398-.736 1.834-.168 2.337-.956-.143.227-.192.49-.138.745l.337-.597c.359.2.409.296.337.669 1.105.134-.309-1.138.967-.626-.105.048-.055.138-.27.23 1.287.277 2.519-.335 3.702 0 .326.903-1.05.195-.669.955 1.724-.129 3.592-.999 5.25-.74l-.31-.106c.277-1.262 1.221.66 2.083.086-.21.086-.298.693-.237.555 1.105.234 2.343-.249 4.083-.603l-.226.32c.657.311 1.763.216 2.481.383.226-.315.641-.253.403-.731 2.166 1.912 4.305-.89 6.228.726-.238 0-.553.268-.387.273l1.702-.244c-.111-.554-.21-.34-.553-.784.124-.163.292-.298.489-.392.198-.094.419-.145.644-.148-.774.34-.028.884.287 1.205-.049-.173.072-.354.05-.526.846 1.008.199-1.11 1.376-.407l-.077.287c.458-.134.889-.478 1.37-.401.177.645-.492.282-.552.803.685 0 1.403-1.162 1.994-.507-.298.167-.718.158-1.016.325.641.77.729.583 1.221.717h-.044l1.138.378-.282-.21c.928-1.635 1.752-.25 2.951-1.3-1.166.994-.21.592-.332 1.309.288.21.724.454.586.65.553-.564.89.478 1.696-.34 0 .235.581.044.431.627.713-.163-.149-.411-.077-.703 1.133-.76 2.514 1.061 4.139.029 1.376-.397 1.658-1.171 2.94-1.515.403.392-.393.836-.393.836.267.161.581.255.906.27a1.97 1.97 0 0 0 .934-.184c-.138.196 0 .373.172.64.519-.038.386-.831 1.05-.477a3.24 3.24 0 0 1-.553.918c.619-.192 1.243-.603 1.884-.79.149.412-.409.603-.646.856.718-.153 1.851-.296 2.105-.927l-.442-.248c.26 0 .105.559-.094.669-.63.478-.862-.258-.884-.478l.459-.134c-.387-1.382-1.818.148-2.719.033l.431-.956-.973.784c-.182-.263-.287-.822.166-.956-.624-.516-.591.33-1.105-.239-.055-.086-.028-.134.033-.172l-.646.273c.132-.201-.072-.703.309-.545-1.105-.617-1.873.674-2.26-.096l.099-.057c-1.596.272-.193.721-1.414 1.534l-.713-1.83-.188.721c-.16-.033-.481-.1-.409-.387-.63.478.089.32-.287.78-.752-.699-2.172.229-2.293-.957-.31.545.729.478-.127.813-.183-1.258-.978.181-1.658-.416.254-.636.917-.273.226-.875-.486 1.076-1.386-.282-2-.096-.066.87-1.332.32-2.354.579.078-.292-1.89-.54-2.818-.885l.033-.148c-.221.87-1.182.674-1.901.832a.906.906 0 0 1 .132-.55c.102-.169.258-.31.449-.406h-.669a.979.979 0 0 1-.34.327 1.167 1.167 0 0 1-.478.151l.194-.65c-.885 0-1.813.712-2.94.244-.083.607.84 1.725-.381 2.103-.034-.335-.056-.899.27-1.028-.105.043-.381.263-.585.12l.502-.545c-.508-.258-.287.478-.701.397 0-.478-.293-.35-.221-.722.11-.038.359.205.525 0a1.931 1.931 0 0 1-.691-.264 1.649 1.649 0 0 1-.503-.487c.028.268-.028.636-.37.684-.89 0-.282-.574-.79-.832-.227.325-.78-.033-.824.674-.259 0-.293-.34-.387-.535-.469.3-2.149.033-1.657.793l.116.053s-.05 0-.078.033c-1.525.66-3.105-.478-4.608-.224V3.34c-.895.244-1.984.106-2.636.593a.711.711 0 0 1-.402-.28.553.553 0 0 1-.084-.442c-.691.158-.774.416-1.746 0 .701-.396-.221-.373.713-.287-.879-.224-1.067-.607-2.039 0 .342-.597-.641-.774-1.067-.602l.608.445c-.436.053-.88.039-1.31-.043l.254-.794c-1.784-1.004-3.315 1.578-4.647-.067-.497.545.973.411.553 1.052-.829-.124-1.658-1.286-1.929-1.29-1.132-.479-1.105 1.137-2.282.812a.818.818 0 0 1 .031.774.938.938 0 0 1-.264.323 1.11 1.11 0 0 1-.397.198c-.829-.124-.994-1.214-.464-1.434.205 0 .299.072.288.168.27-.096.629-.21.303-.526l-.116.282c-.403-.297-1.552-.292-1.271-.75-.635.257-.281.477.183.616-1.061-.435-1.658-.053-2.763-.344.171.162.326.478.155.478-1.608-.378-.724.526-1.824.636-.608-.445.249-1.033-.862-.684-.668-.306-.127-.755.149-.985-1.016.536-1.867-.387-2.442-.478l.553-.22a1.892 1.892 0 0 1-.846.12l.293.573c-.309-.105-.553-.11-.553-.348-.326.368.227.956-.42 1.434-.403-.297-1.265.286-1.392-.478 1.298.272-.127-.76.978-.866a1.102 1.102 0 0 1-.851.024c-.044-.086.044-.157.133-.2-1.233-.689-.592.846-1.879.807.171-.42-.287-.808-.497-.721.519 0 .237.712-.249 1.027-.823-.34-.906.235-1.337.187l.491.162c-.176.426-.585.364-1.165.478-.045-.33.524-.22.326-.368-.652.736-1.437-.793-2.338-.306-.409-.291-.027-.798-.387-.999-1.011.54-1.077-.588-2.133-.148.293.574.349.435-.403.985l1.735-.387-1.105.822c.525 0 1.105-.35 1.42-.249-.553.478-.481.316-.238.794-.701-.86-1.425.478-2.21-.1l.044-1.41c-1.232-.641-2.21.702-3.823.334l.513.248c-.221.56-.994.072-1.519.292.055-.478-.271-.645-.492-.956.028.349-1.177-.043-1.337.899l-.707-.627c-1.305-.267-1.503 1.33-2.763 1.157.381-.507-.183-.846.657-1.21-.414 0-.79-.095-.801.23-.276-.263-1.199.646-1.575.215-.182.206-.243.698-.713.655a.337.337 0 0 1 0-.234c0 .234-.735.31-.331.837-1.271-1.478-3.592.095-4.708-1.172-.936.165-1.883.277-2.835.335.05-.139 0-.234.16-.186-1.143-.44-.707 1.352-2.005.86-.664-.765.69-.411.276-.703-.171-1.553-1.564.21-2.437-.702l.21-.091c-.663-.555-1.608.564-2.713.454a.326.326 0 0 0 0-.234c-.746.784-2.155 1.051-3.205 1.271.326-.607.475-.32.276-.956-.47.091.138.99-.801 1.167-.304-.33-.984-.622-1.078-1.282l.89-.019c-.459-.85-1.149.034-1.613-.114l.055-.368c-1.36.124-1.376 1.06-2.835.999l.155.282c-.796.956-.674-.521-1.465.172l-.248-.956c-.871.453-1.797.82-2.763 1.094.552-.698 1.658-1.06 2.315-1.477-.519 0-1.774.072-2.044.54.21-.09.475-.325.685-.181a2.832 2.832 0 0 1-1.094.83 3.298 3.298 0 0 1-1.42.27c.171-1.832-2.713-.455-3.482-1.865-1.834.693-3.652-.258-5.796-.13.774 1.435-.625.049-.481 1.507-.497.1-.685.076-.729 0l-1.525-.86c-.365-.421.469-.326.42-.65-1.106-.106-.465-.618-1.194-1 .155.521-.37.75-1 .56l.901.659c-1.52.793-1.338-1.214-2.868-.43l.48-.478c-.79.277-2.917 0-3.674 1.204-.144-.167-.332-.564 0-.674-1.89-.148-4.183 1.31-5.664.612l.138-.358c-.348.105-.602.678-1.05.325 0-.148.138-.359 0-.378-.182.124-.923.64-1.392.44l.386-.411c-1.85-.44-2.807 1.023-4.343 1.29 0-1.051-1.475-1.376-2.21-1.53V.685c-2.15-.086-3.625.956-5.598 1.4-1.265-1.118-4.188-.392-6.194-.99.31.182 0 .818-.37.957-.475-.206-1.266.755-1.221-.21h.165c-.375-.957-1.326-.67-2.072-.675l-.083 1.267c-2.006-1.778-5.106.813-6.227-.803-.459.33-1.045.34-1.498.67v-.68a12.396 12.396 0 0 0-3.575 0l.31-.478c-.912 0-1.072 1.98-1.912 2.042l-.288-1c-1.591.053-3.232-.774-4.763.192 0-.148.055-.445.31-.478-.746 0-2.918-.588-2.587.788-.06-.903-1.657-.038-2.48.388l.104-.689c-.685.875-.701 1.11-1.696 1.377-.243-.076-.238-.526.088-.368-.812-.32-.59.655-1.574.33l.342-.435c-.823-.029-.746.2-1.177.707-.503.287-1.564-.114-1.713-.712-.094.368-.52.875-1.011.717a.38.38 0 0 1 .013-.245.442.442 0 0 1 .164-.2c-1.393-.406-2 .851-2.973.235a.553.553 0 0 0-.182-.392 9.431 9.431 0 0 1 1.89.028c0-.616-.912-.688-.255-1.563-.685.478-1.845 1.54-2.713 1.286a.84.84 0 0 1-.1-.215l.061-.072a.668.668 0 0 0-.295 0 .61.61 0 0 0-.257.125 1.992 1.992 0 0 0-.718-.158c-.128-.507-1.023-.234-1.465-.244.072.67-.508.583.06 1.119-.07-.048.078-.086.366-.125a.528.528 0 0 0 .188-.076l-.028.062c.287-.033.663-.062 1.105-.09-.332.358-.68.654-1.183.3-.204.445-.43.894-.552 1.11-.647-.914-1.83-1.377-2.022-1.946-1.321.43-3.145.368-3.918 1.663-.376.177-.459-.344-.614-.535.216-.139.476-.13.586-.316-.74.354-2.249.216-2.381 1.105-.984-.364.491-.837-.818-.636l.166-.277c-2.675-1.291-4.09 2.433-7.068.755.204.105.304.148.354.296-3.316-.645-6.709 1.038-10.018-.062-.94-.205-1 .359-1.531.818l-.249-.713-.906.88c-1.315.679-2.47-1.65-4.117-.411l.254.478c-.624-.058-1.939.387-1.873-.177-.055.09-.166.516-.425.272l-.044-.372-1.487.712c-1.199-.215.078-1.506-1.658-1.492C.895 5.105-.22 6.114.04 6.362c.178.01.347.073.478.179a.645.645 0 0 1 .24.4l-.558.225C.17 8.279-.194 9.44 1.304 10.144l.917-.732.36.521-.818.1c.513.479.784 0 1.105-.305.07.225.233.42.458.55l.907-1.114c.149.43-.376.884.292 1.094.426-.516-.502-.956.233-1.314.513.478.403.898.933.44a.447.447 0 0 1 .012.336.525.525 0 0 1-.233.27c.476-.367 1.304-.214 1.525-.817.553.598 1.658-.248 1.691.808.29-.433.74-.77 1.277-.956-.752 1.3 1.724 0 1.591 1.348.553-1.162 2.21-.617 3.255-1.3-.055.095-.16.282-.265.23.624.061.823.391 1.237.592 0-.956.967-1.195 1.448-1.797.812.87-.392 1.118-.1 1.974-.082-.755 1.272-.813.973-1.434.614.53.514.248.862 1.008.028-1.17.553-.22.962-.956.873.54.282 1.086 1.182.689.453.354-.342.808-.342.808Zm21.793-2.93-.447.057.447-.058Zm1.818-.091a7.552 7.552 0 0 0-.801 0c-.072-.23 0-.478.171-.478-.083.186.348.305.63.478Zm-4.128-4.49c.288-.109.393 0 .442.159-.172.02-.343.053-.508.1v.081a.973.973 0 0 1 .066-.34Z"})})]}),"的算法可视化库。"]})},DKt=()=>{const n=Su(t=>t.themeColor);return _t.jsxs("div",{children:["An algorithm visualization library based on",_t.jsxs("span",{style:{position:"relative"},children:["schema",_t.jsx("svg",{width:"240",height:"20",viewBox:"0 0 240 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",style:{color:n,position:"absolute",top:"55px",left:"1px",width:"100%",height:"auto"},children:_t.jsx("path",{d:"M20.766 10.187c.939-.024.386-.885.552-1.401 1.105-.301.553.626.962 1.061.685-.263 1.171-1.1 1.696-1.085.044.144.15.191.044.378.697-.736 2.21-.134 2.995-1.052a.55.55 0 0 1 .127.215 3.35 3.35 0 0 1-.204-1.204c.42-.034.751-.593.94 0-.255 0-.266.23-.377.416l.426-.273c.448.813-.586.316-.553.927.84-.306 1.802-1.037 2.476-.831.182.803-1.525.339-.608 1.023l-1.033-.268c.85 1.248-.625-.057.171 1.276 1.348.177 1.47-.478 2.818-.3.276-.479-.132-.66.144-1.124 1.857-.885 1.602 1.984 2.94.846.337-.555.42-1.582 1.442-1.08l-.276.889c1.298.038.668-1.348 2.06-.784-.226.368-1.005.344-.8.444.917.689.59-.545 1.27-.569l.16.827c1.371-.181 2.863-.827 4.388-1.037-.072.249-.326.512.044.746 1.912-.478 4.123-.058 6.007.368l.68-.727c.05.015.095.04.132.074a.275.275 0 0 1 .077.118c.014.044.015.091.004.136a.27.27 0 0 1-.07.122c.74.243 0-.445.354-.732.414-.062.552.383.315.603 1.248-.636 3.586-1.401 4.973-.694l-.254.22c1.06.249 1.105-1.477 2.127-.855l-.182.129c2.293.23 4.785-.478 6.564.52.293-1.017 2.272.393 2.365-1.022 1.327.664.967.927 2.813 1.348.492.052.702-.899 1.299-1.061l.044.731.79-.794.47.87.552-.205a.66.66 0 0 1-.332-.2.517.517 0 0 1-.132-.33c.873-.354 2.177.477 2.21.831l2.078-.679c-.039.301-.387.411-.657.607 1.105-.779.226.77 1.232.053-.144-.163.06-.44.077-.588.553.435 1.691.416 2.547.205l-.149.512c1.558.1 3.271-.31 5.018-.335-.636-.224-.514-1.109 0-1.204l.226.774c.32-.478-.552-.282.122-.884.652.076.464.875.094 1.138l.784-.287c.056.23-.127.358-.165.655.309-.478 1.387.75 1.834-.096l.05.23c1.746-.03 2.53-.316 3.95-.383 0-.674.553-.535.984-1.085 1.05.196 2.21.707 3.482.63.878-.343.243-.568.635-.955.077.612 1.332.535.69.985a15.353 15.353 0 0 0 3.83-.68c-.21-.243-.447-.353-.331-.563a.738.738 0 0 1 .275.01c.09.02.173.058.245.11a.58.58 0 0 1 .169.188c.04.072.061.151.062.232l-.088.067c2.127-.956 4.973 1.706 6.669.41l-.099.068 1.763-.684c.817.1-.481.478.127.842 1.9-1.043 3.022.12 4.586-.574 1.243 1.793 4.327-.167 5.979.956l-.1-.42c.426-.421.52.234.835.33-.05-.33-.464-.378-.205-.613 3.598-.545 7.438.598 11.129.956 1.348.11.757-2.203 2.465-1.195l-.481.794c2.719-.956 5.564 0 8.233-.77-.154.182-.16.416-.425.416.552.574 2.083.034 2.094-.435.42.053.1.425.354.665.552.339 1.42-.732 1.718-.158.05.09-.16.186-.265.23.37-.278 1.719.076 1.365-.589 1 .32 1.917-.287 2.713.105.553-.736 1.713.364 1.884-.683-.077 1.08 1.752.875 2.387.377-.215.326.553.345.299.794.718 0 1.381-.206 1.265-.76 1.315 1.305 2.686-1.018 3.415.645a45.888 45.888 0 0 1 6.078-1.17c-.082 1.075-2.138.09-2.066 1.218 1.834-.425 2.906-1.343 4.719-1.066.47.153-.276.478-.437.65 1.835-.43 3.537.148 5.172-.42 0 .1-.182.21-.348.291.321-.033.741.167.713-.325l-.315.13c-.497-.718 1.304-1.468 1.365-1.841-.553 1.396 1.602.377.707 2.137a.73.73 0 0 0 .337-.263.58.58 0 0 0 .1-.383c.315.1.409.297.083.665 1.155-.254.757-.78 1.801-.75 0 .233-.221.324-.337.601.553-.478 1.078-.908 1.951-.697-.056.143.044.33-.216.325 1.509-.048 2.603-1.195 4.249-.722-.513 1.023.553.349.625 1.243l.895-.254-.348-.44c.785.034 1.492-.602 2.155-.296l-.591.354 1.47-.139-.824-.354c.807-.444-.055-1.132.978-.86-.21.086.785.029 1.177.56.398-.278.801-.57 1.376-.335.138.291-.149.984-.055 1.176.398-.736 1.834-.168 2.337-.956-.143.227-.192.49-.138.745l.337-.597c.359.2.409.296.337.669 1.105.134-.309-1.138.967-.626-.105.048-.055.138-.27.23 1.287.277 2.519-.335 3.702 0 .326.903-1.05.195-.669.955 1.724-.129 3.592-.999 5.25-.74l-.31-.106c.277-1.262 1.221.66 2.083.086-.21.086-.298.693-.237.555 1.105.234 2.343-.249 4.083-.603l-.226.32c.657.311 1.763.216 2.481.383.226-.315.641-.253.403-.731 2.166 1.912 4.305-.89 6.228.726-.238 0-.553.268-.387.273l1.702-.244c-.111-.554-.21-.34-.553-.784.124-.163.292-.298.489-.392.198-.094.419-.145.644-.148-.774.34-.028.884.287 1.205-.049-.173.072-.354.05-.526.846 1.008.199-1.11 1.376-.407l-.077.287c.458-.134.889-.478 1.37-.401.177.645-.492.282-.552.803.685 0 1.403-1.162 1.994-.507-.298.167-.718.158-1.016.325.641.77.729.583 1.221.717h-.044l1.138.378-.282-.21c.928-1.635 1.752-.25 2.951-1.3-1.166.994-.21.592-.332 1.309.288.21.724.454.586.65.553-.564.89.478 1.696-.34 0 .235.581.044.431.627.713-.163-.149-.411-.077-.703 1.133-.76 2.514 1.061 4.139.029 1.376-.397 1.658-1.171 2.94-1.515.403.392-.393.836-.393.836.267.161.581.255.906.27a1.97 1.97 0 0 0 .934-.184c-.138.196 0 .373.172.64.519-.038.386-.831 1.05-.477a3.24 3.24 0 0 1-.553.918c.619-.192 1.243-.603 1.884-.79.149.412-.409.603-.646.856.718-.153 1.851-.296 2.105-.927l-.442-.248c.26 0 .105.559-.094.669-.63.478-.862-.258-.884-.478l.459-.134c-.387-1.382-1.818.148-2.719.033l.431-.956-.973.784c-.182-.263-.287-.822.166-.956-.624-.516-.591.33-1.105-.239-.055-.086-.028-.134.033-.172l-.646.273c.132-.201-.072-.703.309-.545-1.105-.617-1.873.674-2.26-.096l.099-.057c-1.596.272-.193.721-1.414 1.534l-.713-1.83-.188.721c-.16-.033-.481-.1-.409-.387-.63.478.089.32-.287.78-.752-.699-2.172.229-2.293-.957-.31.545.729.478-.127.813-.183-1.258-.978.181-1.658-.416.254-.636.917-.273.226-.875-.486 1.076-1.386-.282-2-.096-.066.87-1.332.32-2.354.579.078-.292-1.89-.54-2.818-.885l.033-.148c-.221.87-1.182.674-1.901.832a.906.906 0 0 1 .132-.55c.102-.169.258-.31.449-.406h-.669a.979.979 0 0 1-.34.327 1.167 1.167 0 0 1-.478.151l.194-.65c-.885 0-1.813.712-2.94.244-.083.607.84 1.725-.381 2.103-.034-.335-.056-.899.27-1.028-.105.043-.381.263-.585.12l.502-.545c-.508-.258-.287.478-.701.397 0-.478-.293-.35-.221-.722.11-.038.359.205.525 0a1.931 1.931 0 0 1-.691-.264 1.649 1.649 0 0 1-.503-.487c.028.268-.028.636-.37.684-.89 0-.282-.574-.79-.832-.227.325-.78-.033-.824.674-.259 0-.293-.34-.387-.535-.469.3-2.149.033-1.657.793l.116.053s-.05 0-.078.033c-1.525.66-3.105-.478-4.608-.224V3.34c-.895.244-1.984.106-2.636.593a.711.711 0 0 1-.402-.28.553.553 0 0 1-.084-.442c-.691.158-.774.416-1.746 0 .701-.396-.221-.373.713-.287-.879-.224-1.067-.607-2.039 0 .342-.597-.641-.774-1.067-.602l.608.445c-.436.053-.88.039-1.31-.043l.254-.794c-1.784-1.004-3.315 1.578-4.647-.067-.497.545.973.411.553 1.052-.829-.124-1.658-1.286-1.929-1.29-1.132-.479-1.105 1.137-2.282.812a.818.818 0 0 1 .031.774.938.938 0 0 1-.264.323 1.11 1.11 0 0 1-.397.198c-.829-.124-.994-1.214-.464-1.434.205 0 .299.072.288.168.27-.096.629-.21.303-.526l-.116.282c-.403-.297-1.552-.292-1.271-.75-.635.257-.281.477.183.616-1.061-.435-1.658-.053-2.763-.344.171.162.326.478.155.478-1.608-.378-.724.526-1.824.636-.608-.445.249-1.033-.862-.684-.668-.306-.127-.755.149-.985-1.016.536-1.867-.387-2.442-.478l.553-.22a1.892 1.892 0 0 1-.846.12l.293.573c-.309-.105-.553-.11-.553-.348-.326.368.227.956-.42 1.434-.403-.297-1.265.286-1.392-.478 1.298.272-.127-.76.978-.866a1.102 1.102 0 0 1-.851.024c-.044-.086.044-.157.133-.2-1.233-.689-.592.846-1.879.807.171-.42-.287-.808-.497-.721.519 0 .237.712-.249 1.027-.823-.34-.906.235-1.337.187l.491.162c-.176.426-.585.364-1.165.478-.045-.33.524-.22.326-.368-.652.736-1.437-.793-2.338-.306-.409-.291-.027-.798-.387-.999-1.011.54-1.077-.588-2.133-.148.293.574.349.435-.403.985l1.735-.387-1.105.822c.525 0 1.105-.35 1.42-.249-.553.478-.481.316-.238.794-.701-.86-1.425.478-2.21-.1l.044-1.41c-1.232-.641-2.21.702-3.823.334l.513.248c-.221.56-.994.072-1.519.292.055-.478-.271-.645-.492-.956.028.349-1.177-.043-1.337.899l-.707-.627c-1.305-.267-1.503 1.33-2.763 1.157.381-.507-.183-.846.657-1.21-.414 0-.79-.095-.801.23-.276-.263-1.199.646-1.575.215-.182.206-.243.698-.713.655a.337.337 0 0 1 0-.234c0 .234-.735.31-.331.837-1.271-1.478-3.592.095-4.708-1.172-.936.165-1.883.277-2.835.335.05-.139 0-.234.16-.186-1.143-.44-.707 1.352-2.005.86-.664-.765.69-.411.276-.703-.171-1.553-1.564.21-2.437-.702l.21-.091c-.663-.555-1.608.564-2.713.454a.326.326 0 0 0 0-.234c-.746.784-2.155 1.051-3.205 1.271.326-.607.475-.32.276-.956-.47.091.138.99-.801 1.167-.304-.33-.984-.622-1.078-1.282l.89-.019c-.459-.85-1.149.034-1.613-.114l.055-.368c-1.36.124-1.376 1.06-2.835.999l.155.282c-.796.956-.674-.521-1.465.172l-.248-.956c-.871.453-1.797.82-2.763 1.094.552-.698 1.658-1.06 2.315-1.477-.519 0-1.774.072-2.044.54.21-.09.475-.325.685-.181a2.832 2.832 0 0 1-1.094.83 3.298 3.298 0 0 1-1.42.27c.171-1.832-2.713-.455-3.482-1.865-1.834.693-3.652-.258-5.796-.13.774 1.435-.625.049-.481 1.507-.497.1-.685.076-.729 0l-1.525-.86c-.365-.421.469-.326.42-.65-1.106-.106-.465-.618-1.194-1 .155.521-.37.75-1 .56l.901.659c-1.52.793-1.338-1.214-2.868-.43l.48-.478c-.79.277-2.917 0-3.674 1.204-.144-.167-.332-.564 0-.674-1.89-.148-4.183 1.31-5.664.612l.138-.358c-.348.105-.602.678-1.05.325 0-.148.138-.359 0-.378-.182.124-.923.64-1.392.44l.386-.411c-1.85-.44-2.807 1.023-4.343 1.29 0-1.051-1.475-1.376-2.21-1.53V.685c-2.15-.086-3.625.956-5.598 1.4-1.265-1.118-4.188-.392-6.194-.99.31.182 0 .818-.37.957-.475-.206-1.266.755-1.221-.21h.165c-.375-.957-1.326-.67-2.072-.675l-.083 1.267c-2.006-1.778-5.106.813-6.227-.803-.459.33-1.045.34-1.498.67v-.68a12.396 12.396 0 0 0-3.575 0l.31-.478c-.912 0-1.072 1.98-1.912 2.042l-.288-1c-1.591.053-3.232-.774-4.763.192 0-.148.055-.445.31-.478-.746 0-2.918-.588-2.587.788-.06-.903-1.657-.038-2.48.388l.104-.689c-.685.875-.701 1.11-1.696 1.377-.243-.076-.238-.526.088-.368-.812-.32-.59.655-1.574.33l.342-.435c-.823-.029-.746.2-1.177.707-.503.287-1.564-.114-1.713-.712-.094.368-.52.875-1.011.717a.38.38 0 0 1 .013-.245.442.442 0 0 1 .164-.2c-1.393-.406-2 .851-2.973.235a.553.553 0 0 0-.182-.392 9.431 9.431 0 0 1 1.89.028c0-.616-.912-.688-.255-1.563-.685.478-1.845 1.54-2.713 1.286a.84.84 0 0 1-.1-.215l.061-.072a.668.668 0 0 0-.295 0 .61.61 0 0 0-.257.125 1.992 1.992 0 0 0-.718-.158c-.128-.507-1.023-.234-1.465-.244.072.67-.508.583.06 1.119-.07-.048.078-.086.366-.125a.528.528 0 0 0 .188-.076l-.028.062c.287-.033.663-.062 1.105-.09-.332.358-.68.654-1.183.3-.204.445-.43.894-.552 1.11-.647-.914-1.83-1.377-2.022-1.946-1.321.43-3.145.368-3.918 1.663-.376.177-.459-.344-.614-.535.216-.139.476-.13.586-.316-.74.354-2.249.216-2.381 1.105-.984-.364.491-.837-.818-.636l.166-.277c-2.675-1.291-4.09 2.433-7.068.755.204.105.304.148.354.296-3.316-.645-6.709 1.038-10.018-.062-.94-.205-1 .359-1.531.818l-.249-.713-.906.88c-1.315.679-2.47-1.65-4.117-.411l.254.478c-.624-.058-1.939.387-1.873-.177-.055.09-.166.516-.425.272l-.044-.372-1.487.712c-1.199-.215.078-1.506-1.658-1.492C.895 5.105-.22 6.114.04 6.362c.178.01.347.073.478.179a.645.645 0 0 1 .24.4l-.558.225C.17 8.279-.194 9.44 1.304 10.144l.917-.732.36.521-.818.1c.513.479.784 0 1.105-.305.07.225.233.42.458.55l.907-1.114c.149.43-.376.884.292 1.094.426-.516-.502-.956.233-1.314.513.478.403.898.933.44a.447.447 0 0 1 .012.336.525.525 0 0 1-.233.27c.476-.367 1.304-.214 1.525-.817.553.598 1.658-.248 1.691.808.29-.433.74-.77 1.277-.956-.752 1.3 1.724 0 1.591 1.348.553-1.162 2.21-.617 3.255-1.3-.055.095-.16.282-.265.23.624.061.823.391 1.237.592 0-.956.967-1.195 1.448-1.797.812.87-.392 1.118-.1 1.974-.082-.755 1.272-.813.973-1.434.614.53.514.248.862 1.008.028-1.17.553-.22.962-.956.873.54.282 1.086 1.182.689.453.354-.342.808-.342.808Zm21.793-2.93-.447.057.447-.058Zm1.818-.091a7.552 7.552 0 0 0-.801 0c-.072-.23 0-.478.171-.478-.083.186.348.305.63.478Zm-4.128-4.49c.288-.109.393 0 .442.159-.172.02-.343.053-.508.1v.081a.973.973 0 0 1 .066-.34Z"})})]}),"."]})},{Header:BKt}=Kr,FKt=ju.Row,Zx=ju.Col,jKt=()=>{const n=NX(),{t,i18n:e}=Mm(),i=t("menuButton",{returnObjects:!0}),r=Su(o=>o.themeColor),s=Su(o=>o.titleBachgroundColor),a=RD(o=>o.setPage);return _t.jsx("div",{style:{backgroundColor:s},children:_t.jsx(Kr,{children:_t.jsx(BKt,{style:{padding:20},children:_t.jsxs(FKt,{style:{display:"flex",alignItems:"center"},children:[_t.jsx(Zx,{span:4}),_t.jsxs(Zx,{span:7,children:[_t.jsxs(Mc,{children:[_t.jsx(km,{style:{fontSize:50,wordBreak:"break-all",fontWeight:"bolder"},children:e.language==="zh"?_t.jsx(LKt,{}):_t.jsx(DKt,{})}),_t.jsx(Tm,{type:"secondary",style:{fontSize:22},children:t("subTitle")})]}),_t.jsx("div",{style:{paddingBottom:10,display:"flex",justifyContent:"space-between"},children:i==null?void 0:i.map(o=>_t.jsx(jo,{shape:"round",type:"outline",size:"large",onClick:()=>{a(o==null?void 0:o.index),n(o==null?void 0:o.value)},value:o.value,children:o.key},o.value))})]}),_t.jsx(Zx,{span:1}),_t.jsx(Zx,{span:8,style:{height:"100%"},children:_t.jsxs("div",{style:{fontSize:55,color:r},children:[_t.jsx("div",{children:"[̲̅A̲̲̅̅l̲̲̅̅g̲̲̅̅o̲̲̅̅r̲̲̅̅i̲̲̅̅t̲̲̅̅h̲̲̅̅m̲̅"}),_t.jsx("div",{style:{paddingLeft:150},children:"V̲̲̅̅i̲̲̅̅s̲̲̅̅u̲̲̅̅a̲̲̅̅l̲̲̅̅i̲̲̅̅z̲̲̅̅a̲̲̅̅t̲̲̅̅i̲̲̅̅o̲̲̅̅n̲̅]"})]})})]})})})})},NKt=()=>{const{t:n}=Mm();return _t.jsxs(_t.Fragment,{children:[_t.jsxs(Mc,{children:[_t.jsx(km,{children:n("api.title")}),_t.jsx(Tm,{children:n("api.content")})]}),_t.jsx("div",{children:"map一下"})]})},zKt=()=>_t.jsxs(_t.Fragment,{children:[_t.jsxs(Mc,{children:[_t.jsx(km,{children:"Algorithm-gallery"}),_t.jsx(Tm,{children:"The following is a classification of algorithms by algorithm type as much as possible."})]}),_t.jsx("div",{children:"map一下"})]}),HKt=ju.Row,uO=ju.Col,{Content:VKt}=Kr,WKt=()=>{const{t:n}=Mm();return _t.jsx(_t.Fragment,{children:_t.jsx(Kr,{children:_t.jsx(VKt,{style:{backgroundColor:"white",margin:"15px 0"},children:_t.jsxs(HKt,{children:[_t.jsx(uO,{span:4,children:_t.jsx("div",{})}),_t.jsxs(uO,{span:16,children:[_t.jsxs(Mc,{children:[_t.jsx(km,{children:n("designGoal.title")}),_t.jsx(Tm,{children:n("designGoal.content")})]}),_t.jsx(gA,{}),_t.jsx(NKt,{}),_t.jsx(gA,{}),_t.jsx(zKt,{})]}),_t.jsx(uO,{span:4,children:_t.jsx("div",{})})]})})})})},{Content:$Kt}=Kr,GKt=()=>_t.jsx(_t.Fragment,{children:_t.jsxs(Kr,{children:[_t.jsx(jKt,{}),_t.jsxs($Kt,{children:[_t.jsx(gA,{}),_t.jsx(AKt,{}),_t.jsx(WKt,{})]})]})}),ak=25,UKt=()=>_t.jsxs("svg",{width:ak,height:ak,viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[_t.jsx("rect",{width:"30",height:"30",fill:"none"}),_t.jsx("path",{d:"M12.879 2.29266L9.64225 7.14358M11.3924 23.1595H3.32806C2.49964 23.1595 1.82807 22.4879 1.82806 21.6595L1.82801 3.30494C1.828 2.47651 2.49958 1.80493 3.32801 1.80493H12.0377C12.7923 1.80493 13.4294 2.36553 13.5255 3.11401L14.0426 7.14358",stroke:"black",strokeWidth:"1.5"}),_t.jsx("path",{d:"M28.172 26.7224L28.172 8.27767C28.172 7.44924 27.5004 6.77767 26.672 6.77767H10.6341C9.72673 6.77767 9.02711 7.57703 9.14733 8.47641L11.6128 26.9211C11.7124 27.6661 12.348 28.2223 13.0996 28.2224L26.672 28.2224C27.5004 28.2224 28.172 27.5509 28.172 26.7224Z",stroke:"black",strokeWidth:"1.5"}),_t.jsx("path",{d:"M5.9884 15.9309L7.63223 7.72638C7.65095 7.63293 7.73302 7.56567 7.82833 7.56567H9.22074M7.05086 12.5488H9.51387",stroke:"black",strokeWidth:"1.5",strokeLinecap:"round"}),_t.jsx("path",{d:"M20.1215 18.3892L20.6824 17.8913L20.6824 17.8913L20.1215 18.3892ZM22.4039 21.5265C22.7494 21.755 23.2147 21.6601 23.4432 21.3146C23.6716 20.9691 23.5768 20.5038 23.2313 20.2753L22.4039 21.5265ZM17.8656 14.6006C17.1555 14.8421 17.1556 14.8423 17.1556 14.8424C17.1556 14.8425 17.1557 14.8427 17.1558 14.8428C17.1558 14.8431 17.1559 14.8434 17.156 14.8437C17.1563 14.8443 17.1565 14.8451 17.1568 14.846C17.1575 14.8478 17.1582 14.85 17.1592 14.8528C17.1611 14.8583 17.1637 14.8657 17.167 14.8751C17.1736 14.8937 17.1831 14.9197 17.1953 14.9526C17.2198 15.0185 17.2558 15.112 17.3036 15.2286C17.3991 15.4617 17.5423 15.7882 17.7366 16.1718C18.1235 16.9356 18.7214 17.942 19.5607 18.8872L20.6824 17.8913C19.9539 17.0709 19.4237 16.1829 19.0747 15.4939C18.9009 15.151 18.7741 14.8614 18.6916 14.6599C18.6504 14.5593 18.6203 14.481 18.6011 14.4293C18.5914 14.4035 18.5845 14.3843 18.5803 14.3724C18.5782 14.3665 18.5768 14.3623 18.576 14.3601C18.5756 14.359 18.5754 14.3583 18.5753 14.3581C18.5753 14.358 18.5753 14.3581 18.5753 14.3582C18.5754 14.3583 18.5754 14.3584 18.5754 14.3586C18.5755 14.3586 18.5755 14.3587 18.5755 14.3588C18.5756 14.3589 18.5756 14.3591 17.8656 14.6006ZM19.5607 18.8872C20.3692 19.7976 21.0683 20.4497 21.5711 20.8781C21.8226 21.0923 22.0249 21.2505 22.1673 21.3571C22.2385 21.4104 22.2947 21.4508 22.3346 21.4789C22.3545 21.4929 22.3704 21.5038 22.382 21.5117C22.3878 21.5157 22.3926 21.5189 22.3962 21.5214C22.398 21.5226 22.3996 21.5236 22.4009 21.5245C22.4015 21.5249 22.4021 21.5253 22.4026 21.5256C22.4028 21.5258 22.4031 21.5259 22.4033 21.5261C22.4034 21.5262 22.4036 21.5263 22.4036 21.5263C22.4038 21.5264 22.4039 21.5265 22.8176 20.9009C23.2313 20.2753 23.2314 20.2754 23.2315 20.2755C23.2316 20.2755 23.2317 20.2756 23.2318 20.2756C23.2319 20.2757 23.232 20.2758 23.2322 20.2759C23.2324 20.276 23.2326 20.2762 23.2326 20.2762C23.2328 20.2763 23.2327 20.2763 23.2324 20.276C23.2317 20.2756 23.2299 20.2744 23.227 20.2724C23.2214 20.2685 23.2114 20.2617 23.1975 20.2519C23.1695 20.2323 23.1254 20.2006 23.0663 20.1564C22.9482 20.0679 22.7705 19.9293 22.5438 19.7362C22.0906 19.3502 21.4418 18.7464 20.6824 17.8913L19.5607 18.8872Z",fill:"black"}),_t.jsx("path",{d:"M20.519 18.389L21.0798 18.887L21.0798 18.887L20.519 18.389ZM18.2366 21.5262C17.8911 21.7547 17.4258 21.6598 17.1974 21.3143C16.9689 20.9688 17.0638 20.5035 17.4093 20.275L18.2366 21.5262ZM22.8176 14.6006C23.523 14.8554 23.5229 14.8556 23.5228 14.8557C23.5228 14.8558 23.5228 14.8559 23.5227 14.8561C23.5226 14.8563 23.5225 14.8566 23.5224 14.8569C23.5222 14.8575 23.5219 14.8583 23.5216 14.8591C23.521 14.8609 23.5202 14.8631 23.5192 14.8658C23.5172 14.8712 23.5144 14.8786 23.511 14.8878C23.504 14.9062 23.4942 14.9321 23.4813 14.9648C23.4557 15.0302 23.4181 15.1233 23.3684 15.2394C23.269 15.4715 23.1206 15.797 22.9213 16.1794C22.5243 16.9409 21.9168 17.9443 21.0798 18.887L19.9582 17.891C20.6889 17.068 21.2308 16.1772 21.5912 15.486C21.7705 15.142 21.9028 14.8514 21.9894 14.649C22.0327 14.548 22.0645 14.4692 22.0849 14.4171C22.0951 14.3911 22.1025 14.3718 22.107 14.3597C22.1093 14.3536 22.1108 14.3494 22.1117 14.3471C22.1121 14.3459 22.1124 14.3452 22.1125 14.345C22.1125 14.3449 22.1125 14.3449 22.1125 14.345C22.1124 14.3451 22.1124 14.3452 22.1124 14.3453C22.1123 14.3453 22.1123 14.3455 22.1123 14.3455C22.1122 14.3456 22.1122 14.3458 22.8176 14.6006ZM21.0798 18.887C20.2714 19.7973 19.5722 20.4495 19.0694 20.8778C18.818 21.092 18.6156 21.2502 18.4732 21.3568C18.402 21.4101 18.3458 21.4505 18.3059 21.4786C18.286 21.4926 18.2701 21.5035 18.2585 21.5115C18.2527 21.5154 18.248 21.5186 18.2443 21.5211C18.2425 21.5223 18.2409 21.5233 18.2397 21.5242C18.239 21.5246 18.2384 21.525 18.2379 21.5253C18.2377 21.5255 18.2375 21.5257 18.2372 21.5258C18.2371 21.5259 18.237 21.526 18.2369 21.526C18.2368 21.5261 18.2366 21.5262 17.8229 20.9006C17.4093 20.275 17.4091 20.2751 17.409 20.2752C17.409 20.2752 17.4088 20.2753 17.4088 20.2754C17.4086 20.2754 17.4085 20.2755 17.4084 20.2756C17.4081 20.2758 17.408 20.2759 17.4079 20.2759C17.4077 20.2761 17.4078 20.276 17.4081 20.2758C17.4089 20.2753 17.4106 20.2741 17.4135 20.2721C17.4192 20.2683 17.4291 20.2614 17.4431 20.2516C17.471 20.232 17.5152 20.2003 17.5742 20.1561C17.6924 20.0676 17.8701 19.929 18.0967 19.7359C18.5499 19.3499 19.1988 18.7462 19.9582 17.891L21.0798 18.887Z",fill:"black"}),_t.jsx("path",{d:"M17 14.3027L23.6831 14.3027",stroke:"black",strokeWidth:"1.5",strokeLinecap:"round"}),_t.jsx("path",{d:"M20.3486 12.6001L20.3486 14.0332",stroke:"black",strokeWidth:"1.5",strokeLinecap:"round"})]}),YKt=()=>_t.jsx("svg",{fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48","aria-hidden":"true",focusable:"false",style:{width:ak,height:ak,color:"black"},children:_t.jsx("path",{fill:"currentColor",stroke:"none",d:"M.056 24.618c0 10.454 6.7 19.344 16.038 22.608 1.259.32 1.067-.582 1.067-1.19v-4.148c-7.265.853-7.553-3.957-8.043-4.758-.987-1.686-3.312-2.112-2.62-2.912 1.654-.853 3.34.213 5.291 3.1 1.413 2.09 4.166 1.738 5.562 1.385a6.777 6.777 0 0 1 1.856-3.253C11.687 34.112 8.55 29.519 8.55 24.057c0-2.646.874-5.082 2.586-7.045-1.088-3.243.102-6.01.26-6.422 3.11-.282 6.337 2.225 6.587 2.421 1.766-.474 3.782-.73 6.038-.73 2.266 0 4.293.26 6.069.74.603-.458 3.6-2.608 6.49-2.345.155.41 1.317 3.12.294 6.315 1.734 1.968 2.62 4.422 2.62 7.077 0 5.472-3.158 10.07-10.699 11.397a6.82 6.82 0 0 1 2.037 4.875v6.02c.042.48 0 .96.806.96 9.477-3.194 16.299-12.15 16.299-22.697C47.938 11.396 37.218.68 23.996.68 10.77.675.055 11.391.055 24.617l.001.001Z"})}),hO=[{key:"中文简体",value:"zh"},{key:"English",value:"en"}],XKt=zs.Item,KKt=()=>{const{t:n,i18n:t}=Mm(),e=n("menuList",{returnObjects:!0}),i=Su(h=>h.themeColor),r=Su(h=>h.titleBachgroundColor),s=Su(h=>h.contentBackgroundColor),a=RD(h=>h.page),o=RD(h=>h.setPage),l=NX(),u=_t.jsx(zs,{children:hO==null?void 0:hO.map(h=>_t.jsx(zs.Item,{onClick:()=>{t.changeLanguage(t.language=h==null?void 0:h.value)},children:h==null?void 0:h.key},h==null?void 0:h.value))});return _t.jsx("div",{style:{background:r},children:_t.jsx(Sq,{style:{background:s},title:_t.jsx("div",{style:{color:i},children:"[̲̅A̲̲̅̅l̲̲̅̅V̲̲̅̅i̲̲̅̅s̲̅"}),subTitle:_t.jsx(zs,{style:{width:"300px"},mode:"horizontal",selectedKeys:[a],color:i,children:e==null?void 0:e.map((h,c)=>_t.jsx(XKt,{onClick:()=>{o(h==null?void 0:h.index),l(h==null?void 0:h.key)},children:h==null?void 0:h.value},`${c}`))}),extra:_t.jsxs(_t.Fragment,{children:[_t.jsx(Cm,{droplist:u,position:"bl",children:_t.jsx("span",{children:_t.jsx(UKt,{})})}),_t.jsx("span",{style:{marginLeft:10},children:_t.jsx(l3,{href:"https://github.com/Calculus9/algorithm-visualization",children:_t.jsx(YKt,{})})})]})})})};function cO(n){const{children:t}=n,e=Su(i=>i.titleBachgroundColor);return _t.jsxs("div",{children:[_t.jsx(KKt,{}),_t.jsx("div",{style:{padding:"0 120px",backgroundColor:e,marginBottom:10},children:t}),_t.jsx("div",{style:{textAlign:"center"},children:`Copyright ©${new Date().getFullYear()} Calculus9.jingyu`})]})}const qKt={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,t){console&&console[n]&&console[n].apply(console,t)}};class ok{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,e)}init(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=t||qKt,this.options=e,this.debug=e.debug}log(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.forward(e,"log","",!0)}warn(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.forward(e,"warn","",!0)}error(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.forward(e,"error","")}deprecate(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(t,e,i,r){return r&&!this.debug?null:(typeof t[0]=="string"&&(t[0]=`${i}${this.prefix} ${t[0]}`),this.logger[e](t))}create(t){return new ok(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new ok(this.logger,t)}}var yl=new ok;class FT{constructor(){this.observers={}}on(t,e){return t.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const r=this.observers[i].get(e)||0;this.observers[i].set(e,r+1)}),this}off(t,e){if(this.observers[t]){if(!e){delete this.observers[t];return}this.observers[t].delete(e)}}emit(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(a=>{let[o,l]=a;for(let u=0;u<l;u++)o(...i)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[o,l]=a;for(let u=0;u<l;u++)o.apply(o,[t,...i])})}}function Dv(){let n,t;const e=new Promise((i,r)=>{n=i,t=r});return e.resolve=n,e.reject=t,e}function uU(n){return n==null?"":""+n}function ZKt(n,t,e){n.forEach(i=>{t[i]&&(e[i]=t[i])})}const JKt=/###/g;function A_(n,t,e){function i(o){return o&&o.indexOf("###")>-1?o.replace(JKt,"."):o}function r(){return!n||typeof n=="string"}const s=typeof t!="string"?t:t.split(".");let a=0;for(;a<s.length-1;){if(r())return{};const o=i(s[a]);!n[o]&&e&&(n[o]=new e),Object.prototype.hasOwnProperty.call(n,o)?n=n[o]:n={},++a}return r()?{}:{obj:n,k:i(s[a])}}function hU(n,t,e){const{obj:i,k:r}=A_(n,t,Object);if(i!==void 0||t.length===1){i[r]=e;return}let s=t[t.length-1],a=t.slice(0,t.length-1),o=A_(n,a,Object);for(;o.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),o=A_(n,a,Object),o&&o.obj&&typeof o.obj[`${o.k}.${s}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${s}`]=e}function QKt(n,t,e,i){const{obj:r,k:s}=A_(n,t,Object);r[s]=r[s]||[],r[s].push(e)}function lk(n,t){const{obj:e,k:i}=A_(n,t);if(e)return e[i]}function tqt(n,t,e){const i=lk(n,e);return i!==void 0?i:lk(t,e)}function tst(n,t,e){for(const i in t)i!=="__proto__"&&i!=="constructor"&&(i in n?typeof n[i]=="string"||n[i]instanceof String||typeof t[i]=="string"||t[i]instanceof String?e&&(n[i]=t[i]):tst(n[i],t[i],e):n[i]=t[i]);return n}function rf(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var eqt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function iqt(n){return typeof n=="string"?n.replace(/[&<>"'\/]/g,t=>eqt[t]):n}class nqt{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const e=this.regExpMap.get(t);if(e!==void 0)return e;const i=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,i),this.regExpQueue.push(t),i}}const rqt=[" ",",","?","!",";"],sqt=new nqt(20);function aqt(n,t,e){t=t||"",e=e||"";const i=rqt.filter(a=>t.indexOf(a)<0&&e.indexOf(a)<0);if(i.length===0)return!0;const r=sqt.getRegExp(`(${i.map(a=>a==="?"?"\\?":a).join("|")})`);let s=!r.test(n);if(!s){const a=n.indexOf(e);a>0&&!r.test(n.substring(0,a))&&(s=!0)}return s}function LD(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!n)return;if(n[t])return n[t];const i=t.split(e);let r=n;for(let s=0;s<i.length;){if(!r||typeof r!="object")return;let a,o="";for(let l=s;l<i.length;++l)if(l!==s&&(o+=e),o+=i[l],a=r[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&l<i.length-1)continue;s+=l-s+1;break}r=a}return r}function uk(n){return n&&n.indexOf("_")>0?n.replace("_","-"):n}class cU extends FT{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=e,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}getResource(t,e,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,a=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;t.indexOf(".")>-1?o=t.split("."):(o=[t,e],i&&(Array.isArray(i)?o.push(...i):typeof i=="string"&&s?o.push(...i.split(s)):o.push(i)));const l=lk(this.data,o);return!l&&!e&&!i&&t.indexOf(".")>-1&&(t=o[0],e=o[1],i=o.slice(2).join(".")),l||!a||typeof i!="string"?l:LD(this.data&&this.data[t]&&this.data[t][e],i,s)}addResource(t,e,i,r){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let o=[t,e];i&&(o=o.concat(a?i.split(a):i)),t.indexOf(".")>-1&&(o=t.split("."),r=e,e=o[1]),this.addNamespaces(e),hU(this.data,o,r),s.silent||this.emit("added",t,e,i,r)}addResources(t,e,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in i)(typeof i[s]=="string"||Array.isArray(i[s]))&&this.addResource(t,e,s,i[s],{silent:!0});r.silent||this.emit("added",t,e,i)}addResourceBundle(t,e,i,r,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[t,e];t.indexOf(".")>-1&&(o=t.split("."),r=i,i=e,e=o[1]),this.addNamespaces(e);let l=lk(this.data,o)||{};a.skipCopy||(i=JSON.parse(JSON.stringify(i))),r?tst(l,i,s):l={...l,...i},hU(this.data,o,l),a.silent||this.emit("added",t,e,i)}removeResourceBundle(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}hasResourceBundle(t,e){return this.getResource(t,e)!==void 0}getResourceBundle(t,e){return e||(e=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(t,e)}:this.getResource(t,e)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const e=this.getDataByLanguage(t);return!!(e&&Object.keys(e)||[]).find(r=>e[r]&&Object.keys(e[r]).length>0)}toJSON(){return this.data}}var est={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,t,e,i,r){return n.forEach(s=>{this.processors[s]&&(t=this.processors[s].process(t,e,i,r))}),t}};const dU={};class hk extends FT{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),ZKt(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=e,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=yl.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;const i=this.resolve(t,e);return i&&i.res!==void 0}extractFromKey(t,e){let i=e.nsSeparator!==void 0?e.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const r=e.keySeparator!==void 0?e.keySeparator:this.options.keySeparator;let s=e.ns||this.options.defaultNS||[];const a=i&&t.indexOf(i)>-1,o=!this.options.userDefinedKeySeparator&&!e.keySeparator&&!this.options.userDefinedNsSeparator&&!e.nsSeparator&&!aqt(t,i,r);if(a&&!o){const l=t.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:t,namespaces:s};const u=t.split(i);(i!==r||i===r&&this.options.ns.indexOf(u[0])>-1)&&(s=u.shift()),t=u.join(r)}return typeof s=="string"&&(s=[s]),{key:t,namespaces:s}}translate(t,e,i){if(typeof e!="object"&&this.options.overloadTranslationOptionHandler&&(e=this.options.overloadTranslationOptionHandler(arguments)),typeof e=="object"&&(e={...e}),e||(e={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const r=e.returnDetails!==void 0?e.returnDetails:this.options.returnDetails,s=e.keySeparator!==void 0?e.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(t[t.length-1],e),l=o[o.length-1],u=e.lng||this.language,h=e.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(h){const S=e.nsSeparator||this.options.nsSeparator;return r?{res:`${l}${S}${a}`,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(e)}:`${l}${S}${a}`}return r?{res:a,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(e)}:a}const c=this.resolve(t,e);let d=c&&c.res;const p=c&&c.usedKey||a,f=c&&c.exactUsedKey||a,g=Object.prototype.toString.apply(d),_=["[object Number]","[object Function]","[object RegExp]"],v=e.joinArrays!==void 0?e.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject;if(y&&d&&(typeof d!="string"&&typeof d!="boolean"&&typeof d!="number")&&_.indexOf(g)<0&&!(typeof v=="string"&&Array.isArray(d))){if(!e.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const S=this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,d,{...e,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return r?(c.res=S,c.usedParams=this.getUsedParamsDetails(e),c):S}if(s){const S=Array.isArray(d),A=S?[]:{},w=S?f:p;for(const C in d)if(Object.prototype.hasOwnProperty.call(d,C)){const k=`${w}${s}${C}`;A[C]=this.translate(k,{...e,joinArrays:!1,ns:o}),A[C]===k&&(A[C]=d[C])}d=A}}else if(y&&typeof v=="string"&&Array.isArray(d))d=d.join(v),d&&(d=this.extendTranslation(d,t,e,i));else{let S=!1,A=!1;const w=e.count!==void 0&&typeof e.count!="string",C=hk.hasDefaultValue(e),k=w?this.pluralResolver.getSuffix(u,e.count,e):"",M=e.ordinal&&w?this.pluralResolver.getSuffix(u,e.count,{ordinal:!1}):"",P=w&&!e.ordinal&&e.count===0&&this.pluralResolver.shouldUseIntlApi(),E=P&&e[`defaultValue${this.options.pluralSeparator}zero`]||e[`defaultValue${k}`]||e[`defaultValue${M}`]||e.defaultValue;!this.isValidLookup(d)&&C&&(S=!0,d=E),this.isValidLookup(d)||(A=!0,d=a);const D=(e.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&A?void 0:d,N=C&&E!==d&&this.options.updateMissing;if(A||S||N){if(this.logger.log(N?"updateKey":"missingKey",u,l,a,N?E:d),s){const j=this.resolve(a,{...e,keySeparator:!1});j&&j.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let O=[];const L=this.languageUtils.getFallbackCodes(this.options.fallbackLng,e.lng||this.language);if(this.options.saveMissingTo==="fallback"&&L&&L[0])for(let j=0;j<L.length;j++)O.push(L[j]);else this.options.saveMissingTo==="all"?O=this.languageUtils.toResolveHierarchy(e.lng||this.language):O.push(e.lng||this.language);const H=(j,G,U)=>{const $=C&&U!==d?U:D;this.options.missingKeyHandler?this.options.missingKeyHandler(j,l,G,$,N,e):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(j,l,G,$,N,e),this.emit("missingKey",j,l,G,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&w?O.forEach(j=>{const G=this.pluralResolver.getSuffixes(j,e);P&&e[`defaultValue${this.options.pluralSeparator}zero`]&&G.indexOf(`${this.options.pluralSeparator}zero`)<0&&G.push(`${this.options.pluralSeparator}zero`),G.forEach(U=>{H([j],a+U,e[`defaultValue${U}`]||E)})}):H(O,a,E))}d=this.extendTranslation(d,t,e,c,i),A&&d===a&&this.options.appendNamespaceToMissingKey&&(d=`${l}:${a}`),(A||S)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?d=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${a}`:a,S?d:void 0):d=this.options.parseMissingKeyHandler(d))}return r?(c.res=d,c.usedParams=this.getUsedParamsDetails(e),c):d}extendTranslation(t,e,i,r,s){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const u=typeof t=="string"&&(i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(u){const d=t.match(this.interpolator.nestingRegexp);h=d&&d.length}let c=i.replace&&typeof i.replace!="string"?i.replace:i;if(this.options.interpolation.defaultVariables&&(c={...this.options.interpolation.defaultVariables,...c}),t=this.interpolator.interpolate(t,c,i.lng||this.language||r.usedLng,i),u){const d=t.match(this.interpolator.nestingRegexp),p=d&&d.length;h<p&&(i.nest=!1)}!i.lng&&this.options.compatibilityAPI!=="v1"&&r&&r.res&&(i.lng=this.language||r.usedLng),i.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var d=arguments.length,p=new Array(d),f=0;f<d;f++)p[f]=arguments[f];return s&&s[0]===p[0]&&!i.context?(a.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${e[0]}`),null):a.translate(...p,e)},i)),i.interpolation&&this.interpolator.reset()}const o=i.postProcess||this.options.postProcess,l=typeof o=="string"?[o]:o;return t!=null&&l&&l.length&&i.applyPostProcessor!==!1&&(t=est.handle(l,t,e,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),t}resolve(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i,r,s,a,o;return typeof t=="string"&&(t=[t]),t.forEach(l=>{if(this.isValidLookup(i))return;const u=this.extractFromKey(l,e),h=u.key;r=h;let c=u.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const d=e.count!==void 0&&typeof e.count!="string",p=d&&!e.ordinal&&e.count===0&&this.pluralResolver.shouldUseIntlApi(),f=e.context!==void 0&&(typeof e.context=="string"||typeof e.context=="number")&&e.context!=="",g=e.lngs?e.lngs:this.languageUtils.toResolveHierarchy(e.lng||this.language,e.fallbackLng);c.forEach(_=>{this.isValidLookup(i)||(o=_,!dU[`${g[0]}-${_}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(o)&&(dU[`${g[0]}-${_}`]=!0,this.logger.warn(`key "${r}" for languages "${g.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach(v=>{if(this.isValidLookup(i))return;a=v;const y=[h];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(y,h,v,_,e);else{let S;d&&(S=this.pluralResolver.getSuffix(v,e.count,e));const A=`${this.options.pluralSeparator}zero`,w=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(y.push(h+S),e.ordinal&&S.indexOf(w)===0&&y.push(h+S.replace(w,this.options.pluralSeparator)),p&&y.push(h+A)),f){const C=`${h}${this.options.contextSeparator}${e.context}`;y.push(C),d&&(y.push(C+S),e.ordinal&&S.indexOf(w)===0&&y.push(C+S.replace(w,this.options.pluralSeparator)),p&&y.push(C+A))}}let b;for(;b=y.pop();)this.isValidLookup(i)||(s=b,i=this.getResource(v,_,b,e))}))})}),{res:i,usedKey:r,exactUsedKey:s,usedLng:a,usedNS:o}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,e,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,e,i,r):this.resourceStore.getResource(t,e,i,r)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=t.replace&&typeof t.replace!="string";let r=i?t.replace:t;if(i&&typeof t.count<"u"&&(r.count=t.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!i){r={...r};for(const s of e)delete r[s]}return r}static hasDefaultValue(t){const e="defaultValue";for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&e===i.substring(0,e.length)&&t[i]!==void 0)return!0;return!1}}function dO(n){return n.charAt(0).toUpperCase()+n.slice(1)}class pU{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=yl.create("languageUtils")}getScriptPartFromCode(t){if(t=uk(t),!t||t.indexOf("-")<0)return null;const e=t.split("-");return e.length===2||(e.pop(),e[e.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(e.join("-"))}getLanguagePartFromCode(t){if(t=uk(t),!t||t.indexOf("-")<0)return t;const e=t.split("-");return this.formatLanguageCode(e[0])}formatLanguageCode(t){if(typeof t=="string"&&t.indexOf("-")>-1){const e=["hans","hant","latn","cyrl","cans","mong","arab"];let i=t.split("-");return this.options.lowerCaseLng?i=i.map(r=>r.toLowerCase()):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),e.indexOf(i[1].toLowerCase())>-1&&(i[1]=dO(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),e.indexOf(i[1].toLowerCase())>-1&&(i[1]=dO(i[1].toLowerCase())),e.indexOf(i[2].toLowerCase())>-1&&(i[2]=dO(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let e;return t.forEach(i=>{if(e)return;const r=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(r))&&(e=r)}),!e&&this.options.supportedLngs&&t.forEach(i=>{if(e)return;const r=this.getLanguagePartFromCode(i);if(this.isSupportedCode(r))return e=r;e=this.options.supportedLngs.find(s=>{if(s===r)return s;if(!(s.indexOf("-")<0&&r.indexOf("-")<0)&&(s.indexOf("-")>0&&r.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===r||s.indexOf(r)===0&&r.length>1))return s})}),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e}getFallbackCodes(t,e){if(!t)return[];if(typeof t=="function"&&(t=t(e)),typeof t=="string"&&(t=[t]),Array.isArray(t))return t;if(!e)return t.default||[];let i=t[e];return i||(i=t[this.getScriptPartFromCode(e)]),i||(i=t[this.formatLanguageCode(e)]),i||(i=t[this.getLanguagePartFromCode(e)]),i||(i=t.default),i||[]}toResolveHierarchy(t,e){const i=this.getFallbackCodes(e||this.options.fallbackLng||[],t),r=[],s=a=>{a&&(this.isSupportedCode(a)?r.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return typeof t=="string"&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(t))):typeof t=="string"&&s(this.formatLanguageCode(t)),i.forEach(a=>{r.indexOf(a)<0&&s(this.formatLanguageCode(a))}),r}}let oqt=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],lqt={1:function(n){return+(n>1)},2:function(n){return+(n!=1)},3:function(n){return 0},4:function(n){return n%10==1&&n%100!=11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2},5:function(n){return n==0?0:n==1?1:n==2?2:n%100>=3&&n%100<=10?3:n%100>=11?4:5},6:function(n){return n==1?0:n>=2&&n<=4?1:2},7:function(n){return n==1?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2},8:function(n){return n==1?0:n==2?1:n!=8&&n!=11?2:3},9:function(n){return+(n>=2)},10:function(n){return n==1?0:n==2?1:n<7?2:n<11?3:4},11:function(n){return n==1||n==11?0:n==2||n==12?1:n>2&&n<20?2:3},12:function(n){return+(n%10!=1||n%100==11)},13:function(n){return+(n!==0)},14:function(n){return n==1?0:n==2?1:n==3?2:3},15:function(n){return n%10==1&&n%100!=11?0:n%10>=2&&(n%100<10||n%100>=20)?1:2},16:function(n){return n%10==1&&n%100!=11?0:n!==0?1:2},17:function(n){return n==1||n%10==1&&n%100!=11?0:1},18:function(n){return n==0?0:n==1?1:2},19:function(n){return n==1?0:n==0||n%100>1&&n%100<11?1:n%100>10&&n%100<20?2:3},20:function(n){return n==1?0:n==0||n%100>0&&n%100<20?1:2},21:function(n){return n%100==1?1:n%100==2?2:n%100==3||n%100==4?3:0},22:function(n){return n==1?0:n==2?1:(n<0||n>10)&&n%10==0?2:3}};const uqt=["v1","v2","v3"],hqt=["v4"],fU={zero:0,one:1,two:2,few:3,many:4,other:5};function cqt(){const n={};return oqt.forEach(t=>{t.lngs.forEach(e=>{n[e]={numbers:t.nr,plurals:lqt[t.fc]}})}),n}class dqt{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=e,this.logger=yl.create("pluralResolver"),(!this.options.compatibilityJSON||hqt.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=cqt()}addRule(t,e){this.rules[t]=e}getRule(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(uk(t==="dev"?"en":t),{type:e.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=this.getRule(t,e);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}getPluralFormsOfKey(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,i).map(r=>`${e}${r}`)}getSuffixes(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=this.getRule(t,e);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort((r,s)=>fU[r]-fU[s]).map(r=>`${this.options.prepend}${e.ordinal?`ordinal${this.options.prepend}`:""}${r}`):i.numbers.map(r=>this.getSuffix(t,r,e)):[]}getSuffix(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=this.getRule(t,i);return r?this.shouldUseIntlApi()?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${r.select(e)}`:this.getSuffixRetroCompatible(r,e):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,e){const i=t.noAbs?t.plurals(e):t.plurals(Math.abs(e));let r=t.numbers[i];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(r===2?r="plural":r===1&&(r=""));const s=()=>this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString();return this.options.compatibilityJSON==="v1"?r===1?"":typeof r=="number"?`_plural_${r.toString()}`:s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?s():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}shouldUseIntlApi(){return!uqt.includes(this.options.compatibilityJSON)}}function gU(n,t,e){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=tqt(n,t,e);return!s&&r&&typeof e=="string"&&(s=LD(n,e,i),s===void 0&&(s=LD(t,e,i))),s}class pqt{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=yl.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(e=>e),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:e,escapeValue:i,useRawValueToEscape:r,prefix:s,prefixEscaped:a,suffix:o,suffixEscaped:l,formatSeparator:u,unescapeSuffix:h,unescapePrefix:c,nestingPrefix:d,nestingPrefixEscaped:p,nestingSuffix:f,nestingSuffixEscaped:g,nestingOptionsSeparator:_,maxReplaces:v,alwaysFormat:y}=t.interpolation;this.escape=e!==void 0?e:iqt,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=s?rf(s):a||"{{",this.suffix=o?rf(o):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=h?"":c||"-",this.unescapeSuffix=this.unescapePrefix?"":h||"",this.nestingPrefix=d?rf(d):p||rf("$t("),this.nestingSuffix=f?rf(f):g||rf(")"),this.nestingOptionsSeparator=_||",",this.maxReplaces=v||1e3,this.alwaysFormat=y!==void 0?y:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(e,i)=>e&&e.source===i?(e.lastIndex=0,e):new RegExp(i,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,e,i,r){let s,a,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(f){return f.replace(/\$/g,"$$$$")}const h=f=>{if(f.indexOf(this.formatSeparator)<0){const y=gU(e,l,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(y,void 0,i,{...r,...e,interpolationkey:f}):y}const g=f.split(this.formatSeparator),_=g.shift().trim(),v=g.join(this.formatSeparator).trim();return this.format(gU(e,l,_,this.options.keySeparator,this.options.ignoreJSONStructure),v,i,{...r,...e,interpolationkey:_})};this.resetRegExp();const c=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,d=r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f=>u(f)},{regex:this.regexp,safeValue:f=>this.escapeValue?u(this.escape(f)):u(f)}].forEach(f=>{for(o=0;s=f.regex.exec(t);){const g=s[1].trim();if(a=h(g),a===void 0)if(typeof c=="function"){const v=c(t,s,r);a=typeof v=="string"?v:""}else if(r&&Object.prototype.hasOwnProperty.call(r,g))a="";else if(d){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${g} for interpolating ${t}`),a="";else typeof a!="string"&&!this.useRawValueToEscape&&(a=uU(a));const _=f.safeValue(a);if(t=t.replace(s[0],_),d?(f.regex.lastIndex+=a.length,f.regex.lastIndex-=s[0].length):f.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),t}nest(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r,s,a;function o(l,u){const h=this.nestingOptionsSeparator;if(l.indexOf(h)<0)return l;const c=l.split(new RegExp(`${h}[ ]*{`));let d=`{${c[1]}`;l=c[0],d=this.interpolate(d,a);const p=d.match(/'/g),f=d.match(/"/g);(p&&p.length%2===0&&!f||f.length%2!==0)&&(d=d.replace(/'/g,'"'));try{a=JSON.parse(d),u&&(a={...u,...a})}catch(g){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,g),`${l}${h}${d}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,l}for(;r=this.nestingRegexp.exec(t);){let l=[];a={...i},a=a.replace&&typeof a.replace!="string"?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let u=!1;if(r[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(r[1])){const h=r[1].split(this.formatSeparator).map(c=>c.trim());r[1]=h.shift(),l=h,u=!0}if(s=e(o.call(this,r[1].trim(),a),a),s&&r[0]===t&&typeof s!="string")return s;typeof s!="string"&&(s=uU(s)),s||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${t}`),s=""),u&&(s=l.reduce((h,c)=>this.format(h,c,i.lng,{...i,interpolationkey:r[1].trim()}),s.trim())),t=t.replace(r[0],s),this.regexp.lastIndex=0}return t}}function fqt(n){let t=n.toLowerCase().trim();const e={};if(n.indexOf("(")>-1){const i=n.split("(");t=i[0].toLowerCase().trim();const r=i[1].substring(0,i[1].length-1);t==="currency"&&r.indexOf(":")<0?e.currency||(e.currency=r.trim()):t==="relativetime"&&r.indexOf(":")<0?e.range||(e.range=r.trim()):r.split(";").forEach(a=>{if(a){const[o,...l]=a.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),h=o.trim();e[h]||(e[h]=u),u==="false"&&(e[h]=!1),u==="true"&&(e[h]=!0),isNaN(u)||(e[h]=parseInt(u,10))}})}return{formatName:t,formatOptions:e}}function sf(n){const t={};return function(i,r,s){const a=r+JSON.stringify(s);let o=t[a];return o||(o=n(uk(r),s),t[a]=o),o(i)}}class gqt{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=yl.create("formatter"),this.options=t,this.formats={number:sf((e,i)=>{const r=new Intl.NumberFormat(e,{...i});return s=>r.format(s)}),currency:sf((e,i)=>{const r=new Intl.NumberFormat(e,{...i,style:"currency"});return s=>r.format(s)}),datetime:sf((e,i)=>{const r=new Intl.DateTimeFormat(e,{...i});return s=>r.format(s)}),relativetime:sf((e,i)=>{const r=new Intl.RelativeTimeFormat(e,{...i});return s=>r.format(s,i.range||"day")}),list:sf((e,i)=>{const r=new Intl.ListFormat(e,{...i});return s=>r.format(s)})},this.init(t)}init(t){const i=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=i.formatSeparator?i.formatSeparator:i.formatSeparator||","}add(t,e){this.formats[t.toLowerCase().trim()]=e}addCached(t,e){this.formats[t.toLowerCase().trim()]=sf(e)}format(t,e,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return e.split(this.formatSeparator).reduce((o,l)=>{const{formatName:u,formatOptions:h}=fqt(l);if(this.formats[u]){let c=o;try{const d=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},p=d.locale||d.lng||r.locale||r.lng||i;c=this.formats[u](o,p,{...h,...r,...d})}catch(d){this.logger.warn(d)}return c}else this.logger.warn(`there was no format function for ${u}`);return o},t)}}function mqt(n,t){n.pending[t]!==void 0&&(delete n.pending[t],n.pendingCount--)}class vqt extends FT{constructor(t,e,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=e,this.services=i,this.languageUtils=i.languageUtils,this.options=r,this.logger=yl.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(i,r.backend,r)}queueLoad(t,e,i,r){const s={},a={},o={},l={};return t.forEach(u=>{let h=!0;e.forEach(c=>{const d=`${u}|${c}`;!i.reload&&this.store.hasResourceBundle(u,c)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?a[d]===void 0&&(a[d]=!0):(this.state[d]=1,h=!1,a[d]===void 0&&(a[d]=!0),s[d]===void 0&&(s[d]=!0),l[c]===void 0&&(l[c]=!0)))}),h||(o[u]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(l)}}loaded(t,e,i){const r=t.split("|"),s=r[0],a=r[1];e&&this.emit("failedLoading",s,a,e),i&&this.store.addResourceBundle(s,a,i,void 0,void 0,{skipCopy:!0}),this.state[t]=e?-1:2;const o={};this.queue.forEach(l=>{QKt(l.loaded,[s],a),mqt(l,t),e&&l.errors.push(e),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{o[u]||(o[u]={});const h=l.loaded[u];h.length&&h.forEach(c=>{o[u][c]===void 0&&(o[u][c]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(l=>!l.done)}read(t,e,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!t.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:e,fcName:i,tried:r,wait:s,callback:a});return}this.readingCalls++;const o=(u,h)=>{if(this.readingCalls--,this.waitingReads.length>0){const c=this.waitingReads.shift();this.read(c.lng,c.ns,c.fcName,c.tried,c.wait,c.callback)}if(u&&h&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,t,e,i,r+1,s*2,a)},s);return}a(u,h)},l=this.backend[i].bind(this.backend);if(l.length===2){try{const u=l(t,e);u&&typeof u.then=="function"?u.then(h=>o(null,h)).catch(o):o(null,u)}catch(u){o(u)}return}return l(t,e,o)}prepareLoading(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();typeof t=="string"&&(t=this.languageUtils.toResolveHierarchy(t)),typeof e=="string"&&(e=[e]);const s=this.queueLoad(t,e,i,r);if(!s.toLoad.length)return s.pending.length||r(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(t,e,i){this.prepareLoading(t,e,{},i)}reload(t,e,i){this.prepareLoading(t,e,{reload:!0},i)}loadOne(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=t.split("|"),r=i[0],s=i[1];this.read(r,s,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${e}loading namespace ${s} for language ${r} failed`,a),!a&&o&&this.logger.log(`${e}loaded namespace ${s} for language ${r}`,o),this.loaded(t,a,o)})}saveMissing(t,e,i,r,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e)){this.logger.warn(`did not save key "${i}" as the namespace "${e}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend&&this.backend.create){const l={...a,isUpdate:s},u=this.backend.create.bind(this.backend);if(u.length<6)try{let h;u.length===5?h=u(t,e,i,r,l):h=u(t,e,i,r),h&&typeof h.then=="function"?h.then(c=>o(null,c)).catch(o):o(null,h)}catch(h){o(h)}else u(t,e,i,r,o,l)}!t||!t[0]||this.store.addResource(t[0],e,i,r)}}}function mU(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){let e={};if(typeof t[1]=="object"&&(e=t[1]),typeof t[1]=="string"&&(e.defaultValue=t[1]),typeof t[2]=="string"&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const i=t[3]||t[2];Object.keys(i).forEach(r=>{e[r]=i[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function vU(n){return typeof n.ns=="string"&&(n.ns=[n.ns]),typeof n.fallbackLng=="string"&&(n.fallbackLng=[n.fallbackLng]),typeof n.fallbackNS=="string"&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs&&n.supportedLngs.indexOf("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),n}function Jx(){}function _qt(n){Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(e=>{typeof n[e]=="function"&&(n[e]=n[e].bind(n))})}class e1 extends FT{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;if(super(),this.options=vU(t),this.services={},this.logger=yl,this.modules={external:[]},_qt(this),e&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,e),this;setTimeout(()=>{this.init(t,e)},0)}}init(){var t=this;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof e=="function"&&(i=e,e={}),!e.defaultNS&&e.defaultNS!==!1&&e.ns&&(typeof e.ns=="string"?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=mU();this.options={...r,...this.options,...vU(e)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...r.interpolation,...this.options.interpolation}),e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);function s(h){return h?typeof h=="function"?new h:h:null}if(!this.options.isClone){this.modules.logger?yl.init(s(this.modules.logger),this.options):yl.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:typeof Intl<"u"&&(h=gqt);const c=new pU(this.options);this.store=new cU(this.options.resources,this.options);const d=this.services;d.logger=yl,d.resourceStore=this.store,d.languageUtils=c,d.pluralResolver=new dqt(c,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),h&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(d.formatter=s(h),d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new pqt(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new vqt(s(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",function(p){for(var f=arguments.length,g=new Array(f>1?f-1:0),_=1;_<f;_++)g[_-1]=arguments[_];t.emit(p,...g)}),this.modules.languageDetector&&(d.languageDetector=s(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=s(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new hk(this.services,this.options),this.translator.on("*",function(p){for(var f=arguments.length,g=new Array(f>1?f-1:0),_=1;_<f;_++)g[_-1]=arguments[_];t.emit(p,...g)}),this.modules.external.forEach(p=>{p.init&&p.init(this)})}if(this.format=this.options.interpolation.format,i||(i=Jx),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=function(){return t.store[h](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=function(){return t.store[h](...arguments),t}});const l=Dv(),u=()=>{const h=(c,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(d),i(c,d)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),l}loadResources(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Jx;const r=typeof t=="string"?t:this.language;if(typeof t=="function"&&(i=t),!this.options.resources||this.options.partialBundledLanguages){if(r&&r.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const s=[],a=o=>{if(!o||o==="cimode")return;this.services.languageUtils.toResolveHierarchy(o).forEach(u=>{u!=="cimode"&&s.indexOf(u)<0&&s.push(u)})};r?a(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>a(l)),this.options.preload&&this.options.preload.forEach(o=>a(o)),this.services.backendConnector.load(s,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(o)})}else i(null)}reloadResources(t,e,i){const r=Dv();return t||(t=this.languages),e||(e=this.options.ns),i||(i=Jx),this.services.backendConnector.reload(t,e,s=>{r.resolve(),i(s)}),r}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&est.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let e=0;e<this.languages.length;e++){const i=this.languages[e];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}}changeLanguage(t,e){var i=this;this.isLanguageChangingTo=t;const r=Dv();this.emit("languageChanging",t);const s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},a=(l,u)=>{u?(s(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,r.resolve(function(){return i.t(...arguments)}),e&&e(l,function(){return i.t(...arguments)})},o=l=>{!t&&!l&&this.services.languageDetector&&(l=[]);const u=typeof l=="string"?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||s(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,h=>{a(h,u)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(t),r}getFixedT(t,e,i){var r=this;const s=function(a,o){let l;if(typeof o!="object"){for(var u=arguments.length,h=new Array(u>2?u-2:0),c=2;c<u;c++)h[c-2]=arguments[c];l=r.options.overloadTranslationOptionHandler([a,o].concat(h))}else l={...o};l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||i||s.keyPrefix);const d=r.options.keySeparator||".";let p;return l.keyPrefix&&Array.isArray(a)?p=a.map(f=>`${l.keyPrefix}${d}${f}`):p=l.keyPrefix?`${l.keyPrefix}${d}${a}`:a,r.t(p,l)};return typeof t=="string"?s.lng=t:s.lngs=t,s.ns=e,s.keyPrefix=i,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=e.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const u=this.services.backendConnector.state[`${o}|${l}`];return u===-1||u===2};if(e.precheck){const o=e.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(i,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(i,t)&&(!r||a(s,t)))}loadNamespaces(t,e){const i=Dv();return this.options.ns?(typeof t=="string"&&(t=[t]),t.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{i.resolve(),e&&e(r)}),i):(e&&e(),Promise.resolve())}loadLanguages(t,e){const i=Dv();typeof t=="string"&&(t=[t]);const r=this.options.preload||[],s=t.filter(a=>r.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return s.length?(this.options.preload=r.concat(s),this.loadResources(a=>{i.resolve(),e&&e(a)}),i):(e&&e(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";const e=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services&&this.services.languageUtils||new pU(mU());return e.indexOf(i.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new e1(t,e)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Jx;const i=t.forkResourceStore;i&&delete t.forkResourceStore;const r={...this.options,...t,isClone:!0},s=new e1(r);return(t.debug!==void 0||t.prefix!==void 0)&&(s.logger=s.logger.clone(t)),["store","services","language"].forEach(o=>{s[o]=this[o]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},i&&(s.store=new cU(this.store.data,r),s.services.resourceStore=s.store),s.translator=new hk(s.services,r),s.translator.on("*",function(o){for(var l=arguments.length,u=new Array(l>1?l-1:0),h=1;h<l;h++)u[h-1]=arguments[h];s.emit(o,...u)}),s.init(r,e),s.translator.options=r,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Jr=e1.createInstance();Jr.createInstance=e1.createInstance;Jr.createInstance;Jr.dir;Jr.init;Jr.loadResources;Jr.reloadResources;Jr.use;Jr.changeLanguage;Jr.getFixedT;Jr.t;Jr.exists;Jr.setDefaultNamespace;Jr.hasLoadedNamespace;Jr.loadNamespaces;Jr.loadLanguages;const yqt=[{key:"/",value:"Home",index:"0"},{key:"/api",value:"API",index:"1"},{key:"/gallery",value:"Gallery",index:"2"}],bqt="An algorithm visualization library based on schema.",xqt="Finite DataStructures & Infinite Algorithms.",Sqt=[{key:"APIs",value:"api",index:"1"},{key:"Gallerys",value:"gallery",index:"2"}],Aqt={title:"Design Goal",content:"My main goal is algorithm visualization, but it is not easy to visualize the execution process of the Algorithm."},wqt={title:"API",content:"According to our design goals, before the algorithm can be visualized, the data structure needs to be visualized firstly. I have listed the data structures and interfaces I have implemented. Here you can intuitively understand how to use each interface. In most cases, the execution of each line of code is animated to help you understand the change in structure."},Cqt={title:"Gallery",content:"Here is the algorithm gallery.",algorithmList:[{title:"Brute Force",algorithms:["Bubble Sort"]},{title:"dp",algorithms:["Fibonacci Numbers","Climbing stairs"]},{title:"Conquer",algorithms:["Insert Sort","Quick Sort"]}]},kqt={menuList:yqt,title:bqt,subTitle:xqt,menuButton:Sqt,designGoal:Aqt,api:wqt,gallery:Cqt},Tqt=[{key:"/",value:"首页",index:"0"},{key:"/api",value:"接口文档",index:"1"},{key:"/gallery",value:"算法画廊",index:"2"}],Mqt="一个基于标准的算法可视化库。",Pqt="有限的数据结构，无限的算法。",Eqt=[{key:"接口文档",value:"api",index:"1"},{key:"算法画廊",value:"gallery",index:"2"}],Oqt={title:"设计目标",content:"主要目标是算法可视化，但要将算法的执行过程可视化并不容易。"},Rqt={title:"接口",content:"根据我的设计目标，在算法可视化之前，需要先将数据结构可视化。这里列出了所实现的数据结构和接口，可以直观地了解每个接口如何使用。在大多数情况下，每行代码的执行都是动画，以帮助你了解结构的变化。"},Iqt={title:"算法画廊",content:"这里是算法画廊。",algorithmList:[{title:"暴力",algorithms:["冒泡排序"]},{title:"动态规划",algorithms:["斐波那契数列","爬楼梯"]},{title:"分(减)治",algorithms:["插入排序","快速排序"]}]},Lqt={menuList:Tqt,title:Mqt,subTitle:Pqt,menuButton:Eqt,designGoal:Oqt,api:Rqt,gallery:Iqt},Dqt="zh";Jr.use(iCt).init({fallbackLng:Dqt,interpolation:{escapeValue:!1},resources:{en:{translation:kqt},zh:{translation:Lqt}}});pO.createRoot(document.getElementById("root")).render(_t.jsx(Ygt,{children:_t.jsxs($gt,{children:[_t.jsx(cS,{index:!0,path:"/",element:_t.jsx(cO,{children:_t.jsx(GKt,{})})}),_t.jsx(cS,{path:"/api",element:_t.jsx(cO,{children:_t.jsx($wt,{})})}),_t.jsx(cS,{path:"/gallery",element:_t.jsx(cO,{children:_t.jsx(IKt,{})})})]})}));
